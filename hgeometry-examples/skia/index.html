<!DOCTYPE html>
<html class="has-navbar-fixed-top has-navbar-fixed-bottom">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/bulmaswatch/sandstone/bulmaswatch.min.css">
    <script type="text/javascript" src="jsaddle.js"></script>
    <script type="text/javascript"
            src="https://unpkg.com/canvaskit-wasm@0.39.1/bin/canvaskit.js"></script>
    <title>Skia</title>
  </head>
  <body>
    <script type="text/javascript">
      function fitToContainer(canvas){
        canvas.width  = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        return (canvas.offsetWidth, canvas.offsetHeight)
      }

     initializeSkiaCanvas('mainCanvas');

     function initializeSkiaCanvas(theCanvasId) {
       const ckLoaded = CanvasKitInit({
         locateFile: (file) => 'https://unpkg.com/canvaskit-wasm@0.39.1/bin/'+file});
       ckLoaded.then((CanvasKit) => {
         fitToContainer(document.getElementById(theCanvasId));

         const surface = CanvasKit.MakeCanvasSurface(theCanvasId);

         const paint = new CanvasKit.Paint();
         paint.setColor(CanvasKit.Color4f(0.9, 0.5, 0, 0.2));
         paint.setStyle(CanvasKit.PaintStyle.Fill);
         /* paint.setStyle(CanvasKit.PaintStyle.); */
         paint.setAntiAlias(true);

         const paint2 = new CanvasKit.Paint();
         paint2.setColor(CanvasKit.Color4f(0.9, 0.0, 0.5, 1.0));
         paint2.setStyle(CanvasKit.PaintStyle.Stroke);
         paint2.setAntiAlias(true);

         const rr = CanvasKit.RRectXY(CanvasKit.LTRBRect(10, 60, 210, 260), 0, 0);

         const cmds = [
           [CanvasKit.MOVE_VERB, 0, 10],
           [CanvasKit.LINE_VERB, 30, 40],
           [CanvasKit.QUAD_VERB, 20, 50, 45, 60],
         ];

         /* const path = new CanvasKit.Path.FromCmds(cmds); */
         const path = new CanvasKit.Path();
         path.moveTo(200, 50);
         path.lineTo(300, 200);
         path.lineTo(400, 100);
         path.lineTo(500, 200);
         path.lineTo(600, 0);
         path.lineTo(200, 50);
         /* * path.arcToTangent(150, 100, 50, 200, 20); */
         surface.drawOnce(draw);

         function draw(canvas) {
           canvas.clear(CanvasKit.WHITE);
           canvas.drawRRect(rr, paint);
           canvas.drawRRect(rr, paint2);
           canvas.drawPath(path, paint2);
         }

         /* path.delete(); */

       });

     }

    </script>
  </body>
</html>
