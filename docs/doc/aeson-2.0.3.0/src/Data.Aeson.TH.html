<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621679181357"><span id="local-6989586621679181358"></span></span><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskellQuotes #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-comment">{-|
Module:      Data.Aeson.TH
Copyright:   (c) 2011-2016 Bryan O'Sullivan
             (c) 2011 MailRank, Inc.
License:     BSD3
Stability:   experimental
Portability: portable

Functions to mechanically derive 'ToJSON' and 'FromJSON' instances. Note that
you need to enable the @TemplateHaskell@ language extension in order to use this
module.

An example shows how instances are generated for arbitrary data types. First we
define a data type:

@
data D a = Nullary
         | Unary Int
         | Product String Char a
         | Record { testOne   :: Double
                  , testTwo   :: Bool
                  , testThree :: D a
                  } deriving Eq
@

Next we derive the necessary instances. Note that we make use of the
feature to change record field names. In this case we drop the first 4
characters of every field name. We also modify constructor names by
lower-casing them:

@
$('deriveJSON' 'defaultOptions'{'fieldLabelModifier' = 'drop' 4, 'constructorTagModifier' = map toLower} ''D)
@

Now we can use the newly created instances.

@
d :: D 'Int'
d = Record { testOne = 3.14159
           , testTwo = 'True'
           , testThree = Product \&quot;test\&quot; \'A\' 123
           }
@

@
fromJSON (toJSON d) == Success d
@

This also works for data family instances, but instead of passing in the data
family name (with double quotes), we pass in a data family instance
constructor (with a single quote):

@
data family DF a
data instance DF Int = DF1 Int
                     | DF2 Int Int
                     deriving Eq

$('deriveJSON' 'defaultOptions' 'DF1)
-- Alternatively, one could pass 'DF2 instead
@

Please note that you can derive instances for tuples using the following syntax:

@
-- FromJSON and ToJSON instances for 4-tuples.
$('deriveJSON' 'defaultOptions' ''(,,,))
@

-}</span><span>
</span><span id="line-79"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Aeson.TH</span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-81"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Encoding configuration</span></span><span>
</span><span id="line-82"></span><span>      </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier">Options</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#SumEncoding"><span class="hs-identifier">SumEncoding</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#defaultOptions"><span class="hs-identifier">defaultOptions</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#defaultTaggedObject"><span class="hs-identifier">defaultTaggedObject</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>     </span><span class="annot"><span class="hs-comment">-- * FromJSON and ToJSON derivation</span></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON"><span class="hs-identifier">deriveJSON</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON1"><span class="hs-identifier">deriveJSON1</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON2"><span class="hs-identifier">deriveJSON2</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON"><span class="hs-identifier">deriveToJSON</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON1"><span class="hs-identifier">deriveToJSON1</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON2"><span class="hs-identifier">deriveToJSON2</span></a></span><span>
</span><span id="line-95"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON"><span class="hs-identifier">deriveFromJSON</span></a></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON1"><span class="hs-identifier">deriveFromJSON1</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON2"><span class="hs-identifier">deriveFromJSON2</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkToJSON"><span class="hs-identifier">mkToJSON</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToJSON"><span class="hs-identifier">mkLiftToJSON</span></a></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToJSON2"><span class="hs-identifier">mkLiftToJSON2</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkToEncoding"><span class="hs-identifier">mkToEncoding</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToEncoding"><span class="hs-identifier">mkLiftToEncoding</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToEncoding2"><span class="hs-identifier">mkLiftToEncoding2</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkParseJSON"><span class="hs-identifier">mkParseJSON</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftParseJSON"><span class="hs-identifier">mkLiftParseJSON</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftParseJSON2"><span class="hs-identifier">mkLiftParseJSON2</span></a></span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude.Compat</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fail</span></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- We don't have MonadFail Q, so we should use `fail` from real `Prelude`</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fail</span></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;|&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ord</span></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Object"><span class="hs-identifier">Object</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html#.%3A"><span class="hs-operator">(.:)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html#FromJSON"><span class="hs-identifier">FromJSON</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html#FromJSON1"><span class="hs-identifier">FromJSON1</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html#FromJSON2"><span class="hs-identifier">FromJSON2</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier">ToJSON</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html#ToJSON1"><span class="hs-identifier">ToJSON1</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html#ToJSON2"><span class="hs-identifier">ToJSON2</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Types.html"><span class="hs-identifier">Data.Aeson.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier">Options</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#SumEncoding"><span class="hs-identifier">SumEncoding</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier">Value</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#defaultOptions"><span class="hs-identifier">defaultOptions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#defaultTaggedObject"><span class="hs-identifier">defaultTaggedObject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html"><span class="hs-identifier">Data.Aeson.Types.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#%3C%3F%3E"><span class="hs-operator">(&lt;?&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#JSONPathElement"><span class="hs-identifier">JSONPathElement</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Key"><span class="hs-identifier">Key</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html"><span class="hs-identifier">Data.Aeson.Types.FromJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.FromJSON.html#parseOptionalFieldWith"><span class="hs-identifier">parseOptionalFieldWith</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html"><span class="hs-identifier">Data.Aeson.Types.ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html#fromPairs"><span class="hs-identifier">fromPairs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.Types.ToJSON.html#pair"><span class="hs-identifier">pair</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Key.html"><span class="hs-identifier">Data.Aeson.Key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Key.html#Key"><span class="hs-identifier">Key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Aeson.Key.html"><span class="hs-identifier">Data.Aeson.Key</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Key</span></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Aeson.KeyMap.html"><span class="hs-identifier">Data.Aeson.KeyMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">KM</span></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftM2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unless</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldr'</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,8,0) &amp;&amp; !MIN_VERSION_template_haskell(2,10,0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">nub</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">genericLength</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">intercalate</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">partition</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">union</span></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;|)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Monoid</span></span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Arity</span></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Datatype</span></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,8,0) &amp;&amp; !(MIN_VERSION_template_haskell(2,10,0))
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Language.Haskell.TH.Syntax</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">mkNameG_tc</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Printf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">printf</span></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Data.Aeson.Encoding.Internal.html"><span class="hs-identifier">Data.Aeson.Encoding.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">F</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">all</span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">length</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">reverse</span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromList</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">keys</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookup</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">singleton</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">size</span></span><span class="hs-special">)</span><span class="hs-cpp">
#if !MIN_VERSION_base(4,16,0)
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Semigroup</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Option</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">insert</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">member</span></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">pack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unpack</span></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">V</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafeIndex</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">length</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">create</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector.Mutable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafeNew</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unsafeWrite</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Short</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ST</span></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Short</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ShortByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Internal.ByteString.html"><span class="hs-identifier">Data.Aeson.Internal.ByteString</span></a></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Aeson.Internal.TH.html"><span class="hs-identifier">Data.Aeson.Internal.TH</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- Convenience</span><span>
</span><span id="line-160"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-comment">-- | Generates both 'ToJSON' and 'FromJSON' instance declarations for the given</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- data type or data family instance constructor.</span><span>
</span><span id="line-164"></span><span class="hs-comment">--</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- This is a convenience function which is equivalent to calling both</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- 'deriveToJSON' and 'deriveFromJSON'.</span><span>
</span><span id="line-167"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON"><span class="hs-identifier hs-type">deriveJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-168"></span><span>           </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-169"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-170"></span><span>           </span><span class="hs-comment">-- ^ Name of the type for which to generate 'ToJSON' and 'FromJSON'</span><span>
</span><span id="line-171"></span><span>           </span><span class="hs-comment">-- instances.</span><span>
</span><span id="line-172"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span id="deriveJSON"><span class="annot"><span class="annottext">deriveJSON :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSON"><span class="hs-identifier hs-var hs-var">deriveJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Options -&gt; Name -&gt; Q [Dec])
-&gt; (Options -&gt; Name -&gt; Q [Dec]) -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONBoth"><span class="hs-identifier hs-var">deriveJSONBoth</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON"><span class="hs-identifier hs-var">deriveToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON"><span class="hs-identifier hs-var">deriveFromJSON</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">-- | Generates both 'ToJSON1' and 'FromJSON1' instance declarations for the given</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- data type or data family instance constructor.</span><span>
</span><span id="line-177"></span><span class="hs-comment">--</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- This is a convenience function which is equivalent to calling both</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- 'deriveToJSON1' and 'deriveFromJSON1'.</span><span>
</span><span id="line-180"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON1"><span class="hs-identifier hs-type">deriveJSON1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-181"></span><span>            </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-182"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-183"></span><span>            </span><span class="hs-comment">-- ^ Name of the type for which to generate 'ToJSON1' and 'FromJSON1'</span><span>
</span><span id="line-184"></span><span>            </span><span class="hs-comment">-- instances.</span><span>
</span><span id="line-185"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-186"></span><span id="deriveJSON1"><span class="annot"><span class="annottext">deriveJSON1 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSON1"><span class="hs-identifier hs-var hs-var">deriveJSON1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Options -&gt; Name -&gt; Q [Dec])
-&gt; (Options -&gt; Name -&gt; Q [Dec]) -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONBoth"><span class="hs-identifier hs-var">deriveJSONBoth</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON1"><span class="hs-identifier hs-var">deriveToJSON1</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON1"><span class="hs-identifier hs-var">deriveFromJSON1</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="hs-comment">-- | Generates both 'ToJSON2' and 'FromJSON2' instance declarations for the given</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- data type or data family instance constructor.</span><span>
</span><span id="line-190"></span><span class="hs-comment">--</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- This is a convenience function which is equivalent to calling both</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- 'deriveToJSON2' and 'deriveFromJSON2'.</span><span>
</span><span id="line-193"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSON2"><span class="hs-identifier hs-type">deriveJSON2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-195"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-196"></span><span>            </span><span class="hs-comment">-- ^ Name of the type for which to generate 'ToJSON2' and 'FromJSON2'</span><span>
</span><span id="line-197"></span><span>            </span><span class="hs-comment">-- instances.</span><span>
</span><span id="line-198"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span id="deriveJSON2"><span class="annot"><span class="annottext">deriveJSON2 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSON2"><span class="hs-identifier hs-var hs-var">deriveJSON2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Options -&gt; Name -&gt; Q [Dec])
-&gt; (Options -&gt; Name -&gt; Q [Dec]) -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONBoth"><span class="hs-identifier hs-var">deriveJSONBoth</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON2"><span class="hs-identifier hs-var">deriveToJSON2</span></a></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON2"><span class="hs-identifier hs-var">deriveFromJSON2</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-202"></span><span class="hs-comment">-- ToJSON</span><span>
</span><span id="line-203"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">{-
TODO: Don't constrain phantom type variables.

data Foo a = Foo Int
instance (ToJSON a) &#8658; ToJSON Foo where ...

The above (ToJSON a) constraint is not necessary and perhaps undesirable.
-}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Generates a 'ToJSON' instance declaration for the given data type or</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-216"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON"><span class="hs-identifier hs-type">deriveToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-217"></span><span>             </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-218"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-219"></span><span>             </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'ToJSON' instance</span><span>
</span><span id="line-220"></span><span>             </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-221"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-222"></span><span id="deriveToJSON"><span class="annot"><span class="annottext">deriveToJSON :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON"><span class="hs-identifier hs-var hs-var">deriveToJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSONCommon"><span class="hs-identifier hs-var">deriveToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSONClass"><span class="hs-identifier hs-var">toJSONClass</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">-- | Generates a 'ToJSON1' instance declaration for the given data type or</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-226"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON1"><span class="hs-identifier hs-type">deriveToJSON1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-227"></span><span>              </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-228"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-229"></span><span>              </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'ToJSON1' instance</span><span>
</span><span id="line-230"></span><span>              </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-231"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-232"></span><span id="deriveToJSON1"><span class="annot"><span class="annottext">deriveToJSON1 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON1"><span class="hs-identifier hs-var hs-var">deriveToJSON1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSONCommon"><span class="hs-identifier hs-var">deriveToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON1Class"><span class="hs-identifier hs-var">toJSON1Class</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">-- | Generates a 'ToJSON2' instance declaration for the given data type or</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-236"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSON2"><span class="hs-identifier hs-type">deriveToJSON2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-237"></span><span>              </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-238"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-239"></span><span>              </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'ToJSON2' instance</span><span>
</span><span id="line-240"></span><span>              </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-241"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-242"></span><span id="deriveToJSON2"><span class="annot"><span class="annottext">deriveToJSON2 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSON2"><span class="hs-identifier hs-var hs-var">deriveToJSON2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSONCommon"><span class="hs-identifier hs-var">deriveToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON2Class"><span class="hs-identifier hs-var">toJSON2Class</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveToJSONCommon"><span class="hs-identifier hs-type">deriveToJSONCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-245"></span><span>                   </span><span class="hs-comment">-- ^ The ToJSON variant being derived.</span><span>
</span><span id="line-246"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-247"></span><span>                   </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-248"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-249"></span><span>                   </span><span class="hs-comment">-- ^ Name of the type for which to generate an instance.</span><span>
</span><span id="line-250"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-251"></span><span id="deriveToJSONCommon"><span class="annot"><span class="annottext">deriveToJSONCommon :: JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveToJSONCommon"><span class="hs-identifier hs-var hs-var">deriveToJSONCommon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(JSONFun,
  JSONClass
  -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)]
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONClass"><span class="hs-identifier hs-var">deriveJSONClass</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-glyph">\</span><span id="local-6989586621679180960"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180960"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var">consToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180960"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180956"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180956"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var">consToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180956"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>                                     </span><span class="hs-special">]</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- data family instance constructor as a 'Value'.</span><span>
</span><span id="line-257"></span><span class="annot"><a href="Data.Aeson.TH.html#mkToJSON"><span class="hs-identifier hs-type">mkToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-258"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-259"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-260"></span><span id="mkToJSON"><span class="annot"><span class="annottext">mkToJSON :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToJSON"><span class="hs-identifier hs-var hs-var">mkToJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToJSONCommon"><span class="hs-identifier hs-var">mkToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSONClass"><span class="hs-identifier hs-var">toJSONClass</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- data family instance constructor as a 'Value' by using the given encoding</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- function on occurrences of the last type parameter.</span><span>
</span><span id="line-265"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToJSON"><span class="hs-identifier hs-type">mkLiftToJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-266"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-267"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-268"></span><span id="mkLiftToJSON"><span class="annot"><span class="annottext">mkLiftToJSON :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftToJSON"><span class="hs-identifier hs-var hs-var">mkLiftToJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToJSONCommon"><span class="hs-identifier hs-var">mkToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON1Class"><span class="hs-identifier hs-var">toJSON1Class</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- data family instance constructor as a 'Value' by using the given encoding</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- functions on occurrences of the last two type parameters.</span><span>
</span><span id="line-273"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToJSON2"><span class="hs-identifier hs-type">mkLiftToJSON2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-274"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-275"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-276"></span><span id="mkLiftToJSON2"><span class="annot"><span class="annottext">mkLiftToJSON2 :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftToJSON2"><span class="hs-identifier hs-var hs-var">mkLiftToJSON2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToJSONCommon"><span class="hs-identifier hs-var">mkToJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON2Class"><span class="hs-identifier hs-var">toJSON2Class</span></a></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="Data.Aeson.TH.html#mkToJSONCommon"><span class="hs-identifier hs-type">mkToJSONCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-comment">-- ^ Which class's method is being derived.</span><span>
</span><span id="line-279"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-280"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-281"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-282"></span><span id="mkToJSONCommon"><span class="annot"><span class="annottext">mkToJSONCommon :: JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToJSONCommon"><span class="hs-identifier hs-var hs-var">mkToJSONCommon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(JSONClass
 -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkFunCommon"><span class="hs-identifier hs-var">mkFunCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180952"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180952"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var">consToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180952"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- data family instance constructor as a JSON string.</span><span>
</span><span id="line-286"></span><span class="annot"><a href="Data.Aeson.TH.html#mkToEncoding"><span class="hs-identifier hs-type">mkToEncoding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-287"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-288"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-289"></span><span id="mkToEncoding"><span class="annot"><span class="annottext">mkToEncoding :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToEncoding"><span class="hs-identifier hs-var hs-var">mkToEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToEncodingCommon"><span class="hs-identifier hs-var">mkToEncodingCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSONClass"><span class="hs-identifier hs-var">toJSONClass</span></a></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- data family instance constructor as a JSON string by using the given encoding</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- function on occurrences of the last type parameter.</span><span>
</span><span id="line-294"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToEncoding"><span class="hs-identifier hs-type">mkLiftToEncoding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-295"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-296"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-297"></span><span id="mkLiftToEncoding"><span class="annot"><span class="annottext">mkLiftToEncoding :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftToEncoding"><span class="hs-identifier hs-var hs-var">mkLiftToEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToEncodingCommon"><span class="hs-identifier hs-var">mkToEncodingCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON1Class"><span class="hs-identifier hs-var">toJSON1Class</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- | Generates a lambda expression which encodes the given data type or</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- data family instance constructor as a JSON string by using the given encoding</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- functions on occurrences of the last two type parameters.</span><span>
</span><span id="line-302"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftToEncoding2"><span class="hs-identifier hs-type">mkLiftToEncoding2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-303"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to encode.</span><span>
</span><span id="line-304"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-305"></span><span id="mkLiftToEncoding2"><span class="annot"><span class="annottext">mkLiftToEncoding2 :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftToEncoding2"><span class="hs-identifier hs-var hs-var">mkLiftToEncoding2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToEncodingCommon"><span class="hs-identifier hs-var">mkToEncodingCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#toJSON2Class"><span class="hs-identifier hs-var">toJSON2Class</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="annot"><a href="Data.Aeson.TH.html#mkToEncodingCommon"><span class="hs-identifier hs-type">mkToEncodingCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-comment">-- ^ Which class's method is being derived.</span><span>
</span><span id="line-308"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-309"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-310"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-311"></span><span id="mkToEncodingCommon"><span class="annot"><span class="annottext">mkToEncodingCommon :: JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkToEncodingCommon"><span class="hs-identifier hs-var hs-var">mkToEncodingCommon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(JSONClass
 -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkFunCommon"><span class="hs-identifier hs-var">mkFunCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180950"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180950"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var">consToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180950"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-keyword">type</span><span> </span><span id="LetInsert"><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-var">LetInsert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShortByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">-- | Helper function used by both 'deriveToJSON' and 'mkToJSON'. Generates</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- code to generate a 'Value' or 'Encoding' of a number of constructors. All</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- constructors must be from the same type.</span><span>
</span><span id="line-318"></span><span class="annot"><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-type">consToValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span>
</span><span id="line-319"></span><span>            </span><span class="hs-comment">-- ^ The method ('toJSON' or 'toEncoding') being derived.</span><span>
</span><span id="line-320"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-comment">-- ^ The ToJSON variant being derived.</span><span>
</span><span id="line-322"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-323"></span><span>            </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-324"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-325"></span><span>            </span><span class="hs-comment">-- ^ The types from the data type/data family instance declaration</span><span>
</span><span id="line-326"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-327"></span><span>            </span><span class="hs-comment">-- ^ Constructors for which to generate JSON generating code.</span><span>
</span><span id="line-328"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span id="consToValue"><span class="annot"><span class="annottext">consToValue :: ToJSONFun
-&gt; JSONClass -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var hs-var">consToValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data.Aeson.TH.consToValue: &quot;</span></span><span>
</span><span id="line-331"></span><span>                             </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not a single constructor given!&quot;</span></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="annot"><a href="Data.Aeson.TH.html#consToValue"><span class="hs-identifier hs-var">consToValue</span></a></span><span> </span><span id="local-6989586621679180947"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180947"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180946"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180945"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180944"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180944"><span class="hs-identifier hs-var">instTys</span></a></span></span><span> </span><span id="local-6989586621679180943"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180943"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; (a -&gt; Q Exp) -&gt; ((a -&gt; Q Exp) -&gt; Q Exp) -&gt; Q Exp
</span><a href="Data.Aeson.Internal.TH.html#autoletE"><span class="hs-identifier hs-var">autoletE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="Data.Aeson.Internal.ByteString.html#liftSBS"><span class="hs-identifier hs-var">liftSBS</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679180940"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180940"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-334"></span><span>    </span><span id="local-6989586621679180939"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180939"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value&quot;</span></span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621679180938"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180938"><span class="hs-identifier hs-var">tjs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_tj&quot;</span></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621679180935"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180935"><span class="hs-identifier hs-var">tjls</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_tjl&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180934"><span class="annot"><span class="annottext">zippedTJs :: [(Name, Name)]
</span><a href="#local-6989586621679180934"><span class="hs-identifier hs-var hs-var">zippedTJs</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180938"><span class="hs-identifier hs-var">tjs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180935"><span class="hs-identifier hs-var">tjls</span></a></span><span>
</span><span id="line-338"></span><span>        </span><span id="local-6989586621679180933"><span class="annot"><span class="annottext">interleavedTJs :: [Name]
</span><a href="#local-6989586621679180933"><span class="hs-identifier hs-var hs-var">interleavedTJs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var">interleave</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180938"><span class="hs-identifier hs-var">tjs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180935"><span class="hs-identifier hs-var">tjls</span></a></span><span>
</span><span id="line-339"></span><span>        </span><span id="local-6989586621679180929"><span class="annot"><span class="annottext">lastTyVars :: [Name]
</span><a href="#local-6989586621679180929"><span class="hs-identifier hs-var hs-var">lastTyVars</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Name
</span><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-var">varTToName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180944"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180944"><span class="hs-identifier hs-var">instTys</span></a></span><span>
</span><span id="line-340"></span><span>        </span><span id="local-6989586621679180924"><span class="annot"><span class="annottext">tvMap :: Map Name (Name, Name)
</span><a href="#local-6989586621679180924"><span class="hs-identifier hs-var hs-var">tvMap</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180929"><span class="hs-identifier hs-var">lastTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Name)]
</span><a href="#local-6989586621679180934"><span class="hs-identifier hs-var">zippedTJs</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180933"><span class="hs-identifier hs-var">interleavedTJs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180939"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-342"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180939"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp) -&gt; Map Name (Name, Name) -&gt; [Q Match]
</span><a href="#local-6989586621679180923"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180940"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180924"><span class="hs-identifier hs-var">tvMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621679180923"><span class="annot"><span class="annottext">matches :: (ShortByteString -&gt; Q Exp) -&gt; Map Name (Name, Name) -&gt; [Q Match]
</span><a href="#local-6989586621679180923"><span class="hs-identifier hs-var hs-var">matches</span></a></span></span><span> </span><span id="local-6989586621679180918"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180918"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180917"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180917"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180943"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-345"></span><span>      </span><span class="hs-comment">-- A single constructor is directly encoded. The constructor itself may be</span><span>
</span><span id="line-346"></span><span>      </span><span class="hs-comment">-- forgotten.</span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621679180916"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180916"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#tagSingleConstructors"><span class="hs-identifier hs-var">tagSingleConstructors</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; JSONClass
-&gt; Map Name (Name, Name)
-&gt; Options
-&gt; Bool
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var">argsToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180918"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180947"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180917"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180916"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#allNullaryToStringTag"><span class="hs-identifier hs-var">allNullaryToStringTag</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Bool
</span><a href="Data.Aeson.TH.html#isNullary"><span class="hs-identifier hs-var">isNullary</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180943"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-349"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180908"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var">conStr</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180947"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180908"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-350"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679180906"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180906"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180943"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-351"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180908"><span class="annot"><span class="annottext">conName :: Name
</span><a href="#local-6989586621679180908"><span class="hs-identifier hs-var hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180906"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-352"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-353"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; JSONClass
-&gt; Map Name (Name, Name)
-&gt; Options
-&gt; Bool
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var">argsToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180918"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180947"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180946"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180917"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180945"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180904"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679180904"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180904"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180943"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">-- | Name of the constructor as a quoted 'Value' or 'Encoding'.</span><span>
</span><span id="line-356"></span><span class="annot"><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-type">conStr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-357"></span><span id="conStr"><span class="annot"><span class="annottext">conStr :: ToJSONFun -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var hs-var">conStr</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span id="local-6989586621679180903"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180903"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">String</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-var">conTxt</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180903"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-358"></span><span class="annot"><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var">conStr</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span id="local-6989586621679180900"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180900"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">E.text</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-var">conTxt</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180900"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-comment">-- | Name of the constructor as a quoted 'Text'.</span><span>
</span><span id="line-361"></span><span class="annot"><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-type">conTxt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-362"></span><span id="conTxt"><span class="annot"><span class="annottext">conTxt :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-var hs-var">conTxt</span></a></span></span><span> </span><span id="local-6989586621679180899"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180899"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">T.pack</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Exp
</span><span class="hs-identifier hs-var">stringE</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#conString"><span class="hs-identifier hs-var">conString</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180899"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-comment">-- | Name of the constructor.</span><span>
</span><span id="line-365"></span><span class="annot"><a href="Data.Aeson.TH.html#conString"><span class="hs-identifier hs-type">conString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-366"></span><span id="conString"><span class="annot"><span class="annottext">conString :: Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#conString"><span class="hs-identifier hs-var hs-var">conString</span></a></span></span><span> </span><span id="local-6989586621679180896"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180896"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; String -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#constructorTagModifier"><span class="hs-identifier hs-var">constructorTagModifier</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180896"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-comment">-- | If constructor is nullary.</span><span>
</span><span id="line-369"></span><span class="annot"><a href="Data.Aeson.TH.html#isNullary"><span class="hs-identifier hs-type">isNullary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-370"></span><span id="isNullary"><span class="annot"><span class="annottext">isNullary :: ConstructorInfo -&gt; Bool
</span><a href="Data.Aeson.TH.html#isNullary"><span class="hs-identifier hs-var hs-var">isNullary</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-371"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180889"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180889"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180889"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-372"></span><span class="annot"><a href="Data.Aeson.TH.html#isNullary"><span class="hs-identifier hs-var">isNullary</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="hs-comment">-- | Wrap fields of a non-record constructor. See 'sumToValue'.</span><span>
</span><span id="line-375"></span><span class="annot"><a href="Data.Aeson.TH.html#opaqueSumToValue"><span class="hs-identifier hs-type">opaqueSumToValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-376"></span><span id="opaqueSumToValue"><span class="annot"><span class="annottext">opaqueSumToValue :: (ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; Options -&gt; Bool -&gt; Bool -&gt; Name -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#opaqueSumToValue"><span class="hs-identifier hs-var hs-var">opaqueSumToValue</span></a></span></span><span> </span><span id="local-6989586621679180886"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180886"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180885"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180885"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180884"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180884"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180883"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180883"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span> </span><span id="local-6989586621679180882"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180882"><span class="hs-identifier hs-var">nullary</span></a></span></span><span> </span><span id="local-6989586621679180881"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180881"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180880"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180880"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; Options
-&gt; Bool
-&gt; Bool
-&gt; Name
-&gt; Q Exp
-&gt; (String -&gt; Q Exp)
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#sumToValue"><span class="hs-identifier hs-var">sumToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180886"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180885"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180884"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180883"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180882"><span class="hs-identifier hs-var">nullary</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180881"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180880"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Q Exp
</span><a href="#local-6989586621679180878"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621679180878"><span class="annot"><span class="annottext">pairs :: String -&gt; Q Exp
</span><a href="#local-6989586621679180878"><span class="hs-identifier hs-var hs-var">pairs</span></a></span></span><span> </span><span id="local-6989586621679180877"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180877"><span class="hs-identifier hs-var">contentsFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp) -&gt; ToJSONFun -&gt; String -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var">pairE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180886"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180885"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180877"><span class="hs-identifier hs-var">contentsFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180880"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-comment">-- | Wrap fields of a record constructor. See 'sumToValue'.</span><span>
</span><span id="line-384"></span><span class="annot"><a href="Data.Aeson.TH.html#recordSumToValue"><span class="hs-identifier hs-type">recordSumToValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-385"></span><span id="recordSumToValue"><span class="annot"><span class="annottext">recordSumToValue :: (ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; Options -&gt; Bool -&gt; Bool -&gt; Name -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#recordSumToValue"><span class="hs-identifier hs-var hs-var">recordSumToValue</span></a></span></span><span> </span><span id="local-6989586621679180874"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180874"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180873"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180873"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180872"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180872"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180871"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180871"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span> </span><span id="local-6989586621679180870"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180870"><span class="hs-identifier hs-var">nullary</span></a></span></span><span> </span><span id="local-6989586621679180869"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180869"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180868"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180868"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; Options
-&gt; Bool
-&gt; Bool
-&gt; Name
-&gt; Q Exp
-&gt; (String -&gt; Q Exp)
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#sumToValue"><span class="hs-identifier hs-var">sumToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180874"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180873"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180872"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180871"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180870"><span class="hs-identifier hs-var">nullary</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180869"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ToJSONFun -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#fromPairsE"><span class="hs-identifier hs-var">fromPairsE</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180873"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180868"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180868"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">-- | Wrap fields of a constructor.</span><span>
</span><span id="line-391"></span><span class="annot"><a href="Data.Aeson.TH.html#sumToValue"><span class="hs-identifier hs-type">sumToValue</span></a></span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-comment">-- ^ Let insertion</span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-comment">-- ^ The method being derived.</span><span>
</span><span id="line-396"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-397"></span><span>  </span><span class="hs-comment">-- ^ Deriving options.</span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-comment">-- ^ Does this type have multiple constructors.</span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-401"></span><span>  </span><span class="hs-comment">-- ^ Is this constructor nullary.</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-comment">-- ^ Constructor name.</span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-comment">-- ^ Fields of the constructor as a 'Value' or 'Encoding'.</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-comment">-- ^ Representation of an 'Object' fragment used for the 'TaggedObject'</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-comment">-- variant; of type @[(Text,Value)]@ or @[Encoding]@, depending on the method</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-comment">-- being derived.</span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-comment">-- - For non-records, produces a pair @&quot;contentsFieldName&quot;:value@,</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-comment">--   given a @contentsFieldName@ as an argument. See 'opaqueSumToValue'.</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-comment">-- - For records, produces the list of pairs corresponding to fields of the</span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-comment">--   encoded value (ignores the argument). See 'recordSumToValue'.</span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-416"></span><span id="sumToValue"><span class="annot"><span class="annottext">sumToValue :: (ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; Options
-&gt; Bool
-&gt; Bool
-&gt; Name
-&gt; Q Exp
-&gt; (String -&gt; Q Exp)
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#sumToValue"><span class="hs-identifier hs-var hs-var">sumToValue</span></a></span></span><span> </span><span id="local-6989586621679180865"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180865"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180864"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180863"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180862"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180862"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span> </span><span id="local-6989586621679180861"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180861"><span class="hs-identifier hs-var">nullary</span></a></span></span><span> </span><span id="local-6989586621679180860"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180860"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180859"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679180858"><span class="annot"><span class="annottext">String -&gt; Q Exp
</span><a href="#local-6989586621679180858"><span class="hs-identifier hs-var">pairs</span></a></span></span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180862"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Options -&gt; SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#sumEncoding"><span class="hs-identifier hs-var">sumEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-419"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#TwoElemArray"><span class="hs-identifier hs-var">TwoElemArray</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-420"></span><span>            </span><span class="annot"><span class="annottext">ToJSONFun -&gt; [Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ToJSONFun -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var">conStr</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180860"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-421"></span><span>          </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#TaggedObject"><span class="hs-identifier hs-type">TaggedObject</span></a></span><span class="hs-special">{</span><span id="local-6989586621679180853"><span class="annot"><span class="annottext">String
tagFieldName :: SumEncoding -&gt; String
tagFieldName :: String
</span><a href="Data.Aeson.Types.Internal.html#tagFieldName"><span class="hs-identifier hs-var hs-var">tagFieldName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180851"><span class="annot"><span class="annottext">String
contentsFieldName :: SumEncoding -&gt; String
contentsFieldName :: String
</span><a href="Data.Aeson.Types.Internal.html#contentsFieldName"><span class="hs-identifier hs-var hs-var">contentsFieldName</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-422"></span><span>            </span><span class="hs-comment">-- TODO: Maybe throw an error in case</span><span>
</span><span id="line-423"></span><span>            </span><span class="hs-comment">-- tagFieldName overwrites a field in pairs.</span><span>
</span><span id="line-424"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180849"><span class="annot"><span class="annottext">tag :: Q Exp
</span><a href="#local-6989586621679180849"><span class="hs-identifier hs-var hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp) -&gt; ToJSONFun -&gt; String -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var">pairE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180865"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180853"><span class="hs-identifier hs-var">tagFieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ToJSONFun -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var">conStr</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180860"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span>                </span><span id="local-6989586621679180848"><span class="annot"><span class="annottext">content :: Q Exp
</span><a href="#local-6989586621679180848"><span class="hs-identifier hs-var hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q Exp
</span><a href="#local-6989586621679180858"><span class="hs-identifier hs-var">pairs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180851"><span class="hs-identifier hs-var">contentsFieldName</span></a></span><span>
</span><span id="line-426"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#fromPairsE"><span class="hs-identifier hs-var">fromPairsE</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-427"></span><span>              </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180861"><span class="hs-identifier hs-var">nullary</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180849"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180849"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">Monoid.&lt;&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180848"><span class="hs-identifier hs-var">content</span></a></span><span>
</span><span id="line-428"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#ObjectWithSingleField"><span class="hs-identifier hs-var">ObjectWithSingleField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-429"></span><span>            </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; [(String, Q Exp)] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#objectE"><span class="hs-identifier hs-var">objectE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180865"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#conString"><span class="hs-identifier hs-var">conString</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180860"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-430"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#UntaggedValue"><span class="hs-identifier hs-var">UntaggedValue</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180861"><span class="hs-identifier hs-var">nullary</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conStr"><span class="hs-identifier hs-var">conStr</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180864"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180863"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180860"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-431"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#UntaggedValue"><span class="hs-identifier hs-var">UntaggedValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-432"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180859"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">-- | Generates code to generate the JSON encoding of a single constructor.</span><span>
</span><span id="line-435"></span><span class="annot"><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-type">argsToValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-comment">-- Polyadic constructors with special case for unary constructors.</span><span>
</span><span id="line-438"></span><span id="argsToValue"><span class="annot"><span class="annottext">argsToValue :: (ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; JSONClass
-&gt; Map Name (Name, Name)
-&gt; Options
-&gt; Bool
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var hs-var">argsToValue</span></a></span></span><span> </span><span id="local-6989586621679180843"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180843"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180842"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180842"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180841"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180841"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180840"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180840"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180839"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180839"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180838"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180838"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180837"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180837"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-440"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-441"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180836"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180836"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-442"></span><span>    </span><span id="local-6989586621679180835"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180835"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180836"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180831"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621679180831"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180835"><span class="hs-identifier hs-var">argTys'</span></a></span><span>
</span><span id="line-444"></span><span>    </span><span id="local-6989586621679180830"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180830"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679180831"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180827"><span class="annot"><span class="annottext">js :: Q Exp
</span><a href="#local-6989586621679180827"><span class="hs-identifier hs-var hs-var">js</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchToJSON"><span class="hs-identifier hs-var">dispatchToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180842"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180841"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180837"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180840"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180825"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-446"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180824"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-447"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180824"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180824"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180825"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180825"><span class="hs-identifier hs-var">argTy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180830"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180835"><span class="hs-identifier hs-var">argTys'</span></a></span><span>
</span><span id="line-448"></span><span>                  </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-449"></span><span>               </span><span class="hs-comment">-- Single argument is directly converted.</span><span>
</span><span id="line-450"></span><span>               </span><span class="hs-special">[</span><span id="local-6989586621679180823"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180823"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180823"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-451"></span><span>               </span><span class="hs-comment">-- Zero and multiple arguments are converted to a JSON array.</span><span>
</span><span id="line-452"></span><span>               </span><span id="local-6989586621679180822"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180822"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; [Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180842"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180822"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180837"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180830"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; Options -&gt; Bool -&gt; Bool -&gt; Name -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#opaqueSumToValue"><span class="hs-identifier hs-var">opaqueSumToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180843"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180842"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180839"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180838"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180835"><span class="hs-identifier hs-var">argTys'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180837"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180827"><span class="hs-identifier hs-var">js</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-457"></span><span>
</span><span id="line-458"></span><span class="hs-comment">-- Records.</span><span>
</span><span id="line-459"></span><span class="annot"><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var">argsToValue</span></a></span><span> </span><span id="local-6989586621679180821"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180821"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180820"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180820"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180819"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180819"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180818"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180818"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180817"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180816"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180816"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621679180815"><span class="annot"><span class="annottext">info :: ConstructorInfo
</span><a href="#local-6989586621679180815"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180814"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180814"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-461"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecordConstructor</span></span><span> </span><span id="local-6989586621679180812"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180812"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-462"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180811"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180811"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#unwrapUnaryRecords"><span class="hs-identifier hs-var">unwrapUnaryRecords</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180816"><span class="hs-identifier hs-var">multiCons</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180811"><span class="hs-identifier hs-var">argTys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-464"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun
-&gt; JSONClass
-&gt; Map Name (Name, Name)
-&gt; Options
-&gt; Bool
-&gt; ConstructorInfo
-&gt; Q Match
</span><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var">argsToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180821"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180820"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180819"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180818"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180816"><span class="hs-identifier hs-var">multiCons</span></a></span><span>
</span><span id="line-465"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180815"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorVariant :: ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><span class="annottext">(Bool, Bool, [Type])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-467"></span><span>        </span><span id="local-6989586621679180809"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180809"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180811"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-468"></span><span>        </span><span id="local-6989586621679180808"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180808"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180809"><span class="hs-identifier hs-var">argTys'</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180805"><span class="annot"><span class="annottext">pairs :: Q Exp
</span><a href="#local-6989586621679180805"><span class="hs-identifier hs-var hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">omitNothingFields</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180803"><span class="hs-identifier hs-var">maybeFields</span></a></span><span>
</span><span id="line-470"></span><span>                                                      </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">Monoid.&lt;&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-471"></span><span>                                                      </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180802"><span class="hs-identifier hs-var">restFields</span></a></span><span>
</span><span id="line-472"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180800"><span class="hs-identifier hs-var">pureToPair</span></a></span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180799"><span class="hs-identifier hs-var">argCons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>
</span><span id="line-474"></span><span>            </span><span id="local-6989586621679180799"><span class="annot"><span class="annottext">argCons :: [(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180799"><span class="hs-identifier hs-var hs-var">argCons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><span class="hs-identifier hs-var">zip3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180808"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180809"><span class="hs-identifier hs-var">argTys'</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180812"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>            </span><span id="local-6989586621679180803"><span class="annot"><span class="annottext">maybeFields :: Q Exp
</span><a href="#local-6989586621679180803"><span class="hs-identifier hs-var hs-var">maybeFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180796"><span class="hs-identifier hs-var">maybeToPair</span></a></span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180795"><span class="hs-identifier hs-var">maybes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span>            </span><span id="local-6989586621679180802"><span class="annot"><span class="annottext">restFields :: Q Exp
</span><a href="#local-6989586621679180802"><span class="hs-identifier hs-var hs-var">restFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180800"><span class="hs-identifier hs-var">pureToPair</span></a></span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180794"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679180793"><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180793"><span class="hs-identifier hs-var">maybes0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180792"><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180792"><span class="hs-identifier hs-var">rest0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">partition</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, Type, b) -&gt; Bool
</span><a href="Data.Aeson.TH.html#isMaybe"><span class="hs-identifier hs-var">isMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180799"><span class="hs-identifier hs-var">argCons</span></a></span><span class="hs-cpp">
#if MIN_VERSION_base(4,16,0)
</span><span>            </span><span id="local-6989586621679180795"><span class="annot"><span class="annottext">maybes :: [(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180795"><span class="hs-identifier hs-var hs-var">maybes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180793"><span class="hs-identifier hs-var">maybes0</span></a></span><span>
</span><span id="line-483"></span><span>            </span><span id="local-6989586621679180794"><span class="annot"><span class="annottext">rest :: [(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180794"><span class="hs-identifier hs-var hs-var">rest</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Q Exp, Type, Name)]
</span><a href="#local-6989586621679180792"><span class="hs-identifier hs-var">rest0</span></a></span><span class="hs-cpp">
#else
</span><span>            </span><span class="hs-special">(</span><span class="hs-identifier">options</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">rest</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">partition</span><span> </span><span class="hs-identifier">isOption</span><span> </span><span class="hs-identifier">rest0</span><span>
</span><span id="line-486"></span><span>            </span><span class="hs-identifier">maybes</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">maybes0</span><span> </span><span class="hs-operator">++</span><span> </span><span class="hs-identifier">map</span><span> </span><span class="hs-identifier">optionToMaybe</span><span> </span><span class="hs-identifier">options</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-489"></span><span>            </span><span id="local-6989586621679180796"><span class="annot"><span class="annottext">maybeToPair :: (Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180796"><span class="hs-identifier hs-var hs-var">maybeToPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180790"><span class="hs-identifier hs-var">toPairLifted</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-490"></span><span>            </span><span id="local-6989586621679180800"><span class="annot"><span class="annottext">pureToPair :: (Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180800"><span class="hs-identifier hs-var hs-var">pureToPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180790"><span class="hs-identifier hs-var">toPairLifted</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>            </span><span id="local-6989586621679180790"><span class="annot"><span class="annottext">toPairLifted :: Bool -&gt; (Q Exp, Type, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180790"><span class="hs-identifier hs-var hs-var">toPairLifted</span></a></span></span><span> </span><span id="local-6989586621679180781"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180781"><span class="hs-identifier hs-var">lifted</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180780"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180780"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180779"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180779"><span class="hs-identifier hs-var">argTy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180778"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180778"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-493"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180777"><span class="annot"><span class="annottext">toValue :: Q Exp
</span><a href="#local-6989586621679180777"><span class="hs-identifier hs-var hs-var">toValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchToJSON"><span class="hs-identifier hs-var">dispatchToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180820"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180819"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180814"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180818"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180779"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-494"></span><span>                  </span><span id="local-6989586621679180776"><span class="annot"><span class="annottext">fieldName :: String
</span><a href="#local-6989586621679180776"><span class="hs-identifier hs-var hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#fieldLabel"><span class="hs-identifier hs-var">fieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180778"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-495"></span><span>                  </span><span id="local-6989586621679180773"><span class="annot"><span class="annottext">e :: Q Exp -&gt; Q Exp
</span><a href="#local-6989586621679180773"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679180772"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180772"><span class="hs-identifier hs-var">arg'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp) -&gt; ToJSONFun -&gt; String -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var">pairE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180821"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180820"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180776"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180777"><span class="hs-identifier hs-var">toValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180772"><span class="hs-identifier hs-var">arg'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>              </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180781"><span class="hs-identifier hs-var">lifted</span></a></span><span>
</span><span id="line-497"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-498"></span><span>                  </span><span id="local-6989586621679180771"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180771"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;x&quot;</span></span><span>
</span><span id="line-499"></span><span>                  </span><span class="hs-special">[|</span><span class="hs-identifier">maybe</span><span> </span><span class="hs-identifier">mempty</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lam1E</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180771"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp
</span><a href="#local-6989586621679180773"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180771"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180780"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-500"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp
</span><a href="#local-6989586621679180773"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180780"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-501"></span><span>
</span><span id="line-502"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180814"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180808"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; Options -&gt; Bool -&gt; Bool -&gt; Name -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#recordSumToValue"><span class="hs-identifier hs-var">recordSumToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180821"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180820"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180817"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180816"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180811"><span class="hs-identifier hs-var">argTys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180814"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180805"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>              </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="hs-comment">-- Infix constructors.</span><span>
</span><span id="line-507"></span><span class="annot"><a href="Data.Aeson.TH.html#argsToValue"><span class="hs-identifier hs-var">argsToValue</span></a></span><span> </span><span id="local-6989586621679180769"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180769"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180768"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180768"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679180767"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180767"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180766"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180766"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180765"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180765"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180764"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180764"><span class="hs-identifier hs-var">multiCons</span></a></span></span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180763"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180763"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-509"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">InfixConstructor</span></span><span>
</span><span id="line-510"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180761"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180761"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621679180760"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180760"><span class="hs-identifier hs-var">alTy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180759"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180759"><span class="hs-identifier hs-var">arTy</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180761"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-512"></span><span>    </span><span id="local-6989586621679180758"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180758"><span class="hs-identifier hs-var">al</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;argL&quot;</span></span><span>
</span><span id="line-513"></span><span>    </span><span id="local-6989586621679180757"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180757"><span class="hs-identifier hs-var">ar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;argR&quot;</span></span><span>
</span><span id="line-514"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; Name -&gt; m Pat -&gt; m Pat
</span><span class="hs-identifier hs-var">infixP</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180758"><span class="hs-identifier hs-var">al</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180763"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180757"><span class="hs-identifier hs-var">ar</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; Options -&gt; Bool -&gt; Bool -&gt; Name -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#opaqueSumToValue"><span class="hs-identifier hs-var">opaqueSumToValue</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180769"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180768"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180765"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180764"><span class="hs-identifier hs-var">multiCons</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180763"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-517"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; [Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180768"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-518"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ToJSONFun
-&gt; JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchToJSON"><span class="hs-identifier hs-var">dispatchToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180768"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180767"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180763"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180766"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180756"><span class="hs-identifier hs-var">aTy</span></a></span><span>
</span><span id="line-519"></span><span>                  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180755"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-520"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180755"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180755"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180756"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180756"><span class="hs-identifier hs-var">aTy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180758"><span class="hs-identifier hs-var">al</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180760"><span class="hs-identifier hs-var">alTy</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180757"><span class="hs-identifier hs-var">ar</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180759"><span class="hs-identifier hs-var">arTy</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-521"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-522"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span id="local-6989586621679181544"><span id="local-6989586621679181545"><span class="annot"><a href="Data.Aeson.TH.html#isMaybe"><span class="hs-identifier hs-type">isMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679181545"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679181544"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-526"></span><span id="isMaybe"><span class="annot"><span class="annottext">isMaybe :: forall a b. (a, Type, b) -&gt; Bool
</span><a href="Data.Aeson.TH.html#isMaybe"><span class="hs-identifier hs-var hs-var">isMaybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ConT</span></span><span> </span><span id="local-6989586621679180751"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180751"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180751"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Maybe</span><span>
</span><span id="line-527"></span><span class="annot"><a href="Data.Aeson.TH.html#isMaybe"><span class="hs-identifier hs-var">isMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">(a, Type, b)
</span><span class="hs-identifier">_</span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-cpp">

#if !MIN_VERSION_base(4,16,0)
</span><span class="hs-identifier">isOption</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Type</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Bool</span><span>
</span><span id="line-531"></span><span class="hs-identifier">isOption</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">AppT</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ConT</span><span> </span><span class="hs-identifier">t</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">t</span><span> </span><span class="hs-operator">==</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">Semigroup.Option</span><span>
</span><span id="line-532"></span><span class="hs-identifier">isOption</span><span> </span><span class="hs-identifier">_</span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">False</span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="hs-identifier">optionToMaybe</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ExpQ</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ExpQ</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span class="hs-identifier">optionToMaybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">a</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">Semigroup.getOption</span><span class="hs-special">|]</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">appE</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">b</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">c</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-538"></span><span class="annot"><a href="Data.Aeson.TH.html#%3C%5E%3E"><span class="hs-operator hs-type">(&lt;^&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-539"></span><span id="%3C%5E%3E"><span class="annot"><span class="annottext">&lt;^&gt; :: Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#%3C%5E%3E"><span class="hs-operator hs-var hs-var">(&lt;^&gt;)</span></a></span></span><span> </span><span id="local-6989586621679180749"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180749"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679180748"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180748"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180749"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">E.&gt;&lt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180748"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-540"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">6</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#%3C%5E%3E"><span class="hs-operator hs-type">&lt;^&gt;</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="annot"><a href="Data.Aeson.TH.html#%3C%25%3E"><span class="hs-operator hs-type">(&lt;%&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-543"></span><span id="%3C%25%3E"><span class="annot"><span class="annottext">&lt;%&gt; :: Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#%3C%25%3E"><span class="hs-operator hs-var hs-var">(&lt;%&gt;)</span></a></span></span><span> </span><span id="local-6989586621679180746"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180746"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679180745"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180745"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180746"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#%3C%5E%3E"><span class="hs-operator hs-var">&lt;^&gt;</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">E.comma</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#%3C%5E%3E"><span class="hs-operator hs-var">&lt;^&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180745"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-544"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#%3C%25%3E"><span class="hs-operator hs-type">&lt;%&gt;</span></a></span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span class="hs-comment">-- | Wrap a list of quoted 'Value's in a quoted 'Array' (of type 'Value').</span><span>
</span><span id="line-547"></span><span class="annot"><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-type">array</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-548"></span><span id="array"><span class="annot"><span class="annottext">array :: ToJSONFun -&gt; [Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var hs-var">array</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">E.emptyArray_</span><span class="hs-special">|]</span><span>
</span><span id="line-549"></span><span class="annot"><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Array</span><span> </span><span class="hs-identifier">V.empty</span><span class="hs-special">|]</span><span>
</span><span id="line-550"></span><span class="annot"><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span id="local-6989586621679180744"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180744"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">E.wrapArray</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="annot"><span class="annottext">Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#%3C%25%3E"><span class="hs-operator hs-var">(&lt;%&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180744"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-551"></span><span class="annot"><a href="Data.Aeson.TH.html#array"><span class="hs-identifier hs-var">array</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span id="local-6989586621679180742"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180742"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-552"></span><span>  </span><span id="local-6989586621679180741"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180741"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mv&quot;</span></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180730"><span class="annot"><span class="annottext">newMV :: Q Stmt
</span><a href="#local-6989586621679180730"><span class="hs-identifier hs-var hs-var">newMV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">bindS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180741"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>                    </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">VM.unsafeNew</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-555"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180742"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>      </span><span id="local-6989586621679180720"><span class="annot"><span class="annottext">stmts :: [Q Stmt]
</span><a href="#local-6989586621679180720"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">noBindS</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-557"></span><span>                  </span><span class="hs-special">[|</span><span class="hs-identifier">VM.unsafeWrite</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-558"></span><span>                    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180741"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-559"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180719"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-560"></span><span>                        </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180718"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-561"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180719"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180719"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180718"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180718"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-glyph">::</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180742"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-562"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-563"></span><span>      </span><span id="local-6989586621679180713"><span class="annot"><span class="annottext">ret :: Q Stmt
</span><a href="#local-6989586621679180713"><span class="hs-identifier hs-var hs-var">ret</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">noBindS</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">return</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180741"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-special">[|</span><span class="hs-identifier">Array</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-565"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">V.create</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-566"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Stmt] -&gt; m Exp
</span><span class="hs-identifier hs-var">doE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Stmt
</span><a href="#local-6989586621679180730"><span class="hs-identifier hs-var">newMV</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Q Stmt]
</span><a href="#local-6989586621679180720"><span class="hs-identifier hs-var">stmts</span></a></span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">[</span><span class="annot"><span class="annottext">Q Stmt
</span><a href="#local-6989586621679180713"><span class="hs-identifier hs-var">ret</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="hs-comment">-- | Wrap an associative list of keys and quoted values in a quoted 'Object'.</span><span>
</span><span id="line-569"></span><span class="annot"><a href="Data.Aeson.TH.html#objectE"><span class="hs-identifier hs-type">objectE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-570"></span><span id="objectE"><span class="annot"><span class="annottext">objectE :: (ShortByteString -&gt; Q Exp)
-&gt; ToJSONFun -&gt; [(String, Q Exp)] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#objectE"><span class="hs-identifier hs-var hs-var">objectE</span></a></span></span><span> </span><span id="local-6989586621679180711"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180711"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span id="local-6989586621679180710"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180710"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ToJSONFun -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#fromPairsE"><span class="hs-identifier hs-var">fromPairsE</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180710"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ShortByteString -&gt; Q Exp) -&gt; ToJSONFun -&gt; String -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var">pairE</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180711"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679180710"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="hs-comment">-- | 'mconcat' a list of fixed length.</span><span>
</span><span id="line-573"></span><span class="hs-comment">--</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- &gt; mconcatE [ [|x|], [|y|], [|z|] ] = [| x &lt;&gt; (y &lt;&gt; z) |]</span><span>
</span><span id="line-575"></span><span class="annot"><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-type">mconcatE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-576"></span><span id="mconcatE"><span class="annot"><span class="annottext">mconcatE :: [Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var hs-var">mconcatE</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Monoid.mempty</span><span class="hs-special">|]</span><span>
</span><span id="line-577"></span><span class="annot"><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679180708"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180708"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180708"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-578"></span><span class="annot"><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180707"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180707"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679180706"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180706"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180707"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">Monoid.&lt;&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Q Exp] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mconcatE"><span class="hs-identifier hs-var">mconcatE</span></a></span><span> </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180706"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span class="annot"><a href="Data.Aeson.TH.html#fromPairsE"><span class="hs-identifier hs-type">fromPairsE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-581"></span><span id="fromPairsE"><span class="annot"><span class="annottext">fromPairsE :: ToJSONFun -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#fromPairsE"><span class="hs-identifier hs-var hs-var">fromPairsE</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">fromPairs</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span class="hs-special">)</span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span class="hs-comment">-- | Create (an encoding of) a key-value pair.</span><span>
</span><span id="line-584"></span><span class="hs-comment">--</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- &gt; pairE &quot;k&quot; [|v|] = [| pair &quot;k&quot; v |]</span><span>
</span><span id="line-586"></span><span class="hs-comment">--</span><span>
</span><span id="line-587"></span><span class="annot"><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-type">pairE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#LetInsert"><span class="hs-identifier hs-type">LetInsert</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-588"></span><span id="pairE"><span class="annot"><span class="annottext">pairE :: (ShortByteString -&gt; Q Exp) -&gt; ToJSONFun -&gt; String -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var hs-var">pairE</span></a></span></span><span> </span><span id="local-6989586621679180705"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180705"><span class="hs-identifier hs-var">letInsert</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span id="local-6989586621679180704"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180704"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679180703"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180703"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span> </span><span class="hs-identifier">E.unsafePairSBS</span><span> </span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180705"><span class="hs-identifier hs-var">letInsert</span></a></span><span> </span><span class="annot"><span class="annottext">ShortByteString
</span><a href="#local-6989586621679180702"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180703"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-589"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-590"></span><span>    </span><span id="local-6989586621679180702"><span class="annot"><span class="annottext">k' :: ShortByteString
</span><a href="#local-6989586621679180702"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortText -&gt; ShortByteString
</span><span class="hs-identifier hs-var">ST.toShortByteString</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShortText
</span><span class="hs-identifier hs-var">ST.pack</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String
</span><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180704"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\&quot;:&quot;</span></span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span>    </span><span id="local-6989586621679180697"><span class="annot"><span class="annottext">escapeAscii :: Char -&gt; String
</span><a href="#local-6989586621679180697"><span class="hs-identifier hs-var hs-var">escapeAscii</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\\\&quot;</span></span><span>
</span><span id="line-593"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\&quot;'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\\&quot;&quot;</span></span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\n&quot;</span></span><span>
</span><span id="line-595"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\r'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\r&quot;</span></span><span>
</span><span id="line-596"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\t'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\t&quot;</span></span><span>
</span><span id="line-597"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span id="local-6989586621679180686"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679180686"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-598"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679180686"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x20</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\\u&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%04x&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679180686"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><a href="#local-6989586621679180697"><span class="hs-identifier hs-var">escapeAscii</span></a></span><span> </span><span id="local-6989586621679180684"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679180684"><span class="hs-identifier hs-var">c</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679180684"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="annot"><a href="Data.Aeson.TH.html#pairE"><span class="hs-identifier hs-var">pairE</span></a></span><span> </span><span id="local-6989586621679180683"><span class="annot"><span class="annottext">ShortByteString -&gt; Q Exp
</span><a href="#local-6989586621679180683"><span class="hs-identifier hs-var">_letInsert</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span>    </span><span id="local-6989586621679180682"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180682"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621679180681"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180681"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[|</span><span> </span><span class="hs-identifier">pair</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Key.fromString</span><span> </span><span class="hs-identifier">k</span><span class="hs-special">)</span><span> </span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180681"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-604"></span><span class="hs-comment">-- FromJSON</span><span>
</span><span id="line-605"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="hs-comment">-- | Generates a 'FromJSON' instance declaration for the given data type or</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-609"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON"><span class="hs-identifier hs-type">deriveFromJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-610"></span><span>               </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-611"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-612"></span><span>               </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'FromJSON' instance</span><span>
</span><span id="line-613"></span><span>               </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-614"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-615"></span><span id="deriveFromJSON"><span class="annot"><span class="annottext">deriveFromJSON :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON"><span class="hs-identifier hs-var hs-var">deriveFromJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSONCommon"><span class="hs-identifier hs-var">deriveFromJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSONClass"><span class="hs-identifier hs-var">fromJSONClass</span></a></span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="hs-comment">-- | Generates a 'FromJSON1' instance declaration for the given data type or</span><span>
</span><span id="line-618"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-619"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON1"><span class="hs-identifier hs-type">deriveFromJSON1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-620"></span><span>                </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-621"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-622"></span><span>                </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'FromJSON1' instance</span><span>
</span><span id="line-623"></span><span>                </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-624"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-625"></span><span id="deriveFromJSON1"><span class="annot"><span class="annottext">deriveFromJSON1 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON1"><span class="hs-identifier hs-var hs-var">deriveFromJSON1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSONCommon"><span class="hs-identifier hs-var">deriveFromJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON1Class"><span class="hs-identifier hs-var">fromJSON1Class</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="hs-comment">-- | Generates a 'FromJSON2' instance declaration for the given data type or</span><span>
</span><span id="line-628"></span><span class="hs-comment">-- data family instance constructor.</span><span>
</span><span id="line-629"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSON2"><span class="hs-identifier hs-type">deriveFromJSON2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-630"></span><span>                </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-631"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-632"></span><span>                </span><span class="hs-comment">-- ^ Name of the type for which to generate a 'FromJSON3' instance</span><span>
</span><span id="line-633"></span><span>                </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-634"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-635"></span><span id="deriveFromJSON2"><span class="annot"><span class="annottext">deriveFromJSON2 :: Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSON2"><span class="hs-identifier hs-var hs-var">deriveFromJSON2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSONCommon"><span class="hs-identifier hs-var">deriveFromJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON2Class"><span class="hs-identifier hs-var">fromJSON2Class</span></a></span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveFromJSONCommon"><span class="hs-identifier hs-type">deriveFromJSONCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-638"></span><span>                     </span><span class="hs-comment">-- ^ The FromJSON variant being derived.</span><span>
</span><span id="line-639"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-640"></span><span>                     </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-641"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-642"></span><span>                     </span><span class="hs-comment">-- ^ Name of the type for which to generate an instance.</span><span>
</span><span id="line-643"></span><span>                     </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-644"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-645"></span><span id="deriveFromJSONCommon"><span class="annot"><span class="annottext">deriveFromJSONCommon :: JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveFromJSONCommon"><span class="hs-identifier hs-var hs-var">deriveFromJSONCommon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(JSONFun,
  JSONClass
  -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)]
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONClass"><span class="hs-identifier hs-var">deriveJSONClass</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consFromJSON"><span class="hs-identifier hs-var">consFromJSON</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-comment">-- | Generates a lambda expression which parses the JSON encoding of the given</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- data type or data family instance constructor.</span><span>
</span><span id="line-649"></span><span class="annot"><a href="Data.Aeson.TH.html#mkParseJSON"><span class="hs-identifier hs-type">mkParseJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-650"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-651"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-652"></span><span id="mkParseJSON"><span class="annot"><span class="annottext">mkParseJSON :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkParseJSON"><span class="hs-identifier hs-var hs-var">mkParseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkParseJSONCommon"><span class="hs-identifier hs-var">mkParseJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSONClass"><span class="hs-identifier hs-var">fromJSONClass</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="hs-comment">-- | Generates a lambda expression which parses the JSON encoding of the given</span><span>
</span><span id="line-655"></span><span class="hs-comment">-- data type or data family instance constructor by using the given parsing</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- function on occurrences of the last type parameter.</span><span>
</span><span id="line-657"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftParseJSON"><span class="hs-identifier hs-type">mkLiftParseJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-658"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-659"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-660"></span><span id="mkLiftParseJSON"><span class="annot"><span class="annottext">mkLiftParseJSON :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftParseJSON"><span class="hs-identifier hs-var hs-var">mkLiftParseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkParseJSONCommon"><span class="hs-identifier hs-var">mkParseJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON1Class"><span class="hs-identifier hs-var">fromJSON1Class</span></a></span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span class="hs-comment">-- | Generates a lambda expression which parses the JSON encoding of the given</span><span>
</span><span id="line-663"></span><span class="hs-comment">-- data type or data family instance constructor by using the given parsing</span><span>
</span><span id="line-664"></span><span class="hs-comment">-- functions on occurrences of the last two type parameters.</span><span>
</span><span id="line-665"></span><span class="annot"><a href="Data.Aeson.TH.html#mkLiftParseJSON2"><span class="hs-identifier hs-type">mkLiftParseJSON2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-666"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-667"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-668"></span><span id="mkLiftParseJSON2"><span class="annot"><span class="annottext">mkLiftParseJSON2 :: Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkLiftParseJSON2"><span class="hs-identifier hs-var hs-var">mkLiftParseJSON2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkParseJSONCommon"><span class="hs-identifier hs-var">mkParseJSONCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON2Class"><span class="hs-identifier hs-var">fromJSON2Class</span></a></span><span>
</span><span id="line-669"></span><span>
</span><span id="line-670"></span><span class="annot"><a href="Data.Aeson.TH.html#mkParseJSONCommon"><span class="hs-identifier hs-type">mkParseJSONCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-comment">-- ^ Which class's method is being derived.</span><span>
</span><span id="line-671"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-672"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-673"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-674"></span><span id="mkParseJSONCommon"><span class="annot"><span class="annottext">mkParseJSONCommon :: JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkParseJSONCommon"><span class="hs-identifier hs-var hs-var">mkParseJSONCommon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(JSONClass
 -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkFunCommon"><span class="hs-identifier hs-var">mkFunCommon</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consFromJSON"><span class="hs-identifier hs-var">consFromJSON</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="hs-comment">-- | Helper function used by both 'deriveFromJSON' and 'mkParseJSON'. Generates</span><span>
</span><span id="line-677"></span><span class="hs-comment">-- code to parse the JSON encoding of a number of constructors. All constructors</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- must be from the same type.</span><span>
</span><span id="line-679"></span><span class="annot"><a href="Data.Aeson.TH.html#consFromJSON"><span class="hs-identifier hs-type">consFromJSON</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-680"></span><span>             </span><span class="hs-comment">-- ^ The FromJSON variant being derived.</span><span>
</span><span id="line-681"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-682"></span><span>             </span><span class="hs-comment">-- ^ Name of the type to which the constructors belong.</span><span>
</span><span id="line-683"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-684"></span><span>             </span><span class="hs-comment">-- ^ Encoding options</span><span>
</span><span id="line-685"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-686"></span><span>             </span><span class="hs-comment">-- ^ The types from the data type/data family instance declaration</span><span>
</span><span id="line-687"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span>
</span><span id="line-688"></span><span>             </span><span class="hs-comment">-- ^ Constructors for which to generate JSON parsing code.</span><span>
</span><span id="line-689"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span id="consFromJSON"><span class="annot"><span class="annottext">consFromJSON :: JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#consFromJSON"><span class="hs-identifier hs-var hs-var">consFromJSON</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data.Aeson.TH.consFromJSON: &quot;</span></span><span>
</span><span id="line-692"></span><span>                                </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not a single constructor given!&quot;</span></span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span class="annot"><a href="Data.Aeson.TH.html#consFromJSON"><span class="hs-identifier hs-var">consFromJSON</span></a></span><span> </span><span id="local-6989586621679180673"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180672"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180671"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180670"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180670"><span class="hs-identifier hs-var">instTys</span></a></span></span><span> </span><span id="local-6989586621679180669"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-695"></span><span>  </span><span id="local-6989586621679180668"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180668"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value&quot;</span></span><span>
</span><span id="line-696"></span><span>  </span><span id="local-6989586621679180667"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180667"><span class="hs-identifier hs-var">pjs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_pj&quot;</span></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-697"></span><span>  </span><span id="local-6989586621679180666"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180666"><span class="hs-identifier hs-var">pjls</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var">newNameList</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_pjl&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-698"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180665"><span class="annot"><span class="annottext">zippedPJs :: [(Name, Name)]
</span><a href="#local-6989586621679180665"><span class="hs-identifier hs-var hs-var">zippedPJs</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180667"><span class="hs-identifier hs-var">pjs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180666"><span class="hs-identifier hs-var">pjls</span></a></span><span>
</span><span id="line-699"></span><span>      </span><span id="local-6989586621679180664"><span class="annot"><span class="annottext">interleavedPJs :: [Name]
</span><a href="#local-6989586621679180664"><span class="hs-identifier hs-var hs-var">interleavedPJs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var">interleave</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180667"><span class="hs-identifier hs-var">pjs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180666"><span class="hs-identifier hs-var">pjls</span></a></span><span>
</span><span id="line-700"></span><span>      </span><span id="local-6989586621679180661"><span class="annot"><span class="annottext">lastTyVars :: [Name]
</span><a href="#local-6989586621679180661"><span class="hs-identifier hs-var hs-var">lastTyVars</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Name
</span><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-var">varTToName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180670"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180670"><span class="hs-identifier hs-var">instTys</span></a></span><span>
</span><span id="line-701"></span><span>      </span><span id="local-6989586621679180659"><span class="annot"><span class="annottext">tvMap :: Map Name (Name, Name)
</span><a href="#local-6989586621679180659"><span class="hs-identifier hs-var hs-var">tvMap</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180661"><span class="hs-identifier hs-var">lastTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Name)]
</span><a href="#local-6989586621679180665"><span class="hs-identifier hs-var">zippedPJs</span></a></span><span>
</span><span id="line-702"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">lamE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180664"><span class="hs-identifier hs-var">interleavedPJs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180668"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Map Name (Name, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180658"><span class="hs-identifier hs-var">lamExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180668"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180659"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-705"></span><span>    </span><span id="local-6989586621679180657"><span class="annot"><span class="annottext">checkExi :: Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Q a -&gt; Q a
</span><a href="#local-6989586621679180657"><span class="hs-identifier hs-var hs-var">checkExi</span></a></span></span><span> </span><span id="local-6989586621679180656"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180656"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180655"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180655"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
JSONClass -&gt; Map Name (Name, Name) -&gt; [Type] -&gt; Name -&gt; Q a -&gt; Q a
</span><a href="Data.Aeson.TH.html#checkExistentialContext"><span class="hs-identifier hs-var">checkExistentialContext</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180656"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-706"></span><span>                                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorContext</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180655"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>                                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180655"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span>    </span><span id="local-6989586621679180658"><span class="annot"><span class="annottext">lamExpr :: Name -&gt; Map Name (Name, Name) -&gt; Q Exp
</span><a href="#local-6989586621679180658"><span class="hs-identifier hs-var hs-var">lamExpr</span></a></span></span><span> </span><span id="local-6989586621679180647"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180647"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span id="local-6989586621679180646"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180646"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-710"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621679180645"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180645"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-711"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#tagSingleConstructors"><span class="hs-identifier hs-var">tagSingleConstructors</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall {a}. Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Q a -&gt; Q a
</span><a href="#local-6989586621679180657"><span class="hs-identifier hs-var">checkExi</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180646"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180645"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; Name
-&gt; Options
-&gt; ConstructorInfo
-&gt; Either (String, Name) Name
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180646"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180645"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180647"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>      </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Options -&gt; SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#sumEncoding"><span class="hs-identifier hs-var">sumEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#UntaggedValue"><span class="hs-identifier hs-var">UntaggedValue</span></a></span><span>
</span><span id="line-714"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; [ConstructorInfo] -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180643"><span class="hs-identifier hs-var">parseUntaggedValue</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180646"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180647"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-715"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-716"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180647"><span class="hs-identifier hs-var">value</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-717"></span><span>                   </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#allNullaryToStringTag"><span class="hs-identifier hs-var">allNullaryToStringTag</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Bool
</span><a href="Data.Aeson.TH.html#isNullary"><span class="hs-identifier hs-var">isNullary</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-718"></span><span>                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Q Match]
</span><a href="#local-6989586621679180642"><span class="hs-identifier hs-var">allNullaryMatches</span></a></span><span>
</span><span id="line-719"></span><span>                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; [Q Match]
</span><a href="#local-6989586621679180641"><span class="hs-identifier hs-var">mixedMatches</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180646"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span>    </span><span id="local-6989586621679180642"><span class="annot"><span class="annottext">allNullaryMatches :: [Q Match]
</span><a href="#local-6989586621679180642"><span class="hs-identifier hs-var hs-var">allNullaryMatches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-722"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180602"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180602"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txtX&quot;</span></span><span>
</span><span id="line-723"></span><span>           </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">String</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180602"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m (Guard, Exp)] -&gt; m Body
</span><span class="hs-identifier hs-var">guardedB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-725"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-726"></span><span>                                  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180602"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>                                           </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">==</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-728"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-var">conTxt</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180600"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>                               </span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>                               </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">pure</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180600"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679180599"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180599"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-732"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180600"><span class="annot"><span class="annottext">conName :: Name
</span><a href="#local-6989586621679180600"><span class="hs-identifier hs-var hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180599"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-733"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-734"></span><span>                  </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-735"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">otherwise</span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">noMatchFail</span><span class="hs-special">|]</span><span>
</span><span id="line-738"></span><span>                        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>                        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">T.unpack</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180602"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-742"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>                 </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-744"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180597"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180597"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-745"></span><span>           </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180597"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">noStringFail</span><span class="hs-special">|]</span><span>
</span><span id="line-747"></span><span>                    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span>                    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">valueConName</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180597"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span>                 </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-751"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-752"></span><span>
</span><span id="line-753"></span><span>    </span><span id="local-6989586621679180641"><span class="annot"><span class="annottext">mixedMatches :: Map Name (Name, Name) -&gt; [Q Match]
</span><a href="#local-6989586621679180641"><span class="hs-identifier hs-var hs-var">mixedMatches</span></a></span></span><span> </span><span id="local-6989586621679180554"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180554"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-754"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Options -&gt; SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#sumEncoding"><span class="hs-identifier hs-var">sumEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-755"></span><span>          </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#TaggedObject"><span class="hs-identifier hs-type">TaggedObject</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679180553"><span class="annot"><span class="annottext">String
tagFieldName :: String
tagFieldName :: SumEncoding -&gt; String
</span><a href="#local-6989586621679180553"><span class="hs-identifier hs-var hs-var">tagFieldName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180552"><span class="annot"><span class="annottext">String
contentsFieldName :: String
contentsFieldName :: SumEncoding -&gt; String
</span><a href="#local-6989586621679180552"><span class="hs-identifier hs-var hs-var">contentsFieldName</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-756"></span><span>            </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Quote m =&gt; (Name -&gt; m Exp) -&gt; [m Match]
</span><a href="#local-6989586621679180551"><span class="hs-identifier hs-var">parseObject</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; String -&gt; String -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180550"><span class="hs-identifier hs-var">parseTaggedObject</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180554"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180553"><span class="hs-identifier hs-var">tagFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180552"><span class="hs-identifier hs-var">contentsFieldName</span></a></span><span>
</span><span id="line-757"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#UntaggedValue"><span class="hs-identifier hs-var">UntaggedValue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UntaggedValue: Should be handled already&quot;</span></span><span>
</span><span id="line-758"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#ObjectWithSingleField"><span class="hs-identifier hs-var">ObjectWithSingleField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-759"></span><span>            </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Quote m =&gt; (Name -&gt; m Exp) -&gt; [m Match]
</span><a href="#local-6989586621679180551"><span class="hs-identifier hs-var">parseObject</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180549"><span class="hs-identifier hs-var">parseObjectWithSingleField</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180554"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-760"></span><span>          </span><span class="annot"><span class="annottext">SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#TwoElemArray"><span class="hs-identifier hs-var">TwoElemArray</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-761"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180548"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180548"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;array&quot;</span></span><span>
</span><span id="line-762"></span><span>                 </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">Array</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180548"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m (Guard, Exp)] -&gt; m Body
</span><span class="hs-identifier hs-var">guardedB</span></span><span>
</span><span id="line-764"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">V.length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180548"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>                                                         </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">==</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-766"></span><span>                                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180547"><span class="hs-identifier hs-var">parse2ElemArray</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180554"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180548"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">otherwise</span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>                                     </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">not2ElemArray</span><span class="hs-special">|]</span><span>
</span><span id="line-770"></span><span>                                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>                                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">V.length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180548"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-772"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-773"></span><span>                       </span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>                       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-775"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180546"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180546"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-776"></span><span>                 </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180546"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>                       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span>
</span><span id="line-778"></span><span>                         </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">noArrayFail</span><span class="hs-special">|]</span><span>
</span><span id="line-779"></span><span>                             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>                             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">valueConName</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180546"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>                       </span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>                       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-783"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-784"></span><span>
</span><span id="line-785"></span><span>    </span><span id="local-6989586621679180551"><span class="annot"><span class="annottext">parseObject :: (Name -&gt; m Exp) -&gt; [m Match]
</span><a href="#local-6989586621679180551"><span class="hs-identifier hs-var hs-var">parseObject</span></a></span></span><span> </span><span id="local-6989586621679180523"><span class="annot"><span class="annottext">Name -&gt; m Exp
</span><a href="#local-6989586621679180523"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-786"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180522"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180522"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;obj&quot;</span></span><span>
</span><span id="line-787"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">Object</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180522"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; m Exp
</span><a href="#local-6989586621679180523"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180522"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-788"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180521"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180521"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-789"></span><span>             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180521"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-790"></span><span>                   </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span>
</span><span id="line-791"></span><span>                     </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">noObjectFail</span><span class="hs-special">|]</span><span>
</span><span id="line-792"></span><span>                         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>                         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">valueConName</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180521"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span>                   </span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>                   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-796"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span>    </span><span id="local-6989586621679180550"><span class="annot"><span class="annottext">parseTaggedObject :: Map Name (Name, Name) -&gt; String -&gt; String -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180550"><span class="hs-identifier hs-var hs-var">parseTaggedObject</span></a></span></span><span> </span><span id="local-6989586621679180506"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180506"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180505"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180505"><span class="hs-identifier hs-var">typFieldName</span></a></span></span><span> </span><span id="local-6989586621679180504"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180504"><span class="hs-identifier hs-var">valFieldName</span></a></span></span><span> </span><span id="local-6989586621679180503"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180503"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-799"></span><span>      </span><span id="local-6989586621679180502"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180502"><span class="hs-identifier hs-var">conKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;conKeyX&quot;</span></span><span>
</span><span id="line-800"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Stmt] -&gt; m Exp
</span><span class="hs-identifier hs-var">doE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">bindS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180502"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180503"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>                            </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">.:</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-803"></span><span>                            </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Exp
</span><span class="hs-identifier hs-var">stringE</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180505"><span class="hs-identifier hs-var">typFieldName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">noBindS</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
-&gt; Name
-&gt; Either (String, Name) Name
-&gt; Name
-&gt; Q Exp
-&gt; Q Exp
-&gt; Q Exp
</span><a href="#local-6989586621679180501"><span class="hs-identifier hs-var">parseContents</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180506"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180502"><span class="hs-identifier hs-var">conKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180504"><span class="hs-identifier hs-var">valFieldName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180503"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">conNotFoundFailTaggedObject</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.toString</span><span class="hs-special">|]</span><span>
</span><span id="line-805"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span>    </span><span id="local-6989586621679180643"><span class="annot"><span class="annottext">parseUntaggedValue :: Map Name (Name, Name) -&gt; [ConstructorInfo] -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180643"><span class="hs-identifier hs-var hs-var">parseUntaggedValue</span></a></span></span><span> </span><span id="local-6989586621679180497"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180497"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180496"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180496"><span class="hs-identifier hs-var">cons'</span></a></span></span><span> </span><span id="local-6989586621679180495"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180495"><span class="hs-identifier hs-var">conVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-808"></span><span>        </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">foldr1</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180494"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180494"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679180493"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180493"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180494"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;|&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180493"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180492"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180492"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180491"><span class="hs-identifier hs-var">parseValue</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180497"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180492"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180495"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180496"><span class="hs-identifier hs-var">cons'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span>    </span><span id="local-6989586621679180491"><span class="annot"><span class="annottext">parseValue :: Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180491"><span class="hs-identifier hs-var hs-var">parseValue</span></a></span></span><span> </span><span id="local-6989586621679180474"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180474"><span class="hs-identifier hs-var">_tvMap</span></a></span></span><span>
</span><span id="line-812"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180473"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180473"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-813"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-814"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-815"></span><span>        </span><span id="local-6989586621679180472"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180472"><span class="hs-identifier hs-var">conVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-816"></span><span>      </span><span id="local-6989586621679180471"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180471"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;str&quot;</span></span><span>
</span><span id="line-817"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180472"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">String</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180471"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m (Guard, Exp)] -&gt; m Body
</span><span class="hs-identifier hs-var">guardedB</span></span><span>
</span><span id="line-820"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180471"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">==</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conTxt"><span class="hs-identifier hs-var">conTxt</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180473"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>                               </span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>                               </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">pure</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180473"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-824"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-826"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; String -&gt; Q Match
</span><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-var">matchFailed</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180473"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;String&quot;</span></span><span>
</span><span id="line-827"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-828"></span><span>    </span><span class="annot"><a href="#local-6989586621679180491"><span class="hs-identifier hs-var">parseValue</span></a></span><span> </span><span id="local-6989586621679180469"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180469"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180468"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180468"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621679180467"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180467"><span class="hs-identifier hs-var">conVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-829"></span><span>      </span><span class="annot"><span class="annottext">forall {a}. Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Q a -&gt; Q a
</span><a href="#local-6989586621679180657"><span class="hs-identifier hs-var">checkExi</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180469"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180468"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; Name
-&gt; Options
-&gt; ConstructorInfo
-&gt; Either (String, Name) Name
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180469"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180468"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180467"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span>
</span><span id="line-832"></span><span>    </span><span id="local-6989586621679180547"><span class="annot"><span class="annottext">parse2ElemArray :: Map Name (Name, Name) -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180547"><span class="hs-identifier hs-var hs-var">parse2ElemArray</span></a></span></span><span> </span><span id="local-6989586621679180436"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180436"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180435"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180435"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-833"></span><span>      </span><span id="local-6989586621679180434"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180434"><span class="hs-identifier hs-var">conKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;conKeyY&quot;</span></span><span>
</span><span id="line-834"></span><span>      </span><span id="local-6989586621679180433"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180433"><span class="hs-identifier hs-var">conVal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;conValY&quot;</span></span><span>
</span><span id="line-835"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180423"><span class="annot"><span class="annottext">letIx :: Name -&gt; Integer -&gt; m Dec
</span><a href="#local-6989586621679180423"><span class="hs-identifier hs-var hs-var">letIx</span></a></span></span><span> </span><span id="local-6989586621679180422"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180422"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679180421"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180421"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-836"></span><span>              </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Dec
</span><span class="hs-identifier hs-var">valD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180422"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-837"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">V.unsafeIndex</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-838"></span><span>                               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180435"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-839"></span><span>                               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180421"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>                   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-841"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Dec] -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">letE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Quote m =&gt; Name -&gt; Integer -&gt; m Dec
</span><a href="#local-6989586621679180423"><span class="hs-identifier hs-var">letIx</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180434"><span class="hs-identifier hs-var">conKey</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-842"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall {m :: * -&gt; *}. Quote m =&gt; Name -&gt; Integer -&gt; m Dec
</span><a href="#local-6989586621679180423"><span class="hs-identifier hs-var">letIx</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180433"><span class="hs-identifier hs-var">conVal</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span>
</span><span id="line-843"></span><span>           </span><span class="hs-special">]</span><span>
</span><span id="line-844"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180434"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>                  </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180420"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180420"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txtY&quot;</span></span><span>
</span><span id="line-846"></span><span>                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">String</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180420"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
-&gt; Name
-&gt; Either (String, Name) Name
-&gt; Name
-&gt; Q Exp
-&gt; Q Exp
-&gt; Q Exp
</span><a href="#local-6989586621679180501"><span class="hs-identifier hs-var">parseContents</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180436"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-848"></span><span>                                                      </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180420"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-849"></span><span>                                                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180433"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-850"></span><span>                                                      </span><span class="hs-special">'</span><span class="hs-identifier">conNotFoundFail2ElemArray</span><span>
</span><span id="line-851"></span><span>                                                      </span><span class="hs-special">[|</span><span class="hs-identifier">T.pack</span><span class="hs-special">|]</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">T.unpack</span><span class="hs-special">|]</span><span>
</span><span id="line-852"></span><span>                             </span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>                             </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-854"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180419"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180419"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-855"></span><span>                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180419"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-856"></span><span>                             </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span>
</span><span id="line-857"></span><span>                               </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">firstElemNoStringFail</span><span class="hs-special">|]</span><span>
</span><span id="line-858"></span><span>                                     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>                                     </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">valueConName</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180419"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span>                             </span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>                             </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-862"></span><span>                  </span><span class="hs-special">]</span><span>
</span><span id="line-863"></span><span>           </span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span>    </span><span id="local-6989586621679180549"><span class="annot"><span class="annottext">parseObjectWithSingleField :: Map Name (Name, Name) -&gt; Name -&gt; Q Exp
</span><a href="#local-6989586621679180549"><span class="hs-identifier hs-var hs-var">parseObjectWithSingleField</span></a></span></span><span> </span><span id="local-6989586621679180389"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180389"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180388"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180388"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-866"></span><span>      </span><span id="local-6989586621679180387"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180387"><span class="hs-identifier hs-var">conKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;conKeyZ&quot;</span></span><span>
</span><span id="line-867"></span><span>      </span><span id="local-6989586621679180386"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180386"><span class="hs-identifier hs-var">conVal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;conValZ&quot;</span></span><span>
</span><span id="line-868"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[e|</span><span class="hs-identifier">KM.toList</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180388"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">listP</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">tupP</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180387"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180386"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-870"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
-&gt; Name
-&gt; Either (String, Name) Name
-&gt; Name
-&gt; Q Exp
-&gt; Q Exp
-&gt; Q Exp
</span><a href="#local-6989586621679180501"><span class="hs-identifier hs-var">parseContents</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180389"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180387"><span class="hs-identifier hs-var">conKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180386"><span class="hs-identifier hs-var">conVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">conNotFoundFailObjectSingleField</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.toString</span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-872"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180385"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180385"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-873"></span><span>                 </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180385"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-874"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">wrongPairCountFail</span><span class="hs-special">|]</span><span>
</span><span id="line-875"></span><span>                                  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>                                  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">show</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180385"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>                       </span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>                       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-879"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-880"></span><span>
</span><span id="line-881"></span><span>    </span><span id="local-6989586621679180501"><span class="annot"><span class="annottext">parseContents :: Map Name (Name, Name)
-&gt; Name
-&gt; Either (String, Name) Name
-&gt; Name
-&gt; Q Exp
-&gt; Q Exp
-&gt; Q Exp
</span><a href="#local-6989586621679180501"><span class="hs-identifier hs-var hs-var">parseContents</span></a></span></span><span> </span><span id="local-6989586621679180358"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180358"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180357"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180357"><span class="hs-identifier hs-var">conKey</span></a></span></span><span> </span><span id="local-6989586621679180356"><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180356"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span id="local-6989586621679180355"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180355"><span class="hs-identifier hs-var">errorFun</span></a></span></span><span> </span><span id="local-6989586621679180354"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180354"><span class="hs-identifier hs-var">pack</span></a></span></span><span> </span><span id="local-6989586621679180353"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180353"><span class="hs-identifier hs-var">unpack</span></a></span></span><span class="hs-glyph">=</span><span>
</span><span id="line-882"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180357"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat
</span><span class="hs-identifier hs-var">wildP</span></span><span>
</span><span id="line-884"></span><span>                      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m (Guard, Exp)] -&gt; m Body
</span><span class="hs-identifier hs-var">guardedB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-885"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180352"><span class="annot"><span class="annottext">Guard
</span><a href="#local-6989586621679180352"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180357"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>                                                     </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">==</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-887"></span><span>                                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180354"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-888"></span><span>                                                        </span><span class="annot"><span class="annottext">Options -&gt; ConstructorInfo -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conNameExp"><span class="hs-identifier hs-var">conNameExp</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180350"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-889"></span><span>                             </span><span id="local-6989586621679180349"><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679180349"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {a}. Map Name (Name, Name) -&gt; ConstructorInfo -&gt; Q a -&gt; Q a
</span><a href="#local-6989586621679180657"><span class="hs-identifier hs-var">checkExi</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180358"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180350"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-890"></span><span>                                  </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; Name
-&gt; Options
-&gt; ConstructorInfo
-&gt; Either (String, Name) Name
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180673"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180358"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180350"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180356"><span class="hs-identifier hs-var">contents</span></a></span><span>
</span><span id="line-891"></span><span>                             </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Guard
</span><a href="#local-6989586621679180352"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Exp
</span><a href="#local-6989586621679180349"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679180350"><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180350"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-893"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-894"></span><span>                        </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-895"></span><span>                        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="hs-special">[e|</span><span class="hs-identifier">otherwise</span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>                                 </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180355"><span class="hs-identifier hs-var">errorFun</span></a></span><span>
</span><span id="line-898"></span><span>                                   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180672"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>                                   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">listE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span>
</span><span id="line-900"></span><span>                                                     </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span>
</span><span id="line-901"></span><span>                                                     </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; String -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#constructorTagModifier"><span class="hs-identifier hs-var">constructorTagModifier</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180671"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-902"></span><span>                                                     </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span>
</span><span id="line-903"></span><span>                                                     </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>
</span><span id="line-904"></span><span>                                                     </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180669"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-905"></span><span>                                                </span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>                                   </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180353"><span class="hs-identifier hs-var">unpack</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180357"><span class="hs-identifier hs-var">conKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span>                                 </span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>                        </span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-910"></span><span>                      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-911"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-912"></span><span>
</span><span id="line-913"></span><span class="annot"><a href="Data.Aeson.TH.html#parseNullaryMatches"><span class="hs-identifier hs-type">parseNullaryMatches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span class="hs-special">]</span><span>
</span><span id="line-914"></span><span id="parseNullaryMatches"><span class="annot"><span class="annottext">parseNullaryMatches :: Name -&gt; Name -&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseNullaryMatches"><span class="hs-identifier hs-var hs-var">parseNullaryMatches</span></a></span></span><span> </span><span id="local-6989586621679180347"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180347"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180346"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180346"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-915"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180345"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180345"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arr&quot;</span></span><span>
</span><span id="line-916"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">Array</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180345"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m (Guard, Exp)] -&gt; m Body
</span><span class="hs-identifier hs-var">guardedB</span></span><span>
</span><span id="line-918"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">V.null</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180345"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>                             </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">pure</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180346"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-920"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Guard
</span><span class="hs-identifier hs-var">normalG</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">otherwise</span><span class="hs-special">|]</span><span class="hs-special">)</span><span>
</span><span id="line-921"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseTypeMismatch"><span class="hs-identifier hs-var">parseTypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180347"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180346"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-922"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;an empty Array&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-923"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array of length &quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-924"></span><span>                                          </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">++</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-925"></span><span>                                          </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">show</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">V.length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180345"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-927"></span><span>                             </span><span class="hs-special">)</span><span>
</span><span id="line-928"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-929"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-930"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-931"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; String -&gt; Q Match
</span><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-var">matchFailed</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180347"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180346"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array&quot;</span></span><span>
</span><span id="line-932"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span class="annot"><a href="Data.Aeson.TH.html#parseUnaryMatches"><span class="hs-identifier hs-type">parseUnaryMatches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span class="hs-special">]</span><span>
</span><span id="line-935"></span><span id="parseUnaryMatches"><span class="annot"><span class="annottext">parseUnaryMatches :: JSONClass -&gt; Map Name (Name, Name) -&gt; Type -&gt; Name -&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseUnaryMatches"><span class="hs-identifier hs-var hs-var">parseUnaryMatches</span></a></span></span><span> </span><span id="local-6989586621679180342"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180342"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180341"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180341"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180340"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180340"><span class="hs-identifier hs-var">argTy</span></a></span></span><span> </span><span id="local-6989586621679180339"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180339"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-936"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180338"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180338"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span>
</span><span id="line-937"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180338"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>               </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180339"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-939"></span><span>                                    </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;$&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-940"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchParseJSON"><span class="hs-identifier hs-var">dispatchParseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180342"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180339"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180341"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180340"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-941"></span><span>                                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180338"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-942"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-943"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-944"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="annot"><a href="Data.Aeson.TH.html#parseRecord"><span class="hs-identifier hs-type">parseRecord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-947"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span>
</span><span id="line-948"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-949"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-950"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-951"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-952"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-953"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-954"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-955"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-956"></span><span id="parseRecord"><span class="annot"><span class="annottext">parseRecord :: JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Options
-&gt; Name
-&gt; Name
-&gt; [Name]
-&gt; Name
-&gt; Bool
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseRecord"><span class="hs-identifier hs-var hs-var">parseRecord</span></a></span></span><span> </span><span id="local-6989586621679180335"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180335"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180334"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180334"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180333"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180333"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span id="local-6989586621679180332"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180331"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180331"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180330"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180330"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180329"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180329"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621679180328"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180328"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span id="local-6989586621679180327"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180327"><span class="hs-identifier hs-var">inTaggedObject</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-957"></span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#rejectUnknownFields"><span class="hs-identifier hs-var">rejectUnknownFields</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-958"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180325"><span class="hs-identifier hs-var">checkUnknownRecords</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&gt;&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-959"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-960"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180323"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180323"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679180322"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180322"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180323"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;*&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180322"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180330"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;$&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180321"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>           </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180320"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-963"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-964"></span><span>      </span><span id="local-6989586621679180319"><span class="annot"><span class="annottext">tagFieldNameAppender :: [String] -&gt; [String]
</span><a href="#local-6989586621679180319"><span class="hs-identifier hs-var hs-var">tagFieldNameAppender</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-965"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679180327"><span class="hs-identifier hs-var">inTaggedObject</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SumEncoding -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#tagFieldName"><span class="hs-identifier hs-var">tagFieldName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; SumEncoding
</span><a href="Data.Aeson.Types.Internal.html#sumEncoding"><span class="hs-identifier hs-var">sumEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-966"></span><span>      </span><span id="local-6989586621679180310"><span class="annot"><span class="annottext">knownFields :: Q Exp
</span><a href="#local-6989586621679180310"><span class="hs-identifier hs-var hs-var">knownFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">KM.fromList</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">listE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-967"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180309"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180309"><span class="hs-identifier hs-var">knownName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">tupE</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180309"><span class="hs-identifier hs-var">knownName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">|]</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-968"></span><span>              </span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621679180319"><span class="hs-identifier hs-var">tagFieldNameAppender</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#fieldLabel"><span class="hs-identifier hs-var">fieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180329"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-969"></span><span>      </span><span id="local-6989586621679180325"><span class="annot"><span class="annottext">checkUnknownRecords :: Q Exp
</span><a href="#local-6989586621679180325"><span class="hs-identifier hs-var hs-var">checkUnknownRecords</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-970"></span><span>          </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">KM.keys</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180328"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">KM.difference</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180310"><span class="hs-identifier hs-var">knownFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-971"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">listP</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">|]</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-972"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknownFields&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span>
</span><span id="line-973"></span><span>                  </span><span class="hs-glyph">\</span><span id="local-6989586621679180284"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180284"><span class="hs-identifier hs-var">unknownFields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180284"><span class="hs-identifier hs-var">unknownFields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-974"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">fail</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span>
</span><span id="line-975"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown fields: &quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>                          </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">++</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-977"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">show</span><span class="hs-special">|]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180284"><span class="hs-identifier hs-var">unknownFields</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>                      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-979"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-980"></span><span>      </span><span id="local-6989586621679180321"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180321"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679180320"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180320"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">lookupField</span><span class="hs-special">|]</span><span>
</span><span id="line-981"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchParseJSON"><span class="hs-identifier hs-var">dispatchParseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180335"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180330"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180334"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180270"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-982"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180331"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; String -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#constructorTagModifier"><span class="hs-identifier hs-var">constructorTagModifier</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180330"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180328"><span class="hs-identifier hs-var">obj</span></a></span><span>
</span><span id="line-985"></span><span>               </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Exp
</span><span class="hs-identifier hs-var">stringE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#fieldLabel"><span class="hs-identifier hs-var">fieldLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180332"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180269"><span class="hs-identifier hs-var">field</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>                      </span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180269"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180269"><span class="hs-identifier hs-var">field</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180270"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180270"><span class="hs-identifier hs-var">argTy</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180329"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180333"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-988"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="annot"><a href="Data.Aeson.TH.html#getValField"><span class="hs-identifier hs-type">getValField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchQ</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-991"></span><span id="getValField"><span class="annot"><span class="annottext">getValField :: Name -&gt; String -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#getValField"><span class="hs-identifier hs-var hs-var">getValField</span></a></span></span><span> </span><span id="local-6989586621679180266"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180266"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span id="local-6989586621679180265"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180265"><span class="hs-identifier hs-var">valFieldName</span></a></span></span><span> </span><span id="local-6989586621679180264"><span class="annot"><span class="annottext">[Q Match]
</span><a href="#local-6989586621679180264"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-992"></span><span>  </span><span id="local-6989586621679180263"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180263"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;val&quot;</span></span><span>
</span><span id="line-993"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Stmt] -&gt; m Exp
</span><span class="hs-identifier hs-var">doE</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Pat -&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">bindS</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180263"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180266"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>                                    </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">.:</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-995"></span><span>                                    </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">Key.fromString</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-996"></span><span>                                       </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180265"><span class="hs-identifier hs-var">valFieldName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Stmt
</span><span class="hs-identifier hs-var">noBindS</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180263"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Q Match]
</span><a href="#local-6989586621679180264"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-998"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span class="annot"><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-type">matchCases</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchQ</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1001"></span><span id="matchCases"><span class="annot"><span class="annottext">matchCases :: Either (String, Name) Name -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-var hs-var">matchCases</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180261"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180261"><span class="hs-identifier hs-var">valFieldName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180260"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180260"><span class="hs-identifier hs-var">obj</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; String -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#getValField"><span class="hs-identifier hs-var">getValField</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180260"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180261"><span class="hs-identifier hs-var">valFieldName</span></a></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-var">matchCases</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679180259"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180259"><span class="hs-identifier hs-var">valName</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180259"><span class="hs-identifier hs-var">valName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span>
</span><span id="line-1004"></span><span class="hs-comment">-- | Generates code to parse the JSON encoding of a single constructor.</span><span>
</span><span id="line-1005"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-type">parseArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-comment">-- ^ The FromJSON variant being derived.</span><span>
</span><span id="line-1006"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-comment">-- ^ Maps the last type variables to their decoding</span><span>
</span><span id="line-1007"></span><span>                      </span><span class="hs-comment">--   function arguments.</span><span>
</span><span id="line-1008"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to which the constructor belongs.</span><span>
</span><span id="line-1009"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-1010"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-comment">-- ^ Constructor for which to generate JSON parsing code.</span><span>
</span><span id="line-1011"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Left (valFieldName, objName) or</span><span>
</span><span id="line-1012"></span><span>                                        </span><span class="hs-comment">--   Right valName</span><span>
</span><span id="line-1013"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1014"></span><span class="hs-comment">-- Nullary constructors.</span><span>
</span><span id="line-1015"></span><span id="parseArgs"><span class="annot"><span class="annottext">parseArgs :: JSONClass
-&gt; Map Name (Name, Name)
-&gt; Name
-&gt; Options
-&gt; ConstructorInfo
-&gt; Either (String, Name) Name
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var hs-var">parseArgs</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1016"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180258"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180258"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1017"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-1018"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">(String, Name)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1020"></span><span>    </span><span class="hs-special">[|</span><span class="hs-identifier">pure</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180258"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1021"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679180257"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180257"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1022"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180256"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180256"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1023"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-1024"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1025"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679180255"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180255"><span class="hs-identifier hs-var">valName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1026"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180255"><span class="hs-identifier hs-var">valName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseNullaryMatches"><span class="hs-identifier hs-var">parseNullaryMatches</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180257"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180256"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1027"></span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- Unary constructors.</span><span>
</span><span id="line-1029"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span id="local-6989586621679180254"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180254"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180253"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180253"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1030"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180252"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180252"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1031"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-1032"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span id="local-6989586621679180251"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180251"><span class="hs-identifier hs-var">argTy</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1033"></span><span>  </span><span id="local-6989586621679180250"><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180250"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1034"></span><span>    </span><span id="local-6989586621679180249"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180249"><span class="hs-identifier hs-var">argTy'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180251"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-1035"></span><span>    </span><span class="annot"><span class="annottext">Either (String, Name) Name -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-var">matchCases</span></a></span><span> </span><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180250"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Map Name (Name, Name) -&gt; Type -&gt; Name -&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseUnaryMatches"><span class="hs-identifier hs-var">parseUnaryMatches</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180254"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180253"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180249"><span class="hs-identifier hs-var">argTy'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180252"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1036"></span><span>
</span><span id="line-1037"></span><span class="hs-comment">-- Polyadic constructors.</span><span>
</span><span id="line-1038"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span id="local-6989586621679180248"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180248"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180247"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180247"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180246"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180246"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1039"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180245"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180245"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1040"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span>
</span><span id="line-1041"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180244"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180244"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1042"></span><span>  </span><span id="local-6989586621679180243"><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180243"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1043"></span><span>    </span><span id="local-6989586621679180242"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180242"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180244"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-1044"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180240"><span class="annot"><span class="annottext">len :: Integer
</span><a href="#local-6989586621679180240"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall i a. Num i =&gt; [a] -&gt; i
</span><span class="hs-identifier hs-var">genericLength</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180242"><span class="hs-identifier hs-var">argTys'</span></a></span><span>
</span><span id="line-1045"></span><span>    </span><span class="annot"><span class="annottext">Either (String, Name) Name -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-var">matchCases</span></a></span><span> </span><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180243"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Name
-&gt; Name
-&gt; Integer
-&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseProduct"><span class="hs-identifier hs-var">parseProduct</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180248"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180247"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180242"><span class="hs-identifier hs-var">argTys'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180246"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180245"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180240"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- Records.</span><span>
</span><span id="line-1048"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span id="local-6989586621679180238"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180238"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180237"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180237"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180236"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180236"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180235"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180235"><span class="hs-identifier hs-var">opts</span></a></span></span><span>
</span><span id="line-1049"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180234"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180234"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1050"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecordConstructor</span></span><span> </span><span id="local-6989586621679180233"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180233"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-1051"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180232"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180232"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1052"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180231"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180231"><span class="hs-identifier hs-var">obj</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1053"></span><span>    </span><span id="local-6989586621679180230"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180230"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180232"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-1054"></span><span>    </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Options
-&gt; Name
-&gt; Name
-&gt; [Name]
-&gt; Name
-&gt; Bool
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseRecord"><span class="hs-identifier hs-var">parseRecord</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180238"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180237"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180230"><span class="hs-identifier hs-var">argTys'</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180235"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180236"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180234"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180233"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180231"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1055"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span id="local-6989586621679180229"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180229"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180228"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180228"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180227"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180227"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180226"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180226"><span class="hs-identifier hs-var">opts</span></a></span></span><span>
</span><span id="line-1056"></span><span>  </span><span id="local-6989586621679180225"><span class="annot"><span class="annottext">info :: ConstructorInfo
</span><a href="#local-6989586621679180225"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180224"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180224"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1057"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecordConstructor</span></span><span> </span><span id="local-6989586621679180223"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180223"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-1058"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180222"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180222"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1059"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679180221"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180221"><span class="hs-identifier hs-var">valName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1060"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Bool
</span><a href="Data.Aeson.Types.Internal.html#unwrapUnaryRecords"><span class="hs-identifier hs-var">unwrapUnaryRecords</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180226"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180222"><span class="hs-identifier hs-var">argTys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; Name
-&gt; Options
-&gt; ConstructorInfo
-&gt; Either (String, Name) Name
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180229"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180228"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180227"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180226"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1062"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorInfo
</span><a href="#local-6989586621679180225"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">constructorVariant :: ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">NormalConstructor</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1063"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180221"><span class="hs-identifier hs-var">valName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1064"></span><span>      </span><span class="annot"><span class="annottext">(Bool, [Type])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1065"></span><span>        </span><span id="local-6989586621679180220"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180220"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;recObj&quot;</span></span><span>
</span><span id="line-1066"></span><span>        </span><span id="local-6989586621679180219"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180219"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180222"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-1067"></span><span>        </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; [m Match] -&gt; m Exp
</span><span class="hs-identifier hs-var">caseE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180221"><span class="hs-identifier hs-var">valName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1068"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">Object</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180220"><span class="hs-identifier hs-var">obj</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1069"></span><span>              </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Options
-&gt; Name
-&gt; Name
-&gt; [Name]
-&gt; Name
-&gt; Bool
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseRecord"><span class="hs-identifier hs-var">parseRecord</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180229"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180228"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180219"><span class="hs-identifier hs-var">argTys'</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180226"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180227"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180224"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679180223"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180220"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1070"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; String -&gt; Q Match
</span><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-var">matchFailed</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180227"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180224"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span>
</span><span id="line-1071"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1072"></span><span>
</span><span id="line-1073"></span><span class="hs-comment">-- Infix constructors. Apart from syntax these are the same as</span><span>
</span><span id="line-1074"></span><span class="hs-comment">-- polyadic constructors.</span><span>
</span><span id="line-1075"></span><span class="annot"><a href="Data.Aeson.TH.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span id="local-6989586621679180218"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180218"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180217"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180217"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180216"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180216"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Options
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1076"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">constructorName :: ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180215"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180215"><span class="hs-identifier hs-var">conName</span></a></span></span><span>
</span><span id="line-1077"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorVariant :: ConstructorInfo -&gt; ConstructorVariant
</span><span class="hs-identifier hs-var">constructorVariant</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstructorVariant
</span><span class="hs-identifier hs-var">InfixConstructor</span></span><span>
</span><span id="line-1078"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">constructorFields :: ConstructorInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">constructorFields</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180214"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180214"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1079"></span><span>  </span><span id="local-6989586621679180213"><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180213"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1080"></span><span>    </span><span id="local-6989586621679180212"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180212"><span class="hs-identifier hs-var">argTys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180214"><span class="hs-identifier hs-var">argTys</span></a></span><span>
</span><span id="line-1081"></span><span>    </span><span class="annot"><span class="annottext">Either (String, Name) Name -&gt; [Q Match] -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#matchCases"><span class="hs-identifier hs-var">matchCases</span></a></span><span> </span><span class="annot"><span class="annottext">Either (String, Name) Name
</span><a href="#local-6989586621679180213"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Name
-&gt; Name
-&gt; Integer
-&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseProduct"><span class="hs-identifier hs-var">parseProduct</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180218"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180217"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180212"><span class="hs-identifier hs-var">argTys'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180216"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180215"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1082"></span><span>
</span><span id="line-1083"></span><span class="hs-comment">-- | Generates code to parse the JSON encoding of an n-ary</span><span>
</span><span id="line-1084"></span><span class="hs-comment">-- constructor.</span><span>
</span><span id="line-1085"></span><span class="annot"><a href="Data.Aeson.TH.html#parseProduct"><span class="hs-identifier hs-type">parseProduct</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-comment">-- ^ The FromJSON variant being derived.</span><span>
</span><span id="line-1086"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-comment">-- ^ Maps the last type variables to their decoding</span><span>
</span><span id="line-1087"></span><span>                         </span><span class="hs-comment">--   function arguments.</span><span>
</span><span id="line-1088"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ The argument types of the constructor.</span><span>
</span><span id="line-1089"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ Name of the type to which the constructor belongs.</span><span>
</span><span id="line-1090"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-comment">-- ^ 'Con'structor name.</span><span>
</span><span id="line-1091"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-comment">-- ^ 'Con'structor arity.</span><span>
</span><span id="line-1092"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match</span></span><span class="hs-special">]</span><span>
</span><span id="line-1093"></span><span id="parseProduct"><span class="annot"><span class="annottext">parseProduct :: JSONClass
-&gt; Map Name (Name, Name)
-&gt; [Type]
-&gt; Name
-&gt; Name
-&gt; Integer
-&gt; [Q Match]
</span><a href="Data.Aeson.TH.html#parseProduct"><span class="hs-identifier hs-var hs-var">parseProduct</span></a></span></span><span> </span><span id="local-6989586621679180211"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180211"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180210"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180210"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679180209"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180209"><span class="hs-identifier hs-var">argTys</span></a></span></span><span> </span><span id="local-6989586621679180208"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180208"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180207"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180207"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180206"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180206"><span class="hs-identifier hs-var">numArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1094"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679180205"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180205"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arr&quot;</span></span><span>
</span><span id="line-1095"></span><span>         </span><span class="hs-comment">-- List of: &quot;parseJSON (arr `V.unsafeIndex` &lt;IX&gt;)&quot;</span><span>
</span><span id="line-1096"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679180195"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180195"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679180194"><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180194"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchParseJSON"><span class="hs-identifier hs-var">dispatchParseJSON</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180211"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180207"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679180210"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180193"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-1097"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span>
</span><span id="line-1098"></span><span>                      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180205"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1099"></span><span>                               </span><span class="hs-special">[|</span><span class="hs-identifier">V.unsafeIndex</span><span class="hs-special">|]</span><span>
</span><span id="line-1100"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180192"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679180193"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180193"><span class="hs-identifier hs-var">argTy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180192"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180192"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180209"><span class="hs-identifier hs-var">argTys</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180206"><span class="hs-identifier hs-var">numArgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-1102"></span><span>                    </span><span class="hs-special">]</span><span>
</span><span id="line-1103"></span><span>         </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Pat] -&gt; m Pat
</span><span class="hs-identifier hs-var">conP</span></span><span> </span><span class="hs-special">'</span><span class="hs-identifier">Array</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180205"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">condE</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">V.length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180205"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1105"></span><span>                                           </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">==</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-1106"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Lit
</span><span class="hs-identifier hs-var">integerL</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180206"><span class="hs-identifier hs-var">numArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-1108"></span><span>                                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679180191"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180191"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679180190"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180190"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180191"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;*&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180190"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1109"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">conE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180207"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">&lt;$&gt;</span><span class="hs-special">)</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180195"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span>                                         </span><span class="annot"><span class="annottext">[Q Exp]
</span><a href="#local-6989586621679180194"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1111"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>                                </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseTypeMismatch"><span class="hs-identifier hs-var">parseTypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180208"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180207"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1113"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array of length &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679180206"><span class="hs-identifier hs-var">numArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1114"></span><span>                                    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">infixApp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array of length &quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1115"></span><span>                                               </span><span class="hs-special">[|</span><span class="hs-special">(</span><span class="hs-operator">++</span><span class="hs-special">)</span><span class="hs-special">|]</span><span>
</span><span id="line-1116"></span><span>                                               </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">show</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">V.length</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180205"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>                                    </span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>                                </span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>               </span><span class="hs-special">)</span><span>
</span><span id="line-1120"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1121"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; String -&gt; Q Match
</span><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-var">matchFailed</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180208"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180207"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array&quot;</span></span><span>
</span><span id="line-1122"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1125"></span><span class="hs-comment">-- Parsing errors</span><span>
</span><span id="line-1126"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1127"></span><span>
</span><span id="line-1128"></span><span class="annot"><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-type">matchFailed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MatchQ</span></span><span>
</span><span id="line-1129"></span><span id="matchFailed"><span class="annot"><span class="annottext">matchFailed :: Name -&gt; Name -&gt; String -&gt; Q Match
</span><a href="Data.Aeson.TH.html#matchFailed"><span class="hs-identifier hs-var hs-var">matchFailed</span></a></span></span><span> </span><span id="local-6989586621679180189"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180189"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180188"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180188"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180187"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180187"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1130"></span><span>  </span><span id="local-6989586621679180186"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180186"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;other&quot;</span></span><span>
</span><span id="line-1131"></span><span>  </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m Pat -&gt; m Body -&gt; [m Dec] -&gt; m Match
</span><span class="hs-identifier hs-var">match</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Pat
</span><span class="hs-identifier hs-var">varP</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180186"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseTypeMismatch"><span class="hs-identifier hs-var">parseTypeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180189"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180188"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1133"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180187"><span class="hs-identifier hs-var">expected</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1134"></span><span>                      </span><span class="hs-special">(</span><span class="hs-special">[|</span><span class="hs-identifier">valueConName</span><span class="hs-special">|]</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-operator hs-var">`appE`</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180186"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span class="annot"><a href="Data.Aeson.TH.html#parseTypeMismatch"><span class="hs-identifier hs-type">parseTypeMismatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExpQ</span></span><span>
</span><span id="line-1139"></span><span id="parseTypeMismatch"><span class="annot"><span class="annottext">parseTypeMismatch :: Name -&gt; Name -&gt; Q Exp -&gt; Q Exp -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#parseTypeMismatch"><span class="hs-identifier hs-var hs-var">parseTypeMismatch</span></a></span></span><span> </span><span id="local-6989586621679180185"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180185"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180184"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180184"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180183"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180183"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span id="local-6989586621679180182"><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180182"><span class="hs-identifier hs-var">actual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1140"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Exp -&gt; m Exp
</span><span class="hs-identifier hs-var">appE</span></span><span>
</span><span id="line-1141"></span><span>          </span><span class="hs-special">[|</span><span class="hs-identifier">parseTypeMismatch'</span><span class="hs-special">|]</span><span>
</span><span id="line-1142"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180184"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1143"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180185"><span class="hs-identifier hs-var">tName</span></a></span><span>
</span><span id="line-1144"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180183"><span class="hs-identifier hs-var">expected</span></a></span><span>
</span><span id="line-1145"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Q Exp
</span><a href="#local-6989586621679180182"><span class="hs-identifier hs-var">actual</span></a></span><span>
</span><span id="line-1146"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1147"></span><span>
</span><span id="line-1148"></span><span class="hs-keyword">class</span><span> </span><span id="LookupField"><span class="annot"><a href="Data.Aeson.TH.html#LookupField"><span class="hs-identifier hs-var">LookupField</span></a></span></span><span> </span><span id="local-6989586621679181478"><span class="annot"><a href="#local-6989586621679181478"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1149"></span><span>    </span><span id="lookupField"><span class="annot"><a href="Data.Aeson.TH.html#lookupField"><span class="hs-identifier hs-type">lookupField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181478"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1150"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Object"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181478"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1151"></span><span>
</span><span id="line-1152"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679181476"><span class="annot"><a href="Data.Aeson.TH.html#LookupField"><span class="hs-identifier hs-type">LookupField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181476"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1153"></span><span>    </span><span id="local-6989586621679180176"><span class="annot"><span class="annottext">lookupField :: (Value -&gt; Parser a)
-&gt; String -&gt; String -&gt; Object -&gt; Key -&gt; Parser a
</span><a href="#local-6989586621679180176"><span class="hs-identifier hs-var hs-var hs-var hs-var">lookupField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Value -&gt; Parser a)
-&gt; String -&gt; String -&gt; Object -&gt; Key -&gt; Parser a
</span><a href="Data.Aeson.TH.html#lookupFieldWith"><span class="hs-identifier hs-var">lookupFieldWith</span></a></span><span>
</span><span id="line-1154"></span><span>
</span><span id="line-1155"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# INCOHERENT</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679181474"><span class="annot"><a href="Data.Aeson.TH.html#LookupField"><span class="hs-identifier hs-type">LookupField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679181474"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1156"></span><span>    </span><span id="local-6989586621679180172"><span class="annot"><span class="annottext">lookupField :: (Value -&gt; Parser (Maybe a))
-&gt; String -&gt; String -&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><a href="#local-6989586621679180172"><span class="hs-identifier hs-var hs-var hs-var hs-var">lookupField</span></a></span></span><span> </span><span id="local-6989586621679180171"><span class="annot"><span class="annottext">Value -&gt; Parser (Maybe a)
</span><a href="#local-6989586621679180171"><span class="hs-identifier hs-var">pj</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a.
(Value -&gt; Parser (Maybe a)) -&gt; Object -&gt; Key -&gt; Parser (Maybe a)
</span><a href="Data.Aeson.Types.FromJSON.html#parseOptionalFieldWith"><span class="hs-identifier hs-var">parseOptionalFieldWith</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser (Maybe a)
</span><a href="#local-6989586621679180171"><span class="hs-identifier hs-var">pj</span></a></span><span class="hs-cpp">
 
#if !MIN_VERSION_base(4,16,0)
</span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# INCOHERENT</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-identifier">LookupField</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Semigroup.Option</span><span> </span><span class="hs-identifier">a</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1160"></span><span>    </span><span class="hs-identifier">lookupField</span><span> </span><span class="hs-identifier">pj</span><span> </span><span class="hs-identifier">tName</span><span> </span><span class="hs-identifier">rec</span><span> </span><span class="hs-identifier">obj</span><span> </span><span class="hs-identifier">key</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1161"></span><span>        </span><span class="hs-identifier">fmap</span><span> </span><span class="hs-identifier">Semigroup.Option</span><span>
</span><span id="line-1162"></span><span>             </span><span class="hs-special">(</span><span class="hs-identifier">lookupField</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fmap</span><span> </span><span class="hs-identifier">Semigroup.getOption</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">pj</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">tName</span><span> </span><span class="hs-identifier">rec</span><span> </span><span class="hs-identifier">obj</span><span> </span><span class="hs-identifier">key</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-1165"></span><span id="local-6989586621679180170"><span class="annot"><a href="Data.Aeson.TH.html#lookupFieldWith"><span class="hs-identifier hs-type">lookupFieldWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180170"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1166"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Object"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180170"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1167"></span><span id="lookupFieldWith"><span class="annot"><span class="annottext">lookupFieldWith :: forall a.
(Value -&gt; Parser a)
-&gt; String -&gt; String -&gt; Object -&gt; Key -&gt; Parser a
</span><a href="Data.Aeson.TH.html#lookupFieldWith"><span class="hs-identifier hs-var hs-var">lookupFieldWith</span></a></span></span><span> </span><span id="local-6989586621679180169"><span class="annot"><span class="annottext">Value -&gt; Parser a
</span><a href="#local-6989586621679180169"><span class="hs-identifier hs-var">pj</span></a></span></span><span> </span><span id="local-6989586621679180168"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180168"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180167"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180167"><span class="hs-identifier hs-var">rec</span></a></span></span><span> </span><span id="local-6989586621679180166"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679180166"><span class="hs-identifier hs-var">obj</span></a></span></span><span> </span><span id="local-6989586621679180165"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679180165"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1168"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall v. Key -&gt; KeyMap v -&gt; Maybe v
</span><a href="Data.Aeson.KeyMap.html#lookup"><span class="hs-identifier hs-var">KM.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679180165"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621679180166"><span class="hs-identifier hs-var">obj</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1169"></span><span>      </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall fail. String -&gt; String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#unknownFieldFail"><span class="hs-identifier hs-var">unknownFieldFail</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180168"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180167"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; String
</span><a href="Data.Aeson.Key.html#toString"><span class="hs-identifier hs-var">Key.toString</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679180165"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1170"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679180161"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679180161"><span class="hs-identifier hs-var">v</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Parser a
</span><a href="#local-6989586621679180169"><span class="hs-identifier hs-var">pj</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679180161"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Parser a -&gt; JSONPathElement -&gt; Parser a
</span><a href="Data.Aeson.Types.Internal.html#%3C%3F%3E"><span class="hs-operator hs-var">&lt;?&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; JSONPathElement
</span><a href="Data.Aeson.Types.Internal.html#Key"><span class="hs-identifier hs-var">Key</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679180165"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span id="local-6989586621679181469"><span class="annot"><a href="Data.Aeson.TH.html#unknownFieldFail"><span class="hs-identifier hs-type">unknownFieldFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181469"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1173"></span><span id="unknownFieldFail"><span class="annot"><span class="annottext">unknownFieldFail :: forall fail. String -&gt; String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#unknownFieldFail"><span class="hs-identifier hs-var hs-var">unknownFieldFail</span></a></span></span><span> </span><span id="local-6989586621679180151"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180151"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180150"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180150"><span class="hs-identifier hs-var">rec</span></a></span></span><span> </span><span id="local-6989586621679180149"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180149"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1174"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing the record %s of type %s the key %s was not present.&quot;</span></span><span>
</span><span id="line-1175"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180150"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180151"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180149"><span class="hs-identifier hs-var">key</span></a></span><span>
</span><span id="line-1176"></span><span>
</span><span id="line-1177"></span><span id="local-6989586621679181462"><span class="annot"><a href="Data.Aeson.TH.html#noArrayFail"><span class="hs-identifier hs-type">noArrayFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181462"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1178"></span><span id="noArrayFail"><span class="annot"><span class="annottext">noArrayFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#noArrayFail"><span class="hs-identifier hs-var hs-var">noArrayFail</span></a></span></span><span> </span><span id="local-6989586621679180141"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180141"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180140"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180140"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected Array but got %s.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180141"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180140"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1179"></span><span>
</span><span id="line-1180"></span><span id="local-6989586621679180139"><span class="annot"><a href="Data.Aeson.TH.html#noObjectFail"><span class="hs-identifier hs-type">noObjectFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180139"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1181"></span><span id="noObjectFail"><span class="annot"><span class="annottext">noObjectFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#noObjectFail"><span class="hs-identifier hs-var hs-var">noObjectFail</span></a></span></span><span> </span><span id="local-6989586621679180131"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180131"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180130"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180130"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected Object but got %s.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180131"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180130"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span id="local-6989586621679180129"><span class="annot"><a href="Data.Aeson.TH.html#firstElemNoStringFail"><span class="hs-identifier hs-type">firstElemNoStringFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180129"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1184"></span><span id="firstElemNoStringFail"><span class="annot"><span class="annottext">firstElemNoStringFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#firstElemNoStringFail"><span class="hs-identifier hs-var hs-var">firstElemNoStringFail</span></a></span></span><span> </span><span id="local-6989586621679180121"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180121"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180120"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180120"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected an Array of 2 elements where the first element is a String but got %s at the first element.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180121"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180120"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1185"></span><span>
</span><span id="line-1186"></span><span id="local-6989586621679180119"><span class="annot"><a href="Data.Aeson.TH.html#wrongPairCountFail"><span class="hs-identifier hs-type">wrongPairCountFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180119"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1187"></span><span id="wrongPairCountFail"><span class="annot"><span class="annottext">wrongPairCountFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#wrongPairCountFail"><span class="hs-identifier hs-var hs-var">wrongPairCountFail</span></a></span></span><span> </span><span id="local-6989586621679180111"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180111"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180110"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180110"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1188"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected an Object with a single tag/contents pair but got %s pairs.&quot;</span></span><span>
</span><span id="line-1189"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180111"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180110"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1190"></span><span>
</span><span id="line-1191"></span><span id="local-6989586621679180109"><span class="annot"><a href="Data.Aeson.TH.html#noStringFail"><span class="hs-identifier hs-type">noStringFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180109"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1192"></span><span id="noStringFail"><span class="annot"><span class="annottext">noStringFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#noStringFail"><span class="hs-identifier hs-var hs-var">noStringFail</span></a></span></span><span> </span><span id="local-6989586621679180101"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180101"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180100"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180100"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected String but got %s.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180101"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180100"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span id="local-6989586621679180099"><span class="annot"><a href="Data.Aeson.TH.html#noMatchFail"><span class="hs-identifier hs-type">noMatchFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180099"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1195"></span><span id="noMatchFail"><span class="annot"><span class="annottext">noMatchFail :: forall fail. String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#noMatchFail"><span class="hs-identifier hs-var hs-var">noMatchFail</span></a></span></span><span> </span><span id="local-6989586621679180091"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180091"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180090"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180090"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1196"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected a String with the tag of a constructor but got %s.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180091"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180090"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1197"></span><span>
</span><span id="line-1198"></span><span id="local-6989586621679181455"><span class="annot"><a href="Data.Aeson.TH.html#not2ElemArray"><span class="hs-identifier hs-type">not2ElemArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181455"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1199"></span><span id="not2ElemArray"><span class="annot"><span class="annottext">not2ElemArray :: forall fail. String -&gt; Int -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#not2ElemArray"><span class="hs-identifier hs-var hs-var">not2ElemArray</span></a></span></span><span> </span><span id="local-6989586621679180081"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180081"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180080"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679180080"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected an Array of 2 elements but got %i elements&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180081"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679180080"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span id="local-6989586621679181453"><span class="annot"><a href="Data.Aeson.TH.html#conNotFoundFail2ElemArray"><span class="hs-identifier hs-type">conNotFoundFail2ElemArray</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181453"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1202"></span><span id="conNotFoundFail2ElemArray"><span class="annot"><span class="annottext">conNotFoundFail2ElemArray :: forall fail. String -&gt; [String] -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#conNotFoundFail2ElemArray"><span class="hs-identifier hs-var hs-var">conNotFoundFail2ElemArray</span></a></span></span><span> </span><span id="local-6989586621679180071"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180071"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180070"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180070"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679180069"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180069"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1203"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected a 2-element Array with a tag and contents element where the tag is one of [%s], but got %s.&quot;</span></span><span>
</span><span id="line-1204"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180071"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180070"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180069"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1205"></span><span>
</span><span id="line-1206"></span><span id="local-6989586621679180068"><span class="annot"><a href="Data.Aeson.TH.html#conNotFoundFailObjectSingleField"><span class="hs-identifier hs-type">conNotFoundFailObjectSingleField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180068"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1207"></span><span id="conNotFoundFailObjectSingleField"><span class="annot"><span class="annottext">conNotFoundFailObjectSingleField :: forall fail. String -&gt; [String] -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#conNotFoundFailObjectSingleField"><span class="hs-identifier hs-var hs-var">conNotFoundFailObjectSingleField</span></a></span></span><span> </span><span id="local-6989586621679180059"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180059"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180058"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180058"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679180057"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180057"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1208"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected an Object with a single tag/contents pair where the tag is one of [%s], but got %s.&quot;</span></span><span>
</span><span id="line-1209"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180059"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180058"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180057"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span id="local-6989586621679180056"><span class="annot"><a href="Data.Aeson.TH.html#conNotFoundFailTaggedObject"><span class="hs-identifier hs-type">conNotFoundFailTaggedObject</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679180056"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1212"></span><span id="conNotFoundFailTaggedObject"><span class="annot"><span class="annottext">conNotFoundFailTaggedObject :: forall fail. String -&gt; [String] -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#conNotFoundFailTaggedObject"><span class="hs-identifier hs-var hs-var">conNotFoundFailTaggedObject</span></a></span></span><span> </span><span id="local-6989586621679180047"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180047"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679180046"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180046"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679180045"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180045"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1213"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing %s expected an Object with a tag field where the value is one of [%s], but got %s.&quot;</span></span><span>
</span><span id="line-1214"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180047"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679180046"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180045"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-1215"></span><span>
</span><span id="line-1216"></span><span id="local-6989586621679181448"><span class="annot"><a href="Data.Aeson.TH.html#parseTypeMismatch%27"><span class="hs-identifier hs-type">parseTypeMismatch'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679181448"><span class="hs-identifier hs-type">fail</span></a></span></span><span>
</span><span id="line-1217"></span><span id="parseTypeMismatch%27"><span class="annot"><span class="annottext">parseTypeMismatch' :: forall fail. String -&gt; String -&gt; String -&gt; String -&gt; Parser fail
</span><a href="Data.Aeson.TH.html#parseTypeMismatch%27"><span class="hs-identifier hs-var hs-var">parseTypeMismatch'</span></a></span></span><span> </span><span id="local-6989586621679180035"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180035"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679180034"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180034"><span class="hs-identifier hs-var">tName</span></a></span></span><span> </span><span id="local-6989586621679180033"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180033"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span id="local-6989586621679180032"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180032"><span class="hs-identifier hs-var">actual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1218"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall r. PrintfType r =&gt; String -&gt; r
</span><span class="hs-identifier hs-var">printf</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;When parsing the constructor %s of type %s expected %s but got %s.&quot;</span></span><span>
</span><span id="line-1219"></span><span>                  </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180035"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180033"><span class="hs-identifier hs-var">expected</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679180032"><span class="hs-identifier hs-var">actual</span></a></span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1222"></span><span class="hs-comment">-- Shared ToJSON and FromJSON code</span><span>
</span><span id="line-1223"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- | Functionality common to 'deriveJSON', 'deriveJSON1', and 'deriveJSON2'.</span><span>
</span><span id="line-1226"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSONBoth"><span class="hs-identifier hs-type">deriveJSONBoth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1227"></span><span>               </span><span class="hs-comment">-- ^ Function which derives a flavor of 'ToJSON'.</span><span>
</span><span id="line-1228"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1229"></span><span>               </span><span class="hs-comment">-- ^ Function which derives a flavor of 'FromJSON'.</span><span>
</span><span id="line-1230"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-1231"></span><span>               </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-1232"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1233"></span><span>               </span><span class="hs-comment">-- ^ Name of the type for which to generate 'ToJSON' and 'FromJSON'</span><span>
</span><span id="line-1234"></span><span>               </span><span class="hs-comment">-- instances.</span><span>
</span><span id="line-1235"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-1236"></span><span id="deriveJSONBoth"><span class="annot"><span class="annottext">deriveJSONBoth :: (Options -&gt; Name -&gt; Q [Dec])
-&gt; (Options -&gt; Name -&gt; Q [Dec]) -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONBoth"><span class="hs-identifier hs-var hs-var">deriveJSONBoth</span></a></span></span><span> </span><span id="local-6989586621679180031"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="#local-6989586621679180031"><span class="hs-identifier hs-var">dtj</span></a></span></span><span> </span><span id="local-6989586621679180030"><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="#local-6989586621679180030"><span class="hs-identifier hs-var">dfj</span></a></span></span><span> </span><span id="local-6989586621679180029"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180029"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180028"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180028"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1237"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a1 a2 r.
Monad m =&gt;
(a1 -&gt; a2 -&gt; r) -&gt; m a1 -&gt; m a2 -&gt; m r
</span><span class="hs-identifier hs-var">liftM2</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="#local-6989586621679180031"><span class="hs-identifier hs-var">dtj</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180029"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180028"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Options -&gt; Name -&gt; Q [Dec]
</span><a href="#local-6989586621679180030"><span class="hs-identifier hs-var">dfj</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180029"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180028"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1238"></span><span>
</span><span id="line-1239"></span><span class="hs-comment">-- | Functionality common to @deriveToJSON(1)(2)@ and @deriveFromJSON(1)(2)@.</span><span>
</span><span id="line-1240"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveJSONClass"><span class="hs-identifier hs-type">deriveJSONClass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1241"></span><span>                                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1242"></span><span>                </span><span class="hs-comment">-- ^ The class methods and the functions which derive them.</span><span>
</span><span id="line-1243"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-1244"></span><span>                </span><span class="hs-comment">-- ^ The class for which to generate an instance.</span><span>
</span><span id="line-1245"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-1246"></span><span>                </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-1247"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1248"></span><span>                </span><span class="hs-comment">-- ^ Name of the type for which to generate a class instance</span><span>
</span><span id="line-1249"></span><span>                </span><span class="hs-comment">-- declaration.</span><span>
</span><span id="line-1250"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-1251"></span><span id="deriveJSONClass"><span class="annot"><span class="annottext">deriveJSONClass :: [(JSONFun,
  JSONClass
  -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)]
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q [Dec]
</span><a href="Data.Aeson.TH.html#deriveJSONClass"><span class="hs-identifier hs-var hs-var">deriveJSONClass</span></a></span></span><span> </span><span id="local-6989586621679180027"><span class="annot"><span class="annottext">[(JSONFun,
  JSONClass
  -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)]
</span><a href="#local-6989586621679180027"><span class="hs-identifier hs-var">consFuns</span></a></span></span><span> </span><span id="local-6989586621679180026"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180026"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679180025"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180025"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679180024"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180024"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1252"></span><span>  </span><span id="local-6989586621679180023"><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679180023"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q DatatypeInfo
</span><span class="hs-identifier hs-var">reifyDatatype</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180024"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679180023"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1254"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">DatatypeInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">datatypeContext :: DatatypeInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">datatypeContext</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180019"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180019"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-1255"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeName :: DatatypeInfo -&gt; Name
</span><span class="hs-identifier hs-var">datatypeName</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180017"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180017"><span class="hs-identifier hs-var">parentName</span></a></span></span><span class="hs-cpp">
#if MIN_VERSION_th_abstraction(0,3,0)
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeInstTypes :: DatatypeInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">datatypeInstTypes</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180015"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180015"><span class="hs-identifier hs-var">instTys</span></a></span></span><span class="hs-cpp">
#else
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">datatypeVars</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">instTys</span><span class="hs-cpp">
#endif
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeVariant :: DatatypeInfo -&gt; DatatypeVariant
</span><span class="hs-identifier hs-var">datatypeVariant</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180013"><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679180013"><span class="hs-identifier hs-var">variant</span></a></span></span><span>
</span><span id="line-1262"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeCons :: DatatypeInfo -&gt; [ConstructorInfo]
</span><span class="hs-identifier hs-var">datatypeCons</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679180011"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180011"><span class="hs-identifier hs-var">cons</span></a></span></span><span>
</span><span id="line-1263"></span><span>                 </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1264"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679180010"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180010"><span class="hs-identifier hs-var">instanceCxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679180009"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180009"><span class="hs-identifier hs-var">instanceType</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1265"></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; JSONClass
-&gt; [Type]
-&gt; [Type]
-&gt; DatatypeVariant
-&gt; Q ([Type], Type)
</span><a href="Data.Aeson.TH.html#buildTypeInstance"><span class="hs-identifier hs-var">buildTypeInstance</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180017"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180026"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180019"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180015"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679180013"><span class="hs-identifier hs-var">variant</span></a></span><span>
</span><span id="line-1266"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
m [Type] -&gt; m Type -&gt; [m Dec] -&gt; m Dec
</span><span class="hs-identifier hs-var">instanceD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180010"><span class="hs-identifier hs-var">instanceCxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679180009"><span class="hs-identifier hs-var">instanceType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Type] -&gt; [ConstructorInfo] -&gt; [Q Dec]
</span><a href="#local-6989586621679180005"><span class="hs-identifier hs-var">methodDecs</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180017"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180015"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180011"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1270"></span><span>    </span><span class="annot"><a href="#local-6989586621679180005"><span class="hs-identifier hs-type">methodDecs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Dec</span></span><span class="hs-special">]</span><span>
</span><span id="line-1271"></span><span>    </span><span id="local-6989586621679180005"><span class="annot"><span class="annottext">methodDecs :: Name -&gt; [Type] -&gt; [ConstructorInfo] -&gt; [Q Dec]
</span><a href="#local-6989586621679180005"><span class="hs-identifier hs-var hs-var">methodDecs</span></a></span></span><span> </span><span id="local-6989586621679180004"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180004"><span class="hs-identifier hs-var">parentName</span></a></span></span><span> </span><span id="local-6989586621679180003"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180003"><span class="hs-identifier hs-var">instTys</span></a></span></span><span> </span><span id="local-6989586621679180002"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180002"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">[(JSONFun,
  JSONClass
  -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)]
</span><a href="#local-6989586621679180027"><span class="hs-identifier hs-var">consFuns</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679180000"><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679180000"><span class="hs-identifier hs-var">jf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179999"><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="#local-6989586621679179999"><span class="hs-identifier hs-var">jfMaker</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1272"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; [m Clause] -&gt; m Dec
</span><span class="hs-identifier hs-var">funD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679180000"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Arity
</span><a href="Data.Aeson.TH.html#arity"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180026"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
Quote m =&gt;
[m Pat] -&gt; m Body -&gt; [m Dec] -&gt; m Clause
</span><span class="hs-identifier hs-var">clause</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1274"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; m Exp -&gt; m Body
</span><span class="hs-identifier hs-var">normalB</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="#local-6989586621679179999"><span class="hs-identifier hs-var">jfMaker</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679180026"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679180004"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679180025"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679180003"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679180002"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1275"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1276"></span><span>           </span><span class="hs-special">]</span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span class="annot"><a href="Data.Aeson.TH.html#mkFunCommon"><span class="hs-identifier hs-type">mkFunCommon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span class="hs-special">)</span><span>
</span><span id="line-1279"></span><span>            </span><span class="hs-comment">-- ^ The function which derives the expression.</span><span>
</span><span id="line-1280"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-1281"></span><span>            </span><span class="hs-comment">-- ^ Which class's method is being derived.</span><span>
</span><span id="line-1282"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span>
</span><span id="line-1283"></span><span>            </span><span class="hs-comment">-- ^ Encoding options.</span><span>
</span><span id="line-1284"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1285"></span><span>            </span><span class="hs-comment">-- ^ Name of the encoded type.</span><span>
</span><span id="line-1286"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1287"></span><span id="mkFunCommon"><span class="annot"><span class="annottext">mkFunCommon :: (JSONClass
 -&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp)
-&gt; JSONClass -&gt; Options -&gt; Name -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#mkFunCommon"><span class="hs-identifier hs-var hs-var">mkFunCommon</span></a></span></span><span> </span><span id="local-6989586621679179996"><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="#local-6989586621679179996"><span class="hs-identifier hs-var">consFun</span></a></span></span><span> </span><span id="local-6989586621679179995"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179995"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179994"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179994"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621679179993"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179993"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1288"></span><span>  </span><span id="local-6989586621679179992"><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679179992"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q DatatypeInfo
</span><span class="hs-identifier hs-var">reifyDatatype</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179993"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1289"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DatatypeInfo
</span><a href="#local-6989586621679179992"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1290"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">DatatypeInfo</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">datatypeContext :: DatatypeInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">datatypeContext</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679179991"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179991"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span>
</span><span id="line-1291"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeName :: DatatypeInfo -&gt; Name
</span><span class="hs-identifier hs-var">datatypeName</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679179990"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179990"><span class="hs-identifier hs-var">parentName</span></a></span></span><span class="hs-cpp">
#if MIN_VERSION_th_abstraction(0,3,0)
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeInstTypes :: DatatypeInfo -&gt; [Type]
</span><span class="hs-identifier hs-var">datatypeInstTypes</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679179989"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179989"><span class="hs-identifier hs-var">instTys</span></a></span></span><span class="hs-cpp">
#else
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">datatypeVars</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">instTys</span><span class="hs-cpp">
#endif
</span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeVariant :: DatatypeInfo -&gt; DatatypeVariant
</span><span class="hs-identifier hs-var">datatypeVariant</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679179988"><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679179988"><span class="hs-identifier hs-var">variant</span></a></span></span><span>
</span><span id="line-1298"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">datatypeCons :: DatatypeInfo -&gt; [ConstructorInfo]
</span><span class="hs-identifier hs-var">datatypeCons</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679179987"><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679179987"><span class="hs-identifier hs-var">cons</span></a></span></span><span>
</span><span id="line-1299"></span><span>                 </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1300"></span><span>      </span><span class="hs-comment">-- We force buildTypeInstance here since it performs some checks for whether</span><span>
</span><span id="line-1301"></span><span>      </span><span class="hs-comment">-- or not the provided datatype's kind matches the derived method's</span><span>
</span><span id="line-1302"></span><span>      </span><span class="hs-comment">-- typeclass, and produces errors if it can't.</span><span>
</span><span id="line-1303"></span><span>      </span><span class="hs-glyph">!</span><span class="annot"><span class="annottext">([Type], Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; JSONClass
-&gt; [Type]
-&gt; [Type]
-&gt; DatatypeVariant
-&gt; Q ([Type], Type)
</span><a href="Data.Aeson.TH.html#buildTypeInstance"><span class="hs-identifier hs-var">buildTypeInstance</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179990"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179995"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179991"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179989"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679179988"><span class="hs-identifier hs-var">variant</span></a></span><span>
</span><span id="line-1304"></span><span>      </span><span class="annot"><span class="annottext">JSONClass
-&gt; Name -&gt; Options -&gt; [Type] -&gt; [ConstructorInfo] -&gt; Q Exp
</span><a href="#local-6989586621679179996"><span class="hs-identifier hs-var">consFun</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179995"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179990"><span class="hs-identifier hs-var">parentName</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179994"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179989"><span class="hs-identifier hs-var">instTys</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstructorInfo]
</span><a href="#local-6989586621679179987"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-type">dispatchFunByType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-1307"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span>
</span><span id="line-1308"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1309"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span>
</span><span id="line-1310"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- True if we are using the function argument that works</span><span>
</span><span id="line-1311"></span><span>                          </span><span class="hs-comment">-- on lists (e.g., [a] -&gt; Value). False is we are using</span><span>
</span><span id="line-1312"></span><span>                          </span><span class="hs-comment">-- the function argument that works on single values</span><span>
</span><span id="line-1313"></span><span>                          </span><span class="hs-comment">-- (e.g., a -&gt; Value).</span><span>
</span><span id="line-1314"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1315"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1316"></span><span id="dispatchFunByType"><span class="annot"><span class="annottext">dispatchFunByType :: JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var hs-var">dispatchFunByType</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179985"><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179985"><span class="hs-identifier hs-var">jf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179984"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179984"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679179983"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179983"><span class="hs-identifier hs-var">list</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span id="local-6989586621679179981"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179981"><span class="hs-identifier hs-var">tyName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1317"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">M.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179981"><span class="hs-identifier hs-var">tyName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179984"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1318"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179980"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179980"><span class="hs-identifier hs-var">tfjExp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179979"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179979"><span class="hs-identifier hs-var">tfjlExp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179983"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179979"><span class="hs-identifier hs-var">tfjlExp</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179980"><span class="hs-identifier hs-var">tfjExp</span></a></span><span>
</span><span id="line-1319"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Name, Name)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-var">jsonFunValOrListName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179983"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179985"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span>
</span><span id="line-1320"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span id="local-6989586621679179976"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179976"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179975"><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179975"><span class="hs-identifier hs-var">jf</span></a></span></span><span> </span><span id="local-6989586621679179974"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179974"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679179973"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179973"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679179972"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179972"><span class="hs-identifier hs-var">list</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179970"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179970"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1321"></span><span>    </span><span class="annot"><span class="annottext">JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179976"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179975"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179974"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179973"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179972"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179970"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1322"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span id="local-6989586621679179969"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179969"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179968"><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179968"><span class="hs-identifier hs-var">jf</span></a></span></span><span> </span><span id="local-6989586621679179967"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179967"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679179966"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179966"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679179965"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179965"><span class="hs-identifier hs-var">list</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForallT</span></span><span> </span><span class="annot"><span class="annottext">[TyVarBndr Specificity]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179963"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179963"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1323"></span><span>    </span><span class="annot"><span class="annottext">JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179969"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179968"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179967"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179966"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179965"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179963"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1324"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span id="local-6989586621679179962"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179962"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179961"><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179961"><span class="hs-identifier hs-var">jf</span></a></span></span><span> </span><span id="local-6989586621679179960"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179960"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679179959"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179959"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679179958"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179958"><span class="hs-identifier hs-var">list</span></a></span></span><span> </span><span id="local-6989586621679179957"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179957"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1325"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679179956"><span class="hs-identifier hs-type">tyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1326"></span><span>        </span><span class="annot"><a href="#local-6989586621679179955"><span class="hs-identifier hs-type">tyArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1327"></span><span>        </span><span id="local-6989586621679179956"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179956"><span class="hs-identifier hs-var">tyCon</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679179955"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179955"><span class="hs-identifier hs-var">tyArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="Data.Aeson.TH.html#unapplyTy"><span class="hs-identifier hs-var">unapplyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179957"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1328"></span><span>
</span><span id="line-1329"></span><span>        </span><span class="annot"><a href="#local-6989586621679179953"><span class="hs-identifier hs-type">numLastArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1330"></span><span>        </span><span id="local-6989586621679179953"><span class="annot"><span class="annottext">numLastArgs :: Int
</span><a href="#local-6989586621679179953"><span class="hs-identifier hs-var hs-var">numLastArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179962"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179955"><span class="hs-identifier hs-var">tyArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1331"></span><span>
</span><span id="line-1332"></span><span>        </span><span class="annot"><a href="#local-6989586621679179951"><span class="hs-identifier hs-type">lhsArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679179950"><span class="hs-identifier hs-type">rhsArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1333"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679179951"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179951"><span class="hs-identifier hs-var">lhsArgs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179950"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179950"><span class="hs-identifier hs-var">rhsArgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179955"><span class="hs-identifier hs-var">tyArgs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179953"><span class="hs-identifier hs-var">numLastArgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179955"><span class="hs-identifier hs-var">tyArgs</span></a></span><span>
</span><span id="line-1334"></span><span>
</span><span id="line-1335"></span><span>        </span><span class="annot"><a href="#local-6989586621679179946"><span class="hs-identifier hs-type">tyVarNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1336"></span><span>        </span><span id="local-6989586621679179946"><span class="annot"><span class="annottext">tyVarNames :: [Name]
</span><a href="#local-6989586621679179946"><span class="hs-identifier hs-var hs-var">tyVarNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179959"><span class="hs-identifier hs-var">tvMap</span></a></span><span>
</span><span id="line-1337"></span><span>
</span><span id="line-1338"></span><span>    </span><span id="local-6989586621679179945"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179945"><span class="hs-identifier hs-var">itf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; Type -&gt; [Type] -&gt; Q Bool
</span><a href="Data.Aeson.TH.html#isInTypeFamilyApp"><span class="hs-identifier hs-var">isInTypeFamilyApp</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179946"><span class="hs-identifier hs-var">tyVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179956"><span class="hs-identifier hs-var">tyCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179955"><span class="hs-identifier hs-var">tyArgs</span></a></span><span>
</span><span id="line-1339"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-operator hs-var">`mentionsName`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179946"><span class="hs-identifier hs-var">tyVarNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179951"><span class="hs-identifier hs-var">lhsArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179945"><span class="hs-identifier hs-var">itf</span></a></span><span>
</span><span id="line-1340"></span><span>       </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. JSONClass -&gt; Name -&gt; a
</span><a href="Data.Aeson.TH.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var">outOfPlaceTyVarError</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179962"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179960"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1341"></span><span>       </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-operator hs-var">`mentionsName`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179946"><span class="hs-identifier hs-var">tyVarNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179950"><span class="hs-identifier hs-var">rhsArgs</span></a></span><span>
</span><span id="line-1342"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; [m Exp] -&gt; m Exp
</span><span class="hs-identifier hs-var">appsE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-var">jsonFunValOrListName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179958"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179961"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179953"><span class="hs-identifier hs-var">numLastArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>                         </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179962"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179961"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179960"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179959"><span class="hs-identifier hs-var">tvMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1344"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">cycle</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var">interleave</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179950"><span class="hs-identifier hs-var">rhsArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179950"><span class="hs-identifier hs-var">rhsArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Name -&gt; m Exp
</span><span class="hs-identifier hs-var">varE</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-var">jsonFunValOrListName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179958"><span class="hs-identifier hs-var">list</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="#local-6989586621679179961"><span class="hs-identifier hs-var">jf</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span>
</span><span id="line-1347"></span><span>
</span><span id="line-1348"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchToJSON"><span class="hs-identifier hs-type">dispatchToJSON</span></a></span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1350"></span><span id="dispatchToJSON"><span class="annot"><span class="annottext">dispatchToJSON :: ToJSONFun
-&gt; JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchToJSON"><span class="hs-identifier hs-var hs-var">dispatchToJSON</span></a></span></span><span> </span><span id="local-6989586621679179935"><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679179935"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621679179934"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179934"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179933"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179933"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679179932"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179932"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1351"></span><span>    </span><span class="annot"><span class="annottext">JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179934"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ToJSONFun -&gt; JSONFun
</span><a href="Data.Aeson.TH.html#targetToJSONFun"><span class="hs-identifier hs-var">targetToJSONFun</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="#local-6989586621679179935"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179933"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179932"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1352"></span><span>
</span><span id="line-1353"></span><span class="annot"><a href="Data.Aeson.TH.html#dispatchParseJSON"><span class="hs-identifier hs-type">dispatchParseJSON</span></a></span><span>
</span><span id="line-1354"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1355"></span><span id="dispatchParseJSON"><span class="annot"><span class="annottext">dispatchParseJSON :: JSONClass -&gt; Name -&gt; Map Name (Name, Name) -&gt; Type -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchParseJSON"><span class="hs-identifier hs-var hs-var">dispatchParseJSON</span></a></span></span><span>  </span><span id="local-6989586621679179930"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179930"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179929"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179929"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679179928"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179928"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass
-&gt; JSONFun
-&gt; Name
-&gt; Map Name (Name, Name)
-&gt; Bool
-&gt; Type
-&gt; Q Exp
</span><a href="Data.Aeson.TH.html#dispatchFunByType"><span class="hs-identifier hs-var">dispatchFunByType</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179930"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179929"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179928"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1358"></span><span class="hs-comment">-- Utility functions</span><span>
</span><span id="line-1359"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1360"></span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- For the given Types, generate an instance context and head.</span><span>
</span><span id="line-1362"></span><span class="annot"><a href="Data.Aeson.TH.html#buildTypeInstance"><span class="hs-identifier hs-type">buildTypeInstance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1363"></span><span>                  </span><span class="hs-comment">-- ^ The type constructor or data family name</span><span>
</span><span id="line-1364"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-1365"></span><span>                  </span><span class="hs-comment">-- ^ The typeclass to derive</span><span>
</span><span id="line-1366"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cxt</span></span><span>
</span><span id="line-1367"></span><span>                  </span><span class="hs-comment">-- ^ The datatype context</span><span>
</span><span id="line-1368"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1369"></span><span>                  </span><span class="hs-comment">-- ^ The types to instantiate the instance with</span><span>
</span><span id="line-1370"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DatatypeVariant</span></span><span>
</span><span id="line-1371"></span><span>                  </span><span class="hs-comment">-- ^ Are we dealing with a data family instance or not</span><span>
</span><span id="line-1372"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cxt</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-1373"></span><span id="buildTypeInstance"><span class="annot"><span class="annottext">buildTypeInstance :: Name
-&gt; JSONClass
-&gt; [Type]
-&gt; [Type]
-&gt; DatatypeVariant
-&gt; Q ([Type], Type)
</span><a href="Data.Aeson.TH.html#buildTypeInstance"><span class="hs-identifier hs-var hs-var">buildTypeInstance</span></a></span></span><span> </span><span id="local-6989586621679179926"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179926"><span class="hs-identifier hs-var">tyConName</span></a></span></span><span> </span><span id="local-6989586621679179925"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179924"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179924"><span class="hs-identifier hs-var">dataCxt</span></a></span></span><span> </span><span id="local-6989586621679179923"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179923"><span class="hs-identifier hs-var">varTysOrig</span></a></span></span><span> </span><span id="local-6989586621679179922"><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679179922"><span class="hs-identifier hs-var">variant</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1374"></span><span>    </span><span class="hs-comment">-- Make sure to expand through type/kind synonyms! Otherwise, the</span><span>
</span><span id="line-1375"></span><span>    </span><span class="hs-comment">-- eta-reduction check might get tripped up over type variables in a</span><span>
</span><span id="line-1376"></span><span>    </span><span class="hs-comment">-- synonym that are actually dropped.</span><span>
</span><span id="line-1377"></span><span>    </span><span class="hs-comment">-- (See GHC Trac #11416 for a scenario where this actually happened.)</span><span>
</span><span id="line-1378"></span><span>    </span><span id="local-6989586621679179921"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179921"><span class="hs-identifier hs-var">varTysExp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Q Type
</span><span class="hs-identifier hs-var">resolveTypeSynonyms</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179923"><span class="hs-identifier hs-var">varTysOrig</span></a></span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679179920"><span class="hs-identifier hs-type">remainingLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1381"></span><span>        </span><span id="local-6989586621679179920"><span class="annot"><span class="annottext">remainingLength :: Int
</span><a href="#local-6989586621679179920"><span class="hs-identifier hs-var hs-var">remainingLength</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179923"><span class="hs-identifier hs-var">varTysOrig</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-1382"></span><span>
</span><span id="line-1383"></span><span>        </span><span class="annot"><a href="#local-6989586621679179919"><span class="hs-identifier hs-type">droppedTysExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1384"></span><span>        </span><span id="local-6989586621679179919"><span class="annot"><span class="annottext">droppedTysExp :: [Type]
</span><a href="#local-6989586621679179919"><span class="hs-identifier hs-var hs-var">droppedTysExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179920"><span class="hs-identifier hs-var">remainingLength</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179921"><span class="hs-identifier hs-var">varTysExp</span></a></span><span>
</span><span id="line-1385"></span><span>
</span><span id="line-1386"></span><span>        </span><span class="annot"><a href="#local-6989586621679179918"><span class="hs-identifier hs-type">droppedStarKindStati</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Aeson.TH.html#StarKindStatus"><span class="hs-identifier hs-type">StarKindStatus</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1387"></span><span>        </span><span id="local-6989586621679179918"><span class="annot"><span class="annottext">droppedStarKindStati :: [StarKindStatus]
</span><a href="#local-6989586621679179918"><span class="hs-identifier hs-var hs-var">droppedStarKindStati</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; StarKindStatus
</span><a href="Data.Aeson.TH.html#canRealizeKindStar"><span class="hs-identifier hs-var">canRealizeKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179919"><span class="hs-identifier hs-var">droppedTysExp</span></a></span><span>
</span><span id="line-1388"></span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-comment">-- Check there are enough types to drop and that all of them are either of</span><span>
</span><span id="line-1390"></span><span>    </span><span class="hs-comment">-- kind * or kind k (for some kind variable k). If not, throw an error.</span><span>
</span><span id="line-1391"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179920"><span class="hs-identifier hs-var">remainingLength</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">StarKindStatus
</span><a href="Data.Aeson.TH.html#NotKindStar"><span class="hs-identifier hs-var">NotKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">[StarKindStatus]
</span><a href="#local-6989586621679179918"><span class="hs-identifier hs-var">droppedStarKindStati</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1392"></span><span>      </span><span class="annot"><span class="annottext">forall a. JSONClass -&gt; Name -&gt; Q a
</span><a href="Data.Aeson.TH.html#derivingKindError"><span class="hs-identifier hs-var">derivingKindError</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179926"><span class="hs-identifier hs-var">tyConName</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679179913"><span class="hs-identifier hs-type">droppedKindVarNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1395"></span><span>        </span><span id="local-6989586621679179913"><span class="annot"><span class="annottext">droppedKindVarNames :: [Name]
</span><a href="#local-6989586621679179913"><span class="hs-identifier hs-var hs-var">droppedKindVarNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[StarKindStatus] -&gt; [Name]
</span><a href="Data.Aeson.TH.html#catKindVarNames"><span class="hs-identifier hs-var">catKindVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">[StarKindStatus]
</span><a href="#local-6989586621679179918"><span class="hs-identifier hs-var">droppedStarKindStati</span></a></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span>        </span><span class="hs-comment">-- Substitute kind * for any dropped kind variables</span><span>
</span><span id="line-1398"></span><span>        </span><span class="annot"><a href="#local-6989586621679179911"><span class="hs-identifier hs-type">varTysExpSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1399"></span><span>        </span><span id="local-6989586621679179911"><span class="annot"><span class="annottext">varTysExpSubst :: [Type]
</span><a href="#local-6989586621679179911"><span class="hs-identifier hs-var hs-var">varTysExpSubst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNamesWithKindStar"><span class="hs-identifier hs-var">substNamesWithKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179913"><span class="hs-identifier hs-var">droppedKindVarNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179921"><span class="hs-identifier hs-var">varTysExp</span></a></span><span>
</span><span id="line-1400"></span><span>
</span><span id="line-1401"></span><span>        </span><span class="annot"><a href="#local-6989586621679179909"><span class="hs-identifier hs-type">remainingTysExpSubst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679179908"><span class="hs-identifier hs-type">droppedTysExpSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1402"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679179909"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179909"><span class="hs-identifier hs-var">remainingTysExpSubst</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179908"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179908"><span class="hs-identifier hs-var">droppedTysExpSubst</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1403"></span><span>          </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179920"><span class="hs-identifier hs-var">remainingLength</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179911"><span class="hs-identifier hs-var">varTysExpSubst</span></a></span><span>
</span><span id="line-1404"></span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-comment">-- All of the type variables mentioned in the dropped types</span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-comment">-- (post-synonym expansion)</span><span>
</span><span id="line-1407"></span><span>        </span><span class="annot"><a href="#local-6989586621679179907"><span class="hs-identifier hs-type">droppedTyVarNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1408"></span><span>        </span><span id="local-6989586621679179907"><span class="annot"><span class="annottext">droppedTyVarNames :: [Name]
</span><a href="#local-6989586621679179907"><span class="hs-identifier hs-var hs-var">droppedTyVarNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. TypeSubstitution a =&gt; a -&gt; [Name]
</span><span class="hs-identifier hs-var">freeVariables</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179908"><span class="hs-identifier hs-var">droppedTysExpSubst</span></a></span><span>
</span><span id="line-1409"></span><span>
</span><span id="line-1410"></span><span>    </span><span class="hs-comment">-- If any of the dropped types were polykinded, ensure that they are of kind *</span><span>
</span><span id="line-1411"></span><span>    </span><span class="hs-comment">-- after substituting * for the dropped kind variables. If not, throw an error.</span><span>
</span><span id="line-1412"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var">hasKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179908"><span class="hs-identifier hs-var">droppedTysExpSubst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1413"></span><span>      </span><span class="annot"><span class="annottext">forall a. JSONClass -&gt; Name -&gt; Q a
</span><a href="Data.Aeson.TH.html#derivingKindError"><span class="hs-identifier hs-var">derivingKindError</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179926"><span class="hs-identifier hs-var">tyConName</span></a></span><span>
</span><span id="line-1414"></span><span>
</span><span id="line-1415"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679179904"><span class="hs-identifier hs-type">preds</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pred</span></span><span class="hs-special">]</span><span>
</span><span id="line-1416"></span><span>        </span><span class="annot"><a href="#local-6989586621679179903"><span class="hs-identifier hs-type">kvNames</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-1417"></span><span>        </span><span class="annot"><a href="#local-6989586621679179902"><span class="hs-identifier hs-type">kvNames'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1418"></span><span>        </span><span class="hs-comment">-- Derive instance constraints (and any kind variables which are specialized</span><span>
</span><span id="line-1419"></span><span>        </span><span class="hs-comment">-- to * in those constraints)</span><span>
</span><span id="line-1420"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679179904"><span class="annot"><span class="annottext">[Maybe Type]
</span><a href="#local-6989586621679179904"><span class="hs-identifier hs-var">preds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179903"><span class="annot"><span class="annottext">[[Name]]
</span><a href="#local-6989586621679179903"><span class="hs-identifier hs-var">kvNames</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Type -&gt; (Maybe Type, [Name])
</span><a href="Data.Aeson.TH.html#deriveConstraint"><span class="hs-identifier hs-var">deriveConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179909"><span class="hs-identifier hs-var">remainingTysExpSubst</span></a></span><span>
</span><span id="line-1421"></span><span>        </span><span id="local-6989586621679179902"><span class="annot"><span class="annottext">kvNames' :: [Name]
</span><a href="#local-6989586621679179902"><span class="hs-identifier hs-var hs-var">kvNames'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[Name]]
</span><a href="#local-6989586621679179903"><span class="hs-identifier hs-var">kvNames</span></a></span><span>
</span><span id="line-1422"></span><span>
</span><span id="line-1423"></span><span>        </span><span class="hs-comment">-- Substitute the kind variables specialized in the constraints with *</span><span>
</span><span id="line-1424"></span><span>        </span><span class="annot"><a href="#local-6989586621679179898"><span class="hs-identifier hs-type">remainingTysExpSubst'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1425"></span><span>        </span><span id="local-6989586621679179898"><span class="annot"><span class="annottext">remainingTysExpSubst' :: [Type]
</span><a href="#local-6989586621679179898"><span class="hs-identifier hs-var hs-var">remainingTysExpSubst'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1426"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNamesWithKindStar"><span class="hs-identifier hs-var">substNamesWithKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179902"><span class="hs-identifier hs-var">kvNames'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179909"><span class="hs-identifier hs-var">remainingTysExpSubst</span></a></span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span>        </span><span class="hs-comment">-- We now substitute all of the specialized-to-* kind variable names with</span><span>
</span><span id="line-1429"></span><span>        </span><span class="hs-comment">-- *, but in the original types, not the synonym-expanded types. The reason</span><span>
</span><span id="line-1430"></span><span>        </span><span class="hs-comment">-- we do this is a superficial one: we want the derived instance to resemble</span><span>
</span><span id="line-1431"></span><span>        </span><span class="hs-comment">-- the datatype written in source code as closely as possible. For example,</span><span>
</span><span id="line-1432"></span><span>        </span><span class="hs-comment">-- for the following data family instance:</span><span>
</span><span id="line-1433"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1434"></span><span>        </span><span class="hs-comment">--   data family Fam a</span><span>
</span><span id="line-1435"></span><span>        </span><span class="hs-comment">--   newtype instance Fam String = Fam String</span><span>
</span><span id="line-1436"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1437"></span><span>        </span><span class="hs-comment">-- We'd want to generate the instance:</span><span>
</span><span id="line-1438"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1439"></span><span>        </span><span class="hs-comment">--   instance C (Fam String)</span><span>
</span><span id="line-1440"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1441"></span><span>        </span><span class="hs-comment">-- Not:</span><span>
</span><span id="line-1442"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-1443"></span><span>        </span><span class="hs-comment">--   instance C (Fam [Char])</span><span>
</span><span id="line-1444"></span><span>        </span><span class="annot"><a href="#local-6989586621679179897"><span class="hs-identifier hs-type">remainingTysOrigSubst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1445"></span><span>        </span><span id="local-6989586621679179897"><span class="annot"><span class="annottext">remainingTysOrigSubst :: [Type]
</span><a href="#local-6989586621679179897"><span class="hs-identifier hs-var hs-var">remainingTysOrigSubst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1446"></span><span>          </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNamesWithKindStar"><span class="hs-identifier hs-var">substNamesWithKindStar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179913"><span class="hs-identifier hs-var">droppedKindVarNames</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">`union`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179902"><span class="hs-identifier hs-var">kvNames'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>            </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179920"><span class="hs-identifier hs-var">remainingLength</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179923"><span class="hs-identifier hs-var">varTysOrig</span></a></span><span>
</span><span id="line-1448"></span><span>
</span><span id="line-1449"></span><span>        </span><span class="annot"><a href="#local-6989586621679179895"><span class="hs-identifier hs-type">isDataFamily</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1450"></span><span>        </span><span id="local-6989586621679179895"><span class="annot"><span class="annottext">isDataFamily :: Bool
</span><a href="#local-6989586621679179895"><span class="hs-identifier hs-var hs-var">isDataFamily</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DatatypeVariant
</span><a href="#local-6989586621679179922"><span class="hs-identifier hs-var">variant</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1451"></span><span>                         </span><span class="annot"><span class="annottext">DatatypeVariant
</span><span class="hs-identifier hs-var">Datatype</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1452"></span><span>                         </span><span class="annot"><span class="annottext">DatatypeVariant
</span><span class="hs-identifier hs-var">Newtype</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1453"></span><span>                         </span><span class="annot"><span class="annottext">DatatypeVariant
</span><span class="hs-identifier hs-var">DataInstance</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1454"></span><span>                         </span><span class="annot"><span class="annottext">DatatypeVariant
</span><span class="hs-identifier hs-var">NewtypeInstance</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span>        </span><span class="annot"><a href="#local-6989586621679179890"><span class="hs-identifier hs-type">remainingTysOrigSubst'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span>
</span><span id="line-1457"></span><span>        </span><span class="hs-comment">-- See Note [Kind signatures in derived instances] for an explanation</span><span>
</span><span id="line-1458"></span><span>        </span><span class="hs-comment">-- of the isDataFamily check.</span><span>
</span><span id="line-1459"></span><span>        </span><span id="local-6989586621679179890"><span class="annot"><span class="annottext">remainingTysOrigSubst' :: [Type]
</span><a href="#local-6989586621679179890"><span class="hs-identifier hs-var hs-var">remainingTysOrigSubst'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1460"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679179895"><span class="hs-identifier hs-var">isDataFamily</span></a></span><span>
</span><span id="line-1461"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179897"><span class="hs-identifier hs-var">remainingTysOrigSubst</span></a></span><span>
</span><span id="line-1462"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type
</span><a href="Data.Aeson.TH.html#unSigT"><span class="hs-identifier hs-var">unSigT</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179897"><span class="hs-identifier hs-var">remainingTysOrigSubst</span></a></span><span>
</span><span id="line-1463"></span><span>
</span><span id="line-1464"></span><span>        </span><span class="annot"><a href="#local-6989586621679179888"><span class="hs-identifier hs-type">instanceCxt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cxt</span></span><span>
</span><span id="line-1465"></span><span>        </span><span id="local-6989586621679179888"><span class="annot"><span class="annottext">instanceCxt :: [Type]
</span><a href="#local-6989586621679179888"><span class="hs-identifier hs-var hs-var">instanceCxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Type]
</span><a href="#local-6989586621679179904"><span class="hs-identifier hs-var">preds</span></a></span><span>
</span><span id="line-1466"></span><span>
</span><span id="line-1467"></span><span>        </span><span class="annot"><a href="#local-6989586621679179887"><span class="hs-identifier hs-type">instanceType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1468"></span><span>        </span><span id="local-6989586621679179887"><span class="annot"><span class="annottext">instanceType :: Type
</span><a href="#local-6989586621679179887"><span class="hs-identifier hs-var hs-var">instanceType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><span class="hs-identifier hs-var">AppT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type
</span><span class="hs-identifier hs-var">ConT</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179925"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span>                     </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Type] -&gt; Type
</span><a href="Data.Aeson.TH.html#applyTyCon"><span class="hs-identifier hs-var">applyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179926"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179890"><span class="hs-identifier hs-var">remainingTysOrigSubst'</span></a></span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span>    </span><span class="hs-comment">-- If the datatype context mentions any of the dropped type variables,</span><span>
</span><span id="line-1472"></span><span>    </span><span class="hs-comment">-- we can't derive an instance, so throw an error.</span><span>
</span><span id="line-1473"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#predMentionsName"><span class="hs-operator hs-var">`predMentionsName`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179907"><span class="hs-identifier hs-var">droppedTyVarNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179924"><span class="hs-identifier hs-var">dataCxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1474"></span><span>      </span><span class="annot"><span class="annottext">forall a. Name -&gt; Type -&gt; Q a
</span><a href="Data.Aeson.TH.html#datatypeContextError"><span class="hs-identifier hs-var">datatypeContextError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179926"><span class="hs-identifier hs-var">tyConName</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179887"><span class="hs-identifier hs-var">instanceType</span></a></span><span>
</span><span id="line-1475"></span><span>    </span><span class="hs-comment">-- Also ensure the dropped types can be safely eta-reduced. Otherwise,</span><span>
</span><span id="line-1476"></span><span>    </span><span class="hs-comment">-- throw an error.</span><span>
</span><span id="line-1477"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Bool
</span><a href="Data.Aeson.TH.html#canEtaReduce"><span class="hs-identifier hs-var">canEtaReduce</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179898"><span class="hs-identifier hs-var">remainingTysExpSubst'</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179908"><span class="hs-identifier hs-var">droppedTysExpSubst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1478"></span><span>      </span><span class="annot"><span class="annottext">forall a. Type -&gt; Q a
</span><a href="Data.Aeson.TH.html#etaReductionError"><span class="hs-identifier hs-var">etaReductionError</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179887"><span class="hs-identifier hs-var">instanceType</span></a></span><span>
</span><span id="line-1479"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179888"><span class="hs-identifier hs-var">instanceCxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179887"><span class="hs-identifier hs-var">instanceType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span class="hs-comment">-- | Attempt to derive a constraint on a Type. If successful, return</span><span>
</span><span id="line-1482"></span><span class="hs-comment">-- Just the constraint and any kind variable names constrained to *.</span><span>
</span><span id="line-1483"></span><span class="hs-comment">-- Otherwise, return Nothing and the empty list.</span><span>
</span><span id="line-1484"></span><span class="hs-comment">--</span><span>
</span><span id="line-1485"></span><span class="hs-comment">-- See Note [Type inference in derived instances] for the heuristics used to</span><span>
</span><span id="line-1486"></span><span class="hs-comment">-- come up with constraints.</span><span>
</span><span id="line-1487"></span><span class="annot"><a href="Data.Aeson.TH.html#deriveConstraint"><span class="hs-identifier hs-type">deriveConstraint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pred</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1488"></span><span id="deriveConstraint"><span class="annot"><span class="annottext">deriveConstraint :: JSONClass -&gt; Type -&gt; (Maybe Type, [Name])
</span><a href="Data.Aeson.TH.html#deriveConstraint"><span class="hs-identifier hs-var hs-var">deriveConstraint</span></a></span></span><span> </span><span id="local-6989586621679179880"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179880"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179879"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-1489"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var">hasKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Type
</span><a href="Data.Aeson.TH.html#applyCon"><span class="hs-identifier hs-var">applyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Name
</span><a href="#local-6989586621679179876"><span class="hs-identifier hs-var">jcConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179875"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Maybe [Name]
</span><a href="Data.Aeson.TH.html#hasKindVarChain"><span class="hs-identifier hs-var">hasKindVarChain</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1492"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679179873"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179873"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621679179872"><span class="hs-identifier hs-var">jcArity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span>
</span><span id="line-1493"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Type
</span><a href="Data.Aeson.TH.html#applyCon"><span class="hs-identifier hs-var">applyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Name
</span><a href="#local-6989586621679179876"><span class="hs-identifier hs-var">jcConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179875"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179873"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1494"></span><span>      </span><span class="annot"><span class="annottext">Maybe [Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type -&gt; Maybe [Name]
</span><a href="Data.Aeson.TH.html#hasKindVarChain"><span class="hs-identifier hs-var">hasKindVarChain</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1495"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679179870"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179870"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621679179872"><span class="hs-identifier hs-var">jcArity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span>
</span><span id="line-1496"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Type
</span><a href="Data.Aeson.TH.html#applyCon"><span class="hs-identifier hs-var">applyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity -&gt; Name
</span><a href="#local-6989586621679179876"><span class="hs-identifier hs-var">jcConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179875"><span class="hs-identifier hs-var">tName</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179870"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1497"></span><span>           </span><span class="annot"><span class="annottext">Maybe [Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1499"></span><span>    </span><span class="annot"><a href="#local-6989586621679179875"><span class="hs-identifier hs-type">tName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1500"></span><span>    </span><span id="local-6989586621679179875"><span class="annot"><span class="annottext">tName :: Name
</span><a href="#local-6989586621679179875"><span class="hs-identifier hs-var hs-var">tName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Name
</span><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-var">varTToName</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179879"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span>    </span><span class="annot"><a href="#local-6989586621679179872"><span class="hs-identifier hs-type">jcArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-1503"></span><span>    </span><span id="local-6989586621679179872"><span class="annot"><span class="annottext">jcArity :: Arity
</span><a href="#local-6989586621679179872"><span class="hs-identifier hs-var hs-var">jcArity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Arity
</span><a href="Data.Aeson.TH.html#arity"><span class="hs-identifier hs-var">arity</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179880"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-1504"></span><span>
</span><span id="line-1505"></span><span>    </span><span class="annot"><a href="#local-6989586621679179876"><span class="hs-identifier hs-type">jcConstraint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1506"></span><span>    </span><span id="local-6989586621679179876"><span class="annot"><span class="annottext">jcConstraint :: Arity -&gt; Name
</span><a href="#local-6989586621679179876"><span class="hs-identifier hs-var hs-var">jcConstraint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Direction
</span><a href="Data.Aeson.TH.html#direction"><span class="hs-identifier hs-var">direction</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179880"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span class="hs-comment">{-
Note [Kind signatures in derived instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is possible to put explicit kind signatures into the derived instances, e.g.,

  instance C a =&gt; C (Data (f :: * -&gt; *)) where ...

But it is preferable to avoid this if possible. If we come up with an incorrect
kind signature (which is entirely possible, since Template Haskell doesn't always
have the best track record with reifying kind signatures), then GHC will flat-out
reject the instance, which is quite unfortunate.

Plain old datatypes have the advantage that you can avoid using any kind signatures
at all in their instances. This is because a datatype declaration uses all type
variables, so the types that we use in a derived instance uniquely determine their
kinds. As long as we plug in the right types, the kind inferencer can do the rest
of the work. For this reason, we use unSigT to remove all kind signatures before
splicing in the instance context and head.

Data family instances are trickier, since a data family can have two instances that
are distinguished by kind alone, e.g.,

  data family Fam (a :: k)
  data instance Fam (a :: * -&gt; *)
  data instance Fam (a :: *)

If we dropped the kind signatures for C (Fam a), then GHC will have no way of
knowing which instance we are talking about. To avoid this scenario, we always
include explicit kind signatures in data family instances. There is a chance that
the inferred kind signatures will be incorrect, but if so, we can always fall back
on the mk- functions.

Note [Type inference in derived instances]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Type inference is can be tricky to get right, and we want to avoid recreating the
entirety of GHC's type inferencer in Template Haskell. For this reason, we will
probably never come up with derived instance contexts that are as accurate as
GHC's. But that doesn't mean we can't do anything! There are a couple of simple
things we can do to make instance contexts that work for 80% of use cases:

1. If one of the last type parameters is polykinded, then its kind will be
   specialized to * in the derived instance. We note what kind variable the type
   parameter had and substitute it with * in the other types as well. For example,
   imagine you had

     data Data (a :: k) (b :: k)

   Then you'd want to derived instance to be:

     instance C (Data (a :: *))

   Not:

     instance C (Data (a :: k))

2. We na&#239;vely come up with instance constraints using the following criteria:

   (i)   If there's a type parameter n of kind *, generate a ToJSON n/FromJSON n
         constraint.
   (ii)  If there's a type parameter n of kind k1 -&gt; k2 (where k1/k2 are * or kind
         variables), then generate a ToJSON1 n/FromJSON1 n constraint, and if
         k1/k2 are kind variables, then substitute k1/k2 with * elsewhere in the
         types. We must consider the case where they are kind variables because
         you might have a scenario like this:

           newtype Compose (f :: k2 -&gt; *) (g :: k1 -&gt; k2) (a :: k1)
             = Compose (f (g a))

         Which would have a derived ToJSON1 instance of:

           instance (ToJSON1 f, ToJSON1 g) =&gt; ToJSON1 (Compose f g) where ...
   (iii) If there's a type parameter n of kind k1 -&gt; k2 -&gt; k3 (where k1/k2/k3 are
         * or kind variables), then generate a ToJSON2 n/FromJSON2 n constraint
         and perform kind substitution as in the other cases.
-}</span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span id="local-6989586621679181511"><span class="annot"><a href="Data.Aeson.TH.html#checkExistentialContext"><span class="hs-identifier hs-type">checkExistentialContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-type">TyVarMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cxt</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1587"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679181511"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679181511"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1588"></span><span id="checkExistentialContext"><span class="annot"><span class="annottext">checkExistentialContext :: forall a.
JSONClass -&gt; Map Name (Name, Name) -&gt; [Type] -&gt; Name -&gt; Q a -&gt; Q a
</span><a href="Data.Aeson.TH.html#checkExistentialContext"><span class="hs-identifier hs-var hs-var">checkExistentialContext</span></a></span></span><span> </span><span id="local-6989586621679179864"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179864"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179863"><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179863"><span class="hs-identifier hs-var">tvMap</span></a></span></span><span> </span><span id="local-6989586621679179862"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179862"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679179861"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179861"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span id="local-6989586621679179860"><span class="annot"><span class="annottext">Q a
</span><a href="#local-6989586621679179860"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1589"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#predMentionsName"><span class="hs-operator hs-var">`predMentionsName`</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">M.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179863"><span class="hs-identifier hs-var">tvMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179862"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1590"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Int
</span><span class="hs-identifier hs-var">M.size</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Name, Name)
</span><a href="#local-6989586621679179863"><span class="hs-identifier hs-var">tvMap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179864"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1591"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">JSONClass -&gt; Bool
</span><a href="Data.Aeson.TH.html#allowExQuant"><span class="hs-identifier hs-var">allowExQuant</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179864"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1592"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. Name -&gt; a
</span><a href="Data.Aeson.TH.html#existentialContextError"><span class="hs-identifier hs-var">existentialContextError</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179861"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-1593"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Q a
</span><a href="#local-6989586621679179860"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-1594"></span><span>
</span><span id="line-1595"></span><span class="hs-comment">{-
Note [Matching functions with GADT type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When deriving ToJSON2, there is a tricky corner case to consider:

  data Both a b where
    BothCon :: x -&gt; x -&gt; Both x x

Which encoding functions should be applied to which arguments of BothCon?
We have a choice, since both the function of type (a -&gt; Value) and of type
(b -&gt; Value) can be applied to either argument. In such a scenario, the
second encoding function takes precedence over the first encoding function, so the
derived ToJSON2 instance would be something like:

  instance ToJSON2 Both where
    liftToJSON2 tj1 tj2 p (BothCon x1 x2) = Array $ create $ do
      mv &lt;- unsafeNew 2
      unsafeWrite mv 0 (tj1 x1)
      unsafeWrite mv 1 (tj2 x2)
      return mv

This is not an arbitrary choice, as this definition ensures that
liftToJSON2 toJSON = liftToJSON for a derived ToJSON1 instance for
Both.
-}</span><span>
</span><span id="line-1621"></span><span>
</span><span id="line-1622"></span><span class="hs-comment">-- A mapping of type variable Names to their encoding/decoding function Names.</span><span>
</span><span id="line-1623"></span><span class="hs-comment">-- For example, in a ToJSON2 declaration, a TyVarMap might look like</span><span>
</span><span id="line-1624"></span><span class="hs-comment">--</span><span>
</span><span id="line-1625"></span><span class="hs-comment">-- { a ~&gt; (tj1, tjl1)</span><span>
</span><span id="line-1626"></span><span class="hs-comment">-- , b ~&gt; (tj2, tjl2) }</span><span>
</span><span id="line-1627"></span><span class="hs-comment">--</span><span>
</span><span id="line-1628"></span><span class="hs-comment">-- where a and b are the last two type variables of the datatype, tj1 and tjl1 are</span><span>
</span><span id="line-1629"></span><span class="hs-comment">-- the function arguments of types (a -&gt; Value) and ([a] -&gt; Value), and tj2 and tjl2</span><span>
</span><span id="line-1630"></span><span class="hs-comment">-- are the function arguments of types (b -&gt; Value) and ([b] -&gt; Value).</span><span>
</span><span id="line-1631"></span><span class="hs-keyword">type</span><span> </span><span id="TyVarMap"><span class="annot"><a href="Data.Aeson.TH.html#TyVarMap"><span class="hs-identifier hs-var">TyVarMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-1632"></span><span>
</span><span id="line-1633"></span><span class="hs-comment">-- | Returns True if a Type has kind *.</span><span>
</span><span id="line-1634"></span><span class="annot"><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-type">hasKindStar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1635"></span><span id="hasKindStar"><span class="annot"><span class="annottext">hasKindStar :: Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var hs-var">hasKindStar</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1636"></span><span class="annot"><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var">hasKindStar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">StarT</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1637"></span><span class="annot"><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var">hasKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span class="hs-comment">-- Returns True is a kind is equal to *, or if it is a kind variable.</span><span>
</span><span id="line-1640"></span><span class="annot"><a href="Data.Aeson.TH.html#isStarOrVar"><span class="hs-identifier hs-type">isStarOrVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1641"></span><span id="isStarOrVar"><span class="annot"><span class="annottext">isStarOrVar :: Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isStarOrVar"><span class="hs-identifier hs-var hs-var">isStarOrVar</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">StarT</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1642"></span><span class="annot"><a href="Data.Aeson.TH.html#isStarOrVar"><span class="hs-identifier hs-var">isStarOrVar</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1643"></span><span class="annot"><a href="Data.Aeson.TH.html#isStarOrVar"><span class="hs-identifier hs-var">isStarOrVar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1644"></span><span>
</span><span id="line-1645"></span><span class="hs-comment">-- Generate a list of fresh names with a common prefix, and numbered suffixes.</span><span>
</span><span id="line-1646"></span><span class="annot"><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-type">newNameList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1647"></span><span id="newNameList"><span class="annot"><span class="annottext">newNameList :: String -&gt; Int -&gt; Q [Name]
</span><a href="Data.Aeson.TH.html#newNameList"><span class="hs-identifier hs-var hs-var">newNameList</span></a></span></span><span> </span><span id="local-6989586621679179855"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679179855"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621679179854"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179854"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; String -&gt; m Name
</span><span class="hs-identifier hs-var">newName</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679179855"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179853"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679179853"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179853"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179854"><span class="hs-identifier hs-var">len</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-1648"></span><span>
</span><span id="line-1649"></span><span class="hs-comment">-- | @hasKindVarChain n kind@ Checks if @kind@ is of the form</span><span>
</span><span id="line-1650"></span><span class="hs-comment">-- k_0 -&gt; k_1 -&gt; ... -&gt; k_(n-1), where k0, k1, ..., and k_(n-1) can be * or</span><span>
</span><span id="line-1651"></span><span class="hs-comment">-- kind variables.</span><span>
</span><span id="line-1652"></span><span class="annot"><a href="Data.Aeson.TH.html#hasKindVarChain"><span class="hs-identifier hs-type">hasKindVarChain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1653"></span><span id="hasKindVarChain"><span class="annot"><span class="annottext">hasKindVarChain :: Int -&gt; Type -&gt; Maybe [Name]
</span><a href="Data.Aeson.TH.html#hasKindVarChain"><span class="hs-identifier hs-var hs-var">hasKindVarChain</span></a></span></span><span> </span><span id="local-6989586621679179852"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179852"><span class="hs-identifier hs-var">kindArrows</span></a></span></span><span> </span><span id="local-6989586621679179851"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179851"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1654"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679179850"><span class="annot"><span class="annottext">uk :: NonEmpty Type
</span><a href="#local-6989586621679179850"><span class="hs-identifier hs-var hs-var">uk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="Data.Aeson.TH.html#uncurryKind"><span class="hs-identifier hs-var">uncurryKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type
</span><a href="Data.Aeson.TH.html#tyKind"><span class="hs-identifier hs-var">tyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179851"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1655"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; Int
</span><span class="hs-identifier hs-var">NE.length</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179850"><span class="hs-identifier hs-var">uk</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179852"><span class="hs-identifier hs-var">kindArrows</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">F.all</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isStarOrVar"><span class="hs-identifier hs-var">isStarOrVar</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179850"><span class="hs-identifier hs-var">uk</span></a></span><span>
</span><span id="line-1656"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">forall a. TypeSubstitution a =&gt; a -&gt; [Name]
</span><span class="hs-identifier hs-var">freeVariables</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179850"><span class="hs-identifier hs-var">uk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1657"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1658"></span><span>
</span><span id="line-1659"></span><span class="hs-comment">-- | If a Type is a SigT, returns its kind signature. Otherwise, return *.</span><span>
</span><span id="line-1660"></span><span class="annot"><a href="Data.Aeson.TH.html#tyKind"><span class="hs-identifier hs-type">tyKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span>
</span><span id="line-1661"></span><span id="tyKind"><span class="annot"><span class="annottext">tyKind :: Type -&gt; Type
</span><a href="Data.Aeson.TH.html#tyKind"><span class="hs-identifier hs-var hs-var">tyKind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179847"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179847"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179847"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1662"></span><span class="annot"><a href="Data.Aeson.TH.html#tyKind"><span class="hs-identifier hs-var">tyKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">starK</span></span><span>
</span><span id="line-1663"></span><span>
</span><span id="line-1664"></span><span class="hs-comment">-- | Extract Just the Name from a type variable. If the argument Type is not a</span><span>
</span><span id="line-1665"></span><span class="hs-comment">-- type variable, return Nothing.</span><span>
</span><span id="line-1666"></span><span class="annot"><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-type">varTToNameMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1667"></span><span id="varTToNameMaybe"><span class="annot"><span class="annottext">varTToNameMaybe :: Type -&gt; Maybe Name
</span><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-var hs-var">varTToNameMaybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span id="local-6989586621679179844"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179844"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179844"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1668"></span><span class="annot"><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-var">varTToNameMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179843"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179843"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Name
</span><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-var">varTToNameMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179843"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1669"></span><span class="annot"><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-var">varTToNameMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1670"></span><span>
</span><span id="line-1671"></span><span class="hs-comment">-- | Extract the Name from a type variable. If the argument Type is not a</span><span>
</span><span id="line-1672"></span><span class="hs-comment">-- type variable, throw an error.</span><span>
</span><span id="line-1673"></span><span class="annot"><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-type">varTToName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1674"></span><span id="varTToName"><span class="annot"><span class="annottext">varTToName :: Type -&gt; Name
</span><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-var hs-var">varTToName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not a type variable!&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Name
</span><a href="Data.Aeson.TH.html#varTToNameMaybe"><span class="hs-identifier hs-var">varTToNameMaybe</span></a></span><span>
</span><span id="line-1675"></span><span>
</span><span id="line-1676"></span><span id="local-6989586621679179842"><span class="annot"><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-type">interleave</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679179842"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679179842"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679179842"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1677"></span><span id="interleave"><span class="annot"><span class="annottext">interleave :: forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var hs-var">interleave</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179841"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179841"><span class="hs-identifier hs-var">a1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679179840"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179840"><span class="hs-identifier hs-var">a1s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179839"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179839"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679179838"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179838"><span class="hs-identifier hs-var">a2s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179841"><span class="hs-identifier hs-var">a1</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179839"><span class="hs-identifier hs-var">a2</span></a></span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var">interleave</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179840"><span class="hs-identifier hs-var">a1s</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179838"><span class="hs-identifier hs-var">a2s</span></a></span><span>
</span><span id="line-1678"></span><span class="annot"><a href="Data.Aeson.TH.html#interleave"><span class="hs-identifier hs-var">interleave</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1679"></span><span>
</span><span id="line-1680"></span><span class="hs-comment">-- | Fully applies a type constructor to its type variables.</span><span>
</span><span id="line-1681"></span><span class="annot"><a href="Data.Aeson.TH.html#applyTyCon"><span class="hs-identifier hs-type">applyTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1682"></span><span id="applyTyCon"><span class="annot"><span class="annottext">applyTyCon :: Name -&gt; [Type] -&gt; Type
</span><a href="Data.Aeson.TH.html#applyTyCon"><span class="hs-identifier hs-var hs-var">applyTyCon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><span class="hs-identifier hs-var">AppT</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Type
</span><span class="hs-identifier hs-var">ConT</span></span><span>
</span><span id="line-1683"></span><span>
</span><span id="line-1684"></span><span class="hs-comment">-- | Is the given type a variable?</span><span>
</span><span id="line-1685"></span><span class="annot"><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-type">isTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1686"></span><span id="isTyVar"><span class="annot"><span class="annottext">isTyVar :: Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var hs-var">isTyVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1687"></span><span class="annot"><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179837"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179837"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179837"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1688"></span><span class="annot"><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1689"></span><span>
</span><span id="line-1690"></span><span class="hs-comment">-- | Detect if a Name in a list of provided Names occurs as an argument to some</span><span>
</span><span id="line-1691"></span><span class="hs-comment">-- type family. This makes an effort to exclude /oversaturated/ arguments to</span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- type families. For instance, if one declared the following type family:</span><span>
</span><span id="line-1693"></span><span class="hs-comment">--</span><span>
</span><span id="line-1694"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1695"></span><span class="hs-comment">-- type family F a :: Type -&gt; Type</span><span>
</span><span id="line-1696"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1697"></span><span class="hs-comment">--</span><span>
</span><span id="line-1698"></span><span class="hs-comment">-- Then in the type @F a b@, we would consider @a@ to be an argument to @F@,</span><span>
</span><span id="line-1699"></span><span class="hs-comment">-- but not @b@.</span><span>
</span><span id="line-1700"></span><span class="annot"><a href="Data.Aeson.TH.html#isInTypeFamilyApp"><span class="hs-identifier hs-type">isInTypeFamilyApp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1701"></span><span id="isInTypeFamilyApp"><span class="annot"><span class="annottext">isInTypeFamilyApp :: [Name] -&gt; Type -&gt; [Type] -&gt; Q Bool
</span><a href="Data.Aeson.TH.html#isInTypeFamilyApp"><span class="hs-identifier hs-var hs-var">isInTypeFamilyApp</span></a></span></span><span> </span><span id="local-6989586621679179836"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179836"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621679179835"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179835"><span class="hs-identifier hs-var">tyFun</span></a></span></span><span> </span><span id="local-6989586621679179834"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179834"><span class="hs-identifier hs-var">tyArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1702"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179835"><span class="hs-identifier hs-var">tyFun</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1703"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ConT</span></span><span> </span><span id="local-6989586621679179833"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179833"><span class="hs-identifier hs-var">tcName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Bool
</span><a href="#local-6989586621679179832"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179833"><span class="hs-identifier hs-var">tcName</span></a></span><span>
</span><span id="line-1704"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1705"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1706"></span><span>    </span><span class="annot"><a href="#local-6989586621679179832"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1707"></span><span>    </span><span id="local-6989586621679179832"><span class="annot"><span class="annottext">go :: Name -&gt; Q Bool
</span><a href="#local-6989586621679179832"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679179831"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179831"><span class="hs-identifier hs-var">tcName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1708"></span><span>      </span><span id="local-6989586621679179830"><span class="annot"><span class="annottext">Info
</span><a href="#local-6989586621679179830"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Q Info
</span><span class="hs-identifier hs-var">reify</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179831"><span class="hs-identifier hs-var">tcName</span></a></span><span>
</span><span id="line-1709"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Info
</span><a href="#local-6989586621679179830"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,11,0)
</span><span>        </span><span class="annot"><span class="hs-identifier hs-type">FamilyI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OpenTypeFamilyD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeFamilyHead</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179825"><span class="annot"><span class="annottext">[TyVarBndr ()]
</span><a href="#local-6989586621679179825"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="annot"><span class="annottext">FamilyResultSig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe InjectivityAnn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dec]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1712"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Q Bool
</span><a href="#local-6989586621679179824"><span class="hs-identifier hs-var">withinFirstArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarBndr ()]
</span><a href="#local-6989586621679179825"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1713"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">FamilyI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ClosedTypeFamilyD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeFamilyHead</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179822"><span class="annot"><span class="annottext">[TyVarBndr ()]
</span><a href="#local-6989586621679179822"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="annot"><span class="annottext">FamilyResultSig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe InjectivityAnn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TySynEqn]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dec]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1714"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; Q Bool
</span><a href="#local-6989586621679179824"><span class="hs-identifier hs-var">withinFirstArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVarBndr ()]
</span><a href="#local-6989586621679179822"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-cpp">
#else
</span><span>        </span><span class="hs-identifier">FamilyI</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">FamilyD</span><span> </span><span class="hs-identifier">TypeFam</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">bndrs</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span>
</span><span id="line-1717"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withinFirstArgs</span><span> </span><span class="hs-identifier">bndrs</span><span>
</span><span id="line-1718"></span><span>        </span><span class="hs-identifier">FamilyI</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClosedTypeFamilyD</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">bndrs</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span>
</span><span id="line-1719"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withinFirstArgs</span><span> </span><span class="hs-identifier">bndrs</span><span class="hs-cpp">
#endif
</span><span>        </span><span class="annot"><span class="annottext">Info
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1722"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1723"></span><span>        </span><span id="local-6989586621679181399"><span class="annot"><a href="#local-6989586621679179824"><span class="hs-identifier hs-type">withinFirstArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679181399"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1724"></span><span>        </span><span id="local-6989586621679179824"><span class="annot"><span class="annottext">withinFirstArgs :: forall a. [a] -&gt; Q Bool
</span><a href="#local-6989586621679179824"><span class="hs-identifier hs-var hs-var">withinFirstArgs</span></a></span></span><span> </span><span id="local-6989586621679179817"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179817"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1725"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679179815"><span class="annot"><span class="annottext">firstArgs :: [Type]
</span><a href="#local-6989586621679179815"><span class="hs-identifier hs-var hs-var">firstArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179817"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179834"><span class="hs-identifier hs-var">tyArgs</span></a></span><span>
</span><span id="line-1726"></span><span>              </span><span id="local-6989586621679179812"><span class="annot"><span class="annottext">argFVs :: [Name]
</span><a href="#local-6989586621679179812"><span class="hs-identifier hs-var hs-var">argFVs</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. TypeSubstitution a =&gt; a -&gt; [Name]
</span><span class="hs-identifier hs-var">freeVariables</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179815"><span class="hs-identifier hs-var">firstArgs</span></a></span><span>
</span><span id="line-1727"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179812"><span class="hs-identifier hs-var">argFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179836"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1728"></span><span>
</span><span id="line-1729"></span><span class="hs-comment">-- | Peel off a kind signature from a Type (if it has one).</span><span>
</span><span id="line-1730"></span><span class="annot"><a href="Data.Aeson.TH.html#unSigT"><span class="hs-identifier hs-type">unSigT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1731"></span><span id="unSigT"><span class="annot"><span class="annottext">unSigT :: Type -&gt; Type
</span><a href="Data.Aeson.TH.html#unSigT"><span class="hs-identifier hs-var hs-var">unSigT</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179811"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179811"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179811"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1732"></span><span class="annot"><a href="Data.Aeson.TH.html#unSigT"><span class="hs-identifier hs-var">unSigT</span></a></span><span> </span><span id="local-6989586621679179810"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179810"><span class="hs-identifier hs-var">t</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179810"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1733"></span><span>
</span><span id="line-1734"></span><span class="hs-comment">-- | Are all of the items in a list (which have an ordering) distinct?</span><span>
</span><span id="line-1735"></span><span class="hs-comment">--</span><span>
</span><span id="line-1736"></span><span class="hs-comment">-- This uses Set (as opposed to nub) for better asymptotic time complexity.</span><span>
</span><span id="line-1737"></span><span id="local-6989586621679181397"><span class="annot"><a href="Data.Aeson.TH.html#allDistinct"><span class="hs-identifier hs-type">allDistinct</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679181397"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679181397"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1738"></span><span id="allDistinct"><span class="annot"><span class="annottext">allDistinct :: forall a. Ord a =&gt; [a] -&gt; Bool
</span><a href="Data.Aeson.TH.html#allDistinct"><span class="hs-identifier hs-var hs-var">allDistinct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; [a] -&gt; Bool
</span><a href="#local-6989586621679179806"><span class="hs-identifier hs-var">allDistinct'</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-1739"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1740"></span><span>    </span><span id="local-6989586621679181395"><span class="annot"><a href="#local-6989586621679179806"><span class="hs-identifier hs-type">allDistinct'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679181395"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="#local-6989586621679181395"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679181395"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1741"></span><span>    </span><span id="local-6989586621679179806"><span class="annot"><span class="annottext">allDistinct' :: forall a. Ord a =&gt; Set a -&gt; [a] -&gt; Bool
</span><a href="#local-6989586621679179806"><span class="hs-identifier hs-var hs-var">allDistinct'</span></a></span></span><span> </span><span id="local-6989586621679179801"><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679179801"><span class="hs-identifier hs-var">uniqs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179800"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179800"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679179799"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179799"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1742"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179800"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.member`</span></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679179801"><span class="hs-identifier hs-var">uniqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1743"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; [a] -&gt; Bool
</span><a href="#local-6989586621679179806"><span class="hs-identifier hs-var">allDistinct'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679179800"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679179801"><span class="hs-identifier hs-var">uniqs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679179799"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1744"></span><span>    </span><span class="annot"><a href="#local-6989586621679179806"><span class="hs-identifier hs-var">allDistinct'</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1745"></span><span>
</span><span id="line-1746"></span><span class="hs-comment">-- | Does the given type mention any of the Names in the list?</span><span>
</span><span id="line-1747"></span><span class="annot"><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-identifier hs-type">mentionsName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1748"></span><span id="mentionsName"><span class="annot"><span class="annottext">mentionsName :: Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-identifier hs-var hs-var">mentionsName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1749"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1750"></span><span>    </span><span class="annot"><a href="#local-6989586621679179798"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1751"></span><span>    </span><span id="local-6989586621679179798"><span class="annot"><span class="annottext">go :: Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span> </span><span id="local-6989586621679179797"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179797"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679179796"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179796"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679179795"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179795"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179797"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179795"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179796"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179795"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1752"></span><span>    </span><span class="annot"><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179794"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179794"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679179793"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179793"><span class="hs-identifier hs-var">_k</span></a></span></span><span class="hs-special">)</span><span>  </span><span id="local-6989586621679179792"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179792"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179794"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179792"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1753"></span><span>                              </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179793"><span class="hs-identifier hs-var">_k</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179792"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1754"></span><span>    </span><span class="annot"><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span id="local-6989586621679179791"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179791"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>     </span><span id="local-6989586621679179790"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179790"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179791"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179790"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1755"></span><span>    </span><span class="annot"><a href="#local-6989586621679179798"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>            </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1756"></span><span>
</span><span id="line-1757"></span><span class="hs-comment">-- | Does an instance predicate mention any of the Names in the list?</span><span>
</span><span id="line-1758"></span><span class="annot"><a href="Data.Aeson.TH.html#predMentionsName"><span class="hs-identifier hs-type">predMentionsName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pred</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,10,0)
</span><span id="predMentionsName"><span class="annot"><span class="annottext">predMentionsName :: Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#predMentionsName"><span class="hs-identifier hs-var hs-var">predMentionsName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-identifier hs-var">mentionsName</span></a></span><span class="hs-cpp">
#else
</span><span class="hs-identifier">predMentionsName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClassP</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-identifier">tys</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">n</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">elem</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-operator">||</span><span> </span><span class="hs-identifier">any</span><span> </span><span class="hs-special">(</span><span class="hs-special">`</span><span class="hs-identifier">mentionsName</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">names</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">tys</span><span>
</span><span id="line-1763"></span><span class="hs-identifier">predMentionsName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">EqualP</span><span> </span><span class="hs-identifier">t1</span><span> </span><span class="hs-identifier">t2</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mentionsName</span><span> </span><span class="hs-identifier">t1</span><span> </span><span class="hs-identifier">names</span><span> </span><span class="hs-operator">||</span><span> </span><span class="hs-identifier">mentionsName</span><span> </span><span class="hs-identifier">t2</span><span> </span><span class="hs-identifier">names</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-1766"></span><span class="hs-comment">-- | Split an applied type into its individual components. For example, this:</span><span>
</span><span id="line-1767"></span><span class="hs-comment">--</span><span>
</span><span id="line-1768"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1769"></span><span class="hs-comment">-- Either Int Char</span><span>
</span><span id="line-1770"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1771"></span><span class="hs-comment">--</span><span>
</span><span id="line-1772"></span><span class="hs-comment">-- would split to this:</span><span>
</span><span id="line-1773"></span><span class="hs-comment">--</span><span>
</span><span id="line-1774"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1775"></span><span class="hs-comment">-- [Either, Int, Char]</span><span>
</span><span id="line-1776"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1777"></span><span class="annot"><a href="Data.Aeson.TH.html#unapplyTy"><span class="hs-identifier hs-type">unapplyTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1778"></span><span id="unapplyTy"><span class="annot"><span class="annottext">unapplyTy :: Type -&gt; NonEmpty Type
</span><a href="Data.Aeson.TH.html#unapplyTy"><span class="hs-identifier hs-var hs-var">unapplyTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. NonEmpty a -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NE.reverse</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1779"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1780"></span><span>    </span><span class="annot"><a href="#local-6989586621679179789"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1781"></span><span>    </span><span id="local-6989586621679179789"><span class="annot"><span class="annottext">go :: Type -&gt; NonEmpty Type
</span><a href="#local-6989586621679179789"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span> </span><span id="local-6989586621679179788"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179788"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621679179787"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179787"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179787"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; NonEmpty a -&gt; NonEmpty a
</span><span class="hs-operator hs-var">&lt;|</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179788"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1782"></span><span>    </span><span class="annot"><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179786"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179786"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179786"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1783"></span><span>    </span><span class="annot"><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForallT</span></span><span> </span><span class="annot"><span class="annottext">[TyVarBndr Specificity]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179785"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179785"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; NonEmpty Type
</span><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179785"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1784"></span><span>    </span><span class="annot"><a href="#local-6989586621679179789"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679179784"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179784"><span class="hs-identifier hs-var">t</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179784"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1785"></span><span>
</span><span id="line-1786"></span><span class="hs-comment">-- | Split a type signature by the arrows on its spine. For example, this:</span><span>
</span><span id="line-1787"></span><span class="hs-comment">--</span><span>
</span><span id="line-1788"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1789"></span><span class="hs-comment">-- forall a b. (a ~ b) =&gt; (a -&gt; b) -&gt; Char -&gt; ()</span><span>
</span><span id="line-1790"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1791"></span><span class="hs-comment">--</span><span>
</span><span id="line-1792"></span><span class="hs-comment">-- would split to this:</span><span>
</span><span id="line-1793"></span><span class="hs-comment">--</span><span>
</span><span id="line-1794"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1795"></span><span class="hs-comment">-- (a ~ b, [a -&gt; b, Char, ()])</span><span>
</span><span id="line-1796"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1797"></span><span class="annot"><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-type">uncurryTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cxt</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-1798"></span><span id="uncurryTy"><span class="annot"><span class="annottext">uncurryTy :: Type -&gt; ([Type], NonEmpty Type)
</span><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var hs-var">uncurryTy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AppT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">ArrowT</span></span><span> </span><span id="local-6989586621679179781"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179781"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679179780"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179780"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1799"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179779"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179779"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179778"><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179778"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([Type], NonEmpty Type)
</span><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179780"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1800"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179779"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179781"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; NonEmpty a -&gt; NonEmpty a
</span><span class="hs-operator hs-var">&lt;|</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179778"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1801"></span><span class="annot"><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span id="local-6989586621679179777"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179777"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([Type], NonEmpty Type)
</span><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179777"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1802"></span><span class="annot"><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForallT</span></span><span> </span><span class="annot"><span class="annottext">[TyVarBndr Specificity]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679179776"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179776"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679179775"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179775"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1803"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179774"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179774"><span class="hs-identifier hs-var">ctxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179773"><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179773"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([Type], NonEmpty Type)
</span><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179775"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1804"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179776"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179774"><span class="hs-identifier hs-var">ctxt'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty Type
</span><a href="#local-6989586621679179773"><span class="hs-identifier hs-var">tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1805"></span><span class="annot"><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span> </span><span id="local-6989586621679179772"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179772"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179772"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1806"></span><span>
</span><span id="line-1807"></span><span class="hs-comment">-- | Like uncurryType, except on a kind level.</span><span>
</span><span id="line-1808"></span><span class="annot"><a href="Data.Aeson.TH.html#uncurryKind"><span class="hs-identifier hs-type">uncurryKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span>
</span><span id="line-1809"></span><span id="uncurryKind"><span class="annot"><span class="annottext">uncurryKind :: Type -&gt; NonEmpty Type
</span><a href="Data.Aeson.TH.html#uncurryKind"><span class="hs-identifier hs-var hs-var">uncurryKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; ([Type], NonEmpty Type)
</span><a href="Data.Aeson.TH.html#uncurryTy"><span class="hs-identifier hs-var">uncurryTy</span></a></span><span>
</span><span id="line-1810"></span><span>
</span><span id="line-1811"></span><span class="annot"><a href="Data.Aeson.TH.html#createKindChain"><span class="hs-identifier hs-type">createKindChain</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span>
</span><span id="line-1812"></span><span id="createKindChain"><span class="annot"><span class="annottext">createKindChain :: Int -&gt; Type
</span><a href="Data.Aeson.TH.html#createKindChain"><span class="hs-identifier hs-var hs-var">createKindChain</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Int -&gt; Type
</span><a href="#local-6989586621679179770"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">starK</span></span><span>
</span><span id="line-1813"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1814"></span><span>    </span><span class="annot"><a href="#local-6989586621679179770"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span>
</span><span id="line-1815"></span><span>    </span><span id="local-6989586621679179770"><span class="annot"><span class="annottext">go :: Type -&gt; Int -&gt; Type
</span><a href="#local-6989586621679179770"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679179769"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179769"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179769"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-1816"></span><span>    </span><span class="annot"><a href="#local-6989586621679179770"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679179768"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179768"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679179767"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179767"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Int -&gt; Type
</span><a href="#local-6989586621679179770"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><span class="hs-identifier hs-var">AppT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><span class="hs-identifier hs-var">AppT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">ArrowT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">StarT</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179768"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179767"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span class="hs-comment">-- | Makes a string literal expression from a constructor's name.</span><span>
</span><span id="line-1819"></span><span class="annot"><a href="Data.Aeson.TH.html#conNameExp"><span class="hs-identifier hs-type">conNameExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConstructorInfo</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-1820"></span><span id="conNameExp"><span class="annot"><span class="annottext">conNameExp :: Options -&gt; ConstructorInfo -&gt; Q Exp
</span><a href="Data.Aeson.TH.html#conNameExp"><span class="hs-identifier hs-var hs-var">conNameExp</span></a></span></span><span> </span><span id="local-6989586621679179766"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179766"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). Quote m =&gt; Lit -&gt; m Exp
</span><span class="hs-identifier hs-var">litE</span></span><span>
</span><span id="line-1821"></span><span>                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Lit
</span><span class="hs-identifier hs-var">stringL</span></span><span>
</span><span id="line-1822"></span><span>                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Options -&gt; String -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#constructorTagModifier"><span class="hs-identifier hs-var">constructorTagModifier</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179766"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-1823"></span><span>                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span>
</span><span id="line-1824"></span><span>                </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConstructorInfo -&gt; Name
</span><span class="hs-identifier hs-var">constructorName</span></span><span>
</span><span id="line-1825"></span><span>
</span><span id="line-1826"></span><span class="hs-comment">-- | Extracts a record field label.</span><span>
</span><span id="line-1827"></span><span class="annot"><a href="Data.Aeson.TH.html#fieldLabel"><span class="hs-identifier hs-type">fieldLabel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Options"><span class="hs-identifier hs-type">Options</span></a></span><span> </span><span class="hs-comment">-- ^ Encoding options</span><span>
</span><span id="line-1828"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1829"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1830"></span><span id="fieldLabel"><span class="annot"><span class="annottext">fieldLabel :: Options -&gt; Name -&gt; String
</span><a href="Data.Aeson.TH.html#fieldLabel"><span class="hs-identifier hs-var hs-var">fieldLabel</span></a></span></span><span> </span><span id="local-6989586621679179765"><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179765"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; String -&gt; String
</span><a href="Data.Aeson.Types.Internal.html#fieldLabelModifier"><span class="hs-identifier hs-var">fieldLabelModifier</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="#local-6989586621679179765"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span>
</span><span id="line-1831"></span><span>
</span><span id="line-1832"></span><span class="hs-comment">-- | The name of the outermost 'Value' constructor.</span><span>
</span><span id="line-1833"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-type">valueConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1834"></span><span id="valueConName"><span class="annot"><span class="annottext">valueConName :: Value -&gt; String
</span><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var hs-var">valueConName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Object"><span class="hs-identifier hs-type">Object</span></a></span><span> </span><span class="annot"><span class="annottext">Object
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Object&quot;</span></span><span>
</span><span id="line-1835"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var">valueConName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span>  </span><span class="annot"><span class="annottext">Array
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Array&quot;</span></span><span>
</span><span id="line-1836"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var">valueConName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;String&quot;</span></span><span>
</span><span id="line-1837"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var">valueConName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Number"><span class="hs-identifier hs-type">Number</span></a></span><span> </span><span class="annot"><span class="annottext">Scientific
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Number&quot;</span></span><span>
</span><span id="line-1838"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var">valueConName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.Types.Internal.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>   </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Boolean&quot;</span></span><span>
</span><span id="line-1839"></span><span class="annot"><a href="Data.Aeson.TH.html#valueConName"><span class="hs-identifier hs-var">valueConName</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="Data.Aeson.Types.Internal.html#Null"><span class="hs-identifier hs-var">Null</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Null&quot;</span></span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span class="annot"><a href="Data.Aeson.TH.html#applyCon"><span class="hs-identifier hs-type">applyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pred</span></span><span>
</span><span id="line-1842"></span><span id="applyCon"><span class="annot"><span class="annottext">applyCon :: Name -&gt; Name -&gt; Type
</span><a href="Data.Aeson.TH.html#applyCon"><span class="hs-identifier hs-var hs-var">applyCon</span></a></span></span><span> </span><span id="local-6989586621679179756"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179756"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621679179755"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179755"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="hs-cpp">
#if MIN_VERSION_template_haskell(2,10,0)
</span><span>          </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><span class="hs-identifier hs-var">AppT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type
</span><span class="hs-identifier hs-var">ConT</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179756"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type
</span><span class="hs-identifier hs-var">VarT</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179755"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span>          </span><span class="hs-identifier">ClassP</span><span> </span><span class="hs-identifier">con</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">VarT</span><span> </span><span class="hs-identifier">t</span><span class="hs-special">]</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-1849"></span><span class="hs-comment">-- | Checks to see if the last types in a data family instance can be safely eta-</span><span>
</span><span id="line-1850"></span><span class="hs-comment">-- reduced (i.e., dropped), given the other types. This checks for three conditions:</span><span>
</span><span id="line-1851"></span><span class="hs-comment">--</span><span>
</span><span id="line-1852"></span><span class="hs-comment">-- (1) All of the dropped types are type variables</span><span>
</span><span id="line-1853"></span><span class="hs-comment">-- (2) All of the dropped types are distinct</span><span>
</span><span id="line-1854"></span><span class="hs-comment">-- (3) None of the remaining types mention any of the dropped types</span><span>
</span><span id="line-1855"></span><span class="annot"><a href="Data.Aeson.TH.html#canEtaReduce"><span class="hs-identifier hs-type">canEtaReduce</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1856"></span><span id="canEtaReduce"><span class="annot"><span class="annottext">canEtaReduce :: [Type] -&gt; [Type] -&gt; Bool
</span><a href="Data.Aeson.TH.html#canEtaReduce"><span class="hs-identifier hs-var hs-var">canEtaReduce</span></a></span></span><span> </span><span id="local-6989586621679179754"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179754"><span class="hs-identifier hs-var">remaining</span></a></span></span><span> </span><span id="local-6989586621679179753"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179753"><span class="hs-identifier hs-var">dropped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1857"></span><span>       </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179753"><span class="hs-identifier hs-var">dropped</span></a></span><span>
</span><span id="line-1858"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Bool
</span><a href="Data.Aeson.TH.html#allDistinct"><span class="hs-identifier hs-var">allDistinct</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179752"><span class="hs-identifier hs-var">droppedNames</span></a></span><span> </span><span class="hs-comment">-- Make sure not to pass something of type [Type], since Type</span><span>
</span><span id="line-1859"></span><span>                                </span><span class="hs-comment">-- didn't have an Ord instance until template-haskell-2.10.0.0</span><span>
</span><span id="line-1860"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; [Name] -&gt; Bool
</span><a href="Data.Aeson.TH.html#mentionsName"><span class="hs-operator hs-var">`mentionsName`</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179752"><span class="hs-identifier hs-var">droppedNames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179754"><span class="hs-identifier hs-var">remaining</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1861"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1862"></span><span>    </span><span class="annot"><a href="#local-6989586621679179752"><span class="hs-identifier hs-type">droppedNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-1863"></span><span>    </span><span id="local-6989586621679179752"><span class="annot"><span class="annottext">droppedNames :: [Name]
</span><a href="#local-6989586621679179752"><span class="hs-identifier hs-var hs-var">droppedNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Name
</span><a href="Data.Aeson.TH.html#varTToName"><span class="hs-identifier hs-var">varTToName</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621679179753"><span class="hs-identifier hs-var">dropped</span></a></span><span>
</span><span id="line-1864"></span><span>
</span><span id="line-1865"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- Expanding type synonyms</span><span>
</span><span id="line-1867"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1868"></span><span>
</span><span id="line-1869"></span><span class="annot"><a href="Data.Aeson.TH.html#applySubstitutionKind"><span class="hs-identifier hs-type">applySubstitutionKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1870"></span><span id="applySubstitutionKind"><span class="annot"><span class="annottext">applySubstitutionKind :: Map Name Type -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#applySubstitutionKind"><span class="hs-identifier hs-var hs-var">applySubstitutionKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. TypeSubstitution a =&gt; Map Name Type -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">applySubstitution</span></span><span>
</span><span id="line-1871"></span><span>
</span><span id="line-1872"></span><span class="annot"><a href="Data.Aeson.TH.html#substNameWithKind"><span class="hs-identifier hs-type">substNameWithKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Kind</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1873"></span><span id="substNameWithKind"><span class="annot"><span class="annottext">substNameWithKind :: Name -&gt; Type -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNameWithKind"><span class="hs-identifier hs-var hs-var">substNameWithKind</span></a></span></span><span> </span><span id="local-6989586621679179748"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179748"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679179747"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179747"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name Type -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#applySubstitutionKind"><span class="hs-identifier hs-var">applySubstitutionKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179748"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179747"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1874"></span><span>
</span><span id="line-1875"></span><span class="annot"><a href="Data.Aeson.TH.html#substNamesWithKindStar"><span class="hs-identifier hs-type">substNamesWithKindStar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1876"></span><span id="substNamesWithKindStar"><span class="annot"><span class="annottext">substNamesWithKindStar :: [Name] -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNamesWithKindStar"><span class="hs-identifier hs-var hs-var">substNamesWithKindStar</span></a></span></span><span> </span><span id="local-6989586621679179746"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179746"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621679179745"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179745"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; Type -&gt; Type
</span><a href="Data.Aeson.TH.html#substNameWithKind"><span class="hs-operator hs-var">`substNameWithKind`</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier hs-var">starK</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179745"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679179746"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-1877"></span><span>
</span><span id="line-1878"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1879"></span><span class="hs-comment">-- Error messages</span><span>
</span><span id="line-1880"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1881"></span><span>
</span><span id="line-1882"></span><span class="hs-comment">-- | Either the given data type doesn't have enough type variables, or one of</span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- the type variables to be eta-reduced cannot realize kind *.</span><span>
</span><span id="line-1884"></span><span id="local-6989586621679181420"><span class="annot"><a href="Data.Aeson.TH.html#derivingKindError"><span class="hs-identifier hs-type">derivingKindError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679181420"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1885"></span><span id="derivingKindError"><span class="annot"><span class="annottext">derivingKindError :: forall a. JSONClass -&gt; Name -&gt; Q a
</span><a href="Data.Aeson.TH.html#derivingKindError"><span class="hs-identifier hs-var hs-var">derivingKindError</span></a></span></span><span> </span><span id="local-6989586621679179741"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179741"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179740"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179740"><span class="hs-identifier hs-var">tyConName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span>
</span><span id="line-1886"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot derive well-kinded instance of form &#8216;&quot;</span></span><span>
</span><span id="line-1887"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679179738"><span class="hs-identifier hs-var">className</span></a></span><span>
</span><span id="line-1888"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span>
</span><span id="line-1889"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (String -&gt; String) -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1890"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179740"><span class="hs-identifier hs-var">tyConName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1891"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; ...&quot;</span></span><span>
</span><span id="line-1892"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1893"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8216;\n\tClass &quot;</span></span><span>
</span><span id="line-1894"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679179738"><span class="hs-identifier hs-var">className</span></a></span><span>
</span><span id="line-1895"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; expects an argument of kind &quot;</span></span><span>
</span><span id="line-1896"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ppr a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">pprint</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type
</span><a href="Data.Aeson.TH.html#createKindChain"><span class="hs-identifier hs-var">createKindChain</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179741"><span class="hs-identifier hs-var">jc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1897"></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1898"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1899"></span><span>    </span><span class="annot"><a href="#local-6989586621679179738"><span class="hs-identifier hs-type">className</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1900"></span><span>    </span><span id="local-6989586621679179738"><span class="annot"><span class="annottext">className :: String
</span><a href="#local-6989586621679179738"><span class="hs-identifier hs-var hs-var">className</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179741"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-1901"></span><span>
</span><span id="line-1902"></span><span class="hs-comment">-- | One of the last type variables cannot be eta-reduced (see the canEtaReduce</span><span>
</span><span id="line-1903"></span><span class="hs-comment">-- function for the criteria it would have to meet).</span><span>
</span><span id="line-1904"></span><span id="local-6989586621679181411"><span class="annot"><a href="Data.Aeson.TH.html#etaReductionError"><span class="hs-identifier hs-type">etaReductionError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679181411"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1905"></span><span id="etaReductionError"><span class="annot"><span class="annottext">etaReductionError :: forall a. Type -&gt; Q a
</span><a href="Data.Aeson.TH.html#etaReductionError"><span class="hs-identifier hs-var hs-var">etaReductionError</span></a></span></span><span> </span><span id="local-6989586621679179732"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179732"><span class="hs-identifier hs-var">instanceType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1906"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot eta-reduce to an instance of form \n\tinstance (...) =&gt; &quot;</span></span><span>
</span><span id="line-1907"></span><span>    </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Ppr a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">pprint</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179732"><span class="hs-identifier hs-var">instanceType</span></a></span><span>
</span><span id="line-1908"></span><span>
</span><span id="line-1909"></span><span class="hs-comment">-- | The data type has a DatatypeContext which mentions one of the eta-reduced</span><span>
</span><span id="line-1910"></span><span class="hs-comment">-- type variables.</span><span>
</span><span id="line-1911"></span><span id="local-6989586621679181412"><span class="annot"><a href="Data.Aeson.TH.html#datatypeContextError"><span class="hs-identifier hs-type">datatypeContextError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><a href="#local-6989586621679181412"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1912"></span><span id="datatypeContextError"><span class="annot"><span class="annottext">datatypeContextError :: forall a. Name -&gt; Type -&gt; Q a
</span><a href="Data.Aeson.TH.html#datatypeContextError"><span class="hs-identifier hs-var hs-var">datatypeContextError</span></a></span></span><span> </span><span id="local-6989586621679179729"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179729"><span class="hs-identifier hs-var">dataName</span></a></span></span><span> </span><span id="local-6989586621679179728"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179728"><span class="hs-identifier hs-var">instanceType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span>
</span><span id="line-1913"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Can't make a derived instance of &#8216;&quot;</span></span><span>
</span><span id="line-1914"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Ppr a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">pprint</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179728"><span class="hs-identifier hs-var">instanceType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1915"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8216;:\n\tData type &#8216;&quot;</span></span><span>
</span><span id="line-1916"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179729"><span class="hs-identifier hs-var">dataName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1917"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8216; must not have a class context involving the last type argument(s)&quot;</span></span><span>
</span><span id="line-1918"></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1919"></span><span>
</span><span id="line-1920"></span><span class="hs-comment">-- | The data type mentions one of the n eta-reduced type variables in a place other</span><span>
</span><span id="line-1921"></span><span class="hs-comment">-- than the last nth positions of a data type in a constructor's field.</span><span>
</span><span id="line-1922"></span><span id="local-6989586621679181428"><span class="annot"><a href="Data.Aeson.TH.html#outOfPlaceTyVarError"><span class="hs-identifier hs-type">outOfPlaceTyVarError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679181428"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1923"></span><span id="outOfPlaceTyVarError"><span class="annot"><span class="annottext">outOfPlaceTyVarError :: forall a. JSONClass -&gt; Name -&gt; a
</span><a href="Data.Aeson.TH.html#outOfPlaceTyVarError"><span class="hs-identifier hs-var hs-var">outOfPlaceTyVarError</span></a></span></span><span> </span><span id="local-6989586621679179723"><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179723"><span class="hs-identifier hs-var">jc</span></a></span></span><span> </span><span id="local-6989586621679179722"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179722"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span>
</span><span id="line-1924"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Constructor &#8216;&quot;</span></span><span>
</span><span id="line-1925"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179722"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1926"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8216; must only use its last &quot;</span></span><span>
</span><span id="line-1927"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179720"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1928"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; type variable(s) within the last &quot;</span></span><span>
</span><span id="line-1929"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">shows</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679179720"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1930"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; argument(s) of a data type&quot;</span></span><span>
</span><span id="line-1931"></span><span>    </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1932"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1933"></span><span>    </span><span class="annot"><a href="#local-6989586621679179720"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1934"></span><span>    </span><span id="local-6989586621679179720"><span class="annot"><span class="annottext">n :: Int
</span><a href="#local-6989586621679179720"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var">arityInt</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><a href="#local-6989586621679179723"><span class="hs-identifier hs-var">jc</span></a></span><span>
</span><span id="line-1935"></span><span>
</span><span id="line-1936"></span><span class="hs-comment">-- | The data type has an existential constraint which mentions one of the</span><span>
</span><span id="line-1937"></span><span class="hs-comment">-- eta-reduced type variables.</span><span>
</span><span id="line-1938"></span><span id="local-6989586621679181406"><span class="annot"><a href="Data.Aeson.TH.html#existentialContextError"><span class="hs-identifier hs-type">existentialContextError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679181406"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1939"></span><span id="existentialContextError"><span class="annot"><span class="annottext">existentialContextError :: forall a. Name -&gt; a
</span><a href="Data.Aeson.TH.html#existentialContextError"><span class="hs-identifier hs-var hs-var">existentialContextError</span></a></span></span><span> </span><span id="local-6989586621679179717"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179717"><span class="hs-identifier hs-var">conName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span>
</span><span id="line-1940"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Constructor &#8216;&quot;</span></span><span>
</span><span id="line-1941"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">nameBase</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179717"><span class="hs-identifier hs-var">conName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1942"></span><span>  </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#8216; must be truly polymorphic in the last argument(s) of the data type&quot;</span></span><span>
</span><span id="line-1943"></span><span>  </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-1944"></span><span>
</span><span id="line-1945"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1946"></span><span class="hs-comment">-- Class-specific constants</span><span>
</span><span id="line-1947"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-1948"></span><span>
</span><span id="line-1949"></span><span class="hs-comment">-- | A representation of the arity of the ToJSON/FromJSON typeclass being derived.</span><span>
</span><span id="line-1950"></span><span class="hs-keyword">data</span><span> </span><span id="Arity"><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-var">Arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Arity0"><span class="annot"><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Arity1"><span class="annot"><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Arity2"><span class="annot"><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span></span><span>
</span><span id="line-1951"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679179684"><span id="local-6989586621679179686"><span id="local-6989586621679179690"><span id="local-6989586621679179693"><span id="local-6989586621679179695"><span id="local-6989586621679179703"><span id="local-6989586621679179709"><span id="local-6989586621679179715"><span class="annot"><span class="annottext">Int -&gt; Arity
Arity -&gt; Int
Arity -&gt; [Arity]
Arity -&gt; Arity
Arity -&gt; Arity -&gt; [Arity]
Arity -&gt; Arity -&gt; Arity -&gt; [Arity]
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: Arity -&gt; Arity -&gt; Arity -&gt; [Arity]
$cenumFromThenTo :: Arity -&gt; Arity -&gt; Arity -&gt; [Arity]
enumFromTo :: Arity -&gt; Arity -&gt; [Arity]
$cenumFromTo :: Arity -&gt; Arity -&gt; [Arity]
enumFromThen :: Arity -&gt; Arity -&gt; [Arity]
$cenumFromThen :: Arity -&gt; Arity -&gt; [Arity]
enumFrom :: Arity -&gt; [Arity]
$cenumFrom :: Arity -&gt; [Arity]
fromEnum :: Arity -&gt; Int
$cfromEnum :: Arity -&gt; Int
toEnum :: Int -&gt; Arity
$ctoEnum :: Int -&gt; Arity
pred :: Arity -&gt; Arity
$cpred :: Arity -&gt; Arity
succ :: Arity -&gt; Arity
$csucc :: Arity -&gt; Arity
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179679"><span id="local-6989586621679179681"><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Arity -&gt; Arity -&gt; Bool
$c/= :: Arity -&gt; Arity -&gt; Bool
== :: Arity -&gt; Arity -&gt; Bool
$c== :: Arity -&gt; Arity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679179659"><span id="local-6989586621679179661"><span id="local-6989586621679179664"><span id="local-6989586621679179667"><span id="local-6989586621679179670"><span id="local-6989586621679179672"><span id="local-6989586621679179674"><span class="annot"><span class="annottext">Eq Arity
Arity -&gt; Arity -&gt; Bool
Arity -&gt; Arity -&gt; Ordering
Arity -&gt; Arity -&gt; Arity
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: Arity -&gt; Arity -&gt; Arity
$cmin :: Arity -&gt; Arity -&gt; Arity
max :: Arity -&gt; Arity -&gt; Arity
$cmax :: Arity -&gt; Arity -&gt; Arity
&gt;= :: Arity -&gt; Arity -&gt; Bool
$c&gt;= :: Arity -&gt; Arity -&gt; Bool
&gt; :: Arity -&gt; Arity -&gt; Bool
$c&gt; :: Arity -&gt; Arity -&gt; Bool
&lt;= :: Arity -&gt; Arity -&gt; Bool
$c&lt;= :: Arity -&gt; Arity -&gt; Bool
&lt; :: Arity -&gt; Arity -&gt; Bool
$c&lt; :: Arity -&gt; Arity -&gt; Bool
compare :: Arity -&gt; Arity -&gt; Ordering
$ccompare :: Arity -&gt; Arity -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>
</span><span id="line-1953"></span><span class="hs-comment">-- | Whether ToJSON(1)(2) or FromJSON(1)(2) is being derived.</span><span>
</span><span id="line-1954"></span><span class="hs-keyword">data</span><span> </span><span id="Direction"><span class="annot"><a href="Data.Aeson.TH.html#Direction"><span class="hs-identifier hs-var">Direction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="To"><span class="annot"><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="From"><span class="annot"><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span></span><span>
</span><span id="line-1955"></span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- | A representation of which typeclass method is being spliced in.</span><span>
</span><span id="line-1957"></span><span class="hs-keyword">data</span><span> </span><span id="JSONFun"><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-var">JSONFun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ToJSON"><span class="annot"><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ToEncoding"><span class="annot"><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="ParseJSON"><span class="annot"><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span></span><span>
</span><span id="line-1958"></span><span>
</span><span id="line-1959"></span><span class="hs-comment">-- | A refinement of JSONFun to [ToJSON, ToEncoding].</span><span>
</span><span id="line-1960"></span><span class="hs-keyword">data</span><span> </span><span id="ToJSONFun"><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-var">ToJSONFun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Value"><span class="annot"><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Encoding"><span class="annot"><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span></span><span>
</span><span id="line-1961"></span><span>
</span><span id="line-1962"></span><span class="annot"><a href="Data.Aeson.TH.html#targetToJSONFun"><span class="hs-identifier hs-type">targetToJSONFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#ToJSONFun"><span class="hs-identifier hs-type">ToJSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span>
</span><span id="line-1963"></span><span id="targetToJSONFun"><span class="annot"><span class="annottext">targetToJSONFun :: ToJSONFun -&gt; JSONFun
</span><a href="Data.Aeson.TH.html#targetToJSONFun"><span class="hs-identifier hs-var hs-var">targetToJSONFun</span></a></span></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Value"><span class="hs-identifier hs-var">Value</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>
</span><span id="line-1964"></span><span class="annot"><a href="Data.Aeson.TH.html#targetToJSONFun"><span class="hs-identifier hs-var">targetToJSONFun</span></a></span><span> </span><span class="annot"><span class="annottext">ToJSONFun
</span><a href="Data.Aeson.TH.html#Encoding"><span class="hs-identifier hs-var">Encoding</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span>
</span><span id="line-1965"></span><span>
</span><span id="line-1966"></span><span class="hs-comment">-- | A representation of which typeclass is being derived.</span><span>
</span><span id="line-1967"></span><span class="hs-keyword">data</span><span> </span><span id="JSONClass"><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="JSONClass"><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="direction"><span class="annot"><span class="annottext">JSONClass -&gt; Direction
</span><a href="Data.Aeson.TH.html#direction"><span class="hs-identifier hs-var hs-var">direction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Direction"><span class="hs-identifier hs-type">Direction</span></a></span><span class="hs-special">,</span><span> </span><span id="arity"><span class="annot"><span class="annottext">JSONClass -&gt; Arity
</span><a href="Data.Aeson.TH.html#arity"><span class="hs-identifier hs-var hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1968"></span><span>
</span><span id="line-1969"></span><span class="annot"><a href="Data.Aeson.TH.html#toJSONClass"><span class="hs-identifier hs-type">toJSONClass</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#toJSON1Class"><span class="hs-identifier hs-type">toJSON1Class</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#toJSON2Class"><span class="hs-identifier hs-type">toJSON2Class</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1970"></span><span>    </span><span class="annot"><a href="Data.Aeson.TH.html#fromJSONClass"><span class="hs-identifier hs-type">fromJSONClass</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#fromJSON1Class"><span class="hs-identifier hs-type">fromJSON1Class</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#fromJSON2Class"><span class="hs-identifier hs-type">fromJSON2Class</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span>
</span><span id="line-1971"></span><span id="toJSONClass"><span class="annot"><span class="annottext">toJSONClass :: JSONClass
</span><a href="Data.Aeson.TH.html#toJSONClass"><span class="hs-identifier hs-var hs-var">toJSONClass</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span>
</span><span id="line-1972"></span><span id="toJSON1Class"><span class="annot"><span class="annottext">toJSON1Class :: JSONClass
</span><a href="Data.Aeson.TH.html#toJSON1Class"><span class="hs-identifier hs-var hs-var">toJSON1Class</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span>
</span><span id="line-1973"></span><span id="toJSON2Class"><span class="annot"><span class="annottext">toJSON2Class :: JSONClass
</span><a href="Data.Aeson.TH.html#toJSON2Class"><span class="hs-identifier hs-var hs-var">toJSON2Class</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span>
</span><span id="line-1974"></span><span id="fromJSONClass"><span class="annot"><span class="annottext">fromJSONClass :: JSONClass
</span><a href="Data.Aeson.TH.html#fromJSONClass"><span class="hs-identifier hs-var hs-var">fromJSONClass</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span>
</span><span id="line-1975"></span><span id="fromJSON1Class"><span class="annot"><span class="annottext">fromJSON1Class :: JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON1Class"><span class="hs-identifier hs-var hs-var">fromJSON1Class</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span>
</span><span id="line-1976"></span><span id="fromJSON2Class"><span class="annot"><span class="annottext">fromJSON2Class :: JSONClass
</span><a href="Data.Aeson.TH.html#fromJSON2Class"><span class="hs-identifier hs-var hs-var">fromJSON2Class</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Direction -&gt; Arity -&gt; JSONClass
</span><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-var">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span>
</span><span id="line-1977"></span><span>
</span><span id="line-1978"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-type">jsonClassName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1979"></span><span id="jsonClassName"><span class="annot"><span class="annottext">jsonClassName :: JSONClass -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var hs-var">jsonClassName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ToJSON</span><span>
</span><span id="line-1980"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ToJSON1</span><span>
</span><span id="line-1981"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span>   </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">ToJSON2</span><span>
</span><span id="line-1982"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FromJSON</span><span>
</span><span id="line-1983"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FromJSON1</span><span>
</span><span id="line-1984"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonClassName"><span class="hs-identifier hs-var">jsonClassName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#From"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">''</span><span class="hs-identifier">FromJSON2</span><span>
</span><span id="line-1985"></span><span>
</span><span id="line-1986"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-type">jsonFunValName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1987"></span><span id="jsonFunValName"><span class="annot"><span class="annottext">jsonFunValName :: JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var hs-var">jsonFunValName</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">toJSON</span><span>
</span><span id="line-1988"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToJSON</span><span>
</span><span id="line-1989"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToJSON2</span><span>
</span><span id="line-1990"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">toEncoding</span><span>
</span><span id="line-1991"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToEncoding</span><span>
</span><span id="line-1992"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToEncoding2</span><span>
</span><span id="line-1993"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">parseJSON</span><span>
</span><span id="line-1994"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftParseJSON</span><span>
</span><span id="line-1995"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftParseJSON2</span><span>
</span><span id="line-1996"></span><span>
</span><span id="line-1997"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-type">jsonFunListName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1998"></span><span id="jsonFunListName"><span class="annot"><span class="annottext">jsonFunListName :: JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var hs-var">jsonFunListName</span></a></span></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">toJSONList</span><span>
</span><span id="line-1999"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToJSONList</span><span>
</span><span id="line-2000"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToJSON"><span class="hs-identifier hs-var">ToJSON</span></a></span><span>     </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToJSONList2</span><span>
</span><span id="line-2001"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">toEncodingList</span><span>
</span><span id="line-2002"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToEncodingList</span><span>
</span><span id="line-2003"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ToEncoding"><span class="hs-identifier hs-var">ToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftToEncodingList2</span><span>
</span><span id="line-2004"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity0"><span class="hs-identifier hs-var">Arity0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">parseJSONList</span><span>
</span><span id="line-2005"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity1"><span class="hs-identifier hs-var">Arity1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftParseJSONList</span><span>
</span><span id="line-2006"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span> </span><span class="annot"><span class="annottext">JSONFun
</span><a href="Data.Aeson.TH.html#ParseJSON"><span class="hs-identifier hs-var">ParseJSON</span></a></span><span>  </span><span class="annot"><span class="annottext">Arity
</span><a href="Data.Aeson.TH.html#Arity2"><span class="hs-identifier hs-var">Arity2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="hs-identifier">liftParseJSONList2</span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-type">jsonFunValOrListName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- e.g., toJSONList if True, toJSON if False</span><span>
</span><span id="line-2009"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONFun"><span class="hs-identifier hs-type">JSONFun</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-2010"></span><span id="jsonFunValOrListName"><span class="annot"><span class="annottext">jsonFunValOrListName :: Bool -&gt; JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-var hs-var">jsonFunValOrListName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunValName"><span class="hs-identifier hs-var">jsonFunValName</span></a></span><span>
</span><span id="line-2011"></span><span class="annot"><a href="Data.Aeson.TH.html#jsonFunValOrListName"><span class="hs-identifier hs-var">jsonFunValOrListName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">JSONFun -&gt; Arity -&gt; Name
</span><a href="Data.Aeson.TH.html#jsonFunListName"><span class="hs-identifier hs-var">jsonFunListName</span></a></span><span>
</span><span id="line-2012"></span><span>
</span><span id="line-2013"></span><span class="annot"><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-type">arityInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-2014"></span><span id="arityInt"><span class="annot"><span class="annottext">arityInt :: JSONClass -&gt; Int
</span><a href="Data.Aeson.TH.html#arityInt"><span class="hs-identifier hs-var hs-var">arityInt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Enum a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">fromEnum</span></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">JSONClass -&gt; Arity
</span><a href="Data.Aeson.TH.html#arity"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-2015"></span><span>
</span><span id="line-2016"></span><span class="annot"><a href="Data.Aeson.TH.html#allowExQuant"><span class="hs-identifier hs-type">allowExQuant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2017"></span><span id="allowExQuant"><span class="annot"><span class="annottext">allowExQuant :: JSONClass -&gt; Bool
</span><a href="Data.Aeson.TH.html#allowExQuant"><span class="hs-identifier hs-var hs-var">allowExQuant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#JSONClass"><span class="hs-identifier hs-type">JSONClass</span></a></span><span> </span><span class="annot"><span class="annottext">Direction
</span><a href="Data.Aeson.TH.html#To"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2018"></span><span class="annot"><a href="Data.Aeson.TH.html#allowExQuant"><span class="hs-identifier hs-var">allowExQuant</span></a></span><span> </span><span class="annot"><span class="annottext">JSONClass
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2019"></span><span>
</span><span id="line-2020"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-2021"></span><span class="hs-comment">-- StarKindStatus</span><span>
</span><span id="line-2022"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-2023"></span><span>
</span><span id="line-2024"></span><span class="hs-comment">-- | Whether a type is not of kind *, is of kind *, or is a kind variable.</span><span>
</span><span id="line-2025"></span><span class="hs-keyword">data</span><span> </span><span id="StarKindStatus"><span class="annot"><a href="Data.Aeson.TH.html#StarKindStatus"><span class="hs-identifier hs-var">StarKindStatus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NotKindStar"><span class="annot"><a href="Data.Aeson.TH.html#NotKindStar"><span class="hs-identifier hs-var">NotKindStar</span></a></span></span><span>
</span><span id="line-2026"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="KindStar"><span class="annot"><a href="Data.Aeson.TH.html#KindStar"><span class="hs-identifier hs-var">KindStar</span></a></span></span><span>
</span><span id="line-2027"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="IsKindVar"><span class="annot"><a href="Data.Aeson.TH.html#IsKindVar"><span class="hs-identifier hs-var">IsKindVar</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-2028"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679179647"><span id="local-6989586621679179650"><span class="annot"><span class="annottext">StarKindStatus -&gt; StarKindStatus -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StarKindStatus -&gt; StarKindStatus -&gt; Bool
$c/= :: StarKindStatus -&gt; StarKindStatus -&gt; Bool
== :: StarKindStatus -&gt; StarKindStatus -&gt; Bool
$c== :: StarKindStatus -&gt; StarKindStatus -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-2029"></span><span>
</span><span id="line-2030"></span><span class="hs-comment">-- | Does a Type have kind * or k (for some kind variable k)?</span><span>
</span><span id="line-2031"></span><span class="annot"><a href="Data.Aeson.TH.html#canRealizeKindStar"><span class="hs-identifier hs-type">canRealizeKindStar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#StarKindStatus"><span class="hs-identifier hs-type">StarKindStatus</span></a></span><span>
</span><span id="line-2032"></span><span id="canRealizeKindStar"><span class="annot"><span class="annottext">canRealizeKindStar :: Type -&gt; StarKindStatus
</span><a href="Data.Aeson.TH.html#canRealizeKindStar"><span class="hs-identifier hs-var hs-var">canRealizeKindStar</span></a></span></span><span> </span><span id="local-6989586621679179646"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179646"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179646"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2033"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="Data.Aeson.TH.html#hasKindStar"><span class="hs-identifier hs-var">hasKindStar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621679179646"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StarKindStatus
</span><a href="Data.Aeson.TH.html#KindStar"><span class="hs-identifier hs-var">KindStar</span></a></span><span>
</span><span id="line-2034"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">SigT</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">VarT</span></span><span> </span><span id="local-6989586621679179645"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179645"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; StarKindStatus
</span><a href="Data.Aeson.TH.html#IsKindVar"><span class="hs-identifier hs-var">IsKindVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179645"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-2035"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StarKindStatus
</span><a href="Data.Aeson.TH.html#NotKindStar"><span class="hs-identifier hs-var">NotKindStar</span></a></span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span class="hs-comment">-- | Returns 'Just' the kind variable 'Name' of a 'StarKindStatus' if it exists.</span><span>
</span><span id="line-2038"></span><span class="hs-comment">-- Otherwise, returns 'Nothing'.</span><span>
</span><span id="line-2039"></span><span class="annot"><a href="Data.Aeson.TH.html#starKindStatusToName"><span class="hs-identifier hs-type">starKindStatusToName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Aeson.TH.html#StarKindStatus"><span class="hs-identifier hs-type">StarKindStatus</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-2040"></span><span id="starKindStatusToName"><span class="annot"><span class="annottext">starKindStatusToName :: StarKindStatus -&gt; Maybe Name
</span><a href="Data.Aeson.TH.html#starKindStatusToName"><span class="hs-identifier hs-var hs-var">starKindStatusToName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Aeson.TH.html#IsKindVar"><span class="hs-identifier hs-type">IsKindVar</span></a></span><span> </span><span id="local-6989586621679179643"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179643"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679179643"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-2041"></span><span class="annot"><a href="Data.Aeson.TH.html#starKindStatusToName"><span class="hs-identifier hs-var">starKindStatusToName</span></a></span><span> </span><span class="annot"><span class="annottext">StarKindStatus
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2042"></span><span>
</span><span id="line-2043"></span><span class="hs-comment">-- | Concat together all of the StarKindStatuses that are IsKindVar and extract</span><span>
</span><span id="line-2044"></span><span class="hs-comment">-- the kind variables' Names out.</span><span>
</span><span id="line-2045"></span><span class="annot"><a href="Data.Aeson.TH.html#catKindVarNames"><span class="hs-identifier hs-type">catKindVarNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Aeson.TH.html#StarKindStatus"><span class="hs-identifier hs-type">StarKindStatus</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span>
</span><span id="line-2046"></span><span id="catKindVarNames"><span class="annot"><span class="annottext">catKindVarNames :: [StarKindStatus] -&gt; [Name]
</span><a href="Data.Aeson.TH.html#catKindVarNames"><span class="hs-identifier hs-var hs-var">catKindVarNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">StarKindStatus -&gt; Maybe Name
</span><a href="Data.Aeson.TH.html#starKindStatusToName"><span class="hs-identifier hs-var">starKindStatusToName</span></a></span><span>
</span><span id="line-2047"></span></pre></body></html>