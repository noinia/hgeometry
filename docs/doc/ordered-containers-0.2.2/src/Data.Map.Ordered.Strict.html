<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | An 'OMap' behaves much like a 'M.Map', with mostly the same asymptotics, but</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- also remembers the order that keys were inserted. All operations whose</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- asymptotics are worse than 'M.Map' have documentation saying so.</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Map.Ordered.Strict</span><span>
</span><span id="line-10"></span><span>	</span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier">OMap</span></a></span><span>
</span><span id="line-11"></span><span>	</span><span class="annot"><span class="hs-comment">-- * Trivial maps</span></span><span>
</span><span id="line-12"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#empty"><span class="hs-identifier">empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#singleton"><span class="hs-identifier">singleton</span></a></span><span>
</span><span id="line-13"></span><span>	</span><span class="annot"><span class="hs-comment">-- * Insertion</span></span><span>
</span><span id="line-14"></span><span>	</span><span class="hs-comment">-- | Conventions:</span><span>
</span><span id="line-15"></span><span>	</span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span>	</span><span class="hs-comment">-- * The open side of an angle bracket points to an 'OMap'</span><span>
</span><span id="line-17"></span><span>	</span><span class="hs-comment">--</span><span>
</span><span id="line-18"></span><span>	</span><span class="hs-comment">-- * The pipe appears on the side whose indices take precedence if both sides contain the same key</span><span>
</span><span id="line-19"></span><span>	</span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span>	</span><span class="hs-comment">-- * The left argument's indices are lower than the right argument's indices</span><span>
</span><span id="line-21"></span><span>	</span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span>	</span><span class="hs-comment">-- * If both sides contain the same key, the tuple's value wins</span><span>
</span><span id="line-23"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3C%7C"><span class="hs-operator">(&lt;|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3C"><span class="hs-operator">(|&lt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3E%7C"><span class="hs-operator">(&gt;|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3E"><span class="hs-operator">(|&gt;)</span></a></span><span>
</span><span id="line-24"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%3C%3E%7C"><span class="hs-operator">(&lt;&gt;|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%7C%3C%3E"><span class="hs-operator">(|&lt;&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#unionWithL"><span class="hs-identifier">unionWithL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#unionWithR"><span class="hs-identifier">unionWithR</span></a></span><span>
</span><span id="line-25"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Util.html#Bias"><span class="hs-identifier">Bias</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Util.html#Bias"><span class="hs-identifier">Bias</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Util.html#unbiased"><span class="hs-identifier">unbiased</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Util.html#L"><span class="hs-identifier">L</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Util.html#R"><span class="hs-identifier">R</span></a></span><span>
</span><span id="line-26"></span><span>	</span><span class="annot"><span class="hs-comment">-- * Deletion</span></span><span>
</span><span id="line-27"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#delete"><span class="hs-identifier">delete</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#filter"><span class="hs-identifier">filter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%5C%5C"><span class="hs-operator">(\\)</span></a></span><span>
</span><span id="line-28"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%7C%2F%5C"><span class="hs-operator">(|/\)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%2F%5C%7C"><span class="hs-operator">(/\|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#intersectionWith"><span class="hs-identifier">intersectionWith</span></a></span><span>
</span><span id="line-29"></span><span>	</span><span class="annot"><span class="hs-comment">-- * Query</span></span><span>
</span><span id="line-30"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#null"><span class="hs-identifier">null</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#size"><span class="hs-identifier">size</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#member"><span class="hs-identifier">member</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#notMember"><span class="hs-identifier">notMember</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#lookup"><span class="hs-identifier">lookup</span></a></span><span>
</span><span id="line-31"></span><span>	</span><span class="annot"><span class="hs-comment">-- * Indexing</span></span><span>
</span><span id="line-32"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Util.html#Index"><span class="hs-identifier">Index</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#findIndex"><span class="hs-identifier">findIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#elemAt"><span class="hs-identifier">elemAt</span></a></span><span>
</span><span id="line-33"></span><span>	</span><span class="annot"><span class="hs-comment">-- * List conversions</span></span><span>
</span><span id="line-34"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#fromList"><span class="hs-identifier">fromList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#assocs"><span class="hs-identifier">assocs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#toAscList"><span class="hs-identifier">toAscList</span></a></span><span>
</span><span id="line-35"></span><span>	</span><span class="annot"><span class="hs-comment">-- * 'M.Map' conversion</span></span><span>
</span><span id="line-36"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#toMap"><span class="hs-identifier">toMap</span></a></span><span>
</span><span id="line-37"></span><span>	</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Foldable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html"><span class="hs-identifier">Data.Map.Ordered.Internal</span></a></span><span>
</span><span id="line-42"></span><span>	</span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier">OMap</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#empty"><span class="hs-identifier">empty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%3C%3E%7C"><span class="hs-operator">(&lt;&gt;|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%7C%3C%3E"><span class="hs-operator">(|&lt;&gt;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#delete"><span class="hs-identifier">delete</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#filter"><span class="hs-identifier">filter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%5C%5C"><span class="hs-operator">(\\)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%7C%2F%5C"><span class="hs-operator">(|/\)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#%2F%5C%7C"><span class="hs-operator">(/\|)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#null"><span class="hs-identifier">null</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#size"><span class="hs-identifier">size</span></a></span><span>
</span><span id="line-43"></span><span>	</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#member"><span class="hs-identifier">member</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#notMember"><span class="hs-identifier">notMember</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#lookup"><span class="hs-identifier">lookup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#findIndex"><span class="hs-identifier">findIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#elemAt"><span class="hs-identifier">elemAt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#assocs"><span class="hs-identifier">assocs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#toAscList"><span class="hs-identifier">toAscList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#fromTV"><span class="hs-identifier">fromTV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#toMap"><span class="hs-identifier">toMap</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Map.Util.html"><span class="hs-identifier">Data.Map.Util</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">filter</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">lookup</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3C%7C"><span class="hs-operator hs-type">&lt;|</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3C"><span class="hs-operator hs-type">|&lt;</span></a></span><span> </span><span class="hs-comment">-- copy :</span><span>
</span><span id="line-48"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">5</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3E%7C"><span class="hs-operator hs-type">&gt;|</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3E"><span class="hs-operator hs-type">|&gt;</span></a></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span id="local-6989586621679063621"><span id="local-6989586621679063622"><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3C%7C"><span class="hs-operator hs-type">(&lt;|)</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3C"><span class="hs-operator hs-type">(|&lt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>  </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063621"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063621"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063622"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063621"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-51"></span><span id="local-6989586621679063673"><span id="local-6989586621679063674"><span class="annot"><a href="Data.Map.Ordered.Strict.html#%3E%7C"><span class="hs-operator hs-type">(&gt;|)</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Strict.html#%7C%3E"><span class="hs-operator hs-type">(|&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063674"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063674"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063673"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>  </span><span class="annot"><a href="#local-6989586621679063674"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063673"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063674"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063673"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-special">(</span><span id="local-6989586621679063620"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063620"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063619"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063619"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%3C%7C"><span class="annot"><span class="annottext">&lt;| :: (k, v) -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#%3C%7C"><span class="hs-operator hs-var hs-var">&lt;|</span></a></span></span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063617"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063617"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063616"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063616"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
forall k v. Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-var">OMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; (Tag, v) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063620"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063614"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063619"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063617"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; (k, v) -&gt; Map Tag (k, v) -&gt; Map Tag (k, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063614"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063620"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063619"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063616"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-54"></span><span>	</span><span id="local-6989586621679063614"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063614"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tag -&gt; ((Tag, v) -&gt; Tag) -&gt; Maybe (Tag, v) -&gt; Tag
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Tag
forall a. Map Tag a -&gt; Tag
</span><a href="Data.Map.Util.html#nextLowerTag"><span class="hs-identifier hs-var">nextLowerTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063616"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tag, v) -&gt; Tag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; Map k (Tag, v) -&gt; Maybe (Tag, v)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">M.lookup</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063620"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063617"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-special">(</span><span id="local-6989586621679063610"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063610"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063609"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063609"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="%7C%3C"><span class="annot"><span class="annottext">|&lt; :: (k, v) -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#%7C%3C"><span class="hs-operator hs-var hs-var">|&lt;</span></a></span></span><span> </span><span id="local-6989586621679063608"><span class="annot"><span class="annottext">o :: OMap k v
</span><a href="#local-6989586621679063608"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
forall k v. Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-var">OMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; (Tag, v) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063610"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063607"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063609"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063606"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; (k, v) -&gt; Map Tag (k, v) -&gt; Map Tag (k, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063607"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063610"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063609"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063605"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-57"></span><span>	</span><span id="local-6989586621679063607"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063607"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Tag
forall a. Map Tag a -&gt; Tag
</span><a href="Data.Map.Util.html#nextLowerTag"><span class="hs-identifier hs-var">nextLowerTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063605"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-58"></span><span>	</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063606"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063606"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063605"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063605"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">k -&gt; OMap k v -&gt; OMap k v
forall k v. Ord k =&gt; k -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#delete"><span class="hs-identifier hs-var">delete</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063610"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">OMap k v
</span><a href="#local-6989586621679063608"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span id="local-6989586621679063604"><span class="annot"><span class="annottext">o :: OMap k v
</span><a href="#local-6989586621679063604"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="%3E%7C"><span class="annot"><span class="annottext">&gt;| :: OMap k v -&gt; (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#%3E%7C"><span class="hs-operator hs-var hs-var">&gt;|</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063603"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063603"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063602"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063602"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
forall k v. Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-var">OMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; (Tag, v) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063603"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063601"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063602"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063600"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; (k, v) -&gt; Map Tag (k, v) -&gt; Map Tag (k, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063601"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063603"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063602"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063599"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-61"></span><span>	</span><span id="local-6989586621679063601"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063601"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Tag
forall a. Map Tag a -&gt; Tag
</span><a href="Data.Map.Util.html#nextHigherTag"><span class="hs-identifier hs-var">nextHigherTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063599"><span class="hs-identifier hs-var">kvs</span></a></span><span>
</span><span id="line-62"></span><span>	</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063600"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063600"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063599"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063599"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">k -&gt; OMap k v -&gt; OMap k v
forall k v. Ord k =&gt; k -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#delete"><span class="hs-identifier hs-var">delete</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063603"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">OMap k v
</span><a href="#local-6989586621679063604"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063597"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063597"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063596"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">kvs</span></a></span></span><span> </span><span id="%7C%3E"><span class="annot"><span class="annottext">|&gt; :: OMap k v -&gt; (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#%7C%3E"><span class="hs-operator hs-var hs-var">|&gt;</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063595"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063595"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063594"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063594"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
forall k v. Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-var">OMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; (Tag, v) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063595"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063593"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063594"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063597"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; (k, v) -&gt; Map Tag (k, v) -&gt; Map Tag (k, v)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063593"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063595"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063594"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>	</span><span id="local-6989586621679063593"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063593"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tag -&gt; ((Tag, v) -&gt; Tag) -&gt; Maybe (Tag, v) -&gt; Tag
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Tag
forall a. Map Tag a -&gt; Tag
</span><a href="Data.Map.Util.html#nextHigherTag"><span class="hs-identifier hs-var">nextHigherTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063596"><span class="hs-identifier hs-var">kvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tag, v) -&gt; Tag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; Map k (Tag, v) -&gt; Maybe (Tag, v)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">M.lookup</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063595"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063597"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-comment">-- | Take the union. The first 'OMap' \'s argument's indices are lower than the</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- second. If a key appears in both maps, the first argument's index takes</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- precedence, and the supplied function is used to combine the values.</span><span>
</span><span id="line-70"></span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- /O(r*log(r))/ where /r/ is the size of the result</span><span>
</span><span id="line-72"></span><span id="local-6989586621679063591"><span id="local-6989586621679063592"><span class="annot"><a href="Data.Map.Ordered.Strict.html#unionWithL"><span class="hs-identifier hs-type">unionWithL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063592"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063592"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063592"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063592"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063592"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063591"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-73"></span><span id="unionWithL"><span class="annot"><span class="annottext">unionWithL :: (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#unionWithL"><span class="hs-identifier hs-var hs-var">unionWithL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Tag -&gt; Tag -&gt; Tag)
-&gt; (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
forall k v.
Ord k =&gt;
(Tag -&gt; Tag -&gt; Tag)
-&gt; (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#unionWithInternal"><span class="hs-identifier hs-var">unionWithInternal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063589"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063589"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679063588"><span class="annot"><span class="annottext">t' :: Tag
</span><a href="#local-6989586621679063588"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063589"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Take the union. The first 'OMap' \'s argument's indices are lower than the</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- second. If a key appears in both maps, the second argument's index takes</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- precedence, and the supplied function is used to combine the values.</span><span>
</span><span id="line-78"></span><span class="hs-comment">--</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- /O(r*log(r))/ where /r/ is the size of the result</span><span>
</span><span id="line-80"></span><span id="local-6989586621679063586"><span id="local-6989586621679063587"><span class="annot"><a href="Data.Map.Ordered.Strict.html#unionWithR"><span class="hs-identifier hs-type">unionWithR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063587"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063587"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063587"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063587"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063587"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063586"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-81"></span><span id="unionWithR"><span class="annot"><span class="annottext">unionWithR :: (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#unionWithR"><span class="hs-identifier hs-var hs-var">unionWithR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Tag -&gt; Tag -&gt; Tag)
-&gt; (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
forall k v.
Ord k =&gt;
(Tag -&gt; Tag -&gt; Tag)
-&gt; (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#unionWithInternal"><span class="hs-identifier hs-var">unionWithInternal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063585"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063585"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679063584"><span class="annot"><span class="annottext">t' :: Tag
</span><a href="#local-6989586621679063584"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063584"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span id="local-6989586621679063697"><span id="local-6989586621679063698"><span class="annot"><a href="Data.Map.Ordered.Strict.html#unionWithInternal"><span class="hs-identifier hs-type">unionWithInternal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Util.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Util.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Util.html#Tag"><span class="hs-identifier hs-type">Tag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063698"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063697"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-84"></span><span id="unionWithInternal"><span class="annot"><span class="annottext">unionWithInternal :: (Tag -&gt; Tag -&gt; Tag)
-&gt; (k -&gt; v -&gt; v -&gt; v) -&gt; OMap k v -&gt; OMap k v -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#unionWithInternal"><span class="hs-identifier hs-var hs-var">unionWithInternal</span></a></span></span><span> </span><span id="local-6989586621679063583"><span class="annot"><span class="annottext">fT :: Tag -&gt; Tag -&gt; Tag
</span><a href="#local-6989586621679063583"><span class="hs-identifier hs-var">fT</span></a></span></span><span> </span><span id="local-6989586621679063582"><span class="annot"><span class="annottext">fKV :: k -&gt; v -&gt; v -&gt; v
</span><a href="#local-6989586621679063582"><span class="hs-identifier hs-var">fKV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063581"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063581"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063580"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063580"><span class="hs-identifier hs-var">kvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063579"><span class="annot"><span class="annottext">tvs' :: Map k (Tag, v)
</span><a href="#local-6989586621679063579"><span class="hs-identifier hs-var">tvs'</span></a></span></span><span> </span><span id="local-6989586621679063578"><span class="annot"><span class="annottext">kvs' :: Map Tag (k, v)
</span><a href="#local-6989586621679063578"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; OMap k v
forall k v. Ord k =&gt; Map k (Tag, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#fromTV"><span class="hs-identifier hs-var">fromTV</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063577"><span class="hs-identifier hs-var">tvs''</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-85"></span><span>	</span><span id="local-6989586621679063576"><span class="annot"><span class="annottext">bump :: Tag
</span><a href="#local-6989586621679063576"><span class="hs-identifier hs-var hs-var">bump</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Maybe Tag
forall a. Map Tag a -&gt; Maybe Tag
</span><a href="Data.Map.Util.html#maxTag"><span class="hs-identifier hs-var">maxTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063580"><span class="hs-identifier hs-var">kvs</span></a></span><span>  </span><span class="hs-keyword">of</span><span>
</span><span id="line-86"></span><span>		</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-87"></span><span>		</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679063574"><span class="annot"><span class="annottext">k :: Tag
</span><a href="#local-6989586621679063574"><span class="hs-identifier hs-var">k</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063574"><span class="hs-identifier hs-var">k</span></a></span><span class="annot"><span class="annottext">Tag -&gt; Tag -&gt; Tag
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="hs-number">1</span></span><span>
</span><span id="line-88"></span><span>	</span><span id="local-6989586621679063573"><span class="annot"><span class="annottext">bump' :: Tag
</span><a href="#local-6989586621679063573"><span class="hs-identifier hs-var hs-var">bump'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v) -&gt; Maybe Tag
forall a. Map Tag a -&gt; Maybe Tag
</span><a href="Data.Map.Util.html#minTag"><span class="hs-identifier hs-var">minTag</span></a></span><span> </span><span class="annot"><span class="annottext">Map Tag (k, v)
</span><a href="#local-6989586621679063578"><span class="hs-identifier hs-var">kvs'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-89"></span><span>		</span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-number">0</span></span><span>
</span><span id="line-90"></span><span>		</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679063571"><span class="annot"><span class="annottext">k :: Tag
</span><a href="#local-6989586621679063571"><span class="hs-identifier hs-var">k</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063571"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-91"></span><span>	</span><span id="local-6989586621679063577"><span class="annot"><span class="annottext">tvs'' :: Map k (Tag, v)
</span><a href="#local-6989586621679063577"><span class="hs-identifier hs-var hs-var">tvs''</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(k -&gt; (Tag, v) -&gt; (Tag, v) -&gt; (Tag, v))
-&gt; Map k (Tag, v) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall k a.
Ord k =&gt;
(k -&gt; a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unionWithKey</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063569"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063569"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063568"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063568"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063567"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063567"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063566"><span class="annot"><span class="annottext">t' :: Tag
</span><a href="#local-6989586621679063566"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063565"><span class="annot"><span class="annottext">v' :: v
</span><a href="#local-6989586621679063565"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; Tag -&gt; Tag
</span><a href="#local-6989586621679063583"><span class="hs-identifier hs-var">fT</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063568"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063566"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">k -&gt; v -&gt; v -&gt; v
</span><a href="#local-6989586621679063582"><span class="hs-identifier hs-var">fKV</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063569"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063567"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063565"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>		</span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Tag, v) -&gt; (Tag, v)) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679063564"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063564"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063563"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063563"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063576"><span class="hs-identifier hs-var">bump</span></a></span><span> </span><span class="annot"><span class="annottext">Tag -&gt; Tag -&gt; Tag
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063564"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063563"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063581"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>		</span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Tag, v) -&gt; (Tag, v)) -&gt; Map k (Tag, v) -&gt; Map k (Tag, v)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679063561"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063561"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063560"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063560"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063573"><span class="hs-identifier hs-var">bump'</span></a></span><span class="annot"><span class="annottext">Tag -&gt; Tag -&gt; Tag
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063561"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063560"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063579"><span class="hs-identifier hs-var">tvs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span id="local-6989586621679063558"><span id="local-6989586621679063559"><span class="annot"><a href="Data.Map.Ordered.Strict.html#singleton"><span class="hs-identifier hs-type">singleton</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063559"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679063558"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063559"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063558"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-96"></span><span id="singleton"><span class="annot"><span class="annottext">singleton :: (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#singleton"><span class="hs-identifier hs-var hs-var">singleton</span></a></span></span><span> </span><span id="local-6989586621679063557"><span class="annot"><span class="annottext">kv :: (k, v)
</span><a href="#local-6989586621679063557"><span class="hs-identifier hs-var">kv</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621679063556"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063556"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679063555"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063555"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
forall k v. Map k (Tag, v) -&gt; Map Tag (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-var">OMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; (Tag, v) -&gt; Map k (Tag, v)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063556"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063555"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag -&gt; (k, v) -&gt; Map Tag (k, v)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.singleton</span></span><span> </span><span class="annot"><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">(k, v)
</span><a href="#local-6989586621679063557"><span class="hs-identifier hs-var">kv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- | If a key appears multiple times, the first occurrence is used for ordering</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- and the last occurrence is used for its value. The library author welcomes</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- comments on whether this default is sane.</span><span>
</span><span id="line-101"></span><span id="local-6989586621679063552"><span id="local-6989586621679063553"><span class="annot"><a href="Data.Map.Ordered.Strict.html#fromList"><span class="hs-identifier hs-type">fromList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063553"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063553"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679063552"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063553"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063552"><span class="hs-identifier hs-type">v</span></a></span></span></span><span>
</span><span id="line-102"></span><span id="fromList"><span class="annot"><span class="annottext">fromList :: [(k, v)] -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#fromList"><span class="hs-identifier hs-var hs-var">fromList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(OMap k v -&gt; (k, v) -&gt; OMap k v)
-&gt; OMap k v -&gt; [(k, v)] -&gt; OMap k v
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">OMap k v -&gt; (k, v) -&gt; OMap k v
forall k v. Ord k =&gt; OMap k v -&gt; (k, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Strict.html#%7C%3E"><span class="hs-operator hs-var">(|&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">OMap k v
forall k v. OMap k v
</span><a href="Data.Map.Ordered.Internal.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Take the intersection. The first 'OMap' \'s argument's indices are used for</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- the result.</span><span>
</span><span id="line-106"></span><span class="hs-comment">--</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- /O(m*log(n\/(m+1)) + r*log(r))/ where /m/ is the size of the smaller map, /n/</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- is the size of the larger map, and /r/ is the size of the result.</span><span>
</span><span id="line-109"></span><span id="local-6989586621679063548"><span id="local-6989586621679063549"><span id="local-6989586621679063550"><span id="local-6989586621679063551"><span class="annot"><a href="Data.Map.Ordered.Strict.html#intersectionWith"><span class="hs-identifier hs-type">intersectionWith</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-110"></span><span>	</span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679063551"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-111"></span><span>	</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679063551"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063550"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063549"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679063548"><span class="hs-identifier hs-type">v''</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-112"></span><span>	</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063551"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063550"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063551"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063549"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063551"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679063548"><span class="hs-identifier hs-type">v''</span></a></span></span></span></span></span><span>
</span><span id="line-113"></span><span id="intersectionWith"><span class="annot"><span class="annottext">intersectionWith :: (k -&gt; v -&gt; v' -&gt; v'') -&gt; OMap k v -&gt; OMap k v' -&gt; OMap k v''
</span><a href="Data.Map.Ordered.Strict.html#intersectionWith"><span class="hs-identifier hs-var hs-var">intersectionWith</span></a></span></span><span> </span><span id="local-6989586621679063547"><span class="annot"><span class="annottext">f :: k -&gt; v -&gt; v' -&gt; v''
</span><a href="#local-6989586621679063547"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063546"><span class="annot"><span class="annottext">tvs :: Map k (Tag, v)
</span><a href="#local-6989586621679063546"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621679063545"><span class="annot"><span class="annottext">kvs :: Map Tag (k, v)
</span><a href="#local-6989586621679063545"><span class="hs-identifier hs-var">kvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Map.Ordered.Internal.html#OMap"><span class="hs-identifier hs-type">OMap</span></a></span><span> </span><span id="local-6989586621679063544"><span class="annot"><span class="annottext">tvs' :: Map k (Tag, v')
</span><a href="#local-6989586621679063544"><span class="hs-identifier hs-var">tvs'</span></a></span></span><span> </span><span id="local-6989586621679063543"><span class="annot"><span class="annottext">kvs' :: Map Tag (k, v')
</span><a href="#local-6989586621679063543"><span class="hs-identifier hs-var">kvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v'') -&gt; OMap k v''
forall k v. Ord k =&gt; Map k (Tag, v) -&gt; OMap k v
</span><a href="Data.Map.Ordered.Internal.html#fromTV"><span class="hs-identifier hs-var">fromTV</span></a></span><span>
</span><span id="line-114"></span><span>	</span><span class="annot"><span class="annottext">(Map k (Tag, v'') -&gt; OMap k v'') -&gt; Map k (Tag, v'') -&gt; OMap k v''
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(k -&gt; (Tag, v) -&gt; (Tag, v') -&gt; (Tag, v''))
-&gt; Map k (Tag, v) -&gt; Map k (Tag, v') -&gt; Map k (Tag, v'')
forall k a b c.
Ord k =&gt;
(k -&gt; a -&gt; b -&gt; c) -&gt; Map k a -&gt; Map k b -&gt; Map k c
</span><span class="hs-identifier hs-var">M.intersectionWithKey</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679063541"><span class="annot"><span class="annottext">k :: k
</span><a href="#local-6989586621679063541"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063540"><span class="annot"><span class="annottext">t :: Tag
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063539"><span class="annot"><span class="annottext">v :: v
</span><a href="#local-6989586621679063539"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679063538"><span class="annot"><span class="annottext">t' :: Tag
</span><a href="#local-6989586621679063538"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679063537"><span class="annot"><span class="annottext">v' :: v'
</span><a href="#local-6989586621679063537"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tag
</span><a href="#local-6989586621679063540"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">k -&gt; v -&gt; v' -&gt; v''
</span><a href="#local-6989586621679063547"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679063541"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679063539"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">v'
</span><a href="#local-6989586621679063537"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v)
</span><a href="#local-6989586621679063546"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Map k (Tag, v')
</span><a href="#local-6989586621679063544"><span class="hs-identifier hs-var">tvs'</span></a></span><span>
</span><span id="line-115"></span></pre></body></html>