<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Text.XML.Expat.Internal.Namespaced</span><span>
</span><span id="line-3"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier">NName</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NAttributes"><span class="hs-identifier">NAttributes</span></a></span><span>
</span><span id="line-5"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#mkNName"><span class="hs-identifier">mkNName</span></a></span><span>
</span><span id="line-6"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#mkAnNName"><span class="hs-identifier">mkAnNName</span></a></span><span>
</span><span id="line-7"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#toNamespaced"><span class="hs-identifier">toNamespaced</span></a></span><span>
</span><span id="line-8"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#fromNamespaced"><span class="hs-identifier">fromNamespaced</span></a></span><span>
</span><span id="line-9"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier">xmlnsUri</span></a></span><span>
</span><span id="line-10"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier">xmlns</span></a></span><span>
</span><span id="line-11"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html"><span class="hs-identifier">Text.XML.Expat.Internal.NodeClass</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html"><span class="hs-identifier">Text.XML.Expat.Internal.Qualified</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Text.XML.Expat.SAX.html"><span class="hs-identifier">Text.XML.Expat.SAX</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DM</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-comment">-- | A namespace-qualified tag.</span><span>
</span><span id="line-22"></span><span class="hs-comment">--</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- NName has two components, a local part and an optional namespace. The local part is the</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- name of the tag. The namespace is the URI identifying collections of declared tags.</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- Tags with the same local part but from different namespaces are distinct. Unqualified tags</span><span>
</span><span id="line-26"></span><span class="hs-comment">-- are those with no namespace. They are in the default namespace, and all uses of an</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- unqualified tag are equivalent.</span><span>
</span><span id="line-28"></span><span class="hs-keyword">data</span><span> </span><span id="NName"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span></span><span> </span><span id="local-6989586621679113648"><span class="annot"><a href="#local-6989586621679113648"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-29"></span><span>    </span><span id="NName"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-30"></span><span>        </span><span id="nnNamespace"><span class="annot"><span class="annottext">NName text -&gt; Maybe text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nnNamespace"><span class="hs-identifier hs-var hs-var">nnNamespace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679113648"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span id="nnLocalPart"><span class="annot"><span class="annottext">NName text -&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nnLocalPart"><span class="hs-identifier hs-var hs-var">nnLocalPart</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="#local-6989586621679113648"><span class="hs-identifier hs-type">text</span></a></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113532"><span id="local-6989586621679113534"><span class="annot"><span class="annottext">NName text -&gt; NName text -&gt; Bool
(NName text -&gt; NName text -&gt; Bool)
-&gt; (NName text -&gt; NName text -&gt; Bool) -&gt; Eq (NName text)
forall text. Eq text =&gt; NName text -&gt; NName text -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: NName text -&gt; NName text -&gt; Bool
$c/= :: forall text. Eq text =&gt; NName text -&gt; NName text -&gt; Bool
== :: NName text -&gt; NName text -&gt; Bool
$c== :: forall text. Eq text =&gt; NName text -&gt; NName text -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621679113525"><span id="local-6989586621679113527"><span id="local-6989586621679113529"><span class="annot"><span class="annottext">Int -&gt; NName text -&gt; ShowS
[NName text] -&gt; ShowS
NName text -&gt; String
(Int -&gt; NName text -&gt; ShowS)
-&gt; (NName text -&gt; String)
-&gt; ([NName text] -&gt; ShowS)
-&gt; Show (NName text)
forall text. Show text =&gt; Int -&gt; NName text -&gt; ShowS
forall text. Show text =&gt; [NName text] -&gt; ShowS
forall text. Show text =&gt; NName text -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [NName text] -&gt; ShowS
$cshowList :: forall text. Show text =&gt; [NName text] -&gt; ShowS
show :: NName text -&gt; String
$cshow :: forall text. Show text =&gt; NName text -&gt; String
showsPrec :: Int -&gt; NName text -&gt; ShowS
$cshowsPrec :: forall text. Show text =&gt; Int -&gt; NName text -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span id="local-6989586621679113523"><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="#local-6989586621679113523"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113523"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-36"></span><span>    </span><span id="local-6989586621679113520"><span class="annot"><span class="annottext">rnf :: NName text -&gt; ()
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span id="local-6989586621679113518"><span class="annot"><span class="annottext">ns :: Maybe text
</span><a href="#local-6989586621679113518"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621679113517"><span class="annot"><span class="annottext">loc :: text
</span><a href="#local-6989586621679113517"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe text, text) -&gt; ()
forall a. NFData a =&gt; a -&gt; ()
</span><span class="hs-identifier hs-var">rnf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text
</span><a href="#local-6989586621679113518"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113517"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-comment">-- | Type shortcut for attributes with namespaced names</span><span>
</span><span id="line-39"></span><span class="hs-keyword">type</span><span> </span><span id="NAttributes"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NAttributes"><span class="hs-identifier hs-var">NAttributes</span></a></span></span><span> </span><span id="local-6989586621679113516"><span class="annot"><a href="#local-6989586621679113516"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html#Attributes"><span class="hs-identifier hs-type">Attributes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113516"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113516"><span class="hs-identifier hs-type">text</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | Make a new NName from a prefix and localPart.</span><span>
</span><span id="line-42"></span><span id="local-6989586621679113514"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#mkNName"><span class="hs-identifier hs-type">mkNName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679113514"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113514"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113514"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-43"></span><span id="mkNName"><span class="annot"><span class="annottext">mkNName :: text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#mkNName"><span class="hs-identifier hs-var hs-var">mkNName</span></a></span></span><span> </span><span id="local-6989586621679113513"><span class="annot"><span class="annottext">prefix :: text
</span><a href="#local-6989586621679113513"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621679113512"><span class="annot"><span class="annottext">localPart :: text
</span><a href="#local-6989586621679113512"><span class="hs-identifier hs-var">localPart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text -&gt; NName text
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113513"><span class="hs-identifier hs-var">prefix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113512"><span class="hs-identifier hs-var">localPart</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-comment">-- | Make a new NName with no prefix.</span><span>
</span><span id="line-46"></span><span id="local-6989586621679113511"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#mkAnNName"><span class="hs-identifier hs-type">mkAnNName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679113511"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113511"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-47"></span><span id="mkAnNName"><span class="annot"><span class="annottext">mkAnNName :: text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#mkAnNName"><span class="hs-identifier hs-var hs-var">mkAnNName</span></a></span></span><span> </span><span id="local-6989586621679113510"><span class="annot"><span class="annottext">localPart :: text
</span><a href="#local-6989586621679113510"><span class="hs-identifier hs-var">localPart</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text -&gt; NName text
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113510"><span class="hs-identifier hs-var">localPart</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">type</span><span> </span><span id="NsPrefixMap"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NsPrefixMap"><span class="hs-identifier hs-var">NsPrefixMap</span></a></span></span><span> </span><span id="local-6989586621679113509"><span class="annot"><a href="#local-6989586621679113509"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679113509"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679113509"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">type</span><span> </span><span id="PrefixNsMap"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#PrefixNsMap"><span class="hs-identifier hs-var">PrefixNsMap</span></a></span></span><span> </span><span id="local-6989586621679113508"><span class="annot"><a href="#local-6989586621679113508"><span class="hs-identifier hs-type">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679113508"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679113508"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span id="local-6989586621679113507"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xmlUri"><span class="hs-identifier hs-type">xmlUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113507"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113507"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-53"></span><span id="xmlUri"><span class="annot"><span class="annottext">xmlUri :: text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlUri"><span class="hs-identifier hs-var hs-var">xmlUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; text
forall s. GenericXMLString s =&gt; String -&gt; s
</span><a href="Text.XML.Expat.SAX.html#gxFromString"><span class="hs-identifier hs-var">gxFromString</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;http://www.w3.org/XML/1998/namespace&quot;</span></span><span>
</span><span id="line-54"></span><span id="local-6989586621679113634"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xml"><span class="hs-identifier hs-type">xml</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113634"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113634"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-55"></span><span id="xml"><span class="annot"><span class="annottext">xml :: text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xml"><span class="hs-identifier hs-var hs-var">xml</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; text
forall s. GenericXMLString s =&gt; String -&gt; s
</span><a href="Text.XML.Expat.SAX.html#gxFromString"><span class="hs-identifier hs-var">gxFromString</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;xml&quot;</span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span id="local-6989586621679113503"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-type">xmlnsUri</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113503"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113503"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-58"></span><span id="xmlnsUri"><span class="annot"><span class="annottext">xmlnsUri :: text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-var hs-var">xmlnsUri</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; text
forall s. GenericXMLString s =&gt; String -&gt; s
</span><a href="Text.XML.Expat.SAX.html#gxFromString"><span class="hs-identifier hs-var">gxFromString</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;http://www.w3.org/2000/xmlns/&quot;</span></span><span>
</span><span id="line-59"></span><span id="local-6989586621679113502"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-type">xmlns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113502"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113502"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-60"></span><span id="xmlns"><span class="annot"><span class="annottext">xmlns :: text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var hs-var">xmlns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; text
forall s. GenericXMLString s =&gt; String -&gt; s
</span><a href="Text.XML.Expat.SAX.html#gxFromString"><span class="hs-identifier hs-var">gxFromString</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;xmlns&quot;</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span id="local-6989586621679113623"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#baseNsBindings"><span class="hs-identifier hs-type">baseNsBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113623"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113623"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NsPrefixMap"><span class="hs-identifier hs-type">NsPrefixMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113623"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-64"></span><span id="baseNsBindings"><span class="annot"><span class="annottext">baseNsBindings :: NsPrefixMap text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#baseNsBindings"><span class="hs-identifier hs-var hs-var">baseNsBindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; NsPrefixMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xml"><span class="hs-identifier hs-var">xml</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlUri"><span class="hs-identifier hs-var">xmlUri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-var">xmlnsUri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span id="local-6989586621679113499"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#basePfBindings"><span class="hs-identifier hs-type">basePfBindings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113499"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113499"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#PrefixNsMap"><span class="hs-identifier hs-type">PrefixNsMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113499"><span class="hs-identifier hs-type">text</span></a></span></span><span>
</span><span id="line-72"></span><span id="basePfBindings"><span class="annot"><span class="annottext">basePfBindings :: PrefixNsMap text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#basePfBindings"><span class="hs-identifier hs-var hs-var">basePfBindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; PrefixNsMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span>
</span><span id="line-73"></span><span>   </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlUri"><span class="hs-identifier hs-var">xmlUri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xml"><span class="hs-identifier hs-var">xml</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-var">xmlnsUri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>   </span><span class="hs-special">]</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span id="local-6989586621679113495"><span id="local-6989586621679113496"><span id="local-6989586621679113497"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#toNamespaced"><span class="hs-identifier hs-type">toNamespaced</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html#NodeClass"><span class="hs-identifier hs-type">NodeClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113497"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113496"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113497"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113496"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113497"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113496"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113495"><span class="hs-identifier hs-type">text</span></a></span></span></span></span><span>
</span><span id="line-80"></span><span id="toNamespaced"><span class="annot"><span class="annottext">toNamespaced :: n c (QName text) text -&gt; n c (NName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#toNamespaced"><span class="hs-identifier hs-var hs-var">toNamespaced</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text -&gt; n c (QName text) text -&gt; n c (NName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) text.
(NodeClass n c, GenericXMLString text, Ord text, Show text) =&gt;
NsPrefixMap text -&gt; n c (QName text) text -&gt; n c (NName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithNamespaces"><span class="hs-identifier hs-var">nodeWithNamespaces</span></a></span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
forall text. (GenericXMLString text, Ord text) =&gt; NsPrefixMap text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#baseNsBindings"><span class="hs-identifier hs-var">baseNsBindings</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span id="local-6989586621679113624"><span id="local-6989586621679113626"><span id="local-6989586621679113627"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithNamespaces"><span class="hs-identifier hs-type">nodeWithNamespaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html#NodeClass"><span class="hs-identifier hs-type">NodeClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113627"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113626"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NsPrefixMap"><span class="hs-identifier hs-type">NsPrefixMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113627"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113626"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113627"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113626"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113624"><span class="hs-identifier hs-type">text</span></a></span></span></span></span><span>
</span><span id="line-84"></span><span id="nodeWithNamespaces"><span class="annot"><span class="annottext">nodeWithNamespaces :: NsPrefixMap text -&gt; n c (QName text) text -&gt; n c (NName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithNamespaces"><span class="hs-identifier hs-var hs-var">nodeWithNamespaces</span></a></span></span><span> </span><span id="local-6989586621679113493"><span class="annot"><span class="annottext">bindings :: NsPrefixMap text
</span><a href="#local-6989586621679113493"><span class="hs-identifier hs-var">bindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, [(QName text, text)], c (n c (QName text) text))
 -&gt; (NName text, [(NName text, text)], c (n c (NName text) text)))
-&gt; n c (QName text) text -&gt; n c (NName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) tag text tag'.
NodeClass n c =&gt;
((tag, [(tag, text)], c (n c tag text))
 -&gt; (tag', [(tag', text)], c (n c tag' text)))
-&gt; n c tag text -&gt; n c tag' text
</span><a href="Text.XML.Expat.Internal.NodeClass.html#modifyElement"><span class="hs-identifier hs-var">modifyElement</span></a></span><span> </span><span class="annot"><span class="annottext">(QName text, [(QName text, text)], c (n c (QName text) text))
-&gt; (NName text, [(NName text, text)], c (n c (NName text) text))
forall (f :: * -&gt; *) (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *).
(Functor f, NodeClass n c) =&gt;
(QName text, [(QName text, text)], f (n c (QName text) text))
-&gt; (NName text, [(NName text, text)], f (n c (NName text) text))
</span><a href="#local-6989586621679113491"><span class="hs-identifier hs-var">namespaceify</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-86"></span><span>    </span><span id="local-6989586621679113491"><span class="annot"><span class="annottext">namespaceify :: (QName text, [(QName text, text)], f (n c (QName text) text))
-&gt; (NName text, [(NName text, text)], f (n c (NName text) text))
</span><a href="#local-6989586621679113491"><span class="hs-identifier hs-var hs-var">namespaceify</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113490"><span class="annot"><span class="annottext">qname :: QName text
</span><a href="#local-6989586621679113490"><span class="hs-identifier hs-var">qname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113489"><span class="annot"><span class="annottext">qattrs :: [(QName text, text)]
</span><a href="#local-6989586621679113489"><span class="hs-identifier hs-var">qattrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113488"><span class="annot"><span class="annottext">qchildren :: f (n c (QName text) text)
</span><a href="#local-6989586621679113488"><span class="hs-identifier hs-var">qchildren</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NName text
</span><a href="#local-6989586621679113487"><span class="hs-identifier hs-var">nname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113486"><span class="hs-identifier hs-var">nattrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (n c (NName text) text)
</span><a href="#local-6989586621679113485"><span class="hs-identifier hs-var">nchildren</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-88"></span><span>        </span><span id="local-6989586621679113484"><span class="annot"><span class="annottext">for :: [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113484"><span class="hs-identifier hs-var hs-var">for</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; [a] -&gt; [b]) -&gt; [a] -&gt; (a -&gt; b) -&gt; [b]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; [a] -&gt; [b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-89"></span><span>        </span><span id="local-6989586621679113482"><span class="annot"><span class="annottext">ffor :: f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="#local-6989586621679113482"><span class="hs-identifier hs-var hs-var">ffor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; f a -&gt; f b) -&gt; f a -&gt; (a -&gt; b) -&gt; f b
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679113481"><span class="annot"><span class="annottext">nsAtts :: [(QName text, text)]
</span><a href="#local-6989586621679113481"><span class="hs-identifier hs-var">nsAtts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113480"><span class="annot"><span class="annottext">otherAtts :: [(QName text, text)]
</span><a href="#local-6989586621679113480"><span class="hs-identifier hs-var">otherAtts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, text) -&gt; Bool)
-&gt; [(QName text, text)]
-&gt; ([(QName text, text)], [(QName text, text)])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">L.partition</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text -&gt; Maybe text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe text -&gt; Bool)
-&gt; ((QName text, text) -&gt; Maybe text) -&gt; (QName text, text) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">QName text -&gt; Maybe text
forall text. QName text -&gt; Maybe text
</span><a href="Text.XML.Expat.Internal.Qualified.html#qnPrefix"><span class="hs-identifier hs-var hs-var">qnPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">(QName text -&gt; Maybe text)
-&gt; ((QName text, text) -&gt; QName text)
-&gt; (QName text, text)
-&gt; Maybe text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; QName text
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113489"><span class="hs-identifier hs-var">qattrs</span></a></span><span>
</span><span id="line-91"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679113476"><span class="annot"><span class="annottext">dfAtt :: [(QName text, text)]
</span><a href="#local-6989586621679113476"><span class="hs-identifier hs-var">dfAtt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113475"><span class="annot"><span class="annottext">normalAtts :: [(QName text, text)]
</span><a href="#local-6989586621679113475"><span class="hs-identifier hs-var">normalAtts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, text) -&gt; Bool)
-&gt; [(QName text, text)]
-&gt; ([(QName text, text)], [(QName text, text)])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">L.partition</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName text -&gt; QName text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text -&gt; QName text
forall text. Maybe text -&gt; text -&gt; QName text
</span><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-var">QName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(QName text -&gt; Bool)
-&gt; ((QName text, text) -&gt; QName text) -&gt; (QName text, text) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; QName text
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113480"><span class="hs-identifier hs-var">otherAtts</span></a></span><span>
</span><span id="line-92"></span><span>        </span><span id="local-6989586621679113473"><span class="annot"><span class="annottext">nsMap :: NsPrefixMap text
</span><a href="#local-6989586621679113473"><span class="hs-identifier hs-var hs-var">nsMap</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; NsPrefixMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Maybe text, Maybe text)] -&gt; NsPrefixMap text)
-&gt; [(Maybe text, Maybe text)] -&gt; NsPrefixMap text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
-&gt; ((QName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113484"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113481"><span class="hs-identifier hs-var">nsAtts</span></a></span><span> </span><span class="annot"><span class="annottext">(((QName text, text) -&gt; (Maybe text, Maybe text))
 -&gt; [(Maybe text, Maybe text)])
-&gt; ((QName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679113472"><span class="annot"><span class="annottext">lp :: text
</span><a href="#local-6989586621679113472"><span class="hs-identifier hs-var">lp</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113471"><span class="annot"><span class="annottext">uri :: text
</span><a href="#local-6989586621679113471"><span class="hs-identifier hs-var">uri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113472"><span class="hs-identifier hs-var">lp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113471"><span class="hs-identifier hs-var">uri</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-comment">-- fixme: when snd q is null, use Nothing</span><span>
</span><span id="line-94"></span><span>        </span><span id="local-6989586621679113470"><span class="annot"><span class="annottext">dfMap :: NsPrefixMap text
</span><a href="#local-6989586621679113470"><span class="hs-identifier hs-var hs-var">dfMap</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; NsPrefixMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Maybe text, Maybe text)] -&gt; NsPrefixMap text)
-&gt; [(Maybe text, Maybe text)] -&gt; NsPrefixMap text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
-&gt; ((QName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113484"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113476"><span class="hs-identifier hs-var">dfAtt</span></a></span><span> </span><span class="annot"><span class="annottext">(((QName text, text) -&gt; (Maybe text, Maybe text))
 -&gt; [(Maybe text, Maybe text)])
-&gt; ((QName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679113469"><span class="annot"><span class="annottext">q :: (QName text, text)
</span><a href="#local-6989586621679113469"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; Maybe text) -&gt; text -&gt; Maybe text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; text
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text)
</span><a href="#local-6989586621679113469"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>        </span><span id="local-6989586621679113468"><span class="annot"><span class="annottext">chldBs :: NsPrefixMap text
</span><a href="#local-6989586621679113468"><span class="hs-identifier hs-var hs-var">chldBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NsPrefixMap text] -&gt; NsPrefixMap text
forall (f :: * -&gt; *) k a.
(Foldable f, Ord k) =&gt;
f (Map k a) -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unions</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113470"><span class="hs-identifier hs-var">dfMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113473"><span class="hs-identifier hs-var">nsMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113493"><span class="hs-identifier hs-var">bindings</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-96"></span><span>    </span><span>
</span><span id="line-97"></span><span>        </span><span id="local-6989586621679113466"><span class="annot"><span class="annottext">trans :: Map (Maybe text) (Maybe text) -&gt; QName text -&gt; NName text
</span><a href="#local-6989586621679113466"><span class="hs-identifier hs-var hs-var">trans</span></a></span></span><span> </span><span id="local-6989586621679113465"><span class="annot"><span class="annottext">bs :: Map (Maybe text) (Maybe text)
</span><a href="#local-6989586621679113465"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span id="local-6989586621679113464"><span class="annot"><span class="annottext">pref :: Maybe text
</span><a href="#local-6989586621679113464"><span class="hs-identifier hs-var">pref</span></a></span></span><span> </span><span id="local-6989586621679113463"><span class="annot"><span class="annottext">qual :: text
</span><a href="#local-6989586621679113463"><span class="hs-identifier hs-var">qual</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe text
</span><a href="#local-6989586621679113464"><span class="hs-identifier hs-var">pref</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; Map (Maybe text) (Maybe text) -&gt; Maybe (Maybe text)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-operator hs-var">`M.lookup`</span></span><span> </span><span class="annot"><span class="annottext">Map (Maybe text) (Maybe text)
</span><a href="#local-6989586621679113465"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-98"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; NName text
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span>
</span><span id="line-99"></span><span>                  </span><span class="annot"><span class="annottext">(String -&gt; NName text) -&gt; String -&gt; NName text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="hs-string">&quot;Namespace prefix referenced but never bound: '&quot;</span></span><span>
</span><span id="line-100"></span><span>                  </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(text -&gt; String) -&gt; (Maybe text -&gt; text) -&gt; Maybe text -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">DM.fromJust</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe text
</span><a href="#local-6989586621679113464"><span class="hs-identifier hs-var">pref</span></a></span><span>
</span><span id="line-101"></span><span>                  </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-102"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679113458"><span class="annot"><span class="annottext">mUri :: Maybe text
</span><a href="#local-6989586621679113458"><span class="hs-identifier hs-var">mUri</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text -&gt; NName text
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe text
</span><a href="#local-6989586621679113458"><span class="hs-identifier hs-var">mUri</span></a></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113463"><span class="hs-identifier hs-var">qual</span></a></span><span>
</span><span id="line-103"></span><span>        </span><span id="local-6989586621679113487"><span class="annot"><span class="annottext">nname :: NName text
</span><a href="#local-6989586621679113487"><span class="hs-identifier hs-var hs-var">nname</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text -&gt; QName text -&gt; NName text
forall text.
(Ord text, Show text) =&gt;
Map (Maybe text) (Maybe text) -&gt; QName text -&gt; NName text
</span><a href="#local-6989586621679113466"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113468"><span class="hs-identifier hs-var">chldBs</span></a></span><span> </span><span class="annot"><span class="annottext">QName text
</span><a href="#local-6989586621679113490"><span class="hs-identifier hs-var">qname</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-comment">-- attributes with no prefix are in the same namespace as the element</span><span>
</span><span id="line-106"></span><span>        </span><span id="local-6989586621679113457"><span class="annot"><span class="annottext">attBs :: NsPrefixMap text
</span><a href="#local-6989586621679113457"><span class="hs-identifier hs-var hs-var">attBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; Maybe text -&gt; NsPrefixMap text -&gt; NsPrefixMap text
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NName text -&gt; Maybe text
forall text. NName text -&gt; Maybe text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nnNamespace"><span class="hs-identifier hs-var hs-var">nnNamespace</span></a></span><span> </span><span class="annot"><span class="annottext">NName text
</span><a href="#local-6989586621679113487"><span class="hs-identifier hs-var">nname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113468"><span class="hs-identifier hs-var">chldBs</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span>
</span><span id="line-108"></span><span>        </span><span id="local-6989586621679113455"><span class="annot"><span class="annottext">transAt :: (QName text, b) -&gt; (NName text, b)
</span><a href="#local-6989586621679113455"><span class="hs-identifier hs-var hs-var">transAt</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113454"><span class="annot"><span class="annottext">qn :: QName text
</span><a href="#local-6989586621679113454"><span class="hs-identifier hs-var">qn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113453"><span class="annot"><span class="annottext">v :: b
</span><a href="#local-6989586621679113453"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NsPrefixMap text -&gt; QName text -&gt; NName text
forall text.
(Ord text, Show text) =&gt;
Map (Maybe text) (Maybe text) -&gt; QName text -&gt; NName text
</span><a href="#local-6989586621679113466"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113457"><span class="hs-identifier hs-var">attBs</span></a></span><span> </span><span class="annot"><span class="annottext">QName text
</span><a href="#local-6989586621679113454"><span class="hs-identifier hs-var">qn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679113453"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>    </span><span>
</span><span id="line-110"></span><span>        </span><span id="local-6989586621679113452"><span class="annot"><span class="annottext">nNsAtts :: [(NName text, text)]
</span><a href="#local-6989586621679113452"><span class="hs-identifier hs-var hs-var">nNsAtts</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, text) -&gt; (NName text, text))
-&gt; [(QName text, text)] -&gt; [(NName text, text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; (NName text, text)
forall b. (QName text, b) -&gt; (NName text, b)
</span><a href="#local-6989586621679113455"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113481"><span class="hs-identifier hs-var">nsAtts</span></a></span><span>
</span><span id="line-111"></span><span>        </span><span id="local-6989586621679113451"><span class="annot"><span class="annottext">nDfAtt :: [(NName text, text)]
</span><a href="#local-6989586621679113451"><span class="hs-identifier hs-var hs-var">nDfAtt</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, text) -&gt; (NName text, text))
-&gt; [(QName text, text)] -&gt; [(NName text, text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; (NName text, text)
forall b. (QName text, b) -&gt; (NName text, b)
</span><a href="#local-6989586621679113455"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113476"><span class="hs-identifier hs-var">dfAtt</span></a></span><span>
</span><span id="line-112"></span><span>        </span><span id="local-6989586621679113450"><span class="annot"><span class="annottext">nNormalAtts :: [(NName text, text)]
</span><a href="#local-6989586621679113450"><span class="hs-identifier hs-var hs-var">nNormalAtts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((QName text, text) -&gt; (NName text, text))
-&gt; [(QName text, text)] -&gt; [(NName text, text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(QName text, text) -&gt; (NName text, text)
forall b. (QName text, b) -&gt; (NName text, b)
</span><a href="#local-6989586621679113455"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113475"><span class="hs-identifier hs-var">normalAtts</span></a></span><span>
</span><span id="line-113"></span><span>        </span><span id="local-6989586621679113486"><span class="annot"><span class="annottext">nattrs :: [(NName text, text)]
</span><a href="#local-6989586621679113486"><span class="hs-identifier hs-var hs-var">nattrs</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[(NName text, text)]] -&gt; [(NName text, text)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113452"><span class="hs-identifier hs-var">nNsAtts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113451"><span class="hs-identifier hs-var">nDfAtt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113450"><span class="hs-identifier hs-var">nNormalAtts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span>        </span><span id="local-6989586621679113485"><span class="annot"><span class="annottext">nchildren :: f (n c (NName text) text)
</span><a href="#local-6989586621679113485"><span class="hs-identifier hs-var hs-var">nchildren</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (n c (QName text) text)
-&gt; (n c (QName text) text -&gt; n c (NName text) text)
-&gt; f (n c (NName text) text)
forall a b. f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="#local-6989586621679113482"><span class="hs-identifier hs-var">ffor</span></a></span><span> </span><span class="annot"><span class="annottext">f (n c (QName text) text)
</span><a href="#local-6989586621679113488"><span class="hs-identifier hs-var">qchildren</span></a></span><span> </span><span class="annot"><span class="annottext">((n c (QName text) text -&gt; n c (NName text) text)
 -&gt; f (n c (NName text) text))
-&gt; (n c (QName text) text -&gt; n c (NName text) text)
-&gt; f (n c (NName text) text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text -&gt; n c (QName text) text -&gt; n c (NName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) text.
(NodeClass n c, GenericXMLString text, Ord text, Show text) =&gt;
NsPrefixMap text -&gt; n c (QName text) text -&gt; n c (NName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithNamespaces"><span class="hs-identifier hs-var">nodeWithNamespaces</span></a></span><span> </span><span class="annot"><span class="annottext">NsPrefixMap text
</span><a href="#local-6989586621679113468"><span class="hs-identifier hs-var">chldBs</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span id="local-6989586621679113446"><span id="local-6989586621679113447"><span id="local-6989586621679113448"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#fromNamespaced"><span class="hs-identifier hs-type">fromNamespaced</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html#NodeClass"><span class="hs-identifier hs-type">NodeClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113448"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113447"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679113447"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-118"></span><span>                  </span><span class="annot"><a href="#local-6989586621679113448"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113447"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113448"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113447"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113446"><span class="hs-identifier hs-type">text</span></a></span></span></span></span><span>
</span><span id="line-119"></span><span id="fromNamespaced"><span class="annot"><span class="annottext">fromNamespaced :: n c (NName text) text -&gt; n c (QName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#fromNamespaced"><span class="hs-identifier hs-var hs-var">fromNamespaced</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; PrefixNsMap text
-&gt; n c (NName text) text
-&gt; n c (QName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) text.
(NodeClass n c, GenericXMLString text, Ord text, Functor c) =&gt;
Int
-&gt; PrefixNsMap text
-&gt; n c (NName text) text
-&gt; n c (QName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithQualifiers"><span class="hs-identifier hs-var">nodeWithQualifiers</span></a></span><span> </span><span class="annot"><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
forall text. (GenericXMLString text, Ord text) =&gt; NsPrefixMap text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#basePfBindings"><span class="hs-identifier hs-var">basePfBindings</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span id="local-6989586621679113566"><span id="local-6989586621679113567"><span id="local-6989586621679113568"><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithQualifiers"><span class="hs-identifier hs-type">nodeWithQualifiers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.NodeClass.html#NodeClass"><span class="hs-identifier hs-type">NodeClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113568"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113567"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Expat.SAX.html#GenericXMLString"><span class="hs-identifier hs-type">GenericXMLString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621679113567"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-122"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-123"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#PrefixNsMap"><span class="hs-identifier hs-type">PrefixNsMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span>
</span><span id="line-124"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113568"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113567"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span>
</span><span id="line-125"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679113568"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113567"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679113566"><span class="hs-identifier hs-type">text</span></a></span></span></span></span><span>
</span><span id="line-126"></span><span id="nodeWithQualifiers"><span class="annot"><span class="annottext">nodeWithQualifiers :: Int
-&gt; PrefixNsMap text
-&gt; n c (NName text) text
-&gt; n c (QName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithQualifiers"><span class="hs-identifier hs-var hs-var">nodeWithQualifiers</span></a></span></span><span> </span><span id="local-6989586621679113444"><span class="annot"><span class="annottext">cntr :: Int
</span><a href="#local-6989586621679113444"><span class="hs-identifier hs-var">cntr</span></a></span></span><span> </span><span id="local-6989586621679113443"><span class="annot"><span class="annottext">bindings :: PrefixNsMap text
</span><a href="#local-6989586621679113443"><span class="hs-identifier hs-var">bindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((NName text, [(NName text, text)], c (n c (NName text) text))
 -&gt; (QName text, [(QName text, text)], c (n c (QName text) text)))
-&gt; n c (NName text) text -&gt; n c (QName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) tag text tag'.
NodeClass n c =&gt;
((tag, [(tag, text)], c (n c tag text))
 -&gt; (tag', [(tag', text)], c (n c tag' text)))
-&gt; n c tag text -&gt; n c tag' text
</span><a href="Text.XML.Expat.Internal.NodeClass.html#modifyElement"><span class="hs-identifier hs-var">modifyElement</span></a></span><span> </span><span class="annot"><span class="annottext">(NName text, [(NName text, text)], c (n c (NName text) text))
-&gt; (QName text, [(QName text, text)], c (n c (QName text) text))
forall (f :: * -&gt; *) (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *).
(Functor f, NodeClass n c) =&gt;
(NName text, [(NName text, text)], f (n c (NName text) text))
-&gt; (QName text, [(QName text, text)], f (n c (QName text) text))
</span><a href="#local-6989586621679113442"><span class="hs-identifier hs-var">namespaceify</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>    </span><span id="local-6989586621679113442"><span class="annot"><span class="annottext">namespaceify :: (NName text, [(NName text, text)], f (n c (NName text) text))
-&gt; (QName text, [(QName text, text)], f (n c (QName text) text))
</span><a href="#local-6989586621679113442"><span class="hs-identifier hs-var hs-var">namespaceify</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113441"><span class="annot"><span class="annottext">nname :: NName text
</span><a href="#local-6989586621679113441"><span class="hs-identifier hs-var">nname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113440"><span class="annot"><span class="annottext">nattrs :: [(NName text, text)]
</span><a href="#local-6989586621679113440"><span class="hs-identifier hs-var">nattrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113439"><span class="annot"><span class="annottext">nchildren :: f (n c (NName text) text)
</span><a href="#local-6989586621679113439"><span class="hs-identifier hs-var">nchildren</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName text
</span><a href="#local-6989586621679113438"><span class="hs-identifier hs-var">qname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113437"><span class="hs-identifier hs-var">qattrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">f (n c (QName text) text)
</span><a href="#local-6989586621679113436"><span class="hs-identifier hs-var">qchildren</span></a></span><span class="hs-special">)</span><span> </span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-130"></span><span>        </span><span id="local-6989586621679113435"><span class="annot"><span class="annottext">for :: [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113435"><span class="hs-identifier hs-var hs-var">for</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; [a] -&gt; [b]) -&gt; [a] -&gt; (a -&gt; b) -&gt; [b]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; [a] -&gt; [b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-131"></span><span>        </span><span id="local-6989586621679113434"><span class="annot"><span class="annottext">ffor :: f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="#local-6989586621679113434"><span class="hs-identifier hs-var hs-var">ffor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a -&gt; b) -&gt; f a -&gt; f b) -&gt; f a -&gt; (a -&gt; b) -&gt; f b
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; f a -&gt; f b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-132"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679113433"><span class="annot"><span class="annottext">nsAtts :: [(NName text, text)]
</span><a href="#local-6989586621679113433"><span class="hs-identifier hs-var">nsAtts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113432"><span class="annot"><span class="annottext">otherAtts :: [(NName text, text)]
</span><a href="#local-6989586621679113432"><span class="hs-identifier hs-var">otherAtts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((NName text, text) -&gt; Bool)
-&gt; [(NName text, text)]
-&gt; ([(NName text, text)], [(NName text, text)])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">L.partition</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe text -&gt; Maybe text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-var">xmlnsUri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe text -&gt; Bool)
-&gt; ((NName text, text) -&gt; Maybe text) -&gt; (NName text, text) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NName text -&gt; Maybe text
forall text. NName text -&gt; Maybe text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nnNamespace"><span class="hs-identifier hs-var hs-var">nnNamespace</span></a></span><span> </span><span class="annot"><span class="annottext">(NName text -&gt; Maybe text)
-&gt; ((NName text, text) -&gt; NName text)
-&gt; (NName text, text)
-&gt; Maybe text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NName text, text) -&gt; NName text
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113440"><span class="hs-identifier hs-var">nattrs</span></a></span><span>
</span><span id="line-133"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679113431"><span class="annot"><span class="annottext">dfAtt :: [(NName text, text)]
</span><a href="#local-6989586621679113431"><span class="hs-identifier hs-var">dfAtt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113430"><span class="annot"><span class="annottext">normalAtts :: [(NName text, text)]
</span><a href="#local-6989586621679113430"><span class="hs-identifier hs-var">normalAtts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((NName text, text) -&gt; Bool)
-&gt; [(NName text, text)]
-&gt; ([(NName text, text)], [(NName text, text)])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">L.partition</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">NName text -&gt; NName text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Maybe text -&gt; text -&gt; NName text
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NName text -&gt; Bool)
-&gt; ((NName text, text) -&gt; NName text) -&gt; (NName text, text) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(NName text, text) -&gt; NName text
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113432"><span class="hs-identifier hs-var">otherAtts</span></a></span><span>
</span><span id="line-134"></span><span>        </span><span id="local-6989586621679113429"><span class="annot"><span class="annottext">nsMap :: PrefixNsMap text
</span><a href="#local-6989586621679113429"><span class="hs-identifier hs-var hs-var">nsMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; PrefixNsMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Maybe text, Maybe text)] -&gt; PrefixNsMap text)
-&gt; [(Maybe text, Maybe text)] -&gt; PrefixNsMap text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
-&gt; ((NName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113435"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113433"><span class="hs-identifier hs-var">nsAtts</span></a></span><span> </span><span class="annot"><span class="annottext">(((NName text, text) -&gt; (Maybe text, Maybe text))
 -&gt; [(Maybe text, Maybe text)])
-&gt; ((NName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span class="hs-identifier">_</span><span> </span><span id="local-6989586621679113428"><span class="annot"><span class="annottext">lp :: text
</span><a href="#local-6989586621679113428"><span class="hs-identifier hs-var">lp</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113427"><span class="annot"><span class="annottext">uri :: text
</span><a href="#local-6989586621679113427"><span class="hs-identifier hs-var">uri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113427"><span class="hs-identifier hs-var">uri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113428"><span class="hs-identifier hs-var">lp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>        </span><span id="local-6989586621679113426"><span class="annot"><span class="annottext">dfMap :: PrefixNsMap text
</span><a href="#local-6989586621679113426"><span class="hs-identifier hs-var hs-var">dfMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe text, Maybe text)] -&gt; PrefixNsMap text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">M.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Maybe text, Maybe text)] -&gt; PrefixNsMap text)
-&gt; [(Maybe text, Maybe text)] -&gt; PrefixNsMap text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
-&gt; ((NName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. [a] -&gt; (a -&gt; b) -&gt; [b]
</span><a href="#local-6989586621679113435"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113431"><span class="hs-identifier hs-var">dfAtt</span></a></span><span>  </span><span class="annot"><span class="annottext">(((NName text, text) -&gt; (Maybe text, Maybe text))
 -&gt; [(Maybe text, Maybe text)])
-&gt; ((NName text, text) -&gt; (Maybe text, Maybe text))
-&gt; [(Maybe text, Maybe text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113425"><span class="annot"><span class="annottext">uri :: text
</span><a href="#local-6989586621679113425"><span class="hs-identifier hs-var">uri</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
</span><a href="#local-6989586621679113425"><span class="hs-identifier hs-var">uri</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">text -&gt; Maybe text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">text
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlns"><span class="hs-identifier hs-var">xmlns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>        </span><span id="local-6989586621679113424"><span class="annot"><span class="annottext">chldBs :: PrefixNsMap text
</span><a href="#local-6989586621679113424"><span class="hs-identifier hs-var hs-var">chldBs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PrefixNsMap text] -&gt; PrefixNsMap text
forall (f :: * -&gt; *) k a.
(Foldable f, Ord k) =&gt;
f (Map k a) -&gt; Map k a
</span><span class="hs-identifier hs-var">M.unions</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113426"><span class="hs-identifier hs-var">dfMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113429"><span class="hs-identifier hs-var">nsMap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113443"><span class="hs-identifier hs-var">bindings</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-137"></span><span>    </span><span>
</span><span id="line-138"></span><span>        </span><span id="local-6989586621679113423"><span class="annot"><span class="annottext">trans :: (a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; NName s
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), QName s)
</span><a href="#local-6989586621679113423"><span class="hs-identifier hs-var hs-var">trans</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113422"><span class="annot"><span class="annottext">i :: a
</span><a href="#local-6989586621679113422"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113421"><span class="annot"><span class="annottext">bs :: Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113421"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113420"><span class="annot"><span class="annottext">as :: [(NName s, s)]
</span><a href="#local-6989586621679113420"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-type">NName</span></a></span><span> </span><span id="local-6989586621679113419"><span class="annot"><span class="annottext">nspace :: Maybe s
</span><a href="#local-6989586621679113419"><span class="hs-identifier hs-var">nspace</span></a></span></span><span> </span><span id="local-6989586621679113418"><span class="annot"><span class="annottext">qual :: s
</span><a href="#local-6989586621679113418"><span class="hs-identifier hs-var">qual</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-139"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679113419"><span class="hs-identifier hs-var">nspace</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe s -&gt; Map (Maybe s) (Maybe s) -&gt; Maybe (Maybe s)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-operator hs-var">`M.lookup`</span></span><span> </span><span class="annot"><span class="annottext">Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113421"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-140"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-141"></span><span>                            </span><span id="local-6989586621679113417"><span class="annot"><span class="annottext">pfx :: s
</span><a href="#local-6989586621679113417"><span class="hs-identifier hs-var hs-var">pfx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; s
forall s. GenericXMLString s =&gt; String -&gt; s
</span><a href="Text.XML.Expat.SAX.html#gxFromString"><span class="hs-identifier hs-var">gxFromString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; s) -&gt; String -&gt; s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;ns&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679113422"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-142"></span><span>                            </span><span id="local-6989586621679113416"><span class="annot"><span class="annottext">bsN :: Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113416"><span class="hs-identifier hs-var hs-var">bsN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe s
-&gt; Maybe s -&gt; Map (Maybe s) (Maybe s) -&gt; Map (Maybe s) (Maybe s)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679113419"><span class="hs-identifier hs-var">nspace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Maybe s
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679113417"><span class="hs-identifier hs-var">pfx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113421"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-143"></span><span>                            </span><span id="local-6989586621679113415"><span class="annot"><span class="annottext">asN :: [(NName s, s)]
</span><a href="#local-6989586621679113415"><span class="hs-identifier hs-var hs-var">asN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe s -&gt; s -&gt; NName s
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; Maybe s
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">s
forall text. GenericXMLString text =&gt; text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#xmlnsUri"><span class="hs-identifier hs-var">xmlnsUri</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679113417"><span class="hs-identifier hs-var">pfx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe s -&gt; s
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">DM.fromJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679113419"><span class="hs-identifier hs-var">nspace</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NName s, s) -&gt; [(NName s, s)] -&gt; [(NName s, s)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(NName s, s)]
</span><a href="#local-6989586621679113420"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-144"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; NName s
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), QName s)
</span><a href="#local-6989586621679113423"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679113422"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113416"><span class="hs-identifier hs-var">bsN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName s, s)]
</span><a href="#local-6989586621679113415"><span class="hs-identifier hs-var">asN</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe s -&gt; s -&gt; NName s
forall text. Maybe text -&gt; text -&gt; NName text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#NName"><span class="hs-identifier hs-var">NName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679113419"><span class="hs-identifier hs-var">nspace</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679113418"><span class="hs-identifier hs-var">qual</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679113413"><span class="annot"><span class="annottext">pfx :: Maybe s
</span><a href="#local-6989586621679113413"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679113422"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map (Maybe s) (Maybe s)
</span><a href="#local-6989586621679113421"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName s, s)]
</span><a href="#local-6989586621679113420"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe s -&gt; s -&gt; QName s
forall text. Maybe text -&gt; text -&gt; QName text
</span><a href="Text.XML.Expat.Internal.Qualified.html#QName"><span class="hs-identifier hs-var">QName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe s
</span><a href="#local-6989586621679113413"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679113418"><span class="hs-identifier hs-var">qual</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>        </span><span id="local-6989586621679113412"><span class="annot"><span class="annottext">transAt :: (a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; (NName s, b)
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), (QName s, b))
</span><a href="#local-6989586621679113412"><span class="hs-identifier hs-var hs-var">transAt</span></a></span></span><span> </span><span id="local-6989586621679113411"><span class="annot"><span class="annottext">ibs :: (a, Map (Maybe s) (Maybe s), [(NName s, s)])
</span><a href="#local-6989586621679113411"><span class="hs-identifier hs-var">ibs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113410"><span class="annot"><span class="annottext">nn :: NName s
</span><a href="#local-6989586621679113410"><span class="hs-identifier hs-var">nn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113409"><span class="annot"><span class="annottext">v :: b
</span><a href="#local-6989586621679113409"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679113408"><span class="annot"><span class="annottext">ibs' :: (a, Map (Maybe s) (Maybe s), [(NName s, s)])
</span><a href="#local-6989586621679113408"><span class="hs-identifier hs-var">ibs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113407"><span class="annot"><span class="annottext">qn :: QName s
</span><a href="#local-6989586621679113407"><span class="hs-identifier hs-var">qn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; NName s
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), QName s)
forall s a.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; NName s
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), QName s)
</span><a href="#local-6989586621679113423"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="annot"><span class="annottext">(a, Map (Maybe s) (Maybe s), [(NName s, s)])
</span><a href="#local-6989586621679113411"><span class="hs-identifier hs-var">ibs</span></a></span><span> </span><span class="annot"><span class="annottext">NName s
</span><a href="#local-6989586621679113410"><span class="hs-identifier hs-var">nn</span></a></span><span>
</span><span id="line-147"></span><span>                              </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, Map (Maybe s) (Maybe s), [(NName s, s)])
</span><a href="#local-6989586621679113408"><span class="hs-identifier hs-var">ibs'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName s
</span><a href="#local-6989586621679113407"><span class="hs-identifier hs-var">qn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679113409"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>    </span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679113406"><span class="annot"><span class="annottext">i' :: Int
</span><a href="#local-6989586621679113406"><span class="hs-identifier hs-var">i'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113405"><span class="annot"><span class="annottext">bs' :: PrefixNsMap text
</span><a href="#local-6989586621679113405"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113404"><span class="annot"><span class="annottext">as' :: [(NName text, text)]
</span><a href="#local-6989586621679113404"><span class="hs-identifier hs-var">as'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113438"><span class="annot"><span class="annottext">qname :: QName text
</span><a href="#local-6989586621679113438"><span class="hs-identifier hs-var">qname</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int, PrefixNsMap text, [(NName text, text)])
-&gt; NName text
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]), QName text)
forall s a.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; NName s
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), QName s)
</span><a href="#local-6989586621679113423"><span class="hs-identifier hs-var">trans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113444"><span class="hs-identifier hs-var">cntr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113424"><span class="hs-identifier hs-var">chldBs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NName text
</span><a href="#local-6989586621679113441"><span class="hs-identifier hs-var">nname</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679113403"><span class="annot"><span class="annottext">i'' :: Int
</span><a href="#local-6989586621679113403"><span class="hs-identifier hs-var">i''</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621679113402"><span class="annot"><span class="annottext">bs'' :: PrefixNsMap text
</span><a href="#local-6989586621679113402"><span class="hs-identifier hs-var">bs''</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621679113401"><span class="annot"><span class="annottext">as'' :: [(NName text, text)]
</span><a href="#local-6989586621679113401"><span class="hs-identifier hs-var">as''</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>   </span><span id="local-6989586621679113400"><span class="annot"><span class="annottext">qNsAtts :: [(QName text, text)]
</span><a href="#local-6989586621679113400"><span class="hs-identifier hs-var">qNsAtts</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, PrefixNsMap text, [(NName text, text)])
 -&gt; (NName text, text)
 -&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
     (QName text, text)))
-&gt; (Int, PrefixNsMap text, [(NName text, text)])
-&gt; [(NName text, text)]
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    [(QName text, text)])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><span class="hs-identifier hs-var">L.mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">(Int, PrefixNsMap text, [(NName text, text)])
-&gt; (NName text, text)
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    (QName text, text))
forall a s b.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; (NName s, b)
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), (QName s, b))
</span><a href="#local-6989586621679113412"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113406"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113405"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113404"><span class="hs-identifier hs-var">as'</span></a></span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113433"><span class="hs-identifier hs-var">nsAtts</span></a></span><span>
</span><span id="line-152"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679113398"><span class="annot"><span class="annottext">i''' :: Int
</span><a href="#local-6989586621679113398"><span class="hs-identifier hs-var">i'''</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679113397"><span class="annot"><span class="annottext">bs''' :: PrefixNsMap text
</span><a href="#local-6989586621679113397"><span class="hs-identifier hs-var">bs'''</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679113396"><span class="annot"><span class="annottext">as''' :: [(NName text, text)]
</span><a href="#local-6989586621679113396"><span class="hs-identifier hs-var">as'''</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>  </span><span id="local-6989586621679113395"><span class="annot"><span class="annottext">qDfAtt :: [(QName text, text)]
</span><a href="#local-6989586621679113395"><span class="hs-identifier hs-var">qDfAtt</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, PrefixNsMap text, [(NName text, text)])
 -&gt; (NName text, text)
 -&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
     (QName text, text)))
-&gt; (Int, PrefixNsMap text, [(NName text, text)])
-&gt; [(NName text, text)]
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    [(QName text, text)])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><span class="hs-identifier hs-var">L.mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">(Int, PrefixNsMap text, [(NName text, text)])
-&gt; (NName text, text)
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    (QName text, text))
forall a s b.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; (NName s, b)
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), (QName s, b))
</span><a href="#local-6989586621679113412"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113403"><span class="hs-identifier hs-var">i''</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113402"><span class="hs-identifier hs-var">bs''</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113401"><span class="hs-identifier hs-var">as''</span></a></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113431"><span class="hs-identifier hs-var">dfAtt</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679113394"><span class="annot"><span class="annottext">i'''' :: Int
</span><a href="#local-6989586621679113394"><span class="hs-identifier hs-var">i''''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113393"><span class="annot"><span class="annottext">bs'''' :: PrefixNsMap text
</span><a href="#local-6989586621679113393"><span class="hs-identifier hs-var">bs''''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113392"><span class="annot"><span class="annottext">as'''' :: [(NName text, text)]
</span><a href="#local-6989586621679113392"><span class="hs-identifier hs-var">as''''</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679113391"><span class="annot"><span class="annottext">qNormalAtts :: [(QName text, text)]
</span><a href="#local-6989586621679113391"><span class="hs-identifier hs-var">qNormalAtts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, PrefixNsMap text, [(NName text, text)])
 -&gt; (NName text, text)
 -&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
     (QName text, text)))
-&gt; (Int, PrefixNsMap text, [(NName text, text)])
-&gt; [(NName text, text)]
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    [(QName text, text)])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><span class="hs-identifier hs-var">L.mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">(Int, PrefixNsMap text, [(NName text, text)])
-&gt; (NName text, text)
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    (QName text, text))
forall a s b.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; (NName s, b)
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), (QName s, b))
</span><a href="#local-6989586621679113412"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113398"><span class="hs-identifier hs-var">i'''</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113397"><span class="hs-identifier hs-var">bs'''</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113396"><span class="hs-identifier hs-var">as'''</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113430"><span class="hs-identifier hs-var">normalAtts</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span>                       </span><span id="local-6989586621679113390"><span class="annot"><span class="annottext">qas :: [(QName text, text)]
</span><a href="#local-6989586621679113390"><span class="hs-identifier hs-var">qas</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Int, PrefixNsMap text, [(NName text, text)])
 -&gt; (NName text, text)
 -&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
     (QName text, text)))
-&gt; (Int, PrefixNsMap text, [(NName text, text)])
-&gt; [(NName text, text)]
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    [(QName text, text)])
forall (t :: * -&gt; *) a b c.
Traversable t =&gt;
(a -&gt; b -&gt; (a, c)) -&gt; a -&gt; t b -&gt; (a, t c)
</span><span class="hs-identifier hs-var">L.mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">(Int, PrefixNsMap text, [(NName text, text)])
-&gt; (NName text, text)
-&gt; ((Int, PrefixNsMap text, [(NName text, text)]),
    (QName text, text))
forall a s b.
(Num a, Show a, Ord s, GenericXMLString s) =&gt;
(a, Map (Maybe s) (Maybe s), [(NName s, s)])
-&gt; (NName s, b)
-&gt; ((a, Map (Maybe s) (Maybe s), [(NName s, s)]), (QName s, b))
</span><a href="#local-6989586621679113412"><span class="hs-identifier hs-var">transAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113394"><span class="hs-identifier hs-var">i''''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113393"><span class="hs-identifier hs-var">bs''''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113392"><span class="hs-identifier hs-var">as''''</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(NName text, text)]
</span><a href="#local-6989586621679113392"><span class="hs-identifier hs-var">as''''</span></a></span><span>
</span><span id="line-155"></span><span>        </span><span id="local-6989586621679113437"><span class="annot"><span class="annottext">qattrs :: [(QName text, text)]
</span><a href="#local-6989586621679113437"><span class="hs-identifier hs-var hs-var">qattrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[(QName text, text)]] -&gt; [(QName text, text)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113400"><span class="hs-identifier hs-var">qNsAtts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113395"><span class="hs-identifier hs-var">qDfAtt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113391"><span class="hs-identifier hs-var">qNormalAtts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(QName text, text)]
</span><a href="#local-6989586621679113390"><span class="hs-identifier hs-var">qas</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>    </span><span>
</span><span id="line-157"></span><span>        </span><span id="local-6989586621679113436"><span class="annot"><span class="annottext">qchildren :: f (n c (QName text) text)
</span><a href="#local-6989586621679113436"><span class="hs-identifier hs-var hs-var">qchildren</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (n c (NName text) text)
-&gt; (n c (NName text) text -&gt; n c (QName text) text)
-&gt; f (n c (QName text) text)
forall a b. f a -&gt; (a -&gt; b) -&gt; f b
</span><a href="#local-6989586621679113434"><span class="hs-identifier hs-var">ffor</span></a></span><span> </span><span class="annot"><span class="annottext">f (n c (NName text) text)
</span><a href="#local-6989586621679113439"><span class="hs-identifier hs-var">nchildren</span></a></span><span> </span><span class="annot"><span class="annottext">((n c (NName text) text -&gt; n c (QName text) text)
 -&gt; f (n c (QName text) text))
-&gt; (n c (NName text) text -&gt; n c (QName text) text)
-&gt; f (n c (QName text) text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; PrefixNsMap text
-&gt; n c (NName text) text
-&gt; n c (QName text) text
forall (n :: (* -&gt; *) -&gt; * -&gt; * -&gt; *) (c :: * -&gt; *) text.
(NodeClass n c, GenericXMLString text, Ord text, Functor c) =&gt;
Int
-&gt; PrefixNsMap text
-&gt; n c (NName text) text
-&gt; n c (QName text) text
</span><a href="Text.XML.Expat.Internal.Namespaced.html#nodeWithQualifiers"><span class="hs-identifier hs-var">nodeWithQualifiers</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679113394"><span class="hs-identifier hs-var">i''''</span></a></span><span> </span><span class="annot"><span class="annottext">PrefixNsMap text
</span><a href="#local-6989586621679113393"><span class="hs-identifier hs-var">bs''''</span></a></span><span>
</span><span id="line-158"></span></pre></body></html>