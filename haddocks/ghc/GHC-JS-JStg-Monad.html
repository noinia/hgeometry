<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.JS.JStg.Monad</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.12.2: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.JS.JStg.Monad.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 2001</td></tr><tr><th>License</th><td>BSD-style (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Jeffrey Young  &lt;jeffrey.young@iohk.io&gt;
                Luite Stegeman &lt;luite.stegeman@iohk.io&gt;
                Sylvain Henry  &lt;sylvain.henry@iohk.io&gt;
                Josh Meredith  &lt;josh.meredith@iohk.io&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>GHC2021</td></tr></table><p class="caption">GHC.JS.JStg.Monad</p></div><div id="description"><p class="caption">Description</p><div class="doc"><ul><li><p>Domain and Purpose</p><p>GHC.JS.JStg.Monad defines the computational environment for the eDSL that
 we use to write the JS Backend's RTS. Its purpose is to ensure unique
 identifiers are generated throughout the backend and that we can use the
 host language to ensure references are not mixed.</p></li><li><p>Strategy</p><p>The monad is a straightforward state monad which holds an environment
holds a pointer to a prefix to tag identifiers with and an infinite
stream of identifiers.</p></li><li><p>Usage</p><p>One should almost never need to directly use the functions in this
module. Instead one should opt to use the combinators in <code><a href="GHC-JS.html#v:Make" title="GHC.JS">Make</a></code>,
the sole exception to this is the <code class="inline-code">withTag</code> function which is used to
change the prefix of identifiers for a given computation. For example,
the rts uses this function to tag all identifiers generated by the RTS
code as RTS_N, where N is some unique.</p></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:runJSM">runJSM</a> :: JEnv -&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a -&gt; a</li><li class="src short"><span class="keyword">type</span> <a href="#t:JSM">JSM</a> a = <a href="../transformers-0.6.1.2-38b1/Control-Monad-Trans-State-Strict.html#t:State" title="Control.Monad.Trans.State.Strict">State</a> JEnv a</li><li class="src short"><a href="#v:withTag">withTag</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a -&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a</li><li class="src short"><a href="#v:newIdent">newIdent</a> :: <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> <a href="GHC-JS-Ident.html#t:Ident" title="GHC.JS.Ident">Ident</a></li><li class="src short"><a href="#v:initJSM">initJSM</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> JEnv</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:runJSM" class="def">runJSM</a> :: JEnv -&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a -&gt; a <a href="src/GHC.JS.JStg.Monad.html#runJSM" class="link">Source</a> <a href="#v:runJSM" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:JSM" class="def">JSM</a> a = <a href="../transformers-0.6.1.2-38b1/Control-Monad-Trans-State-Strict.html#t:State" title="Control.Monad.Trans.State.Strict">State</a> JEnv a <a href="src/GHC.JS.JStg.Monad.html#JSM" class="link">Source</a> <a href="#t:JSM" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withTag" class="def">withTag</a> <a href="src/GHC.JS.JStg.Monad.html#withTag" class="link">Source</a> <a href="#v:withTag" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a></td><td class="doc"><p>new name to tag with</p></td></tr><tr><td class="src">-&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a</td><td class="doc"><p>action to run with new tags</p></td></tr><tr><td class="src">-&gt; <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> a</td><td class="doc"><p>result</p></td></tr></table></div><div class="doc"><p>tag the name generater with a prefix for the monadic action.</p></div></div><div class="top"><p class="src"><a id="v:newIdent" class="def">newIdent</a> :: <a href="GHC-JS-JStg-Monad.html#t:JSM" title="GHC.JS.JStg.Monad">JSM</a> <a href="GHC-JS-Ident.html#t:Ident" title="GHC.JS.Ident">Ident</a> <a href="src/GHC.JS.JStg.Monad.html#newIdent" class="link">Source</a> <a href="#v:newIdent" class="selflink">#</a></p><div class="doc"><p>generate a fresh Ident</p></div></div><div class="top"><p class="src"><a id="v:initJSM" class="def">initJSM</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> JEnv <a href="src/GHC.JS.JStg.Monad.html#initJSM" class="link">Source</a> <a href="#v:initJSM" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>