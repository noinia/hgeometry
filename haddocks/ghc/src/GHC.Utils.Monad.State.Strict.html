<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE UnboxedTuples #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="annot"><span class="hs-comment">-- | A state monad which is strict in its state.</span></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html"><span class="hs-identifier">GHC.Utils.Monad.State.Strict</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * The State monad</span></span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier">State</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier">State</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State%27"><span class="hs-identifier">State'</span></a></span><span> </span><span class="hs-comment">{- for deriving via purposes only -}</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#state"><span class="hs-identifier">state</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#evalState"><span class="hs-identifier">evalState</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#execState"><span class="hs-identifier">execState</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#runState"><span class="hs-identifier">runState</span></a></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Operations</span></span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#get"><span class="hs-identifier">get</span></a></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#gets"><span class="hs-identifier">gets</span></a></span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#put"><span class="hs-identifier">put</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#modify"><span class="hs-identifier">modify</span></a></span><span>
</span><span id="line-17"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Exts.html"><span class="hs-identifier">GHC.Exts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">oneShot</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-comment">{- Note [Strict State monad]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A State monad can be strict in many ways. Which kind of strictness do we mean?

First of, since we represent the result pair as an unboxed pair, this State
monad is strict in the sense of &quot;Control.Monad.Trans.State.Strict&quot;: The
computations and the sequencing there-of (through 'Applicative and 'Monad'
instances) are forced strictly.

Beyond the manual unboxing of one level (which CPR could achieve similarly,
yet perhaps a bit less reliably), our 'State' is even stricter than the
transformers version:
It's also strict in the state `s` (but still lazy in the value `a`). What this
means is that whenever callers examine the state component (perhaps through
'runState'), they will find that the `s` has already been evaluated.

This additional strictness maintained in a single place, by the ubiquitous
'State' pattern synonym, by forcing the state component *after* any state action
has been run. The INVARIANT is:

&gt; Any `s` that makes it into the unboxed pair representation is evaluated.

This invariant has another nice effect: Because the evaluatedness is quite
apparent, Nested CPR will try to unbox the state component `s` nestedly if
feasible. Detecting evaluatedness of nested components is a necessary
condition for Nested CPR to trigger; see the user's guide entry on that:
https://ghc.gitlab.haskell.org/ghc/doc/users_guide/using-optimisation.html#ghc-flag--fcpr-anal

Note that this doesn't have any effects on whether Nested CPR will unbox the `a`
component (which is still lazy by default). The user still has to use the
`return $!` idiom from the user's guide to encourage Nested CPR to unbox the `a`
result of a stateful computation.
-}</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">-- | A state monad which is strict in the state `s`, but lazy in the value `a`.</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- See Note [Strict State monad] for the particular notion of strictness and</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- implementation details.</span><span>
</span><span id="line-61"></span><span class="hs-keyword">newtype</span><span> </span><span id="State"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span></span><span> </span><span id="local-6989586621682459251"><span class="annot"><a href="#local-6989586621682459251"><span class="hs-identifier hs-type">s</span></a></span></span><span> </span><span id="local-6989586621682459252"><span class="annot"><a href="#local-6989586621682459252"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="State%27"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State%27"><span class="hs-identifier hs-var">State'</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runState%27"><span class="annot"><span class="annottext">forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var hs-var">runState'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682459251"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="#local-6989586621682459252"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459251"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621682459257"><span id="local-6989586621682459258"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="#local-6989586621682459258"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">#)</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459257"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459258"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">-- This pattern synonym makes the monad eta-expand,</span><span>
</span><span id="line-67"></span><span class="hs-comment">-- which as a very beneficial effect on compiler performance</span><span>
</span><span id="line-68"></span><span class="hs-comment">-- See #18202.</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- See Note [The one-shot state monad trick] in GHC.Utils.Monad</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- It also implements the particular notion of strictness of this monad;</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- see Note [Strict State monad].</span><span>
</span><span id="line-72"></span><span class="hs-keyword">pattern</span><span> </span><span id="State"><span id="%24mState"><span id="%24bState"><span class="annot"><span class="annottext">$mState :: forall {r} {s} {a}.
State s a -&gt; ((s -&gt; (# a, s #)) -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bState :: forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var hs-var hs-var">State</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621682459348"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State%27"><span class="hs-identifier hs-type">State'</span></a></span><span> </span><span id="local-6989586621682459348"><span class="annot"><a href="#local-6989586621682459348"><span class="hs-identifier hs-var">m</span></a></span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span id="local-6989586621682459349"><span class="annot"><span class="annottext">s -&gt; (# a, s #)
</span><a href="#local-6989586621682459349"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# a, s #)) -&gt; State s a
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State%27"><span class="hs-identifier hs-var">State'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; (# a, s #)) -&gt; s -&gt; (# a, s #)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-identifier hs-var">oneShot</span></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# a, s #)) -&gt; s -&gt; (# a, s #))
-&gt; (s -&gt; (# a, s #)) -&gt; s -&gt; (# a, s #)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459350"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459350"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(# a, s #) -&gt; (# a, s #)
forall a s. (# a, s #) -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#forceState"><span class="hs-identifier hs-var">forceState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">s -&gt; (# a, s #)
</span><a href="#local-6989586621682459349"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459350"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | Forces the state component of the unboxed representation pair of 'State'.</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- See Note [Strict State monad]. This is The Place doing the forcing!</span><span>
</span><span id="line-78"></span><span id="local-6989586621682459266"><span id="local-6989586621682459267"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#forceState"><span class="hs-identifier hs-type">forceState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="#local-6989586621682459266"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459267"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><a href="#local-6989586621682459266"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459267"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">#)</span></span></span><span>
</span><span id="line-79"></span><span id="forceState"><span class="annot"><span class="annottext">forceState :: forall a s. (# a, s #) -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#forceState"><span class="hs-identifier hs-var hs-var">forceState</span></a></span></span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459352"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459352"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682459353"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459353"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459352"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459353"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-comment">-- See Note [The one-shot state monad trick] for why we don't derive this.</span><span>
</span><span id="line-82"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682459276"><span id="local-6989586621682459356"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459276"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621682459360"><span class="annot"><span class="annottext">fmap :: forall a b. (a -&gt; b) -&gt; State s a -&gt; State s b
</span><span class="hs-identifier hs-var hs-var hs-var">fmap</span></span></span><span> </span><span id="local-6989586621682459361"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621682459361"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682459362"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459362"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# b, s #)) -&gt; State s b
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# b, s #)) -&gt; State s b) -&gt; (s -&gt; (# b, s #)) -&gt; State s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459363"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459363"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459362"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459363"><span class="hs-identifier hs-var">s</span></a></span><span>  </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459364"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459364"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459365"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459365"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621682459361"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459364"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459365"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">fmap</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682459291"><span id="local-6989586621682459371"><span id="local-6989586621682459376"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459291"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-87"></span><span>  </span><span id="local-6989586621682459379"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; State s a
</span><span class="hs-identifier hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621682459380"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459380"><span class="hs-identifier hs-var">x</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# a, s #)) -&gt; State s a
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# a, s #)) -&gt; State s a) -&gt; (s -&gt; (# a, s #)) -&gt; State s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459381"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459381"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459380"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459381"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-88"></span><span>  </span><span id="local-6989586621682459382"><span class="annot"><span class="annottext">State s (a -&gt; b)
</span><a href="#local-6989586621682459382"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682459383"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. State s (a -&gt; b) -&gt; State s a -&gt; State s b
</span><span class="hs-operator hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span id="local-6989586621682459384"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459384"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# b, s #)) -&gt; State s b
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# b, s #)) -&gt; State s b) -&gt; (s -&gt; (# b, s #)) -&gt; State s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459385"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459385"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s (a -&gt; b) -&gt; s -&gt; (# a -&gt; b, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s (a -&gt; b)
</span><a href="#local-6989586621682459382"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459385"><span class="hs-identifier hs-var">s</span></a></span><span>  </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459386"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621682459386"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459387"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459387"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459384"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459387"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459388"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459388"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459389"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459389"><span class="hs-identifier hs-var">s''</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-91"></span><span>                             </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621682459386"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459388"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459389"><span class="hs-identifier hs-var">s''</span></a></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621682459390"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459390"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682459391"><span class="annot"><span class="annottext">*&gt; :: forall a b. State s a -&gt; State s b -&gt; State s b
</span><span class="hs-operator hs-var hs-var hs-var">*&gt;</span></span></span><span> </span><span id="local-6989586621682459392"><span class="annot"><span class="annottext">State s b
</span><a href="#local-6989586621682459392"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# b, s #)) -&gt; State s b
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# b, s #)) -&gt; State s b) -&gt; (s -&gt; (# b, s #)) -&gt; State s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459393"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459393"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459390"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459393"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459394"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459394"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s b -&gt; s -&gt; (# b, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s b
</span><a href="#local-6989586621682459392"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459394"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459395"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682459395"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459396"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459396"><span class="hs-identifier hs-var">s''</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-95"></span><span>                             </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682459395"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459396"><span class="hs-identifier hs-var">s''</span></a></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><span class="hs-pragma hs-type">pure</span></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">*&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682459304"><span id="local-6989586621682459402"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459304"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-101"></span><span>  </span><span id="local-6989586621682459406"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459406"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682459407"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. State s a -&gt; (a -&gt; State s b) -&gt; State s b
</span><span class="hs-operator hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621682459408"><span class="annot"><span class="annottext">a -&gt; State s b
</span><a href="#local-6989586621682459408"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# b, s #)) -&gt; State s b
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# b, s #)) -&gt; State s b) -&gt; (s -&gt; (# b, s #)) -&gt; State s b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459409"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459409"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459406"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459409"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459410"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459410"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682459411"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459411"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">State s b -&gt; s -&gt; (# b, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; State s b
</span><a href="#local-6989586621682459408"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459410"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459411"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621682459413"><span class="annot"><span class="annottext">&gt;&gt; :: forall a b. State s a -&gt; State s b -&gt; State s b
</span><span class="hs-operator hs-var hs-var hs-var">(&gt;&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; State s b -&gt; State s b
forall a b. State s a -&gt; State s b -&gt; State s b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">(*&gt;)</span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;&gt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&gt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span id="local-6989586621682459309"><span id="local-6989586621682459310"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#state"><span class="hs-identifier hs-type">state</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459309"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459310"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459309"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459309"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459310"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-108"></span><span id="state"><span class="annot"><span class="annottext">state :: forall s a. (s -&gt; (a, s)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#state"><span class="hs-identifier hs-var hs-var">state</span></a></span></span><span> </span><span id="local-6989586621682459414"><span class="annot"><span class="annottext">s -&gt; (a, s)
</span><a href="#local-6989586621682459414"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# a, s #)) -&gt; State s a
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# a, s #)) -&gt; State s a) -&gt; (s -&gt; (# a, s #)) -&gt; State s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459415"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459415"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">s -&gt; (a, s)
</span><a href="#local-6989586621682459414"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459415"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682459416"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459416"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459417"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459417"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459416"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459417"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="local-6989586621682459313"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#get"><span class="hs-identifier hs-type">get</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459313"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459313"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-111"></span><span id="get"><span class="annot"><span class="annottext">get :: forall s. State s s
</span><a href="GHC.Utils.Monad.State.Strict.html#get"><span class="hs-identifier hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# s, s #)) -&gt; State s s
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# s, s #)) -&gt; State s s) -&gt; (s -&gt; (# s, s #)) -&gt; State s s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459418"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459418"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459418"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459418"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span id="local-6989586621682459315"><span id="local-6989586621682459316"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#gets"><span class="hs-identifier hs-type">gets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459315"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459316"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459315"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459316"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-114"></span><span id="gets"><span class="annot"><span class="annottext">gets :: forall s a. (s -&gt; a) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#gets"><span class="hs-identifier hs-var hs-var">gets</span></a></span></span><span> </span><span id="local-6989586621682459419"><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621682459419"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# a, s #)) -&gt; State s a
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# a, s #)) -&gt; State s a) -&gt; (s -&gt; (# a, s #)) -&gt; State s a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459420"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459420"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">s -&gt; a
</span><a href="#local-6989586621682459419"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459420"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459420"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621682459319"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#put"><span class="hs-identifier hs-type">put</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682459319"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459319"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-117"></span><span id="put"><span class="annot"><span class="annottext">put :: forall s. s -&gt; State s ()
</span><a href="GHC.Utils.Monad.State.Strict.html#put"><span class="hs-identifier hs-var hs-var">put</span></a></span></span><span> </span><span id="local-6989586621682459421"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459421"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# (), s #)) -&gt; State s ()
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# (), s #)) -&gt; State s ())
-&gt; (s -&gt; (# (), s #)) -&gt; State s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459421"><span class="hs-identifier hs-var">s'</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span id="local-6989586621682459321"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#modify"><span class="hs-identifier hs-type">modify</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459321"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459321"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459321"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-120"></span><span id="modify"><span class="annot"><span class="annottext">modify :: forall s. (s -&gt; s) -&gt; State s ()
</span><a href="GHC.Utils.Monad.State.Strict.html#modify"><span class="hs-identifier hs-var hs-var">modify</span></a></span></span><span> </span><span id="local-6989586621682459422"><span class="annot"><span class="annottext">s -&gt; s
</span><a href="#local-6989586621682459422"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; (# (), s #)) -&gt; State s ()
forall s a. (s -&gt; (# a, s #)) -&gt; State s a
</span><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-var">State</span></a></span><span> </span><span class="annot"><span class="annottext">((s -&gt; (# (), s #)) -&gt; State s ())
-&gt; (s -&gt; (# (), s #)) -&gt; State s ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682459423"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459423"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(#</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s -&gt; s
</span><a href="#local-6989586621682459422"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459423"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">#)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span id="local-6989586621682459323"><span id="local-6989586621682459324"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#evalState"><span class="hs-identifier hs-type">evalState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459323"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459324"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459323"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459324"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-123"></span><span id="evalState"><span class="annot"><span class="annottext">evalState :: forall s a. State s a -&gt; s -&gt; a
</span><a href="GHC.Utils.Monad.State.Strict.html#evalState"><span class="hs-identifier hs-var hs-var">evalState</span></a></span></span><span> </span><span id="local-6989586621682459424"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459424"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682459425"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459425"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459424"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459425"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459426"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459426"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459426"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span id="local-6989586621682459327"><span id="local-6989586621682459328"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#execState"><span class="hs-identifier hs-type">execState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459327"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459328"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459327"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459327"><span class="hs-identifier hs-type">s</span></a></span></span></span><span>
</span><span id="line-126"></span><span id="execState"><span class="annot"><span class="annottext">execState :: forall s a. State s a -&gt; s -&gt; s
</span><a href="GHC.Utils.Monad.State.Strict.html#execState"><span class="hs-identifier hs-var hs-var">execState</span></a></span></span><span> </span><span id="local-6989586621682459427"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459427"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682459428"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459428"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459427"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459428"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(#</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682459429"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459429"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459429"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621682459331"><span id="local-6989586621682459332"><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#runState"><span class="hs-identifier hs-type">runState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459331"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682459332"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682459331"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682459332"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682459331"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-129"></span><span id="runState"><span class="annot"><span class="annottext">runState :: forall s a. State s a -&gt; s -&gt; (a, s)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState"><span class="hs-identifier hs-var hs-var">runState</span></a></span></span><span> </span><span id="local-6989586621682459430"><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459430"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621682459431"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459431"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">State s a -&gt; s -&gt; (# a, s #)
forall s a. State s a -&gt; s -&gt; (# a, s #)
</span><a href="GHC.Utils.Monad.State.Strict.html#runState%27"><span class="hs-identifier hs-var">runState'</span></a></span><span> </span><span class="annot"><span class="annottext">State s a
</span><a href="#local-6989586621682459430"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459431"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">(#</span><span> </span><span id="local-6989586621682459432"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459432"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682459433"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459433"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-special">#)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682459432"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621682459433"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span></pre></body></html>