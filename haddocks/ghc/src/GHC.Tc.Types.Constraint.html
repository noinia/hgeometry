<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | This module defines types and simple operations over constraints, as used</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- in the type-checker and constraint solver.</span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html"><span class="hs-identifier">GHC.Tc.Types.Constraint</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>        </span><span class="hs-comment">-- Constraints</span><span>
</span><span id="line-10"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier">Xi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier">Ct</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier">Cts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#singleCt"><span class="hs-identifier">singleCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#listToCts"><span class="hs-identifier">listToCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctsElts"><span class="hs-identifier">ctsElts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#consCts"><span class="hs-identifier">consCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#snocCts"><span class="hs-identifier">snocCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#extendCtsList"><span class="hs-identifier">extendCtsList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyCts"><span class="hs-identifier">isEmptyCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyCts"><span class="hs-identifier">emptyCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#andCts"><span class="hs-identifier">andCts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctsPreds"><span class="hs-identifier">ctsPreds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isPendingScDictCt"><span class="hs-identifier">isPendingScDictCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isPendingScDict"><span class="hs-identifier">isPendingScDict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingScDict_maybe"><span class="hs-identifier">pendingScDict_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#superClassesMightHelp"><span class="hs-identifier">superClassesMightHelp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getPendingWantedScs"><span class="hs-identifier">getPendingWantedScs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isWantedCt"><span class="hs-identifier">isWantedCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isGivenCt"><span class="hs-identifier">isGivenCt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isTopLevelUserTypeError"><span class="hs-identifier">isTopLevelUserTypeError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#containsUserTypeError"><span class="hs-identifier">containsUserTypeError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier">getUserTypeErrorMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isUnsatisfiableCt_maybe"><span class="hs-identifier">isUnsatisfiableCt_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier">ctEvidence</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#updCtEvidence"><span class="hs-identifier">updCtEvidence</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier">ctLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier">ctPred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavour"><span class="hs-identifier">ctFlavour</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier">ctEqRel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier">ctOrigin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctRewriters"><span class="hs-identifier">ctRewriters</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvId"><span class="hs-identifier">ctEvId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wantedEvId_maybe"><span class="hs-identifier">wantedEvId_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkTcEqPredLikeEv"><span class="hs-identifier">mkTcEqPredLikeEv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkNonCanonical"><span class="hs-identifier">mkNonCanonical</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkGivens"><span class="hs-identifier">mkGivens</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCt"><span class="hs-identifier">tyCoVarsOfCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCts"><span class="hs-identifier">tyCoVarsOfCts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtList"><span class="hs-identifier">tyCoVarsOfCtList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtsList"><span class="hs-identifier">tyCoVarsOfCtsList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#boundOccNamesOfWC"><span class="hs-identifier">boundOccNamesOfWC</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>        </span><span class="hs-comment">-- Particular forms of constraint</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier">EqCt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtEvidence"><span class="hs-identifier">eqCtEvidence</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtLHS"><span class="hs-identifier">eqCtLHS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier">DictCt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dictCtEvidence"><span class="hs-identifier">dictCtEvidence</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dictCtPred"><span class="hs-identifier">dictCtPred</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier">IrredCt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#irredCtEvidence"><span class="hs-identifier">irredCtEvidence</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkIrredCt"><span class="hs-identifier">mkIrredCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctIrredCt"><span class="hs-identifier">ctIrredCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#irredCtPred"><span class="hs-identifier">irredCtPred</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>        </span><span class="hs-comment">-- QCInst</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier">QCInst</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingScInst_maybe"><span class="hs-identifier">pendingScInst_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier">ExpansionFuel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#doNotExpand"><span class="hs-identifier">doNotExpand</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#consumeFuel"><span class="hs-identifier">consumeFuel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier">pendingFuel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPrecondition"><span class="hs-identifier">assertFuelPrecondition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPreconditionStrict"><span class="hs-identifier">assertFuelPreconditionStrict</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier">CtIrredReason</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier">isInsolubleReason</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier">CheckTyEqResult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier">CheckTyEqProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier">cteProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterClearOccursCheck"><span class="hs-identifier">cterClearOccursCheck</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteOK"><span class="hs-identifier">cteOK</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier">cteImpredicative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteTypeFamily"><span class="hs-identifier">cteTypeFamily</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteCoercionHole"><span class="hs-identifier">cteCoercionHole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier">cteInsolubleOccurs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier">cteSolubleOccurs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterSetOccursCheckSoluble"><span class="hs-identifier">cterSetOccursCheckSoluble</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteConcrete"><span class="hs-identifier">cteConcrete</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteSkolemEscape"><span class="hs-identifier">cteSkolemEscape</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#impredicativeProblem"><span class="hs-identifier">impredicativeProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleOccursProblem"><span class="hs-identifier">insolubleOccursProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#solubleOccursProblem"><span class="hs-identifier">solubleOccursProblem</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasNoProblem"><span class="hs-identifier">cterHasNoProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-identifier">cterHasProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblem"><span class="hs-identifier">cterHasOnlyProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblems"><span class="hs-identifier">cterHasOnlyProblems</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterRemoveProblem"><span class="hs-identifier">cterRemoveProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOccursCheck"><span class="hs-identifier">cterHasOccursCheck</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterFromKind"><span class="hs-identifier">cterFromKind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier">CanEqLHS</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHS_maybe"><span class="hs-identifier">canEqLHS_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canTyFamEqLHS_maybe"><span class="hs-identifier">canTyFamEqLHS_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSKind"><span class="hs-identifier">canEqLHSKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSType"><span class="hs-identifier">canEqLHSType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanEqLHS"><span class="hs-identifier">eqCanEqLHS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier">Hole</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleSort"><span class="hs-identifier">HoleSort</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier">isOutOfScopeHole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier">DelayedError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteError"><span class="hs-identifier">NotConcreteError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteReason"><span class="hs-identifier">NotConcreteReason</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier">WantedConstraints</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleWC"><span class="hs-identifier">insolubleWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier">emptyWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyWC"><span class="hs-identifier">isEmptyWC</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isSolvedWC"><span class="hs-identifier">isSolvedWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#andWC"><span class="hs-identifier">andWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unionsWC"><span class="hs-identifier">unionsWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkSimpleWC"><span class="hs-identifier">mkSimpleWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkImplicWC"><span class="hs-identifier">mkImplicWC</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addInsols"><span class="hs-identifier">addInsols</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dropMisleading"><span class="hs-identifier">dropMisleading</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addSimples"><span class="hs-identifier">addSimples</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addImplics"><span class="hs-identifier">addImplics</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addHoles"><span class="hs-identifier">addHoles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addNotConcreteError"><span class="hs-identifier">addNotConcreteError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addDelayedErrors"><span class="hs-identifier">addDelayedErrors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWC"><span class="hs-identifier">tyCoVarsOfWC</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWCList"><span class="hs-identifier">tyCoVarsOfWCList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleWantedCt"><span class="hs-identifier">insolubleWantedCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleCt"><span class="hs-identifier">insolubleCt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleIrredCt"><span class="hs-identifier">insolubleIrredCt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleImplic"><span class="hs-identifier">insolubleImplic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#nonDefaultableTyVarsOfWC"><span class="hs-identifier">nonDefaultableTyVarsOfWC</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier">Implication</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#implicationPrototype"><span class="hs-identifier">implicationPrototype</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkTelescopeSkol"><span class="hs-identifier">checkTelescopeSkol</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier">ImplicStatus</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier">isInsolubleStatus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isSolvedStatus"><span class="hs-identifier">isSolvedStatus</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#UserGiven"><span class="hs-identifier">UserGiven</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getUserGivensFromImplics"><span class="hs-identifier">getUserGivensFromImplics</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier">HasGivenEqs</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkImplicationInvariants"><span class="hs-identifier">checkImplicationInvariants</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>        </span><span class="hs-comment">-- CtLocEnv</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLocEnv"><span class="hs-identifier">CtLocEnv</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#setCtLocEnvLoc"><span class="hs-identifier">setCtLocEnvLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#setCtLocEnvLvl"><span class="hs-identifier">setCtLocEnvLvl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#getCtLocEnvLoc"><span class="hs-identifier">getCtLocEnvLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#getCtLocEnvLvl"><span class="hs-identifier">getCtLocEnvLvl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#ctLocEnvInGeneratedCode"><span class="hs-identifier">ctLocEnvInGeneratedCode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-comment">-- CtEvidence</span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier">CtEvidence</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TcEvDest"><span class="hs-identifier">TcEvDest</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isWanted"><span class="hs-identifier">isWanted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isGiven"><span class="hs-identifier">isGiven</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier">ctEvPred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier">ctEvLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvOrigin"><span class="hs-identifier">ctEvOrigin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEqRel"><span class="hs-identifier">ctEvEqRel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvExpr"><span class="hs-identifier">ctEvExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvTerm"><span class="hs-identifier">ctEvTerm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier">ctEvCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier">ctEvEvId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier">ctEvRewriters</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvUnique"><span class="hs-identifier">ctEvUnique</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tcEvDestUnique"><span class="hs-identifier">tcEvDestUnique</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteRole"><span class="hs-identifier">ctEvRewriteRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteEqRel"><span class="hs-identifier">ctEvRewriteEqRel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#setCtEvPredType"><span class="hs-identifier">setCtEvPredType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#setCtEvLoc"><span class="hs-identifier">setCtEvLoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvList"><span class="hs-identifier">tyCoVarsOfCtEvList</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEv"><span class="hs-identifier">tyCoVarsOfCtEv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvsList"><span class="hs-identifier">tyCoVarsOfCtEvsList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span>        </span><span class="hs-comment">-- RewriterSet</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier">RewriterSet</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier">emptyRewriterSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyRewriterSet"><span class="hs-identifier">isEmptyRewriterSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>           </span><span class="hs-comment">-- exported concretely only for zonkRewriterSet</span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addRewriter"><span class="hs-identifier">addRewriter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unitRewriterSet"><span class="hs-identifier">unitRewriterSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unionRewriterSet"><span class="hs-identifier">unionRewriterSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#rewriterSetFromCts"><span class="hs-identifier">rewriterSetFromCts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wrapType"><span class="hs-identifier">wrapType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier">CtFlavour</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier">ctEvFlavour</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier">CtFlavourRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvFlavourRole"><span class="hs-identifier">ctEvFlavourRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavourRole"><span class="hs-identifier">ctFlavourRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtFlavourRole"><span class="hs-identifier">eqCtFlavourRole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier">eqCanRewrite</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier">eqCanRewriteFR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-comment">-- Pretty printing</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier">pprEvVarTheta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVars"><span class="hs-identifier">pprEvVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVarWithType"><span class="hs-identifier">pprEvVarWithType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html"><span class="hs-identifier">GHC.Tc.Types.Origin</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html"><span class="hs-identifier">GHC.Tc.Types.CtLoc</span></a></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html"><span class="hs-identifier">GHC.Utils.FV</span></a></span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Constants.html"><span class="hs-identifier">GHC.Utils.Constants</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Constants.html#debugIsOn"><span class="hs-identifier">debugIsOn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Coerce.html"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">msum</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isJust</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">-- these are for CheckTyEqResult</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Word.html"><span class="hs-identifier">Data.Word</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Word8</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">intersperse</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
*                       Canonical constraints                          *
*                                                                      *
*   These are the constraints the low-level simplifier works with      *
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | A 'Xi'-type is one that has been fully rewritten with respect</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- to the inert set; that is, it has been rewritten by the algorithm</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- in GHC.Tc.Solver.Rewrite. (Historical note: 'Xi', for years and years,</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- meant that a type was type-family-free. It does *not* mean this</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- any more.)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">type</span><span> </span><span id="Xi"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-var">Xi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">type</span><span> </span><span id="Cts"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-var">Cts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- | Says how many layers of superclasses can we expand.</span><span>
</span><span id="line-162"></span><span class="hs-comment">--   Invariant: ExpansionFuel should always be &gt;= 0</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- see Note [Expanding Recursive Superclasses and ExpansionFuel]</span><span>
</span><span id="line-164"></span><span class="hs-keyword">type</span><span> </span><span id="ExpansionFuel"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-var">ExpansionFuel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | Do not expand superclasses any further</span></span><span>
</span><span id="line-167"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#doNotExpand"><span class="hs-identifier hs-type">doNotExpand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span>
</span><span id="line-168"></span><span id="doNotExpand"><span class="annot"><span class="annottext">doNotExpand :: ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#doNotExpand"><span class="hs-identifier hs-var hs-var">doNotExpand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-comment">-- | Consumes one unit of fuel.</span><span>
</span><span id="line-171"></span><span class="hs-comment">--   Precondition: fuel &gt; 0</span><span>
</span><span id="line-172"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#consumeFuel"><span class="hs-identifier hs-type">consumeFuel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span>
</span><span id="line-173"></span><span id="consumeFuel"><span class="annot"><span class="annottext">consumeFuel :: ExpansionFuel -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#consumeFuel"><span class="hs-identifier hs-var hs-var">consumeFuel</span></a></span></span><span> </span><span id="local-6989586621682722726"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722726"><span class="hs-identifier hs-var">fuel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; ExpansionFuel
forall a. ExpansionFuel -&gt; a -&gt; a
</span><a href="GHC.Tc.Types.Constraint.html#assertFuelPreconditionStrict"><span class="hs-identifier hs-var">assertFuelPreconditionStrict</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722726"><span class="hs-identifier hs-var">fuel</span></a></span><span> </span><span class="annot"><span class="annottext">(ExpansionFuel -&gt; ExpansionFuel) -&gt; ExpansionFuel -&gt; ExpansionFuel
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722726"><span class="hs-identifier hs-var">fuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; ExpansionFuel
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">1</span></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><span class="hs-comment">-- | Returns True if we have any fuel left for superclass expansion</span></span><span>
</span><span id="line-176"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-type">pendingFuel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-177"></span><span id="pendingFuel"><span class="annot"><span class="annottext">pendingFuel :: ExpansionFuel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-var hs-var">pendingFuel</span></a></span></span><span> </span><span id="local-6989586621682722727"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722727"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722727"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insufficientFuelError"><span class="hs-identifier hs-type">insufficientFuelError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-180"></span><span id="insufficientFuelError"><span class="annot"><span class="annottext">insufficientFuelError :: SDoc
</span><a href="GHC.Tc.Types.Constraint.html#insufficientFuelError"><span class="hs-identifier hs-var hs-var">insufficientFuelError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Superclass expansion fuel should be &gt; 0&quot;</span></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="annot"><span class="hs-comment">-- | asserts if fuel is non-negative</span></span><span>
</span><span id="line-183"></span><span id="local-6989586621682722731"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPrecondition"><span class="hs-identifier hs-type">assertFuelPrecondition</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682722731"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682722731"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-184"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPrecondition"><span class="hs-pragma hs-type">assertFuelPrecondition</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-185"></span><span id="assertFuelPrecondition"><span class="annot"><span class="annottext">assertFuelPrecondition :: forall a. ExpansionFuel -&gt; a -&gt; a
</span><a href="GHC.Tc.Types.Constraint.html#assertFuelPrecondition"><span class="hs-identifier hs-var hs-var">assertFuelPrecondition</span></a></span></span><span> </span><span id="local-6989586621682722736"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722736"><span class="hs-identifier hs-var">fuel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; a -&gt; a
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722736"><span class="hs-identifier hs-var">fuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Tc.Types.Constraint.html#insufficientFuelError"><span class="hs-identifier hs-var">insufficientFuelError</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="annot"><span class="hs-comment">-- | asserts if fuel is strictly greater than 0</span></span><span>
</span><span id="line-188"></span><span id="local-6989586621682722305"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPreconditionStrict"><span class="hs-identifier hs-type">assertFuelPreconditionStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682722305"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682722305"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-189"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#assertFuelPreconditionStrict"><span class="hs-pragma hs-type">assertFuelPreconditionStrict</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-190"></span><span id="assertFuelPreconditionStrict"><span class="annot"><span class="annottext">assertFuelPreconditionStrict :: forall a. ExpansionFuel -&gt; a -&gt; a
</span><a href="GHC.Tc.Types.Constraint.html#assertFuelPreconditionStrict"><span class="hs-identifier hs-var hs-var">assertFuelPreconditionStrict</span></a></span></span><span> </span><span id="local-6989586621682722740"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722740"><span class="hs-identifier hs-var">fuel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; a -&gt; a
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-var">pendingFuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682722740"><span class="hs-identifier hs-var">fuel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Tc.Types.Constraint.html#insufficientFuelError"><span class="hs-identifier hs-var">insufficientFuelError</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">data</span><span> </span><span id="Ct"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-var">Ct</span></a></span></span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CDictCan"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-var">CDictCan</span></a></span></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CIrredCan"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-var">CIrredCan</span></a></span></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span>      </span><span class="hs-comment">-- A &quot;irreducible&quot; constraint (non-canonical)</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CEqCan"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-var">CEqCan</span></a></span></span><span>        </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span>         </span><span class="hs-comment">-- A canonical equality constraint</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CQuantCan"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-var">CQuantCan</span></a></span></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier hs-type">QCInst</span></a></span><span>       </span><span class="hs-comment">-- A quantified constraint</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CNonCanonical"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-var">CNonCanonical</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>   </span><span class="hs-comment">-- See Note [NonCanonical Semantics] in GHC.Tc.Solver.Monad</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">--------------- DictCt --------------</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="hs-keyword">data</span><span> </span><span id="DictCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-var">DictCt</span></a></span></span><span>   </span><span class="hs-comment">-- e.g.  Num ty</span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DictCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-var">DictCt</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="di_ev"><span class="annot"><span class="annottext">DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var hs-var">di_ev</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>  </span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="di_cls"><span class="annot"><span class="annottext">DictCt -&gt; Class
</span><a href="GHC.Tc.Types.Constraint.html#di_cls"><span class="hs-identifier hs-var hs-var">di_cls</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span>
</span><span id="line-205"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="di_tys"><span class="annot"><span class="annottext">DictCt -&gt; [Xi]
</span><a href="GHC.Tc.Types.Constraint.html#di_tys"><span class="hs-identifier hs-var hs-var">di_tys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-type">Xi</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- di_tys are rewritten w.r.t. inerts, so Xi</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="di_pend_sc"><span class="annot"><span class="annottext">DictCt -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#di_pend_sc"><span class="hs-identifier hs-var hs-var">di_pend_sc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span>
</span><span id="line-208"></span><span>               </span><span class="hs-comment">-- See Note [The superclass story] in GHC.Tc.Solver.Dict</span><span>
</span><span id="line-209"></span><span>               </span><span class="hs-comment">-- See Note [Expanding Recursive Superclasses and ExpansionFuel] in GHC.Tc.Solver</span><span>
</span><span id="line-210"></span><span>               </span><span class="hs-comment">-- Invariants: di_pend_sc &gt; 0 &lt;=&gt;</span><span>
</span><span id="line-211"></span><span>               </span><span class="hs-comment">--                    (a) di_cls has superclasses</span><span>
</span><span id="line-212"></span><span>               </span><span class="hs-comment">--                    (b) those superclasses are not yet explored</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dictCtEvidence"><span class="hs-identifier hs-type">dictCtEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-216"></span><span id="dictCtEvidence"><span class="annot"><span class="annottext">dictCtEvidence :: DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#dictCtEvidence"><span class="hs-identifier hs-var hs-var">dictCtEvidence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dictCtPred"><span class="hs-identifier hs-type">dictCtPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span>
</span><span id="line-219"></span><span id="dictCtPred"><span class="annot"><span class="annottext">dictCtPred :: DictCt -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#dictCtPred"><span class="hs-identifier hs-var hs-var">dictCtPred</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_cls :: DictCt -&gt; Class
</span><a href="GHC.Tc.Types.Constraint.html#di_cls"><span class="hs-identifier hs-var">di_cls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722752"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682722752"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">di_tys :: DictCt -&gt; [Xi]
</span><a href="GHC.Tc.Types.Constraint.html#di_tys"><span class="hs-identifier hs-var">di_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722753"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682722753"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Class -&gt; [Xi] -&gt; Xi
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682722752"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682722753"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span>  </span><span id="local-6989586621682722760"><span class="annot"><span class="annottext">ppr :: DictCt -&gt; SDoc
</span><a href="#local-6989586621682722760"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682722762"><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682722762"><span class="hs-identifier hs-var">dict</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DictCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-var">CDictCan</span></a></span><span> </span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682722762"><span class="hs-identifier hs-var">dict</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="hs-comment">--------------- EqCt --------------</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">{- Note [Canonical equalities]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
An EqCt is a canonical equality constraint, one that can live in the inert set,
and that can be used to rewrite other constrtaints. It satisfies these invariants:
  * (TyEq:OC) lhs does not occur in rhs (occurs check)
              Note [EqCt occurs check]
  * (TyEq:F) rhs has no foralls
      (this avoids substituting a forall for the tyvar in other types)
  * (TyEq:K) typeKind lhs `tcEqKind` typeKind rhs; Note [Ct kind invariant]
  * (TyEq:N) If the equality is representational, rhs is not headed by a saturated
    application of a newtype TyCon. See GHC.Tc.Solver.Equality
    Note [No top-level newtypes on RHS of representational equalities].
    (Applies only when constructor of newtype is in scope.)
  * (TyEq:U) An EqCt is not immediately unifiable. If we can unify a:=ty, we
    will not form an EqCt (a ~ ty).
  * (TyEq:CH) rhs does not mention any coercion holes that resulted from fixing up
    a hetero-kinded equality.  See Note [Equalities with incompatible kinds] in
    GHC.Tc.Solver.Equality, wrinkle (EIK2)

These invariants ensure that the EqCts in inert_eqs constitute a terminating
generalised substitution. See Note [inert_eqs: the inert equalities]
in GHC.Tc.Solver.InertSet for what these words mean!

Note [EqCt occurs check]
~~~~~~~~~~~~~~~~~~~~~~~~~~
A CEqCan relates a CanEqLHS (a type variable or type family applications) on
its left to an arbitrary type on its right. It is used for rewriting.
Because it is used for rewriting, it would be disastrous if the RHS
were to mention the LHS: this would cause a loop in rewriting.

We thus perform an occurs-check. There is, of course, some subtlety:

* For type variables, the occurs-check looks deeply including kinds of
  type variables. This is because a CEqCan over a meta-variable is
  also used to inform unification, in
  GHC.Tc.Solver.Monad.checkTouchableTyVarEq. If the LHS appears
  anywhere in the RHS, at all, unification will create an infinite
  structure which is bad.

* For type family applications, the occurs-check is shallow; it looks
  only in places where we might rewrite. (Specifically, it does not
  look in kinds or coercions.) An occurrence of the LHS in, say, an
  RHS coercion is OK, as we do not rewrite in coercions. No loop to
  be found.

  You might also worry about the possibility that a type family
  application LHS doesn't exactly appear in the RHS, but something
  that reduces to the LHS does. Yet that can't happen: the RHS is
  already inert, with all type family redexes reduced. So a simple
  syntactic check is just fine.

The occurs check is performed in GHC.Tc.Utils.Unify.checkTyEqRhs
and forms condition T3 in Note [Extending the inert equalities]
in GHC.Tc.Solver.InertSet.
-}</span><span>
</span><span id="line-281"></span><span>
</span><span id="line-282"></span><span class="hs-keyword">data</span><span> </span><span id="EqCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-var">EqCt</span></a></span></span><span> </span><span class="hs-comment">-- An equality constraint; see Note [Canonical equalities]</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EqCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-var">EqCt</span></a></span></span><span> </span><span class="hs-special">{</span><span>  </span><span class="hs-comment">-- CanEqLHS ~ rhs</span><span>
</span><span id="line-284"></span><span>      </span><span id="eq_ev"><span class="annot"><span class="annottext">EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var hs-var">eq_ev</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-285"></span><span>      </span><span id="eq_lhs"><span class="annot"><span class="annottext">EqCt -&gt; CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#eq_lhs"><span class="hs-identifier hs-var hs-var">eq_lhs</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-286"></span><span>      </span><span id="eq_rhs"><span class="annot"><span class="annottext">EqCt -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#eq_rhs"><span class="hs-identifier hs-var hs-var">eq_rhs</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-type">Xi</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- See invariants above</span><span>
</span><span id="line-287"></span><span>      </span><span id="eq_eq_rel"><span class="annot"><span class="annottext">EqCt -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#eq_eq_rel"><span class="hs-identifier hs-var hs-var">eq_eq_rel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span>       </span><span class="hs-comment">-- INVARIANT: cc_eq_rel = ctEvEqRel cc_ev</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-comment">-- | A 'CanEqLHS' is a type that can appear on the left of a canonical</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- equality: a type variable or /exactly-saturated/ type family application.</span><span>
</span><span id="line-292"></span><span class="hs-keyword">data</span><span> </span><span id="CanEqLHS"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-var">CanEqLHS</span></a></span></span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TyVarLHS"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-var">TyVarLHS</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TyFamLHS"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-var">TyFamLHS</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ TyCon of the family</span></span><span>
</span><span id="line-295"></span><span>             </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-type">Xi</span></a></span><span class="hs-special">]</span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Arguments, /exactly saturating/ the family</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-298"></span><span>  </span><span id="local-6989586621682722776"><span class="annot"><span class="annottext">ppr :: CanEqLHS -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-type">TyVarLHS</span></a></span><span> </span><span id="local-6989586621682722777"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682722777"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682722777"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-type">TyFamLHS</span></a></span><span> </span><span id="local-6989586621682722778"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682722778"><span class="hs-identifier hs-var">fam_tc</span></a></span></span><span> </span><span id="local-6989586621682722779"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682722779"><span class="hs-identifier hs-var">fam_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Xi] -&gt; Xi
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682722778"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682722779"><span class="hs-identifier hs-var">fam_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtEvidence"><span class="hs-identifier hs-type">eqCtEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-302"></span><span id="eqCtEvidence"><span class="annot"><span class="annottext">eqCtEvidence :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eqCtEvidence"><span class="hs-identifier hs-var hs-var">eqCtEvidence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtLHS"><span class="hs-identifier hs-type">eqCtLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span>
</span><span id="line-305"></span><span id="eqCtLHS"><span class="annot"><span class="annottext">eqCtLHS :: EqCt -&gt; CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#eqCtLHS"><span class="hs-identifier hs-var hs-var">eqCtLHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqCt -&gt; CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#eq_lhs"><span class="hs-identifier hs-var">eq_lhs</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-comment">--------------- IrredCt --------------</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="hs-keyword">data</span><span> </span><span id="IrredCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-var">IrredCt</span></a></span></span><span>    </span><span class="hs-comment">-- These stand for yet-unusable predicates</span><span>
</span><span id="line-310"></span><span>                </span><span class="hs-comment">-- See Note [CIrredCan constraints]</span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IrredCt"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-var">IrredCt</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ir_ev"><span class="annot"><span class="annottext">IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var hs-var">ir_ev</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>   </span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-312"></span><span>            </span><span class="hs-special">,</span><span> </span><span id="ir_reason"><span class="annot"><span class="annottext">IrredCt -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ir_reason"><span class="hs-identifier hs-var hs-var">ir_reason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-type">CtIrredReason</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkIrredCt"><span class="hs-identifier hs-type">mkIrredCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-type">CtIrredReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-315"></span><span id="mkIrredCt"><span class="annot"><span class="annottext">mkIrredCt :: CtIrredReason -&gt; CtEvidence -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#mkIrredCt"><span class="hs-identifier hs-var hs-var">mkIrredCt</span></a></span></span><span> </span><span id="local-6989586621682722784"><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682722784"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621682722785"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682722785"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-var">CIrredCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682722785"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ir_reason :: CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ir_reason"><span class="hs-identifier hs-var">ir_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682722784"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#irredCtEvidence"><span class="hs-identifier hs-type">irredCtEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-318"></span><span id="irredCtEvidence"><span class="annot"><span class="annottext">irredCtEvidence :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#irredCtEvidence"><span class="hs-identifier hs-var hs-var">irredCtEvidence</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#irredCtPred"><span class="hs-identifier hs-type">irredCtPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span>
</span><span id="line-321"></span><span id="irredCtPred"><span class="annot"><span class="annottext">irredCtPred :: IrredCt -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#irredCtPred"><span class="hs-identifier hs-var hs-var">irredCtPred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Xi) -&gt; (IrredCt -&gt; CtEvidence) -&gt; IrredCt -&gt; Xi
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#irredCtEvidence"><span class="hs-identifier hs-var">irredCtEvidence</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctIrredCt"><span class="hs-identifier hs-type">ctIrredCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-type">CtIrredReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span>
</span><span id="line-324"></span><span id="ctIrredCt"><span class="annot"><span class="annottext">ctIrredCt :: CtIrredReason -&gt; Ct -&gt; IrredCt
</span><a href="GHC.Tc.Types.Constraint.html#ctIrredCt"><span class="hs-identifier hs-var hs-var">ctIrredCt</span></a></span></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span id="local-6989586621682722788"><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682722788"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682722788"><span class="hs-identifier hs-var">ir</span></a></span><span>
</span><span id="line-325"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctIrredCt"><span class="hs-identifier hs-var">ctIrredCt</span></a></span><span> </span><span id="local-6989586621682722789"><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682722789"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621682722790"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682722790"><span class="hs-identifier hs-var">ct</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682722790"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-326"></span><span>                                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ir_reason :: CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ir_reason"><span class="hs-identifier hs-var">ir_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682722789"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-329"></span><span>  </span><span id="local-6989586621682722794"><span class="annot"><span class="annottext">ppr :: IrredCt -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682722795"><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682722795"><span class="hs-identifier hs-var">irred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IrredCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-var">CIrredCan</span></a></span><span> </span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682722795"><span class="hs-identifier hs-var">irred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-comment">--------------- QCInst --------------</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-keyword">data</span><span> </span><span id="QCInst"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier hs-var">QCInst</span></a></span></span><span>  </span><span class="hs-comment">-- A much simplified version of ClsInst</span><span>
</span><span id="line-334"></span><span>             </span><span class="hs-comment">-- See Note [Quantified constraints] in GHC.Tc.Solver.Solve</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="QCI"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-var">QCI</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="qci_ev"><span class="annot"><span class="annottext">QCInst -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#qci_ev"><span class="hs-identifier hs-var hs-var">qci_ev</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-comment">-- Always of type forall tvs. context =&gt; ty</span><span>
</span><span id="line-336"></span><span>                                 </span><span class="hs-comment">-- Always Given</span><span>
</span><span id="line-337"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="qci_tvs"><span class="annot"><span class="annottext">QCInst -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#qci_tvs"><span class="hs-identifier hs-var hs-var">qci_tvs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- The tvs</span><span>
</span><span id="line-338"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="qci_pred"><span class="annot"><span class="annottext">QCInst -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#qci_pred"><span class="hs-identifier hs-var hs-var">qci_pred</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span> </span><span class="hs-comment">-- The ty</span><span>
</span><span id="line-339"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="qci_pend_sc"><span class="annot"><span class="annottext">QCInst -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#qci_pend_sc"><span class="hs-identifier hs-var hs-var">qci_pend_sc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExpansionFuel"><span class="hs-identifier hs-type">ExpansionFuel</span></a></span><span>
</span><span id="line-340"></span><span>             </span><span class="hs-comment">-- Invariants: qci_pend_sc &gt; 0 =&gt;</span><span>
</span><span id="line-341"></span><span>             </span><span class="hs-comment">--       (a) qci_pred is a ClassPred</span><span>
</span><span id="line-342"></span><span>             </span><span class="hs-comment">--       (b) this class has superclass(es), and</span><span>
</span><span id="line-343"></span><span>             </span><span class="hs-comment">--       (c) the superclass(es) are not explored yet</span><span>
</span><span id="line-344"></span><span>             </span><span class="hs-comment">-- Same as di_pend_sc flag in DictCt</span><span>
</span><span id="line-345"></span><span>             </span><span class="hs-comment">-- See Note [Expanding Recursive Superclasses and ExpansionFuel] in GHC.Tc.Solver</span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier hs-type">QCInst</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-349"></span><span>  </span><span id="local-6989586621682722805"><span class="annot"><span class="annottext">ppr :: QCInst -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-type">QCI</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">qci_ev :: QCInst -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#qci_ev"><span class="hs-identifier hs-var">qci_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722806"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682722806"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682722806"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-350"></span><span>
</span><span id="line-351"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-352"></span><span class="hs-comment">--</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- Holes and other delayed errors</span><span>
</span><span id="line-354"></span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="hs-comment">-- | A delayed error, to be reported after constraint solving, in order to benefit</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- from deferred unifications.</span><span>
</span><span id="line-359"></span><span class="hs-keyword">data</span><span> </span><span id="DelayedError"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier hs-var">DelayedError</span></a></span></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DE_Hole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-var">DE_Hole</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-comment">-- ^ A hole (in a type or in a term).</span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-comment">-- See Note [Holes].</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DE_NotConcrete"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-var">DE_NotConcrete</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteError"><span class="hs-identifier hs-type">NotConcreteError</span></a></span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-comment">-- ^ A type could not be ensured to be concrete.</span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-367"></span><span>    </span><span class="hs-comment">-- See Note [The Concrete mechanism] in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier hs-type">DelayedError</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-370"></span><span>  </span><span id="local-6989586621682722815"><span class="annot"><span class="annottext">ppr :: DelayedError -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span id="local-6989586621682722816"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682722816"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682722816"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-371"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span id="local-6989586621682722817"><span class="annot"><span class="annottext">NotConcreteError
</span><a href="#local-6989586621682722817"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NotConcreteError -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">NotConcreteError
</span><a href="#local-6989586621682722817"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- | A hole stores the information needed to report diagnostics</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- about holes in terms (unbound identifiers or underscores) or</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- in types (also called wildcards, as used in partial type</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- signatures). See Note [Holes].</span><span>
</span><span id="line-377"></span><span class="hs-keyword">data</span><span> </span><span id="Hole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-var">Hole</span></a></span></span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Hole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-var">Hole</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="hole_sort"><span class="annot"><span class="annottext">Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var hs-var">hole_sort</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleSort"><span class="hs-identifier hs-type">HoleSort</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ What flavour of hole is this?</span></span><span>
</span><span id="line-379"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="hole_occ"><span class="annot"><span class="annottext">Hole -&gt; RdrName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var hs-var">hole_occ</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The name of this hole</span></span><span>
</span><span id="line-380"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="hole_ty"><span class="annot"><span class="annottext">Hole -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var hs-var">hole_ty</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>   </span><span class="hs-comment">-- ^ Type to be printed to the user</span><span>
</span><span id="line-381"></span><span>                                 </span><span class="hs-comment">-- For expression holes: type of expr</span><span>
</span><span id="line-382"></span><span>                                 </span><span class="hs-comment">-- For type holes: the missing type</span><span>
</span><span id="line-383"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="hole_loc"><span class="annot"><span class="annottext">Hole -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#hole_loc"><span class="hs-identifier hs-var hs-var">hole_loc</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Where hole was written</span></span><span>
</span><span id="line-384"></span><span>         </span><span class="hs-special">}</span><span>
</span><span id="line-385"></span><span>           </span><span class="hs-comment">-- For the hole_loc, we usually only want the TcLclEnv stored within.</span><span>
</span><span id="line-386"></span><span>           </span><span class="hs-comment">-- Except when we rewrite, where we need a whole location. And this</span><span>
</span><span id="line-387"></span><span>           </span><span class="hs-comment">-- might get reported to the user if reducing type families in a</span><span>
</span><span id="line-388"></span><span>           </span><span class="hs-comment">-- hole type loops.</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="annot"><span class="hs-comment">-- | Used to indicate which sort of hole we have.</span></span><span>
</span><span id="line-392"></span><span class="hs-keyword">data</span><span> </span><span id="HoleSort"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleSort"><span class="hs-identifier hs-var">HoleSort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExprHole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-var">ExprHole</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span>
</span><span id="line-393"></span><span>                 </span><span class="hs-comment">-- ^ Either an out-of-scope variable or a &quot;true&quot; hole in an</span><span>
</span><span id="line-394"></span><span>                 </span><span class="hs-comment">-- expression (TypedHoles).</span><span>
</span><span id="line-395"></span><span>                 </span><span class="hs-comment">-- The HoleExprRef says where to write the</span><span>
</span><span id="line-396"></span><span>                 </span><span class="hs-comment">-- the erroring expression for -fdefer-type-errors.</span><span>
</span><span id="line-397"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="TypeHole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span></span><span>
</span><span id="line-398"></span><span>                 </span><span class="annot"><span class="hs-comment">-- ^ A hole in a type (PartialTypeSignatures)</span></span><span>
</span><span id="line-399"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="ConstraintHole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span></span><span>
</span><span id="line-400"></span><span>                 </span><span class="hs-comment">-- ^ A hole in a constraint, like @f :: (_, Eq a) =&gt; ...</span><span>
</span><span id="line-401"></span><span>                 </span><span class="hs-comment">-- Differentiated from TypeHole because a ConstraintHole</span><span>
</span><span id="line-402"></span><span>                 </span><span class="hs-comment">-- is simplified differently. See</span><span>
</span><span id="line-403"></span><span>                 </span><span class="hs-comment">-- Note [Do not simplify ConstraintHoles] in GHC.Tc.Solver.</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>  </span><span id="local-6989586621682722845"><span class="annot"><span class="annottext">ppr :: Hole -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span id="local-6989586621682722846"><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621682722846"><span class="hs-identifier hs-var">ref</span></a></span></span><span>
</span><span id="line-407"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_occ :: Hole -&gt; RdrName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var">hole_occ</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722847"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682722847"><span class="hs-identifier hs-var">occ</span></a></span></span><span>
</span><span id="line-408"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_ty :: Hole -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722848"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682722848"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682722847"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621682722846"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682722848"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_sort :: Hole -&gt; HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#hole_sort"><span class="hs-identifier hs-var">hole_sort</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722855"><span class="annot"><span class="annottext">HoleSort
</span><a href="#local-6989586621682722855"><span class="hs-identifier hs-var">_other</span></a></span></span><span>
</span><span id="line-411"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_occ :: Hole -&gt; RdrName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var">hole_occ</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722856"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682722856"><span class="hs-identifier hs-var">occ</span></a></span></span><span>
</span><span id="line-412"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hole_ty :: Hole -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var">hole_ty</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722857"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682722857"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682722856"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682722857"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleSort"><span class="hs-identifier hs-type">HoleSort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621682722865"><span class="annot"><span class="annottext">ppr :: HoleSort -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ExprHole"><span class="hs-identifier hs-type">ExprHole</span></a></span><span> </span><span id="local-6989586621682722866"><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621682722866"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ExprHole:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleExprRef
</span><a href="#local-6989586621682722866"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#TypeHole"><span class="hs-identifier hs-var">TypeHole</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TypeHole&quot;</span></span><span>
</span><span id="line-418"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HoleSort
</span><a href="GHC.Tc.Types.Constraint.html#ConstraintHole"><span class="hs-identifier hs-var">ConstraintHole</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ConstraintHole&quot;</span></span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span class="annot"><span class="hs-comment">-- | Why did we require that a certain type be concrete?</span></span><span>
</span><span id="line-421"></span><span class="hs-keyword">data</span><span> </span><span id="NotConcreteError"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteError"><span class="hs-identifier hs-var">NotConcreteError</span></a></span></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-comment">-- | Concreteness was required by a representation-polymorphism</span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-comment">-- check.</span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-comment">-- See Note [The Concrete mechanism] in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NCE_FRR"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NCE_FRR"><span class="hs-identifier hs-var">NCE_FRR</span></a></span></span><span>
</span><span id="line-427"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="nce_loc"><span class="annot"><span class="annottext">NotConcreteError -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#nce_loc"><span class="hs-identifier hs-var hs-var">nce_loc</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span>
</span><span id="line-428"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Where did this check take place?</span></span><span>
</span><span id="line-429"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="nce_frr_origin"><span class="annot"><span class="annottext">NotConcreteError -&gt; FixedRuntimeRepOrigin
</span><a href="GHC.Tc.Types.Constraint.html#nce_frr_origin"><span class="hs-identifier hs-var hs-var">nce_frr_origin</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#FixedRuntimeRepOrigin"><span class="hs-identifier hs-type">FixedRuntimeRepOrigin</span></a></span><span>
</span><span id="line-430"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Which representation-polymorphism check did we perform?</span></span><span>
</span><span id="line-431"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="nce_reasons"><span class="annot"><span class="annottext">NotConcreteError -&gt; NonEmpty NotConcreteReason
</span><a href="GHC.Tc.Types.Constraint.html#nce_reasons"><span class="hs-identifier hs-var hs-var">nce_reasons</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteReason"><span class="hs-identifier hs-type">NotConcreteReason</span></a></span><span>
</span><span id="line-432"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Why did the check fail?</span></span><span>
</span><span id="line-433"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span class="annot"><span class="hs-comment">-- | Why did we decide that a type was not concrete?</span></span><span>
</span><span id="line-436"></span><span class="hs-keyword">data</span><span> </span><span id="NotConcreteReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteReason"><span class="hs-identifier hs-var">NotConcreteReason</span></a></span></span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-comment">-- | The type contains a 'TyConApp' of a non-concrete 'TyCon'.</span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-comment">-- See Note [Concrete types] in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NonConcreteTyCon"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonConcreteTyCon"><span class="hs-identifier hs-var">NonConcreteTyCon</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-comment">-- | The type contains a type variable that could not be made</span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-comment">-- concrete (e.g. a skolem type variable).</span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NonConcretisableTyVar"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonConcretisableTyVar"><span class="hs-identifier hs-var">NonConcretisableTyVar</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The type contains a cast.</span></span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ContainsCast"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ContainsCast"><span class="hs-identifier hs-var">ContainsCast</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercionN"><span class="hs-identifier hs-type">TcCoercionN</span></a></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The type contains a forall.</span></span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ContainsForall"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ContainsForall"><span class="hs-identifier hs-var">ContainsForall</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The type contains a 'CoercionTy'.</span></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ContainsCoercionTy"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ContainsCoercionTy"><span class="hs-identifier hs-var">ContainsCoercionTy</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteError"><span class="hs-identifier hs-type">NotConcreteError</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-456"></span><span>  </span><span id="local-6989586621682722885"><span class="annot"><span class="annottext">ppr :: NotConcreteError -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NCE_FRR"><span class="hs-identifier hs-type">NCE_FRR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">nce_frr_origin :: NotConcreteError -&gt; FixedRuntimeRepOrigin
</span><a href="GHC.Tc.Types.Constraint.html#nce_frr_origin"><span class="hs-identifier hs-var">nce_frr_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682722886"><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621682722886"><span class="hs-identifier hs-var">frr_orig</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NCE_FRR&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin -&gt; Xi
</span><a href="GHC.Tc.Types.Origin.html#frr_type"><span class="hs-identifier hs-var">frr_type</span></a></span><span> </span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621682722886"><span class="hs-identifier hs-var">frr_orig</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-comment">------------</span><span>
</span><span id="line-460"></span><span class="annot"><span class="hs-comment">-- | Used to indicate extra information about why a CIrredCan is irreducible</span></span><span>
</span><span id="line-461"></span><span class="hs-keyword">data</span><span> </span><span id="CtIrredReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-var">CtIrredReason</span></a></span></span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IrredShapeReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredShapeReason"><span class="hs-identifier hs-var">IrredShapeReason</span></a></span></span><span>
</span><span id="line-463"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ This constraint has a non-canonical shape (e.g. @c Int@, for a variable @c@)</span></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NonCanonicalReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonCanonicalReason"><span class="hs-identifier hs-var">NonCanonicalReason</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-466"></span><span>   </span><span class="hs-comment">-- ^ An equality where some invariant other than (TyEq:H) of 'CEqCan' is not satisfied;</span><span>
</span><span id="line-467"></span><span>   </span><span class="hs-comment">-- the 'CheckTyEqResult' states exactly why</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ReprEqReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ReprEqReason"><span class="hs-identifier hs-var">ReprEqReason</span></a></span></span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-comment">-- ^ An equality that cannot be decomposed because it is representational.</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-comment">-- Example: @a b ~R# Int@.</span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-comment">-- These might still be solved later.</span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-comment">-- INVARIANT: The constraint is a representational equality constraint</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ShapeMismatchReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ShapeMismatchReason"><span class="hs-identifier hs-var">ShapeMismatchReason</span></a></span></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-comment">-- ^ A nominal equality that relates two wholly different types,</span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-comment">-- like @Int ~# Bool@ or @a b ~# 3@.</span><span>
</span><span id="line-478"></span><span>    </span><span class="hs-comment">-- INVARIANT: The constraint is a nominal equality constraint</span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AbstractTyConReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#AbstractTyConReason"><span class="hs-identifier hs-var">AbstractTyConReason</span></a></span></span><span>
</span><span id="line-481"></span><span>    </span><span class="hs-comment">-- ^ An equality like @T a b c ~ Q d e@ where either @T@ or @Q@</span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-comment">-- is an abstract type constructor. See Note [Skolem abstract data]</span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-comment">-- in GHC.Core.TyCon.</span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-comment">-- INVARIANT: The constraint is an equality constraint between two TyConApps</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PluginReason"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#PluginReason"><span class="hs-identifier hs-var">PluginReason</span></a></span></span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-comment">-- ^ A typechecker plugin returned this in the pluginBadCts field</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-comment">-- of TcPluginProgress</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-type">CtIrredReason</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-491"></span><span>  </span><span id="local-6989586621682722903"><span class="annot"><span class="annottext">ppr :: CtIrredReason -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#IrredShapeReason"><span class="hs-identifier hs-var">IrredShapeReason</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(irred)&quot;</span></span><span>
</span><span id="line-492"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonCanonicalReason"><span class="hs-identifier hs-type">NonCanonicalReason</span></a></span><span> </span><span id="local-6989586621682722904"><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722904"><span class="hs-identifier hs-var">cter</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722904"><span class="hs-identifier hs-var">cter</span></a></span><span>
</span><span id="line-493"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ReprEqReason"><span class="hs-identifier hs-var">ReprEqReason</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(repr)&quot;</span></span><span>
</span><span id="line-494"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ShapeMismatchReason"><span class="hs-identifier hs-var">ShapeMismatchReason</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(shape)&quot;</span></span><span>
</span><span id="line-495"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#AbstractTyConReason"><span class="hs-identifier hs-var">AbstractTyConReason</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(abstc)&quot;</span></span><span>
</span><span id="line-496"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#PluginReason"><span class="hs-identifier hs-var">PluginReason</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(plugin)&quot;</span></span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="annot"><span class="hs-comment">-- | Are we sure that more solving will never solve this constraint?</span></span><span>
</span><span id="line-499"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-type">isInsolubleReason</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtIrredReason"><span class="hs-identifier hs-type">CtIrredReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-500"></span><span id="isInsolubleReason"><span class="annot"><span class="annottext">isInsolubleReason :: CtIrredReason -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var hs-var">isInsolubleReason</span></a></span></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#IrredShapeReason"><span class="hs-identifier hs-var">IrredShapeReason</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-501"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NonCanonicalReason"><span class="hs-identifier hs-type">NonCanonicalReason</span></a></span><span> </span><span id="local-6989586621682722905"><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722905"><span class="hs-identifier hs-var">cter</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterIsInsoluble"><span class="hs-identifier hs-var">cterIsInsoluble</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722905"><span class="hs-identifier hs-var">cter</span></a></span><span>
</span><span id="line-502"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ReprEqReason"><span class="hs-identifier hs-var">ReprEqReason</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-503"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ShapeMismatchReason"><span class="hs-identifier hs-var">ShapeMismatchReason</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-504"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#AbstractTyConReason"><span class="hs-identifier hs-var">AbstractTyConReason</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-505"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#PluginReason"><span class="hs-identifier hs-var">PluginReason</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-508"></span><span class="hs-comment">--</span><span>
</span><span id="line-509"></span><span class="hs-comment">-- CheckTyEqResult, defined here because it is stored in a CtIrredReason</span><span>
</span><span id="line-510"></span><span class="hs-comment">--</span><span>
</span><span id="line-511"></span><span class="hs-comment">------------------------------------------------------------------------------</span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span class="hs-comment">-- | A /set/ of problems in checking the validity of a type equality.</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- See 'checkTypeEq'.</span><span>
</span><span id="line-515"></span><span class="hs-keyword">newtype</span><span> </span><span id="CheckTyEqResult"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-var">CheckTyEqResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CTER"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="annot"><span class="hs-comment">-- | No problems in checking the validity of a type equality.</span></span><span>
</span><span id="line-518"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteOK"><span class="hs-identifier hs-type">cteOK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-519"></span><span id="cteOK"><span class="annot"><span class="annottext">cteOK :: CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteOK"><span class="hs-identifier hs-var hs-var">cteOK</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
forall a. Bits a =&gt; a
</span><span class="hs-identifier hs-var">zeroBits</span></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span class="annot"><span class="hs-comment">-- | Check whether a 'CheckTyEqResult' is marked successful.</span></span><span>
</span><span id="line-522"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasNoProblem"><span class="hs-identifier hs-type">cterHasNoProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-523"></span><span id="cterHasNoProblem"><span class="annot"><span class="annottext">cterHasNoProblem :: CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasNoProblem"><span class="hs-identifier hs-var hs-var">cterHasNoProblem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-524"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasNoProblem"><span class="hs-identifier hs-var">cterHasNoProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="annot"><span class="hs-comment">-- | An /individual/ problem that might be logged in a 'CheckTyEqResult'</span></span><span>
</span><span id="line-527"></span><span class="hs-keyword">newtype</span><span> </span><span id="CheckTyEqProblem"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-var">CheckTyEqProblem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CTEP"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-type">cteImpredicative</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteTypeFamily"><span class="hs-identifier hs-type">cteTypeFamily</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-type">cteInsolubleOccurs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier hs-type">cteSolubleOccurs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteCoercionHole"><span class="hs-identifier hs-type">cteCoercionHole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteConcrete"><span class="hs-identifier hs-type">cteConcrete</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteSkolemEscape"><span class="hs-identifier hs-type">cteSkolemEscape</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span>
</span><span id="line-532"></span><span id="cteImpredicative"><span class="annot"><span class="annottext">cteImpredicative :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-var hs-var">cteImpredicative</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Forall or (=&gt;) encountered</span><span>
</span><span id="line-533"></span><span id="cteTypeFamily"><span class="annot"><span class="annottext">cteTypeFamily :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteTypeFamily"><span class="hs-identifier hs-var hs-var">cteTypeFamily</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Type family encountered</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span id="cteInsolubleOccurs"><span class="annot"><span class="annottext">cteInsolubleOccurs :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var hs-var">cteInsolubleOccurs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Occurs-check</span><span>
</span><span id="line-536"></span><span id="cteSolubleOccurs"><span class="annot"><span class="annottext">cteSolubleOccurs :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier hs-var hs-var">cteSolubleOccurs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Occurs-check under a type function, or in a coercion,</span><span>
</span><span id="line-537"></span><span>                                    </span><span class="hs-comment">-- or in a representational equality; see</span><span>
</span><span id="line-538"></span><span>   </span><span class="hs-comment">-- See Note [Occurs check and representational equality]</span><span>
</span><span id="line-539"></span><span>   </span><span class="hs-comment">-- cteSolubleOccurs must be one bit to the left of cteInsolubleOccurs</span><span>
</span><span id="line-540"></span><span>   </span><span class="hs-comment">-- See also Note [Insoluble mis-match] in GHC.Tc.Errors</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span id="cteCoercionHole"><span class="annot"><span class="annottext">cteCoercionHole :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteCoercionHole"><span class="hs-identifier hs-var hs-var">cteCoercionHole</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">4</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Coercion hole encountered</span><span>
</span><span id="line-543"></span><span id="cteConcrete"><span class="annot"><span class="annottext">cteConcrete :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteConcrete"><span class="hs-identifier hs-var hs-var">cteConcrete</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">5</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Type variable that can't be made concrete</span><span>
</span><span id="line-544"></span><span>                                    </span><span class="hs-comment">--    e.g. alpha[conc] ~ Maybe beta[tv]</span><span>
</span><span id="line-545"></span><span id="cteSkolemEscape"><span class="annot"><span class="annottext">cteSkolemEscape :: CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSkolemEscape"><span class="hs-identifier hs-var hs-var">cteSkolemEscape</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-var">CTEP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Word8
forall a. (Num a, Bits a) =&gt; ExpansionFuel -&gt; a
</span><a href="GHC.Prelude.Basic.html#bit"><span class="hs-identifier hs-var">bit</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">6</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Skolem escape e.g.  alpha[2] ~ b[sk,4]</span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-type">cteProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-548"></span><span id="cteProblem"><span class="annot"><span class="annottext">cteProblem :: CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-var hs-var">cteProblem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722911"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722911"><span class="hs-identifier hs-var">mask</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722911"><span class="hs-identifier hs-var">mask</span></a></span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#impredicativeProblem"><span class="hs-identifier hs-type">impredicativeProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleOccursProblem"><span class="hs-identifier hs-type">insolubleOccursProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#solubleOccursProblem"><span class="hs-identifier hs-type">solubleOccursProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-551"></span><span id="impredicativeProblem"><span class="annot"><span class="annottext">impredicativeProblem :: CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#impredicativeProblem"><span class="hs-identifier hs-var hs-var">impredicativeProblem</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-var">cteProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-var">cteImpredicative</span></a></span><span>
</span><span id="line-552"></span><span id="insolubleOccursProblem"><span class="annot"><span class="annottext">insolubleOccursProblem :: CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#insolubleOccursProblem"><span class="hs-identifier hs-var hs-var">insolubleOccursProblem</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-var">cteProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span>
</span><span id="line-553"></span><span id="solubleOccursProblem"><span class="annot"><span class="annottext">solubleOccursProblem :: CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#solubleOccursProblem"><span class="hs-identifier hs-var hs-var">solubleOccursProblem</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteProblem"><span class="hs-identifier hs-var">cteProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier hs-var">cteSolubleOccurs</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#occurs_mask"><span class="hs-identifier hs-type">occurs_mask</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word8</span></span><span>
</span><span id="line-556"></span><span id="occurs_mask"><span class="annot"><span class="annottext">occurs_mask :: Word8
</span><a href="GHC.Tc.Types.Constraint.html#occurs_mask"><span class="hs-identifier hs-var hs-var">occurs_mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722913"><span class="hs-identifier hs-var">insoluble_mask</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.|.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722915"><span class="hs-identifier hs-var">soluble_mask</span></a></span><span>
</span><span id="line-557"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-558"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722913"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722913"><span class="hs-identifier hs-var">insoluble_mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722915"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722915"><span class="hs-identifier hs-var">soluble_mask</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier hs-var">cteSolubleOccurs</span></a></span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="annot"><span class="hs-comment">-- | Check whether a 'CheckTyEqResult' has a 'CheckTyEqProblem'</span></span><span>
</span><span id="line-562"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-identifier hs-type">cterHasProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-563"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722916"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722916"><span class="hs-identifier hs-var">bits</span></a></span></span><span> </span><span id="cterHasProblem"><span class="annot"><span class="annottext">cterHasProblem :: CheckTyEqResult -&gt; CheckTyEqProblem -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-operator hs-var hs-var">`cterHasProblem`</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722917"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722917"><span class="hs-identifier hs-var">mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722916"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722917"><span class="hs-identifier hs-var">mask</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="annot"><span class="hs-comment">-- | Check whether a 'CheckTyEqResult' has one 'CheckTyEqProblem' and no other</span></span><span>
</span><span id="line-566"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblem"><span class="hs-identifier hs-type">cterHasOnlyProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-567"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722920"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722920"><span class="hs-identifier hs-var">bits</span></a></span></span><span> </span><span id="cterHasOnlyProblem"><span class="annot"><span class="annottext">cterHasOnlyProblem :: CheckTyEqResult -&gt; CheckTyEqProblem -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblem"><span class="hs-operator hs-var hs-var">`cterHasOnlyProblem`</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722921"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722921"><span class="hs-identifier hs-var">mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722920"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722921"><span class="hs-identifier hs-var">mask</span></a></span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblems"><span class="hs-identifier hs-type">cterHasOnlyProblems</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-570"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722922"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722922"><span class="hs-identifier hs-var">bits</span></a></span></span><span> </span><span id="cterHasOnlyProblems"><span class="annot"><span class="annottext">cterHasOnlyProblems :: CheckTyEqResult -&gt; CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasOnlyProblems"><span class="hs-operator hs-var hs-var">`cterHasOnlyProblems`</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722923"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722923"><span class="hs-identifier hs-var">mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722922"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">complement</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722923"><span class="hs-identifier hs-var">mask</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-571"></span><span>
</span><span id="line-572"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterRemoveProblem"><span class="hs-identifier hs-type">cterRemoveProblem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-573"></span><span id="cterRemoveProblem"><span class="annot"><span class="annottext">cterRemoveProblem :: CheckTyEqResult -&gt; CheckTyEqProblem -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cterRemoveProblem"><span class="hs-identifier hs-var hs-var">cterRemoveProblem</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722925"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722925"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722926"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722926"><span class="hs-identifier hs-var">mask</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722925"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">complement</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722926"><span class="hs-identifier hs-var">mask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterHasOccursCheck"><span class="hs-identifier hs-type">cterHasOccursCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-576"></span><span id="cterHasOccursCheck"><span class="annot"><span class="annottext">cterHasOccursCheck :: CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasOccursCheck"><span class="hs-identifier hs-var hs-var">cterHasOccursCheck</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722927"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722927"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722927"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="GHC.Tc.Types.Constraint.html#occurs_mask"><span class="hs-identifier hs-var">occurs_mask</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-577"></span><span>
</span><span id="line-578"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterClearOccursCheck"><span class="hs-identifier hs-type">cterClearOccursCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-579"></span><span id="cterClearOccursCheck"><span class="annot"><span class="annottext">cterClearOccursCheck :: CheckTyEqResult -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cterClearOccursCheck"><span class="hs-identifier hs-var hs-var">cterClearOccursCheck</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722928"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722928"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722928"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">complement</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="GHC.Tc.Types.Constraint.html#occurs_mask"><span class="hs-identifier hs-var">occurs_mask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-580"></span><span>
</span><span id="line-581"></span><span class="hs-comment">-- | Mark a 'CheckTyEqResult' as not having an insoluble occurs-check: any occurs</span><span>
</span><span id="line-582"></span><span class="hs-comment">-- check under a type family or in a representation equality is soluble.</span><span>
</span><span id="line-583"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterSetOccursCheckSoluble"><span class="hs-identifier hs-type">cterSetOccursCheckSoluble</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-584"></span><span id="cterSetOccursCheckSoluble"><span class="annot"><span class="annottext">cterSetOccursCheckSoluble :: CheckTyEqResult -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cterSetOccursCheckSoluble"><span class="hs-identifier hs-var hs-var">cterSetOccursCheckSoluble</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722929"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722929"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="annot"><span class="annottext">(Word8 -&gt; CheckTyEqResult) -&gt; Word8 -&gt; CheckTyEqResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722929"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722930"><span class="hs-identifier hs-var">insoluble_mask</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; ExpansionFuel -&gt; Word8
forall a. Bits a =&gt; a -&gt; ExpansionFuel -&gt; a
</span><span class="hs-operator hs-var">`shift`</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.|.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722929"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">complement</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722930"><span class="hs-identifier hs-var">insoluble_mask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-587"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722930"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722930"><span class="hs-identifier hs-var">insoluble_mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="hs-comment">-- | Retain only information about occurs-check failures, because only that</span><span>
</span><span id="line-590"></span><span class="hs-comment">-- matters after recurring into a kind.</span><span>
</span><span id="line-591"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterFromKind"><span class="hs-identifier hs-type">cterFromKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span>
</span><span id="line-592"></span><span id="cterFromKind"><span class="annot"><span class="annottext">cterFromKind :: CheckTyEqResult -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cterFromKind"><span class="hs-identifier hs-var hs-var">cterFromKind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722932"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722932"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722932"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="GHC.Tc.Types.Constraint.html#occurs_mask"><span class="hs-identifier hs-var">occurs_mask</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#cterIsInsoluble"><span class="hs-identifier hs-type">cterIsInsoluble</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-596"></span><span id="cterIsInsoluble"><span class="annot"><span class="annottext">cterIsInsoluble :: CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterIsInsoluble"><span class="hs-identifier hs-var hs-var">cterIsInsoluble</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722933"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722933"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722933"><span class="hs-identifier hs-var">bits</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722934"><span class="hs-identifier hs-var">mask</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-597"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-598"></span><span>    </span><span id="local-6989586621682722934"><span class="annot"><span class="annottext">mask :: Word8
</span><a href="#local-6989586621682722934"><span class="hs-identifier hs-var hs-var">mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722936"><span class="hs-identifier hs-var">impredicative_mask</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.|.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722937"><span class="hs-identifier hs-var">insoluble_occurs_mask</span></a></span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722936"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722936"><span class="hs-identifier hs-var">impredicative_mask</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-var">cteImpredicative</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722937"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722937"><span class="hs-identifier hs-var">insoluble_occurs_mask</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682722940"><span id="local-6989586621682722944"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>  </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722950"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722950"><span class="hs-identifier hs-var">bits1</span></a></span></span><span> </span><span id="local-6989586621682722951"><span class="annot"><span class="annottext">&lt;&gt; :: CheckTyEqResult -&gt; CheckTyEqResult -&gt; CheckTyEqResult
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-type">CTER</span></a></span><span> </span><span id="local-6989586621682722952"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722952"><span class="hs-identifier hs-var">bits2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#CTER"><span class="hs-identifier hs-var">CTER</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722950"><span class="hs-identifier hs-var">bits1</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Word8
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">.|.</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722952"><span class="hs-identifier hs-var">bits2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682722957"><span id="local-6989586621682722961"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-606"></span><span>  </span><span id="local-6989586621682722964"><span class="annot"><span class="annottext">mempty :: CheckTyEqResult
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="GHC.Tc.Types.Constraint.html#cteOK"><span class="hs-identifier hs-var">cteOK</span></a></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682722967"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-609"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722972"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722972"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682722973"><span class="annot"><span class="annottext">== :: CheckTyEqProblem -&gt; CheckTyEqProblem -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722974"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722974"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722972"><span class="hs-identifier hs-var">b1</span></a></span><span class="annot"><span class="annottext">Word8 -&gt; Word8 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722974"><span class="hs-identifier hs-var">b2</span></a></span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-612"></span><span>  </span><span id="local-6989586621682722983"><span class="annot"><span class="annottext">ppr :: CheckTyEqProblem -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682722984"><span class="annot"><span class="annottext">prob :: CheckTyEqProblem
</span><a href="#local-6989586621682722984"><span class="hs-identifier hs-var">prob</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CTEP"><span class="hs-identifier hs-type">CTEP</span></a></span><span> </span><span id="local-6989586621682722985"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722985"><span class="hs-identifier hs-var">bits</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem -&gt; [(CheckTyEqProblem, String)] -&gt; Maybe String
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="#local-6989586621682722984"><span class="hs-identifier hs-var">prob</span></a></span><span> </span><span class="annot"><span class="annottext">[(CheckTyEqProblem, String)]
</span><a href="GHC.Tc.Types.Constraint.html#allBits"><span class="hs-identifier hs-var">allBits</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-613"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682722988"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682722988"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682722988"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-614"></span><span>                </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unknown:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682722985"><span class="hs-identifier hs-var">bits</span></a></span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqResult"><span class="hs-identifier hs-type">CheckTyEqResult</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-617"></span><span>  </span><span id="local-6989586621682722994"><span class="annot"><span class="annottext">ppr :: CheckTyEqResult -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682722995"><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722995"><span class="hs-identifier hs-var">cter</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasNoProblem"><span class="hs-identifier hs-var">cterHasNoProblem</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722995"><span class="hs-identifier hs-var">cter</span></a></span><span>
</span><span id="line-618"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteOK&quot;</span></span><span>
</span><span id="line-619"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-620"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#fcat"><span class="hs-identifier hs-var">fcat</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; SDoc) -&gt; [SDoc] -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; [SDoc] -&gt; [SDoc]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#vbar"><span class="hs-identifier hs-var">vbar</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; [SDoc]) -&gt; [SDoc] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-621"></span><span>             </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682722998"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-622"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682722999"><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="#local-6989586621682722999"><span class="hs-identifier hs-var">bitmask</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682722998"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682722998"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CheckTyEqProblem, String)]
</span><a href="GHC.Tc.Types.Constraint.html#allBits"><span class="hs-identifier hs-var">allBits</span></a></span><span>
</span><span id="line-623"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult
</span><a href="#local-6989586621682722995"><span class="hs-identifier hs-var">cter</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqResult -&gt; CheckTyEqProblem -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#cterHasProblem"><span class="hs-operator hs-var">`cterHasProblem`</span></a></span><span> </span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="#local-6989586621682722999"><span class="hs-identifier hs-var">bitmask</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#allBits"><span class="hs-identifier hs-type">allBits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CheckTyEqProblem"><span class="hs-identifier hs-type">CheckTyEqProblem</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-626"></span><span id="allBits"><span class="annot"><span class="annottext">allBits :: [(CheckTyEqProblem, String)]
</span><a href="GHC.Tc.Types.Constraint.html#allBits"><span class="hs-identifier hs-var hs-var">allBits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteImpredicative"><span class="hs-identifier hs-var">cteImpredicative</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteImpredicative&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteTypeFamily"><span class="hs-identifier hs-var">cteTypeFamily</span></a></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteTypeFamily&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteInsolubleOccurs"><span class="hs-identifier hs-var">cteInsolubleOccurs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteInsolubleOccurs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSolubleOccurs"><span class="hs-identifier hs-var">cteSolubleOccurs</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteSolubleOccurs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteConcrete"><span class="hs-identifier hs-var">cteConcrete</span></a></span><span class="hs-special">,</span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteConcrete&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteSkolemEscape"><span class="hs-identifier hs-var">cteSkolemEscape</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteSkolemEscape&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckTyEqProblem
</span><a href="GHC.Tc.Types.Constraint.html#cteCoercionHole"><span class="hs-identifier hs-var">cteCoercionHole</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cteCoercionHole&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-633"></span><span>
</span><span id="line-634"></span><span class="hs-comment">{- Note [CIrredCan constraints]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CIrredCan constraints are used for constraints that are &quot;stuck&quot;
   - we can't solve them (yet)
   - we can't use them to solve other constraints
   - but they may become soluble if we substitute for some
     of the type variables in the constraint

Example 1:  (c Int), where c :: * -&gt; Constraint.  We can't do anything
            with this yet, but if later c := Num, *then* we can solve it

Example 2:  a ~ b, where a :: *, b :: k, where k is a kind variable
            We don't want to use this to substitute 'b' for 'a', in case
            'k' is subsequently unified with (say) *-&gt;*, because then
            we'd have ill-kinded types floating about.  Rather we want
            to defer using the equality altogether until 'k' get resolved.

Note [Ct/evidence invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If  ct :: Ct, then extra fields of 'ct' cache precisely the ctev_pred field
of (cc_ev ct), and is fully rewritten wrt the substitution.   Eg for DictCt,
   ctev_pred (di_ev ct) = (di_cls ct) (di_tys ct)
This holds by construction; look at the unique place where DictCt is
built (in GHC.Tc.Solver.Dict.canDictNC).

Note [Ct kind invariant]
~~~~~~~~~~~~~~~~~~~~~~~~
CEqCan requires that the kind of the lhs matches the kind
of the rhs. This is necessary because these constraints are used for substitutions
during solving. If the kinds differed, then the substitution would take a well-kinded
type to an ill-kinded one.

Note [Holes]
~~~~~~~~~~~~
This Note explains how GHC tracks *holes*.

A hole represents one of two conditions:
 - A missing bit of an expression. Example: foo x = x + _
 - A missing bit of a type. Example: bar :: Int -&gt; _

What these have in common is that both cause GHC to emit a diagnostic to the
user describing the bit that is left out.

When a hole is encountered, a new entry of type Hole is added to the ambient
WantedConstraints. The type (hole_ty) of the hole is then simplified during
solving (with respect to any Givens in surrounding implications). It is
reported with all the other errors in GHC.Tc.Errors.

For expression holes, the user has the option of deferring errors until runtime
with -fdefer-type-errors. In this case, the hole actually has evidence: this
evidence is an erroring expression that prints an error and crashes at runtime.
The ExprHole variant of holes stores an IORef EvTerm that will contain this evidence;
during constraint generation, this IORef was stored in the HsUnboundVar extension
field by the type checker. The desugarer simply dereferences to get the CoreExpr.

Prior to fixing #17812, we used to invent an Id to hold the erroring
expression, and then bind it during type-checking. But this does not support
representation-polymorphic out-of-scope identifiers. See
typecheck/should_compile/T17812. We thus use the mutable-CoreExpr approach
described above.

You might think that the type in the HoleExprRef is the same as the type of the
hole. However, because the hole type (hole_ty) is rewritten with respect to
givens, this might not be the case. That is, the hole_ty is always (~) to the
type of the HoleExprRef, but they might not be `eqType`. We need the type of the generated
evidence to match what is expected in the context of the hole, and so we must
store these types separately.

Type-level holes have no evidence at all.
-}</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkNonCanonical"><span class="hs-identifier hs-type">mkNonCanonical</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-706"></span><span id="mkNonCanonical"><span class="annot"><span class="annottext">mkNonCanonical :: CtEvidence -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#mkNonCanonical"><span class="hs-identifier hs-var hs-var">mkNonCanonical</span></a></span></span><span> </span><span id="local-6989586621682723000"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723000"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-var">CNonCanonical</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723000"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-707"></span><span>
</span><span id="line-708"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkGivens"><span class="hs-identifier hs-type">mkGivens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-709"></span><span id="mkGivens"><span class="annot"><span class="annottext">mkGivens :: CtLoc -&gt; [EvVar] -&gt; [Ct]
</span><a href="GHC.Tc.Types.Constraint.html#mkGivens"><span class="hs-identifier hs-var hs-var">mkGivens</span></a></span></span><span> </span><span id="local-6989586621682723002"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723002"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682723003"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723003"><span class="hs-identifier hs-var">ev_ids</span></a></span></span><span>
</span><span id="line-710"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvVar -&gt; Ct) -&gt; [EvVar] -&gt; [Ct]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Ct
</span><a href="#local-6989586621682723004"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723003"><span class="hs-identifier hs-var">ev_ids</span></a></span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-712"></span><span>    </span><span id="local-6989586621682723004"><span class="annot"><span class="annottext">mk :: EvVar -&gt; Ct
</span><a href="#local-6989586621682723004"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682723005"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723005"><span class="hs-identifier hs-var">ev_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#mkNonCanonical"><span class="hs-identifier hs-var">mkNonCanonical</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723005"><span class="hs-identifier hs-var">ev_id</span></a></span><span>
</span><span id="line-713"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ctev_pred :: Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Xi
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723005"><span class="hs-identifier hs-var">ev_id</span></a></span><span>
</span><span id="line-714"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ctev_loc :: CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var">ctev_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723002"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-type">ctEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-717"></span><span id="ctEvidence"><span class="annot"><span class="annottext">ctEvidence :: Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var hs-var">ctEvidence</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-type">CQuantCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-type">QCI</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">qci_ev :: QCInst -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#qci_ev"><span class="hs-identifier hs-var">qci_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723011"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723011"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723011"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-718"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eq_ev :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723012"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723012"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723012"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-719"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723013"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723013"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723013"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-720"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-type">CNonCanonical</span></a></span><span> </span><span id="local-6989586621682723014"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723014"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723014"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-721"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_ev :: DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723015"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723015"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723015"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-722"></span><span>
</span><span id="line-723"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#updCtEvidence"><span class="hs-identifier hs-type">updCtEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-724"></span><span id="updCtEvidence"><span class="annot"><span class="annottext">updCtEvidence :: (CtEvidence -&gt; CtEvidence) -&gt; Ct -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#updCtEvidence"><span class="hs-identifier hs-var hs-var">updCtEvidence</span></a></span></span><span> </span><span id="local-6989586621682723016"><span class="annot"><span class="annottext">CtEvidence -&gt; CtEvidence
</span><a href="#local-6989586621682723016"><span class="hs-identifier hs-var">upd</span></a></span></span><span> </span><span id="local-6989586621682723017"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723017"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-725"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723017"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-726"></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-type">CQuantCan</span></a></span><span> </span><span id="local-6989586621682723018"><span class="annot"><span class="annottext">qci :: QCInst
</span><a href="#local-6989586621682723018"><span class="hs-identifier hs-var">qci</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-type">QCI</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">qci_ev :: QCInst -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#qci_ev"><span class="hs-identifier hs-var">qci_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723019"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723019"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QCInst -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-var">CQuantCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QCInst
</span><a href="#local-6989586621682723018"><span class="hs-identifier hs-var">qci</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#qci_ev"><span class="hs-identifier hs-var">qci_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723016"><span class="hs-identifier hs-type">upd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723019"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span id="local-6989586621682723020"><span class="annot"><span class="annottext">eq :: EqCt
</span><a href="#local-6989586621682723020"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eq_ev :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723021"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723021"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EqCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-var">CEqCan</span></a></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EqCt
</span><a href="#local-6989586621682723020"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723016"><span class="hs-identifier hs-type">upd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723021"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span id="local-6989586621682723022"><span class="annot"><span class="annottext">ir :: IrredCt
</span><a href="#local-6989586621682723022"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723023"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723023"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-var">CIrredCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723022"><span class="hs-identifier hs-var">ir</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723016"><span class="hs-identifier hs-type">upd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723023"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-type">CNonCanonical</span></a></span><span> </span><span id="local-6989586621682723024"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723024"><span class="hs-identifier hs-var">ev</span></a></span></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-var">CNonCanonical</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtEvidence
</span><a href="#local-6989586621682723016"><span class="hs-identifier hs-var">upd</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723024"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>     </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span id="local-6989586621682723025"><span class="annot"><span class="annottext">di :: DictCt
</span><a href="#local-6989586621682723025"><span class="hs-identifier hs-var">di</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_ev :: DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723026"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723026"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DictCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-var">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723025"><span class="hs-identifier hs-var">di</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723016"><span class="hs-identifier hs-type">upd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723026"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>
</span><span id="line-732"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-type">ctLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span>
</span><span id="line-733"></span><span id="ctLoc"><span class="annot"><span class="annottext">ctLoc :: Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var hs-var">ctLoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-var">ctEvLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; CtLoc) -&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; CtLoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-type">ctOrigin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span>
</span><span id="line-736"></span><span id="ctOrigin"><span class="annot"><span class="annottext">ctOrigin :: Ct -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctOrigin"><span class="hs-identifier hs-var hs-var">ctOrigin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin
</span><a href="GHC.Tc.Types.CtLoc.html#ctLocOrigin"><span class="hs-identifier hs-var">ctLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">(CtLoc -&gt; CtOrigin) -&gt; (Ct -&gt; CtLoc) -&gt; Ct -&gt; CtOrigin
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctLoc"><span class="hs-identifier hs-var">ctLoc</span></a></span><span>
</span><span id="line-737"></span><span>
</span><span id="line-738"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-type">ctPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span>
</span><span id="line-739"></span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-740"></span><span id="ctPred"><span class="annot"><span class="annottext">ctPred :: Ct -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var hs-var">ctPred</span></a></span></span><span> </span><span id="local-6989586621682723028"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723028"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723028"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctRewriters"><span class="hs-identifier hs-type">ctRewriters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-743"></span><span id="ctRewriters"><span class="annot"><span class="annottext">ctRewriters :: Ct -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctRewriters"><span class="hs-identifier hs-var hs-var">ctRewriters</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier hs-var">ctEvRewriters</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; RewriterSet)
-&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; RewriterSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvId"><span class="hs-identifier hs-type">ctEvId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-746"></span><span class="hs-comment">-- The evidence Id for this Ct</span><span>
</span><span id="line-747"></span><span id="ctEvId"><span class="annot"><span class="annottext">ctEvId :: HasDebugCallStack =&gt; Ct -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctEvId"><span class="hs-identifier hs-var hs-var">ctEvId</span></a></span></span><span> </span><span id="local-6989586621682723030"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723030"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var">ctEvEvId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723030"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-comment">-- | Returns the evidence 'Id' for the argument 'Ct'</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- when this 'Ct' is a 'Wanted'.</span><span>
</span><span id="line-751"></span><span class="hs-comment">--</span><span>
</span><span id="line-752"></span><span class="hs-comment">-- Returns 'Nothing' otherwise.</span><span>
</span><span id="line-753"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wantedEvId_maybe"><span class="hs-identifier hs-type">wantedEvId_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-754"></span><span id="wantedEvId_maybe"><span class="annot"><span class="annottext">wantedEvId_maybe :: Ct -&gt; Maybe EvVar
</span><a href="GHC.Tc.Types.Constraint.html#wantedEvId_maybe"><span class="hs-identifier hs-var hs-var">wantedEvId_maybe</span></a></span></span><span> </span><span id="local-6989586621682723033"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723033"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723033"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-756"></span><span>    </span><span id="local-6989586621682723034"><span class="annot"><span class="annottext">ctev :: CtEvidence
</span><a href="#local-6989586621682723034"><span class="hs-identifier hs-var">ctev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-758"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Maybe EvVar
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(EvVar -&gt; Maybe EvVar) -&gt; EvVar -&gt; Maybe EvVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var">ctEvEvId</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723034"><span class="hs-identifier hs-var">ctev</span></a></span><span>
</span><span id="line-759"></span><span>    </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-760"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe EvVar
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-- | Makes a new equality predicate with the same role as the given</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- evidence.</span><span>
</span><span id="line-764"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkTcEqPredLikeEv"><span class="hs-identifier hs-type">mkTcEqPredLikeEv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-765"></span><span id="mkTcEqPredLikeEv"><span class="annot"><span class="annottext">mkTcEqPredLikeEv :: CtEvidence -&gt; Xi -&gt; Xi -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#mkTcEqPredLikeEv"><span class="hs-identifier hs-var hs-var">mkTcEqPredLikeEv</span></a></span></span><span> </span><span id="local-6989586621682723036"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723036"><span class="hs-identifier hs-var">ev</span></a></span></span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; EqRel
</span><a href="GHC.Core.Predicate.html#predTypeEqRel"><span class="hs-identifier hs-var">predTypeEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723038"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-767"></span><span>      </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Xi -&gt; Xi
</span><a href="GHC.Core.Coercion.html#mkPrimEqPred"><span class="hs-identifier hs-var">mkPrimEqPred</span></a></span><span>
</span><span id="line-768"></span><span>      </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Xi -&gt; Xi
</span><a href="GHC.Core.Coercion.html#mkReprPrimEqPred"><span class="hs-identifier hs-var">mkReprPrimEqPred</span></a></span><span>
</span><span id="line-769"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-770"></span><span>    </span><span id="local-6989586621682723038"><span class="annot"><span class="annottext">pred :: Xi
</span><a href="#local-6989586621682723038"><span class="hs-identifier hs-var hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723036"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span class="annot"><span class="hs-comment">-- | Get the flavour of the given 'Ct'</span></span><span>
</span><span id="line-773"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavour"><span class="hs-identifier hs-type">ctFlavour</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier hs-type">CtFlavour</span></a></span><span>
</span><span id="line-774"></span><span id="ctFlavour"><span class="annot"><span class="annottext">ctFlavour :: Ct -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctFlavour"><span class="hs-identifier hs-var hs-var">ctFlavour</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; CtFlavour) -&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; CtFlavour
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-775"></span><span>
</span><span id="line-776"></span><span class="annot"><span class="hs-comment">-- | Get the equality relation for the given 'Ct'</span></span><span>
</span><span id="line-777"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier hs-type">ctEqRel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span>
</span><span id="line-778"></span><span id="ctEqRel"><span class="annot"><span class="annottext">ctEqRel :: Ct -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEqRel"><span class="hs-identifier hs-var hs-var">ctEqRel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; CtEvidence -&gt; EqRel
CtEvidence -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEqRel"><span class="hs-identifier hs-var">ctEvEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; EqRel) -&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; EqRel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-781"></span><span>  </span><span id="local-6989586621682723071"><span class="annot"><span class="annottext">ppr :: Ct -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682723072"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723072"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723072"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682723073"><span class="hs-identifier hs-var">pp_sort</span></a></span><span>
</span><span id="line-782"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-783"></span><span>      </span><span id="local-6989586621682723073"><span class="annot"><span class="annottext">pp_sort :: SDoc
</span><a href="#local-6989586621682723073"><span class="hs-identifier hs-var hs-var">pp_sort</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723072"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-784"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CEqCan&quot;</span></span><span>
</span><span id="line-785"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-type">CNonCanonical</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CNonCanonical&quot;</span></span><span>
</span><span id="line-786"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_pend_sc :: DictCt -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#di_pend_sc"><span class="hs-identifier hs-var">di_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723074"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723074"><span class="hs-identifier hs-var">psc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723074"><span class="hs-identifier hs-var">psc</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CDictCan&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;psc&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723074"><span class="hs-identifier hs-var">psc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CDictCan&quot;</span></span><span>
</span><span id="line-789"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_reason :: IrredCt -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ir_reason"><span class="hs-identifier hs-var">ir_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723075"><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682723075"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CIrredCan&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682723075"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-790"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-type">CQuantCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-type">QCI</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">qci_pend_sc :: QCInst -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#qci_pend_sc"><span class="hs-identifier hs-var">qci_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723076"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723076"><span class="hs-identifier hs-var">psc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723076"><span class="hs-identifier hs-var">psc</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; ExpansionFuel -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">0</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CQuantCan&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;psc&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723076"><span class="hs-identifier hs-var">psc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CQuantCan&quot;</span></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-795"></span><span>  </span><span id="local-6989586621682723080"><span class="annot"><span class="annottext">ppr :: EqCt -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eq_ev :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723081"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723081"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723081"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="hs-comment">-----------------------------------</span><span>
</span><span id="line-798"></span><span class="hs-comment">-- | Is a type a canonical LHS? That is, is it a tyvar or an exactly-saturated</span><span>
</span><span id="line-799"></span><span class="hs-comment">-- type family application?</span><span>
</span><span id="line-800"></span><span class="hs-comment">-- Does not look through type synonyms.</span><span>
</span><span id="line-801"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHS_maybe"><span class="hs-identifier hs-type">canEqLHS_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-type">Xi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span>
</span><span id="line-802"></span><span id="canEqLHS_maybe"><span class="annot"><span class="annottext">canEqLHS_maybe :: Xi -&gt; Maybe CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#canEqLHS_maybe"><span class="hs-identifier hs-var hs-var">canEqLHS_maybe</span></a></span></span><span> </span><span id="local-6989586621682723082"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723082"><span class="hs-identifier hs-var">xi</span></a></span></span><span>
</span><span id="line-803"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682723083"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723083"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe EvVar
</span><a href="GHC.Core.Type.html#getTyVar_maybe"><span class="hs-identifier hs-var">getTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723082"><span class="hs-identifier hs-var">xi</span></a></span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CanEqLHS -&gt; Maybe CanEqLHS
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(CanEqLHS -&gt; Maybe CanEqLHS) -&gt; CanEqLHS -&gt; Maybe CanEqLHS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-var">TyVarLHS</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723083"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-807"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#canTyFamEqLHS_maybe"><span class="hs-identifier hs-var">canTyFamEqLHS_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723082"><span class="hs-identifier hs-var">xi</span></a></span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canTyFamEqLHS_maybe"><span class="hs-identifier hs-type">canTyFamEqLHS_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Xi"><span class="hs-identifier hs-type">Xi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span>
</span><span id="line-810"></span><span id="canTyFamEqLHS_maybe"><span class="annot"><span class="annottext">canTyFamEqLHS_maybe :: Xi -&gt; Maybe CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#canTyFamEqLHS_maybe"><span class="hs-identifier hs-var hs-var">canTyFamEqLHS_maybe</span></a></span></span><span> </span><span id="local-6989586621682723085"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723085"><span class="hs-identifier hs-var">xi</span></a></span></span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682723086"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723086"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682723087"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723087"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Maybe (TyCon, [Xi])
Xi -&gt; Maybe (TyCon, [Xi])
</span><a href="GHC.Core.Type.html#tcSplitTyConApp_maybe"><span class="hs-identifier hs-var">tcSplitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723085"><span class="hs-identifier hs-var">xi</span></a></span><span>
</span><span id="line-812"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeFamilyTyCon"><span class="hs-identifier hs-var">isTypeFamilyTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723086"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-813"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723087"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi] -&gt; ExpansionFuel -&gt; Bool
forall a. [a] -&gt; ExpansionFuel -&gt; Bool
</span><a href="GHC.Utils.Misc.html#lengthIs"><span class="hs-operator hs-var">`lengthIs`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; ExpansionFuel
</span><a href="GHC.Core.TyCon.html#tyConArity"><span class="hs-identifier hs-var">tyConArity</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723086"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-814"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CanEqLHS -&gt; Maybe CanEqLHS
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(CanEqLHS -&gt; Maybe CanEqLHS) -&gt; CanEqLHS -&gt; Maybe CanEqLHS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Xi] -&gt; CanEqLHS
</span><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-var">TyFamLHS</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723086"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723087"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-817"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CanEqLHS
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span class="annot"><span class="hs-comment">-- | Convert a 'CanEqLHS' back into a 'Type'</span></span><span>
</span><span id="line-820"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSType"><span class="hs-identifier hs-type">canEqLHSType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-821"></span><span id="canEqLHSType"><span class="annot"><span class="annottext">canEqLHSType :: CanEqLHS -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#canEqLHSType"><span class="hs-identifier hs-var hs-var">canEqLHSType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-type">TyVarLHS</span></a></span><span> </span><span id="local-6989586621682723094"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723094"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Xi
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723094"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-822"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSType"><span class="hs-identifier hs-var">canEqLHSType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-type">TyFamLHS</span></a></span><span> </span><span id="local-6989586621682723096"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723096"><span class="hs-identifier hs-var">fam_tc</span></a></span></span><span> </span><span id="local-6989586621682723097"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723097"><span class="hs-identifier hs-var">fam_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Xi] -&gt; Xi
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723096"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723097"><span class="hs-identifier hs-var">fam_args</span></a></span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span class="annot"><span class="hs-comment">-- | Retrieve the kind of a 'CanEqLHS'</span></span><span>
</span><span id="line-825"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSKind"><span class="hs-identifier hs-type">canEqLHSKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcKind"><span class="hs-identifier hs-type">TcKind</span></a></span><span>
</span><span id="line-826"></span><span id="canEqLHSKind"><span class="annot"><span class="annottext">canEqLHSKind :: CanEqLHS -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#canEqLHSKind"><span class="hs-identifier hs-var hs-var">canEqLHSKind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-type">TyVarLHS</span></a></span><span> </span><span id="local-6989586621682723099"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723099"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Xi
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723099"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-827"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#canEqLHSKind"><span class="hs-identifier hs-var">canEqLHSKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-type">TyFamLHS</span></a></span><span> </span><span id="local-6989586621682723101"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723101"><span class="hs-identifier hs-var">fam_tc</span></a></span></span><span> </span><span id="local-6989586621682723102"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723102"><span class="hs-identifier hs-var">fam_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; [Xi] -&gt; Xi
Xi -&gt; [Xi] -&gt; Xi
</span><a href="GHC.Core.Type.html#piResultTys"><span class="hs-identifier hs-var">piResultTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Xi
</span><a href="GHC.Core.TyCon.html#tyConKind"><span class="hs-identifier hs-var">tyConKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723101"><span class="hs-identifier hs-var">fam_tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723102"><span class="hs-identifier hs-var">fam_args</span></a></span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="annot"><span class="hs-comment">-- | Are two 'CanEqLHS's equal?</span></span><span>
</span><span id="line-830"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanEqLHS"><span class="hs-identifier hs-type">eqCanEqLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CanEqLHS"><span class="hs-identifier hs-type">CanEqLHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-831"></span><span id="eqCanEqLHS"><span class="annot"><span class="annottext">eqCanEqLHS :: CanEqLHS -&gt; CanEqLHS -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#eqCanEqLHS"><span class="hs-identifier hs-var hs-var">eqCanEqLHS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-type">TyVarLHS</span></a></span><span> </span><span id="local-6989586621682723105"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723105"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyVarLHS"><span class="hs-identifier hs-type">TyVarLHS</span></a></span><span> </span><span id="local-6989586621682723106"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723106"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723105"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; EvVar -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723106"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-832"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanEqLHS"><span class="hs-identifier hs-var">eqCanEqLHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-type">TyFamLHS</span></a></span><span> </span><span id="local-6989586621682723107"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723107"><span class="hs-identifier hs-var">fam_tc1</span></a></span></span><span> </span><span id="local-6989586621682723108"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723108"><span class="hs-identifier hs-var">fam_args1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TyFamLHS"><span class="hs-identifier hs-type">TyFamLHS</span></a></span><span> </span><span id="local-6989586621682723109"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723109"><span class="hs-identifier hs-var">fam_tc2</span></a></span></span><span> </span><span id="local-6989586621682723110"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723110"><span class="hs-identifier hs-var">fam_args2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Xi] -&gt; TyCon -&gt; [Xi] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier hs-var">tcEqTyConApps</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723107"><span class="hs-identifier hs-var">fam_tc1</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723108"><span class="hs-identifier hs-var">fam_args1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723109"><span class="hs-identifier hs-var">fam_tc2</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723110"><span class="hs-identifier hs-var">fam_args2</span></a></span><span>
</span><span id="line-834"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanEqLHS"><span class="hs-identifier hs-var">eqCanEqLHS</span></a></span><span> </span><span class="annot"><span class="annottext">CanEqLHS
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CanEqLHS
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Simple functions over evidence variables
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span class="hs-comment">---------------- Getting bound tyvars -------------------------</span><span>
</span><span id="line-845"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#boundOccNamesOfWC"><span class="hs-identifier hs-type">boundOccNamesOfWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-846"></span><span class="hs-comment">-- Return the OccNames of skolem-bound type variables</span><span>
</span><span id="line-847"></span><span class="hs-comment">-- We could recurse into types, and get the forall-bound ones too,</span><span>
</span><span id="line-848"></span><span class="hs-comment">-- but I'm going wait until that is needed</span><span>
</span><span id="line-849"></span><span class="hs-comment">-- See Note [tidyAvoiding] in GHC.Core.TyCo.Tidy</span><span>
</span><span id="line-850"></span><span id="boundOccNamesOfWC"><span class="annot"><span class="annottext">boundOccNamesOfWC :: WantedConstraints -&gt; [OccName]
</span><a href="GHC.Tc.Types.Constraint.html#boundOccNamesOfWC"><span class="hs-identifier hs-var hs-var">boundOccNamesOfWC</span></a></span></span><span> </span><span id="local-6989586621682723112"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723112"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag OccName -&gt; [OccName]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bag OccName
</span><a href="#local-6989586621682723114"><span class="hs-identifier hs-var">go_wc</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723112"><span class="hs-identifier hs-var">wc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-852"></span><span>    </span><span id="local-6989586621682723114"><span class="annot"><span class="annottext">go_wc :: WantedConstraints -&gt; Bag OccName
</span><a href="#local-6989586621682723114"><span class="hs-identifier hs-var hs-var">go_wc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723119"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723119"><span class="hs-identifier hs-var">implics</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-853"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Bag OccName) -&gt; Bag Implication -&gt; Bag OccName
forall a b. (a -&gt; Bag b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#concatMapBag"><span class="hs-identifier hs-var">concatMapBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Bag OccName
</span><a href="#local-6989586621682723121"><span class="hs-identifier hs-var">go_implic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723119"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-854"></span><span>    </span><span id="local-6989586621682723121"><span class="annot"><span class="annottext">go_implic :: Implication -&gt; Bag OccName
</span><a href="#local-6989586621682723121"><span class="hs-identifier hs-var hs-var">go_implic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723124"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723124"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_wanted :: Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723126"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723126"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-855"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[OccName] -&gt; Bag OccName
forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EvVar -&gt; OccName) -&gt; [EvVar] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723124"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag OccName -&gt; Bag OccName -&gt; Bag OccName
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bag OccName
</span><a href="#local-6989586621682723114"><span class="hs-identifier hs-var">go_wc</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723126"><span class="hs-identifier hs-var">wc</span></a></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span class="hs-comment">---------------- Getting free tyvars -------------------------</span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span class="annot"><span class="hs-comment">-- | Returns free variables of constraints as a non-deterministic set</span></span><span>
</span><span id="line-861"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCt"><span class="hs-identifier hs-type">tyCoVarsOfCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVarSet"><span class="hs-identifier hs-type">TcTyCoVarSet</span></a></span><span>
</span><span id="line-862"></span><span id="tyCoVarsOfCt"><span class="annot"><span class="annottext">tyCoVarsOfCt :: Ct -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCt"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; TcTyCoVarSet
</span><a href="GHC.Utils.FV.html#fvVarSet"><span class="hs-identifier hs-var">fvVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; TcTyCoVarSet) -&gt; (Ct -&gt; FV) -&gt; Ct -&gt; TcTyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCt"><span class="hs-identifier hs-var">tyCoFVsOfCt</span></a></span><span>
</span><span id="line-863"></span><span>
</span><span id="line-864"></span><span class="annot"><span class="hs-comment">-- | Returns free variables of constraints as a non-deterministic set</span></span><span>
</span><span id="line-865"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEv"><span class="hs-identifier hs-type">tyCoVarsOfCtEv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVarSet"><span class="hs-identifier hs-type">TcTyCoVarSet</span></a></span><span>
</span><span id="line-866"></span><span id="tyCoVarsOfCtEv"><span class="annot"><span class="annottext">tyCoVarsOfCtEv :: CtEvidence -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEv"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCtEv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; TcTyCoVarSet
</span><a href="GHC.Utils.FV.html#fvVarSet"><span class="hs-identifier hs-var">fvVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; TcTyCoVarSet)
-&gt; (CtEvidence -&gt; FV) -&gt; CtEvidence -&gt; TcTyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEv"><span class="hs-identifier hs-var">tyCoFVsOfCtEv</span></a></span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span class="hs-comment">-- | Returns free variables of constraints as a deterministically ordered</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- list. See Note [Deterministic FV] in GHC.Utils.FV.</span><span>
</span><span id="line-870"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtList"><span class="hs-identifier hs-type">tyCoVarsOfCtList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVar"><span class="hs-identifier hs-type">TcTyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-871"></span><span id="tyCoVarsOfCtList"><span class="annot"><span class="annottext">tyCoVarsOfCtList :: Ct -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtList"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCtList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; [EvVar]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; [EvVar]) -&gt; (Ct -&gt; FV) -&gt; Ct -&gt; [EvVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCt"><span class="hs-identifier hs-var">tyCoFVsOfCt</span></a></span><span>
</span><span id="line-872"></span><span>
</span><span id="line-873"></span><span class="hs-comment">-- | Returns free variables of constraints as a deterministically ordered</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- list. See Note [Deterministic FV] in GHC.Utils.FV.</span><span>
</span><span id="line-875"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvList"><span class="hs-identifier hs-type">tyCoVarsOfCtEvList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVar"><span class="hs-identifier hs-type">TcTyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-876"></span><span id="tyCoVarsOfCtEvList"><span class="annot"><span class="annottext">tyCoVarsOfCtEvList :: CtEvidence -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvList"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCtEvList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; [EvVar]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; [EvVar]) -&gt; (CtEvidence -&gt; FV) -&gt; CtEvidence -&gt; [EvVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; FV) -&gt; (CtEvidence -&gt; Xi) -&gt; CtEvidence -&gt; FV
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span>
</span><span id="line-877"></span><span>
</span><span id="line-878"></span><span class="hs-comment">-- | Returns free variables of constraints as a composable FV computation.</span><span>
</span><span id="line-879"></span><span class="hs-comment">-- See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-880"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCt"><span class="hs-identifier hs-type">tyCoFVsOfCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-881"></span><span id="tyCoFVsOfCt"><span class="annot"><span class="annottext">tyCoFVsOfCt :: Ct -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCt"><span class="hs-identifier hs-var hs-var">tyCoFVsOfCt</span></a></span></span><span> </span><span id="local-6989586621682723136"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723136"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723136"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-comment">-- This must consult only the ctPred, so that it gets *tidied* fvs if the</span><span>
</span><span id="line-883"></span><span>  </span><span class="hs-comment">-- constraint has been tidied. Tidying a constraint does not tidy the</span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-comment">-- fields of the Ct, only the predicate in the CtEvidence.</span><span>
</span><span id="line-885"></span><span>
</span><span id="line-886"></span><span class="hs-comment">-- | Returns free variables of constraints as a composable FV computation.</span><span>
</span><span id="line-887"></span><span class="hs-comment">-- See Note [Deterministic FV] in GHC.Utils.FV.</span><span>
</span><span id="line-888"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEv"><span class="hs-identifier hs-type">tyCoFVsOfCtEv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-889"></span><span id="tyCoFVsOfCtEv"><span class="annot"><span class="annottext">tyCoFVsOfCtEv :: CtEvidence -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEv"><span class="hs-identifier hs-var hs-var">tyCoFVsOfCtEv</span></a></span></span><span> </span><span id="local-6989586621682723137"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723137"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723137"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>
</span><span id="line-891"></span><span class="hs-comment">-- | Returns free variables of a bag of constraints as a non-deterministic</span><span>
</span><span id="line-892"></span><span class="hs-comment">-- set. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-893"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCts"><span class="hs-identifier hs-type">tyCoVarsOfCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVarSet"><span class="hs-identifier hs-type">TcTyCoVarSet</span></a></span><span>
</span><span id="line-894"></span><span id="tyCoVarsOfCts"><span class="annot"><span class="annottext">tyCoVarsOfCts :: Cts -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCts"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; TcTyCoVarSet
</span><a href="GHC.Utils.FV.html#fvVarSet"><span class="hs-identifier hs-var">fvVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; TcTyCoVarSet) -&gt; (Cts -&gt; FV) -&gt; Cts -&gt; TcTyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Cts -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCts"><span class="hs-identifier hs-var">tyCoFVsOfCts</span></a></span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="hs-comment">-- | Returns free variables of a bag of constraints as a deterministically</span><span>
</span><span id="line-897"></span><span class="hs-comment">-- ordered list. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-898"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtsList"><span class="hs-identifier hs-type">tyCoVarsOfCtsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVar"><span class="hs-identifier hs-type">TcTyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-899"></span><span id="tyCoVarsOfCtsList"><span class="annot"><span class="annottext">tyCoVarsOfCtsList :: Cts -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtsList"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCtsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; [EvVar]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; [EvVar]) -&gt; (Cts -&gt; FV) -&gt; Cts -&gt; [EvVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Cts -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCts"><span class="hs-identifier hs-var">tyCoFVsOfCts</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span class="hs-comment">-- | Returns free variables of a bag of constraints as a deterministically</span><span>
</span><span id="line-902"></span><span class="hs-comment">-- ordered list. See Note [Deterministic FV] in GHC.Utils.FV.</span><span>
</span><span id="line-903"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvsList"><span class="hs-identifier hs-type">tyCoVarsOfCtEvsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCoVar"><span class="hs-identifier hs-type">TcTyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-904"></span><span id="tyCoVarsOfCtEvsList"><span class="annot"><span class="annottext">tyCoVarsOfCtEvsList :: [CtEvidence] -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfCtEvsList"><span class="hs-identifier hs-var hs-var">tyCoVarsOfCtEvsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; [EvVar]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; [EvVar]) -&gt; ([CtEvidence] -&gt; FV) -&gt; [CtEvidence] -&gt; [EvVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[CtEvidence] -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEvs"><span class="hs-identifier hs-var">tyCoFVsOfCtEvs</span></a></span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span class="hs-comment">-- | Returns free variables of a bag of constraints as a composable FV</span><span>
</span><span id="line-907"></span><span class="hs-comment">-- computation. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-908"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCts"><span class="hs-identifier hs-type">tyCoFVsOfCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-909"></span><span id="tyCoFVsOfCts"><span class="annot"><span class="annottext">tyCoFVsOfCts :: Cts -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCts"><span class="hs-identifier hs-var hs-var">tyCoFVsOfCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; FV -&gt; FV) -&gt; FV -&gt; Cts -&gt; FV
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-identifier hs-var">unionFV</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; FV -&gt; FV) -&gt; (Ct -&gt; FV) -&gt; Ct -&gt; FV -&gt; FV
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCt"><span class="hs-identifier hs-var">tyCoFVsOfCt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FV
</span><a href="GHC.Utils.FV.html#emptyFV"><span class="hs-identifier hs-var">emptyFV</span></a></span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="hs-comment">-- | Returns free variables of a bag of constraints as a composable FV</span><span>
</span><span id="line-912"></span><span class="hs-comment">-- computation. See Note [Deterministic FV] in GHC.Utils.FV.</span><span>
</span><span id="line-913"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEvs"><span class="hs-identifier hs-type">tyCoFVsOfCtEvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-914"></span><span id="tyCoFVsOfCtEvs"><span class="annot"><span class="annottext">tyCoFVsOfCtEvs :: [CtEvidence] -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEvs"><span class="hs-identifier hs-var hs-var">tyCoFVsOfCtEvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; FV -&gt; FV) -&gt; FV -&gt; [CtEvidence] -&gt; FV
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-identifier hs-var">unionFV</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; FV -&gt; FV) -&gt; (CtEvidence -&gt; FV) -&gt; CtEvidence -&gt; FV -&gt; FV
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCtEv"><span class="hs-identifier hs-var">tyCoFVsOfCtEv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FV
</span><a href="GHC.Utils.FV.html#emptyFV"><span class="hs-identifier hs-var">emptyFV</span></a></span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-comment">-- | Returns free variables of WantedConstraints as a non-deterministic</span><span>
</span><span id="line-917"></span><span class="hs-comment">-- set. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-918"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWC"><span class="hs-identifier hs-type">tyCoVarsOfWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span><span>
</span><span id="line-919"></span><span class="hs-comment">-- Only called on *zonked* things</span><span>
</span><span id="line-920"></span><span id="tyCoVarsOfWC"><span class="annot"><span class="annottext">tyCoVarsOfWC :: WantedConstraints -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWC"><span class="hs-identifier hs-var hs-var">tyCoVarsOfWC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; TcTyCoVarSet
</span><a href="GHC.Utils.FV.html#fvVarSet"><span class="hs-identifier hs-var">fvVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; TcTyCoVarSet)
-&gt; (WantedConstraints -&gt; FV) -&gt; WantedConstraints -&gt; TcTyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfWC"><span class="hs-identifier hs-var">tyCoFVsOfWC</span></a></span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="hs-comment">-- | Returns free variables of WantedConstraints as a deterministically</span><span>
</span><span id="line-923"></span><span class="hs-comment">-- ordered list. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-924"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWCList"><span class="hs-identifier hs-type">tyCoVarsOfWCList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-925"></span><span class="hs-comment">-- Only called on *zonked* things</span><span>
</span><span id="line-926"></span><span id="tyCoVarsOfWCList"><span class="annot"><span class="annottext">tyCoVarsOfWCList :: WantedConstraints -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#tyCoVarsOfWCList"><span class="hs-identifier hs-var hs-var">tyCoVarsOfWCList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV -&gt; [EvVar]
</span><a href="GHC.Utils.FV.html#fvVarList"><span class="hs-identifier hs-var">fvVarList</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; [EvVar])
-&gt; (WantedConstraints -&gt; FV) -&gt; WantedConstraints -&gt; [EvVar]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfWC"><span class="hs-identifier hs-var">tyCoFVsOfWC</span></a></span><span>
</span><span id="line-927"></span><span>
</span><span id="line-928"></span><span class="hs-comment">-- | Returns free variables of WantedConstraints as a composable FV</span><span>
</span><span id="line-929"></span><span class="hs-comment">-- computation. See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-930"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfWC"><span class="hs-identifier hs-type">tyCoFVsOfWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-931"></span><span class="hs-comment">-- Only called on *zonked* things</span><span>
</span><span id="line-932"></span><span id="tyCoFVsOfWC"><span class="annot"><span class="annottext">tyCoFVsOfWC :: WantedConstraints -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfWC"><span class="hs-identifier hs-var hs-var">tyCoFVsOfWC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723147"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723147"><span class="hs-identifier hs-var">simple</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723148"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723148"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723150"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723150"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfCts"><span class="hs-identifier hs-var">tyCoFVsOfCts</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723147"><span class="hs-identifier hs-var">simple</span></a></span><span> </span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-operator hs-var">`unionFV`</span></a></span><span>
</span><span id="line-934"></span><span>    </span><span class="annot"><span class="annottext">(Implication -&gt; FV) -&gt; Bag Implication -&gt; FV
forall a. (a -&gt; FV) -&gt; Bag a -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfBag"><span class="hs-identifier hs-var">tyCoFVsOfBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfImplic"><span class="hs-identifier hs-var">tyCoFVsOfImplic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723148"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-operator hs-var">`unionFV`</span></a></span><span>
</span><span id="line-935"></span><span>    </span><span class="annot"><span class="annottext">(DelayedError -&gt; FV) -&gt; Bag DelayedError -&gt; FV
forall a. (a -&gt; FV) -&gt; Bag a -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfBag"><span class="hs-identifier hs-var">tyCoFVsOfBag</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedError -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfDelayedError"><span class="hs-identifier hs-var">tyCoFVsOfDelayedError</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723150"><span class="hs-identifier hs-var">errors</span></a></span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span class="hs-comment">-- | Returns free variables of Implication as a composable FV computation.</span><span>
</span><span id="line-938"></span><span class="hs-comment">-- See Note [Deterministic FV] in &quot;GHC.Utils.FV&quot;.</span><span>
</span><span id="line-939"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfImplic"><span class="hs-identifier hs-type">tyCoFVsOfImplic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-940"></span><span class="hs-comment">-- Only called on *zonked* things</span><span>
</span><span id="line-941"></span><span id="tyCoFVsOfImplic"><span class="annot"><span class="annottext">tyCoFVsOfImplic :: Implication -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfImplic"><span class="hs-identifier hs-var hs-var">tyCoFVsOfImplic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723154"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723154"><span class="hs-identifier hs-var">skols</span></a></span></span><span>
</span><span id="line-942"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723156"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723156"><span class="hs-identifier hs-var">givens</span></a></span></span><span>
</span><span id="line-943"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_wanted :: Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723157"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723157"><span class="hs-identifier hs-var">wanted</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-944"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyWC"><span class="hs-identifier hs-var">isEmptyWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723157"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-945"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV
</span><a href="GHC.Utils.FV.html#emptyFV"><span class="hs-identifier hs-var">emptyFV</span></a></span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EvVar] -&gt; FV -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsVarBndrs"><span class="hs-identifier hs-var">tyCoFVsVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723154"><span class="hs-identifier hs-var">skols</span></a></span><span>  </span><span class="annot"><span class="annottext">(FV -&gt; FV) -&gt; FV -&gt; FV
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-948"></span><span>    </span><span class="annot"><span class="annottext">[EvVar] -&gt; FV -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsVarBndrs"><span class="hs-identifier hs-var">tyCoFVsVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723156"><span class="hs-identifier hs-var">givens</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; FV) -&gt; FV -&gt; FV
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-949"></span><span>    </span><span class="annot"><span class="annottext">WantedConstraints -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfWC"><span class="hs-identifier hs-var">tyCoFVsOfWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723157"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfDelayedError"><span class="hs-identifier hs-type">tyCoFVsOfDelayedError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier hs-type">DelayedError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-952"></span><span id="tyCoFVsOfDelayedError"><span class="annot"><span class="annottext">tyCoFVsOfDelayedError :: DelayedError -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfDelayedError"><span class="hs-identifier hs-var hs-var">tyCoFVsOfDelayedError</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span id="local-6989586621682723159"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723159"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfHole"><span class="hs-identifier hs-var">tyCoFVsOfHole</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723159"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-953"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfDelayedError"><span class="hs-identifier hs-var">tyCoFVsOfDelayedError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FV
</span><a href="GHC.Utils.FV.html#emptyFV"><span class="hs-identifier hs-var">emptyFV</span></a></span><span>
</span><span id="line-954"></span><span>
</span><span id="line-955"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfHole"><span class="hs-identifier hs-type">tyCoFVsOfHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span>
</span><span id="line-956"></span><span id="tyCoFVsOfHole"><span class="annot"><span class="annottext">tyCoFVsOfHole :: Hole -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfHole"><span class="hs-identifier hs-var hs-var">tyCoFVsOfHole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_ty :: Hole -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#hole_ty"><span class="hs-identifier hs-var">hole_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723161"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723161"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; FV
</span><a href="GHC.Core.TyCo.FVs.html#tyCoFVsOfType"><span class="hs-identifier hs-var">tyCoFVsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723161"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span id="local-6989586621682722374"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfBag"><span class="hs-identifier hs-type">tyCoFVsOfBag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682722374"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682722374"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.FV.html#FV"><span class="hs-identifier hs-type">FV</span></a></span></span><span>
</span><span id="line-959"></span><span id="tyCoFVsOfBag"><span class="annot"><span class="annottext">tyCoFVsOfBag :: forall a. (a -&gt; FV) -&gt; Bag a -&gt; FV
</span><a href="GHC.Tc.Types.Constraint.html#tyCoFVsOfBag"><span class="hs-identifier hs-var hs-var">tyCoFVsOfBag</span></a></span></span><span> </span><span id="local-6989586621682723163"><span class="annot"><span class="annottext">a -&gt; FV
</span><a href="#local-6989586621682723163"><span class="hs-identifier hs-var">tvs_of</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; FV -&gt; FV) -&gt; FV -&gt; Bag a -&gt; FV
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FV -&gt; FV -&gt; FV
</span><a href="GHC.Utils.FV.html#unionFV"><span class="hs-identifier hs-var">unionFV</span></a></span><span> </span><span class="annot"><span class="annottext">(FV -&gt; FV -&gt; FV) -&gt; (a -&gt; FV) -&gt; a -&gt; FV -&gt; FV
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; FV
</span><a href="#local-6989586621682723163"><span class="hs-identifier hs-var">tvs_of</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FV
</span><a href="GHC.Utils.FV.html#emptyFV"><span class="hs-identifier hs-var">emptyFV</span></a></span><span>
</span><span id="line-960"></span><span>
</span><span id="line-961"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    CtEvidence
         The &quot;flavor&quot; of a canonical constraint
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-969"></span><span>
</span><span id="line-970"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isWantedCt"><span class="hs-identifier hs-type">isWantedCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-971"></span><span id="isWantedCt"><span class="annot"><span class="annottext">isWantedCt :: Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isWantedCt"><span class="hs-identifier hs-var hs-var">isWantedCt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isWanted"><span class="hs-identifier hs-var">isWanted</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Bool) -&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-972"></span><span>
</span><span id="line-973"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isGivenCt"><span class="hs-identifier hs-type">isGivenCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-974"></span><span id="isGivenCt"><span class="annot"><span class="annottext">isGivenCt :: Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isGivenCt"><span class="hs-identifier hs-var hs-var">isGivenCt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isGiven"><span class="hs-identifier hs-var">isGiven</span></a></span><span> </span><span class="annot"><span class="annottext">(CtEvidence -&gt; Bool) -&gt; (Ct -&gt; CtEvidence) -&gt; Ct -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span>
</span><span id="line-975"></span><span>
</span><span id="line-976"></span><span class="hs-comment">{- Note [Custom type errors in constraints]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When GHC reports a type-error about an unsolved-constraint, we check
to see if the constraint contains any custom-type errors, and if so
we report them.  Here are some examples of constraints containing type
errors:

TypeError msg           -- The actual constraint is a type error

TypError msg ~ Int      -- Some type was supposed to be Int, but ended up
                        -- being a type error instead

Eq (TypeError msg)      -- A class constraint is stuck due to a type error

F (TypeError msg) ~ a   -- A type function failed to evaluate due to a type err

It is also possible to have constraints where the type error is nested deeper,
for example see #11990, and also:

Eq (F (TypeError msg))  -- Here the type error is nested under a type-function
                        -- call, which failed to evaluate because of it,
                        -- and so the `Eq` constraint was unsolved.
                        -- This may happen when one function calls another
                        -- and the called function produced a custom type error.
-}</span><span>
</span><span id="line-1002"></span><span>
</span><span id="line-1003"></span><span class="hs-comment">-- | A constraint is considered to be a custom type error, if it contains</span><span>
</span><span id="line-1004"></span><span class="hs-comment">-- custom type errors anywhere in it.</span><span>
</span><span id="line-1005"></span><span class="hs-comment">-- See Note [Custom type errors in constraints]</span><span>
</span><span id="line-1006"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier hs-type">getUserTypeErrorMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Type.html#ErrorMsgType"><span class="hs-identifier hs-type">ErrorMsgType</span></a></span><span>
</span><span id="line-1007"></span><span id="getUserTypeErrorMsg"><span class="annot"><span class="annottext">getUserTypeErrorMsg :: Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier hs-var hs-var">getUserTypeErrorMsg</span></a></span></span><span> </span><span id="local-6989586621682723165"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723165"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Xi] -&gt; Maybe Xi
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, MonadPlus m) =&gt;
t (m a) -&gt; m a
</span><span class="hs-identifier hs-var">msum</span></span><span> </span><span class="annot"><span class="annottext">([Maybe Xi] -&gt; Maybe Xi) -&gt; [Maybe Xi] -&gt; Maybe Xi
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Core.Type.html#userTypeError_maybe"><span class="hs-identifier hs-var">userTypeError_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723165"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-1008"></span><span>                                  </span><span class="annot"><span class="annottext">Maybe Xi -&gt; [Maybe Xi] -&gt; [Maybe Xi]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; Maybe Xi) -&gt; [Xi] -&gt; [Maybe Xi]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier hs-var">getUserTypeErrorMsg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; [Xi]
</span><a href="#local-6989586621682723167"><span class="hs-identifier hs-var">subTys</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723165"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1010"></span><span>   </span><span class="hs-comment">-- Richard thinks this function is very broken. What is subTys</span><span>
</span><span id="line-1011"></span><span>   </span><span class="hs-comment">-- supposed to be doing? Why are exactly-saturated tyconapps special?</span><span>
</span><span id="line-1012"></span><span>   </span><span class="hs-comment">-- What stops this from accidentally ripping apart a call to TypeError?</span><span>
</span><span id="line-1013"></span><span>    </span><span id="local-6989586621682723167"><span class="annot"><span class="annottext">subTys :: Xi -&gt; [Xi]
</span><a href="#local-6989586621682723167"><span class="hs-identifier hs-var hs-var">subTys</span></a></span></span><span> </span><span id="local-6989586621682723170"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723170"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; (Xi, [Xi])
Xi -&gt; (Xi, [Xi])
</span><a href="GHC.Core.Type.html#splitAppTys"><span class="hs-identifier hs-var">splitAppTys</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723170"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1014"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682723172"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723172"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1015"></span><span>                   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Maybe (TyCon, [Xi])
Xi -&gt; Maybe (TyCon, [Xi])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723172"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1016"></span><span>                              </span><span class="annot"><span class="annottext">Maybe (TyCon, [Xi])
</span><span class="hs-identifier hs-var">Nothing</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1017"></span><span>                              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682723174"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723174"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723174"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1018"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682723175"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723175"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682723176"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723176"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723175"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; [Xi] -&gt; [Xi]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723176"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="hs-comment">-- | Is this an user error message type, i.e. either the form @TypeError err@ or</span><span>
</span><span id="line-1021"></span><span class="hs-comment">-- @Unsatisfiable err@?</span><span>
</span><span id="line-1022"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isTopLevelUserTypeError"><span class="hs-identifier hs-type">isTopLevelUserTypeError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1023"></span><span id="isTopLevelUserTypeError"><span class="annot"><span class="annottext">isTopLevelUserTypeError :: Xi -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isTopLevelUserTypeError"><span class="hs-identifier hs-var hs-var">isTopLevelUserTypeError</span></a></span></span><span> </span><span id="local-6989586621682723177"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723177"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1024"></span><span>  </span><span class="annot"><span class="annottext">Maybe Xi -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Core.Type.html#userTypeError_maybe"><span class="hs-identifier hs-var">userTypeError_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723177"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe Xi -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#isUnsatisfiableCt_maybe"><span class="hs-identifier hs-var">isUnsatisfiableCt_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723177"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1025"></span><span>
</span><span id="line-1026"></span><span class="hs-comment">-- | Does this constraint contain an user error message?</span><span>
</span><span id="line-1027"></span><span class="hs-comment">--</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- That is, the type is either of the form @Unsatisfiable err@, or it contains</span><span>
</span><span id="line-1029"></span><span class="hs-comment">-- a type of the form @TypeError msg@, either at the top level or nested inside</span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- the type.</span><span>
</span><span id="line-1031"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#containsUserTypeError"><span class="hs-identifier hs-type">containsUserTypeError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1032"></span><span id="containsUserTypeError"><span class="annot"><span class="annottext">containsUserTypeError :: Xi -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#containsUserTypeError"><span class="hs-identifier hs-var hs-var">containsUserTypeError</span></a></span></span><span> </span><span id="local-6989586621682723179"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723179"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1033"></span><span>  </span><span class="annot"><span class="annottext">Maybe Xi -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#getUserTypeErrorMsg"><span class="hs-identifier hs-var">getUserTypeErrorMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723179"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe Xi -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#isUnsatisfiableCt_maybe"><span class="hs-identifier hs-var">isUnsatisfiableCt_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723179"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1034"></span><span>
</span><span id="line-1035"></span><span class="hs-comment">-- | Is this type an unsatisfiable constraint?</span><span>
</span><span id="line-1036"></span><span class="hs-comment">-- If so, return the error message.</span><span>
</span><span id="line-1037"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isUnsatisfiableCt_maybe"><span class="hs-identifier hs-type">isUnsatisfiableCt_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Type.html#ErrorMsgType"><span class="hs-identifier hs-type">ErrorMsgType</span></a></span><span>
</span><span id="line-1038"></span><span id="isUnsatisfiableCt_maybe"><span class="annot"><span class="annottext">isUnsatisfiableCt_maybe :: Xi -&gt; Maybe Xi
</span><a href="GHC.Tc.Types.Constraint.html#isUnsatisfiableCt_maybe"><span class="hs-identifier hs-var hs-var">isUnsatisfiableCt_maybe</span></a></span></span><span> </span><span id="local-6989586621682723180"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723180"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-1039"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682723181"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723181"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682723182"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723182"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Maybe (TyCon, [Xi])
Xi -&gt; Maybe (TyCon, [Xi])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723180"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1040"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682723181"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#unsatisfiableClassNameKey"><span class="hs-identifier hs-var">unsatisfiableClassNameKey</span></a></span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe Xi
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723182"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1042"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1043"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Xi
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isPendingScDict"><span class="hs-identifier hs-type">isPendingScDict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1046"></span><span id="isPendingScDict"><span class="annot"><span class="annottext">isPendingScDict :: Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isPendingScDict"><span class="hs-identifier hs-var hs-var">isPendingScDict</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span id="local-6989586621682723185"><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723185"><span class="hs-identifier hs-var">dict_ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DictCt -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isPendingScDictCt"><span class="hs-identifier hs-var">isPendingScDictCt</span></a></span><span> </span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723185"><span class="hs-identifier hs-var">dict_ct</span></a></span><span>
</span><span id="line-1047"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isPendingScDict"><span class="hs-identifier hs-var">isPendingScDict</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1048"></span><span>
</span><span id="line-1049"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isPendingScDictCt"><span class="hs-identifier hs-type">isPendingScDictCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1050"></span><span class="hs-comment">-- Says whether this is a CDictCan with di_pend_sc has positive fuel;</span><span>
</span><span id="line-1051"></span><span class="hs-comment">-- i.e. pending un-expanded superclasses</span><span>
</span><span id="line-1052"></span><span id="isPendingScDictCt"><span class="annot"><span class="annottext">isPendingScDictCt :: DictCt -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isPendingScDictCt"><span class="hs-identifier hs-var hs-var">isPendingScDictCt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_pend_sc :: DictCt -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#di_pend_sc"><span class="hs-identifier hs-var">di_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723186"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723186"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-var">pendingFuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723186"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1053"></span><span>
</span><span id="line-1054"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingScDict_maybe"><span class="hs-identifier hs-type">pendingScDict_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1055"></span><span class="hs-comment">-- Says whether this is a CDictCan with di_pend_sc has fuel left,</span><span>
</span><span id="line-1056"></span><span class="hs-comment">-- AND if so exhausts the fuel so that they are not expanded again</span><span>
</span><span id="line-1057"></span><span id="pendingScDict_maybe"><span class="annot"><span class="annottext">pendingScDict_maybe :: Ct -&gt; Maybe Ct
</span><a href="GHC.Tc.Types.Constraint.html#pendingScDict_maybe"><span class="hs-identifier hs-var hs-var">pendingScDict_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span id="local-6989586621682723187"><span class="annot"><span class="annottext">dict :: DictCt
</span><a href="#local-6989586621682723187"><span class="hs-identifier hs-var">dict</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_pend_sc :: DictCt -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#di_pend_sc"><span class="hs-identifier hs-var">di_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723188"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723188"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1058"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-var">pendingFuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723188"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Ct
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DictCt -&gt; Ct
</span><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-var">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723187"><span class="hs-identifier hs-var">dict</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#di_pend_sc"><span class="hs-identifier hs-var">di_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#doNotExpand"><span class="hs-identifier hs-type">doNotExpand</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1059"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Ct
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1060"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingScDict_maybe"><span class="hs-identifier hs-var">pendingScDict_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Ct
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pendingScInst_maybe"><span class="hs-identifier hs-type">pendingScInst_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier hs-type">QCInst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCInst"><span class="hs-identifier hs-type">QCInst</span></a></span><span>
</span><span id="line-1063"></span><span class="hs-comment">-- Same as isPendingScDict, but for QCInsts</span><span>
</span><span id="line-1064"></span><span id="pendingScInst_maybe"><span class="annot"><span class="annottext">pendingScInst_maybe :: QCInst -&gt; Maybe QCInst
</span><a href="GHC.Tc.Types.Constraint.html#pendingScInst_maybe"><span class="hs-identifier hs-var hs-var">pendingScInst_maybe</span></a></span></span><span> </span><span id="local-6989586621682723189"><span class="annot"><span class="annottext">qci :: QCInst
</span><a href="#local-6989586621682723189"><span class="hs-identifier hs-var">qci</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#QCI"><span class="hs-identifier hs-type">QCI</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">qci_pend_sc :: QCInst -&gt; ExpansionFuel
</span><a href="GHC.Tc.Types.Constraint.html#qci_pend_sc"><span class="hs-identifier hs-var">qci_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723190"><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723190"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1065"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#pendingFuel"><span class="hs-identifier hs-var">pendingFuel</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><a href="#local-6989586621682723190"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QCInst -&gt; Maybe QCInst
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QCInst
</span><a href="#local-6989586621682723189"><span class="hs-identifier hs-var">qci</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#qci_pend_sc"><span class="hs-identifier hs-var">qci_pend_sc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#doNotExpand"><span class="hs-identifier hs-type">doNotExpand</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe QCInst
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1067"></span><span>
</span><span id="line-1068"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#superClassesMightHelp"><span class="hs-identifier hs-type">superClassesMightHelp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1069"></span><span class="hs-comment">-- ^ True if taking superclasses of givens, or of wanteds (to perhaps</span><span>
</span><span id="line-1070"></span><span class="hs-comment">-- expose more equalities or functional dependencies) might help to</span><span>
</span><span id="line-1071"></span><span class="hs-comment">-- solve this constraint.  See Note [When superclasses help]</span><span>
</span><span id="line-1072"></span><span id="superClassesMightHelp"><span class="annot"><span class="annottext">superClassesMightHelp :: WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#superClassesMightHelp"><span class="hs-identifier hs-var hs-var">superClassesMightHelp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723191"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723191"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723192"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723192"><span class="hs-identifier hs-var">implics</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Bool) -&gt; Cts -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#anyBag"><span class="hs-identifier hs-var">anyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="#local-6989586621682723194"><span class="hs-identifier hs-var">might_help_ct</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723191"><span class="hs-identifier hs-var">simples</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Bool) -&gt; Bag Implication -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#anyBag"><span class="hs-identifier hs-var">anyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Bool
</span><a href="#local-6989586621682723195"><span class="hs-identifier hs-var">might_help_implic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723192"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1074"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1075"></span><span>    </span><span id="local-6989586621682723195"><span class="annot"><span class="annottext">might_help_implic :: Implication -&gt; Bool
</span><a href="#local-6989586621682723195"><span class="hs-identifier hs-var hs-var">might_help_implic</span></a></span></span><span> </span><span id="local-6989586621682723196"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723196"><span class="hs-identifier hs-var">ic</span></a></span></span><span>
</span><span id="line-1076"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_Unsolved"><span class="hs-identifier hs-var">IC_Unsolved</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723196"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#superClassesMightHelp"><span class="hs-identifier hs-var">superClassesMightHelp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723196"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1077"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1078"></span><span>
</span><span id="line-1079"></span><span>    </span><span id="local-6989586621682723194"><span class="annot"><span class="annottext">might_help_ct :: Ct -&gt; Bool
</span><a href="#local-6989586621682723194"><span class="hs-identifier hs-var hs-var">might_help_ct</span></a></span></span><span> </span><span id="local-6989586621682723199"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723199"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="#local-6989586621682723201"><span class="hs-identifier hs-var">is_ip</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723199"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1080"></span><span>
</span><span id="line-1081"></span><span>    </span><span id="local-6989586621682723201"><span class="annot"><span class="annottext">is_ip :: Ct -&gt; Bool
</span><a href="#local-6989586621682723201"><span class="hs-identifier hs-var hs-var">is_ip</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_cls :: DictCt -&gt; Class
</span><a href="GHC.Tc.Types.Constraint.html#di_cls"><span class="hs-identifier hs-var">di_cls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723202"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682723202"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Class -&gt; Bool
</span><a href="GHC.Core.Predicate.html#isIPClass"><span class="hs-identifier hs-var">isIPClass</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621682723202"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-1082"></span><span>    </span><span class="annot"><a href="#local-6989586621682723201"><span class="hs-identifier hs-var">is_ip</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getPendingWantedScs"><span class="hs-identifier hs-type">getPendingWantedScs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1085"></span><span class="hs-comment">-- in the return values [Ct] has original fuel while Cts has fuel exhausted</span><span>
</span><span id="line-1086"></span><span id="getPendingWantedScs"><span class="annot"><span class="annottext">getPendingWantedScs :: Cts -&gt; ([Ct], Cts)
</span><a href="GHC.Tc.Types.Constraint.html#getPendingWantedScs"><span class="hs-identifier hs-var hs-var">getPendingWantedScs</span></a></span></span><span> </span><span id="local-6989586621682723204"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723204"><span class="hs-identifier hs-var">simples</span></a></span></span><span>
</span><span id="line-1087"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Ct] -&gt; Ct -&gt; ([Ct], Ct)) -&gt; [Ct] -&gt; Cts -&gt; ([Ct], Cts)
forall acc x y.
(acc -&gt; x -&gt; (acc, y)) -&gt; acc -&gt; Bag x -&gt; (acc, Bag y)
</span><a href="GHC.Data.Bag.html#mapAccumBagL"><span class="hs-identifier hs-var">mapAccumBagL</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; Ct -&gt; ([Ct], Ct)
</span><a href="#local-6989586621682723206"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723204"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-1088"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1089"></span><span>    </span><span id="local-6989586621682723206"><span class="annot"><span class="annottext">get :: [Ct] -&gt; Ct -&gt; ([Ct], Ct)
</span><a href="#local-6989586621682723206"><span class="hs-identifier hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682723207"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723207"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682723208"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723208"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682723209"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723209"><span class="hs-identifier hs-var">ct_exhausted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Maybe Ct
</span><a href="GHC.Tc.Types.Constraint.html#pendingScDict_maybe"><span class="hs-identifier hs-var">pendingScDict_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723208"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1090"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723208"><span class="hs-identifier hs-var">ct</span></a></span><span class="annot"><span class="annottext">Ct -&gt; [Ct] -&gt; [Ct]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723207"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723209"><span class="hs-identifier hs-var">ct_exhausted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1091"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1092"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723207"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723208"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>
</span><span id="line-1094"></span><span class="hs-comment">{- Note [When superclasses help]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
First read Note [The superclass story] in GHC.Tc.Solver.Dict

We expand superclasses and iterate only if there is at unsolved wanted
for which expansion of superclasses (e.g. from given constraints)
might actually help. The function superClassesMightHelp tells if
doing this superclass expansion might help solve this constraint.
Note that

  * We look inside implications; maybe it'll help to expand the Givens
    at level 2 to help solve an unsolved Wanted buried inside an
    implication.  E.g.
        forall a. Ord a =&gt; forall b. [W] Eq a

  * We say &quot;no&quot; for implicit parameters.
    we have [W] ?x::ty, expanding superclasses won't help:
      - Superclasses can't be implicit parameters
      - If we have a [G] ?x:ty2, then we'll have another unsolved
        [W] ty ~ ty2 (from the functional dependency)
        which will trigger superclass expansion.

    It's a bit of a special case, but it's easy to do.  The runtime cost
    is low because the unsolved set is usually empty anyway (errors
    aside), and the first non-implicit-parameter will terminate the search.

    The special case is worth it (#11480, comment:2) because it
    applies to CallStack constraints, which aren't type errors. If we have
       f :: (C a) =&gt; blah
       f x = ...undefined...
    we'll get a CallStack constraint.  If that's the only unsolved
    constraint it'll eventually be solved by defaulting.  So we don't
    want to emit warnings about hitting the simplifier's iteration
    limit.  A CallStack constraint really isn't an unsolved
    constraint; it can always be solved by defaulting.
-}</span><span>
</span><span id="line-1130"></span><span>
</span><span id="line-1131"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#singleCt"><span class="hs-identifier hs-type">singleCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1132"></span><span id="singleCt"><span class="annot"><span class="annottext">singleCt :: Ct -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#singleCt"><span class="hs-identifier hs-var hs-var">singleCt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Cts
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span>
</span><span id="line-1133"></span><span>
</span><span id="line-1134"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#andCts"><span class="hs-identifier hs-type">andCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1135"></span><span id="andCts"><span class="annot"><span class="annottext">andCts :: Cts -&gt; Cts -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#andCts"><span class="hs-identifier hs-var hs-var">andCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Cts -&gt; Cts
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-identifier hs-var">unionBags</span></a></span><span>
</span><span id="line-1136"></span><span>
</span><span id="line-1137"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#listToCts"><span class="hs-identifier hs-type">listToCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1138"></span><span id="listToCts"><span class="annot"><span class="annottext">listToCts :: [Ct] -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#listToCts"><span class="hs-identifier hs-var hs-var">listToCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; Cts
forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span>
</span><span id="line-1139"></span><span>
</span><span id="line-1140"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctsElts"><span class="hs-identifier hs-type">ctsElts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1141"></span><span id="ctsElts"><span class="annot"><span class="annottext">ctsElts :: Cts -&gt; [Ct]
</span><a href="GHC.Tc.Types.Constraint.html#ctsElts"><span class="hs-identifier hs-var hs-var">ctsElts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; [Ct]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#consCts"><span class="hs-identifier hs-type">consCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1144"></span><span id="consCts"><span class="annot"><span class="annottext">consCts :: Ct -&gt; Cts -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#consCts"><span class="hs-identifier hs-var hs-var">consCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Cts -&gt; Cts
forall a. a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#consBag"><span class="hs-identifier hs-var">consBag</span></a></span><span>
</span><span id="line-1145"></span><span>
</span><span id="line-1146"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#snocCts"><span class="hs-identifier hs-type">snocCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1147"></span><span id="snocCts"><span class="annot"><span class="annottext">snocCts :: Cts -&gt; Ct -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#snocCts"><span class="hs-identifier hs-var hs-var">snocCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Ct -&gt; Cts
forall a. Bag a -&gt; a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#snocBag"><span class="hs-identifier hs-var">snocBag</span></a></span><span>
</span><span id="line-1148"></span><span>
</span><span id="line-1149"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#extendCtsList"><span class="hs-identifier hs-type">extendCtsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1150"></span><span id="extendCtsList"><span class="annot"><span class="annottext">extendCtsList :: Cts -&gt; [Ct] -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#extendCtsList"><span class="hs-identifier hs-var hs-var">extendCtsList</span></a></span></span><span> </span><span id="local-6989586621682723213"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723213"><span class="hs-identifier hs-var">cts</span></a></span></span><span> </span><span id="local-6989586621682723214"><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723214"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723214"><span class="hs-identifier hs-var">xs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723213"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1151"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723213"><span class="hs-identifier hs-var">cts</span></a></span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Cts -&gt; Cts
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct] -&gt; Cts
forall a. [a] -&gt; Bag a
</span><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-var">listToBag</span></a></span><span> </span><span class="annot"><span class="annottext">[Ct]
</span><a href="#local-6989586621682723214"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1152"></span><span>
</span><span id="line-1153"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyCts"><span class="hs-identifier hs-type">emptyCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>
</span><span id="line-1154"></span><span id="emptyCts"><span class="annot"><span class="annottext">emptyCts :: Cts
</span><a href="GHC.Tc.Types.Constraint.html#emptyCts"><span class="hs-identifier hs-var hs-var">emptyCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-1155"></span><span>
</span><span id="line-1156"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyCts"><span class="hs-identifier hs-type">isEmptyCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1157"></span><span id="isEmptyCts"><span class="annot"><span class="annottext">isEmptyCts :: Cts -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyCts"><span class="hs-identifier hs-var hs-var">isEmptyCts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctsPreds"><span class="hs-identifier hs-type">ctsPreds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1160"></span><span id="ctsPreds"><span class="annot"><span class="annottext">ctsPreds :: Cts -&gt; [Xi]
</span><a href="GHC.Tc.Types.Constraint.html#ctsPreds"><span class="hs-identifier hs-var hs-var">ctsPreds</span></a></span></span><span> </span><span id="local-6989586621682723218"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723218"><span class="hs-identifier hs-var">cts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; [Xi] -&gt; [Xi]) -&gt; [Xi] -&gt; Cts -&gt; [Xi]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; [Xi] -&gt; [Xi]) -&gt; (Ct -&gt; Xi) -&gt; Ct -&gt; [Xi] -&gt; [Xi]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723218"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-1161"></span><span>
</span><span id="line-1162"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Wanted constraints
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1169"></span><span>
</span><span id="line-1170"></span><span class="hs-keyword">data</span><span> </span><span id="WantedConstraints"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-var">WantedConstraints</span></a></span></span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WC"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-var">WC</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="wc_simple"><span class="annot"><span class="annottext">WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var hs-var">wc_simple</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Cts"><span class="hs-identifier hs-type">Cts</span></a></span><span>              </span><span class="hs-comment">-- Unsolved constraints, all wanted</span><span>
</span><span id="line-1172"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="wc_impl"><span class="annot"><span class="annottext">WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var hs-var">wc_impl</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span>
</span><span id="line-1173"></span><span>       </span><span class="hs-special">,</span><span> </span><span id="wc_errors"><span class="annot"><span class="annottext">WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var hs-var">wc_errors</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier hs-type">DelayedError</span></a></span><span>
</span><span id="line-1174"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1175"></span><span>
</span><span id="line-1176"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-type">emptyWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1177"></span><span id="emptyWC"><span class="annot"><span class="annottext">emptyWC :: WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-var hs-var">emptyWC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-1178"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Implication
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-1179"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkSimpleWC"><span class="hs-identifier hs-type">mkSimpleWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1182"></span><span id="mkSimpleWC"><span class="annot"><span class="annottext">mkSimpleWC :: [CtEvidence] -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#mkSimpleWC"><span class="hs-identifier hs-var hs-var">mkSimpleWC</span></a></span></span><span> </span><span id="local-6989586621682723219"><span class="annot"><span class="annottext">[CtEvidence]
</span><a href="#local-6989586621682723219"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1183"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-var">emptyWC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#listToBag"><span class="hs-identifier hs-type">listToBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkNonCanonical"><span class="hs-identifier hs-type">mkNonCanonical</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723219"><span class="hs-identifier hs-type">cts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1184"></span><span>
</span><span id="line-1185"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#mkImplicWC"><span class="hs-identifier hs-type">mkImplicWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1186"></span><span id="mkImplicWC"><span class="annot"><span class="annottext">mkImplicWC :: Bag Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#mkImplicWC"><span class="hs-identifier hs-var hs-var">mkImplicWC</span></a></span></span><span> </span><span id="local-6989586621682723220"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723220"><span class="hs-identifier hs-var">implic</span></a></span></span><span>
</span><span id="line-1187"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-var">emptyWC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723220"><span class="hs-identifier hs-type">implic</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1188"></span><span>
</span><span id="line-1189"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyWC"><span class="hs-identifier hs-type">isEmptyWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1190"></span><span id="isEmptyWC"><span class="annot"><span class="annottext">isEmptyWC :: WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyWC"><span class="hs-identifier hs-var hs-var">isEmptyWC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723221"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723221"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723222"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723222"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723223"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723223"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723221"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bag Implication -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723222"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723223"><span class="hs-identifier hs-var">errors</span></a></span><span>
</span><span id="line-1192"></span><span>
</span><span id="line-1193"></span><span class="hs-comment">-- | Checks whether a the given wanted constraints are solved, i.e.</span><span>
</span><span id="line-1194"></span><span class="hs-comment">-- that there are no simple constraints left and all the implications</span><span>
</span><span id="line-1195"></span><span class="hs-comment">-- are solved.</span><span>
</span><span id="line-1196"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isSolvedWC"><span class="hs-identifier hs-type">isSolvedWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1197"></span><span id="isSolvedWC"><span class="annot"><span class="annottext">isSolvedWC :: WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isSolvedWC"><span class="hs-identifier hs-var hs-var">isSolvedWC</span></a></span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723225"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723225"><span class="hs-identifier hs-var">wc_simple</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723226"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723226"><span class="hs-identifier hs-var">wc_impl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723227"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723227"><span class="hs-identifier hs-var">errors</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1198"></span><span>  </span><span class="annot"><span class="annottext">Cts -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723225"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Bool) -&gt; Bag Implication -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#allBag"><span class="hs-identifier hs-var">allBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImplicStatus -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isSolvedStatus"><span class="hs-identifier hs-var">isSolvedStatus</span></a></span><span> </span><span class="annot"><span class="annottext">(ImplicStatus -&gt; Bool)
-&gt; (Implication -&gt; ImplicStatus) -&gt; Implication -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723226"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723227"><span class="hs-identifier hs-var">errors</span></a></span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#andWC"><span class="hs-identifier hs-type">andWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1201"></span><span id="andWC"><span class="annot"><span class="annottext">andWC :: WantedConstraints -&gt; WantedConstraints -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#andWC"><span class="hs-identifier hs-var hs-var">andWC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723229"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723229"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723230"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723230"><span class="hs-identifier hs-var">i1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723231"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723231"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1202"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723232"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723232"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723233"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723233"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723234"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723234"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723229"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">Cts -&gt; Cts -&gt; Cts
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723232"><span class="hs-identifier hs-var">f2</span></a></span><span>
</span><span id="line-1204"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723230"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication -&gt; Bag Implication -&gt; Bag Implication
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723233"><span class="hs-identifier hs-var">i2</span></a></span><span>
</span><span id="line-1205"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723231"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError -&gt; Bag DelayedError -&gt; Bag DelayedError
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723234"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unionsWC"><span class="hs-identifier hs-type">unionsWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1208"></span><span id="unionsWC"><span class="annot"><span class="annottext">unionsWC :: [WantedConstraints] -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#unionsWC"><span class="hs-identifier hs-var hs-var">unionsWC</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WantedConstraints -&gt; WantedConstraints -&gt; WantedConstraints)
-&gt; WantedConstraints -&gt; [WantedConstraints] -&gt; WantedConstraints
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">WantedConstraints -&gt; WantedConstraints -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#andWC"><span class="hs-identifier hs-var">andWC</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-var">emptyWC</span></a></span><span>
</span><span id="line-1209"></span><span>
</span><span id="line-1210"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addSimples"><span class="hs-identifier hs-type">addSimples</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1211"></span><span id="addSimples"><span class="annot"><span class="annottext">addSimples :: WantedConstraints -&gt; Cts -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addSimples"><span class="hs-identifier hs-var hs-var">addSimples</span></a></span></span><span> </span><span id="local-6989586621682723235"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723235"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723236"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723236"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-1212"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723235"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723235"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723236"><span class="hs-identifier hs-type">cts</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1213"></span><span>    </span><span class="hs-comment">-- Consider: Put the new constraints at the front, so they get solved first</span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addImplics"><span class="hs-identifier hs-type">addImplics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1216"></span><span id="addImplics"><span class="annot"><span class="annottext">addImplics :: WantedConstraints -&gt; Bag Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addImplics"><span class="hs-identifier hs-var hs-var">addImplics</span></a></span></span><span> </span><span id="local-6989586621682723237"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723237"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723238"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723238"><span class="hs-identifier hs-var">implic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723237"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723237"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723238"><span class="hs-identifier hs-type">implic</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addInsols"><span class="hs-identifier hs-type">addInsols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1219"></span><span id="addInsols"><span class="annot"><span class="annottext">addInsols :: WantedConstraints -&gt; Bag IrredCt -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addInsols"><span class="hs-identifier hs-var hs-var">addInsols</span></a></span></span><span> </span><span id="local-6989586621682723239"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723239"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723240"><span class="annot"><span class="annottext">Bag IrredCt
</span><a href="#local-6989586621682723240"><span class="hs-identifier hs-var">insols</span></a></span></span><span>
</span><span id="line-1220"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723239"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723239"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723240"><span class="hs-identifier hs-type">insols</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1221"></span><span>
</span><span id="line-1222"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addHoles"><span class="hs-identifier hs-type">addHoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1223"></span><span id="addHoles"><span class="annot"><span class="annottext">addHoles :: WantedConstraints -&gt; Bag Hole -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addHoles"><span class="hs-identifier hs-var hs-var">addHoles</span></a></span></span><span> </span><span id="local-6989586621682723241"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723241"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723242"><span class="annot"><span class="annottext">Bag Hole
</span><a href="#local-6989586621682723242"><span class="hs-identifier hs-var">holes</span></a></span></span><span>
</span><span id="line-1224"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723241"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-type">mapBag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723242"><span class="hs-identifier hs-type">holes</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723241"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1225"></span><span>
</span><span id="line-1226"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addNotConcreteError"><span class="hs-identifier hs-type">addNotConcreteError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NotConcreteError"><span class="hs-identifier hs-type">NotConcreteError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1227"></span><span id="addNotConcreteError"><span class="annot"><span class="annottext">addNotConcreteError :: WantedConstraints -&gt; NotConcreteError -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addNotConcreteError"><span class="hs-identifier hs-var hs-var">addNotConcreteError</span></a></span></span><span> </span><span id="local-6989586621682723244"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723244"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723245"><span class="annot"><span class="annottext">NotConcreteError
</span><a href="#local-6989586621682723245"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-1228"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723244"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-type">unitBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723245"><span class="hs-identifier hs-type">err</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723244"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1229"></span><span>
</span><span id="line-1230"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addDelayedErrors"><span class="hs-identifier hs-type">addDelayedErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DelayedError"><span class="hs-identifier hs-type">DelayedError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1231"></span><span id="addDelayedErrors"><span class="annot"><span class="annottext">addDelayedErrors :: WantedConstraints -&gt; Bag DelayedError -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#addDelayedErrors"><span class="hs-identifier hs-var hs-var">addDelayedErrors</span></a></span></span><span> </span><span id="local-6989586621682723246"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723246"><span class="hs-identifier hs-var">wc</span></a></span></span><span> </span><span id="local-6989586621682723247"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723247"><span class="hs-identifier hs-var">errs</span></a></span></span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723246"><span class="hs-identifier hs-var">wc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723247"><span class="hs-identifier hs-type">errs</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-type">`unionBags`</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723246"><span class="hs-identifier hs-type">wc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1233"></span><span>
</span><span id="line-1234"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dropMisleading"><span class="hs-identifier hs-type">dropMisleading</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span>
</span><span id="line-1235"></span><span class="hs-comment">-- Drop misleading constraints; really just class constraints</span><span>
</span><span id="line-1236"></span><span class="hs-comment">-- See Note [Constraints and errors] in GHC.Tc.Utils.Monad</span><span>
</span><span id="line-1237"></span><span class="hs-comment">--   for why this function is so strange, treating the 'simples'</span><span>
</span><span id="line-1238"></span><span class="hs-comment">--   and the implications differently.  Sigh.</span><span>
</span><span id="line-1239"></span><span id="dropMisleading"><span class="annot"><span class="annottext">dropMisleading :: WantedConstraints -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#dropMisleading"><span class="hs-identifier hs-var hs-var">dropMisleading</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723248"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723248"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723249"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723249"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723250"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723250"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Bool) -&gt; Cts -&gt; Cts
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleWantedCt"><span class="hs-identifier hs-var">insolubleWantedCt</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723248"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-1241"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Implication) -&gt; Bag Implication -&gt; Bag Implication
forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Implication
</span><a href="#local-6989586621682723252"><span class="hs-identifier hs-var">drop_implic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723249"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1242"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DelayedError -&gt; Bool) -&gt; Bag DelayedError -&gt; Bag DelayedError
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedError -&gt; Bool
</span><a href="#local-6989586621682723253"><span class="hs-identifier hs-var">keep_delayed_error</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723250"><span class="hs-identifier hs-var">errors</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1243"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1244"></span><span>    </span><span id="local-6989586621682723252"><span class="annot"><span class="annottext">drop_implic :: Implication -&gt; Implication
</span><a href="#local-6989586621682723252"><span class="hs-identifier hs-var hs-var">drop_implic</span></a></span></span><span> </span><span id="local-6989586621682723254"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723254"><span class="hs-identifier hs-var">implic</span></a></span></span><span>
</span><span id="line-1245"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723254"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723255"><span class="hs-identifier hs-type">drop_wanted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723254"><span class="hs-identifier hs-type">implic</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1246"></span><span>    </span><span id="local-6989586621682723255"><span class="annot"><span class="annottext">drop_wanted :: WantedConstraints -&gt; WantedConstraints
</span><a href="#local-6989586621682723255"><span class="hs-identifier hs-var hs-var">drop_wanted</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723256"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723256"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723257"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723257"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723258"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723258"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; Bool) -&gt; Cts -&gt; Cts
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="#local-6989586621682723259"><span class="hs-identifier hs-var">keep_ct</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723256"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-1248"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Implication) -&gt; Bag Implication -&gt; Bag Implication
forall a b. (a -&gt; b) -&gt; Bag a -&gt; Bag b
</span><a href="GHC.Data.Bag.html#mapBag"><span class="hs-identifier hs-var">mapBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Implication
</span><a href="#local-6989586621682723252"><span class="hs-identifier hs-var">drop_implic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723257"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1249"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DelayedError -&gt; Bool) -&gt; Bag DelayedError -&gt; Bag DelayedError
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedError -&gt; Bool
</span><a href="#local-6989586621682723253"><span class="hs-identifier hs-var">keep_delayed_error</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723258"><span class="hs-identifier hs-var">errors</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1250"></span><span>
</span><span id="line-1251"></span><span>    </span><span id="local-6989586621682723259"><span class="annot"><span class="annottext">keep_ct :: Ct -&gt; Bool
</span><a href="#local-6989586621682723259"><span class="hs-identifier hs-var hs-var">keep_ct</span></a></span></span><span> </span><span id="local-6989586621682723260"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723260"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723260"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1252"></span><span>                    </span><span class="annot"><a href="GHC.Core.Predicate.html#ClassPred"><span class="hs-identifier hs-type">ClassPred</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1253"></span><span>                    </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1254"></span><span>
</span><span id="line-1255"></span><span>    </span><span id="local-6989586621682723253"><span class="annot"><span class="annottext">keep_delayed_error :: DelayedError -&gt; Bool
</span><a href="#local-6989586621682723253"><span class="hs-identifier hs-var hs-var">keep_delayed_error</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span id="local-6989586621682723263"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723263"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var">isOutOfScopeHole</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723263"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1256"></span><span>    </span><span class="annot"><a href="#local-6989586621682723253"><span class="hs-identifier hs-var">keep_delayed_error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1257"></span><span>
</span><span id="line-1258"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isSolvedStatus"><span class="hs-identifier hs-type">isSolvedStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier hs-type">ImplicStatus</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1259"></span><span id="isSolvedStatus"><span class="annot"><span class="annottext">isSolvedStatus :: ImplicStatus -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isSolvedStatus"><span class="hs-identifier hs-var hs-var">isSolvedStatus</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Solved"><span class="hs-identifier hs-type">IC_Solved</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1260"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isSolvedStatus"><span class="hs-identifier hs-var">isSolvedStatus</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1261"></span><span>
</span><span id="line-1262"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-type">isInsolubleStatus</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier hs-type">ImplicStatus</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1263"></span><span id="isInsolubleStatus"><span class="annot"><span class="annottext">isInsolubleStatus :: ImplicStatus -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-var hs-var">isInsolubleStatus</span></a></span></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_Insoluble"><span class="hs-identifier hs-var">IC_Insoluble</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1264"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-var">isInsolubleStatus</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_BadTelescope"><span class="hs-identifier hs-var">IC_BadTelescope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1265"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-var">isInsolubleStatus</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1266"></span><span>
</span><span id="line-1267"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleImplic"><span class="hs-identifier hs-type">insolubleImplic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1268"></span><span id="insolubleImplic"><span class="annot"><span class="annottext">insolubleImplic :: Implication -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleImplic"><span class="hs-identifier hs-var hs-var">insolubleImplic</span></a></span></span><span> </span><span id="local-6989586621682723267"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723267"><span class="hs-identifier hs-var">ic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImplicStatus -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isInsolubleStatus"><span class="hs-identifier hs-var">isInsolubleStatus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723267"><span class="hs-identifier hs-var">ic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1269"></span><span>
</span><span id="line-1270"></span><span class="hs-comment">-- | Gather all the type variables from 'WantedConstraints'</span><span>
</span><span id="line-1271"></span><span class="hs-comment">-- that it would be unhelpful to default. For the moment,</span><span>
</span><span id="line-1272"></span><span class="hs-comment">-- these are only 'ConcreteTv' metavariables participating</span><span>
</span><span id="line-1273"></span><span class="hs-comment">-- in a nominal equality whose other side is not concrete;</span><span>
</span><span id="line-1274"></span><span class="hs-comment">-- it's usually better to report those as errors instead of</span><span>
</span><span id="line-1275"></span><span class="hs-comment">-- defaulting.</span><span>
</span><span id="line-1276"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#nonDefaultableTyVarsOfWC"><span class="hs-identifier hs-type">nonDefaultableTyVarsOfWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span><span>
</span><span id="line-1277"></span><span class="hs-comment">-- Currently used in simplifyTop and in tcRule.</span><span>
</span><span id="line-1278"></span><span class="hs-comment">-- TODO: should we also use this in decideQuantifiedTyVars, kindGeneralize{All,Some}?</span><span>
</span><span id="line-1279"></span><span id="nonDefaultableTyVarsOfWC"><span class="annot"><span class="annottext">nonDefaultableTyVarsOfWC :: WantedConstraints -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#nonDefaultableTyVarsOfWC"><span class="hs-identifier hs-var hs-var">nonDefaultableTyVarsOfWC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723269"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723269"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723270"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723270"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723271"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723271"><span class="hs-identifier hs-var">errs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">=</span><span>             </span><span class="annot"><span class="annottext">(Ct -&gt; TcTyCoVarSet) -&gt; Cts -&gt; TcTyCoVarSet
forall a. (a -&gt; TcTyCoVarSet) -&gt; Bag a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723272"><span class="hs-identifier hs-var">concatMapBag</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723273"><span class="hs-identifier hs-var">non_defaultable_tvs_of_ct</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723269"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-1281"></span><span>  </span><span class="annot"><span class="annottext">TcTyCoVarSet -&gt; TcTyCoVarSet -&gt; TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; TcTyCoVarSet) -&gt; Bag Implication -&gt; TcTyCoVarSet
forall a. (a -&gt; TcTyCoVarSet) -&gt; Bag a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723272"><span class="hs-identifier hs-var">concatMapBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WantedConstraints -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#nonDefaultableTyVarsOfWC"><span class="hs-identifier hs-var">nonDefaultableTyVarsOfWC</span></a></span><span> </span><span class="annot"><span class="annottext">(WantedConstraints -&gt; TcTyCoVarSet)
-&gt; (Implication -&gt; WantedConstraints)
-&gt; Implication
-&gt; TcTyCoVarSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723270"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1282"></span><span>  </span><span class="annot"><span class="annottext">TcTyCoVarSet -&gt; TcTyCoVarSet -&gt; TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">(DelayedError -&gt; TcTyCoVarSet) -&gt; Bag DelayedError -&gt; TcTyCoVarSet
forall a. (a -&gt; TcTyCoVarSet) -&gt; Bag a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723272"><span class="hs-identifier hs-var">concatMapBag</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedError -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723275"><span class="hs-identifier hs-var">non_defaultable_tvs_of_err</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723271"><span class="hs-identifier hs-var">errs</span></a></span><span>
</span><span id="line-1283"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span>      </span><span id="local-6989586621682722398"><span class="annot"><a href="#local-6989586621682723272"><span class="hs-identifier hs-type">concatMapBag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682722398"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyVarSet"><span class="hs-identifier hs-type">TyVarSet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682722398"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span></span><span>
</span><span id="line-1286"></span><span>      </span><span id="local-6989586621682723272"><span class="annot"><span class="annottext">concatMapBag :: forall a. (a -&gt; TcTyCoVarSet) -&gt; Bag a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723272"><span class="hs-identifier hs-var hs-var">concatMapBag</span></a></span></span><span> </span><span id="local-6989586621682723278"><span class="annot"><span class="annottext">a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723278"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; TcTyCoVarSet -&gt; TcTyCoVarSet)
-&gt; TcTyCoVarSet -&gt; Bag a -&gt; TcTyCoVarSet
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682723279"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682723279"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682723280"><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723280"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723278"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682723279"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet -&gt; TcTyCoVarSet -&gt; TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723280"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-1287"></span><span>
</span><span id="line-1288"></span><span>      </span><span class="hs-comment">-- Don't default ConcreteTv metavariables involved</span><span>
</span><span id="line-1289"></span><span>      </span><span class="hs-comment">-- in an equality with something non-concrete: it's usually</span><span>
</span><span id="line-1290"></span><span>      </span><span class="hs-comment">-- better to report the unsolved Wanted.</span><span>
</span><span id="line-1291"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1292"></span><span>      </span><span class="hs-comment">-- Example: alpha[conc] ~# rr[sk].</span><span>
</span><span id="line-1293"></span><span>      </span><span class="annot"><a href="#local-6989586621682723273"><span class="hs-identifier hs-type">non_defaultable_tvs_of_ct</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#TyCoVarSet"><span class="hs-identifier hs-type">TyCoVarSet</span></a></span><span>
</span><span id="line-1294"></span><span>      </span><span id="local-6989586621682723273"><span class="annot"><span class="annottext">non_defaultable_tvs_of_ct :: Ct -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723273"><span class="hs-identifier hs-var hs-var">non_defaultable_tvs_of_ct</span></a></span></span><span> </span><span id="local-6989586621682723282"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723282"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1295"></span><span>        </span><span class="hs-comment">-- NB: using classifyPredType instead of inspecting the Ct</span><span>
</span><span id="line-1296"></span><span>        </span><span class="hs-comment">-- so that we deal uniformly with CNonCanonical (which come up in tcRule),</span><span>
</span><span id="line-1297"></span><span>        </span><span class="hs-comment">-- CEqCan (unsolved but potentially soluble, e.g. @alpha[conc] ~# RR@)</span><span>
</span><span id="line-1298"></span><span>        </span><span class="hs-comment">-- and CIrredCan.</span><span>
</span><span id="line-1299"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; Pred) -&gt; Xi -&gt; Pred
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctPred"><span class="hs-identifier hs-var">ctPred</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723282"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1300"></span><span>          </span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621682723284"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723284"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682723285"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723285"><span class="hs-identifier hs-var">rhs</span></a></span></span><span>
</span><span id="line-1301"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682723286"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723286"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe EvVar
</span><a href="GHC.Core.Type.html#getTyVar_maybe"><span class="hs-identifier hs-var">getTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723284"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1302"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isConcreteTyVar"><span class="hs-identifier hs-var">isConcreteTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723286"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1303"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Bool
</span><a href="GHC.Core.Type.html#isConcreteType"><span class="hs-identifier hs-var">isConcreteType</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723285"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1304"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unitVarSet"><span class="hs-identifier hs-var">unitVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723286"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1305"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682723290"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723290"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Maybe EvVar
</span><a href="GHC.Core.Type.html#getTyVar_maybe"><span class="hs-identifier hs-var">getTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723285"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1306"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isConcreteTyVar"><span class="hs-identifier hs-var">isConcreteTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723290"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1307"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Xi -&gt; Bool
</span><a href="GHC.Core.Type.html#isConcreteType"><span class="hs-identifier hs-var">isConcreteType</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723284"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1308"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#unitVarSet"><span class="hs-identifier hs-var">unitVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723290"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1309"></span><span>          </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-1310"></span><span>
</span><span id="line-1311"></span><span>      </span><span class="hs-comment">-- Make sure to apply the same logic as above to delayed errors.</span><span>
</span><span id="line-1312"></span><span>      </span><span id="local-6989586621682723275"><span class="annot"><span class="annottext">non_defaultable_tvs_of_err :: DelayedError -&gt; TcTyCoVarSet
</span><a href="#local-6989586621682723275"><span class="hs-identifier hs-var hs-var">non_defaultable_tvs_of_err</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span id="local-6989586621682723291"><span class="annot"><span class="annottext">NotConcreteError
</span><a href="#local-6989586621682723291"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NotConcreteError
</span><a href="#local-6989586621682723291"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1314"></span><span>            </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NCE_FRR"><span class="hs-identifier hs-type">NCE_FRR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">nce_frr_origin :: NotConcreteError -&gt; FixedRuntimeRepOrigin
</span><a href="GHC.Tc.Types.Constraint.html#nce_frr_origin"><span class="hs-identifier hs-var">nce_frr_origin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723292"><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621682723292"><span class="hs-identifier hs-var">frr</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; TcTyCoVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin -&gt; Xi
</span><a href="GHC.Tc.Types.Origin.html#frr_type"><span class="hs-identifier hs-var">frr_type</span></a></span><span> </span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621682723292"><span class="hs-identifier hs-var">frr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span>      </span><span class="annot"><a href="#local-6989586621682723275"><span class="hs-identifier hs-var">non_defaultable_tvs_of_err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleWC"><span class="hs-identifier hs-type">insolubleWC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1318"></span><span id="insolubleWC"><span class="annot"><span class="annottext">insolubleWC :: WantedConstraints -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleWC"><span class="hs-identifier hs-var hs-var">insolubleWC</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723294"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723294"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723295"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723295"><span class="hs-identifier hs-var">simples</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723296"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723296"><span class="hs-identifier hs-var">errors</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1319"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">(Ct -&gt; Bool) -&gt; Cts -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#anyBag"><span class="hs-identifier hs-var">anyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleWantedCt"><span class="hs-identifier hs-var">insolubleWantedCt</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723295"><span class="hs-identifier hs-var">simples</span></a></span><span>
</span><span id="line-1320"></span><span>       </span><span class="hs-comment">-- insolubleWantedCt: wanteds only: see Note [Given insolubles]</span><span>
</span><span id="line-1321"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">(Implication -&gt; Bool) -&gt; Bag Implication -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#anyBag"><span class="hs-identifier hs-var">anyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleImplic"><span class="hs-identifier hs-var">insolubleImplic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723294"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-1322"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">(DelayedError -&gt; Bool) -&gt; Bag DelayedError -&gt; Bool
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#anyBag"><span class="hs-identifier hs-var">anyBag</span></a></span><span> </span><span class="annot"><span class="annottext">DelayedError -&gt; Bool
</span><a href="#local-6989586621682723297"><span class="hs-identifier hs-var">is_insoluble</span></a></span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723296"><span class="hs-identifier hs-var">errors</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1324"></span><span>      </span><span id="local-6989586621682723297"><span class="annot"><span class="annottext">is_insoluble :: DelayedError -&gt; Bool
</span><a href="#local-6989586621682723297"><span class="hs-identifier hs-var hs-var">is_insoluble</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_Hole"><span class="hs-identifier hs-type">DE_Hole</span></a></span><span> </span><span id="local-6989586621682723298"><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723298"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var">isOutOfScopeHole</span></a></span><span> </span><span class="annot"><span class="annottext">Hole
</span><a href="#local-6989586621682723298"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="hs-comment">-- See Note [Insoluble holes]</span><span>
</span><span id="line-1325"></span><span>      </span><span class="annot"><a href="#local-6989586621682723297"><span class="hs-identifier hs-var">is_insoluble</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DE_NotConcrete"><span class="hs-identifier hs-type">DE_NotConcrete</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1326"></span><span>
</span><span id="line-1327"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleWantedCt"><span class="hs-identifier hs-type">insolubleWantedCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1328"></span><span class="hs-comment">-- Definitely insoluble, in particular /excluding/ type-hole constraints</span><span>
</span><span id="line-1329"></span><span class="hs-comment">-- Namely:</span><span>
</span><span id="line-1330"></span><span class="hs-comment">--   a) an insoluble constraint as per 'insolubleIrredCt', i.e. either</span><span>
</span><span id="line-1331"></span><span class="hs-comment">--        - an insoluble equality constraint (e.g. Int ~ Bool), or</span><span>
</span><span id="line-1332"></span><span class="hs-comment">--        - a custom type error constraint, TypeError msg :: Constraint</span><span>
</span><span id="line-1333"></span><span class="hs-comment">--   b) that does not arise from a Given or a Wanted/Wanted fundep interaction</span><span>
</span><span id="line-1334"></span><span class="hs-comment">-- See Note [Insoluble Wanteds]</span><span>
</span><span id="line-1335"></span><span id="insolubleWantedCt"><span class="annot"><span class="annottext">insolubleWantedCt :: Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleWantedCt"><span class="hs-identifier hs-var hs-var">insolubleWantedCt</span></a></span></span><span> </span><span id="local-6989586621682723299"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723299"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-1336"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span id="local-6989586621682723300"><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723300"><span class="hs-identifier hs-var">ir_ct</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723299"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1337"></span><span>      </span><span class="hs-comment">-- CIrredCan: see (IW1) in Note [Insoluble Wanteds]</span><span>
</span><span id="line-1338"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723301"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723301"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723300"><span class="hs-identifier hs-var">ir_ct</span></a></span><span>
</span><span id="line-1339"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_loc :: CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var">ctev_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723302"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723302"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ctev_rewriters :: CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctev_rewriters"><span class="hs-identifier hs-var">ctev_rewriters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723304"><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723304"><span class="hs-identifier hs-var">rewriters</span></a></span></span><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723301"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1340"></span><span>      </span><span class="hs-comment">-- It's a Wanted</span><span>
</span><span id="line-1341"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleIrredCt"><span class="hs-identifier hs-var">insolubleIrredCt</span></a></span><span> </span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723300"><span class="hs-identifier hs-var">ir_ct</span></a></span><span>
</span><span id="line-1342"></span><span>      </span><span class="hs-comment">-- It's insoluble</span><span>
</span><span id="line-1343"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyRewriterSet"><span class="hs-identifier hs-var">isEmptyRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723304"><span class="hs-identifier hs-var">rewriters</span></a></span><span>
</span><span id="line-1344"></span><span>      </span><span class="hs-comment">-- It has no rewriters; see (IW2) in Note [Insoluble Wanteds]</span><span>
</span><span id="line-1345"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; Bool
</span><a href="GHC.Tc.Types.CtLoc.html#isGivenLoc"><span class="hs-identifier hs-var">isGivenLoc</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723302"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>      </span><span class="hs-comment">-- isGivenLoc: see (IW3) in Note [Insoluble Wanteds]</span><span>
</span><span id="line-1347"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtOrigin -&gt; Bool
</span><a href="GHC.Tc.Types.Origin.html#isWantedWantedFunDepOrigin"><span class="hs-identifier hs-var">isWantedWantedFunDepOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin
</span><a href="GHC.Tc.Types.CtLoc.html#ctLocOrigin"><span class="hs-identifier hs-var">ctLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723302"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>      </span><span class="hs-comment">-- origin check: see (IW4) in Note [Insoluble Wanteds]</span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1350"></span><span>
</span><span id="line-1351"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1352"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1353"></span><span>
</span><span id="line-1354"></span><span class="hs-comment">-- | Returns True of constraints that are definitely insoluble,</span><span>
</span><span id="line-1355"></span><span class="hs-comment">--   as well as TypeError constraints.</span><span>
</span><span id="line-1356"></span><span class="hs-comment">-- Can return 'True' for Given constraints, unlike 'insolubleWantedCt'.</span><span>
</span><span id="line-1357"></span><span class="hs-comment">--</span><span>
</span><span id="line-1358"></span><span class="hs-comment">-- The function is tuned for application /after/ constraint solving</span><span>
</span><span id="line-1359"></span><span class="hs-comment">--       i.e. assuming canonicalisation has been done</span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- That's why it looks only for IrredCt; all insoluble constraints</span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- are put into CIrredCan</span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleCt"><span class="hs-identifier hs-type">insolubleCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1363"></span><span id="insolubleCt"><span class="annot"><span class="annottext">insolubleCt :: Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleCt"><span class="hs-identifier hs-var hs-var">insolubleCt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span id="local-6989586621682723307"><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723307"><span class="hs-identifier hs-var">ir_ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IrredCt -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleIrredCt"><span class="hs-identifier hs-var">insolubleIrredCt</span></a></span><span> </span><span class="annot"><span class="annottext">IrredCt
</span><a href="#local-6989586621682723307"><span class="hs-identifier hs-var">ir_ct</span></a></span><span>
</span><span id="line-1364"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleCt"><span class="hs-identifier hs-var">insolubleCt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#insolubleIrredCt"><span class="hs-identifier hs-type">insolubleIrredCt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1367"></span><span class="hs-comment">-- Returns True of Irred constraints that are /definitely/ insoluble</span><span>
</span><span id="line-1368"></span><span class="hs-comment">--</span><span>
</span><span id="line-1369"></span><span class="hs-comment">-- This function is critical for accurate pattern-match overlap warnings.</span><span>
</span><span id="line-1370"></span><span class="hs-comment">-- See Note [Pattern match warnings with insoluble Givens] in GHC.Tc.Solver</span><span>
</span><span id="line-1371"></span><span class="hs-comment">--</span><span>
</span><span id="line-1372"></span><span class="hs-comment">-- Note that this does not traverse through the constraint to find</span><span>
</span><span id="line-1373"></span><span class="hs-comment">-- nested custom type errors: it only detects @TypeError msg :: Constraint@,</span><span>
</span><span id="line-1374"></span><span class="hs-comment">-- and not e.g. @Eq (TypeError msg)@.</span><span>
</span><span id="line-1375"></span><span id="insolubleIrredCt"><span class="annot"><span class="annottext">insolubleIrredCt :: IrredCt -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#insolubleIrredCt"><span class="hs-identifier hs-var hs-var">insolubleIrredCt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723308"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723308"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ir_reason :: IrredCt -&gt; CtIrredReason
</span><a href="GHC.Tc.Types.Constraint.html#ir_reason"><span class="hs-identifier hs-var">ir_reason</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723309"><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682723309"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">CtIrredReason -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isInsolubleReason"><span class="hs-identifier hs-var">isInsolubleReason</span></a></span><span> </span><span class="annot"><span class="annottext">CtIrredReason
</span><a href="#local-6989586621682723309"><span class="hs-identifier hs-var">reason</span></a></span><span>
</span><span id="line-1377"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isTopLevelUserTypeError"><span class="hs-identifier hs-var">isTopLevelUserTypeError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723308"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>  </span><span class="hs-comment">-- NB: 'isTopLevelUserTypeError' detects constraints of the form &quot;TypeError msg&quot;</span><span>
</span><span id="line-1379"></span><span>  </span><span class="hs-comment">-- and &quot;Unsatisfiable msg&quot;. It deliberately does not detect TypeError</span><span>
</span><span id="line-1380"></span><span>  </span><span class="hs-comment">-- nested in a type (e.g. it does not use &quot;containsUserTypeError&quot;), as that</span><span>
</span><span id="line-1381"></span><span>  </span><span class="hs-comment">-- would be too eager: the TypeError might appear inside a type family</span><span>
</span><span id="line-1382"></span><span>  </span><span class="hs-comment">-- application which might later reduce, but we only want to return 'True'</span><span>
</span><span id="line-1383"></span><span>  </span><span class="hs-comment">-- for constraints that are definitely insoluble.</span><span>
</span><span id="line-1384"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1385"></span><span>  </span><span class="hs-comment">-- For example: Num (F Int (TypeError &quot;msg&quot;)), where F is a type family.</span><span>
</span><span id="line-1386"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1387"></span><span>  </span><span class="hs-comment">-- Test case: T11503, with the 'Assert' type family:</span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1389"></span><span>  </span><span class="hs-comment">-- &gt; type Assert :: Bool -&gt; Constraint -&gt; Constraint</span><span>
</span><span id="line-1390"></span><span>  </span><span class="hs-comment">-- &gt; type family Assert check errMsg where</span><span>
</span><span id="line-1391"></span><span>  </span><span class="hs-comment">-- &gt;   Assert 'True  _errMsg = ()</span><span>
</span><span id="line-1392"></span><span>  </span><span class="hs-comment">-- &gt;   Assert _check errMsg  = errMsg</span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="hs-comment">-- | Does this hole represent an &quot;out of scope&quot; error?</span><span>
</span><span id="line-1395"></span><span class="hs-comment">-- See Note [Insoluble holes]</span><span>
</span><span id="line-1396"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-type">isOutOfScopeHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1397"></span><span id="isOutOfScopeHole"><span class="annot"><span class="annottext">isOutOfScopeHole :: Hole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isOutOfScopeHole"><span class="hs-identifier hs-var hs-var">isOutOfScopeHole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Hole"><span class="hs-identifier hs-type">Hole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hole_occ :: Hole -&gt; RdrName
</span><a href="GHC.Tc.Types.Constraint.html#hole_occ"><span class="hs-identifier hs-var">hole_occ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723310"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682723310"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#startsWithUnderscore"><span class="hs-identifier hs-var">startsWithUnderscore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682723310"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1398"></span><span>
</span><span id="line-1399"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1400"></span><span>  </span><span id="local-6989586621682723326"><span class="annot"><span class="annottext">ppr :: WantedConstraints -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WC"><span class="hs-identifier hs-type">WC</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">wc_simple :: WantedConstraints -&gt; Cts
</span><a href="GHC.Tc.Types.Constraint.html#wc_simple"><span class="hs-identifier hs-var">wc_simple</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723327"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723327"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_impl :: WantedConstraints -&gt; Bag Implication
</span><a href="GHC.Tc.Types.Constraint.html#wc_impl"><span class="hs-identifier hs-var">wc_impl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723328"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723328"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">wc_errors :: WantedConstraints -&gt; Bag DelayedError
</span><a href="GHC.Tc.Types.Constraint.html#wc_errors"><span class="hs-identifier hs-var">wc_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723329"><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723329"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WC&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-1402"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Cts -&gt; SDoc
forall a. Outputable a =&gt; SDoc -&gt; Bag a -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#ppr_bag"><span class="hs-identifier hs-var">ppr_bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wc_simple&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723327"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1403"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bag Implication -&gt; SDoc
forall a. Outputable a =&gt; SDoc -&gt; Bag a -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#ppr_bag"><span class="hs-identifier hs-var">ppr_bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wc_impl&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682723328"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1404"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Bag DelayedError -&gt; SDoc
forall a. Outputable a =&gt; SDoc -&gt; Bag a -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#ppr_bag"><span class="hs-identifier hs-var">ppr_bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wc_errors&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bag DelayedError
</span><a href="#local-6989586621682723329"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>
</span><span id="line-1406"></span><span id="local-6989586621682722402"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ppr_bag"><span class="hs-identifier hs-type">ppr_bag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682722402"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682722402"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-1407"></span><span id="ppr_bag"><span class="annot"><span class="annottext">ppr_bag :: forall a. Outputable a =&gt; SDoc -&gt; Bag a -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#ppr_bag"><span class="hs-identifier hs-var hs-var">ppr_bag</span></a></span></span><span> </span><span id="local-6989586621682723341"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682723341"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621682723342"><span class="annot"><span class="annottext">Bag a
</span><a href="#local-6989586621682723342"><span class="hs-identifier hs-var">bag</span></a></span></span><span>
</span><span id="line-1408"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bag a -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag a
</span><a href="#local-6989586621682723342"><span class="hs-identifier hs-var">bag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1409"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; ExpansionFuel -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682723341"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1410"></span><span>                       </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; SDoc -&gt; SDoc) -&gt; SDoc -&gt; Bag a -&gt; SDoc
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">($$)</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc -&gt; SDoc) -&gt; (a -&gt; SDoc) -&gt; a -&gt; SDoc -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Bag a
</span><a href="#local-6989586621682723342"><span class="hs-identifier hs-var">bag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span class="hs-comment">{- Note [Given insolubles]
~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider (#14325, comment:)
    class (a~b) =&gt; C a b

    foo :: C a c =&gt; a -&gt; c
    foo x = x

    hm3 :: C (f b) b =&gt; b -&gt; f b
    hm3 x = foo x

In the RHS of hm3, from the [G] C (f b) b we get the insoluble
[G] f b ~# b.  Then we also get an unsolved [W] C b (f b).
Residual implication looks like
    forall b. C (f b) b =&gt; [G] f b ~# b
                           [W] C f (f b)

We do /not/ want to set the implication status to IC_Insoluble,
because that'll suppress reports of [W] C b (f b).  But we
may not report the insoluble [G] f b ~# b either (see Note [Given errors]
in GHC.Tc.Errors), so we may fail to report anything at all!  Yikes.

Bottom line: insolubleWC (called in GHC.Tc.Solver.setImplicationStatus)
             should ignore givens even if they are insoluble.

Note [Insoluble Wanteds]
~~~~~~~~~~~~~~~~~~~~~~~~
insolubleWantedCt returns True of a Wanted constraint that definitely
can't be solved.  But not quite all such constraints; see wrinkles.

(IW1) insolubleWantedCt is tuned for application /after/ constraint
   solving i.e. assuming canonicalisation has been done.  That's why
   it looks only for IrredCt; all insoluble constraints are put into
   CIrredCan

(IW2) We only treat it as insoluble if it has an empty rewriter set.  (See Note
   [Wanteds rewrite Wanteds].)  Otherwise #25325 happens: a Wanted constraint A
   that is /not/ insoluble rewrites some other Wanted constraint B, so B has A
   in its rewriter set.  Now B looks insoluble.  The danger is that we'll
   suppress reporting B because of its empty rewriter set; and suppress
   reporting A because there is an insoluble B lying around.  (This suppression
   happens in GHC.Tc.Errors.mkErrorItem.)  Solution: don't treat B as insoluble.

(IW3) If the Wanted arises from a Given (how can that happen?), don't
   treat it as a Wanted insoluble (obviously).

(IW4) If the Wanted came from a  Wanted/Wanted fundep interaction, don't
   treat the constraint as insoluble. See Note [Suppressing confusing errors]
   in GHC.Tc.Errors

Note [Insoluble holes]
~~~~~~~~~~~~~~~~~~~~~~
Hole constraints that ARE NOT treated as truly insoluble:
  a) type holes, arising from PartialTypeSignatures,
  b) &quot;true&quot; expression holes arising from TypedHoles

An &quot;expression hole&quot; or &quot;type hole&quot; isn't really an error
at all; it's a report saying &quot;_ :: Int&quot; here.  But an out-of-scope
variable masquerading as expression holes IS treated as truly
insoluble, so that it trumps other errors during error reporting.
Yuk!

************************************************************************
*                                                                      *
                Implication constraints
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span class="hs-keyword">data</span><span> </span><span id="Implication"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-var">Implication</span></a></span></span><span>
</span><span id="line-1482"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Implic"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-var">Implic</span></a></span></span><span> </span><span class="hs-special">{</span><span>   </span><span class="hs-comment">-- Invariants for a tree of implications:</span><span>
</span><span id="line-1483"></span><span>               </span><span class="hs-comment">-- see TcType Note [TcLevel invariants]</span><span>
</span><span id="line-1484"></span><span>
</span><span id="line-1485"></span><span>      </span><span id="ic_tclvl"><span class="annot"><span class="annottext">Implication -&gt; TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var hs-var">ic_tclvl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcLevel"><span class="hs-identifier hs-type">TcLevel</span></a></span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- TcLevel of unification variables</span><span>
</span><span id="line-1486"></span><span>                                 </span><span class="hs-comment">-- allocated /inside/ this implication</span><span>
</span><span id="line-1487"></span><span>
</span><span id="line-1488"></span><span>      </span><span id="ic_info"><span class="annot"><span class="annottext">Implication -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var hs-var">ic_info</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfoAnon"><span class="hs-identifier hs-type">SkolemInfoAnon</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- See Note [Skolems in an implication]</span><span>
</span><span id="line-1489"></span><span>                                     </span><span class="hs-comment">-- See Note [Shadowing in a constraint]</span><span>
</span><span id="line-1490"></span><span>
</span><span id="line-1491"></span><span>      </span><span id="ic_skols"><span class="annot"><span class="annottext">Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var hs-var">ic_skols</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Introduced skolems; always skolem TcTyVars</span><span>
</span><span id="line-1492"></span><span>                                 </span><span class="hs-comment">-- Their level numbers should be precisely ic_tclvl</span><span>
</span><span id="line-1493"></span><span>                                 </span><span class="hs-comment">-- Their SkolemInfo should be precisely ic_info (almost)</span><span>
</span><span id="line-1494"></span><span>                                 </span><span class="hs-comment">--       See Note [Implication invariants]</span><span>
</span><span id="line-1495"></span><span>
</span><span id="line-1496"></span><span>      </span><span id="ic_given"><span class="annot"><span class="annottext">Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var hs-var">ic_given</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- Given evidence variables</span><span>
</span><span id="line-1497"></span><span>                                 </span><span class="hs-comment">--   (order does not matter)</span><span>
</span><span id="line-1498"></span><span>                                 </span><span class="hs-comment">-- See Invariant (GivenInv) in GHC.Tc.Utils.TcType</span><span>
</span><span id="line-1499"></span><span>
</span><span id="line-1500"></span><span>      </span><span id="ic_given_eqs"><span class="annot"><span class="annottext">Implication -&gt; HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var hs-var">ic_given_eqs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier hs-type">HasGivenEqs</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Are there Given equalities here?</span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span>      </span><span id="ic_warn_inaccessible"><span class="annot"><span class="annottext">Implication -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#ic_warn_inaccessible"><span class="hs-identifier hs-var hs-var">ic_warn_inaccessible</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-1503"></span><span>                                 </span><span class="hs-comment">-- True &lt;=&gt; we should report inaccessible code</span><span>
</span><span id="line-1504"></span><span>                                 </span><span class="hs-comment">-- Note [Avoid -Winaccessible-code when deriving]</span><span>
</span><span id="line-1505"></span><span>                                 </span><span class="hs-comment">-- in GHC.Tc.TyCl.Instance</span><span>
</span><span id="line-1506"></span><span>
</span><span id="line-1507"></span><span>      </span><span id="ic_env"><span class="annot"><span class="annottext">Implication -&gt; CtLocEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var hs-var">ic_env</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLocEnv"><span class="hs-identifier hs-type">CtLocEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1508"></span><span>                                 </span><span class="hs-comment">-- Records the context at the time of creation.</span><span>
</span><span id="line-1509"></span><span>                                 </span><span class="hs-comment">--</span><span>
</span><span id="line-1510"></span><span>                                 </span><span class="hs-comment">-- This provides all the information needed about</span><span>
</span><span id="line-1511"></span><span>                                 </span><span class="hs-comment">-- the context to report the source of errors linked</span><span>
</span><span id="line-1512"></span><span>                                 </span><span class="hs-comment">-- to this implication.</span><span>
</span><span id="line-1513"></span><span>
</span><span id="line-1514"></span><span>      </span><span id="ic_wanted"><span class="annot"><span class="annottext">Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var hs-var">ic_wanted</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#WantedConstraints"><span class="hs-identifier hs-type">WantedConstraints</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- The wanteds</span><span>
</span><span id="line-1515"></span><span>                                       </span><span class="hs-comment">-- See Invariant (WantedInf) in GHC.Tc.Utils.TcType</span><span>
</span><span id="line-1516"></span><span>
</span><span id="line-1517"></span><span>      </span><span id="ic_binds"><span class="annot"><span class="annottext">Implication -&gt; EvBindsVar
</span><a href="GHC.Tc.Types.Constraint.html#ic_binds"><span class="hs-identifier hs-var hs-var">ic_binds</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Points to the place to fill in the</span><span>
</span><span id="line-1518"></span><span>                                  </span><span class="hs-comment">-- abstraction and bindings.</span><span>
</span><span id="line-1519"></span><span>
</span><span id="line-1520"></span><span>      </span><span class="hs-comment">-- The ic_need fields keep track of which Given evidence</span><span>
</span><span id="line-1521"></span><span>      </span><span class="hs-comment">-- is used by this implication or its children</span><span>
</span><span id="line-1522"></span><span>      </span><span class="hs-comment">-- NB: including stuff used by nested implications that have since</span><span>
</span><span id="line-1523"></span><span>      </span><span class="hs-comment">--     been discarded</span><span>
</span><span id="line-1524"></span><span>      </span><span class="hs-comment">-- See Note [Needed evidence variables]</span><span>
</span><span id="line-1525"></span><span>      </span><span class="hs-comment">-- and (RC2) in Note [Tracking redundant constraints]a</span><span>
</span><span id="line-1526"></span><span>      </span><span id="ic_need_inner"><span class="annot"><span class="annottext">Implication -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_inner"><span class="hs-identifier hs-var hs-var">ic_need_inner</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Includes all used Given evidence</span><span>
</span><span id="line-1527"></span><span>      </span><span id="ic_need_outer"><span class="annot"><span class="annottext">Implication -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_outer"><span class="hs-identifier hs-var hs-var">ic_need_outer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#VarSet"><span class="hs-identifier hs-type">VarSet</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Includes only the free Given evidence</span><span>
</span><span id="line-1528"></span><span>                                  </span><span class="hs-comment">--  i.e. ic_need_inner after deleting</span><span>
</span><span id="line-1529"></span><span>                                  </span><span class="hs-comment">--       (a) givens (b) binders of ic_binds</span><span>
</span><span id="line-1530"></span><span>
</span><span id="line-1531"></span><span>      </span><span id="ic_status"><span class="annot"><span class="annottext">Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var hs-var">ic_status</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier hs-type">ImplicStatus</span></a></span><span>
</span><span id="line-1532"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1533"></span><span>
</span><span id="line-1534"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#implicationPrototype"><span class="hs-identifier hs-type">implicationPrototype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLocEnv"><span class="hs-identifier hs-type">CtLocEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span>
</span><span id="line-1535"></span><span id="implicationPrototype"><span class="annot"><span class="annottext">implicationPrototype :: CtLocEnv -&gt; Implication
</span><a href="GHC.Tc.Types.Constraint.html#implicationPrototype"><span class="hs-identifier hs-var hs-var">implicationPrototype</span></a></span></span><span> </span><span id="local-6989586621682723356"><span class="annot"><span class="annottext">CtLocEnv
</span><a href="#local-6989586621682723356"><span class="hs-identifier hs-var">ct_loc_env</span></a></span></span><span>
</span><span id="line-1536"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- These fields must be initialised</span><span>
</span><span id="line-1537"></span><span>              </span><span class="annot"><span class="annottext">ic_tclvl :: TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var">ic_tclvl</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; TcLevel
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;newImplic:tclvl&quot;</span></span><span>
</span><span id="line-1538"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_binds :: EvBindsVar
</span><a href="GHC.Tc.Types.Constraint.html#ic_binds"><span class="hs-identifier hs-var">ic_binds</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; EvBindsVar
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;newImplic:binds&quot;</span></span><span>
</span><span id="line-1539"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: SkolemInfoAnon
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SkolemInfoAnon
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;newImplic:info&quot;</span></span><span>
</span><span id="line-1540"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_warn_inaccessible :: Bool
</span><a href="GHC.Tc.Types.Constraint.html#ic_warn_inaccessible"><span class="hs-identifier hs-var">ic_warn_inaccessible</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;newImplic:warn_inaccessible&quot;</span></span><span>
</span><span id="line-1541"></span><span>
</span><span id="line-1542"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_env :: CtLocEnv
</span><a href="GHC.Tc.Types.Constraint.html#ic_env"><span class="hs-identifier hs-var">ic_env</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLocEnv
</span><a href="#local-6989586621682723356"><span class="hs-identifier hs-var">ct_loc_env</span></a></span><span>
</span><span id="line-1543"></span><span>              </span><span class="hs-comment">-- The rest have sensible default values</span><span>
</span><span id="line-1544"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_skols :: [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1545"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given :: [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1546"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_wanted :: WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#emptyWC"><span class="hs-identifier hs-var">emptyWC</span></a></span><span>
</span><span id="line-1547"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given_eqs :: HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var">ic_given_eqs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span>
</span><span id="line-1548"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_status :: ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_Unsolved"><span class="hs-identifier hs-var">IC_Unsolved</span></a></span><span>
</span><span id="line-1549"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_need_inner :: TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_inner"><span class="hs-identifier hs-var">ic_need_inner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span>
</span><span id="line-1550"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_need_outer :: TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_outer"><span class="hs-identifier hs-var">ic_need_outer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="GHC.Types.Var.Set.html#emptyVarSet"><span class="hs-identifier hs-var">emptyVarSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1551"></span><span>
</span><span id="line-1552"></span><span class="hs-keyword">data</span><span> </span><span id="ImplicStatus"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier hs-var">ImplicStatus</span></a></span></span><span>
</span><span id="line-1553"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IC_Solved"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Solved"><span class="hs-identifier hs-var">IC_Solved</span></a></span></span><span>     </span><span class="hs-comment">-- All wanteds in the tree are solved, all the way down</span><span>
</span><span id="line-1554"></span><span>       </span><span class="hs-special">{</span><span> </span><span id="ics_dead"><span class="annot"><span class="annottext">ImplicStatus -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ics_dead"><span class="hs-identifier hs-var hs-var">ics_dead</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-comment">-- Subset of ic_given that are not needed</span><span>
</span><span id="line-1555"></span><span>         </span><span class="hs-comment">-- See Note [Tracking redundant constraints] in GHC.Tc.Solver</span><span>
</span><span id="line-1556"></span><span>
</span><span id="line-1557"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IC_Insoluble"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Insoluble"><span class="hs-identifier hs-var">IC_Insoluble</span></a></span></span><span>  </span><span class="hs-comment">-- At least one insoluble Wanted constraint in the tree</span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IC_BadTelescope"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_BadTelescope"><span class="hs-identifier hs-var">IC_BadTelescope</span></a></span></span><span>  </span><span class="hs-comment">-- Solved, but the skolems in the telescope are out of</span><span>
</span><span id="line-1560"></span><span>                     </span><span class="hs-comment">-- dependency order. See Note [Checking telescopes]</span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="IC_Unsolved"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Unsolved"><span class="hs-identifier hs-var">IC_Unsolved</span></a></span></span><span>   </span><span class="hs-comment">-- Neither of the above; might go either way</span><span>
</span><span id="line-1563"></span><span>
</span><span id="line-1564"></span><span class="hs-keyword">data</span><span> </span><span id="HasGivenEqs"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier hs-var">HasGivenEqs</span></a></span></span><span> </span><span class="hs-comment">-- See Note [HasGivenEqs]</span><span>
</span><span id="line-1565"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoGivenEqs"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span></span><span>      </span><span class="hs-comment">-- Definitely no given equalities,</span><span>
</span><span id="line-1566"></span><span>                    </span><span class="hs-comment">--   except by Note [Let-bound skolems] in GHC.Tc.Solver.InertSet</span><span>
</span><span id="line-1567"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LocalGivenEqs"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#LocalGivenEqs"><span class="hs-identifier hs-var">LocalGivenEqs</span></a></span></span><span>   </span><span class="hs-comment">-- Might have Given equalities, but only ones that affect only</span><span>
</span><span id="line-1568"></span><span>                    </span><span class="hs-comment">--   local skolems e.g. forall a b. (a ~ F b) =&gt; ...</span><span>
</span><span id="line-1569"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MaybeGivenEqs"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span></span><span>   </span><span class="hs-comment">-- Might have any kind of Given equalities; no floating out</span><span>
</span><span id="line-1570"></span><span>                    </span><span class="hs-comment">--   is possible.</span><span>
</span><span id="line-1571"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682723363"><span id="local-6989586621682723368"><span class="annot"><span class="annottext">HasGivenEqs -&gt; HasGivenEqs -&gt; Bool
(HasGivenEqs -&gt; HasGivenEqs -&gt; Bool)
-&gt; (HasGivenEqs -&gt; HasGivenEqs -&gt; Bool) -&gt; Eq HasGivenEqs
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: HasGivenEqs -&gt; HasGivenEqs -&gt; Bool
== :: HasGivenEqs -&gt; HasGivenEqs -&gt; Bool
$c/= :: HasGivenEqs -&gt; HasGivenEqs -&gt; Bool
/= :: HasGivenEqs -&gt; HasGivenEqs -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-1572"></span><span>
</span><span id="line-1573"></span><span class="hs-keyword">type</span><span> </span><span id="UserGiven"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#UserGiven"><span class="hs-identifier hs-var">UserGiven</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span>
</span><span id="line-1574"></span><span>
</span><span id="line-1575"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#getUserGivensFromImplics"><span class="hs-identifier hs-type">getUserGivensFromImplics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#UserGiven"><span class="hs-identifier hs-type">UserGiven</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1576"></span><span id="getUserGivensFromImplics"><span class="annot"><span class="annottext">getUserGivensFromImplics :: [Implication] -&gt; [Implication]
</span><a href="GHC.Tc.Types.Constraint.html#getUserGivensFromImplics"><span class="hs-identifier hs-var hs-var">getUserGivensFromImplics</span></a></span></span><span> </span><span id="local-6989586621682723371"><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621682723371"><span class="hs-identifier hs-var">implics</span></a></span></span><span>
</span><span id="line-1577"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Implication] -&gt; [Implication]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Implication -&gt; Bool) -&gt; [Implication] -&gt; [Implication]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EvVar] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">([EvVar] -&gt; Bool)
-&gt; (Implication -&gt; [EvVar]) -&gt; Implication -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Implication]
</span><a href="#local-6989586621682723371"><span class="hs-identifier hs-var">implics</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>
</span><span id="line-1579"></span><span class="hs-comment">{- Note [HasGivenEqs]
~~~~~~~~~~~~~~~~~~~~~
The GivenEqs data type describes the Given constraints of an implication constraint:

* NoGivenEqs: definitely no Given equalities, except perhaps let-bound skolems
  which don't count: see Note [Let-bound skolems] in GHC.Tc.Solver.InertSet
  Examples: forall a. Eq a =&gt; ...
            forall a. (Show a, Num a) =&gt; ...
            forall a. a ~ Either Int Bool =&gt; ...  -- Let-bound skolem

* LocalGivenEqs: definitely no Given equalities that would affect principal
  types.  But may have equalities that affect only skolems of this implication
  (and hence do not affect principal types)
  Examples: forall a. F a ~ Int =&gt; ...
            forall a b. F a ~ G b =&gt; ...

* MaybeGivenEqs: may have Given equalities that would affect principal
  types
  Examples: forall. (a ~ b) =&gt; ...
            forall a. F a ~ b =&gt; ...
            forall a. c a =&gt; ...       -- The 'c' might be instantiated to (b ~)
            forall a. C a b =&gt; ....
               where class x~y =&gt; C a b
               so there is an equality in the superclass of a Given

The HasGivenEqs classifications affect two things:

* Suppressing redundant givens during error reporting; see GHC.Tc.Errors
  Note [Suppress redundant givens during error reporting]

* Floating in approximateWC.

Specifically, here's how it goes:

                 Stops floating    |   Suppresses Givens in errors
                 in approximateWC  |
                 -----------------------------------------------
 NoGivenEqs         NO             |         YES
 LocalGivenEqs      NO             |         NO
 MaybeGivenEqs      YES            |         NO
-}</span><span>
</span><span id="line-1620"></span><span>
</span><span id="line-1621"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1622"></span><span>  </span><span id="local-6989586621682723411"><span class="annot"><span class="annottext">ppr :: Implication -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_tclvl :: Implication -&gt; TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var">ic_tclvl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723412"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723412"><span class="hs-identifier hs-var">tclvl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723413"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723413"><span class="hs-identifier hs-var">skols</span></a></span></span><span>
</span><span id="line-1623"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_given"><span class="hs-identifier hs-var">ic_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723414"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723414"><span class="hs-identifier hs-var">given</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_given_eqs :: Implication -&gt; HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#ic_given_eqs"><span class="hs-identifier hs-var">ic_given_eqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723415"><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723415"><span class="hs-identifier hs-var">given_eqs</span></a></span></span><span>
</span><span id="line-1624"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_wanted :: Implication -&gt; WantedConstraints
</span><a href="GHC.Tc.Types.Constraint.html#ic_wanted"><span class="hs-identifier hs-var">ic_wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723416"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723416"><span class="hs-identifier hs-var">wanted</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_status :: Implication -&gt; ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#ic_status"><span class="hs-identifier hs-var">ic_status</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723417"><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621682723417"><span class="hs-identifier hs-var">status</span></a></span></span><span>
</span><span id="line-1625"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_binds :: Implication -&gt; EvBindsVar
</span><a href="GHC.Tc.Types.Constraint.html#ic_binds"><span class="hs-identifier hs-var">ic_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723418"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621682723418"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1626"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_need_inner :: Implication -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_inner"><span class="hs-identifier hs-var">ic_need_inner</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723419"><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723419"><span class="hs-identifier hs-var">need_in</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_need_outer :: Implication -&gt; TcTyCoVarSet
</span><a href="GHC.Tc.Types.Constraint.html#ic_need_outer"><span class="hs-identifier hs-var">ic_need_outer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723420"><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723420"><span class="hs-identifier hs-var">need_out</span></a></span></span><span>
</span><span id="line-1627"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723421"><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723421"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1628"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; ExpansionFuel -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Implic&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lbrace"><span class="hs-identifier hs-var">lbrace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1629"></span><span>        </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TcLevel =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723412"><span class="hs-identifier hs-var">tclvl</span></a></span><span>
</span><span id="line-1630"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Skolems =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVars"><span class="hs-identifier hs-var">pprTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723413"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-1631"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Given-eqs =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723415"><span class="hs-identifier hs-var">given_eqs</span></a></span><span>
</span><span id="line-1632"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Status =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="#local-6989586621682723417"><span class="hs-identifier hs-var">status</span></a></span><span>
</span><span id="line-1633"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; ExpansionFuel -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Given =&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EvVar] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVars"><span class="hs-identifier hs-var">pprEvVars</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723414"><span class="hs-identifier hs-var">given</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1634"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; ExpansionFuel -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Wanted =&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WantedConstraints -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682723416"><span class="hs-identifier hs-var">wanted</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1635"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binds =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621682723418"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1636"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsOutput doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#whenPprDebug"><span class="hs-identifier hs-var">whenPprDebug</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Needed inner =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723419"><span class="hs-identifier hs-var">need_in</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1637"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsOutput doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#whenPprDebug"><span class="hs-identifier hs-var">whenPprDebug</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Needed outer =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCoVarSet
</span><a href="#local-6989586621682723420"><span class="hs-identifier hs-var">need_out</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1638"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; SDoc
</span><a href="GHC.Tc.Types.Origin.html#pprSkolInfo"><span class="hs-identifier hs-var">pprSkolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723421"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rbrace"><span class="hs-identifier hs-var">rbrace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1639"></span><span>
</span><span id="line-1640"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ImplicStatus"><span class="hs-identifier hs-type">ImplicStatus</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1641"></span><span>  </span><span id="local-6989586621682723439"><span class="annot"><span class="annottext">ppr :: ImplicStatus -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_Insoluble"><span class="hs-identifier hs-var">IC_Insoluble</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Insoluble&quot;</span></span><span>
</span><span id="line-1642"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_BadTelescope"><span class="hs-identifier hs-var">IC_BadTelescope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Bad telescope&quot;</span></span><span>
</span><span id="line-1643"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ImplicStatus
</span><a href="GHC.Tc.Types.Constraint.html#IC_Unsolved"><span class="hs-identifier hs-var">IC_Unsolved</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unsolved&quot;</span></span><span>
</span><span id="line-1644"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IC_Solved"><span class="hs-identifier hs-type">IC_Solved</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ics_dead :: ImplicStatus -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ics_dead"><span class="hs-identifier hs-var">ics_dead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723440"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723440"><span class="hs-identifier hs-var">dead</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1645"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Solved&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Dead givens =&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723440"><span class="hs-identifier hs-var">dead</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1646"></span><span>
</span><span id="line-1647"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkTelescopeSkol"><span class="hs-identifier hs-type">checkTelescopeSkol</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfoAnon"><span class="hs-identifier hs-type">SkolemInfoAnon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1648"></span><span class="hs-comment">-- See Note [Checking telescopes]</span><span>
</span><span id="line-1649"></span><span id="checkTelescopeSkol"><span class="annot"><span class="annottext">checkTelescopeSkol :: SkolemInfoAnon -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#checkTelescopeSkol"><span class="hs-identifier hs-var hs-var">checkTelescopeSkol</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ForAllSkol"><span class="hs-identifier hs-type">ForAllSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1650"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkTelescopeSkol"><span class="hs-identifier hs-var">checkTelescopeSkol</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier hs-type">HasGivenEqs</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1653"></span><span>  </span><span id="local-6989586621682723446"><span class="annot"><span class="annottext">ppr :: HasGivenEqs -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NoGivenEqs&quot;</span></span><span>
</span><span id="line-1654"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#LocalGivenEqs"><span class="hs-identifier hs-var">LocalGivenEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LocalGivenEqs&quot;</span></span><span>
</span><span id="line-1655"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MaybeGivenEqs&quot;</span></span><span>
</span><span id="line-1656"></span><span>
</span><span id="line-1657"></span><span class="hs-comment">-- Used in GHC.Tc.Solver.Monad.getHasGivenEqs</span><span>
</span><span id="line-1658"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682723449"><span id="local-6989586621682723453"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier hs-type">HasGivenEqs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1659"></span><span>  </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span> </span><span id="local-6989586621682723457"><span class="annot"><span class="annottext">&lt;&gt; :: HasGivenEqs -&gt; HasGivenEqs -&gt; HasGivenEqs
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621682723458"><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723458"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723458"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1660"></span><span>  </span><span id="local-6989586621682723459"><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723459"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723459"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-1661"></span><span>
</span><span id="line-1662"></span><span>  </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span id="local-6989586621682723460"><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723460"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span>
</span><span id="line-1663"></span><span>  </span><span id="local-6989586621682723461"><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="#local-6989586621682723461"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#MaybeGivenEqs"><span class="hs-identifier hs-var">MaybeGivenEqs</span></a></span><span>
</span><span id="line-1664"></span><span>
</span><span id="line-1665"></span><span>  </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#LocalGivenEqs"><span class="hs-identifier hs-var">LocalGivenEqs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#LocalGivenEqs"><span class="hs-identifier hs-var">LocalGivenEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#LocalGivenEqs"><span class="hs-identifier hs-var">LocalGivenEqs</span></a></span><span>
</span><span id="line-1666"></span><span>
</span><span id="line-1667"></span><span class="hs-comment">-- Used in GHC.Tc.Solver.Monad.getHasGivenEqs</span><span>
</span><span id="line-1668"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682723466"><span id="local-6989586621682723470"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HasGivenEqs"><span class="hs-identifier hs-type">HasGivenEqs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1669"></span><span>  </span><span id="local-6989586621682723472"><span class="annot"><span class="annottext">mempty :: HasGivenEqs
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasGivenEqs
</span><a href="GHC.Tc.Types.Constraint.html#NoGivenEqs"><span class="hs-identifier hs-var">NoGivenEqs</span></a></span><span>
</span><span id="line-1670"></span><span>
</span><span id="line-1671"></span><span class="hs-comment">{- Note [Checking telescopes]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When kind-checking a /user-written/ type, we might have a &quot;bad telescope&quot;
like this one:
  data SameKind :: forall k. k -&gt; k -&gt; Type
  type Foo :: forall a k (b :: k). SameKind a b -&gt; Type

The kind of 'a' mentions 'k' which is bound after 'a'.  Oops.

One approach to doing this would be to bring each of a, k, and b into
scope, one at a time, creating a separate implication constraint for
each one, and bumping the TcLevel. This would work, because the kind
of, say, a would be untouchable when k is in scope (and the constraint
couldn't float out because k blocks it). However, it leads to terrible
error messages, complaining about skolem escape. While it is indeed a
problem of skolem escape, we can do better.

Instead, our approach is to bring the block of variables into scope
all at once, creating one implication constraint for the lot:

* We make a single implication constraint when kind-checking
  the 'forall' in Foo's kind, something like
      forall a k (b::k). { wanted constraints }

* Having solved {wanted}, before discarding the now-solved implication,
  the constraint solver checks the dependency order of the skolem
  variables (ic_skols).  This is done in setImplicationStatus.

* This check is only necessary if the implication was born from a
  'forall' in a user-written signature (the HsForAllTy case in
  GHC.Tc.Gen.HsType.  If, say, it comes from checking a pattern match
  that binds existentials, where the type of the data constructor is
  known to be valid (it in tcConPat), no need for the check.

  So the check is done /if and only if/ ic_info is ForAllSkol.

* If ic_info is (ForAllSkol dt dvs), the dvs::SDoc displays the
  original, user-written type variables.

* Be careful /NOT/ to discard an implication with a ForAllSkol
  ic_info, even if ic_wanted is empty.  We must give the
  constraint solver a chance to make that bad-telescope test!  Hence
  the extra guard in emitResidualTvConstraint; see #16247

* Don't mix up inferred and explicit variables in the same implication
  constraint.  E.g.
      foo :: forall a kx (b :: kx). SameKind a b
  We want an implication
      Implic { ic_skol = [(a::kx), kx, (b::kx)], ... }
  but GHC will attempt to quantify over kx, since it is free in (a::kx),
  and it's hopelessly confusing to report an error about quantified
  variables   kx (a::kx) kx (b::kx).
  Instead, the outer quantification over kx should be in a separate
  implication. TL;DR: an explicit forall should generate an implication
  quantified only over those explicitly quantified variables.

Note [Needed evidence variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Th ic_need_evs field holds the free vars of ic_binds, and all the
ic_binds in nested implications.

  * Main purpose: if one of the ic_givens is not mentioned in here, it
    is redundant.

  * solveImplication may drop an implication altogether if it has no
    remaining 'wanteds'. But we still track the free vars of its
    evidence binds, even though it has now disappeared.

Note [Shadowing in a constraint]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We assume NO SHADOWING in a constraint.  Specifically
 * The unification variables are all implicitly quantified at top
   level, and are all unique
 * The skolem variables bound in ic_skols are all fresh when the
   implication is created.
So we can safely substitute. For example, if we have
   forall a.  a~Int =&gt; ...(forall b. ...a...)...
we can push the (a~Int) constraint inwards in the &quot;givens&quot; without
worrying that 'b' might clash.

Note [Skolems in an implication]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The skolems in an implication are used:

* When considering floating a constraint outside the implication in
  GHC.Tc.Solver.floatEqualities or GHC.Tc.Solver.approximateImplications
  For this, we can treat ic_skols as a set.

* When checking that a /user-specified/ forall (ic_info = ForAllSkol tvs)
  has its variables in the correct order; see Note [Checking telescopes].
  Only for these implications does ic_skols need to be a list.

Nota bene: Although ic_skols is a list, it is not necessarily
in dependency order:
- In the ic_info=ForAllSkol case, the user might have written them
  in the wrong order
- In the case of a type signature like
      f :: [a] -&gt; [b]
  the renamer gathers the implicit &quot;outer&quot; forall'd variables {a,b}, but
  does not know what order to put them in.  The type checker can sort them
  into dependency order, but only after solving all the kind constraints;
  and to do that it's convenient to create the Implication!

So we accept that ic_skols may be out of order.  Think of it as a set or
(in the case of ic_info=ForAllSkol, a list in user-specified, and possibly
wrong, order.

Note [Insoluble constraints]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Some of the errors that we get during canonicalization are best
reported when all constraints have been simplified as much as
possible. For instance, assume that during simplification the
following constraints arise:

 [Wanted]   F alpha ~  uf1
 [Wanted]   beta ~ uf1 beta

When canonicalizing the wanted (beta ~ uf1 beta), if we eagerly fail
we will simply see a message:
    'Can't construct the infinite type  beta ~ uf1 beta'
and the user has no idea what the uf1 variable is.

Instead our plan is that we will NOT fail immediately, but:
    (1) Record the &quot;frozen&quot; error in the ic_insols field
    (2) Isolate the offending constraint from the rest of the inerts
    (3) Keep on simplifying/canonicalizing

At the end, we will hopefully have substituted uf1 := F alpha, and we
will be able to report a more informative error:
    'Can't construct the infinite type beta ~ F alpha beta'

************************************************************************
*                                                                      *
            Invariant checking (debug only)
*                                                                      *
************************************************************************

Note [Implication invariants]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The skolems of an implication have the following invariants, which are checked
by checkImplicationInvariants:

a) They are all SkolemTv TcTyVars; no TyVars, no unification variables
b) Their TcLevel matches the ic_lvl for the implication
c) Their SkolemInfo matches the implication.

Actually (c) is not quite true.  Consider
   data T a = forall b. MkT a b

In tcConDecl for MkT we'll create an implication with ic_info of
DataConSkol; but the type variable 'a' will have a SkolemInfo of
TyConSkol.  So we allow the tyvar to have a SkolemInfo of TyConFlav if
the implication SkolemInfo is DataConSkol.
-}</span><span>
</span><span id="line-1825"></span><span>
</span><span id="line-1826"></span><span id="local-6989586621682722420"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkImplicationInvariants"><span class="hs-identifier hs-type">checkImplicationInvariants</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#check_implic"><span class="hs-identifier hs-type">check_implic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="#local-6989586621682722420"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implication"><span class="hs-identifier hs-type">Implication</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682722420"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1827"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkImplicationInvariants"><span class="hs-pragma hs-type">checkImplicationInvariants</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1828"></span><span class="hs-comment">-- Nothing =&gt; OK, Just doc =&gt; doc gives info</span><span>
</span><span id="line-1829"></span><span id="checkImplicationInvariants"><span class="annot"><span class="annottext">checkImplicationInvariants :: forall (m :: * -&gt; *).
(HasCallStack, Applicative m) =&gt;
Implication -&gt; m ()
</span><a href="GHC.Tc.Types.Constraint.html#checkImplicationInvariants"><span class="hs-identifier hs-var hs-var">checkImplicationInvariants</span></a></span></span><span> </span><span id="local-6989586621682723480"><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723480"><span class="hs-identifier hs-var">implic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="GHC.Utils.Constants.html#debugIsOn"><span class="hs-identifier hs-var">debugIsOn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Implication -&gt; m ()
forall (m :: * -&gt; *).
(HasCallStack, Applicative m) =&gt;
Implication -&gt; m ()
</span><a href="GHC.Tc.Types.Constraint.html#check_implic"><span class="hs-identifier hs-var">check_implic</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723480"><span class="hs-identifier hs-var">implic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1830"></span><span>
</span><span id="line-1831"></span><span id="check_implic"><span class="annot"><span class="annottext">check_implic :: forall (m :: * -&gt; *).
(HasCallStack, Applicative m) =&gt;
Implication -&gt; m ()
</span><a href="GHC.Tc.Types.Constraint.html#check_implic"><span class="hs-identifier hs-var hs-var">check_implic</span></a></span></span><span> </span><span id="local-6989586621682723520"><span class="annot"><span class="annottext">implic :: Implication
</span><a href="#local-6989586621682723520"><span class="hs-identifier hs-var">implic</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Implic"><span class="hs-identifier hs-type">Implic</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ic_tclvl :: Implication -&gt; TcLevel
</span><a href="GHC.Tc.Types.Constraint.html#ic_tclvl"><span class="hs-identifier hs-var">ic_tclvl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723521"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723521"><span class="hs-identifier hs-var">lvl</span></a></span></span><span>
</span><span id="line-1832"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_info :: Implication -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Constraint.html#ic_info"><span class="hs-identifier hs-var">ic_info</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723522"><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723522"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span>
</span><span id="line-1833"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ic_skols :: Implication -&gt; [EvVar]
</span><a href="GHC.Tc.Types.Constraint.html#ic_skols"><span class="hs-identifier hs-var">ic_skols</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723523"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723523"><span class="hs-identifier hs-var">skols</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1834"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682723524"><span class="hs-identifier hs-var">bads</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1835"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; m ()
forall (m :: * -&gt; *).
(HasCallStack, Applicative m) =&gt;
Bool -&gt; SDoc -&gt; m ()
</span><a href="GHC.Utils.Panic.html#massertPpr"><span class="hs-identifier hs-var">massertPpr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checkImplicationInvariants failure&quot;</span></span><span>
</span><span id="line-1836"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ExpansionFuel -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">ExpansionFuel
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682723524"><span class="hs-identifier hs-var">bads</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1837"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Implication -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Implication
</span><a href="#local-6989586621682723520"><span class="hs-identifier hs-var">implic</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1838"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1839"></span><span>    </span><span id="local-6989586621682723524"><span class="annot"><span class="annottext">bads :: [SDoc]
</span><a href="#local-6989586621682723524"><span class="hs-identifier hs-var hs-var">bads</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvVar -&gt; Maybe SDoc) -&gt; [EvVar] -&gt; [SDoc]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Maybe SDoc
</span><a href="#local-6989586621682723527"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723523"><span class="hs-identifier hs-var">skols</span></a></span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span>    </span><span class="annot"><a href="#local-6989586621682723527"><span class="hs-identifier hs-type">check</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1842"></span><span>    </span><span id="local-6989586621682723527"><span class="annot"><span class="annottext">check :: EvVar -&gt; Maybe SDoc
</span><a href="#local-6989586621682723527"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621682723528"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723528"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTcTyVar"><span class="hs-identifier hs-var">isTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723528"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1843"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723528"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not a TcTyVar&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1844"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1845"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; TcTyVarDetails -&gt; Maybe SDoc
</span><a href="#local-6989586621682723530"><span class="hs-identifier hs-var">check_details</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723528"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; TcTyVarDetails
</span><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-var">tcTyVarDetails</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723528"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1846"></span><span>
</span><span id="line-1847"></span><span>    </span><span class="annot"><a href="#local-6989586621682723530"><span class="hs-identifier hs-type">check_details</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyVarDetails"><span class="hs-identifier hs-type">TcTyVarDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1848"></span><span>    </span><span id="local-6989586621682723530"><span class="annot"><span class="annottext">check_details :: EvVar -&gt; TcTyVarDetails -&gt; Maybe SDoc
</span><a href="#local-6989586621682723530"><span class="hs-identifier hs-var hs-var">check_details</span></a></span></span><span> </span><span id="local-6989586621682723532"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723532"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-type">SkolemTv</span></a></span><span> </span><span id="local-6989586621682723534"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682723534"><span class="hs-identifier hs-var">tv_skol_info</span></a></span></span><span> </span><span id="local-6989586621682723535"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723535"><span class="hs-identifier hs-var">tv_lvl</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723535"><span class="hs-identifier hs-var">tv_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; TcLevel -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#sameDepthAs"><span class="hs-operator hs-var">`sameDepthAs`</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723521"><span class="hs-identifier hs-var">lvl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1850"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723532"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has level&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723535"><span class="hs-identifier hs-var">tv_lvl</span></a></span><span>
</span><span id="line-1851"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ic_lvl&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682723521"><span class="hs-identifier hs-var">lvl</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1852"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723522"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; SkolemInfoAnon -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#checkSkolInfoAnon"><span class="hs-operator hs-var">`checkSkolInfoAnon`</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723538"><span class="hs-identifier hs-var">skol_info_anon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1853"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723532"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has skol info&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723538"><span class="hs-identifier hs-var">skol_info_anon</span></a></span><span>
</span><span id="line-1854"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ic_info&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723522"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1855"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1856"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1857"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1858"></span><span>        </span><span id="local-6989586621682723538"><span class="annot"><span class="annottext">skol_info_anon :: SkolemInfoAnon
</span><a href="#local-6989586621682723538"><span class="hs-identifier hs-var hs-var">skol_info_anon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SkolemInfo -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682723534"><span class="hs-identifier hs-var">tv_skol_info</span></a></span><span>
</span><span id="line-1859"></span><span>    </span><span class="annot"><a href="#local-6989586621682723530"><span class="hs-identifier hs-var">check_details</span></a></span><span> </span><span id="local-6989586621682723540"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723540"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621682723541"><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="#local-6989586621682723541"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-1860"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723540"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not a SkolemTv&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="#local-6989586621682723541"><span class="hs-identifier hs-var">details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1861"></span><span>
</span><span id="line-1862"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#checkSkolInfoAnon"><span class="hs-identifier hs-type">checkSkolInfoAnon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfoAnon"><span class="hs-identifier hs-type">SkolemInfoAnon</span></a></span><span>   </span><span class="hs-comment">-- From the implication</span><span>
</span><span id="line-1863"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfoAnon"><span class="hs-identifier hs-type">SkolemInfoAnon</span></a></span><span>   </span><span class="hs-comment">-- From the type variable</span><span>
</span><span id="line-1864"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>             </span><span class="hs-comment">-- True &lt;=&gt; ok</span><span>
</span><span id="line-1865"></span><span class="hs-comment">-- Used only for debug-checking; checkImplicationInvariants</span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- So it doesn't matter much if its's incomplete</span><span>
</span><span id="line-1867"></span><span id="checkSkolInfoAnon"><span class="annot"><span class="annottext">checkSkolInfoAnon :: SkolemInfoAnon -&gt; SkolemInfoAnon -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#checkSkolInfoAnon"><span class="hs-identifier hs-var hs-var">checkSkolInfoAnon</span></a></span></span><span> </span><span id="local-6989586621682723542"><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723542"><span class="hs-identifier hs-var">sk1</span></a></span></span><span> </span><span id="local-6989586621682723543"><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723543"><span class="hs-identifier hs-var">sk2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; SkolemInfoAnon -&gt; Bool
</span><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723542"><span class="hs-identifier hs-var">sk1</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="#local-6989586621682723543"><span class="hs-identifier hs-var">sk2</span></a></span><span>
</span><span id="line-1868"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1869"></span><span>    </span><span id="local-6989586621682723544"><span class="annot"><span class="annottext">go :: SkolemInfoAnon -&gt; SkolemInfoAnon -&gt; Bool
</span><a href="#local-6989586621682723544"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span id="local-6989586621682723574"><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723574"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621682723575"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723575"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682723576"><span class="annot"><span class="annottext">[(Name, EvVar)]
</span><a href="#local-6989586621682723576"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-type">SigSkol</span></a></span><span> </span><span id="local-6989586621682723577"><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723577"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621682723578"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723578"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span id="local-6989586621682723579"><span class="annot"><span class="annottext">[(Name, EvVar)]
</span><a href="#local-6989586621682723579"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723574"><span class="hs-identifier hs-var">c1</span></a></span><span class="annot"><span class="annottext">UserTypeCtxt -&gt; UserTypeCtxt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723577"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723575"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Xi -&gt; Bool
Xi -&gt; Xi -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-operator hs-var">`tcEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723578"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[(Name, EvVar)]
</span><a href="#local-6989586621682723576"><span class="hs-identifier hs-var">s1</span></a></span><span class="annot"><span class="annottext">[(Name, EvVar)] -&gt; [(Name, EvVar)] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">[(Name, EvVar)]
</span><a href="#local-6989586621682723579"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-1870"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigTypeSkol"><span class="hs-identifier hs-type">SigTypeSkol</span></a></span><span> </span><span id="local-6989586621682723582"><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723582"><span class="hs-identifier hs-var">cx1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigTypeSkol"><span class="hs-identifier hs-type">SigTypeSkol</span></a></span><span> </span><span id="local-6989586621682723583"><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723583"><span class="hs-identifier hs-var">cx2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723582"><span class="hs-identifier hs-var">cx1</span></a></span><span class="annot"><span class="annottext">UserTypeCtxt -&gt; UserTypeCtxt -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="#local-6989586621682723583"><span class="hs-identifier hs-var">cx2</span></a></span><span>
</span><span id="line-1871"></span><span>
</span><span id="line-1872"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ForAllSkol"><span class="hs-identifier hs-type">ForAllSkol</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarBndrs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ForAllSkol"><span class="hs-identifier hs-type">ForAllSkol</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarBndrs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1873"></span><span>
</span><span id="line-1874"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#IPSkol"><span class="hs-identifier hs-type">IPSkol</span></a></span><span> </span><span id="local-6989586621682723585"><span class="annot"><span class="annottext">[HsIPName]
</span><a href="#local-6989586621682723585"><span class="hs-identifier hs-var">ips1</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#IPSkol"><span class="hs-identifier hs-type">IPSkol</span></a></span><span> </span><span id="local-6989586621682723586"><span class="annot"><span class="annottext">[HsIPName]
</span><a href="#local-6989586621682723586"><span class="hs-identifier hs-var">ips2</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsIPName]
</span><a href="#local-6989586621682723585"><span class="hs-identifier hs-var">ips1</span></a></span><span> </span><span class="annot"><span class="annottext">[HsIPName] -&gt; [HsIPName] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[HsIPName]
</span><a href="#local-6989586621682723586"><span class="hs-identifier hs-var">ips2</span></a></span><span>
</span><span id="line-1875"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DerivSkol"><span class="hs-identifier hs-type">DerivSkol</span></a></span><span> </span><span id="local-6989586621682723588"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723588"><span class="hs-identifier hs-var">pred1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DerivSkol"><span class="hs-identifier hs-type">DerivSkol</span></a></span><span> </span><span id="local-6989586621682723589"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723589"><span class="hs-identifier hs-var">pred2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723588"><span class="hs-identifier hs-var">pred1</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Xi -&gt; Bool
Xi -&gt; Xi -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-operator hs-var">`tcEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723589"><span class="hs-identifier hs-var">pred2</span></a></span><span>
</span><span id="line-1876"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TyConSkol"><span class="hs-identifier hs-type">TyConSkol</span></a></span><span> </span><span id="local-6989586621682723591"><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723591"><span class="hs-identifier hs-var">f1</span></a></span></span><span> </span><span id="local-6989586621682723592"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723592"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TyConSkol"><span class="hs-identifier hs-type">TyConSkol</span></a></span><span> </span><span id="local-6989586621682723593"><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723593"><span class="hs-identifier hs-var">f2</span></a></span></span><span> </span><span id="local-6989586621682723594"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723594"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723591"><span class="hs-identifier hs-var">f1</span></a></span><span class="annot"><span class="annottext">TyConFlavour TyCon -&gt; TyConFlavour TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723593"><span class="hs-identifier hs-var">f2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723592"><span class="hs-identifier hs-var">n1</span></a></span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723594"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1877"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DataConSkol"><span class="hs-identifier hs-type">DataConSkol</span></a></span><span> </span><span id="local-6989586621682723596"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723596"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DataConSkol"><span class="hs-identifier hs-type">DataConSkol</span></a></span><span> </span><span id="local-6989586621682723597"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723597"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723596"><span class="hs-identifier hs-var">n1</span></a></span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723597"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1878"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InstSkol"><span class="hs-identifier hs-type">InstSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InstSkol"><span class="hs-identifier hs-type">InstSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1879"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#FamInstSkol"><span class="hs-identifier hs-var">FamInstSkol</span></a></span><span>          </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#FamInstSkol"><span class="hs-identifier hs-var">FamInstSkol</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1880"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#BracketSkol"><span class="hs-identifier hs-var">BracketSkol</span></a></span><span>          </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#BracketSkol"><span class="hs-identifier hs-var">BracketSkol</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1881"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#RuleSkol"><span class="hs-identifier hs-type">RuleSkol</span></a></span><span> </span><span id="local-6989586621682723602"><span class="annot"><span class="annottext">RuleName
</span><a href="#local-6989586621682723602"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#RuleSkol"><span class="hs-identifier hs-type">RuleSkol</span></a></span><span> </span><span id="local-6989586621682723603"><span class="annot"><span class="annottext">RuleName
</span><a href="#local-6989586621682723603"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuleName
</span><a href="#local-6989586621682723602"><span class="hs-identifier hs-var">n1</span></a></span><span class="annot"><span class="annottext">RuleName -&gt; RuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">RuleName
</span><a href="#local-6989586621682723603"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1882"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSkol"><span class="hs-identifier hs-type">PatSkol</span></a></span><span> </span><span id="local-6989586621682723605"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621682723605"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#PatSkol"><span class="hs-identifier hs-type">PatSkol</span></a></span><span> </span><span id="local-6989586621682723606"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621682723606"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621682723605"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621682723606"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1883"></span><span>       </span><span class="hs-comment">-- Too tedious to compare the HsMatchContexts</span><span>
</span><span id="line-1884"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InferSkol"><span class="hs-identifier hs-type">InferSkol</span></a></span><span> </span><span id="local-6989586621682723609"><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723609"><span class="hs-identifier hs-var">ids1</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InferSkol"><span class="hs-identifier hs-type">InferSkol</span></a></span><span> </span><span id="local-6989586621682723610"><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723610"><span class="hs-identifier hs-var">ids2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, Xi)] -&gt; [(Name, Xi)] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-identifier hs-var">equalLength</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723609"><span class="hs-identifier hs-var">ids1</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723610"><span class="hs-identifier hs-var">ids2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1885"></span><span>                                                   </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Name, Xi) -&gt; (Name, Xi) -&gt; Bool)
-&gt; [(Name, Xi)] -&gt; [(Name, Xi)] -&gt; [Bool]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">(Name, Xi) -&gt; (Name, Xi) -&gt; Bool
</span><a href="#local-6989586621682723614"><span class="hs-identifier hs-var">eq_pr</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723609"><span class="hs-identifier hs-var">ids1</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Xi)]
</span><a href="#local-6989586621682723610"><span class="hs-identifier hs-var">ids2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1886"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#UnifyForAllSkol"><span class="hs-identifier hs-type">UnifyForAllSkol</span></a></span><span> </span><span id="local-6989586621682723616"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723616"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#UnifyForAllSkol"><span class="hs-identifier hs-type">UnifyForAllSkol</span></a></span><span> </span><span id="local-6989586621682723617"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723617"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723616"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Xi -&gt; Xi -&gt; Bool
Xi -&gt; Xi -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-operator hs-var">`tcEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723617"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1887"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#ReifySkol"><span class="hs-identifier hs-var">ReifySkol</span></a></span><span>            </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#ReifySkol"><span class="hs-identifier hs-var">ReifySkol</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1888"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#RuntimeUnkSkol"><span class="hs-identifier hs-var">RuntimeUnkSkol</span></a></span><span>       </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#RuntimeUnkSkol"><span class="hs-identifier hs-var">RuntimeUnkSkol</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1889"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#ArrowReboundIfSkol"><span class="hs-identifier hs-var">ArrowReboundIfSkol</span></a></span><span>   </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#ArrowReboundIfSkol"><span class="hs-identifier hs-var">ArrowReboundIfSkol</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1890"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#UnkSkol"><span class="hs-identifier hs-type">UnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#UnkSkol"><span class="hs-identifier hs-type">UnkSkol</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span>    </span><span class="hs-comment">-------- Three slightly strange special cases --------</span><span>
</span><span id="line-1893"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DataConSkol"><span class="hs-identifier hs-type">DataConSkol</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TyConSkol"><span class="hs-identifier hs-type">TyConSkol</span></a></span><span> </span><span id="local-6989586621682723622"><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723622"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyConFlavour TyCon -&gt; Bool
forall {tc}. TyConFlavour tc -&gt; Bool
</span><a href="#local-6989586621682723623"><span class="hs-identifier hs-var">h98_data_decl</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723622"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1894"></span><span>    </span><span class="hs-comment">-- In the H98 declaration  data T a = forall b. MkT a b</span><span>
</span><span id="line-1895"></span><span>    </span><span class="hs-comment">-- in tcConDecl for MkT we'll have a SkolemInfo in the implication of</span><span>
</span><span id="line-1896"></span><span>    </span><span class="hs-comment">-- DataConSkol, but the type variable 'a' will have a SkolemInfo of TyConSkol</span><span>
</span><span id="line-1897"></span><span>
</span><span id="line-1898"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#DataConSkol"><span class="hs-identifier hs-type">DataConSkol</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#FamInstSkol"><span class="hs-identifier hs-var">FamInstSkol</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1899"></span><span>    </span><span class="hs-comment">-- In  data/newtype instance T a = MkT (a -&gt; a),</span><span>
</span><span id="line-1900"></span><span>    </span><span class="hs-comment">-- in tcConDecl for MkT we'll have a SkolemInfo in the implication of</span><span>
</span><span id="line-1901"></span><span>    </span><span class="hs-comment">-- DataConSkol, but 'a' will have SkolemInfo of FamInstSkol</span><span>
</span><span id="line-1902"></span><span>
</span><span id="line-1903"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#FamInstSkol"><span class="hs-identifier hs-var">FamInstSkol</span></a></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#InstSkol"><span class="hs-identifier hs-type">InstSkol</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1904"></span><span>    </span><span class="hs-comment">-- In instance C (T a) where { type F (T a) b = ... }</span><span>
</span><span id="line-1905"></span><span>    </span><span class="hs-comment">-- we have 'a' with SkolemInfo InstSkol, but we make an implication wi</span><span>
</span><span id="line-1906"></span><span>    </span><span class="hs-comment">-- SkolemInfo of FamInstSkol.  Very like the ConDecl/TyConSkol case</span><span>
</span><span id="line-1907"></span><span>
</span><span id="line-1908"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#ForAllSkol"><span class="hs-identifier hs-type">ForAllSkol</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarBndrs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1909"></span><span>    </span><span class="hs-comment">-- Telescope tests: we need a ForAllSkol to force the telescope</span><span>
</span><span id="line-1910"></span><span>    </span><span class="hs-comment">-- test, but the skolems might come from (say) a family instance decl</span><span>
</span><span id="line-1911"></span><span>    </span><span class="hs-comment">--    type instance forall a. F [a] = a-&gt;a</span><span>
</span><span id="line-1912"></span><span>
</span><span id="line-1913"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SigTypeSkol"><span class="hs-identifier hs-type">SigTypeSkol</span></a></span><span> </span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="GHC.Tc.Types.Origin.html#DerivClauseCtxt"><span class="hs-identifier hs-var">DerivClauseCtxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Origin.html#TyConSkol"><span class="hs-identifier hs-type">TyConSkol</span></a></span><span> </span><span id="local-6989586621682723625"><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723625"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyConFlavour TyCon -&gt; Bool
forall {tc}. TyConFlavour tc -&gt; Bool
</span><a href="#local-6989586621682723623"><span class="hs-identifier hs-var">h98_data_decl</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour TyCon
</span><a href="#local-6989586621682723625"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1914"></span><span>    </span><span class="hs-comment">-- e.g.   newtype T a = MkT ... deriving blah</span><span>
</span><span id="line-1915"></span><span>    </span><span class="hs-comment">-- We use the skolems from T (TyConSkol) when typechecking</span><span>
</span><span id="line-1916"></span><span>    </span><span class="hs-comment">-- the deriving clauses (SigTypeSkol DerivClauseCtxt)</span><span>
</span><span id="line-1917"></span><span>
</span><span id="line-1918"></span><span>    </span><span class="annot"><a href="#local-6989586621682723544"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1919"></span><span>
</span><span id="line-1920"></span><span>    </span><span class="annot"><a href="#local-6989586621682723614"><span class="hs-identifier hs-type">eq_pr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1921"></span><span>    </span><span id="local-6989586621682723614"><span class="annot"><span class="annottext">eq_pr :: (Name, Xi) -&gt; (Name, Xi) -&gt; Bool
</span><a href="#local-6989586621682723614"><span class="hs-identifier hs-var hs-var">eq_pr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682723626"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723626"><span class="hs-identifier hs-var">i1</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Xi
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682723627"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723627"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Xi
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723626"><span class="hs-identifier hs-var">i1</span></a></span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682723627"><span class="hs-identifier hs-var">i2</span></a></span><span> </span><span class="hs-comment">-- Types may be differently zonked</span><span>
</span><span id="line-1922"></span><span>
</span><span id="line-1923"></span><span>    </span><span id="local-6989586621682723623"><span class="annot"><span class="annottext">h98_data_decl :: TyConFlavour tc -&gt; Bool
</span><a href="#local-6989586621682723623"><span class="hs-identifier hs-var hs-var">h98_data_decl</span></a></span></span><span> </span><span class="annot"><span class="annottext">TyConFlavour tc
</span><a href="GHC.Types.Basic.html#DataTypeFlavour"><span class="hs-identifier hs-var">DataTypeFlavour</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1924"></span><span>    </span><span class="annot"><a href="#local-6989586621682723623"><span class="hs-identifier hs-var">h98_data_decl</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour tc
</span><a href="GHC.Types.Basic.html#NewtypeFlavour"><span class="hs-identifier hs-var">NewtypeFlavour</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1925"></span><span>    </span><span class="annot"><a href="#local-6989586621682723623"><span class="hs-identifier hs-var">h98_data_decl</span></a></span><span> </span><span class="annot"><span class="annottext">TyConFlavour tc
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span>
</span><span id="line-1928"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
            Pretty printing
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1933"></span><span>
</span><span id="line-1934"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVars"><span class="hs-identifier hs-type">pprEvVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>    </span><span class="hs-comment">-- Print with their types</span><span>
</span><span id="line-1935"></span><span id="pprEvVars"><span class="annot"><span class="annottext">pprEvVars :: [EvVar] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVars"><span class="hs-identifier hs-var hs-var">pprEvVars</span></a></span></span><span> </span><span id="local-6989586621682723630"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723630"><span class="hs-identifier hs-var">ev_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EvVar -&gt; SDoc) -&gt; [EvVar] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarWithType"><span class="hs-identifier hs-var">pprEvVarWithType</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723630"><span class="hs-identifier hs-var">ev_vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1936"></span><span>
</span><span id="line-1937"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier hs-type">pprEvVarTheta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1938"></span><span id="pprEvVarTheta"><span class="annot"><span class="annottext">pprEvVarTheta :: [EvVar] -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarTheta"><span class="hs-identifier hs-var hs-var">pprEvVarTheta</span></a></span></span><span> </span><span id="local-6989586621682723631"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723631"><span class="hs-identifier hs-var">ev_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Xi] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTheta"><span class="hs-identifier hs-var">pprTheta</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EvVar -&gt; Xi) -&gt; [EvVar] -&gt; [Xi]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Xi
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723631"><span class="hs-identifier hs-var">ev_vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1939"></span><span>
</span><span id="line-1940"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#pprEvVarWithType"><span class="hs-identifier hs-type">pprEvVarWithType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1941"></span><span id="pprEvVarWithType"><span class="annot"><span class="annottext">pprEvVarWithType :: EvVar -&gt; SDoc
</span><a href="GHC.Tc.Types.Constraint.html#pprEvVarWithType"><span class="hs-identifier hs-var hs-var">pprEvVarWithType</span></a></span></span><span> </span><span id="local-6989586621682723633"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723633"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723633"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; Xi
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723633"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1942"></span><span>
</span><span id="line-1943"></span><span>
</span><span id="line-1944"></span><span>
</span><span id="line-1945"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#wrapType"><span class="hs-identifier hs-type">wrapType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1946"></span><span id="wrapType"><span class="annot"><span class="annottext">wrapType :: Xi -&gt; [EvVar] -&gt; [Xi] -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#wrapType"><span class="hs-identifier hs-var hs-var">wrapType</span></a></span></span><span> </span><span id="local-6989586621682723635"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723635"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682723636"><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723636"><span class="hs-identifier hs-var">skols</span></a></span></span><span> </span><span id="local-6989586621682723637"><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723637"><span class="hs-identifier hs-var">givens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EvVar] -&gt; Xi -&gt; Xi
</span><a href="GHC.Core.Type.html#mkSpecForAllTys"><span class="hs-identifier hs-var">mkSpecForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[EvVar]
</span><a href="#local-6989586621682723636"><span class="hs-identifier hs-var">skols</span></a></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; Xi) -&gt; Xi -&gt; Xi
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Xi] -&gt; Xi -&gt; Xi
HasDebugCallStack =&gt; [Xi] -&gt; Xi -&gt; Xi
</span><a href="GHC.Tc.Utils.TcType.html#mkPhiTy"><span class="hs-identifier hs-var">mkPhiTy</span></a></span><span> </span><span class="annot"><span class="annottext">[Xi]
</span><a href="#local-6989586621682723637"><span class="hs-identifier hs-var">givens</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723635"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1947"></span><span>
</span><span id="line-1948"></span><span>
</span><span id="line-1949"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
            CtEvidence
*                                                                      *
************************************************************************

Note [CtEvidence invariants]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The `ctev_pred` field of a `CtEvidence` is a just a cache for the type
of the evidence. More precisely:

* For Givens, `ctev_pred` = `varType ctev_evar`
* For Wanteds, `ctev_pred` = `evDestType ctev_dest`

where

  evDestType :: TcEvDest -&gt; TcType
  evDestType (EvVarDest evVar)       = varType evVar
  evDestType (HoleDest coercionHole) = varType (coHoleCoVar coercionHole)

The invariant is maintained by `setCtEvPredType`, the only function that
updates the `ctev_pred` field of a `CtEvidence`.

Why is the invariant important? Because when the evidence is a coercion, it may
be used in (CastTy ty co); and then we may call `typeKind` on that type (e.g.
in the kind-check of `eqType`); and expect to see a fully zonked kind.
(This came up in test T13333, in the MR that fixed #20641, namely !6942.)

Historical Note [Evidence field of CtEvidence]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the past we tried leaving the `ctev_evar`/`ctev_dest` field of a
constraint untouched (and hence un-zonked) on the grounds that it is
never looked at.  But in fact it is: the evidence can become part of a
type (via `CastTy ty kco`) and we may later ask the kind of that type
and expect a zonked result.  (For example, in the kind-check
of `eqType`.)

The safest thing is simply to keep `ctev_evar`/`ctev_dest` in sync
with `ctev_pred`, as stated in `Note [CtEvidence invariants]`.

Note [Bind new Givens immediately]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For Givens we make new EvVars and bind them immediately. Two main reasons:
  * Gain sharing.  E.g. suppose we start with g :: C a b, where
       class D a =&gt; C a b
       class (E a, F a) =&gt; D a
    If we generate all g's superclasses as separate EvTerms we might
    get    selD1 (selC1 g) :: E a
           selD2 (selC1 g) :: F a
           selC1 g :: D a
    which we could do more economically as:
           g1 :: D a = selC1 g
           g2 :: E a = selD1 g1
           g3 :: F a = selD2 g1

  * For *coercion* evidence we *must* bind each given:
      class (a~b) =&gt; C a b where ....
      f :: C a b =&gt; ....
    Then in f's Givens we have g:(C a b) and the superclass sc(g,0):a~b.
    But that superclass selector can't (yet) appear in a coercion
    (see evTermCoercion), so the easy thing is to bind it to an Id.

So a Given has EvVar inside it rather than (as previously) an EvTerm.

Note [The rewrite-role of a constraint]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The rewrite-role of a constraint says what can rewrite that constraint:

* If the rewrite-role = Nominal, only a nominal equality can rewrite it

* If the rewrite-rule = Representational, either a nominal or
  representational equality can rewrit it.

Notice that the constraint may itself not be an equality at all.
For example, the rewrite-role of (Eq [a]) is Nominal; only nominal
equalities can rewrite it.
-}</span><span>
</span><span id="line-2027"></span><span>
</span><span id="line-2028"></span><span class="hs-comment">-- | A place for type-checking evidence to go after it is generated.</span><span>
</span><span id="line-2029"></span><span class="hs-comment">--</span><span>
</span><span id="line-2030"></span><span class="hs-comment">--  - Wanted equalities use HoleDest,</span><span>
</span><span id="line-2031"></span><span class="hs-comment">--  - other Wanteds use EvVarDest.</span><span>
</span><span id="line-2032"></span><span class="hs-keyword">data</span><span> </span><span id="TcEvDest"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TcEvDest"><span class="hs-identifier hs-var">TcEvDest</span></a></span></span><span>
</span><span id="line-2033"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="EvVarDest"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-var">EvVarDest</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>         </span><span class="hs-comment">-- ^ bind this var to the evidence</span><span>
</span><span id="line-2034"></span><span>              </span><span class="hs-comment">-- EvVarDest is always used for non-type-equalities</span><span>
</span><span id="line-2035"></span><span>              </span><span class="hs-comment">-- e.g. class constraints</span><span>
</span><span id="line-2036"></span><span>
</span><span id="line-2037"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HoleDest"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-var">HoleDest</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span>  </span><span class="hs-comment">-- ^ fill in this hole with the evidence</span><span>
</span><span id="line-2038"></span><span>              </span><span class="hs-comment">-- HoleDest is always used for type-equalities</span><span>
</span><span id="line-2039"></span><span>              </span><span class="hs-comment">-- See Note [Coercion holes] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-2040"></span><span>
</span><span id="line-2041"></span><span class="hs-keyword">data</span><span> </span><span id="CtEvidence"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-var">CtEvidence</span></a></span></span><span>
</span><span id="line-2042"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CtGiven"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-var">CtGiven</span></a></span></span><span>    </span><span class="hs-comment">-- Truly given, not depending on subgoals</span><span>
</span><span id="line-2043"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="ctev_pred"><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var hs-var">ctev_pred</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span>      </span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-2044"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="ctev_evar"><span class="annot"><span class="annottext">CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var hs-var">ctev_evar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>           </span><span class="hs-comment">-- See Note [CtEvidence invariants]</span><span>
</span><span id="line-2045"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="ctev_loc"><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var hs-var">ctev_loc</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2046"></span><span>
</span><span id="line-2047"></span><span>
</span><span id="line-2048"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CtWanted"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-var">CtWanted</span></a></span></span><span>   </span><span class="hs-comment">-- Wanted goal</span><span>
</span><span id="line-2049"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="ctev_pred"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span>     </span><span class="hs-comment">-- See Note [Ct/evidence invariant]</span><span>
</span><span id="line-2050"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="ctev_dest"><span class="annot"><span class="annottext">CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var hs-var">ctev_dest</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TcEvDest"><span class="hs-identifier hs-type">TcEvDest</span></a></span><span>       </span><span class="hs-comment">-- See Note [CtEvidence invariants]</span><span>
</span><span id="line-2051"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="ctev_loc"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var">ctev_loc</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span>
</span><span id="line-2052"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="ctev_rewriters"><span class="annot"><span class="annottext">CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctev_rewriters"><span class="hs-identifier hs-var hs-var">ctev_rewriters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-special">}</span><span>  </span><span class="hs-comment">-- See Note [Wanteds rewrite Wanteds]</span><span>
</span><span id="line-2053"></span><span>
</span><span id="line-2054"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-type">ctEvPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcPredType"><span class="hs-identifier hs-type">TcPredType</span></a></span><span>
</span><span id="line-2055"></span><span class="hs-comment">-- The predicate of a flavor</span><span>
</span><span id="line-2056"></span><span id="ctEvPred"><span class="annot"><span class="annottext">ctEvPred :: CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var hs-var">ctEvPred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span><span>
</span><span id="line-2057"></span><span>
</span><span id="line-2058"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-type">ctEvLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span>
</span><span id="line-2059"></span><span id="ctEvLoc"><span class="annot"><span class="annottext">ctEvLoc :: CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-var hs-var">ctEvLoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var">ctev_loc</span></a></span><span>
</span><span id="line-2060"></span><span>
</span><span id="line-2061"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvOrigin"><span class="hs-identifier hs-type">ctEvOrigin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#CtOrigin"><span class="hs-identifier hs-type">CtOrigin</span></a></span><span>
</span><span id="line-2062"></span><span id="ctEvOrigin"><span class="annot"><span class="annottext">ctEvOrigin :: CtEvidence -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Constraint.html#ctEvOrigin"><span class="hs-identifier hs-var hs-var">ctEvOrigin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtLoc -&gt; CtOrigin
</span><a href="GHC.Tc.Types.CtLoc.html#ctLocOrigin"><span class="hs-identifier hs-var">ctLocOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">(CtLoc -&gt; CtOrigin)
-&gt; (CtEvidence -&gt; CtLoc) -&gt; CtEvidence -&gt; CtOrigin
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-var">ctEvLoc</span></a></span><span>
</span><span id="line-2063"></span><span>
</span><span id="line-2064"></span><span class="annot"><span class="hs-comment">-- | Get the equality relation relevant for a 'CtEvidence'</span></span><span>
</span><span id="line-2065"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEqRel"><span class="hs-identifier hs-type">ctEvEqRel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span>
</span><span id="line-2066"></span><span id="ctEvEqRel"><span class="annot"><span class="annottext">ctEvEqRel :: HasDebugCallStack =&gt; CtEvidence -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEqRel"><span class="hs-identifier hs-var hs-var">ctEvEqRel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; EqRel
</span><a href="GHC.Core.Predicate.html#predTypeEqRel"><span class="hs-identifier hs-var">predTypeEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; EqRel) -&gt; (CtEvidence -&gt; Xi) -&gt; CtEvidence -&gt; EqRel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span>
</span><span id="line-2067"></span><span>
</span><span id="line-2068"></span><span class="hs-comment">-- | Get the rewrite-role relevant for a 'CtEvidence'</span><span>
</span><span id="line-2069"></span><span class="hs-comment">-- See Note [The rewrite-role of a constraint]</span><span>
</span><span id="line-2070"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteRole"><span class="hs-identifier hs-type">ctEvRewriteRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-2071"></span><span id="ctEvRewriteRole"><span class="annot"><span class="annottext">ctEvRewriteRole :: HasDebugCallStack =&gt; CtEvidence -&gt; Role
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteRole"><span class="hs-identifier hs-var hs-var">ctEvRewriteRole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqRel -&gt; Role
</span><a href="GHC.Core.Predicate.html#eqRelRole"><span class="hs-identifier hs-var">eqRelRole</span></a></span><span> </span><span class="annot"><span class="annottext">(EqRel -&gt; Role) -&gt; (CtEvidence -&gt; EqRel) -&gt; CtEvidence -&gt; Role
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteEqRel"><span class="hs-identifier hs-var">ctEvRewriteEqRel</span></a></span><span>
</span><span id="line-2072"></span><span>
</span><span id="line-2073"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteEqRel"><span class="hs-identifier hs-type">ctEvRewriteEqRel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span>
</span><span id="line-2074"></span><span class="hs-comment">-- ^ Return the rewrite-role of an abitrary CtEvidence</span><span>
</span><span id="line-2075"></span><span class="hs-comment">-- See Note [The rewrite-role of a constraint]</span><span>
</span><span id="line-2076"></span><span class="hs-comment">-- We return ReprEq for (a ~R# b) and NomEq for all other preds</span><span>
</span><span id="line-2077"></span><span id="ctEvRewriteEqRel"><span class="annot"><span class="annottext">ctEvRewriteEqRel :: CtEvidence -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteEqRel"><span class="hs-identifier hs-var hs-var">ctEvRewriteEqRel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Xi -&gt; EqRel
</span><a href="GHC.Core.Predicate.html#predTypeEqRel"><span class="hs-identifier hs-var">predTypeEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">(Xi -&gt; EqRel) -&gt; (CtEvidence -&gt; Xi) -&gt; CtEvidence -&gt; EqRel
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span>
</span><span id="line-2078"></span><span>
</span><span id="line-2079"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvTerm"><span class="hs-identifier hs-type">ctEvTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-2080"></span><span id="ctEvTerm"><span class="annot"><span class="annottext">ctEvTerm :: CtEvidence -&gt; EvTerm
</span><a href="GHC.Tc.Types.Constraint.html#ctEvTerm"><span class="hs-identifier hs-var hs-var">ctEvTerm</span></a></span></span><span> </span><span id="local-6989586621682723646"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723646"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; CtEvidence -&gt; EvExpr
CtEvidence -&gt; EvExpr
</span><a href="GHC.Tc.Types.Constraint.html#ctEvExpr"><span class="hs-identifier hs-var">ctEvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723646"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2081"></span><span>
</span><span id="line-2082"></span><span class="hs-comment">-- | Extract the set of rewriters from a 'CtEvidence'</span><span>
</span><span id="line-2083"></span><span class="hs-comment">-- See Note [Wanteds rewrite Wanteds]</span><span>
</span><span id="line-2084"></span><span class="hs-comment">-- If the provided CtEvidence is not for a Wanted, just</span><span>
</span><span id="line-2085"></span><span class="hs-comment">-- return an empty set.</span><span>
</span><span id="line-2086"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier hs-type">ctEvRewriters</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2087"></span><span id="ctEvRewriters"><span class="annot"><span class="annottext">ctEvRewriters :: CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier hs-var hs-var">ctEvRewriters</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_rewriters :: CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctev_rewriters"><span class="hs-identifier hs-var">ctev_rewriters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723648"><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723648"><span class="hs-identifier hs-var">rewriters</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723648"><span class="hs-identifier hs-var">rewriters</span></a></span><span>
</span><span id="line-2088"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier hs-var">ctEvRewriters</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-var">emptyRewriterSet</span></a></span><span>
</span><span id="line-2089"></span><span>
</span><span id="line-2090"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvExpr"><span class="hs-identifier hs-type">ctEvExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span>
</span><span id="line-2091"></span><span id="ctEvExpr"><span class="annot"><span class="annottext">ctEvExpr :: HasDebugCallStack =&gt; CtEvidence -&gt; EvExpr
</span><a href="GHC.Tc.Types.Constraint.html#ctEvExpr"><span class="hs-identifier hs-var hs-var">ctEvExpr</span></a></span></span><span> </span><span id="local-6989586621682723651"><span class="annot"><span class="annottext">ev :: CtEvidence
</span><a href="#local-6989586621682723651"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2092"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; EvExpr
forall b. Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">(Coercion -&gt; EvExpr) -&gt; Coercion -&gt; EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; CtEvidence -&gt; Coercion
CtEvidence -&gt; Coercion
</span><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier hs-var">ctEvCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723651"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2093"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvExpr"><span class="hs-identifier hs-var">ctEvExpr</span></a></span><span> </span><span id="local-6989586621682723653"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723653"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-var">evId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var">ctEvEvId</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723653"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2094"></span><span>
</span><span id="line-2095"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier hs-type">ctEvCoercion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcCoercion"><span class="hs-identifier hs-type">TcCoercion</span></a></span><span>
</span><span id="line-2096"></span><span id="ctEvCoercion"><span class="annot"><span class="annottext">ctEvCoercion :: HasDebugCallStack =&gt; CtEvidence -&gt; Coercion
</span><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier hs-var hs-var">ctEvCoercion</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723659"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723659"><span class="hs-identifier hs-var">ev_id</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2097"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723659"><span class="hs-identifier hs-var">ev_id</span></a></span><span>
</span><span id="line-2098"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier hs-var">ctEvCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723661"><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723661"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2099"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723662"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723662"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723661"><span class="hs-identifier hs-var">dest</span></a></span><span>
</span><span id="line-2100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- ctEvCoercion is only called on type equalities</span><span>
</span><span id="line-2101"></span><span>    </span><span class="hs-comment">-- and they always have HoleDests</span><span>
</span><span id="line-2102"></span><span>    </span><span class="annot"><span class="annottext">CoercionHole -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkHoleCo"><span class="hs-identifier hs-var">mkHoleCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723662"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-2103"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvCoercion"><span class="hs-identifier hs-var">ctEvCoercion</span></a></span><span> </span><span id="local-6989586621682723664"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723664"><span class="hs-identifier hs-var">ev</span></a></span></span><span>
</span><span id="line-2104"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Coercion
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ctEvCoercion&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723664"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2105"></span><span>
</span><span id="line-2106"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-type">ctEvEvId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-2107"></span><span id="ctEvEvId"><span class="annot"><span class="annottext">ctEvEvId :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var hs-var">ctEvEvId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-type">EvVarDest</span></a></span><span> </span><span id="local-6989586621682723666"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723666"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723666"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2108"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var">ctEvEvId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723667"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723667"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; EvVar
</span><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-var">coHoleCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723667"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-2109"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvEvId"><span class="hs-identifier hs-var">ctEvEvId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723669"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723669"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723669"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2110"></span><span>
</span><span id="line-2111"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvUnique"><span class="hs-identifier hs-type">ctEvUnique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>
</span><span id="line-2112"></span><span id="ctEvUnique"><span class="annot"><span class="annottext">ctEvUnique :: CtEvidence -&gt; Unique
</span><a href="GHC.Tc.Types.Constraint.html#ctEvUnique"><span class="hs-identifier hs-var hs-var">ctEvUnique</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723670"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723670"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Unique
</span><a href="GHC.Types.Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723670"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2113"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvUnique"><span class="hs-identifier hs-var">ctEvUnique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723672"><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723672"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvDest -&gt; Unique
</span><a href="GHC.Tc.Types.Constraint.html#tcEvDestUnique"><span class="hs-identifier hs-var">tcEvDestUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723672"><span class="hs-identifier hs-var">dest</span></a></span><span>
</span><span id="line-2114"></span><span>
</span><span id="line-2115"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tcEvDestUnique"><span class="hs-identifier hs-type">tcEvDestUnique</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TcEvDest"><span class="hs-identifier hs-type">TcEvDest</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>
</span><span id="line-2116"></span><span id="tcEvDestUnique"><span class="annot"><span class="annottext">tcEvDestUnique :: TcEvDest -&gt; Unique
</span><a href="GHC.Tc.Types.Constraint.html#tcEvDestUnique"><span class="hs-identifier hs-var hs-var">tcEvDestUnique</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-type">EvVarDest</span></a></span><span> </span><span id="local-6989586621682723673"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723673"><span class="hs-identifier hs-var">ev_var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Unique
</span><a href="GHC.Types.Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723673"><span class="hs-identifier hs-var">ev_var</span></a></span><span>
</span><span id="line-2117"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#tcEvDestUnique"><span class="hs-identifier hs-var">tcEvDestUnique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723674"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723674"><span class="hs-identifier hs-var">co_hole</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; Unique
</span><a href="GHC.Types.Var.html#varUnique"><span class="hs-identifier hs-var">varUnique</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; EvVar
</span><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-var">coHoleCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723674"><span class="hs-identifier hs-var">co_hole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2118"></span><span>
</span><span id="line-2119"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#setCtEvLoc"><span class="hs-identifier hs-type">setCtEvLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.CtLoc.html#CtLoc"><span class="hs-identifier hs-type">CtLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-2120"></span><span id="setCtEvLoc"><span class="annot"><span class="annottext">setCtEvLoc :: CtEvidence -&gt; CtLoc -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#setCtEvLoc"><span class="hs-identifier hs-var hs-var">setCtEvLoc</span></a></span></span><span> </span><span id="local-6989586621682723675"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723675"><span class="hs-identifier hs-var">ctev</span></a></span></span><span> </span><span id="local-6989586621682723676"><span class="annot"><span class="annottext">CtLoc
</span><a href="#local-6989586621682723676"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723675"><span class="hs-identifier hs-var">ctev</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_loc"><span class="hs-identifier hs-var">ctev_loc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723676"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2121"></span><span>
</span><span id="line-2122"></span><span class="hs-comment">-- | Set the type of CtEvidence.</span><span>
</span><span id="line-2123"></span><span class="hs-comment">--</span><span>
</span><span id="line-2124"></span><span class="hs-comment">-- This function ensures that the invariants on 'CtEvidence' hold, by updating</span><span>
</span><span id="line-2125"></span><span class="hs-comment">-- the evidence and the ctev_pred in sync with each other.</span><span>
</span><span id="line-2126"></span><span class="hs-comment">-- See Note [CtEvidence invariants].</span><span>
</span><span id="line-2127"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#setCtEvPredType"><span class="hs-identifier hs-type">setCtEvPredType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-2128"></span><span id="setCtEvPredType"><span class="annot"><span class="annottext">setCtEvPredType :: HasDebugCallStack =&gt; CtEvidence -&gt; Xi -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#setCtEvPredType"><span class="hs-identifier hs-var hs-var">setCtEvPredType</span></a></span></span><span> </span><span id="local-6989586621682723678"><span class="annot"><span class="annottext">old_ctev :: CtEvidence
</span><a href="#local-6989586621682723678"><span class="hs-identifier hs-var">old_ctev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723679"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723679"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682723680"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723680"><span class="hs-identifier hs-var">new_pred</span></a></span></span><span>
</span><span id="line-2129"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723678"><span class="hs-identifier hs-var">old_ctev</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723680"><span class="hs-identifier hs-type">new_pred</span></a></span><span>
</span><span id="line-2130"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#setVarType"><span class="hs-identifier hs-type">setVarType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723679"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682723680"><span class="hs-identifier hs-type">new_pred</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2131"></span><span>
</span><span id="line-2132"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#setCtEvPredType"><span class="hs-identifier hs-var">setCtEvPredType</span></a></span><span> </span><span id="local-6989586621682723682"><span class="annot"><span class="annottext">old_ctev :: CtEvidence
</span><a href="#local-6989586621682723682"><span class="hs-identifier hs-var">old_ctev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723683"><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723683"><span class="hs-identifier hs-var">dest</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682723684"><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723684"><span class="hs-identifier hs-var">new_pred</span></a></span></span><span>
</span><span id="line-2133"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723682"><span class="hs-identifier hs-var">old_ctev</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_pred"><span class="hs-identifier hs-var">ctev_pred</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723684"><span class="hs-identifier hs-type">new_pred</span></a></span><span>
</span><span id="line-2134"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682723685"><span class="hs-identifier hs-type">new_dest</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2135"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2136"></span><span>    </span><span id="local-6989586621682723685"><span class="annot"><span class="annottext">new_dest :: TcEvDest
</span><a href="#local-6989586621682723685"><span class="hs-identifier hs-var hs-var">new_dest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723683"><span class="hs-identifier hs-var">dest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2137"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-type">EvVarDest</span></a></span><span> </span><span id="local-6989586621682723686"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723686"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-var">EvVarDest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvVar -&gt; Xi -&gt; EvVar
</span><a href="GHC.Types.Var.html#setVarType"><span class="hs-identifier hs-var">setVarType</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723686"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723684"><span class="hs-identifier hs-var">new_pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2138"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723687"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723687"><span class="hs-identifier hs-var">h</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-var">HoleDest</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; Xi -&gt; CoercionHole
</span><a href="GHC.Core.Coercion.html#setCoHoleType"><span class="hs-identifier hs-var">setCoHoleType</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723687"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Xi
</span><a href="#local-6989586621682723684"><span class="hs-identifier hs-var">new_pred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2139"></span><span>
</span><span id="line-2140"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#TcEvDest"><span class="hs-identifier hs-type">TcEvDest</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2141"></span><span>  </span><span id="local-6989586621682723696"><span class="annot"><span class="annottext">ppr :: TcEvDest -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723697"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723697"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hole&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723697"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-2142"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EvVarDest"><span class="hs-identifier hs-type">EvVarDest</span></a></span><span> </span><span id="local-6989586621682723698"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723698"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723698"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2143"></span><span>
</span><span id="line-2144"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2145"></span><span>  </span><span id="local-6989586621682723718"><span class="annot"><span class="annottext">ppr :: CtEvidence -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682723719"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtFlavour -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2146"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682723720"><span class="hs-identifier hs-var">pp_ev</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SubGoalDepth -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtLoc -&gt; SubGoalDepth
</span><a href="GHC.Tc.Types.CtLoc.html#ctl_depth"><span class="hs-identifier hs-var">ctl_depth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtLoc
</span><a href="GHC.Tc.Types.Constraint.html#ctEvLoc"><span class="hs-identifier hs-var">ctEvLoc</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682723722"><span class="hs-identifier hs-var">pp_rewriters</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2147"></span><span>                         </span><span class="hs-comment">-- Show the sub-goal depth too</span><span>
</span><span id="line-2148"></span><span>               </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Xi -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; Xi
</span><a href="GHC.Tc.Types.Constraint.html#ctEvPred"><span class="hs-identifier hs-var">ctEvPred</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2149"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-2150"></span><span>      </span><span id="local-6989586621682723720"><span class="annot"><span class="annottext">pp_ev :: SDoc
</span><a href="#local-6989586621682723720"><span class="hs-identifier hs-var hs-var">pp_ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2151"></span><span>             </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_evar :: CtEvidence -&gt; EvVar
</span><a href="GHC.Tc.Types.Constraint.html#ctev_evar"><span class="hs-identifier hs-var">ctev_evar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723723"><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723723"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EvVar
</span><a href="#local-6989586621682723723"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-2152"></span><span>             </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723724"><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723724"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcEvDest -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvDest
</span><a href="#local-6989586621682723724"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-2153"></span><span>
</span><span id="line-2154"></span><span>      </span><span id="local-6989586621682723725"><span class="annot"><span class="annottext">rewriters :: RewriterSet
</span><a href="#local-6989586621682723725"><span class="hs-identifier hs-var hs-var">rewriters</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriters"><span class="hs-identifier hs-var">ctEvRewriters</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723719"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-2155"></span><span>      </span><span id="local-6989586621682723722"><span class="annot"><span class="annottext">pp_rewriters :: SDoc
</span><a href="#local-6989586621682723722"><span class="hs-identifier hs-var hs-var">pp_rewriters</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyRewriterSet"><span class="hs-identifier hs-var">isEmptyRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723725"><span class="hs-identifier hs-var">rewriters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2156"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#semi"><span class="hs-identifier hs-var">semi</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723725"><span class="hs-identifier hs-var">rewriters</span></a></span><span>
</span><span id="line-2157"></span><span>
</span><span id="line-2158"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isWanted"><span class="hs-identifier hs-type">isWanted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2159"></span><span id="isWanted"><span class="annot"><span class="annottext">isWanted :: CtEvidence -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isWanted"><span class="hs-identifier hs-var hs-var">isWanted</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2160"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isWanted"><span class="hs-identifier hs-var">isWanted</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2161"></span><span>
</span><span id="line-2162"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isGiven"><span class="hs-identifier hs-type">isGiven</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2163"></span><span id="isGiven"><span class="annot"><span class="annottext">isGiven :: CtEvidence -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isGiven"><span class="hs-identifier hs-var hs-var">isGiven</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2164"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isGiven"><span class="hs-identifier hs-var">isGiven</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2165"></span><span>
</span><span id="line-2166"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
           RewriterSet
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2173"></span><span>
</span><span id="line-2174"></span><span class="hs-comment">-- | Stores a set of CoercionHoles that have been used to rewrite a constraint.</span><span>
</span><span id="line-2175"></span><span class="hs-comment">-- See Note [Wanteds rewrite Wanteds].</span><span>
</span><span id="line-2176"></span><span class="hs-keyword">newtype</span><span> </span><span id="RewriterSet"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-var">RewriterSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RewriterSet"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-var">RewriterSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.Set.html#UniqSet"><span class="hs-identifier hs-type">UniqSet</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2177"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682723729"><span class="annot"><span class="annottext">RewriterSet -&gt; SDoc
(RewriterSet -&gt; SDoc) -&gt; Outputable RewriterSet
forall a. (a -&gt; SDoc) -&gt; Outputable a
$cppr :: RewriterSet -&gt; SDoc
ppr :: RewriterSet -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-var hs-var hs-var hs-var">Outputable</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682723734"><span id="local-6989586621682723739"><span id="local-6989586621682723743"><span class="annot"><span class="annottext">NonEmpty RewriterSet -&gt; RewriterSet
RewriterSet -&gt; RewriterSet -&gt; RewriterSet
(RewriterSet -&gt; RewriterSet -&gt; RewriterSet)
-&gt; (NonEmpty RewriterSet -&gt; RewriterSet)
-&gt; (forall b. Integral b =&gt; b -&gt; RewriterSet -&gt; RewriterSet)
-&gt; Semigroup RewriterSet
forall b. Integral b =&gt; b -&gt; RewriterSet -&gt; RewriterSet
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: RewriterSet -&gt; RewriterSet -&gt; RewriterSet
&lt;&gt; :: RewriterSet -&gt; RewriterSet -&gt; RewriterSet
$csconcat :: NonEmpty RewriterSet -&gt; RewriterSet
sconcat :: NonEmpty RewriterSet -&gt; RewriterSet
$cstimes :: forall b. Integral b =&gt; b -&gt; RewriterSet -&gt; RewriterSet
stimes :: forall b. Integral b =&gt; b -&gt; RewriterSet -&gt; RewriterSet
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682723754"><span id="local-6989586621682723759"><span id="local-6989586621682723763"><span class="annot"><span class="annottext">Semigroup RewriterSet
RewriterSet
Semigroup RewriterSet =&gt;
RewriterSet
-&gt; (RewriterSet -&gt; RewriterSet -&gt; RewriterSet)
-&gt; ([RewriterSet] -&gt; RewriterSet)
-&gt; Monoid RewriterSet
[RewriterSet] -&gt; RewriterSet
RewriterSet -&gt; RewriterSet -&gt; RewriterSet
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
$cmempty :: RewriterSet
mempty :: RewriterSet
$cmappend :: RewriterSet -&gt; RewriterSet -&gt; RewriterSet
mappend :: RewriterSet -&gt; RewriterSet -&gt; RewriterSet
$cmconcat :: [RewriterSet] -&gt; RewriterSet
mconcat :: [RewriterSet] -&gt; RewriterSet
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-2178"></span><span>
</span><span id="line-2179"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-type">emptyRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2180"></span><span id="emptyRewriterSet"><span class="annot"><span class="annottext">emptyRewriterSet :: RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-var hs-var">emptyRewriterSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UniqSet CoercionHole -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-var">RewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet CoercionHole
forall a. UniqSet a
</span><a href="GHC.Types.Unique.Set.html#emptyUniqSet"><span class="hs-identifier hs-var">emptyUniqSet</span></a></span><span>
</span><span id="line-2181"></span><span>
</span><span id="line-2182"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unitRewriterSet"><span class="hs-identifier hs-type">unitRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2183"></span><span id="unitRewriterSet"><span class="annot"><span class="annottext">unitRewriterSet :: CoercionHole -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#unitRewriterSet"><span class="hs-identifier hs-var hs-var">unitRewriterSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoercionHole -&gt; UniqSet CoercionHole)
-&gt; CoercionHole -&gt; RewriterSet
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unitUniqSet"><span class="hs-identifier hs-var">unitUniqSet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2184"></span><span>
</span><span id="line-2185"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#unionRewriterSet"><span class="hs-identifier hs-type">unionRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2186"></span><span id="unionRewriterSet"><span class="annot"><span class="annottext">unionRewriterSet :: RewriterSet -&gt; RewriterSet -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#unionRewriterSet"><span class="hs-identifier hs-var hs-var">unionRewriterSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UniqSet CoercionHole
 -&gt; UniqSet CoercionHole -&gt; UniqSet CoercionHole)
-&gt; RewriterSet -&gt; RewriterSet -&gt; RewriterSet
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. UniqSet a -&gt; UniqSet a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#unionUniqSets"><span class="hs-identifier hs-var">unionUniqSets</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2187"></span><span>
</span><span id="line-2188"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#isEmptyRewriterSet"><span class="hs-identifier hs-type">isEmptyRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2189"></span><span id="isEmptyRewriterSet"><span class="annot"><span class="annottext">isEmptyRewriterSet :: RewriterSet -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isEmptyRewriterSet"><span class="hs-identifier hs-var hs-var">isEmptyRewriterSet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UniqSet CoercionHole -&gt; Bool) -&gt; RewriterSet -&gt; Bool
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#isEmptyUniqSet"><span class="hs-identifier hs-var">isEmptyUniqSet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2190"></span><span>
</span><span id="line-2191"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#addRewriter"><span class="hs-identifier hs-type">addRewriter</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2192"></span><span id="addRewriter"><span class="annot"><span class="annottext">addRewriter :: RewriterSet -&gt; CoercionHole -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#addRewriter"><span class="hs-identifier hs-var hs-var">addRewriter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(UniqSet CoercionHole -&gt; CoercionHole -&gt; UniqSet CoercionHole)
-&gt; RewriterSet -&gt; CoercionHole -&gt; RewriterSet
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Uniquable a =&gt; UniqSet a -&gt; a -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#addOneToUniqSet"><span class="hs-identifier hs-var">addOneToUniqSet</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2193"></span><span>
</span><span id="line-2194"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#rewriterSetFromCts"><span class="hs-identifier hs-type">rewriterSetFromCts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-2195"></span><span class="hs-comment">-- Take a bag of Wanted equalities, and collect them as a RewriterSet</span><span>
</span><span id="line-2196"></span><span id="rewriterSetFromCts"><span class="annot"><span class="annottext">rewriterSetFromCts :: Cts -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#rewriterSetFromCts"><span class="hs-identifier hs-var hs-var">rewriterSetFromCts</span></a></span></span><span> </span><span id="local-6989586621682723772"><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723772"><span class="hs-identifier hs-var">cts</span></a></span></span><span>
</span><span id="line-2197"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Ct -&gt; RewriterSet -&gt; RewriterSet)
-&gt; RewriterSet -&gt; Cts -&gt; RewriterSet
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Ct -&gt; RewriterSet -&gt; RewriterSet
</span><a href="#local-6989586621682723773"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-var">emptyRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">Cts
</span><a href="#local-6989586621682723772"><span class="hs-identifier hs-var">cts</span></a></span><span>
</span><span id="line-2198"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2199"></span><span>    </span><span id="local-6989586621682723773"><span class="annot"><span class="annottext">add :: Ct -&gt; RewriterSet -&gt; RewriterSet
</span><a href="#local-6989586621682723773"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span id="local-6989586621682723774"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723774"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span id="local-6989586621682723775"><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723775"><span class="hs-identifier hs-var">rw_set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723774"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2200"></span><span>         </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_dest :: CtEvidence -&gt; TcEvDest
</span><a href="GHC.Tc.Types.Constraint.html#ctev_dest"><span class="hs-identifier hs-var">ctev_dest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#HoleDest"><span class="hs-identifier hs-type">HoleDest</span></a></span><span> </span><span id="local-6989586621682723776"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723776"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723775"><span class="hs-identifier hs-var">rw_set</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; CoercionHole -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#addRewriter"><span class="hs-operator hs-var">`addRewriter`</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621682723776"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-2201"></span><span>         </span><span class="annot"><span class="annottext">CtEvidence
</span><span class="hs-identifier">_</span></span><span>                                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621682723775"><span class="hs-identifier hs-var">rw_set</span></a></span><span>
</span><span id="line-2202"></span><span>
</span><span id="line-2203"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
           CtFlavour
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2210"></span><span>
</span><span id="line-2211"></span><span class="hs-keyword">data</span><span> </span><span id="CtFlavour"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier hs-var">CtFlavour</span></a></span></span><span>
</span><span id="line-2212"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Given"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Given"><span class="hs-identifier hs-var">Given</span></a></span></span><span>     </span><span class="hs-comment">-- we have evidence</span><span>
</span><span id="line-2213"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Wanted"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span></span><span>    </span><span class="hs-comment">-- we want evidence</span><span>
</span><span id="line-2214"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682723779"><span id="local-6989586621682723783"><span class="annot"><span class="annottext">CtFlavour -&gt; CtFlavour -&gt; Bool
(CtFlavour -&gt; CtFlavour -&gt; Bool)
-&gt; (CtFlavour -&gt; CtFlavour -&gt; Bool) -&gt; Eq CtFlavour
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CtFlavour -&gt; CtFlavour -&gt; Bool
== :: CtFlavour -&gt; CtFlavour -&gt; Bool
$c/= :: CtFlavour -&gt; CtFlavour -&gt; Bool
/= :: CtFlavour -&gt; CtFlavour -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-2215"></span><span>
</span><span id="line-2216"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier hs-type">CtFlavour</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2217"></span><span>  </span><span id="local-6989586621682723789"><span class="annot"><span class="annottext">ppr :: CtFlavour -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Given"><span class="hs-identifier hs-var">Given</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[G]&quot;</span></span><span>
</span><span id="line-2218"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[W]&quot;</span></span><span>
</span><span id="line-2219"></span><span>
</span><span id="line-2220"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-type">ctEvFlavour</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier hs-type">CtFlavour</span></a></span><span>
</span><span id="line-2221"></span><span id="ctEvFlavour"><span class="annot"><span class="annottext">ctEvFlavour :: CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var hs-var">ctEvFlavour</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span>
</span><span id="line-2222"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Given"><span class="hs-identifier hs-var">Given</span></a></span><span>
</span><span id="line-2223"></span><span>
</span><span id="line-2224"></span><span class="hs-comment">-- | Whether or not one 'Ct' can rewrite another is determined by its</span><span>
</span><span id="line-2225"></span><span class="hs-comment">-- flavour and its equality relation. See also</span><span>
</span><span id="line-2226"></span><span class="hs-comment">-- Note [Flavours with roles] in GHC.Tc.Solver.InertSet</span><span>
</span><span id="line-2227"></span><span class="hs-keyword">type</span><span> </span><span id="CtFlavourRole"><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-var">CtFlavourRole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavour"><span class="hs-identifier hs-type">CtFlavour</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2228"></span><span>
</span><span id="line-2229"></span><span class="annot"><span class="hs-comment">-- | Extract the flavour, role, and boxity from a 'CtEvidence'</span></span><span>
</span><span id="line-2230"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctEvFlavourRole"><span class="hs-identifier hs-type">ctEvFlavourRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span>
</span><span id="line-2231"></span><span id="ctEvFlavourRole"><span class="annot"><span class="annottext">ctEvFlavourRole :: HasDebugCallStack =&gt; CtEvidence -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavourRole"><span class="hs-identifier hs-var hs-var">ctEvFlavourRole</span></a></span></span><span> </span><span id="local-6989586621682723791"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723791"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723791"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#ctEvRewriteEqRel"><span class="hs-identifier hs-var">ctEvRewriteEqRel</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723791"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2232"></span><span>
</span><span id="line-2233"></span><span class="annot"><span class="hs-comment">-- | Extract the flavour and role from a 'Ct'</span></span><span>
</span><span id="line-2234"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCtFlavourRole"><span class="hs-identifier hs-type">eqCtFlavourRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span>
</span><span id="line-2235"></span><span id="eqCtFlavourRole"><span class="annot"><span class="annottext">eqCtFlavourRole :: EqCt -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#eqCtFlavourRole"><span class="hs-identifier hs-var hs-var">eqCtFlavourRole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eq_ev :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723792"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723792"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eq_eq_rel :: EqCt -&gt; EqRel
</span><a href="GHC.Tc.Types.Constraint.html#eq_eq_rel"><span class="hs-identifier hs-var">eq_eq_rel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723793"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723793"><span class="hs-identifier hs-var">eq_rel</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2236"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723792"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723793"><span class="hs-identifier hs-var">eq_rel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2237"></span><span>
</span><span id="line-2238"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#dictCtFlavourRole"><span class="hs-identifier hs-type">dictCtFlavourRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span>
</span><span id="line-2239"></span><span id="dictCtFlavourRole"><span class="annot"><span class="annottext">dictCtFlavourRole :: DictCt -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#dictCtFlavourRole"><span class="hs-identifier hs-var hs-var">dictCtFlavourRole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_ev :: DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682723795"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723795"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2240"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtEvidence -&gt; CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavour"><span class="hs-identifier hs-var">ctEvFlavour</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621682723795"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2241"></span><span>
</span><span id="line-2242"></span><span class="annot"><span class="hs-comment">-- | Extract the flavour and role from a 'Ct'</span></span><span>
</span><span id="line-2243"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavourRole"><span class="hs-identifier hs-type">ctFlavourRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span>
</span><span id="line-2244"></span><span class="hs-comment">-- Uses short-cuts for the Role field, for special cases</span><span>
</span><span id="line-2245"></span><span id="ctFlavourRole"><span class="annot"><span class="annottext">ctFlavourRole :: HasDebugCallStack =&gt; Ct -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#ctFlavourRole"><span class="hs-identifier hs-var hs-var">ctFlavourRole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span id="local-6989586621682723798"><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723798"><span class="hs-identifier hs-var">di_ct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DictCt -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#dictCtFlavourRole"><span class="hs-identifier hs-var">dictCtFlavourRole</span></a></span><span> </span><span class="annot"><span class="annottext">DictCt
</span><a href="#local-6989586621682723798"><span class="hs-identifier hs-var">di_ct</span></a></span><span>
</span><span id="line-2246"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavourRole"><span class="hs-identifier hs-var">ctFlavourRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span id="local-6989586621682723799"><span class="annot"><span class="annottext">EqCt
</span><a href="#local-6989586621682723799"><span class="hs-identifier hs-var">eq_ct</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqCt -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#eqCtFlavourRole"><span class="hs-identifier hs-var">eqCtFlavourRole</span></a></span><span> </span><span class="annot"><span class="annottext">EqCt
</span><a href="#local-6989586621682723799"><span class="hs-identifier hs-var">eq_ct</span></a></span><span>
</span><span id="line-2247"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctFlavourRole"><span class="hs-identifier hs-var">ctFlavourRole</span></a></span><span> </span><span id="local-6989586621682723800"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723800"><span class="hs-identifier hs-var">ct</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; CtEvidence -&gt; CtFlavourRole
CtEvidence -&gt; CtFlavourRole
</span><a href="GHC.Tc.Types.Constraint.html#ctEvFlavourRole"><span class="hs-identifier hs-var">ctEvFlavourRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ct -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ctEvidence"><span class="hs-identifier hs-var">ctEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621682723800"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2248"></span><span>
</span><span id="line-2249"></span><span class="hs-comment">{- Note [eqCanRewrite]
~~~~~~~~~~~~~~~~~~~~~~
(eqCanRewrite ct1 ct2) holds if the constraint ct1 (a CEqCan of form
lhs ~ ty) can be used to rewrite ct2.  It must satisfy the properties of
a can-rewrite relation, see Definition [Can-rewrite relation] in
GHC.Tc.Solver.Monad.

With the solver handling Coercible constraints like equality constraints,
the rewrite conditions must take role into account, never allowing
a representational equality to rewrite a nominal one.

Note [Wanteds rewrite Wanteds]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Should one Wanted constraint be allowed to rewrite another?

This example (along with #8450) suggests not:
   f :: a -&gt; Bool
   f x = ( [x,'c'], [x,True] ) `seq` True
Here we get
  [W] a ~ Char
  [W] a ~ Bool
but we do not want to complain about Bool ~ Char!

This example suggests yes (indexed-types/should_fail/T4093a):
  type family Foo a
  f :: (Foo e ~ Maybe e) =&gt; Foo e
In the ambiguity check, we get
  [G] g1 :: Foo e ~ Maybe e
  [W] w1 :: Foo alpha ~ Foo e
  [W] w2 :: Foo alpha ~ Maybe alpha
w1 gets rewritten by the Given to become
  [W] w3 :: Foo alpha ~ Maybe e
Now, the only way to make progress is to allow Wanteds to rewrite Wanteds.
Rewriting w3 with w2 gives us
  [W] w4 :: Maybe alpha ~ Maybe e
which will soon get us to alpha := e and thence to victory.

TL;DR we want equality saturation.

We thus want Wanteds to rewrite Wanteds in order to accept more programs,
but we don't want Wanteds to rewrite Wanteds because doing so can create
inscrutable error messages. To solve this dilemma:

* We allow Wanteds to rewrite Wanteds, but...

* Each Wanted tracks the set of Wanteds it has been rewritten by, in its
  RewriterSet, stored in the ctev_rewriters field of the CtWanted
  constructor of CtEvidence.  (Only Wanteds have RewriterSets.)

* In error reporting, we simply suppress any errors that have been rewritten
  by /unsolved/ wanteds. This suppression happens in GHC.Tc.Errors.mkErrorItem,
  which uses GHC.Tc.Zonk.Type.zonkRewriterSet to look through any filled
  coercion holes. The idea is that we wish to report the &quot;root cause&quot; -- the
  error that rewrote all the others.

* We prioritise Wanteds that have an empty RewriterSet:
  see Note [Prioritise Wanteds with empty RewriterSet].

Let's continue our first example above:

  inert: [W] w1 :: a ~ Char
  work:  [W] w2 :: a ~ Bool

Because Wanteds can rewrite Wanteds, w1 will rewrite w2, yielding

  inert: [W] w1 :: a ~ Char
         [W] w2 {w1}:: Char ~ Bool

The {w1} in the second line of output is the RewriterSet of w1.

A RewriterSet is just a set of unfilled CoercionHoles. This is sufficient
because only equalities (evidenced by coercion holes) are used for rewriting;
other (dictionary) constraints cannot ever rewrite. The rewriter (in
e.g. GHC.Tc.Solver.Rewrite.rewrite) tracks and returns a RewriterSet,
consisting of the evidence (a CoercionHole) for any Wanted equalities used in
rewriting.  Then GHC.Tc.Solver.Solve.rewriteEvidence and
GHC.Tc.Solver.Equality.rewriteEqEvidence add this RewriterSet to the rewritten
constraint's rewriter set.

Note [Prioritise Wanteds with empty RewriterSet]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When extending the WorkList, in GHC.Tc.Solver.InertSet.extendWorkListEq,
we priorities constraints that have no rewriters. Here's why.

Consider this, which came up in T22793:
  inert: {}
  work list: [W] co_ayf : awq ~ awo
  work item: [W] co_ayb : awq ~ awp

  ==&gt; {just put work item in inert set}
  inert: co_ayb : awq ~ awp
  work list: {}
  work: [W] co_ayf : awq ~ awo

  ==&gt; {rewrite ayf with co_ayb}
  work list: {}
  inert: co_ayb : awq ~ awp
         co_aym{co_ayb} : awp ~ awo
                ^ rewritten by ayb

  ----- start again in simplify_loop in Solver.hs -----
  inert: {}
  work list: [W] co_ayb : awq ~ awp
  work: co_aym{co_ayb} : awp ~ awo

  ==&gt; {add to inert set}
  inert: co_aym{co_ayb} : awp ~ awo
  work list: {}
  work: co_ayb : awq ~ awp

  ==&gt; {rewrite co_ayb}
  inert: co_aym{co_ayb} : awp ~ awo
         co_ayp{co_aym} : awq ~ awo
  work list: {}

Now both wanteds have been rewriten by the other! This happened because
in our simplify_loop iteration, we happened to start with co_aym. All would have
been well if we'd started with the (not-rewritten) co_ayb and gotten it into the
inert set.

With that in mind, we /prioritise/ the work-list to put constraints
with no rewriters first.  This prioritisation is done in
GHC.Tc.Solver.InertSet.extendWorkListEq, and extendWorkListEqs.

Wrinkles

(WRW1) Before checking for an empty RewriterSet, we zonk the RewriterSet,
  because some of those CoercionHoles may have been filled in since we last
  looked: see GHC.Tc.Solver.Monad.emitWork.

(WRW2) Despite the prioritisation, it is hard to be /certain/ that we can't end up
  in a situation where all of the Wanteds have rewritten each other. In
  order to report /some/ error in this case, we simply report all the
  Wanteds. The user will get a perhaps-confusing error message, but they've
  written a confusing program!  (T22707 and T22793 were close, but they do
  not exhibit this behaviour.)  So belt and braces: see the `suppress`
  stuff in GHC.Tc.Errors.mkErrorItem.

Note [Avoiding rewriting cycles]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Note [inert_eqs: the inert equalities] in GHC.Tc.Solver.InertSet describes
the can-rewrite relation among CtFlavour/Role pairs, saying which constraints
can rewrite which other constraints. It puts forth (R2):
  (R2) If f1 &gt;= f, and f2 &gt;= f,
       then either f1 &gt;= f2 or f2 &gt;= f1
The naive can-rewrite relation says that (Given, Representational) can rewrite
(Wanted, Representational) and that (Wanted, Nominal) can rewrite
(Wanted, Representational), but neither of (Given, Representational) and
(Wanted, Nominal) can rewrite the other. This would violate (R2). See also
Note [Why R2?] in GHC.Tc.Solver.InertSet.

To keep R2, we do not allow (Wanted, Nominal) to rewrite (Wanted, Representational).
This can, in theory, bite, in this scenario:

  type family F a
  data T a
  type role T nominal

  [G] F a ~N T a
  [W] F alpha ~N T alpha
  [W] F alpha ~R T a

As written, this makes no progress, and GHC errors. But, if we
allowed W/N to rewrite W/R, the first W could rewrite the second:

  [G] F a ~N T a
  [W] F alpha ~N T alpha
  [W] T alpha ~R T a

Now we decompose the second W to get

  [W] alpha ~N a

noting the role annotation on T. This causes (alpha := a), and then
everything else unlocks.

What to do? We could &quot;decompose&quot; nominal equalities into nominal-only
(&quot;NO&quot;) equalities and representational ones, where a NO equality rewrites
only nominals. That is, when considering whether [W] F alpha ~N T alpha
should rewrite [W] F alpha ~R T a, we could require splitting the first W
into [W] F alpha ~NO T alpha, [W] F alpha ~R T alpha. Then, we use the R
half of the split to rewrite the second W, and off we go. This splitting
would allow the split-off R equality to be rewritten by other equalities,
thus avoiding the problem in Note [Why R2?] in GHC.Tc.Solver.InertSet.

However, note that I said that this bites in theory. That's because no
known program actually gives rise to this scenario. A direct encoding
ends up starting with

  [G] F a ~ T a
  [W] F alpha ~ T alpha
  [W] Coercible (F alpha) (T a)

where ~ and Coercible denote lifted class constraints. The ~s quickly
reduce to ~N: good. But the Coercible constraint gets rewritten to

  [W] Coercible (T alpha) (T a)

by the first Wanted. This is because Coercible is a class, and arguments
in class constraints use *nominal* rewriting, not the representational
rewriting that is restricted due to (R2). Note that reordering the code
doesn't help, because equalities (including lifted ones) are prioritized
over Coercible. Thus, I (Richard E.) see no way to write a program that
is rejected because of this infelicity. I have not proved it impossible,
exactly, but my usual tricks have not yielded results.

In the olden days, when we had Derived constraints, this Note was all
about G/R and D/N both rewriting D/R. Back then, the code in
typecheck/should_compile/T19665 really did get rejected. But now,
according to the rewriting of the Coercible constraint, the program
is accepted.

-}</span><span>
</span><span id="line-2462"></span><span>
</span><span id="line-2463"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-type">eqCanRewrite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqRel"><span class="hs-identifier hs-type">EqRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2464"></span><span id="eqCanRewrite"><span class="annot"><span class="annottext">eqCanRewrite :: EqRel -&gt; EqRel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-var hs-var">eqCanRewrite</span></a></span></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span>  </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2465"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-var">eqCanRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2466"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-var">eqCanRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2467"></span><span>
</span><span id="line-2468"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier hs-type">eqCanRewriteFR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtFlavourRole"><span class="hs-identifier hs-type">CtFlavourRole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2469"></span><span class="hs-comment">-- Can fr1 actually rewrite fr2?</span><span>
</span><span id="line-2470"></span><span class="hs-comment">-- Very important function!</span><span>
</span><span id="line-2471"></span><span class="hs-comment">-- See Note [eqCanRewrite]</span><span>
</span><span id="line-2472"></span><span class="hs-comment">-- See Note [Wanteds rewrite Wanteds]</span><span>
</span><span id="line-2473"></span><span class="hs-comment">-- See Note [Avoiding rewriting cycles]</span><span>
</span><span id="line-2474"></span><span id="eqCanRewriteFR"><span class="annot"><span class="annottext">eqCanRewriteFR :: CtFlavourRole -&gt; CtFlavourRole -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier hs-var hs-var">eqCanRewriteFR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Given"><span class="hs-identifier hs-var">Given</span></a></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621682723801"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723801"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>      </span><span id="local-6989586621682723802"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723802"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqRel -&gt; EqRel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-var">eqCanRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723801"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723802"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-2475"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier hs-var">eqCanRewriteFR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2476"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier hs-var">eqCanRewriteFR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682723803"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723803"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682723804"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723804"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EqRel -&gt; EqRel -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#eqCanRewrite"><span class="hs-identifier hs-var">eqCanRewrite</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723803"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682723804"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-2477"></span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eqCanRewriteFR"><span class="hs-identifier hs-var">eqCanRewriteFR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Wanted"><span class="hs-identifier hs-var">Wanted</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtFlavour
</span><a href="GHC.Tc.Types.Constraint.html#Given"><span class="hs-identifier hs-var">Given</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2478"></span><span>
</span><span id="line-2479"></span></pre></body></html>