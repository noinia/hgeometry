<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns      #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.StgToJS.Literal.html"><span class="hs-identifier">GHC.StgToJS.Literal</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.StgToJS.Literal.html#genLit"><span class="hs-identifier">genLit</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.StgToJS.Literal.html#genStaticLit"><span class="hs-identifier">genStaticLit</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html"><span class="hs-identifier">GHC.JS.JStg.Syntax</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.Make.html"><span class="hs-identifier">GHC.JS.Make</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.JS.Ident.html"><span class="hs-identifier">GHC.JS.Ident</span></a></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Ids.html"><span class="hs-identifier">GHC.StgToJS.Ids</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Monad.html"><span class="hs-identifier">GHC.StgToJS.Monad</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Symbols.html"><span class="hs-identifier">GHC.StgToJS.Symbols</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html"><span class="hs-identifier">GHC.StgToJS.Types</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.RepType.html"><span class="hs-identifier">GHC.Types.RepType</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Float.html"><span class="hs-identifier">GHC.Float</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Bits.html"><span class="hs-identifier">Data.Bits</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bits</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Char.html"><span class="hs-identifier">Data.Char</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ord</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-comment">-- | Generate JS expressions for a Literal</span><span>
</span><span id="line-35"></span><span class="hs-comment">--</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- Literals represented with 2 values:</span><span>
</span><span id="line-37"></span><span class="hs-comment">--  * Addr# (Null and Strings): array and offset</span><span>
</span><span id="line-38"></span><span class="hs-comment">--  * 64-bit values: high 32-bit, low 32-bit</span><span>
</span><span id="line-39"></span><span class="hs-comment">--  * labels: call to h$mkFunctionPtr and 0, or function name and 0</span><span>
</span><span id="line-40"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#genLit"><span class="hs-identifier hs-type">genLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#G"><span class="hs-identifier hs-type">G</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-41"></span><span id="genLit"><span class="annot"><span class="annottext">genLit :: HasDebugCallStack =&gt; Literal -&gt; G [JStgExpr]
</span><a href="GHC.StgToJS.Literal.html#genLit"><span class="hs-identifier hs-var hs-var">genLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitChar"><span class="hs-identifier hs-type">LitChar</span></a></span><span> </span><span id="local-6989586621682694252"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682694252"><span class="hs-identifier hs-var">c</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Int -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682694252"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitString"><span class="hs-identifier hs-type">LitString</span></a></span><span> </span><span id="local-6989586621682694255"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682694255"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><span class="annottext">G Ident
</span><a href="GHC.StgToJS.Ids.html#freshIdent"><span class="hs-identifier hs-var">freshIdent</span></a></span><span> </span><span class="annot"><span class="annottext">G Ident -&gt; (Ident -&gt; G [JStgExpr]) -&gt; G [JStgExpr]
forall a b.
StateT GenState IO a
-&gt; (a -&gt; StateT GenState IO b) -&gt; StateT GenState IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682694257"><span class="annot"><span class="annottext">strLit :: Ident
</span><a href="#local-6989586621682694257"><span class="hs-identifier hs-var">strLit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ident -&gt; FastString
</span><a href="GHC.JS.Ident.html#identFS"><span class="hs-identifier hs-var">identFS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621682694259"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694259"><span class="hs-identifier hs-var">strLitT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-45"></span><span>      </span><span class="annot"><span class="annottext">G Ident
</span><a href="GHC.StgToJS.Ids.html#freshIdent"><span class="hs-identifier hs-var">freshIdent</span></a></span><span> </span><span class="annot"><span class="annottext">G Ident -&gt; (Ident -&gt; G [JStgExpr]) -&gt; G [JStgExpr]
forall a b.
StateT GenState IO a
-&gt; (a -&gt; StateT GenState IO b) -&gt; StateT GenState IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682694260"><span class="annot"><span class="annottext">strOff :: Ident
</span><a href="#local-6989586621682694260"><span class="hs-identifier hs-var">strOff</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ident -&gt; FastString
</span><a href="GHC.JS.Ident.html#identFS"><span class="hs-identifier hs-var">identFS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621682694261"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694261"><span class="hs-identifier hs-var">strOffT</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><span class="annottext">FastString -&gt; StaticVal -&gt; Maybe Ident -&gt; G ()
</span><a href="GHC.StgToJS.Monad.html#emitStatic"><span class="hs-identifier hs-var">emitStatic</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694259"><span class="hs-identifier hs-var">strLitT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StaticUnboxed -&gt; StaticVal
</span><a href="GHC.StgToJS.Types.html#StaticUnboxed"><span class="hs-identifier hs-var">StaticUnboxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; StaticUnboxed
</span><a href="GHC.StgToJS.Types.html#StaticUnboxedString"><span class="hs-identifier hs-var">StaticUnboxedString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682694255"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Ident
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><span class="annottext">FastString -&gt; StaticVal -&gt; Maybe Ident -&gt; G ()
</span><a href="GHC.StgToJS.Monad.html#emitStatic"><span class="hs-identifier hs-var">emitStatic</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694261"><span class="hs-identifier hs-var">strOffT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StaticUnboxed -&gt; StaticVal
</span><a href="GHC.StgToJS.Types.html#StaticUnboxed"><span class="hs-identifier hs-var">StaticUnboxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; StaticUnboxed
</span><a href="GHC.StgToJS.Types.html#StaticUnboxedStringOffset"><span class="hs-identifier hs-var">StaticUnboxedStringOffset</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682694255"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Ident
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Ident -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Ident
</span><a href="#local-6989586621682694257"><span class="hs-identifier hs-var">strLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ident -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Ident
</span><a href="#local-6989586621682694260"><span class="hs-identifier hs-var">strOff</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><span class="annottext">Literal
</span><a href="GHC.Types.Literal.html#LitNullAddr"><span class="hs-identifier hs-var">LitNullAddr</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="GHC.JS.Make.html#null_"><span class="hs-identifier hs-var">null_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitNumber"><span class="hs-identifier hs-type">LitNumber</span></a></span><span> </span><span id="local-6989586621682694272"><span class="annot"><span class="annottext">LitNumType
</span><a href="#local-6989586621682694272"><span class="hs-identifier hs-var">nt</span></a></span></span><span> </span><span id="local-6989586621682694273"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LitNumType
</span><a href="#local-6989586621682694272"><span class="hs-identifier hs-var">nt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt"><span class="hs-identifier hs-var">LitNumInt</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt8"><span class="hs-identifier hs-var">LitNumInt8</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt16"><span class="hs-identifier hs-var">LitNumInt16</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt32"><span class="hs-identifier hs-var">LitNumInt32</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt64"><span class="hs-identifier hs-var">LitNumInt64</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">Bits.shiftR</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord"><span class="hs-identifier hs-var">LitNumWord</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord8"><span class="hs-identifier hs-var">LitNumWord8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord16"><span class="hs-identifier hs-var">LitNumWord16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord32"><span class="hs-identifier hs-var">LitNumWord32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord64"><span class="hs-identifier hs-var">LitNumWord64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">Bits.shiftR</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var">toU32Expr</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694273"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumBigNat"><span class="hs-identifier hs-var">LitNumBigNat</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; G [JStgExpr]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genLit: unexpected BigNat that should have been removed in CorePrep&quot;</span></span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitFloat"><span class="hs-identifier hs-type">LitFloat</span></a></span><span> </span><span id="local-6989586621682694289"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694289"><span class="hs-identifier hs-var">r</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Double -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2f"><span class="hs-identifier hs-var">r2f</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694289"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitDouble"><span class="hs-identifier hs-type">LitDouble</span></a></span><span> </span><span id="local-6989586621682694292"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694292"><span class="hs-identifier hs-var">r</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Double -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2d"><span class="hs-identifier hs-var">r2d</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694292"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitLabel"><span class="hs-identifier hs-type">LitLabel</span></a></span><span> </span><span id="local-6989586621682694295"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694295"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682694296"><span class="annot"><span class="annottext">FunctionOrData
</span><a href="#local-6989586621682694296"><span class="hs-identifier hs-var">fod</span></a></span></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FunctionOrData
</span><a href="#local-6989586621682694296"><span class="hs-identifier hs-var">fod</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionOrData -&gt; FunctionOrData -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FunctionOrData
</span><a href="GHC.Types.Basic.html#IsFunction"><span class="hs-identifier hs-var">IsFunction</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; [JStgExpr] -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ApplExpr"><span class="hs-identifier hs-var">ApplExpr</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="GHC.StgToJS.Symbols.html#hdMkFunctionPtr"><span class="hs-identifier hs-var">hdMkFunctionPtr</span></a></span><span>
</span><span id="line-66"></span><span>                                                  </span><span class="hs-special">[</span><span class="annot"><span class="annottext">FastString -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#global"><span class="hs-identifier hs-var">global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; FastString -&gt; FastString
</span><a href="GHC.StgToJS.Symbols.html#mkRawSymbol"><span class="hs-identifier hs-var">mkRawSymbol</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694295"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-67"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>                                       </span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JStgExpr
forall a. ToJExpr a =&gt; a -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#toJExpr"><span class="hs-identifier hs-var">toJExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#global"><span class="hs-identifier hs-var">global</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; FastString -&gt; FastString
</span><a href="GHC.StgToJS.Symbols.html#mkRawSymbol"><span class="hs-identifier hs-var">mkRawSymbol</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694295"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>                                       </span><span class="hs-special">]</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitRubbish"><span class="hs-identifier hs-type">LitRubbish</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682694303"><span class="annot"><span class="annottext">RuntimeRepType
</span><a href="#local-6989586621682694303"><span class="hs-identifier hs-var">rr_ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">-- Generate appropriate rubbish literals, otherwise it might trip up the</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">-- code generator when a primop is applied to a rubbish literal (see #24664)</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682694304"><span class="annot"><span class="annottext">reps :: [PrimRep]
</span><a href="#local-6989586621682694304"><span class="hs-identifier hs-var hs-var">reps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; SDoc -&gt; RuntimeRepType -&gt; [PrimRep]
SDoc -&gt; RuntimeRepType -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#runtimeRepPrimRep"><span class="hs-identifier hs-var">runtimeRepPrimRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.StgToJS.Literal.genLit&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RuntimeRepType
</span><a href="#local-6989586621682694303"><span class="hs-identifier hs-var">rr_ty</span></a></span><span>
</span><span id="line-76"></span><span>        </span><span id="local-6989586621682694309"><span class="annot"><span class="annottext">rub :: PrimRep -&gt; [JStgExpr]
</span><a href="#local-6989586621682694309"><span class="hs-identifier hs-var hs-var">rub</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-77"></span><span>                  </span><span class="annot"><a href="GHC.Core.TyCon.html#BoxedRep"><span class="hs-identifier hs-type">BoxedRep</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Levity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="GHC.JS.Make.html#null_"><span class="hs-identifier hs-var">null_</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-78"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#AddrRep"><span class="hs-identifier hs-var">AddrRep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><a href="GHC.JS.Make.html#null_"><span class="hs-identifier hs-var">null_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-79"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#WordRep"><span class="hs-identifier hs-var">WordRep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-80"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word8Rep"><span class="hs-identifier hs-var">Word8Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-81"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word16Rep"><span class="hs-identifier hs-var">Word16Rep</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-82"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word32Rep"><span class="hs-identifier hs-var">Word32Rep</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-83"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word64Rep"><span class="hs-identifier hs-var">Word64Rep</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#IntRep"><span class="hs-identifier hs-var">IntRep</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-85"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int8Rep"><span class="hs-identifier hs-var">Int8Rep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-86"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int16Rep"><span class="hs-identifier hs-var">Int16Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-87"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int32Rep"><span class="hs-identifier hs-var">Int32Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-88"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int64Rep"><span class="hs-identifier hs-var">Int64Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-89"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#DoubleRep"><span class="hs-identifier hs-var">DoubleRep</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-90"></span><span>                  </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#FloatRep"><span class="hs-identifier hs-var">FloatRep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">JVal -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#ValExpr"><span class="hs-identifier hs-var">ValExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; JVal
</span><a href="GHC.JS.JStg.Syntax.html#JInt"><span class="hs-identifier hs-var">JInt</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-91"></span><span>                  </span><span class="annot"><a href="GHC.Core.TyCon.html#VecRep"><span class="hs-identifier hs-type">VecRep</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PrimElemRep
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; [JStgExpr]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.StgToJS.Literal.genLit: VecRep unsupported&quot;</span></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[JStgExpr] -&gt; G [JStgExpr]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PrimRep -&gt; [JStgExpr]) -&gt; [PrimRep] -&gt; [JStgExpr]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">PrimRep -&gt; [JStgExpr]
</span><a href="#local-6989586621682694309"><span class="hs-identifier hs-var">rub</span></a></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682694304"><span class="hs-identifier hs-var">reps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><span class="hs-comment">-- | generate a literal for the static init tables</span></span><span>
</span><span id="line-95"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#genStaticLit"><span class="hs-identifier hs-type">genStaticLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#G"><span class="hs-identifier hs-type">G</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.StgToJS.Types.html#StaticLit"><span class="hs-identifier hs-type">StaticLit</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-96"></span><span id="genStaticLit"><span class="annot"><span class="annottext">genStaticLit :: Literal -&gt; G [StaticLit]
</span><a href="GHC.StgToJS.Literal.html#genStaticLit"><span class="hs-identifier hs-var hs-var">genStaticLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitChar"><span class="hs-identifier hs-type">LitChar</span></a></span><span> </span><span id="local-6989586621682694326"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682694326"><span class="hs-identifier hs-var">c</span></a></span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Integer) -&gt; Int -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Int
</span><span class="hs-identifier hs-var">ord</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682694326"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitString"><span class="hs-identifier hs-type">LitString</span></a></span><span> </span><span id="local-6989586621682694328"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682694328"><span class="hs-identifier hs-var">str</span></a></span></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#StringLit"><span class="hs-identifier hs-var">StringLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; FastString
</span><a href="GHC.Data.FastString.html#mkFastStringByteString"><span class="hs-identifier hs-var">mkFastStringByteString</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621682694328"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-comment">-- \|  invalid UTF8         -&gt; return [ BinLit str, IntLit 0]</span><span>
</span><span id="line-101"></span><span>  </span><span class="annot"><span class="annottext">Literal
</span><a href="GHC.Types.Literal.html#LitNullAddr"><span class="hs-identifier hs-var">LitNullAddr</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">StaticLit
</span><a href="GHC.StgToJS.Types.html#NullLit"><span class="hs-identifier hs-var">NullLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitNumber"><span class="hs-identifier hs-type">LitNumber</span></a></span><span> </span><span id="local-6989586621682694332"><span class="annot"><span class="annottext">LitNumType
</span><a href="#local-6989586621682694332"><span class="hs-identifier hs-var">nt</span></a></span></span><span> </span><span id="local-6989586621682694333"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LitNumType
</span><a href="#local-6989586621682694332"><span class="hs-identifier hs-var">nt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt"><span class="hs-identifier hs-var">LitNumInt</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt8"><span class="hs-identifier hs-var">LitNumInt8</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt16"><span class="hs-identifier hs-var">LitNumInt16</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt32"><span class="hs-identifier hs-var">LitNumInt32</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumInt64"><span class="hs-identifier hs-var">LitNumInt64</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`Bits.shiftR`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord"><span class="hs-identifier hs-var">LitNumWord</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord8"><span class="hs-identifier hs-var">LitNumWord8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord16"><span class="hs-identifier hs-var">LitNumWord16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord32"><span class="hs-identifier hs-var">LitNumWord32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumWord64"><span class="hs-identifier hs-var">LitNumWord64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int -&gt; Integer
forall a. Bits a =&gt; a -&gt; Int -&gt; a
</span><span class="hs-operator hs-var">`Bits.shiftR`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var">toU32Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694333"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><span class="annottext">LitNumType
</span><a href="GHC.Types.Literal.html#LitNumBigNat"><span class="hs-identifier hs-var">LitNumBigNat</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; G [StaticLit]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genStaticLit: unexpected BigNat that should have been removed in CorePrep&quot;</span></span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitFloat"><span class="hs-identifier hs-type">LitFloat</span></a></span><span> </span><span id="local-6989586621682694335"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694335"><span class="hs-identifier hs-var">r</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SaneDouble -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#DoubleLit"><span class="hs-identifier hs-var">DoubleLit</span></a></span><span> </span><span class="annot"><span class="annottext">(SaneDouble -&gt; StaticLit)
-&gt; (Rational -&gt; SaneDouble) -&gt; Rational -&gt; StaticLit
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; SaneDouble
</span><a href="GHC.Types.SaneDouble.html#SaneDouble"><span class="hs-identifier hs-var">SaneDouble</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; SaneDouble)
-&gt; (Rational -&gt; Double) -&gt; Rational -&gt; SaneDouble
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2f"><span class="hs-identifier hs-var">r2f</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; StaticLit) -&gt; Rational -&gt; StaticLit
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694335"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitDouble"><span class="hs-identifier hs-type">LitDouble</span></a></span><span> </span><span id="local-6989586621682694339"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694339"><span class="hs-identifier hs-var">r</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SaneDouble -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#DoubleLit"><span class="hs-identifier hs-var">DoubleLit</span></a></span><span> </span><span class="annot"><span class="annottext">(SaneDouble -&gt; StaticLit)
-&gt; (Rational -&gt; SaneDouble) -&gt; Rational -&gt; StaticLit
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; SaneDouble
</span><a href="GHC.Types.SaneDouble.html#SaneDouble"><span class="hs-identifier hs-var">SaneDouble</span></a></span><span> </span><span class="annot"><span class="annottext">(Double -&gt; SaneDouble)
-&gt; (Rational -&gt; Double) -&gt; Rational -&gt; SaneDouble
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2d"><span class="hs-identifier hs-var">r2d</span></a></span><span> </span><span class="annot"><span class="annottext">(Rational -&gt; StaticLit) -&gt; Rational -&gt; StaticLit
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682694339"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitLabel"><span class="hs-identifier hs-type">LitLabel</span></a></span><span> </span><span id="local-6989586621682694340"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694340"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682694341"><span class="annot"><span class="annottext">FunctionOrData
</span><a href="#local-6989586621682694341"><span class="hs-identifier hs-var">fod</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; FastString -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#LabelLit"><span class="hs-identifier hs-var">LabelLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunctionOrData
</span><a href="#local-6989586621682694341"><span class="hs-identifier hs-var">fod</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionOrData -&gt; FunctionOrData -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FunctionOrData
</span><a href="GHC.Types.Basic.html#IsFunction"><span class="hs-identifier hs-var">IsFunction</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; FastString -&gt; FastString
</span><a href="GHC.StgToJS.Symbols.html#mkRawSymbol"><span class="hs-identifier hs-var">mkRawSymbol</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682694340"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#LitRubbish"><span class="hs-identifier hs-type">LitRubbish</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682694343"><span class="annot"><span class="annottext">RuntimeRepType
</span><a href="#local-6989586621682694343"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682694344"><span class="annot"><span class="annottext">prim_reps :: [PrimRep]
</span><a href="#local-6989586621682694344"><span class="hs-identifier hs-var hs-var">prim_reps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; SDoc -&gt; RuntimeRepType -&gt; [PrimRep]
SDoc -&gt; RuntimeRepType -&gt; [PrimRep]
</span><a href="GHC.Types.RepType.html#runtimeRepPrimRep"><span class="hs-identifier hs-var">runtimeRepPrimRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.StgToJS.Literal.genStaticLit&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RuntimeRepType
</span><a href="#local-6989586621682694343"><span class="hs-identifier hs-var">rep</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; [PrimRep] -&gt; PrimRep
forall a. HasDebugCallStack =&gt; String -&gt; [a] -&gt; a
</span><a href="GHC.Utils.Misc.html#expectOnly"><span class="hs-identifier hs-var">expectOnly</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.StgToJS.Literal.genStaticLit&quot;</span></span><span> </span><span class="annot"><span class="annottext">[PrimRep]
</span><a href="#local-6989586621682694344"><span class="hs-identifier hs-var">prim_reps</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- Note [Post-unarisation invariants]</span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCon.html#BoxedRep"><span class="hs-identifier hs-type">BoxedRep</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Levity
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">StaticLit
</span><a href="GHC.StgToJS.Types.html#NullLit"><span class="hs-identifier hs-var">NullLit</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#AddrRep"><span class="hs-identifier hs-var">AddrRep</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">StaticLit
</span><a href="GHC.StgToJS.Types.html#NullLit"><span class="hs-identifier hs-var">NullLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#IntRep"><span class="hs-identifier hs-var">IntRep</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int8Rep"><span class="hs-identifier hs-var">Int8Rep</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int16Rep"><span class="hs-identifier hs-var">Int16Rep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int32Rep"><span class="hs-identifier hs-var">Int32Rep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Int64Rep"><span class="hs-identifier hs-var">Int64Rep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#WordRep"><span class="hs-identifier hs-var">WordRep</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word8Rep"><span class="hs-identifier hs-var">Word8Rep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word16Rep"><span class="hs-identifier hs-var">Word16Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word32Rep"><span class="hs-identifier hs-var">Word32Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#Word64Rep"><span class="hs-identifier hs-var">Word64Rep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#FloatRep"><span class="hs-identifier hs-var">FloatRep</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SaneDouble -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#DoubleLit"><span class="hs-identifier hs-var">DoubleLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; SaneDouble
</span><a href="GHC.Types.SaneDouble.html#SaneDouble"><span class="hs-identifier hs-var">SaneDouble</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><span class="annottext">PrimRep
</span><a href="GHC.Core.TyCon.html#DoubleRep"><span class="hs-identifier hs-var">DoubleRep</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StaticLit] -&gt; G [StaticLit]
forall a. a -&gt; StateT GenState IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SaneDouble -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#DoubleLit"><span class="hs-identifier hs-var">DoubleLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; SaneDouble
</span><a href="GHC.Types.SaneDouble.html#SaneDouble"><span class="hs-identifier hs-var">SaneDouble</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCon.html#VecRep"><span class="hs-identifier hs-type">VecRep</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; G [StaticLit]
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.StgToJS.Literal.genStaticLit: LitRubbish(VecRep) isn't supported&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RuntimeRepType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RuntimeRepType
</span><a href="#local-6989586621682694343"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- make an unsigned 32 bit number from this unsigned one, lower 32 bits</span><span>
</span><span id="line-138"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-type">toU32Expr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.JS.JStg.Syntax.html#JStgExpr"><span class="hs-identifier hs-type">JStgExpr</span></a></span><span>
</span><span id="line-139"></span><span id="toU32Expr"><span class="annot"><span class="annottext">toU32Expr :: Integer -&gt; JStgExpr
</span><a href="GHC.StgToJS.Literal.html#toU32Expr"><span class="hs-identifier hs-var hs-var">toU32Expr</span></a></span></span><span> </span><span id="local-6989586621682694348"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694348"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; JStgExpr
</span><a href="GHC.JS.JStg.Syntax.html#Int"><span class="hs-identifier hs-var">Int</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694348"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Bits..&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0xFFFFFFFF</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">JStgExpr -&gt; JStgExpr -&gt; JStgExpr
</span><a href="GHC.JS.Make.html#.%3E%3E%3E."><span class="hs-operator hs-var">.&gt;&gt;&gt;.</span></a></span><span> </span><span class="annot"><span class="annottext">JStgExpr
</span><span class="hs-number">0</span></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- make an unsigned 32 bit number from this unsigned one, lower 32 bits</span><span>
</span><span id="line-142"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-type">toU32Lit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.StgToJS.Types.html#StaticLit"><span class="hs-identifier hs-type">StaticLit</span></a></span><span>
</span><span id="line-143"></span><span id="toU32Lit"><span class="annot"><span class="annottext">toU32Lit :: Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Literal.html#toU32Lit"><span class="hs-identifier hs-var hs-var">toU32Lit</span></a></span></span><span> </span><span id="local-6989586621682694352"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694352"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; StaticLit
</span><a href="GHC.StgToJS.Types.html#IntLit"><span class="hs-identifier hs-var">IntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682694352"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Bits a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Bits..&amp;.</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0xFFFFFFFF</span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#r2d"><span class="hs-identifier hs-type">r2d</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-146"></span><span id="r2d"><span class="annot"><span class="annottext">r2d :: Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2d"><span class="hs-identifier hs-var hs-var">r2d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">realToFrac</span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="annot"><a href="GHC.StgToJS.Literal.html#r2f"><span class="hs-identifier hs-type">r2f</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span>
</span><span id="line-149"></span><span id="r2f"><span class="annot"><span class="annottext">r2f :: Rational -&gt; Double
</span><a href="GHC.StgToJS.Literal.html#r2f"><span class="hs-identifier hs-var hs-var">r2f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Float -&gt; Double
</span><span class="hs-identifier hs-var">float2Double</span></span><span> </span><span class="annot"><span class="annottext">(Float -&gt; Double) -&gt; (Rational -&gt; Float) -&gt; Rational -&gt; Double
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Float
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">realToFrac</span></span><span>
</span><span id="line-150"></span></pre></body></html>