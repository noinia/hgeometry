<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveTraversable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-14"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Messages</span></span><span>
</span><span id="line-15"></span><span>     </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier">Messages</span></a></span><span>
</span><span id="line-16"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkMessages"><span class="hs-identifier">mkMessages</span></a></span><span>
</span><span id="line-17"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#getMessages"><span class="hs-identifier">getMessages</span></a></span><span>
</span><span id="line-18"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier">emptyMessages</span></a></span><span>
</span><span id="line-19"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isEmptyMessages"><span class="hs-identifier">isEmptyMessages</span></a></span><span>
</span><span id="line-20"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#singleMessage"><span class="hs-identifier">singleMessage</span></a></span><span>
</span><span id="line-21"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#addMessage"><span class="hs-identifier">addMessage</span></a></span><span>
</span><span id="line-22"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#unionMessages"><span class="hs-identifier">unionMessages</span></a></span><span>
</span><span id="line-23"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#unionManyMessages"><span class="hs-identifier">unionManyMessages</span></a></span><span>
</span><span id="line-24"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#filterMessages"><span class="hs-identifier">filterMessages</span></a></span><span>
</span><span id="line-25"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier">MsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Classifying Messages</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier">MessageClass</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier">Severity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier">Diagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier">UnknownDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkSimpleUnknownDiagnostic"><span class="hs-identifier">mkSimpleUnknownDiagnostic</span></a></span><span>
</span><span id="line-34"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkUnknownDiagnostic"><span class="hs-identifier">mkUnknownDiagnostic</span></a></span><span>
</span><span id="line-35"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#embedUnknownDiagnostic"><span class="hs-identifier">embedUnknownDiagnostic</span></a></span><span>
</span><span id="line-36"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier">DiagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier">DiagnosticReason</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlag"><span class="hs-identifier">WarningWithFlag</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier">ResolvedDiagnosticReason</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticHint"><span class="hs-identifier">DiagnosticHint</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainDiagnostic"><span class="hs-identifier">mkPlainDiagnostic</span></a></span><span>
</span><span id="line-41"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier">mkPlainError</span></a></span><span>
</span><span id="line-42"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedDiagnostic"><span class="hs-identifier">mkDecoratedDiagnostic</span></a></span><span>
</span><span id="line-43"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedError"><span class="hs-identifier">mkDecoratedError</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#pprDiagnostic"><span class="hs-identifier">pprDiagnostic</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier">HasDefaultDiagnosticOpts</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier">defaultDiagnosticOpts</span></a></span><span>
</span><span id="line-49"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier">NoDiagnosticOpts</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Hints and refactoring actions</span></span><span>
</span><span id="line-52"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier">GhcHint</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#AvailableBindings"><span class="hs-identifier">AvailableBindings</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#LanguageExtensionHint"><span class="hs-identifier">LanguageExtensionHint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestExtension"><span class="hs-identifier">suggestExtension</span></a></span><span>
</span><span id="line-56"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestExtensionWithInfo"><span class="hs-identifier">suggestExtensionWithInfo</span></a></span><span>
</span><span id="line-57"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestExtensions"><span class="hs-identifier">suggestExtensions</span></a></span><span>
</span><span id="line-58"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestExtensionsWithInfo"><span class="hs-identifier">suggestExtensionsWithInfo</span></a></span><span>
</span><span id="line-59"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestAnyExtension"><span class="hs-identifier">suggestAnyExtension</span></a></span><span>
</span><span id="line-60"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#suggestAnyExtensionWithInfo"><span class="hs-identifier">suggestAnyExtensionWithInfo</span></a></span><span>
</span><span id="line-61"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#useExtensionInOrderTo"><span class="hs-identifier">useExtensionInOrderTo</span></a></span><span>
</span><span id="line-62"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier">noHints</span></a></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Rendering Messages</span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier">SDoc</span></a></span><span>
</span><span id="line-67"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier">DecoratedSDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier">unDecorated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier">mkDecorated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkSimpleDecorated"><span class="hs-identifier">mkSimpleDecorated</span></a></span><span>
</span><span id="line-69"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#unionDecoratedSDoc"><span class="hs-identifier">unionDecoratedSDoc</span></a></span><span>
</span><span id="line-70"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mapDecoratedSDoc"><span class="hs-identifier">mapDecoratedSDoc</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier">pprMessageBag</span></a></span><span>
</span><span id="line-73"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier">mkLocMessage</span></a></span><span>
</span><span id="line-74"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessageWarningGroups"><span class="hs-identifier">mkLocMessageWarningGroups</span></a></span><span>
</span><span id="line-75"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier">getCaretDiagnostic</span></a></span><span>
</span><span id="line-76"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Queries</span></span><span>
</span><span id="line-77"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier">isIntrinsicErrorMessage</span></a></span><span>
</span><span id="line-78"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isExtrinsicErrorMessage"><span class="hs-identifier">isExtrinsicErrorMessage</span></a></span><span>
</span><span id="line-79"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isWarningMessage"><span class="hs-identifier">isWarningMessage</span></a></span><span>
</span><span id="line-80"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#getErrorMessages"><span class="hs-identifier">getErrorMessages</span></a></span><span>
</span><span id="line-81"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#getWarningMessages"><span class="hs-identifier">getWarningMessages</span></a></span><span>
</span><span id="line-82"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#partitionMessages"><span class="hs-identifier">partitionMessages</span></a></span><span>
</span><span id="line-83"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#errorsFound"><span class="hs-identifier">errorsFound</span></a></span><span>
</span><span id="line-84"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#errorsOrFatalWarningsFound"><span class="hs-identifier">errorsOrFatalWarningsFound</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Diagnostic codes</span></span><span>
</span><span id="line-87"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier">DiagnosticCode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html"><span class="hs-identifier">GHC.Driver.Flags</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.IO.html"><span class="hs-identifier">GHC.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catchException</span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Utils.Ppr.Colour.html"><span class="hs-identifier">GHC.Utils.Ppr.Colour</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Col</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html"><span class="hs-identifier">GHC.Types.Hint</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier">unpackFS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html"><span class="hs-identifier">GHC.Data.StringBuffer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.StringBuffer.html#atLine"><span class="hs-identifier">atLine</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#hGetStringBuffer"><span class="hs-identifier">hGetStringBuffer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#len"><span class="hs-identifier">len</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#lexemeToString"><span class="hs-identifier">lexemeToString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.Ppr.html"><span class="hs-identifier">GHC.Types.Hint.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Outputable instance</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html"><span class="hs-identifier">GHC.Unit.Module.Warnings</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningCategory"><span class="hs-identifier">WarningCategory</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html"><span class="hs-identifier">GHC.Utils.Json</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.Version.html"><span class="hs-identifier">GHC.Version</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.Version.html#cProjectVersion"><span class="hs-identifier">cProjectVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Bifunctor.html"><span class="hs-identifier">Data.Bifunctor</span></a></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">fold</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toList</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">intercalate</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">maybeToList</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Typeable.html"><span class="hs-identifier">Data.Typeable</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Typeable</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Numeric.Natural.html"><span class="hs-identifier">Numeric.Natural</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Natural</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Text.Printf.html"><span class="hs-identifier">Text.Printf</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Text.Printf.html#printf"><span class="hs-identifier">printf</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">{- Note [Messages]
~~~~~~~~~~~~~~~~~~
We represent the 'Messages' as a single bag of warnings and errors.

The reason behind that is that there is a fluid relationship between errors
and warnings and we want to be able to promote or demote errors and warnings
based on certain flags (e.g. -Werror, -fdefer-type-errors or
-XPartialTypeSignatures). More specifically, every diagnostic has a
'DiagnosticReason', but a warning 'DiagnosticReason' might be associated with
'SevError', in the case of -Werror.

We rely on the 'Severity' to distinguish between a warning and an error.

'WarningMessages' and 'ErrorMessages' are for now simple type aliases to
retain backward compatibility, but in future iterations these can be either
parameterised over an 'e' message type (to make type signatures a bit more
declarative) or removed altogether.
-}</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | A collection of messages emitted by GHC during error reporting. A</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- diagnostic message is typically a warning or an error. See Note [Messages].</span><span>
</span><span id="line-142"></span><span class="hs-comment">--</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- /INVARIANT/: All the messages in this collection must be relevant, i.e.</span><span>
</span><span id="line-144"></span><span class="hs-comment">-- their 'Severity' should /not/ be 'SevIgnore'. The smart constructor</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- 'mkMessages' will filter out any message which 'Severity' is 'SevIgnore'.</span><span>
</span><span id="line-146"></span><span class="hs-keyword">newtype</span><span> </span><span id="Messages"><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span></span><span> </span><span id="local-6989586621682670539"><span class="annot"><a href="#local-6989586621682670539"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Messages"><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getMessages"><span class="annot"><span class="annottext">forall e. Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getMessages"><span class="hs-identifier hs-var hs-var">getMessages</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670539"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682670961"><span id="local-6989586621682670966"><span id="local-6989586621682670970"><span class="annot"><span class="annottext">NonEmpty (Messages e) -&gt; Messages e
Messages e -&gt; Messages e -&gt; Messages e
(Messages e -&gt; Messages e -&gt; Messages e)
-&gt; (NonEmpty (Messages e) -&gt; Messages e)
-&gt; (forall b. Integral b =&gt; b -&gt; Messages e -&gt; Messages e)
-&gt; Semigroup (Messages e)
forall b. Integral b =&gt; b -&gt; Messages e -&gt; Messages e
forall e. NonEmpty (Messages e) -&gt; Messages e
forall e. Messages e -&gt; Messages e -&gt; Messages e
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
forall e b. Integral b =&gt; b -&gt; Messages e -&gt; Messages e
$c&lt;&gt; :: forall e. Messages e -&gt; Messages e -&gt; Messages e
&lt;&gt; :: Messages e -&gt; Messages e -&gt; Messages e
$csconcat :: forall e. NonEmpty (Messages e) -&gt; Messages e
sconcat :: NonEmpty (Messages e) -&gt; Messages e
$cstimes :: forall e b. Integral b =&gt; b -&gt; Messages e -&gt; Messages e
stimes :: forall b. Integral b =&gt; b -&gt; Messages e -&gt; Messages e
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682670982"><span id="local-6989586621682670987"><span id="local-6989586621682670991"><span class="annot"><span class="annottext">Semigroup (Messages e)
Messages e
Semigroup (Messages e) =&gt;
Messages e
-&gt; (Messages e -&gt; Messages e -&gt; Messages e)
-&gt; ([Messages e] -&gt; Messages e)
-&gt; Monoid (Messages e)
[Messages e] -&gt; Messages e
Messages e -&gt; Messages e -&gt; Messages e
forall e. Semigroup (Messages e)
forall e. Messages e
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
forall e. [Messages e] -&gt; Messages e
forall e. Messages e -&gt; Messages e -&gt; Messages e
$cmempty :: forall e. Messages e
mempty :: Messages e
$cmappend :: forall e. Messages e -&gt; Messages e -&gt; Messages e
mappend :: Messages e -&gt; Messages e -&gt; Messages e
$cmconcat :: forall e. [Messages e] -&gt; Messages e
mconcat :: [Messages e] -&gt; Messages e
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682670997"><span id="local-6989586621682671003"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Messages a -&gt; Messages b)
-&gt; (forall a b. a -&gt; Messages b -&gt; Messages a) -&gt; Functor Messages
forall a b. a -&gt; Messages b -&gt; Messages a
forall a b. (a -&gt; b) -&gt; Messages a -&gt; Messages b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; Messages a -&gt; Messages b
fmap :: forall a b. (a -&gt; b) -&gt; Messages a -&gt; Messages b
$c&lt;$ :: forall a b. a -&gt; Messages b -&gt; Messages a
&lt;$ :: forall a b. a -&gt; Messages b -&gt; Messages a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671010"><span id="local-6989586621682671016"><span id="local-6989586621682671025"><span id="local-6989586621682671030"><span id="local-6989586621682671034"><span id="local-6989586621682671037"><span id="local-6989586621682671040"><span id="local-6989586621682671043"><span id="local-6989586621682671046"><span id="local-6989586621682671049"><span id="local-6989586621682671052"><span id="local-6989586621682671056"><span id="local-6989586621682671059"><span id="local-6989586621682671064"><span id="local-6989586621682671069"><span id="local-6989586621682671074"><span id="local-6989586621682671079"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; Messages m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a)
-&gt; (forall a. Messages a -&gt; [a])
-&gt; (forall a. Messages a -&gt; Bool)
-&gt; (forall a. Messages a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; Messages a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; Messages a -&gt; a)
-&gt; (forall a. Ord a =&gt; Messages a -&gt; a)
-&gt; (forall a. Num a =&gt; Messages a -&gt; a)
-&gt; (forall a. Num a =&gt; Messages a -&gt; a)
-&gt; Foldable Messages
forall a. Eq a =&gt; a -&gt; Messages a -&gt; Bool
forall a. Num a =&gt; Messages a -&gt; a
forall a. Ord a =&gt; Messages a -&gt; a
forall m. Monoid m =&gt; Messages m -&gt; m
forall a. Messages a -&gt; Bool
forall a. Messages a -&gt; Int
forall a. Messages a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; Messages m -&gt; m
fold :: forall m. Monoid m =&gt; Messages m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Messages a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Messages a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; Messages a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; Messages a -&gt; a
$ctoList :: forall a. Messages a -&gt; [a]
toList :: forall a. Messages a -&gt; [a]
$cnull :: forall a. Messages a -&gt; Bool
null :: forall a. Messages a -&gt; Bool
$clength :: forall a. Messages a -&gt; Int
length :: forall a. Messages a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; Messages a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; Messages a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; Messages a -&gt; a
maximum :: forall a. Ord a =&gt; Messages a -&gt; a
$cminimum :: forall a. Ord a =&gt; Messages a -&gt; a
minimum :: forall a. Ord a =&gt; Messages a -&gt; a
$csum :: forall a. Num a =&gt; Messages a -&gt; a
sum :: forall a. Num a =&gt; Messages a -&gt; a
$cproduct :: forall a. Num a =&gt; Messages a -&gt; a
product :: forall a. Num a =&gt; Messages a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671092"><span id="local-6989586621682671103"><span id="local-6989586621682671109"><span id="local-6989586621682671114"><span class="annot"><span class="annottext">Functor Messages
Foldable Messages
(Functor Messages, Foldable Messages) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; Messages a -&gt; f (Messages b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    Messages (f a) -&gt; f (Messages a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; Messages a -&gt; m (Messages b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    Messages (m a) -&gt; m (Messages a))
-&gt; Traversable Messages
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a. Monad m =&gt; Messages (m a) -&gt; m (Messages a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
Messages (f a) -&gt; f (Messages a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Messages a -&gt; m (Messages b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Messages a -&gt; f (Messages b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Messages a -&gt; f (Messages b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Messages a -&gt; f (Messages b)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
Messages (f a) -&gt; f (Messages a)
sequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
Messages (f a) -&gt; f (Messages a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Messages a -&gt; m (Messages b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Messages a -&gt; m (Messages b)
$csequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Messages (m a) -&gt; m (Messages a)
sequence :: forall (m :: * -&gt; *) a. Monad m =&gt; Messages (m a) -&gt; m (Messages a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621682671121"><span class="annot"><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier hs-type">emptyMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671121"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-151"></span><span id="emptyMessages"><span class="annot"><span class="annottext">emptyMessages :: forall e. Messages e
</span><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier hs-var hs-var">emptyMessages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span id="local-6989586621682671123"><span class="annot"><a href="GHC.Types.Error.html#mkMessages"><span class="hs-identifier hs-type">mkMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671123"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671123"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-154"></span><span id="mkMessages"><span class="annot"><span class="annottext">mkMessages :: forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#mkMessages"><span class="hs-identifier hs-var hs-var">mkMessages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="annot"><span class="annottext">(Bag (MsgEnvelope e) -&gt; Messages e)
-&gt; (Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e))
-&gt; Bag (MsgEnvelope e)
-&gt; Messages e
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool)
-&gt; Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e)
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. MsgEnvelope e -&gt; Bool
</span><a href="#local-6989586621682671126"><span class="hs-identifier hs-var">interesting</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>    </span><span id="local-6989586621682670608"><span class="annot"><a href="#local-6989586621682671126"><span class="hs-identifier hs-type">interesting</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670608"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-157"></span><span>    </span><span id="local-6989586621682671126"><span class="annot"><span class="annottext">interesting :: forall e. MsgEnvelope e -&gt; Bool
</span><a href="#local-6989586621682671126"><span class="hs-identifier hs-var hs-var">interesting</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(/=)</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span> </span><span class="annot"><span class="annottext">(Severity -&gt; Bool)
-&gt; (MsgEnvelope e -&gt; Severity) -&gt; MsgEnvelope e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Severity
forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621682671131"><span class="annot"><a href="GHC.Types.Error.html#isEmptyMessages"><span class="hs-identifier hs-type">isEmptyMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671131"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-160"></span><span id="isEmptyMessages"><span class="annot"><span class="annottext">isEmptyMessages :: forall a. Messages a -&gt; Bool
</span><a href="GHC.Types.Error.html#isEmptyMessages"><span class="hs-identifier hs-var hs-var">isEmptyMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671132"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671132"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Bool
forall a. Bag a -&gt; Bool
</span><a href="GHC.Data.Bag.html#isEmptyBag"><span class="hs-identifier hs-var">isEmptyBag</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671132"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span id="local-6989586621682670615"><span class="annot"><a href="GHC.Types.Error.html#singleMessage"><span class="hs-identifier hs-type">singleMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670615"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670615"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-163"></span><span id="singleMessage"><span class="annot"><span class="annottext">singleMessage :: forall e. MsgEnvelope e -&gt; Messages e
</span><a href="GHC.Types.Error.html#singleMessage"><span class="hs-identifier hs-var hs-var">singleMessage</span></a></span></span><span> </span><span id="local-6989586621682671134"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671134"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Messages e -&gt; Messages e
forall e. MsgEnvelope e -&gt; Messages e -&gt; Messages e
</span><a href="GHC.Types.Error.html#addMessage"><span class="hs-identifier hs-var">addMessage</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671134"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Messages e
forall e. Messages e
</span><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier hs-var">emptyMessages</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682670621"><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670621"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670621"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span id="local-6989586621682671147"><span class="annot"><span class="annottext">ppr :: Messages e -&gt; SDoc
</span><a href="#local-6989586621682671147"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682671149"><span class="annot"><span class="annottext">Messages e
</span><a href="#local-6989586621682671149"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; SDoc) -&gt; [MsgEnvelope e] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; SDoc
</span><a href="#local-6989586621682671152"><span class="hs-identifier hs-var">ppr_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Messages e -&gt; Bag (MsgEnvelope e)
forall e. Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getMessages"><span class="hs-identifier hs-var">getMessages</span></a></span><span> </span><span class="annot"><span class="annottext">Messages e
</span><a href="#local-6989586621682671149"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-168"></span><span>       </span><span class="annot"><a href="#local-6989586621682671152"><span class="hs-identifier hs-type">ppr_one</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670621"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-169"></span><span>       </span><span id="local-6989586621682671152"><span class="annot"><span class="annottext">ppr_one :: MsgEnvelope e -&gt; SDoc
</span><a href="#local-6989586621682671152"><span class="hs-identifier hs-var hs-var">ppr_one</span></a></span></span><span> </span><span id="local-6989586621682671154"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671154"><span class="hs-identifier hs-var">envelope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Resolved:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; ResolvedDiagnosticReason
forall e. MsgEnvelope e -&gt; ResolvedDiagnosticReason
</span><a href="GHC.Types.Error.html#errMsgReason"><span class="hs-identifier hs-var">errMsgReason</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671154"><span class="hs-identifier hs-var">envelope</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>               </span><span class="annot"><span class="annottext">e -&gt; SDoc
forall e. Diagnostic e =&gt; e -&gt; SDoc
</span><a href="GHC.Types.Error.html#pprDiagnostic"><span class="hs-identifier hs-var">pprDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; e
forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671154"><span class="hs-identifier hs-var">envelope</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>             </span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682670634"><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670634"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#ToJson"><span class="hs-identifier hs-type">ToJson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670634"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621682671167"><span class="annot"><span class="annottext">json :: Messages e -&gt; JsonDoc
</span><a href="#local-6989586621682671167"><span class="hs-identifier hs-var hs-var hs-var">json</span></a></span></span><span> </span><span id="local-6989586621682671169"><span class="annot"><span class="annottext">Messages e
</span><a href="#local-6989586621682671169"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">[JsonDoc] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSArray"><span class="hs-identifier hs-var">JSArray</span></a></span><span> </span><span class="annot"><span class="annottext">([JsonDoc] -&gt; JsonDoc)
-&gt; (Bag JsonDoc -&gt; [JsonDoc]) -&gt; Bag JsonDoc -&gt; JsonDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bag JsonDoc -&gt; [JsonDoc]
forall a. Bag a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(Bag JsonDoc -&gt; JsonDoc) -&gt; Bag JsonDoc -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; JsonDoc
forall a. ToJson a =&gt; a -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; JsonDoc) -&gt; Bag (MsgEnvelope e) -&gt; Bag JsonDoc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Messages e -&gt; Bag (MsgEnvelope e)
forall e. Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getMessages"><span class="hs-identifier hs-var">getMessages</span></a></span><span> </span><span class="annot"><span class="annottext">Messages e
</span><a href="#local-6989586621682671169"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">{- Note [Discarding Messages]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Discarding a 'SevIgnore' message from 'addMessage' and 'unionMessages' is just
an optimisation, as GHC would /also/ suppress any diagnostic which severity is
'SevIgnore' before printing the message: See for example 'putLogMsg' and
'defaultLogAction'.

-}</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | Adds a 'Message' to the input collection of messages.</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- See Note [Discarding Messages].</span><span>
</span><span id="line-189"></span><span id="local-6989586621682670617"><span class="annot"><a href="GHC.Types.Error.html#addMessage"><span class="hs-identifier hs-type">addMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670617"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670617"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670617"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-190"></span><span id="addMessage"><span class="annot"><span class="annottext">addMessage :: forall e. MsgEnvelope e -&gt; Messages e -&gt; Messages e
</span><a href="GHC.Types.Error.html#addMessage"><span class="hs-identifier hs-var hs-var">addMessage</span></a></span></span><span> </span><span id="local-6989586621682671172"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671172"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671173"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671173"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Severity
forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671172"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671173"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671172"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e)
forall a. a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#consBag"><span class="hs-operator hs-var">`consBag`</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671173"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- | Joins two collections of messages together.</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- See Note [Discarding Messages].</span><span>
</span><span id="line-196"></span><span id="local-6989586621682671175"><span class="annot"><a href="GHC.Types.Error.html#unionMessages"><span class="hs-identifier hs-type">unionMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671175"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671175"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671175"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-197"></span><span id="unionMessages"><span class="annot"><span class="annottext">unionMessages :: forall e. Messages e -&gt; Messages e -&gt; Messages e
</span><a href="GHC.Types.Error.html#unionMessages"><span class="hs-identifier hs-var hs-var">unionMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671176"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671176"><span class="hs-identifier hs-var">msgs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671177"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671177"><span class="hs-identifier hs-var">msgs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671176"><span class="hs-identifier hs-var">msgs1</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e)
forall a. Bag a -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unionBags"><span class="hs-operator hs-var">`unionBags`</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671177"><span class="hs-identifier hs-var">msgs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="annot"><span class="hs-comment">-- | Joins many 'Messages's together</span></span><span>
</span><span id="line-201"></span><span id="local-6989586621682670647"><span id="local-6989586621682670648"><span class="annot"><a href="GHC.Types.Error.html#unionManyMessages"><span class="hs-identifier hs-type">unionManyMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Foldable</span></span><span> </span><span class="annot"><a href="#local-6989586621682670647"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682670647"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670648"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670648"><span class="hs-identifier hs-type">e</span></a></span></span></span><span>
</span><span id="line-202"></span><span id="unionManyMessages"><span class="annot"><span class="annottext">unionManyMessages :: forall (f :: * -&gt; *) e. Foldable f =&gt; f (Messages e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#unionManyMessages"><span class="hs-identifier hs-var hs-var">unionManyMessages</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f (Messages e) -&gt; Messages e
forall m. Monoid m =&gt; f m -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span id="local-6989586621682670651"><span class="annot"><a href="GHC.Types.Error.html#filterMessages"><span class="hs-identifier hs-type">filterMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670651"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670651"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670651"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-205"></span><span id="filterMessages"><span class="annot"><span class="annottext">filterMessages :: forall e. (MsgEnvelope e -&gt; Bool) -&gt; Messages e -&gt; Messages e
</span><a href="GHC.Types.Error.html#filterMessages"><span class="hs-identifier hs-var hs-var">filterMessages</span></a></span></span><span> </span><span id="local-6989586621682671182"><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
</span><a href="#local-6989586621682671182"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671183"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671183"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool)
-&gt; Bag (MsgEnvelope e) -&gt; Bag (MsgEnvelope e)
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#filterBag"><span class="hs-identifier hs-var">filterBag</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
</span><a href="#local-6989586621682671182"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671183"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | A 'DecoratedSDoc' is isomorphic to a '[SDoc]' but it carries the</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- invariant that the input '[SDoc]' needs to be rendered /decorated/ into its</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- final form, where the typical case would be adding bullets between each</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- elements of the list. The type of decoration depends on the formatting</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- function used, but in practice GHC uses the 'formatBulleted'.</span><span>
</span><span id="line-213"></span><span class="hs-keyword">newtype</span><span> </span><span id="DecoratedSDoc"><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-var">DecoratedSDoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Decorated"><span class="annot"><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-var">Decorated</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unDecorated"><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var hs-var">unDecorated</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><span class="hs-comment">-- | Creates a new 'DecoratedSDoc' out of a list of 'SDoc'.</span></span><span>
</span><span id="line-216"></span><span class="annot"><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier hs-type">mkDecorated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-217"></span><span id="mkDecorated"><span class="annot"><span class="annottext">mkDecorated :: [SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier hs-var hs-var">mkDecorated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-var">Decorated</span></a></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><span class="hs-comment">-- | Creates a new 'DecoratedSDoc' out of a single 'SDoc'</span></span><span>
</span><span id="line-220"></span><span class="annot"><a href="GHC.Types.Error.html#mkSimpleDecorated"><span class="hs-identifier hs-type">mkSimpleDecorated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-221"></span><span id="mkSimpleDecorated"><span class="annot"><span class="annottext">mkSimpleDecorated :: SDoc -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkSimpleDecorated"><span class="hs-identifier hs-var hs-var">mkSimpleDecorated</span></a></span></span><span> </span><span id="local-6989586621682671185"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671185"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-var">Decorated</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671185"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">-- | Joins two 'DecoratedSDoc' together. The resulting 'DecoratedSDoc'</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- will have a number of entries which is the sum of the lengths of</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- the input.</span><span>
</span><span id="line-226"></span><span class="annot"><a href="GHC.Types.Error.html#unionDecoratedSDoc"><span class="hs-identifier hs-type">unionDecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-227"></span><span id="unionDecoratedSDoc"><span class="annot"><span class="annottext">unionDecoratedSDoc :: DecoratedSDoc -&gt; DecoratedSDoc -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#unionDecoratedSDoc"><span class="hs-identifier hs-var hs-var">unionDecoratedSDoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-type">Decorated</span></a></span><span> </span><span id="local-6989586621682671186"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671186"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-type">Decorated</span></a></span><span> </span><span id="local-6989586621682671187"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671187"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-var">Decorated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671186"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; [SDoc] -&gt; [SDoc]
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671187"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><span class="hs-comment">-- | Apply a transformation function to all elements of a 'DecoratedSDoc'.</span></span><span>
</span><span id="line-231"></span><span class="annot"><a href="GHC.Types.Error.html#mapDecoratedSDoc"><span class="hs-identifier hs-type">mapDecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-232"></span><span id="mapDecoratedSDoc"><span class="annot"><span class="annottext">mapDecoratedSDoc :: (SDoc -&gt; SDoc) -&gt; DecoratedSDoc -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mapDecoratedSDoc"><span class="hs-identifier hs-var hs-var">mapDecoratedSDoc</span></a></span></span><span> </span><span id="local-6989586621682671188"><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621682671188"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-type">Decorated</span></a></span><span> </span><span id="local-6989586621682671189"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671189"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#Decorated"><span class="hs-identifier hs-var">Decorated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; [SDoc] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621682671188"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671189"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">class</span><span> </span><span id="HasDefaultDiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier hs-var">HasDefaultDiagnosticOpts</span></a></span></span><span> </span><span id="local-6989586621682670658"><span class="annot"><a href="#local-6989586621682670658"><span class="hs-identifier hs-type">opts</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="defaultOpts"><span class="annot"><a href="GHC.Types.Error.html#defaultOpts"><span class="hs-identifier hs-type">defaultOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682670658"><span class="hs-identifier hs-type">opts</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-type">defaultDiagnosticOpts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682670654"><span class="annot"><a href="#local-6989586621682670654"><span class="hs-identifier hs-type">opts</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier hs-type">HasDefaultDiagnosticOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670654"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670654"><span class="hs-identifier hs-type">opts</span></a></span><span>
</span><span id="line-240"></span><span id="defaultDiagnosticOpts"><span class="annot"><span class="annottext">defaultDiagnosticOpts :: forall opts.
HasDefaultDiagnosticOpts (DiagnosticOpts opts) =&gt;
DiagnosticOpts opts
</span><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-var hs-var">defaultDiagnosticOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall opts. HasDefaultDiagnosticOpts opts =&gt; opts
</span><a href="GHC.Types.Error.html#defaultOpts"><span class="hs-identifier hs-var">defaultOpts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670654"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-comment">-- | A class identifying a diagnostic.</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- Dictionary.com defines a diagnostic as:</span><span>
</span><span id="line-247"></span><span class="hs-comment">--</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- \&quot;a message output by a computer diagnosing an error in a computer program,</span><span>
</span><span id="line-249"></span><span class="hs-comment">-- computer system, or component device\&quot;.</span><span>
</span><span id="line-250"></span><span class="hs-comment">--</span><span>
</span><span id="line-251"></span><span class="hs-comment">-- A 'Diagnostic' carries the /actual/ description of the message (which, in</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- GHC's case, it can be an error or a warning) and the /reason/ why such</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- message was generated in the first place.</span><span>
</span><span id="line-254"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier hs-type">HasDefaultDiagnosticOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Diagnostic"><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-var">Diagnostic</span></a></span></span><span> </span><span id="local-6989586621682670659"><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-comment">-- | Type of configuration options for the diagnostic.</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-var">DiagnosticOpts</span></a></span></span><span> </span><span id="local-6989586621682670659"><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-comment">-- | Extract the error message text from a 'Diagnostic'.</span><span>
</span><span id="line-260"></span><span>  </span><span id="diagnosticMessage"><span class="annot"><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-type">diagnosticMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-comment">-- | Extract the reason for this diagnostic. For warnings,</span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-comment">-- a 'DiagnosticReason' includes the warning flag.</span><span>
</span><span id="line-264"></span><span>  </span><span id="diagnosticReason"><span class="annot"><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-type">diagnosticReason</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span>  </span><span class="hs-comment">-- | Extract any hints a user might use to repair their</span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-comment">-- code to avoid this diagnostic.</span><span>
</span><span id="line-268"></span><span>  </span><span id="diagnosticHints"><span class="annot"><a href="GHC.Types.Error.html#diagnosticHints"><span class="hs-identifier hs-type">diagnosticHints</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>  </span><span class="hs-comment">-- | Get the 'DiagnosticCode' associated with this 'Diagnostic'.</span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-comment">-- This can return 'Nothing' for at least two reasons:</span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-comment">-- 1. The message might be from a plugin that does not supply codes.</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-comment">-- 2. The message might not yet have been assigned a code. See the</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">--    'Diagnostic' instance for 'DiagnosticMessage'.</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-comment">-- Ideally, case (2) would not happen, but because</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-comment">-- some errors in GHC still use the old system of just writing the</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-comment">-- error message in-place (instead of using a dedicated error type</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-comment">-- and constructor), we do not have error codes for all errors.</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-comment">-- #18516 tracks our progress toward this goal.</span><span>
</span><span id="line-282"></span><span>  </span><span id="diagnosticCode"><span class="annot"><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-type">diagnosticCode</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682670659"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="annot"><span class="hs-comment">-- | An existential wrapper around an unknown diagnostic.</span></span><span>
</span><span id="line-285"></span><span class="hs-keyword">data</span><span> </span><span id="UnknownDiagnostic"><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-var">UnknownDiagnostic</span></a></span></span><span> </span><span id="local-6989586621682671198"><span class="annot"><a href="#local-6989586621682671198"><span class="hs-identifier hs-type">opts</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-286"></span><span>  </span><span id="local-6989586621682670674"><span id="local-6989586621682671199"><span id="UnknownDiagnostic"><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-var">UnknownDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671199"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621682671199"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>                    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682670674"><span class="hs-identifier hs-type">opts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671199"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Inject the options of the outer context</span><span>
</span><span id="line-288"></span><span>                                                  </span><span class="hs-comment">-- into the options for the wrapped diagnostic.</span><span>
</span><span id="line-289"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682671199"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-290"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670674"><span class="hs-identifier hs-type">opts</span></a></span></span></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682670663"><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier hs-type">HasDefaultDiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670663"><span class="hs-identifier hs-type">opts</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670663"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-var">DiagnosticOpts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670663"><span class="hs-identifier hs-type">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682670663"><span class="hs-identifier hs-type">opts</span></a></span><span>
</span><span id="line-294"></span><span>  </span><span id="local-6989586621682671210"><span class="annot"><span class="annottext">diagnosticMessage :: DiagnosticOpts (UnknownDiagnostic opts)
-&gt; UnknownDiagnostic opts -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var hs-var hs-var">diagnosticMessage</span></a></span></span><span> </span><span id="local-6989586621682671211"><span class="annot"><span class="annottext">DiagnosticOpts (UnknownDiagnostic opts)
</span><a href="#local-6989586621682671211"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span id="local-6989586621682671215"><span class="annot"><span class="annottext">opts -&gt; DiagnosticOpts a
</span><a href="#local-6989586621682671215"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682671216"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671216"><span class="hs-identifier hs-var">diag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
forall a. Diagnostic a =&gt; DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var">diagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">opts -&gt; DiagnosticOpts a
</span><a href="#local-6989586621682671215"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">opts
DiagnosticOpts (UnknownDiagnostic opts)
</span><a href="#local-6989586621682671211"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671216"><span class="hs-identifier hs-var">diag</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span id="local-6989586621682671217"><span class="annot"><span class="annottext">diagnosticReason :: UnknownDiagnostic opts -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var hs-var hs-var">diagnosticReason</span></a></span></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">opts -&gt; DiagnosticOpts a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682671221"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671221"><span class="hs-identifier hs-var">diag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; DiagnosticReason
forall a. Diagnostic a =&gt; a -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var">diagnosticReason</span></a></span><span>  </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671221"><span class="hs-identifier hs-var">diag</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621682671222"><span class="annot"><span class="annottext">diagnosticHints :: UnknownDiagnostic opts -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagnosticHints"><span class="hs-identifier hs-var hs-var hs-var">diagnosticHints</span></a></span></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">opts -&gt; DiagnosticOpts a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682671226"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671226"><span class="hs-identifier hs-var">diag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; [GhcHint]
forall a. Diagnostic a =&gt; a -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagnosticHints"><span class="hs-identifier hs-var">diagnosticHints</span></a></span><span>   </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671226"><span class="hs-identifier hs-var">diag</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span id="local-6989586621682671227"><span class="annot"><span class="annottext">diagnosticCode :: UnknownDiagnostic opts -&gt; Maybe DiagnosticCode
</span><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-var hs-var hs-var">diagnosticCode</span></a></span></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">opts -&gt; DiagnosticOpts a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682671231"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671231"><span class="hs-identifier hs-var">diag</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe DiagnosticCode
forall a. Diagnostic a =&gt; a -&gt; Maybe DiagnosticCode
</span><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-var">diagnosticCode</span></a></span><span>    </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682671231"><span class="hs-identifier hs-var">diag</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- A fallback 'DiagnosticOpts' which can be used when there are no options</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- for a particular diagnostic.</span><span>
</span><span id="line-301"></span><span class="hs-keyword">data</span><span> </span><span id="NoDiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-var">NoDiagnosticOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NoDiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-var">NoDiagnosticOpts</span></a></span></span><span>
</span><span id="line-302"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#HasDefaultDiagnosticOpts"><span class="hs-identifier hs-type">HasDefaultDiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-type">NoDiagnosticOpts</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-303"></span><span>  </span><span id="local-6989586621682671236"><span class="annot"><span class="annottext">defaultOpts :: NoDiagnosticOpts
</span><a href="GHC.Types.Error.html#defaultOpts"><span class="hs-identifier hs-var hs-var hs-var">defaultOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoDiagnosticOpts
</span><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-var">NoDiagnosticOpts</span></a></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><span class="hs-comment">-- | Make a &quot;simple&quot; unknown diagnostic which doesn't have any configuration options.</span></span><span>
</span><span id="line-306"></span><span id="local-6989586621682670669"><span id="local-6989586621682670670"><span class="annot"><a href="GHC.Types.Error.html#mkSimpleUnknownDiagnostic"><span class="hs-identifier hs-type">mkSimpleUnknownDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670669"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621682670669"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670669"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-type">NoDiagnosticOpts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682670669"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670670"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-307"></span><span id="mkSimpleUnknownDiagnostic"><span class="annot"><span class="annottext">mkSimpleUnknownDiagnostic :: forall a b.
(Diagnostic a, Typeable a, DiagnosticOpts a ~ NoDiagnosticOpts) =&gt;
a -&gt; UnknownDiagnostic b
</span><a href="GHC.Types.Error.html#mkSimpleUnknownDiagnostic"><span class="hs-identifier hs-var hs-var">mkSimpleUnknownDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(b -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic b
forall a opts.
(Diagnostic a, Typeable a) =&gt;
(opts -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic opts
</span><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-var">UnknownDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NoDiagnosticOpts -&gt; b -&gt; NoDiagnosticOpts
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">NoDiagnosticOpts
</span><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-var">NoDiagnosticOpts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="annot"><span class="hs-comment">-- | Make an unknown diagnostic which uses the same options as the context it will be embedded into.</span></span><span>
</span><span id="line-310"></span><span id="local-6989586621682670677"><span class="annot"><a href="GHC.Types.Error.html#mkUnknownDiagnostic"><span class="hs-identifier hs-type">mkUnknownDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621682670677"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670677"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682670677"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670677"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-311"></span><span id="mkUnknownDiagnostic"><span class="annot"><span class="annottext">mkUnknownDiagnostic :: forall a.
(Typeable a, Diagnostic a) =&gt;
a -&gt; UnknownDiagnostic (DiagnosticOpts a)
</span><a href="GHC.Types.Error.html#mkUnknownDiagnostic"><span class="hs-identifier hs-var hs-var">mkUnknownDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DiagnosticOpts a -&gt; DiagnosticOpts a)
-&gt; a -&gt; UnknownDiagnostic (DiagnosticOpts a)
forall a opts.
(Diagnostic a, Typeable a) =&gt;
(opts -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic opts
</span><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-var">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts a -&gt; DiagnosticOpts a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><span class="hs-comment">-- | Embed a more complicated diagnostic which requires a potentially different options type.</span></span><span>
</span><span id="line-314"></span><span id="local-6989586621682671249"><span id="local-6989586621682671250"><span class="annot"><a href="GHC.Types.Error.html#embedUnknownDiagnostic"><span class="hs-identifier hs-type">embedUnknownDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671249"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621682671249"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682671250"><span class="hs-identifier hs-type">opts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671249"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682671249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-type">UnknownDiagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671250"><span class="hs-identifier hs-type">opts</span></a></span></span></span><span>
</span><span id="line-315"></span><span id="embedUnknownDiagnostic"><span class="annot"><span class="annottext">embedUnknownDiagnostic :: forall a opts.
(Diagnostic a, Typeable a) =&gt;
(opts -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic opts
</span><a href="GHC.Types.Error.html#embedUnknownDiagnostic"><span class="hs-identifier hs-var hs-var">embedUnknownDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(opts -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic opts
forall a opts.
(Diagnostic a, Typeable a) =&gt;
(opts -&gt; DiagnosticOpts a) -&gt; a -&gt; UnknownDiagnostic opts
</span><a href="GHC.Types.Error.html#UnknownDiagnostic"><span class="hs-identifier hs-var">UnknownDiagnostic</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><a href="GHC.Types.Error.html#pprDiagnostic"><span class="hs-identifier hs-type">pprDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682670629"><span class="annot"><a href="#local-6989586621682670629"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670629"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682670629"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-320"></span><span id="pprDiagnostic"><span class="annot"><span class="annottext">pprDiagnostic :: forall e. Diagnostic e =&gt; e -&gt; SDoc
</span><a href="GHC.Types.Error.html#pprDiagnostic"><span class="hs-identifier hs-var hs-var">pprDiagnostic</span></a></span></span><span> </span><span id="local-6989586621682671264"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671264"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; DiagnosticReason
forall a. Diagnostic a =&gt; a -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var">diagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671264"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var">unDecorated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; e -&gt; DecoratedSDoc
forall a. Diagnostic a =&gt; DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var">diagnosticMessage</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621682671266"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671264"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682671266"><span class="annot"><span class="annottext">opts :: DiagnosticOpts e
</span><a href="#local-6989586621682671266"><span class="hs-identifier hs-var hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall opts.
HasDefaultDiagnosticOpts (DiagnosticOpts opts) =&gt;
DiagnosticOpts opts
</span><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-var">defaultDiagnosticOpts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682670629"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="annot"><span class="hs-comment">-- | A generic 'Hint' message, to be used with 'DiagnosticMessage'.</span></span><span>
</span><span id="line-325"></span><span class="hs-keyword">data</span><span> </span><span id="DiagnosticHint"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticHint"><span class="hs-identifier hs-var">DiagnosticHint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DiagnosticHint"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticHint"><span class="hs-identifier hs-var">DiagnosticHint</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticHint"><span class="hs-identifier hs-type">DiagnosticHint</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-328"></span><span>  </span><span id="local-6989586621682671271"><span class="annot"><span class="annottext">ppr :: DiagnosticHint -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticHint"><span class="hs-identifier hs-type">DiagnosticHint</span></a></span><span> </span><span id="local-6989586621682671272"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671272"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671272"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- | A generic 'Diagnostic' message, without any further classification or</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- provenance: By looking at a 'DiagnosticMessage' we don't know neither</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- /where/ it was generated nor how to interpret its payload (as it's just a</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- structured document). All we can do is to print it out and look at its</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- 'DiagnosticReason'.</span><span>
</span><span id="line-335"></span><span class="hs-keyword">data</span><span> </span><span id="DiagnosticMessage"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DiagnosticMessage"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="diagMessage"><span class="annot"><span class="annottext">DiagnosticMessage -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagMessage"><span class="hs-identifier hs-var hs-var">diagMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diagReason"><span class="annot"><span class="annottext">DiagnosticMessage -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagReason"><span class="hs-identifier hs-var hs-var">diagReason</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span>
</span><span id="line-338"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diagHints"><span class="annot"><span class="annottext">DiagnosticMessage -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagHints"><span class="hs-identifier hs-var hs-var">diagHints</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-339"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-342"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="DiagnosticOpts"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-var">DiagnosticOpts</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#NoDiagnosticOpts"><span class="hs-identifier hs-type">NoDiagnosticOpts</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span id="local-6989586621682671284"><span class="annot"><span class="annottext">diagnosticMessage :: DiagnosticOpts DiagnosticMessage
-&gt; DiagnosticMessage -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var hs-var hs-var">diagnosticMessage</span></a></span></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts DiagnosticMessage
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagMessage"><span class="hs-identifier hs-var">diagMessage</span></a></span><span>
</span><span id="line-344"></span><span>  </span><span id="local-6989586621682671285"><span class="annot"><span class="annottext">diagnosticReason :: DiagnosticMessage -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var hs-var hs-var">diagnosticReason</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagReason"><span class="hs-identifier hs-var">diagReason</span></a></span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621682671286"><span class="annot"><span class="annottext">diagnosticHints :: DiagnosticMessage -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagnosticHints"><span class="hs-identifier hs-var hs-var hs-var">diagnosticHints</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagHints"><span class="hs-identifier hs-var">diagHints</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621682671287"><span class="annot"><span class="annottext">diagnosticCode :: DiagnosticMessage -&gt; Maybe DiagnosticCode
</span><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-var hs-var hs-var">diagnosticCode</span></a></span></span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="hs-comment">-- | Helper function to use when no hints can be provided. Currently this function</span><span>
</span><span id="line-349"></span><span class="hs-comment">-- can be used to construct plain 'DiagnosticMessage' and add hints to them, but</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- once #18516 will be fully executed, the main usage of this function would be in</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- the implementation of the 'diagnosticHints' typeclass method, to report the fact</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- that a particular 'Diagnostic' has no hints.</span><span>
</span><span id="line-353"></span><span class="annot"><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-type">noHints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-354"></span><span id="noHints"><span class="annot"><span class="annottext">noHints :: [GhcHint]
</span><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-var hs-var">noHints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GhcHint]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="annot"><a href="GHC.Types.Error.html#mkPlainDiagnostic"><span class="hs-identifier hs-type">mkPlainDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span>
</span><span id="line-357"></span><span id="mkPlainDiagnostic"><span class="annot"><span class="annottext">mkPlainDiagnostic :: DiagnosticReason -&gt; [GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainDiagnostic"><span class="hs-identifier hs-var hs-var">mkPlainDiagnostic</span></a></span></span><span> </span><span id="local-6989586621682671288"><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671288"><span class="hs-identifier hs-var">rea</span></a></span></span><span> </span><span id="local-6989586621682671289"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671289"><span class="hs-identifier hs-var">hints</span></a></span></span><span> </span><span id="local-6989586621682671290"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671290"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; DiagnosticReason -&gt; [GhcHint] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkSimpleDecorated"><span class="hs-identifier hs-var">mkSimpleDecorated</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671290"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671288"><span class="hs-identifier hs-var">rea</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671289"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="annot"><span class="hs-comment">-- | Create an error 'DiagnosticMessage' holding just a single 'SDoc'</span></span><span>
</span><span id="line-360"></span><span class="annot"><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-type">mkPlainError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span>
</span><span id="line-361"></span><span id="mkPlainError"><span class="annot"><span class="annottext">mkPlainError :: [GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-var hs-var">mkPlainError</span></a></span></span><span> </span><span id="local-6989586621682671291"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671291"><span class="hs-identifier hs-var">hints</span></a></span></span><span> </span><span id="local-6989586621682671292"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671292"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; DiagnosticReason -&gt; [GhcHint] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkSimpleDecorated"><span class="hs-identifier hs-var">mkSimpleDecorated</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671292"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671291"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="annot"><span class="hs-comment">-- | Create a 'DiagnosticMessage' from a list of bulleted SDocs and a 'DiagnosticReason'</span></span><span>
</span><span id="line-364"></span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedDiagnostic"><span class="hs-identifier hs-type">mkDecoratedDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span>
</span><span id="line-365"></span><span id="mkDecoratedDiagnostic"><span class="annot"><span class="annottext">mkDecoratedDiagnostic :: DiagnosticReason -&gt; [GhcHint] -&gt; [SDoc] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkDecoratedDiagnostic"><span class="hs-identifier hs-var hs-var">mkDecoratedDiagnostic</span></a></span></span><span> </span><span id="local-6989586621682671294"><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671294"><span class="hs-identifier hs-var">rea</span></a></span></span><span> </span><span id="local-6989586621682671295"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671295"><span class="hs-identifier hs-var">hints</span></a></span></span><span> </span><span id="local-6989586621682671296"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671296"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; DiagnosticReason -&gt; [GhcHint] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier hs-var">mkDecorated</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671296"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671294"><span class="hs-identifier hs-var">rea</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671295"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="annot"><span class="hs-comment">-- | Create an error 'DiagnosticMessage' from a list of bulleted SDocs</span></span><span>
</span><span id="line-368"></span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedError"><span class="hs-identifier hs-type">mkDecoratedError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span>
</span><span id="line-369"></span><span id="mkDecoratedError"><span class="annot"><span class="annottext">mkDecoratedError :: [GhcHint] -&gt; [SDoc] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkDecoratedError"><span class="hs-identifier hs-var hs-var">mkDecoratedError</span></a></span></span><span> </span><span id="local-6989586621682671297"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671297"><span class="hs-identifier hs-var">hints</span></a></span></span><span> </span><span id="local-6989586621682671298"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671298"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; DiagnosticReason -&gt; [GhcHint] -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-var">DiagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier hs-var">mkDecorated</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671298"><span class="hs-identifier hs-var">docs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682671297"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-comment">-- | The reason /why/ a 'Diagnostic' was emitted in the first place.</span><span>
</span><span id="line-372"></span><span class="hs-comment">-- Diagnostic messages are born within GHC with a very precise reason, which</span><span>
</span><span id="line-373"></span><span class="hs-comment">-- can be completely statically-computed (i.e. this is an error or a warning</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- no matter what), or influenced by the specific state of the 'DynFlags' at</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- the moment of the creation of a new 'Diagnostic'. For example, a parsing</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- error is /always/ going to be an error, whereas a 'WarningWithoutFlag</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- Opt_WarnUnusedImports' might turn into an error due to '-Werror' or</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- '-Werror=warn-unused-imports'. Interpreting a 'DiagnosticReason' together</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- with its associated 'Severity' gives us the full picture.</span><span>
</span><span id="line-380"></span><span class="hs-keyword">data</span><span> </span><span id="DiagnosticReason"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-var">DiagnosticReason</span></a></span></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WarningWithoutFlag"><span class="annot"><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span></span><span>
</span><span id="line-382"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Born as a warning.</span></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WarningWithFlags"><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-var">WarningWithFlags</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Warning was enabled with the flag.</span></span><span>
</span><span id="line-385"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="WarningWithCategory"><span class="annot"><a href="GHC.Types.Error.html#WarningWithCategory"><span class="hs-identifier hs-var">WarningWithCategory</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningCategory"><span class="hs-identifier hs-type">WarningCategory</span></a></span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Warning was enabled with a custom category.</span></span><span>
</span><span id="line-387"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ErrorWithoutFlag"><span class="annot"><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span></span><span>
</span><span id="line-388"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Born as an error.</span></span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671303"><span id="local-6989586621682671313"><span class="annot"><span class="annottext">DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
(DiagnosticReason -&gt; DiagnosticReason -&gt; Bool)
-&gt; (DiagnosticReason -&gt; DiagnosticReason -&gt; Bool)
-&gt; Eq DiagnosticReason
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
== :: DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
$c/= :: DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
/= :: DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671319"><span id="local-6989586621682671328"><span id="local-6989586621682671332"><span class="annot"><span class="annottext">Int -&gt; DiagnosticReason -&gt; ShowS
[DiagnosticReason] -&gt; ShowS
DiagnosticReason -&gt; String
(Int -&gt; DiagnosticReason -&gt; ShowS)
-&gt; (DiagnosticReason -&gt; String)
-&gt; ([DiagnosticReason] -&gt; ShowS)
-&gt; Show DiagnosticReason
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DiagnosticReason -&gt; ShowS
showsPrec :: Int -&gt; DiagnosticReason -&gt; ShowS
$cshow :: DiagnosticReason -&gt; String
show :: DiagnosticReason -&gt; String
$cshowList :: [DiagnosticReason] -&gt; ShowS
showList :: [DiagnosticReason] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span class="hs-comment">-- | Like a 'DiagnosticReason', but resolved against a specific set of `DynFlags` to</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- work out which warning flag actually enabled this warning.</span><span>
</span><span id="line-393"></span><span class="hs-keyword">newtype</span><span> </span><span id="ResolvedDiagnosticReason"><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-var">ResolvedDiagnosticReason</span></a></span></span><span>
</span><span id="line-394"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span id="ResolvedDiagnosticReason"><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-var">ResolvedDiagnosticReason</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="resolvedDiagnosticReason"><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#resolvedDiagnosticReason"><span class="hs-identifier hs-var hs-var">resolvedDiagnosticReason</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span class="annot"><span class="hs-comment">-- | The single warning case 'DiagnosticReason' is very common.</span></span><span>
</span><span id="line-397"></span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlag"><span class="hs-identifier hs-type">WarningWithFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span>
</span><span id="line-398"></span><span class="hs-keyword">pattern</span><span> </span><span id="WarningWithFlag"><span id="%24mWarningWithFlag"><span id="%24bWarningWithFlag"><span class="annot"><span class="annottext">$mWarningWithFlag :: forall {r}.
DiagnosticReason -&gt; (WarningFlag -&gt; r) -&gt; ((# #) -&gt; r) -&gt; r
$bWarningWithFlag :: WarningFlag -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithFlag"><span class="hs-identifier hs-var hs-var hs-var">WarningWithFlag</span></a></span></span></span></span><span> </span><span class="annot"><a href="#local-6989586621682671341"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-type">WarningWithFlags</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671341"><span class="annot"><a href="#local-6989586621682671341"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">{- Note [Warnings controlled by multiple flags]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Diagnostics that started life as flag-controlled warnings have a
'diagnosticReason' of 'WarningWithFlags', giving the flags that control the
warning. Usually there is only one flag, but in a few cases multiple flags
apply. Where there are more than one, they are listed highest-priority first.

For example, the same exported binding may give rise to a warning if either
`-Wmissing-signatures` or `-Wmissing-exported-signatures` is enabled. Here
`-Wmissing-signatures` has higher priority, because we want to mention it if
before are enabled.  See `missingSignatureWarningFlags` for the specific logic
in this case.

When reporting such a warning to the user, it is important to mention the
correct flag (e.g. `-Wmissing-signatures` if it is enabled, or
`-Wmissing-exported-signatures` if only the latter is enabled).  Thus
`diag_reason_severity` filters the `DiagnosticReason` based on the currently
active `DiagOpts`. For a `WarningWithFlags` it returns only the flags that are
enabled; it leaves other `DiagnosticReason`s unchanged. This is then wrapped
in a `ResolvedDiagnosticReason` newtype which records that this filtering has
taken place.

If we have `-Wmissing-signatures -Werror=missing-exported-signatures` we want
the error to mention `-Werror=missing-exported-signatures` (even though
`-Wmissing-signatures` would normally take precedence). Thus if there are any
fatal warnings, `diag_reason_severity` returns those alone.

The `MsgEnvelope` stores the filtered `ResolvedDiagnosticReason` listing only the
relevant flags for subsequent display.


Side note: we do not treat `-Wmissing-signatures` as a warning group that
includes `-Wmissing-exported-signatures`, because

  (a) this would require us to provide a flag for the complement, and

  (b) currently, in `-Wmissing-exported-signatures -Wno-missing-signatures`, the
      latter option does not switch off the former.
-}</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-441"></span><span>  </span><span id="local-6989586621682671352"><span class="annot"><span class="annottext">ppr :: DiagnosticReason -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-442"></span><span>    </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WarningWithoutFlag&quot;</span></span><span>
</span><span id="line-443"></span><span>    </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-type">WarningWithFlags</span></a></span><span> </span><span id="local-6989586621682671353"><span class="annot"><span class="annottext">NonEmpty WarningFlag
</span><a href="#local-6989586621682671353"><span class="hs-identifier hs-var">wf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WarningWithFlags &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty WarningFlag -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty WarningFlag
</span><a href="#local-6989586621682671353"><span class="hs-identifier hs-var">wf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>    </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithCategory"><span class="hs-identifier hs-type">WarningWithCategory</span></a></span><span> </span><span id="local-6989586621682671355"><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671355"><span class="hs-identifier hs-var">cat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WarningWithCategory&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671355"><span class="hs-identifier hs-var">cat</span></a></span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ErrorWithoutFlag&quot;</span></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-type">ResolvedDiagnosticReason</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621682671358"><span class="annot"><span class="annottext">ppr :: ResolvedDiagnosticReason -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticReason -&gt; SDoc)
-&gt; (ResolvedDiagnosticReason -&gt; DiagnosticReason)
-&gt; ResolvedDiagnosticReason
-&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#resolvedDiagnosticReason"><span class="hs-identifier hs-var">resolvedDiagnosticReason</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">-- | An envelope for GHC's facts about a running program, parameterised over the</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- /domain-specific/ (i.e. parsing, typecheck-renaming, etc) diagnostics.</span><span>
</span><span id="line-452"></span><span class="hs-comment">--</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- To say things differently, GHC emits /diagnostics/ about the running</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- program, each of which is wrapped into a 'MsgEnvelope' that carries</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- specific information like where the error happened, etc. Finally, multiple</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- 'MsgEnvelope's are aggregated into 'Messages' that are returned to the</span><span>
</span><span id="line-457"></span><span class="hs-comment">-- user.</span><span>
</span><span id="line-458"></span><span class="hs-keyword">data</span><span> </span><span id="MsgEnvelope"><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-var">MsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621682670612"><span class="annot"><a href="#local-6989586621682670612"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MsgEnvelope"><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-var">MsgEnvelope</span></a></span></span><span>
</span><span id="line-459"></span><span>   </span><span class="hs-special">{</span><span> </span><span id="errMsgSpan"><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var hs-var">errMsgSpan</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-460"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ The SrcSpan is used for sorting errors into line-number order</span></span><span>
</span><span id="line-461"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="errMsgContext"><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; NamePprCtx
</span><a href="GHC.Types.Error.html#errMsgContext"><span class="hs-identifier hs-var hs-var">errMsgContext</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span>
</span><span id="line-462"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="errMsgDiagnostic"><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var hs-var">errMsgDiagnostic</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682670612"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-463"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="errMsgSeverity"><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var hs-var">errMsgSeverity</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span>
</span><span id="line-464"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="errMsgReason"><span class="annot"><span class="annottext">forall e. MsgEnvelope e -&gt; ResolvedDiagnosticReason
</span><a href="GHC.Types.Error.html#errMsgReason"><span class="hs-identifier hs-var hs-var">errMsgReason</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-type">ResolvedDiagnosticReason</span></a></span><span>
</span><span id="line-465"></span><span>      </span><span class="hs-comment">-- ^ The actual reason caused this message</span><span>
</span><span id="line-466"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-467"></span><span>      </span><span class="hs-comment">-- See Note [Warnings controlled by multiple flags]</span><span>
</span><span id="line-468"></span><span>   </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671363"><span id="local-6989586621682671365"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; MsgEnvelope a -&gt; MsgEnvelope b)
-&gt; (forall a b. a -&gt; MsgEnvelope b -&gt; MsgEnvelope a)
-&gt; Functor MsgEnvelope
forall a b. a -&gt; MsgEnvelope b -&gt; MsgEnvelope a
forall a b. (a -&gt; b) -&gt; MsgEnvelope a -&gt; MsgEnvelope b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; MsgEnvelope a -&gt; MsgEnvelope b
fmap :: forall a b. (a -&gt; b) -&gt; MsgEnvelope a -&gt; MsgEnvelope b
$c&lt;$ :: forall a b. a -&gt; MsgEnvelope b -&gt; MsgEnvelope a
&lt;$ :: forall a b. a -&gt; MsgEnvelope b -&gt; MsgEnvelope a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671367"><span id="local-6989586621682671372"><span id="local-6989586621682671375"><span id="local-6989586621682671380"><span id="local-6989586621682671382"><span id="local-6989586621682671385"><span id="local-6989586621682671388"><span id="local-6989586621682671391"><span id="local-6989586621682671394"><span id="local-6989586621682671397"><span id="local-6989586621682671400"><span id="local-6989586621682671402"><span id="local-6989586621682671405"><span id="local-6989586621682671410"><span id="local-6989586621682671415"><span id="local-6989586621682671420"><span id="local-6989586621682671425"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; MsgEnvelope m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a)
-&gt; (forall a. MsgEnvelope a -&gt; [a])
-&gt; (forall e. MsgEnvelope e -&gt; Bool)
-&gt; (forall a. MsgEnvelope a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; MsgEnvelope a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; MsgEnvelope a -&gt; a)
-&gt; (forall a. Ord a =&gt; MsgEnvelope a -&gt; a)
-&gt; (forall a. Num a =&gt; MsgEnvelope a -&gt; a)
-&gt; (forall a. Num a =&gt; MsgEnvelope a -&gt; a)
-&gt; Foldable MsgEnvelope
forall a. Eq a =&gt; a -&gt; MsgEnvelope a -&gt; Bool
forall a. Num a =&gt; MsgEnvelope a -&gt; a
forall a. Ord a =&gt; MsgEnvelope a -&gt; a
forall m. Monoid m =&gt; MsgEnvelope m -&gt; m
forall e. MsgEnvelope e -&gt; Bool
forall a. MsgEnvelope a -&gt; Int
forall a. MsgEnvelope a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; MsgEnvelope m -&gt; m
fold :: forall m. Monoid m =&gt; MsgEnvelope m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; MsgEnvelope a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; MsgEnvelope a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; MsgEnvelope a -&gt; a
$ctoList :: forall a. MsgEnvelope a -&gt; [a]
toList :: forall a. MsgEnvelope a -&gt; [a]
$cnull :: forall e. MsgEnvelope e -&gt; Bool
null :: forall e. MsgEnvelope e -&gt; Bool
$clength :: forall a. MsgEnvelope a -&gt; Int
length :: forall a. MsgEnvelope a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; MsgEnvelope a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; MsgEnvelope a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; MsgEnvelope a -&gt; a
maximum :: forall a. Ord a =&gt; MsgEnvelope a -&gt; a
$cminimum :: forall a. Ord a =&gt; MsgEnvelope a -&gt; a
minimum :: forall a. Ord a =&gt; MsgEnvelope a -&gt; a
$csum :: forall a. Num a =&gt; MsgEnvelope a -&gt; a
sum :: forall a. Num a =&gt; MsgEnvelope a -&gt; a
$cproduct :: forall a. Num a =&gt; MsgEnvelope a -&gt; a
product :: forall a. Num a =&gt; MsgEnvelope a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671434"><span id="local-6989586621682671439"><span id="local-6989586621682671444"><span id="local-6989586621682671449"><span class="annot"><span class="annottext">Functor MsgEnvelope
Foldable MsgEnvelope
(Functor MsgEnvelope, Foldable MsgEnvelope) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; MsgEnvelope a -&gt; f (MsgEnvelope b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    MsgEnvelope (f a) -&gt; f (MsgEnvelope a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; MsgEnvelope a -&gt; m (MsgEnvelope b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    MsgEnvelope (m a) -&gt; m (MsgEnvelope a))
-&gt; Traversable MsgEnvelope
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
MsgEnvelope (m a) -&gt; m (MsgEnvelope a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
MsgEnvelope (f a) -&gt; f (MsgEnvelope a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; MsgEnvelope a -&gt; m (MsgEnvelope b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; MsgEnvelope a -&gt; f (MsgEnvelope b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; MsgEnvelope a -&gt; f (MsgEnvelope b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; MsgEnvelope a -&gt; f (MsgEnvelope b)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
MsgEnvelope (f a) -&gt; f (MsgEnvelope a)
sequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
MsgEnvelope (f a) -&gt; f (MsgEnvelope a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; MsgEnvelope a -&gt; m (MsgEnvelope b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; MsgEnvelope a -&gt; m (MsgEnvelope b)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
MsgEnvelope (m a) -&gt; m (MsgEnvelope a)
sequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
MsgEnvelope (m a) -&gt; m (MsgEnvelope a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-comment">-- | The class for a diagnostic message. The main purpose is to classify a</span><span>
</span><span id="line-471"></span><span class="hs-comment">-- message within GHC, to distinguish it from a debug/dump message vs a proper</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- diagnostic, for which we include a 'DiagnosticReason'.</span><span>
</span><span id="line-473"></span><span class="hs-keyword">data</span><span> </span><span id="MessageClass"><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-var">MessageClass</span></a></span></span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MCOutput"><span class="annot"><a href="GHC.Types.Error.html#MCOutput"><span class="hs-identifier hs-var">MCOutput</span></a></span></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCFatal"><span class="annot"><a href="GHC.Types.Error.html#MCFatal"><span class="hs-identifier hs-var">MCFatal</span></a></span></span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCInteractive"><span class="annot"><a href="GHC.Types.Error.html#MCInteractive"><span class="hs-identifier hs-var">MCInteractive</span></a></span></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCDump"><span class="annot"><a href="GHC.Types.Error.html#MCDump"><span class="hs-identifier hs-var">MCDump</span></a></span></span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-comment">-- ^ Log message intended for compiler developers</span><span>
</span><span id="line-480"></span><span>    </span><span class="hs-comment">-- No file\/line\/column stuff</span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCInfo"><span class="annot"><a href="GHC.Types.Error.html#MCInfo"><span class="hs-identifier hs-var">MCInfo</span></a></span></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-comment">-- ^ Log messages intended for end users.</span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-comment">-- No file\/line\/column stuff.</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCDiagnostic"><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-var">MCDiagnostic</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-type">ResolvedDiagnosticReason</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-comment">-- ^ Diagnostics from the compiler. This constructor is very powerful as</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-comment">-- it allows the construction of a 'MessageClass' with a completely</span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-comment">-- arbitrary permutation of 'Severity' and 'DiagnosticReason'. As such,</span><span>
</span><span id="line-490"></span><span>    </span><span class="hs-comment">-- users are encouraged to use the 'mkMCDiagnostic' smart constructor</span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-comment">-- instead. Use this constructor directly only if you need to construct</span><span>
</span><span id="line-492"></span><span>    </span><span class="hs-comment">-- and manipulate diagnostic messages directly, for example inside</span><span>
</span><span id="line-493"></span><span>    </span><span class="hs-comment">-- 'GHC.Utils.Error'. In all the other circumstances, /especially/ when</span><span>
</span><span id="line-494"></span><span>    </span><span class="hs-comment">-- emitting compiler diagnostics, use the smart constructor.</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-comment">-- The @Maybe 'DiagnosticCode'@ field carries a code (if available) for</span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-comment">-- this diagnostic. If you are creating a message not tied to any</span><span>
</span><span id="line-498"></span><span>    </span><span class="hs-comment">-- error-message type, then use Nothing. In the long run, this really</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-comment">-- should always have a 'DiagnosticCode'. See Note [Diagnostic codes].</span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-comment">{-
Note [Suppressing Messages]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
The 'SevIgnore' constructor is used to generate messages for diagnostics which
are meant to be suppressed and not reported to the user: the classic example
are warnings for which the user didn't enable the corresponding 'WarningFlag',
so GHC shouldn't print them.

A different approach would be to extend the zoo of 'mkMsgEnvelope' functions
to return a 'Maybe (MsgEnvelope e)', so that we won't need to even create the
message to begin with. Both approaches have been evaluated, but we settled on
the &quot;SevIgnore one&quot; for a number of reasons:

* It's less invasive to deal with;
* It plays slightly better with deferred diagnostics (see 'GHC.Tc.Errors') as
  for those we need to be able to /always/ produce a message (so that is
  reported at runtime);
* It gives us more freedom: we can still decide to drop a 'SevIgnore' message
  at leisure, or we can decide to keep it around until the last moment. Maybe
  in the future we would need to turn a 'SevIgnore' into something else, for
  example to &quot;unsuppress&quot; diagnostics if a flag is set: with this approach, we
  have more leeway to accommodate new features.

-}</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span class="hs-comment">-- | Used to describe warnings and errors</span><span>
</span><span id="line-528"></span><span class="hs-comment">--   o The message has a file\/line\/column heading,</span><span>
</span><span id="line-529"></span><span class="hs-comment">--     plus &quot;warning:&quot; or &quot;error:&quot;,</span><span>
</span><span id="line-530"></span><span class="hs-comment">--     added by mkLocMessage</span><span>
</span><span id="line-531"></span><span class="hs-comment">--   o With 'SevIgnore' the message is suppressed</span><span>
</span><span id="line-532"></span><span class="hs-comment">--   o Output is intended for end users</span><span>
</span><span id="line-533"></span><span class="hs-keyword">data</span><span> </span><span id="Severity"><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-var">Severity</span></a></span></span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SevIgnore"><span class="annot"><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span></span><span>
</span><span id="line-535"></span><span>  </span><span class="hs-comment">-- ^ Ignore this message, for example in</span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-comment">-- case of suppression of warnings users</span><span>
</span><span id="line-537"></span><span>  </span><span class="hs-comment">-- don't want to see. See Note [Suppressing Messages]</span><span>
</span><span id="line-538"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SevWarning"><span class="annot"><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span></span><span>
</span><span id="line-539"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SevError"><span class="annot"><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span></span><span>
</span><span id="line-540"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671463"><span id="local-6989586621682671467"><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
(Severity -&gt; Severity -&gt; Bool)
-&gt; (Severity -&gt; Severity -&gt; Bool) -&gt; Eq Severity
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Severity -&gt; Severity -&gt; Bool
== :: Severity -&gt; Severity -&gt; Bool
$c/= :: Severity -&gt; Severity -&gt; Bool
/= :: Severity -&gt; Severity -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671472"><span id="local-6989586621682671476"><span id="local-6989586621682671480"><span id="local-6989586621682671484"><span id="local-6989586621682671487"><span id="local-6989586621682671490"><span id="local-6989586621682671493"><span class="annot"><span class="annottext">Eq Severity
Eq Severity =&gt;
(Severity -&gt; Severity -&gt; Ordering)
-&gt; (Severity -&gt; Severity -&gt; Bool)
-&gt; (Severity -&gt; Severity -&gt; Bool)
-&gt; (Severity -&gt; Severity -&gt; Bool)
-&gt; (Severity -&gt; Severity -&gt; Bool)
-&gt; (Severity -&gt; Severity -&gt; Severity)
-&gt; (Severity -&gt; Severity -&gt; Severity)
-&gt; Ord Severity
Severity -&gt; Severity -&gt; Bool
Severity -&gt; Severity -&gt; Ordering
Severity -&gt; Severity -&gt; Severity
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Severity -&gt; Severity -&gt; Ordering
compare :: Severity -&gt; Severity -&gt; Ordering
$c&lt; :: Severity -&gt; Severity -&gt; Bool
&lt; :: Severity -&gt; Severity -&gt; Bool
$c&lt;= :: Severity -&gt; Severity -&gt; Bool
&lt;= :: Severity -&gt; Severity -&gt; Bool
$c&gt; :: Severity -&gt; Severity -&gt; Bool
&gt; :: Severity -&gt; Severity -&gt; Bool
$c&gt;= :: Severity -&gt; Severity -&gt; Bool
&gt;= :: Severity -&gt; Severity -&gt; Bool
$cmax :: Severity -&gt; Severity -&gt; Severity
max :: Severity -&gt; Severity -&gt; Severity
$cmin :: Severity -&gt; Severity -&gt; Severity
min :: Severity -&gt; Severity -&gt; Severity
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671501"><span id="local-6989586621682671503"><span id="local-6989586621682671507"><span class="annot"><span class="annottext">Int -&gt; Severity -&gt; ShowS
[Severity] -&gt; ShowS
Severity -&gt; String
(Int -&gt; Severity -&gt; ShowS)
-&gt; (Severity -&gt; String) -&gt; ([Severity] -&gt; ShowS) -&gt; Show Severity
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Severity -&gt; ShowS
showsPrec :: Int -&gt; Severity -&gt; ShowS
$cshow :: Severity -&gt; String
show :: Severity -&gt; String
$cshowList :: [Severity] -&gt; ShowS
showList :: [Severity] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>  </span><span id="local-6989586621682671514"><span class="annot"><span class="annottext">ppr :: Severity -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-544"></span><span>    </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SevIgnore&quot;</span></span><span>
</span><span id="line-545"></span><span>    </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SevWarning&quot;</span></span><span>
</span><span id="line-546"></span><span>    </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SevError&quot;</span></span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#ToJson"><span class="hs-identifier hs-type">ToJson</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-549"></span><span>  </span><span id="local-6989586621682671517"><span class="annot"><span class="annottext">json :: Severity -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var hs-var hs-var">json</span></a></span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ignore&quot;</span></span><span>
</span><span id="line-550"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Warning&quot;</span></span><span>
</span><span id="line-551"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error&quot;</span></span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#ToJson"><span class="hs-identifier hs-type">ToJson</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-554"></span><span>  </span><span id="local-6989586621682671530"><span class="annot"><span class="annottext">json :: MessageClass -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var hs-var hs-var">json</span></a></span></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCOutput"><span class="hs-identifier hs-var">MCOutput</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCOutput&quot;</span></span><span>
</span><span id="line-555"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCFatal"><span class="hs-identifier hs-var">MCFatal</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCFatal&quot;</span></span><span>
</span><span id="line-556"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCInteractive"><span class="hs-identifier hs-var">MCInteractive</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCInteractive&quot;</span></span><span>
</span><span id="line-557"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCDump"><span class="hs-identifier hs-var">MCDump</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCDump&quot;</span></span><span>
</span><span id="line-558"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCInfo"><span class="hs-identifier hs-var">MCInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCInfo&quot;</span></span><span>
</span><span id="line-559"></span><span>  </span><span class="annot"><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span id="local-6989586621682671531"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621682671531"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span id="local-6989586621682671532"><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671532"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621682671533"><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621682671533"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-560"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; JsonDoc) -&gt; String -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#renderWithContext"><span class="hs-identifier hs-var">renderWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="GHC.Utils.Outputable.html#defaultSDocContext"><span class="hs-identifier hs-var">defaultSDocContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCDiagnostic&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621682671531"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671532"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621682671533"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#ToJson"><span class="hs-identifier hs-type">ToJson</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-563"></span><span>  </span><span id="local-6989586621682671541"><span class="annot"><span class="annottext">json :: DiagnosticCode -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var hs-var hs-var">json</span></a></span></span><span> </span><span id="local-6989586621682671542"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671542"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSInt"><span class="hs-identifier hs-var">JSInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticCode -&gt; Natural
</span><a href="GHC.Types.Error.html#diagnosticCodeNumber"><span class="hs-identifier hs-var">diagnosticCodeNumber</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671542"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-comment">{- Note [Diagnostic Message JSON Schema]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The below instance of ToJson must conform to the JSON schema
specified in docs/users_guide/diagnostics-as-json-schema-1_1.json.
When the schema is altered, please bump the version.
If the content is altered in a backwards compatible way,
update the minor version (e.g. 1.3 ~&gt; 1.4).
If the content is breaking, update the major version (e.g. 1.3 ~&gt; 2.0).
When updating the schema, replace the above file and name it appropriately with
the version appended, and change the documentation of the -fdiagnostics-as-json
flag to reflect the new schema.
To learn more about JSON schemas, check out the below link:
https://json-schema.org
-}</span><span>
</span><span id="line-579"></span><span>
</span><span id="line-580"></span><span class="annot"><a href="GHC.Types.Error.html#schemaVersion"><span class="hs-identifier hs-type">schemaVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-581"></span><span id="schemaVersion"><span class="annot"><span class="annottext">schemaVersion :: String
</span><a href="GHC.Types.Error.html#schemaVersion"><span class="hs-identifier hs-var hs-var">schemaVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;1.1&quot;</span></span><span>
</span><span id="line-582"></span><span class="hs-comment">-- See Note [Diagnostic Message JSON Schema] before editing!</span><span>
</span><span id="line-583"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682670635"><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670635"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#ToJson"><span class="hs-identifier hs-type">ToJson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670635"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-584"></span><span>  </span><span id="local-6989586621682671559"><span class="annot"><span class="annottext">json :: MsgEnvelope e -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var hs-var hs-var">json</span></a></span></span><span> </span><span id="local-6989586621682671560"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, JsonDoc)] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSObject"><span class="hs-identifier hs-var">JSObject</span></a></span><span> </span><span class="annot"><span class="annottext">([(String, JsonDoc)] -&gt; JsonDoc) -&gt; [(String, JsonDoc)] -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;version&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="GHC.Types.Error.html#schemaVersion"><span class="hs-identifier hs-var">schemaVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-586"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghcVersion&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; JsonDoc) -&gt; String -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghc-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="../../ghc-boot-9.12.2-1a37/src/GHC.Version.html#cProjectVersion"><span class="hs-identifier hs-var">cProjectVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;span&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; JsonDoc
forall a. ToJson a =&gt; a -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; JsonDoc) -&gt; SrcSpan -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; SrcSpan
forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;severity&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; JsonDoc
forall a. ToJson a =&gt; a -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="annot"><span class="annottext">(Severity -&gt; JsonDoc) -&gt; Severity -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Severity
forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;code&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JsonDoc
-&gt; (DiagnosticCode -&gt; JsonDoc) -&gt; Maybe DiagnosticCode -&gt; JsonDoc
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">JsonDoc
</span><a href="GHC.Utils.Json.html#JSNull"><span class="hs-identifier hs-var">JSNull</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; JsonDoc
forall a. ToJson a =&gt; a -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#json"><span class="hs-identifier hs-var">json</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Maybe DiagnosticCode
forall a. Diagnostic a =&gt; a -&gt; Maybe DiagnosticCode
</span><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-var">diagnosticCode</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671564"><span class="hs-identifier hs-var">diag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;message&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[JsonDoc] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSArray"><span class="hs-identifier hs-var">JSArray</span></a></span><span> </span><span class="annot"><span class="annottext">([JsonDoc] -&gt; JsonDoc) -&gt; [JsonDoc] -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; JsonDoc) -&gt; [SDoc] -&gt; [JsonDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; JsonDoc
</span><a href="#local-6989586621682671565"><span class="hs-identifier hs-var">renderToJSString</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621682671566"><span class="hs-identifier hs-var">diagMsg</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hints&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[JsonDoc] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSArray"><span class="hs-identifier hs-var">JSArray</span></a></span><span> </span><span class="annot"><span class="annottext">([JsonDoc] -&gt; JsonDoc) -&gt; [JsonDoc] -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GhcHint -&gt; JsonDoc) -&gt; [GhcHint] -&gt; [JsonDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; JsonDoc
</span><a href="#local-6989586621682671565"><span class="hs-identifier hs-var">renderToJSString</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; JsonDoc) -&gt; (GhcHint -&gt; SDoc) -&gt; GhcHint -&gt; JsonDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GhcHint -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; [GhcHint]
forall a. Diagnostic a =&gt; a -&gt; [GhcHint]
</span><a href="GHC.Types.Error.html#diagnosticHints"><span class="hs-identifier hs-var">diagnosticHints</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671564"><span class="hs-identifier hs-var">diag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-592"></span><span>    </span><span class="annot"><span class="annottext">[(String, JsonDoc)] -&gt; [(String, JsonDoc)] -&gt; [(String, JsonDoc)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reason&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">JsonDoc
</span><a href="#local-6989586621682671567"><span class="hs-identifier hs-var">reasonJson</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682671567"><span class="annot"><span class="annottext">JsonDoc
</span><a href="#local-6989586621682671567"><span class="hs-identifier hs-var">reasonJson</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe JsonDoc -&gt; [JsonDoc]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe JsonDoc -&gt; [JsonDoc]) -&gt; Maybe JsonDoc -&gt; [JsonDoc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; Maybe JsonDoc
</span><a href="#local-6989586621682671568"><span class="hs-identifier hs-var">usefulReasonJson_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; ResolvedDiagnosticReason
forall e. MsgEnvelope e -&gt; ResolvedDiagnosticReason
</span><a href="GHC.Types.Error.html#errMsgReason"><span class="hs-identifier hs-var">errMsgReason</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-594"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-595"></span><span>      </span><span id="local-6989586621682671564"><span class="annot"><span class="annottext">diag :: e
</span><a href="#local-6989586621682671564"><span class="hs-identifier hs-var hs-var">diag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; e
forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-596"></span><span>      </span><span id="local-6989586621682671569"><span class="annot"><span class="annottext">opts :: DiagnosticOpts e
</span><a href="#local-6989586621682671569"><span class="hs-identifier hs-var hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall opts.
HasDefaultDiagnosticOpts (DiagnosticOpts opts) =&gt;
DiagnosticOpts opts
</span><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-var">defaultDiagnosticOpts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682670635"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-597"></span><span>      </span><span id="local-6989586621682671570"><span class="annot"><span class="annottext">style :: PprStyle
</span><a href="#local-6989586621682671570"><span class="hs-identifier hs-var hs-var">style</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamePprCtx -&gt; PprStyle
</span><a href="GHC.Utils.Outputable.html#mkErrStyle"><span class="hs-identifier hs-var">mkErrStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; NamePprCtx
forall e. MsgEnvelope e -&gt; NamePprCtx
</span><a href="GHC.Types.Error.html#errMsgContext"><span class="hs-identifier hs-var">errMsgContext</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621682671560"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>      </span><span id="local-6989586621682671572"><span class="annot"><span class="annottext">ctx :: SDocContext
</span><a href="#local-6989586621682671572"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="GHC.Utils.Outputable.html#defaultSDocContext"><span class="hs-identifier hs-var">defaultSDocContext</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Utils.Outputable.html#sdocStyle"><span class="hs-identifier hs-var">sdocStyle</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682671570"><span class="hs-identifier hs-type">style</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-599"></span><span>      </span><span id="local-6989586621682671566"><span class="annot"><span class="annottext">diagMsg :: [SDoc]
</span><a href="#local-6989586621682671566"><span class="hs-identifier hs-var hs-var">diagMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool) -&gt; [SDoc] -&gt; [SDoc]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (SDoc -&gt; Bool) -&gt; SDoc -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#isEmpty"><span class="hs-identifier hs-var">isEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621682671572"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var">unDecorated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; e -&gt; DecoratedSDoc
forall a. Diagnostic a =&gt; DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var">diagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621682671569"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621682671564"><span class="hs-identifier hs-var">diag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>      </span><span class="annot"><a href="#local-6989586621682671565"><span class="hs-identifier hs-type">renderToJSString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#JsonDoc"><span class="hs-identifier hs-type">JsonDoc</span></a></span><span>
</span><span id="line-601"></span><span>      </span><span id="local-6989586621682671565"><span class="annot"><span class="annottext">renderToJSString :: SDoc -&gt; JsonDoc
</span><a href="#local-6989586621682671565"><span class="hs-identifier hs-var hs-var">renderToJSString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; JsonDoc) -&gt; (SDoc -&gt; String) -&gt; SDoc -&gt; JsonDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#renderWithContext"><span class="hs-identifier hs-var">renderWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621682671572"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span>      </span><span class="annot"><a href="#local-6989586621682671568"><span class="hs-identifier hs-type">usefulReasonJson_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-type">ResolvedDiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Utils.Json.html#JsonDoc"><span class="hs-identifier hs-type">JsonDoc</span></a></span><span>
</span><span id="line-604"></span><span>      </span><span id="local-6989586621682671568"><span class="annot"><span class="annottext">usefulReasonJson_maybe :: ResolvedDiagnosticReason -&gt; Maybe JsonDoc
</span><a href="#local-6989586621682671568"><span class="hs-identifier hs-var hs-var">usefulReasonJson_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#ResolvedDiagnosticReason"><span class="hs-identifier hs-type">ResolvedDiagnosticReason</span></a></span><span> </span><span id="local-6989586621682671576"><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671576"><span class="hs-identifier hs-var">rea</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-605"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621682671576"><span class="hs-identifier hs-var">rea</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-606"></span><span>          </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe JsonDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-607"></span><span>          </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe JsonDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-608"></span><span>          </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-type">WarningWithFlags</span></a></span><span> </span><span id="local-6989586621682671577"><span class="annot"><span class="annottext">NonEmpty WarningFlag
</span><a href="#local-6989586621682671577"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-609"></span><span>            </span><span class="annot"><span class="annottext">JsonDoc -&gt; Maybe JsonDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(JsonDoc -&gt; Maybe JsonDoc) -&gt; JsonDoc -&gt; Maybe JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(String, JsonDoc)] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSObject"><span class="hs-identifier hs-var">JSObject</span></a></span><span>
</span><span id="line-610"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;flags&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[JsonDoc] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSArray"><span class="hs-identifier hs-var">JSArray</span></a></span><span> </span><span class="annot"><span class="annottext">([JsonDoc] -&gt; JsonDoc) -&gt; [JsonDoc] -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(WarningFlag -&gt; JsonDoc) -&gt; [WarningFlag] -&gt; [JsonDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; JsonDoc)
-&gt; (WarningFlag -&gt; String) -&gt; WarningFlag -&gt; JsonDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty String -&gt; String
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty String -&gt; String)
-&gt; (WarningFlag -&gt; NonEmpty String) -&gt; WarningFlag -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; NonEmpty String
</span><a href="GHC.Driver.Flags.html#warnFlagNames"><span class="hs-identifier hs-var">warnFlagNames</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty WarningFlag -&gt; [WarningFlag]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty WarningFlag
</span><a href="#local-6989586621682671577"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-612"></span><span>          </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithCategory"><span class="hs-identifier hs-type">WarningWithCategory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#WarningCategory"><span class="hs-identifier hs-type">WarningCategory</span></a></span><span> </span><span id="local-6989586621682671582"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682671582"><span class="hs-identifier hs-var">cat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-613"></span><span>            </span><span class="annot"><span class="annottext">JsonDoc -&gt; Maybe JsonDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(JsonDoc -&gt; Maybe JsonDoc) -&gt; JsonDoc -&gt; Maybe JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(String, JsonDoc)] -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSObject"><span class="hs-identifier hs-var">JSObject</span></a></span><span>
</span><span id="line-614"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;category&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; JsonDoc
</span><a href="GHC.Utils.Json.html#JSString"><span class="hs-identifier hs-var">JSString</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; JsonDoc) -&gt; String -&gt; JsonDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682671582"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-615"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682671584"><span id="local-6989586621682671589"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticMessage"><span class="hs-identifier hs-type">DiagnosticMessage</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-618"></span><span>    </span><span id="local-6989586621682671592"><span class="annot"><span class="annottext">show :: MsgEnvelope DiagnosticMessage -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope DiagnosticMessage -&gt; String
forall a. Diagnostic a =&gt; MsgEnvelope a -&gt; String
</span><a href="GHC.Types.Error.html#showMsgEnvelope"><span class="hs-identifier hs-var">showMsgEnvelope</span></a></span><span>
</span><span id="line-619"></span><span>
</span><span id="line-620"></span><span class="annot"><span class="hs-comment">-- | Shows an 'MsgEnvelope'. Only use this for debugging.</span></span><span>
</span><span id="line-621"></span><span class="annot"><a href="GHC.Types.Error.html#showMsgEnvelope"><span class="hs-identifier hs-type">showMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682670729"><span class="annot"><a href="#local-6989586621682670729"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670729"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670729"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-622"></span><span id="showMsgEnvelope"><span class="annot"><span class="annottext">showMsgEnvelope :: forall a. Diagnostic a =&gt; MsgEnvelope a -&gt; String
</span><a href="GHC.Types.Error.html#showMsgEnvelope"><span class="hs-identifier hs-var hs-var">showMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621682671599"><span class="annot"><span class="annottext">MsgEnvelope a
</span><a href="#local-6989586621682671599"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-623"></span><span>  </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#renderWithContext"><span class="hs-identifier hs-var">renderWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="GHC.Utils.Outputable.html#defaultSDocContext"><span class="hs-identifier hs-var">defaultSDocContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var">unDecorated</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoratedSDoc -&gt; [SDoc]) -&gt; (a -&gt; DecoratedSDoc) -&gt; a -&gt; [SDoc]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
forall a. Diagnostic a =&gt; DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var">diagnosticMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall opts.
HasDefaultDiagnosticOpts (DiagnosticOpts opts) =&gt;
DiagnosticOpts opts
</span><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-var">defaultDiagnosticOpts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621682670729"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a -&gt; [SDoc]) -&gt; a -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope a -&gt; a
forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope a
</span><a href="#local-6989586621682671599"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="annot"><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier hs-type">pprMessageBag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-626"></span><span id="pprMessageBag"><span class="annot"><span class="annottext">pprMessageBag :: Bag SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier hs-var hs-var">pprMessageBag</span></a></span></span><span> </span><span id="local-6989586621682671600"><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621682671600"><span class="hs-identifier hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; [SDoc] -&gt; [SDoc]
forall doc. IsLine doc =&gt; doc -&gt; [doc] -&gt; [doc]
</span><a href="GHC.Utils.Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#blankLine"><span class="hs-identifier hs-var">blankLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag SDoc -&gt; [SDoc]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag SDoc
</span><a href="#local-6989586621682671600"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier hs-type">mkLocMessage</span></a></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span>                       </span><span class="annot"><span class="hs-comment">-- ^ What kind of message?</span></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>                            </span><span class="annot"><span class="hs-comment">-- ^ location</span></span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>                               </span><span class="annot"><span class="hs-comment">-- ^ message</span></span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-633"></span><span id="mkLocMessage"><span class="annot"><span class="annottext">mkLocMessage :: MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier hs-var hs-var">mkLocMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessageWarningGroups"><span class="hs-identifier hs-var">mkLocMessageWarningGroups</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-634"></span><span>
</span><span id="line-635"></span><span class="hs-comment">-- | Make an error message with location info, specifying whether to show</span><span>
</span><span id="line-636"></span><span class="hs-comment">-- warning groups (if applicable).</span><span>
</span><span id="line-637"></span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessageWarningGroups"><span class="hs-identifier hs-type">mkLocMessageWarningGroups</span></a></span><span>
</span><span id="line-638"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                               </span><span class="annot"><span class="hs-comment">-- ^ Print warning groups (if applicable)?</span></span><span>
</span><span id="line-639"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span>                       </span><span class="annot"><span class="hs-comment">-- ^ What kind of message?</span></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>                            </span><span class="annot"><span class="hs-comment">-- ^ location</span></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>                               </span><span class="annot"><span class="hs-comment">-- ^ message</span></span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-comment">-- Always print the location, even if it is unhelpful.  Error messages</span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-comment">-- are supposed to be in a standard format, and one without a location</span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-comment">-- would look strange.  Better to say explicitly &quot;&lt;no location info&gt;&quot;.</span><span>
</span><span id="line-646"></span><span id="mkLocMessageWarningGroups"><span class="annot"><span class="annottext">mkLocMessageWarningGroups :: Bool -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessageWarningGroups"><span class="hs-identifier hs-var hs-var">mkLocMessageWarningGroups</span></a></span></span><span> </span><span id="local-6989586621682671603"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671603"><span class="hs-identifier hs-var">show_warn_groups</span></a></span></span><span> </span><span id="local-6989586621682671604"><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671604"><span class="hs-identifier hs-var">msg_class</span></a></span></span><span> </span><span id="local-6989586621682671605"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682671605"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621682671606"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671606"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-647"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; Scheme) -&gt; (Scheme -&gt; SDoc) -&gt; SDoc
forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Scheme
</span><a href="GHC.Utils.Outputable.html#sdocColScheme"><span class="hs-identifier hs-var">sdocColScheme</span></a></span><span> </span><span class="annot"><span class="annottext">((Scheme -&gt; SDoc) -&gt; SDoc) -&gt; (Scheme -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682671609"><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671609"><span class="hs-identifier hs-var">col_scheme</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-648"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682671610"><span class="annot"><span class="annottext">locn' :: SDoc
</span><a href="#local-6989586621682671610"><span class="hs-identifier hs-var hs-var">locn'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; Bool) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocErrorSpans"><span class="hs-identifier hs-var">sdocErrorSpans</span></a></span><span> </span><span class="annot"><span class="annottext">((Bool -&gt; SDoc) -&gt; SDoc) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-649"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682671605"><span class="hs-identifier hs-var">locn</span></a></span><span>
</span><span id="line-650"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanStart"><span class="hs-identifier hs-var">srcSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682671605"><span class="hs-identifier hs-var">locn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-651"></span><span>
</span><span id="line-652"></span><span>          </span><span id="local-6989586621682671613"><span class="annot"><span class="annottext">msg_colour :: PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var hs-var">msg_colour</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MessageClass -&gt; Scheme -&gt; PprColour
</span><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var">getMessageClassColour</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671604"><span class="hs-identifier hs-var">msg_class</span></a></span><span> </span><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671609"><span class="hs-identifier hs-var">col_scheme</span></a></span><span>
</span><span id="line-653"></span><span>          </span><span id="local-6989586621682671615"><span class="annot"><span class="annottext">col :: String -&gt; SDoc
</span><a href="#local-6989586621682671615"><span class="hs-identifier hs-var hs-var">col</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var">msg_colour</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; (String -&gt; SDoc) -&gt; String -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span>          </span><span id="local-6989586621682671617"><span class="annot"><span class="annottext">msg_title :: SDoc
</span><a href="#local-6989586621682671617"><span class="hs-identifier hs-var hs-var">msg_title</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var">msg_colour</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-656"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671604"><span class="hs-identifier hs-var">msg_class</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-657"></span><span>              </span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>   </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;error&quot;</span></span><span>
</span><span id="line-658"></span><span>              </span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;warning&quot;</span></span><span>
</span><span id="line-659"></span><span>              </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCFatal"><span class="hs-identifier hs-var">MCFatal</span></a></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fatal&quot;</span></span><span>
</span><span id="line-660"></span><span>              </span><span class="annot"><span class="annottext">MessageClass
</span><span class="hs-identifier">_</span></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span>          </span><span id="local-6989586621682671619"><span class="annot"><span class="annottext">warning_flag_doc :: SDoc
</span><a href="#local-6989586621682671619"><span class="hs-identifier hs-var hs-var">warning_flag_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-663"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671604"><span class="hs-identifier hs-var">msg_class</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-664"></span><span>              </span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span id="local-6989586621682671620"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621682671620"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span id="local-6989586621682671621"><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671621"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621682671622"><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621682671622"><span class="hs-identifier hs-var">_code</span></a></span></span><span>
</span><span id="line-665"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682671623"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671623"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; DiagnosticReason -&gt; Maybe SDoc
</span><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621682671620"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#resolvedDiagnosticReason"><span class="hs-identifier hs-var">resolvedDiagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671621"><span class="hs-identifier hs-var">reason</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671623"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-667"></span><span>              </span><span class="annot"><span class="annottext">MessageClass
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span>          </span><span id="local-6989586621682671629"><span class="annot"><span class="annottext">ppr_with_hyperlink :: DiagnosticCode -&gt; SDoc
</span><a href="#local-6989586621682671629"><span class="hs-identifier hs-var hs-var">ppr_with_hyperlink</span></a></span></span><span> </span><span id="local-6989586621682671630"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671630"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-670"></span><span>            </span><span class="hs-comment">-- this is a bit hacky, but we assume that if the terminal supports colors</span><span>
</span><span id="line-671"></span><span>            </span><span class="hs-comment">-- then it should also support links</span><span>
</span><span id="line-672"></span><span>            </span><span class="annot"><span class="annottext">(SDocContext -&gt; Bool) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682671631"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621682671631"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#sdocPrintErrIndexLinks"><span class="hs-identifier hs-var">sdocPrintErrIndexLinks</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621682671631"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Bool -&gt; SDoc) -&gt; SDoc) -&gt; (Bool -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-673"></span><span>              </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682671633"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671633"><span class="hs-identifier hs-var">use_hyperlinks</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-674"></span><span>                 </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671633"><span class="hs-identifier hs-var">use_hyperlinks</span></a></span><span>
</span><span id="line-675"></span><span>                 </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LinkedDiagCode -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LinkedDiagCode -&gt; SDoc) -&gt; LinkedDiagCode -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; LinkedDiagCode
</span><a href="GHC.Types.Error.html#LinkedDiagCode"><span class="hs-identifier hs-var">LinkedDiagCode</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671630"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-676"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671630"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span>          </span><span id="local-6989586621682671635"><span class="annot"><span class="annottext">code_doc :: SDoc
</span><a href="#local-6989586621682671635"><span class="hs-identifier hs-var hs-var">code_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-679"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671604"><span class="hs-identifier hs-var">msg_class</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-680"></span><span>              </span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682671636"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671636"><span class="hs-identifier hs-var">code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
</span><a href="#local-6989586621682671629"><span class="hs-identifier hs-var">ppr_with_hyperlink</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671636"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>              </span><span class="annot"><span class="annottext">MessageClass
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-type">flag_msg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-684"></span><span>          </span><span id="local-6989586621682671624"><span class="annot"><span class="annottext">flag_msg :: Severity -&gt; DiagnosticReason -&gt; Maybe SDoc
</span><a href="#local-6989586621682671624"><span class="hs-identifier hs-var hs-var">flag_msg</span></a></span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-685"></span><span>            </span><span class="hs-comment">-- The above can happen when displaying an error message</span><span>
</span><span id="line-686"></span><span>            </span><span class="hs-comment">-- in a log file, e.g. with -ddump-tc-trace. It should not</span><span>
</span><span id="line-687"></span><span>            </span><span class="hs-comment">-- happen otherwise, though.</span><span>
</span><span id="line-688"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621682671615"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-Werror&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-type">WarningWithFlags</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671637"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671637"><span class="hs-identifier hs-var">wflag</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[WarningFlag]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-690"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682671638"><span class="annot"><span class="annottext">name :: String
</span><a href="#local-6989586621682671638"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty String -&gt; String
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; NonEmpty String
</span><a href="GHC.Driver.Flags.html#warnFlagNames"><span class="hs-identifier hs-var">warnFlagNames</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671637"><span class="hs-identifier hs-var">wflag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-691"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Maybe SDoc) -&gt; SDoc -&gt; Maybe SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621682671615"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-W&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671638"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup] -&gt; SDoc
</span><a href="#local-6989586621682671639"><span class="hs-identifier hs-var">warn_flag_grp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; [WarningGroup]
</span><a href="GHC.Driver.Flags.html#smallestWarningGroups"><span class="hs-identifier hs-var">smallestWarningGroups</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671637"><span class="hs-identifier hs-var">wflag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-692"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-693"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621682671615"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Werror=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671638"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-694"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#WarningWithCategory"><span class="hs-identifier hs-type">WarningWithCategory</span></a></span><span> </span><span id="local-6989586621682671643"><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671643"><span class="hs-identifier hs-var">cat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-695"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Maybe SDoc) -&gt; SDoc -&gt; Maybe SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var">msg_colour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-W&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671643"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-696"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup] -&gt; SDoc
</span><a href="#local-6989586621682671639"><span class="hs-identifier hs-var">warn_flag_grp</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup]
</span><a href="GHC.Driver.Flags.html#smallestWarningGroupsForCategory"><span class="hs-identifier hs-var">smallestWarningGroupsForCategory</span></a></span><span>
</span><span id="line-697"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-698"></span><span>                       </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var">msg_colour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-Werror=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671643"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>   </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-700"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SDoc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-701"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlags"><span class="hs-identifier hs-type">WarningWithFlags</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682671645"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671645"><span class="hs-identifier hs-var">wflag</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[WarningFlag]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-702"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682671646"><span class="annot"><span class="annottext">name :: String
</span><a href="#local-6989586621682671646"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty String -&gt; String
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; NonEmpty String
</span><a href="GHC.Driver.Flags.html#warnFlagNames"><span class="hs-identifier hs-var">warnFlagNames</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671645"><span class="hs-identifier hs-var">wflag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-703"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
</span><a href="#local-6989586621682671615"><span class="hs-identifier hs-var">col</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-W&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671646"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup] -&gt; SDoc
</span><a href="#local-6989586621682671639"><span class="hs-identifier hs-var">warn_flag_grp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; [WarningGroup]
</span><a href="GHC.Driver.Flags.html#smallestWarningGroups"><span class="hs-identifier hs-var">smallestWarningGroups</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621682671645"><span class="hs-identifier hs-var">wflag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#WarningWithCategory"><span class="hs-identifier hs-type">WarningWithCategory</span></a></span><span> </span><span id="local-6989586621682671647"><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671647"><span class="hs-identifier hs-var">cat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-705"></span><span>            </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671613"><span class="hs-identifier hs-var">msg_colour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-W&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">WarningCategory
</span><a href="#local-6989586621682671647"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup] -&gt; SDoc
</span><a href="#local-6989586621682671639"><span class="hs-identifier hs-var">warn_flag_grp</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningGroup]
</span><a href="GHC.Driver.Flags.html#smallestWarningGroupsForCategory"><span class="hs-identifier hs-var">smallestWarningGroupsForCategory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>          </span><span class="annot"><a href="#local-6989586621682671624"><span class="hs-identifier hs-var">flag_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-708"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Maybe SDoc
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;SevWarning with ErrorWithoutFlag&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Maybe SDoc) -&gt; SDoc -&gt; Maybe SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-709"></span><span>              </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;locn:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682671605"><span class="hs-identifier hs-var">locn</span></a></span><span>
</span><span id="line-710"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;msg:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671606"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span>          </span><span id="local-6989586621682671639"><span class="annot"><span class="annottext">warn_flag_grp :: [WarningGroup] -&gt; SDoc
</span><a href="#local-6989586621682671639"><span class="hs-identifier hs-var hs-var">warn_flag_grp</span></a></span></span><span> </span><span id="local-6989586621682671649"><span class="annot"><span class="annottext">[WarningGroup]
</span><a href="#local-6989586621682671649"><span class="hs-identifier hs-var">groups</span></a></span></span><span>
</span><span id="line-713"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671603"><span class="hs-identifier hs-var">show_warn_groups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[WarningGroup] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[WarningGroup]
</span><a href="#local-6989586621682671649"><span class="hs-identifier hs-var">groups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>                          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; String -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(in &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(WarningGroup -&gt; String) -&gt; [WarningGroup] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-W&quot;</span></span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; (WarningGroup -&gt; String) -&gt; WarningGroup -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WarningGroup -&gt; String
</span><a href="GHC.Driver.Flags.html#warningGroupName"><span class="hs-identifier hs-var">warningGroupName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[WarningGroup]
</span><a href="#local-6989586621682671649"><span class="hs-identifier hs-var">groups</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-715"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span>          </span><span class="hs-comment">-- Add prefixes, like    Foo.hs:34: warning:</span><span>
</span><span id="line-718"></span><span>          </span><span class="hs-comment">--                           &lt;the warning message&gt;</span><span>
</span><span id="line-719"></span><span>          </span><span id="local-6989586621682671651"><span class="annot"><span class="annottext">header :: SDoc
</span><a href="#local-6989586621682671651"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671610"><span class="hs-identifier hs-var">locn'</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-720"></span><span>                   </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671617"><span class="hs-identifier hs-var">msg_title</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span>
</span><span id="line-721"></span><span>                   </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671635"><span class="hs-identifier hs-var">code_doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671619"><span class="hs-identifier hs-var">warning_flag_doc</span></a></span><span>
</span><span id="line-722"></span><span>
</span><span id="line-723"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sMessage"><span class="hs-identifier hs-var">Col.sMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671609"><span class="hs-identifier hs-var">col_scheme</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sHeader"><span class="hs-identifier hs-var">Col.sHeader</span></a></span><span> </span><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671609"><span class="hs-identifier hs-var">col_scheme</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671651"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-725"></span><span>                        </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682671606"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-type">getMessageClassColour</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Ppr.Colour.html#Scheme"><span class="hs-identifier hs-type">Col.Scheme</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Ppr.Colour.html#PprColour"><span class="hs-identifier hs-type">Col.PprColour</span></a></span><span>
</span><span id="line-728"></span><span id="getMessageClassColour"><span class="annot"><span class="annottext">getMessageClassColour :: MessageClass -&gt; Scheme -&gt; PprColour
</span><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var hs-var">getMessageClassColour</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span id="local-6989586621682671656"><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671656"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span id="local-6989586621682671657"><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621682671657"><span class="hs-identifier hs-var">_code</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sError"><span class="hs-identifier hs-var">Col.sError</span></a></span><span>
</span><span id="line-729"></span><span class="annot"><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var">getMessageClassColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-type">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span> </span><span id="local-6989586621682671659"><span class="annot"><span class="annottext">ResolvedDiagnosticReason
</span><a href="#local-6989586621682671659"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span id="local-6989586621682671660"><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621682671660"><span class="hs-identifier hs-var">_code</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sWarning"><span class="hs-identifier hs-var">Col.sWarning</span></a></span><span>
</span><span id="line-730"></span><span class="annot"><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var">getMessageClassColour</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCFatal"><span class="hs-identifier hs-var">MCFatal</span></a></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sFatal"><span class="hs-identifier hs-var">Col.sFatal</span></a></span><span>
</span><span id="line-731"></span><span class="annot"><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var">getMessageClassColour</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><span class="hs-identifier">_</span></span><span>                                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PprColour -&gt; Scheme -&gt; PprColour
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">PprColour
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="annot"><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier hs-type">getCaretDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-734"></span><span id="getCaretDiagnostic"><span class="annot"><span class="annottext">getCaretDiagnostic :: MessageClass -&gt; SrcSpan -&gt; IO SDoc
</span><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier hs-var hs-var">getCaretDiagnostic</span></a></span></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#UnhelpfulSpan"><span class="hs-identifier hs-type">UnhelpfulSpan</span></a></span><span> </span><span class="annot"><span class="annottext">UnhelpfulSpanReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; IO SDoc
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-735"></span><span class="annot"><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier hs-var">getCaretDiagnostic</span></a></span><span> </span><span id="local-6989586621682671664"><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671664"><span class="hs-identifier hs-var">msg_class</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682671666"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-736"></span><span>  </span><span class="annot"><span class="annottext">Maybe String -&gt; SDoc
</span><a href="#local-6989586621682671667"><span class="hs-identifier hs-var">caretDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; SDoc) -&gt; IO (Maybe String) -&gt; IO SDoc
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Int -&gt; IO (Maybe String)
</span><a href="#local-6989586621682671668"><span class="hs-identifier hs-var">getSrcLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; FastString
</span><a href="GHC.Types.SrcLoc.html#srcSpanFile"><span class="hs-identifier hs-var">srcSpanFile</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671670"><span class="hs-identifier hs-var">row</span></a></span><span>
</span><span id="line-737"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-738"></span><span>    </span><span id="local-6989586621682671668"><span class="annot"><span class="annottext">getSrcLine :: FastString -&gt; Int -&gt; IO (Maybe String)
</span><a href="#local-6989586621682671668"><span class="hs-identifier hs-var hs-var">getSrcLine</span></a></span></span><span> </span><span id="local-6989586621682671674"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682671674"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span id="local-6989586621682671675"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671675"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-739"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; String -&gt; IO (Maybe String)
</span><a href="#local-6989586621682671676"><span class="hs-identifier hs-var">getLine</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671675"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682671674"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>        </span><span class="annot"><span class="annottext">IO (Maybe String)
-&gt; (IOError -&gt; IO (Maybe String)) -&gt; IO (Maybe String)
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`catchException`</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOError
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IOError</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-741"></span><span>          </span><span class="annot"><span class="annottext">Maybe String -&gt; IO (Maybe String)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621682671676"><span class="annot"><span class="annottext">getLine :: Int -&gt; String -&gt; IO (Maybe String)
</span><a href="#local-6989586621682671676"><span class="hs-identifier hs-var hs-var">getLine</span></a></span></span><span> </span><span id="local-6989586621682671683"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671683"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682671684"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671684"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-744"></span><span>      </span><span class="hs-comment">-- StringBuffer has advantages over readFile:</span><span>
</span><span id="line-745"></span><span>      </span><span class="hs-comment">-- (a) no lazy IO, otherwise IO exceptions may occur in pure code</span><span>
</span><span id="line-746"></span><span>      </span><span class="hs-comment">-- (b) always UTF-8, rather than some system-dependent encoding</span><span>
</span><span id="line-747"></span><span>      </span><span class="hs-comment">--     (Haskell source code must be UTF-8 anyway)</span><span>
</span><span id="line-748"></span><span>      </span><span id="local-6989586621682671685"><span class="annot"><a href="#local-6989586621682671685"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO StringBuffer
</span><a href="GHC.Data.StringBuffer.html#hGetStringBuffer"><span class="hs-identifier hs-var">hGetStringBuffer</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671684"><span class="hs-identifier hs-var">fn</span></a></span><span>
</span><span id="line-749"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Data.StringBuffer.html#atLine"><span class="hs-identifier hs-type">atLine</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671683"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671685"><span class="hs-identifier hs-type">content</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-750"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682671686"><span class="annot"><span class="annottext">StringBuffer
</span><a href="#local-6989586621682671686"><span class="hs-identifier hs-var">at_line</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; IO (Maybe String)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; IO (Maybe String))
-&gt; Maybe String -&gt; IO (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-751"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
</span><span class="hs-identifier hs-var">lines</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="#local-6989586621682671688"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; ShowS
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StringBuffer -&gt; Int -&gt; String
</span><a href="GHC.Data.StringBuffer.html#lexemeToString"><span class="hs-identifier hs-var">lexemeToString</span></a></span><span> </span><span class="annot"><span class="annottext">StringBuffer
</span><a href="#local-6989586621682671686"><span class="hs-identifier hs-var">at_line</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StringBuffer -&gt; Int
</span><a href="GHC.Data.StringBuffer.html#len"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">StringBuffer
</span><a href="#local-6989586621682671686"><span class="hs-identifier hs-var">at_line</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-752"></span><span>            </span><span id="local-6989586621682671689"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671689"><span class="hs-identifier hs-var">srcLine</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671689"><span class="hs-identifier hs-var">srcLine</span></a></span><span>
</span><span id="line-753"></span><span>            </span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-754"></span><span>        </span><span class="annot"><span class="annottext">Maybe StringBuffer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; IO (Maybe String)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span>    </span><span class="hs-comment">-- allow user to visibly see that their code is incorrectly encoded</span><span>
</span><span id="line-757"></span><span>    </span><span class="hs-comment">-- (StringBuffer.nextChar uses \0 to represent undecodable characters)</span><span>
</span><span id="line-758"></span><span>    </span><span id="local-6989586621682671688"><span class="annot"><span class="annottext">fix :: Char -&gt; Char
</span><a href="#local-6989586621682671688"><span class="hs-identifier hs-var hs-var">fix</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\0'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\xfffd'</span></span><span>
</span><span id="line-759"></span><span>    </span><span class="annot"><a href="#local-6989586621682671688"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span id="local-6989586621682671690"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682671690"><span class="hs-identifier hs-var">c</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682671690"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span>    </span><span id="local-6989586621682671670"><span class="annot"><span class="annottext">row :: Int
</span><a href="#local-6989586621682671670"><span class="hs-identifier hs-var hs-var">row</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartLine"><span class="hs-identifier hs-var">srcSpanStartLine</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-762"></span><span>    </span><span id="local-6989586621682671692"><span class="annot"><span class="annottext">rowStr :: String
</span><a href="#local-6989586621682671692"><span class="hs-identifier hs-var hs-var">rowStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671670"><span class="hs-identifier hs-var">row</span></a></span><span>
</span><span id="line-763"></span><span>    </span><span id="local-6989586621682671693"><span class="annot"><span class="annottext">multiline :: Bool
</span><a href="#local-6989586621682671693"><span class="hs-identifier hs-var hs-var">multiline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671670"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanEndLine"><span class="hs-identifier hs-var">srcSpanEndLine</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span>    </span><span id="local-6989586621682671667"><span class="annot"><span class="annottext">caretDiagnostic :: Maybe String -&gt; SDoc
</span><a href="#local-6989586621682671667"><span class="hs-identifier hs-var hs-var">caretDiagnostic</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-766"></span><span>    </span><span class="annot"><a href="#local-6989586621682671667"><span class="hs-identifier hs-var">caretDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682671695"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671695"><span class="hs-identifier hs-var">srcLineWithNewline</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-767"></span><span>      </span><span class="annot"><span class="annottext">(SDocContext -&gt; Scheme) -&gt; (Scheme -&gt; SDoc) -&gt; SDoc
forall a. (SDocContext -&gt; a) -&gt; (a -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocOption"><span class="hs-identifier hs-var">sdocOption</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; Scheme
</span><a href="GHC.Utils.Outputable.html#sdocColScheme"><span class="hs-identifier hs-var">sdocColScheme</span></a></span><span class="annot"><span class="annottext">((Scheme -&gt; SDoc) -&gt; SDoc) -&gt; (Scheme -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682671696"><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671696"><span class="hs-identifier hs-var">col_scheme</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-768"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682671697"><span class="annot"><span class="annottext">sevColour :: PprColour
</span><a href="#local-6989586621682671697"><span class="hs-identifier hs-var hs-var">sevColour</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MessageClass -&gt; Scheme -&gt; PprColour
</span><a href="GHC.Types.Error.html#getMessageClassColour"><span class="hs-identifier hs-var">getMessageClassColour</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="#local-6989586621682671664"><span class="hs-identifier hs-var">msg_class</span></a></span><span> </span><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671696"><span class="hs-identifier hs-var">col_scheme</span></a></span><span>
</span><span id="line-769"></span><span>          </span><span id="local-6989586621682671698"><span class="annot"><span class="annottext">marginColour :: PprColour
</span><a href="#local-6989586621682671698"><span class="hs-identifier hs-var hs-var">marginColour</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Scheme -&gt; PprColour
</span><a href="GHC.Utils.Ppr.Colour.html#sMargin"><span class="hs-identifier hs-var">Col.sMargin</span></a></span><span> </span><span class="annot"><span class="annottext">Scheme
</span><a href="#local-6989586621682671696"><span class="hs-identifier hs-var">col_scheme</span></a></span><span>
</span><span id="line-770"></span><span>      </span><span class="hs-keyword">in</span><span>
</span><span id="line-771"></span><span>      </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671698"><span class="hs-identifier hs-var">marginColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671700"><span class="hs-identifier hs-var">marginSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-772"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-773"></span><span>      </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671698"><span class="hs-identifier hs-var">marginColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671701"><span class="hs-identifier hs-var">marginRow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671702"><span class="hs-identifier hs-var">srcLinePre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-775"></span><span>      </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671697"><span class="hs-identifier hs-var">sevColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671703"><span class="hs-identifier hs-var">srcLineSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-776"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671704"><span class="hs-identifier hs-var">srcLinePost</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-777"></span><span>      </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671698"><span class="hs-identifier hs-var">marginColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671700"><span class="hs-identifier hs-var">marginSpace</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-778"></span><span>      </span><span class="annot"><span class="annottext">PprColour -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#coloured"><span class="hs-identifier hs-var">coloured</span></a></span><span> </span><span class="annot"><span class="annottext">PprColour
</span><a href="#local-6989586621682671697"><span class="hs-identifier hs-var">sevColour</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671705"><span class="hs-identifier hs-var">caretLine</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>        </span><span class="hs-comment">-- expand tabs in a device-independent manner #13664</span><span>
</span><span id="line-783"></span><span>        </span><span id="local-6989586621682671712"><span class="annot"><span class="annottext">expandTabs :: Int -&gt; Int -&gt; ShowS
</span><a href="#local-6989586621682671712"><span class="hs-identifier hs-var hs-var">expandTabs</span></a></span></span><span> </span><span id="local-6989586621682671713"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671713"><span class="hs-identifier hs-var">tabWidth</span></a></span></span><span> </span><span id="local-6989586621682671714"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671714"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621682671715"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671715"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-784"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671715"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-785"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-786"></span><span>            </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\t'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682671716"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671716"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671718"><span class="hs-identifier hs-var">effectiveWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-787"></span><span>                         </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; ShowS
</span><a href="#local-6989586621682671712"><span class="hs-identifier hs-var">expandTabs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671713"><span class="hs-identifier hs-var">tabWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671714"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671718"><span class="hs-identifier hs-var">effectiveWidth</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671716"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-788"></span><span>            </span><span id="local-6989586621682671720"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682671720"><span class="hs-identifier hs-var">c</span></a></span></span><span>    </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682671721"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671721"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682671720"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; ShowS
</span><a href="#local-6989586621682671712"><span class="hs-identifier hs-var">expandTabs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671713"><span class="hs-identifier hs-var">tabWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671714"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671721"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-789"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682671718"><span class="annot"><span class="annottext">effectiveWidth :: Int
</span><a href="#local-6989586621682671718"><span class="hs-identifier hs-var hs-var">effectiveWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671713"><span class="hs-identifier hs-var">tabWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671714"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671713"><span class="hs-identifier hs-var">tabWidth</span></a></span><span>
</span><span id="line-790"></span><span>
</span><span id="line-791"></span><span>        </span><span id="local-6989586621682671723"><span class="annot"><span class="annottext">srcLine :: String
</span><a href="#local-6989586621682671723"><span class="hs-identifier hs-var hs-var">srcLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ShowS
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; ShowS
</span><a href="#local-6989586621682671712"><span class="hs-identifier hs-var">expandTabs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671695"><span class="hs-identifier hs-var">srcLineWithNewline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span>        </span><span id="local-6989586621682671724"><span class="annot"><span class="annottext">start :: Int
</span><a href="#local-6989586621682671724"><span class="hs-identifier hs-var hs-var">start</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartCol"><span class="hs-identifier hs-var">srcSpanStartCol</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-794"></span><span>        </span><span id="local-6989586621682671726"><span class="annot"><span class="annottext">end :: Int
</span><a href="#local-6989586621682671726"><span class="hs-identifier hs-var hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671693"><span class="hs-identifier hs-var">multiline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671723"><span class="hs-identifier hs-var">srcLine</span></a></span><span>
</span><span id="line-795"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanEndCol"><span class="hs-identifier hs-var">srcSpanEndCol</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682671666"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-796"></span><span>        </span><span id="local-6989586621682671729"><span class="annot"><span class="annottext">width :: Int
</span><a href="#local-6989586621682671729"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671726"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671724"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>
</span><span id="line-798"></span><span>        </span><span id="local-6989586621682671731"><span class="annot"><span class="annottext">marginWidth :: Int
</span><a href="#local-6989586621682671731"><span class="hs-identifier hs-var hs-var">marginWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671692"><span class="hs-identifier hs-var">rowStr</span></a></span><span>
</span><span id="line-799"></span><span>        </span><span id="local-6989586621682671700"><span class="annot"><span class="annottext">marginSpace :: String
</span><a href="#local-6989586621682671700"><span class="hs-identifier hs-var hs-var">marginSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671731"><span class="hs-identifier hs-var">marginWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |&quot;</span></span><span>
</span><span id="line-800"></span><span>        </span><span id="local-6989586621682671701"><span class="annot"><span class="annottext">marginRow :: String
</span><a href="#local-6989586621682671701"><span class="hs-identifier hs-var hs-var">marginRow</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671692"><span class="hs-identifier hs-var">rowStr</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; |&quot;</span></span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682671702"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671702"><span class="hs-identifier hs-var">srcLinePre</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621682671732"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671732"><span class="hs-identifier hs-var">srcLineRest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String -&gt; (String, String)
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671724"><span class="hs-identifier hs-var">start</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671723"><span class="hs-identifier hs-var">srcLine</span></a></span><span>
</span><span id="line-803"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621682671703"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671703"><span class="hs-identifier hs-var">srcLineSpan</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671704"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671704"><span class="hs-identifier hs-var">srcLinePost</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String -&gt; (String, String)
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671729"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671732"><span class="hs-identifier hs-var">srcLineRest</span></a></span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span>        </span><span id="local-6989586621682671734"><span class="annot"><span class="annottext">caretEllipsis :: String
</span><a href="#local-6989586621682671734"><span class="hs-identifier hs-var hs-var">caretEllipsis</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682671693"><span class="hs-identifier hs-var">multiline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...&quot;</span></span><span>
</span><span id="line-806"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-807"></span><span>        </span><span id="local-6989586621682671705"><span class="annot"><span class="annottext">caretLine :: String
</span><a href="#local-6989586621682671705"><span class="hs-identifier hs-var hs-var">caretLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671724"><span class="hs-identifier hs-var">start</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Char -&gt; String
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682671729"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'^'</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671734"><span class="hs-identifier hs-var">caretEllipsis</span></a></span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="hs-comment">--</span><span>
</span><span id="line-810"></span><span class="hs-comment">-- Queries</span><span>
</span><span id="line-811"></span><span class="hs-comment">--</span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span class="hs-comment">{- Note [Intrinsic And Extrinsic Failures]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We distinguish between /intrinsic/ and /extrinsic/ failures. We classify in
the former category those diagnostics which are /essentially/ failures, and
their nature can't be changed. This is the case for 'ErrorWithoutFlag'. We
classify as /extrinsic/ all those diagnostics (like fatal warnings) which are
born as warnings but which are still failures under particular 'DynFlags'
settings. It's important to be aware of such logic distinction, because when
we are inside the typechecker or the desugarer, we are interested about
intrinsic errors, and to bail out as soon as we find one of them. Conversely,
if we find an /extrinsic/ one, for example because a particular 'WarningFlag'
makes a warning into an error, we /don't/ want to bail out, that's still not the
right time to do so: Rather, we want to first collect all the diagnostics, and
later classify and report them appropriately (in the driver).
-}</span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span class="hs-comment">-- | Returns 'True' if this is, intrinsically, a failure. See</span><span>
</span><span id="line-830"></span><span class="hs-comment">-- Note [Intrinsic And Extrinsic Failures].</span><span>
</span><span id="line-831"></span><span id="local-6989586621682670754"><span class="annot"><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier hs-type">isIntrinsicErrorMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670754"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670754"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-832"></span><span id="isIntrinsicErrorMessage"><span class="annot"><span class="annottext">isIntrinsicErrorMessage :: forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier hs-var hs-var">isIntrinsicErrorMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticReason -&gt; Bool)
-&gt; (MsgEnvelope e -&gt; DiagnosticReason) -&gt; MsgEnvelope e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ResolvedDiagnosticReason -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#resolvedDiagnosticReason"><span class="hs-identifier hs-var">resolvedDiagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">(ResolvedDiagnosticReason -&gt; DiagnosticReason)
-&gt; (MsgEnvelope e -&gt; ResolvedDiagnosticReason)
-&gt; MsgEnvelope e
-&gt; DiagnosticReason
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; ResolvedDiagnosticReason
forall e. MsgEnvelope e -&gt; ResolvedDiagnosticReason
</span><a href="GHC.Types.Error.html#errMsgReason"><span class="hs-identifier hs-var">errMsgReason</span></a></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span id="local-6989586621682671737"><span class="annot"><a href="GHC.Types.Error.html#isWarningMessage"><span class="hs-identifier hs-type">isWarningMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671737"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671737"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-835"></span><span id="isWarningMessage"><span class="annot"><span class="annottext">isWarningMessage :: forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isWarningMessage"><span class="hs-identifier hs-var hs-var">isWarningMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (MsgEnvelope e -&gt; Bool) -&gt; MsgEnvelope e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier hs-var">isIntrinsicErrorMessage</span></a></span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="hs-comment">-- | Are there any hard errors here? -Werror warnings are /not/ detected. If</span><span>
</span><span id="line-838"></span><span class="hs-comment">-- you want to check for -Werror warnings, use 'errorsOrFatalWarningsFound'.</span><span>
</span><span id="line-839"></span><span id="local-6989586621682670757"><span class="annot"><a href="GHC.Types.Error.html#errorsFound"><span class="hs-identifier hs-type">errorsFound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670757"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670757"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-840"></span><span id="errorsFound"><span class="annot"><span class="annottext">errorsFound :: forall e. Diagnostic e =&gt; Messages e -&gt; Bool
</span><a href="GHC.Types.Error.html#errorsFound"><span class="hs-identifier hs-var hs-var">errorsFound</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671743"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671743"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool) -&gt; Bag (MsgEnvelope e) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier hs-var">isIntrinsicErrorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671743"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span class="hs-comment">-- | Returns 'True' if the envelope contains a message that will stop</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- compilation: either an intrinsic error or a fatal (-Werror) warning</span><span>
</span><span id="line-844"></span><span id="local-6989586621682671745"><span class="annot"><a href="GHC.Types.Error.html#isExtrinsicErrorMessage"><span class="hs-identifier hs-type">isExtrinsicErrorMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671745"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-845"></span><span id="isExtrinsicErrorMessage"><span class="annot"><span class="annottext">isExtrinsicErrorMessage :: forall e. MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isExtrinsicErrorMessage"><span class="hs-identifier hs-var hs-var">isExtrinsicErrorMessage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(==)</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">(Severity -&gt; Bool)
-&gt; (MsgEnvelope e -&gt; Severity) -&gt; MsgEnvelope e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Severity
forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="annot"><span class="hs-comment">-- | Are there any errors or -Werror warnings here?</span></span><span>
</span><span id="line-848"></span><span id="local-6989586621682671747"><span class="annot"><a href="GHC.Types.Error.html#errorsOrFatalWarningsFound"><span class="hs-identifier hs-type">errorsOrFatalWarningsFound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671747"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-849"></span><span id="errorsOrFatalWarningsFound"><span class="annot"><span class="annottext">errorsOrFatalWarningsFound :: forall a. Messages a -&gt; Bool
</span><a href="GHC.Types.Error.html#errorsOrFatalWarningsFound"><span class="hs-identifier hs-var hs-var">errorsOrFatalWarningsFound</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671749"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671749"><span class="hs-identifier hs-var">msgs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool) -&gt; Bag (MsgEnvelope e) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isExtrinsicErrorMessage"><span class="hs-identifier hs-var">isExtrinsicErrorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671749"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-850"></span><span>
</span><span id="line-851"></span><span id="local-6989586621682670763"><span class="annot"><a href="GHC.Types.Error.html#getWarningMessages"><span class="hs-identifier hs-type">getWarningMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670763"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670763"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670763"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-852"></span><span id="getWarningMessages"><span class="annot"><span class="annottext">getWarningMessages :: forall e. Diagnostic e =&gt; Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getWarningMessages"><span class="hs-identifier hs-var hs-var">getWarningMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671752"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671752"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bag (MsgEnvelope e), Bag (MsgEnvelope e)) -&gt; Bag (MsgEnvelope e)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Bag (MsgEnvelope e), Bag (MsgEnvelope e)) -&gt; Bag (MsgEnvelope e))
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
-&gt; Bag (MsgEnvelope e)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool)
-&gt; Bag (MsgEnvelope e)
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; (Bag a, Bag a)
</span><a href="GHC.Data.Bag.html#partitionBag"><span class="hs-identifier hs-var">partitionBag</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isWarningMessage"><span class="hs-identifier hs-var">isWarningMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671752"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-853"></span><span>
</span><span id="line-854"></span><span id="local-6989586621682671755"><span class="annot"><a href="GHC.Types.Error.html#getErrorMessages"><span class="hs-identifier hs-type">getErrorMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671755"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671755"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682671755"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-855"></span><span id="getErrorMessages"><span class="annot"><span class="annottext">getErrorMessages :: forall e. Diagnostic e =&gt; Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getErrorMessages"><span class="hs-identifier hs-var hs-var">getErrorMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671758"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671758"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bag (MsgEnvelope e), Bag (MsgEnvelope e)) -&gt; Bag (MsgEnvelope e)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Bag (MsgEnvelope e), Bag (MsgEnvelope e)) -&gt; Bag (MsgEnvelope e))
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
-&gt; Bag (MsgEnvelope e)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool)
-&gt; Bag (MsgEnvelope e)
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; (Bag a, Bag a)
</span><a href="GHC.Data.Bag.html#partitionBag"><span class="hs-identifier hs-var">partitionBag</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isIntrinsicErrorMessage"><span class="hs-identifier hs-var">isIntrinsicErrorMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671758"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="hs-comment">-- | Partitions the 'Messages' and returns a tuple which first element are the</span><span>
</span><span id="line-858"></span><span class="hs-comment">-- warnings, and the second the errors.</span><span>
</span><span id="line-859"></span><span id="local-6989586621682670769"><span class="annot"><a href="GHC.Types.Error.html#partitionMessages"><span class="hs-identifier hs-type">partitionMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670769"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670769"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670769"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682670769"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-860"></span><span id="partitionMessages"><span class="annot"><span class="annottext">partitionMessages :: forall e. Diagnostic e =&gt; Messages e -&gt; (Messages e, Messages e)
</span><a href="GHC.Types.Error.html#partitionMessages"><span class="hs-identifier hs-var hs-var">partitionMessages</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span id="local-6989586621682671763"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671763"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bag (MsgEnvelope e) -&gt; Messages e)
-&gt; (Bag (MsgEnvelope e) -&gt; Messages e)
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
-&gt; (Messages e, Messages e)
forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; (a, c) -&gt; (b, d)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../../base-4.21.0.0-ae91/src/Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; Messages e
forall e. Bag (MsgEnvelope e) -&gt; Messages e
</span><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-var">Messages</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; Bool)
-&gt; Bag (MsgEnvelope e)
-&gt; (Bag (MsgEnvelope e), Bag (MsgEnvelope e))
forall a. (a -&gt; Bool) -&gt; Bag a -&gt; (Bag a, Bag a)
</span><a href="GHC.Data.Bag.html#partitionBag"><span class="hs-identifier hs-var">partitionBag</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; Bool
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; Bool
</span><a href="GHC.Types.Error.html#isWarningMessage"><span class="hs-identifier hs-var">isWarningMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621682671763"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-863"></span><span class="hs-comment">--                                                            --</span><span>
</span><span id="line-864"></span><span class="hs-comment">-- Definition of diagnostic codes                             --</span><span>
</span><span id="line-865"></span><span class="hs-comment">--                                                            --</span><span>
</span><span id="line-866"></span><span class="hs-comment">----------------------------------------------------------------</span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span class="hs-comment">-- | A diagnostic code is a namespaced numeric identifier</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- unique to the given diagnostic (error or warning).</span><span>
</span><span id="line-870"></span><span class="hs-comment">--</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- All diagnostic codes defined within GHC are given the</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- GHC namespace.</span><span>
</span><span id="line-873"></span><span class="hs-comment">--</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- See Note [Diagnostic codes] in GHC.Types.Error.Codes.</span><span>
</span><span id="line-875"></span><span class="hs-keyword">data</span><span> </span><span id="DiagnosticCode"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-var">DiagnosticCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-876"></span><span>  </span><span id="DiagnosticCode"><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-var">DiagnosticCode</span></a></span></span><span>
</span><span id="line-877"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="diagnosticCodeNameSpace"><span class="annot"><span class="annottext">DiagnosticCode -&gt; String
</span><a href="GHC.Types.Error.html#diagnosticCodeNameSpace"><span class="hs-identifier hs-var hs-var">diagnosticCodeNameSpace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-878"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ diagnostic code prefix (e.g. &quot;GHC&quot;)</span></span><span>
</span><span id="line-879"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="diagnosticCodeNumber"><span class="annot"><span class="annottext">DiagnosticCode -&gt; Natural
</span><a href="GHC.Types.Error.html#diagnosticCodeNumber"><span class="hs-identifier hs-var hs-var">diagnosticCodeNumber</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Natural</span></span><span>
</span><span id="line-880"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ the actual diagnostic code</span></span><span>
</span><span id="line-881"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621682671767"><span id="local-6989586621682671773"><span class="annot"><span class="annottext">DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
(DiagnosticCode -&gt; DiagnosticCode -&gt; Bool)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; Bool) -&gt; Eq DiagnosticCode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
== :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
$c/= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
/= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682671779"><span id="local-6989586621682671786"><span id="local-6989586621682671791"><span id="local-6989586621682671795"><span id="local-6989586621682671798"><span id="local-6989586621682671801"><span id="local-6989586621682671804"><span class="annot"><span class="annottext">Eq DiagnosticCode
Eq DiagnosticCode =&gt;
(DiagnosticCode -&gt; DiagnosticCode -&gt; Ordering)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; Bool)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; Bool)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; Bool)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; Bool)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode)
-&gt; (DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode)
-&gt; Ord DiagnosticCode
DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
DiagnosticCode -&gt; DiagnosticCode -&gt; Ordering
DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: DiagnosticCode -&gt; DiagnosticCode -&gt; Ordering
compare :: DiagnosticCode -&gt; DiagnosticCode -&gt; Ordering
$c&lt; :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
&lt; :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
$c&lt;= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
&lt;= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
$c&gt; :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
&gt; :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
$c&gt;= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
&gt;= :: DiagnosticCode -&gt; DiagnosticCode -&gt; Bool
$cmax :: DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode
max :: DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode
$cmin :: DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode
min :: DiagnosticCode -&gt; DiagnosticCode -&gt; DiagnosticCode
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682671808"><span id="local-6989586621682671813"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621682671823"><span class="annot"><span class="annottext">show :: DiagnosticCode -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span id="local-6989586621682671824"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671824"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621682671825"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621682671825"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-886"></span><span>    </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682671824"><span class="hs-identifier hs-var">prefix</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Natural -&gt; String
forall r. PrintfType r =&gt; String -&gt; r
</span><a href="../../base-4.21.0.0-ae91/src/Text.Printf.html#printf"><span class="hs-identifier hs-var">printf</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;%05d&quot;</span></span><span> </span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621682671825"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-887"></span><span>      </span><span class="hs-comment">-- pad the numeric code to have at least 5 digits</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-890"></span><span>  </span><span id="local-6989586621682671829"><span class="annot"><span class="annottext">ppr :: DiagnosticCode -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621682671830"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671830"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagnosticCode -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671830"><span class="hs-identifier hs-var">code</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="hs-comment">-- | A newtype that is a witness to the `-fprint-error-index-links` flag. It</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- alters the @Outputable@ instance to emit @DiagnosticCode@ as ANSI hyperlinks</span><span>
</span><span id="line-894"></span><span class="hs-comment">-- to the HF error index</span><span>
</span><span id="line-895"></span><span class="hs-keyword">newtype</span><span> </span><span id="LinkedDiagCode"><span class="annot"><a href="GHC.Types.Error.html#LinkedDiagCode"><span class="hs-identifier hs-var">LinkedDiagCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LinkedDiagCode"><span class="annot"><a href="GHC.Types.Error.html#LinkedDiagCode"><span class="hs-identifier hs-var">LinkedDiagCode</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#LinkedDiagCode"><span class="hs-identifier hs-type">LinkedDiagCode</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-898"></span><span>  </span><span id="local-6989586621682671832"><span class="annot"><span class="annottext">ppr :: LinkedDiagCode -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#LinkedDiagCode"><span class="hs-identifier hs-type">LinkedDiagCode</span></a></span><span> </span><span id="local-6989586621682671833"><span class="annot"><span class="annottext">d :: DiagnosticCode
</span><a href="#local-6989586621682671833"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
</span><a href="GHC.Types.Error.html#linkEscapeCode"><span class="hs-identifier hs-var">linkEscapeCode</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671833"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="annot"><span class="hs-comment">-- | Wrap the link in terminal escape codes specified by OSC 8.</span></span><span>
</span><span id="line-901"></span><span class="annot"><a href="GHC.Types.Error.html#linkEscapeCode"><span class="hs-identifier hs-type">linkEscapeCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-902"></span><span id="linkEscapeCode"><span class="annot"><span class="annottext">linkEscapeCode :: DiagnosticCode -&gt; SDoc
</span><a href="GHC.Types.Error.html#linkEscapeCode"><span class="hs-identifier hs-var hs-var">linkEscapeCode</span></a></span></span><span> </span><span id="local-6989586621682671835"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671835"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\ESC]8;;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
</span><a href="GHC.Types.Error.html#hfErrorLink"><span class="hs-identifier hs-var">hfErrorLink</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671835"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-comment">-- make the actual link</span><span>
</span><span id="line-903"></span><span>                   </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\ESC\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671835"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\ESC]8;;\ESC\\&quot;</span></span><span> </span><span class="hs-comment">-- the rest is the visible text</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span class="annot"><span class="hs-comment">-- | create a link to the HF error index given an error code.</span></span><span>
</span><span id="line-906"></span><span class="annot"><a href="GHC.Types.Error.html#hfErrorLink"><span class="hs-identifier hs-type">hfErrorLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-907"></span><span id="hfErrorLink"><span class="annot"><span class="annottext">hfErrorLink :: DiagnosticCode -&gt; SDoc
</span><a href="GHC.Types.Error.html#hfErrorLink"><span class="hs-identifier hs-var hs-var">hfErrorLink</span></a></span></span><span> </span><span id="local-6989586621682671837"><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671837"><span class="hs-identifier hs-var">errorCode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;https://errors.haskell.org/messages/&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticCode
</span><a href="#local-6989586621682671837"><span class="hs-identifier hs-var">errorCode</span></a></span><span>
</span><span id="line-908"></span></pre></body></html>