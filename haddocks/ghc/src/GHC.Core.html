<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621682588416"><span id="local-6989586621682588417"><span id="local-6989586621682588418"><span id="local-6989586621682588419"><span id="local-6989586621682588420"><span id="local-6989586621682588421"><span id="local-6989586621682588422"><span id="local-6989586621682588423"><span id="local-6989586621682588424"><span id="local-6989586621682588425"><span id="local-6989586621682588426"><span id="local-6989586621682588427"><span id="local-6989586621682588428"><span id="local-6989586621682588429"><span id="local-6989586621682588430"><span id="local-6989586621682588431"><span id="local-6989586621682588432"><span id="local-6989586621682588433"><span id="local-6989586621682588434"><span id="local-6989586621682588435"><span id="local-6989586621682588436"><span id="local-6989586621682588437"><span id="local-6989586621682588438"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998
-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE NoPolyKinds #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="annot"><span class="hs-comment">-- | GHC.Core holds all the main data types for use by for the Glasgow Haskell Compiler midsection</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-10"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Main data types</span></span><span>
</span><span id="line-11"></span><span>        </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier">Expr</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier">Alt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier">Bind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier">AltCon</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier">Arg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>        </span><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier">CoreProgram</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier">CoreExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier">CoreAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier">CoreBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier">CoreArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier">CoreBndr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><a href="GHC.Core.html#TaggedExpr"><span class="hs-identifier">TaggedExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedAlt"><span class="hs-identifier">TaggedAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedBind"><span class="hs-identifier">TaggedBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedArg"><span class="hs-identifier">TaggedArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier">TaggedBndr</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier">deTagExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><span class="hs-comment">-- * In/Out type synonyms</span></span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#InId"><span class="hs-identifier">InId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InBind"><span class="hs-identifier">InBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InExpr"><span class="hs-identifier">InExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InAlt"><span class="hs-identifier">InAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InArg"><span class="hs-identifier">InArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InType"><span class="hs-identifier">InType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InKind"><span class="hs-identifier">InKind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>               </span><span class="annot"><a href="GHC.Core.html#InBndr"><span class="hs-identifier">InBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#InVar"><span class="hs-identifier">InVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InCoercion"><span class="hs-identifier">InCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#InTyVar"><span class="hs-identifier">InTyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#InCoVar"><span class="hs-identifier">InCoVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#OutId"><span class="hs-identifier">OutId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutBind"><span class="hs-identifier">OutBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutExpr"><span class="hs-identifier">OutExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutAlt"><span class="hs-identifier">OutAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutArg"><span class="hs-identifier">OutArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutType"><span class="hs-identifier">OutType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutKind"><span class="hs-identifier">OutKind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>               </span><span class="annot"><a href="GHC.Core.html#OutBndr"><span class="hs-identifier">OutBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutVar"><span class="hs-identifier">OutVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#OutCoercion"><span class="hs-identifier">OutCoercion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutTyVar"><span class="hs-identifier">OutTyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#OutCoVar"><span class="hs-identifier">OutCoVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#MOutCoercion"><span class="hs-identifier">MOutCoercion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** 'Expr' construction</span></span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkLet"><span class="hs-identifier">mkLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkLets"><span class="hs-identifier">mkLets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkLetNonRec"><span class="hs-identifier">mkLetNonRec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkLetRec"><span class="hs-identifier">mkLetRec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkLams"><span class="hs-identifier">mkLams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkApps"><span class="hs-identifier">mkApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkTyApps"><span class="hs-identifier">mkTyApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkCoApps"><span class="hs-identifier">mkCoApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkVarApps"><span class="hs-identifier">mkVarApps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkTyArg"><span class="hs-identifier">mkTyArg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkIntLit"><span class="hs-identifier">mkIntLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkIntLitWrap"><span class="hs-identifier">mkIntLitWrap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkWordLit"><span class="hs-identifier">mkWordLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkWordLitWrap"><span class="hs-identifier">mkWordLitWrap</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkWord8Lit"><span class="hs-identifier">mkWord8Lit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkWord32LitWord32"><span class="hs-identifier">mkWord32LitWord32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkWord64LitWord64"><span class="hs-identifier">mkWord64LitWord64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkInt64LitInt64"><span class="hs-identifier">mkInt64LitInt64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkCharLit"><span class="hs-identifier">mkCharLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkStringLit"><span class="hs-identifier">mkStringLit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkFloatLit"><span class="hs-identifier">mkFloatLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkFloatLitFloat"><span class="hs-identifier">mkFloatLitFloat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkDoubleLit"><span class="hs-identifier">mkDoubleLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkDoubleLitDouble"><span class="hs-identifier">mkDoubleLitDouble</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkConApp"><span class="hs-identifier">mkConApp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkConApp2"><span class="hs-identifier">mkConApp2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkTyBind"><span class="hs-identifier">mkTyBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkCoBind"><span class="hs-identifier">mkCoBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier">varToCoreExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#varsToCoreExprs"><span class="hs-identifier">varsToCoreExprs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Core.html#mkBinds"><span class="hs-identifier">mkBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#isId"><span class="hs-identifier">isId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier">cmpAltCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#cmpAlt"><span class="hs-identifier">cmpAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#ltAlt"><span class="hs-identifier">ltAlt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Simple 'Expr' access functions and predicates</span></span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Core.html#bindersOf"><span class="hs-identifier">bindersOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#bindersOfBinds"><span class="hs-identifier">bindersOfBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#rhssOfBind"><span class="hs-identifier">rhssOfBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#rhssOfAlts"><span class="hs-identifier">rhssOfAlts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Core.html#foldBindersOfBindStrict"><span class="hs-identifier">foldBindersOfBindStrict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#foldBindersOfBindsStrict"><span class="hs-identifier">foldBindersOfBindsStrict</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectBinders"><span class="hs-identifier">collectBinders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectTyBinders"><span class="hs-identifier">collectTyBinders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectTyAndValBinders"><span class="hs-identifier">collectTyAndValBinders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectNBinders"><span class="hs-identifier">collectNBinders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectNValBinders_maybe"><span class="hs-identifier">collectNValBinders_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectArgs"><span class="hs-identifier">collectArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier">stripNArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectArgsTicks"><span class="hs-identifier">collectArgsTicks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier">flattenBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectFunSimple"><span class="hs-identifier">collectFunSimple</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Core.html#exprToType"><span class="hs-identifier">exprToType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Core.html#wrapLamBody"><span class="hs-identifier">wrapLamBody</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isValArg"><span class="hs-identifier">isValArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isTypeArg"><span class="hs-identifier">isTypeArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isCoArg"><span class="hs-identifier">isCoArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isTyCoArg"><span class="hs-identifier">isTyCoArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#valArgCount"><span class="hs-identifier">valArgCount</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#valBndrCount"><span class="hs-identifier">valBndrCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isRuntimeArg"><span class="hs-identifier">isRuntimeArg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isRuntimeVar"><span class="hs-identifier">isRuntimeVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Unfolding data types</span></span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier">Unfolding</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Core.html#UnfoldingCache"><span class="hs-identifier">UnfoldingCache</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfoldingGuidance"><span class="hs-identifier">UnfoldingGuidance</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#UnfoldingSource"><span class="hs-identifier">UnfoldingSource</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Constructing 'Unfolding's</span></span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier">noUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#bootUnfolding"><span class="hs-identifier">bootUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#evaldUnfolding"><span class="hs-identifier">evaldUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkOtherCon"><span class="hs-identifier">mkOtherCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Core.html#unSaturatedOk"><span class="hs-identifier">unSaturatedOk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#needSaturated"><span class="hs-identifier">needSaturated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#boringCxtOk"><span class="hs-identifier">boringCxtOk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#boringCxtNotOk"><span class="hs-identifier">boringCxtNotOk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Predicates and deconstruction on 'Unfolding'</span></span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Core.html#unfoldingTemplate"><span class="hs-identifier">unfoldingTemplate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#expandUnfolding_maybe"><span class="hs-identifier">expandUnfolding_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier">maybeUnfoldingTemplate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#otherCons"><span class="hs-identifier">otherCons</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isValueUnfolding"><span class="hs-identifier">isValueUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier">isEvaldUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isCheapUnfolding"><span class="hs-identifier">isCheapUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isExpandableUnfolding"><span class="hs-identifier">isExpandableUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isConLikeUnfolding"><span class="hs-identifier">isConLikeUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier">isCompulsoryUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier">isStableUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isStableUserUnfolding"><span class="hs-identifier">isStableUserUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isStableSystemUnfolding"><span class="hs-identifier">isStableSystemUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isInlineUnfolding"><span class="hs-identifier">isInlineUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isBootUnfolding"><span class="hs-identifier">isBootUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier">isBetterUnfoldingThan</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><a href="GHC.Core.html#hasCoreUnfolding"><span class="hs-identifier">hasCoreUnfolding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier">hasSomeUnfolding</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="GHC.Core.html#canUnfold"><span class="hs-identifier">canUnfold</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#neverUnfoldGuidance"><span class="hs-identifier">neverUnfoldGuidance</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#isStableSource"><span class="hs-identifier">isStableSource</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Annotated expression data types</span></span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier">AnnExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr%27"><span class="hs-identifier">AnnExpr'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnBind"><span class="hs-identifier">AnnBind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier">AnnAlt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Operations on annotated expressions</span></span><span>
</span><span id="line-75"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectAnnArgs"><span class="hs-identifier">collectAnnArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectAnnArgsTicks"><span class="hs-identifier">collectAnnArgsTicks</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Operations on annotations</span></span><span>
</span><span id="line-78"></span><span>        </span><span class="annot"><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier">deAnnotate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier">deAnnotate'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#deAnnAlt"><span class="hs-identifier">deAnnAlt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#deAnnBind"><span class="hs-identifier">deAnnBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Core.html#collectAnnBndrs"><span class="hs-identifier">collectAnnBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#collectNAnnBndrs"><span class="hs-identifier">collectNAnnBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Orphanhood</span></span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier">IsOrphan</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isOrphan"><span class="hs-identifier">isOrphan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#notOrphan"><span class="hs-identifier">notOrphan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#chooseOrphanAnchor"><span class="hs-identifier">chooseOrphanAnchor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Core rule data types</span></span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier">CoreRule</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>        </span><span class="annot"><a href="GHC.Types.Basic.html#RuleName"><span class="hs-identifier">RuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleFun"><span class="hs-identifier">RuleFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier">IdUnfoldingFun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#InScopeEnv"><span class="hs-identifier">InScopeEnv</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Rules.Config.html#RuleOpts"><span class="hs-identifier">RuleOpts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Operations on 'CoreRule's</span></span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><a href="GHC.Core.html#ruleArity"><span class="hs-identifier">ruleArity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#ruleName"><span class="hs-identifier">ruleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#ruleIdName"><span class="hs-identifier">ruleIdName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#ruleActivation"><span class="hs-identifier">ruleActivation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Core.html#setRuleIdName"><span class="hs-identifier">setRuleIdName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#ruleModule"><span class="hs-identifier">ruleModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Core.html#isBuiltinRule"><span class="hs-identifier">isBuiltinRule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isLocalRule"><span class="hs-identifier">isLocalRule</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#isAutoRule"><span class="hs-identifier">isAutoRule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#InScopeSet"><span class="hs-identifier">InScopeSet</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Rules.Config.html"><span class="hs-identifier">GHC.Core.Rules.Config</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Rules.Config.html#RuleOpts"><span class="hs-identifier">RuleOpts</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Literal.html"><span class="hs-identifier">GHC.Types.Literal</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html"><span class="hs-identifier">GHC.Types.Tickish</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TyCon</span></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Int.html"><span class="hs-identifier">Data.Int</span></a></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Word.html"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="annot"><a href="GHC.Core.html#mkApps"><span class="hs-operator hs-type">`mkApps`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkTyApps"><span class="hs-operator hs-type">`mkTyApps`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkVarApps"><span class="hs-operator hs-type">`mkVarApps`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-operator hs-type">`App`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#mkCoApps"><span class="hs-operator hs-type">`mkCoApps`</span></a></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- Left associative, so that we can say (f `mkTyApps` xs `mkVarApps` ys)</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{The main data types}
*                                                                      *
************************************************************************

These data types are the heart of the compiler
-}</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | This is the data type that represents GHCs core intermediate language. Currently</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- GHC uses System FC &lt;https://www.microsoft.com/en-us/research/publication/system-f-with-type-equality-coercions/&gt; for this purpose,</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- which is closely related to the simpler and better known System F &lt;http://en.wikipedia.org/wiki/System_F&gt;.</span><span>
</span><span id="line-136"></span><span class="hs-comment">--</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- We get from Haskell source to this Core language in a number of stages:</span><span>
</span><span id="line-138"></span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- 1. The source code is parsed into an abstract syntax tree, which is represented</span><span>
</span><span id="line-140"></span><span class="hs-comment">--    by the data type 'GHC.Hs.Expr.HsExpr' with the names being 'GHC.Types.Name.Reader.RdrNames'</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- 2. This syntax tree is /renamed/, which attaches a 'GHC.Types.Unique.Unique' to every 'GHC.Types.Name.Reader.RdrName'</span><span>
</span><span id="line-143"></span><span class="hs-comment">--    (yielding a 'GHC.Types.Name.Name') to disambiguate identifiers which are lexically identical.</span><span>
</span><span id="line-144"></span><span class="hs-comment">--    For example, this program:</span><span>
</span><span id="line-145"></span><span class="hs-comment">--</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-147"></span><span class="hs-comment">--      f x = let f x = x + 1</span><span>
</span><span id="line-148"></span><span class="hs-comment">--            in f (x - 2)</span><span>
</span><span id="line-149"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">--    Would be renamed by having 'Unique's attached so it looked something like this:</span><span>
</span><span id="line-152"></span><span class="hs-comment">--</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-154"></span><span class="hs-comment">--      f_1 x_2 = let f_3 x_4 = x_4 + 1</span><span>
</span><span id="line-155"></span><span class="hs-comment">--                in f_3 (x_2 - 2)</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-157"></span><span class="hs-comment">--    But see Note [Shadowing in Core] below.</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- 3. The resulting syntax tree undergoes type checking (which also deals with instantiating</span><span>
</span><span id="line-160"></span><span class="hs-comment">--    type class arguments) to yield a 'GHC.Hs.Expr.HsExpr' type that has 'GHC.Types.Id.Id' as it's names.</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- 4. Finally the syntax tree is /desugared/ from the expressive 'GHC.Hs.Expr.HsExpr' type into</span><span>
</span><span id="line-163"></span><span class="hs-comment">--    this 'Expr' type, which has far fewer constructors and hence is easier to perform</span><span>
</span><span id="line-164"></span><span class="hs-comment">--    optimization, analysis and code generation on.</span><span>
</span><span id="line-165"></span><span class="hs-comment">--</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- The type parameter @b@ is for the type of binders in the expression tree.</span><span>
</span><span id="line-167"></span><span class="hs-comment">--</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- The language consists of the following elements:</span><span>
</span><span id="line-169"></span><span class="hs-comment">--</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- *  Variables</span><span>
</span><span id="line-171"></span><span class="hs-comment">--    See Note [Variable occurrences in Core]</span><span>
</span><span id="line-172"></span><span class="hs-comment">--</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- *  Primitive literals</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- *  Applications: note that the argument may be a 'Type'.</span><span>
</span><span id="line-176"></span><span class="hs-comment">--    See Note [Representation polymorphism invariants]</span><span>
</span><span id="line-177"></span><span class="hs-comment">--</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- *  Lambda abstraction</span><span>
</span><span id="line-179"></span><span class="hs-comment">--    See Note [Representation polymorphism invariants]</span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- *  Recursive and non recursive @let@s. Operationally</span><span>
</span><span id="line-182"></span><span class="hs-comment">--    this corresponds to allocating a thunk for the things</span><span>
</span><span id="line-183"></span><span class="hs-comment">--    bound and then executing the sub-expression.</span><span>
</span><span id="line-184"></span><span class="hs-comment">--</span><span>
</span><span id="line-185"></span><span class="hs-comment">--    See Note [Core letrec invariant]</span><span>
</span><span id="line-186"></span><span class="hs-comment">--    See Note [Core let-can-float invariant]</span><span>
</span><span id="line-187"></span><span class="hs-comment">--    See Note [Representation polymorphism invariants]</span><span>
</span><span id="line-188"></span><span class="hs-comment">--    See Note [Core type and coercion invariant]</span><span>
</span><span id="line-189"></span><span class="hs-comment">--</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- *  Case expression. Operationally this corresponds to evaluating</span><span>
</span><span id="line-191"></span><span class="hs-comment">--    the scrutinee (expression examined) to weak head normal form</span><span>
</span><span id="line-192"></span><span class="hs-comment">--    and then examining at most one level of resulting constructor (i.e. you</span><span>
</span><span id="line-193"></span><span class="hs-comment">--    cannot do nested pattern matching directly with this).</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">--    The binder gets bound to the value of the scrutinee,</span><span>
</span><span id="line-196"></span><span class="hs-comment">--    and the 'Type' must be that of all the case alternatives</span><span>
</span><span id="line-197"></span><span class="hs-comment">--</span><span>
</span><span id="line-198"></span><span class="hs-comment">--    IMPORTANT: see Note [Case expression invariants]</span><span>
</span><span id="line-199"></span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span class="hs-comment">-- *  Cast an expression to a particular type.</span><span>
</span><span id="line-201"></span><span class="hs-comment">--    This is used to implement @newtype@s (a @newtype@ constructor or</span><span>
</span><span id="line-202"></span><span class="hs-comment">--    destructor just becomes a 'Cast' in Core) and GADTs.</span><span>
</span><span id="line-203"></span><span class="hs-comment">--</span><span>
</span><span id="line-204"></span><span class="hs-comment">-- *  Ticks. These are used to represent all the source annotation we</span><span>
</span><span id="line-205"></span><span class="hs-comment">--    support: profiling SCCs, HPC ticks, and GHCi breakpoints.</span><span>
</span><span id="line-206"></span><span class="hs-comment">--</span><span>
</span><span id="line-207"></span><span class="hs-comment">-- *  A type: this should only show up at the top level of an Arg</span><span>
</span><span id="line-208"></span><span class="hs-comment">--</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- *  A coercion</span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">{- Note [Why does Case have a 'Type' field?]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The obvious alternative is
   exprType (Case scrut bndr alts)
     | (_,_,rhs1):_ &lt;- alts
     = exprType rhs1

But caching the type in the Case constructor
  exprType (Case scrut bndr ty alts) = ty
is better for at least three reasons:

* It works when there are no alternatives (see case invariant 1 above)

* It might be faster in deeply-nested situations.

* It might not be quite the same as (exprType rhs) for one
  of the RHSs in alts. Consider a phantom type synonym
       type S a = Int
   and we want to form the case expression
        case x of { K (a::*) -&gt; (e :: S a) }
   Then exprType of the RHS is (S a), but we cannot make that be
   the 'ty' in the Case constructor because 'a' is simply not in
   scope there. Instead we must expand the synonym to Int before
   putting it in the Case constructor.  See GHC.Core.Utils.mkSingleAltCase.

   So we'd have to do synonym expansion in exprType which would
   be inefficient.

* The type stored in the case is checked with lintInTy. This checks
  (among other things) that it does not mention any variables that are
  not in scope. If we did not have the type there, it would be a bit
  harder for Core Lint to reject case blah of Ex x -&gt; x where
      data Ex = forall a. Ex a.
-}</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-248"></span><span class="hs-keyword">data</span><span> </span><span id="Expr"><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span></span><span> </span><span id="local-6989586621682588245"><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Var"><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span></span><span>   </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Lit"><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span></span><span>   </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="App"><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Lam"><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span></span><span>   </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Let"><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Case"><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- See Note [Case expression invariants]</span><span>
</span><span id="line-255"></span><span>                                    </span><span class="hs-comment">-- and Note [Why does Case have a 'Type' field?]</span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Cast"><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier hs-type">CoercionR</span></a></span><span>        </span><span class="hs-comment">-- The Coercion has Representational role</span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Tick"><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588245"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Type"><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Coercion"><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682588628"><span id="local-6989586621682588657"><span id="local-6989586621682588678"><span id="local-6989586621682588680"><span id="local-6989586621682588682"><span id="local-6989586621682588688"><span id="local-6989586621682588693"><span id="local-6989586621682588696"><span id="local-6989586621682588699"><span id="local-6989586621682588702"><span id="local-6989586621682588705"><span id="local-6989586621682588708"><span id="local-6989586621682588713"><span id="local-6989586621682588718"><span class="annot"><span class="annottext">Typeable (Expr b)
Typeable (Expr b) =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Expr b -&gt; c (Expr b))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Expr b))
-&gt; (Expr b -&gt; Constr)
-&gt; (Expr b -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Expr b)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Expr b)))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Expr b -&gt; Expr b)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b))
-&gt; Data (Expr b)
Expr b -&gt; Constr
Expr b -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Expr b -&gt; Expr b
forall b. Data b =&gt; Typeable (Expr b)
forall b. Data b =&gt; Expr b -&gt; Constr
forall b. Data b =&gt; Expr b -&gt; DataType
forall b.
Data b =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Expr b -&gt; Expr b
forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; u
forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; [u]
forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Expr b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Expr b -&gt; c (Expr b)
forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Expr b))
forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Expr b))
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Expr b)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Expr b -&gt; c (Expr b)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Expr b))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Expr b))
$cgfoldl :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Expr b -&gt; c (Expr b)
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Expr b -&gt; c (Expr b)
$cgunfold :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Expr b)
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Expr b)
$ctoConstr :: forall b. Data b =&gt; Expr b -&gt; Constr
toConstr :: Expr b -&gt; Constr
$cdataTypeOf :: forall b. Data b =&gt; Expr b -&gt; DataType
dataTypeOf :: Expr b -&gt; DataType
$cdataCast1 :: forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Expr b))
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Expr b))
$cdataCast2 :: forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Expr b))
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Expr b))
$cgmapT :: forall b.
Data b =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Expr b -&gt; Expr b
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Expr b -&gt; Expr b
$cgmapQl :: forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
$cgmapQr :: forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Expr b -&gt; r
$cgmapQ :: forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; [u]
$cgmapQi :: forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Expr b -&gt; u
$cgmapM :: forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
$cgmapMp :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
$cgmapMo :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Expr b -&gt; m (Expr b)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- | Type synonym for expressions that occur in function argument positions.</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- Only 'Arg' should contain a 'Type' at top level, general 'Expr' should not</span><span>
</span><span id="line-264"></span><span class="hs-keyword">type</span><span> </span><span id="Arg"><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span></span><span> </span><span id="local-6989586621682588730"><span class="annot"><a href="#local-6989586621682588730"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588730"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="hs-comment">-- | A case split alternative. Consists of the constructor leading to the alternative,</span><span>
</span><span id="line-267"></span><span class="hs-comment">-- the variables bound from the constructor, and the expression to be executed given that binding.</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- The default alternative is @(DEFAULT, [], rhs)@</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-272"></span><span class="hs-keyword">data</span><span> </span><span id="Alt"><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span></span><span> </span><span id="local-6989586621682588269"><span class="annot"><a href="#local-6989586621682588269"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="Alt"><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588269"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588269"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682588738"><span id="local-6989586621682588744"><span id="local-6989586621682588749"><span id="local-6989586621682588751"><span id="local-6989586621682588753"><span id="local-6989586621682588759"><span id="local-6989586621682588764"><span id="local-6989586621682588767"><span id="local-6989586621682588770"><span id="local-6989586621682588773"><span id="local-6989586621682588776"><span id="local-6989586621682588779"><span id="local-6989586621682588784"><span id="local-6989586621682588789"><span class="annot"><span class="annottext">Typeable (Alt b)
Typeable (Alt b) =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Alt b -&gt; c (Alt b))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Alt b))
-&gt; (Alt b -&gt; Constr)
-&gt; (Alt b -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Alt b)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Alt b)))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Alt b -&gt; Alt b)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b))
-&gt; Data (Alt b)
Alt b -&gt; Constr
Alt b -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Alt b -&gt; Alt b
forall b. Data b =&gt; Typeable (Alt b)
forall b. Data b =&gt; Alt b -&gt; Constr
forall b. Data b =&gt; Alt b -&gt; DataType
forall b. Data b =&gt; (forall b. Data b =&gt; b -&gt; b) -&gt; Alt b -&gt; Alt b
forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; u
forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; [u]
forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Alt b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Alt b -&gt; c (Alt b)
forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Alt b))
forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Alt b))
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Alt b)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Alt b -&gt; c (Alt b)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Alt b))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Alt b))
$cgfoldl :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Alt b -&gt; c (Alt b)
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Alt b -&gt; c (Alt b)
$cgunfold :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Alt b)
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Alt b)
$ctoConstr :: forall b. Data b =&gt; Alt b -&gt; Constr
toConstr :: Alt b -&gt; Constr
$cdataTypeOf :: forall b. Data b =&gt; Alt b -&gt; DataType
dataTypeOf :: Alt b -&gt; DataType
$cdataCast1 :: forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Alt b))
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Alt b))
$cdataCast2 :: forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Alt b))
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Alt b))
$cgmapT :: forall b. Data b =&gt; (forall b. Data b =&gt; b -&gt; b) -&gt; Alt b -&gt; Alt b
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Alt b -&gt; Alt b
$cgmapQl :: forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
$cgmapQr :: forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Alt b -&gt; r
$cgmapQ :: forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; [u]
$cgmapQi :: forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Alt b -&gt; u
$cgmapM :: forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
$cgmapMp :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
$cgmapMo :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Alt b -&gt; m (Alt b)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span class="annot"><span class="hs-comment">-- | A case alternative constructor (i.e. pattern match)</span></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-280"></span><span class="hs-keyword">data</span><span> </span><span id="AltCon"><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-var">AltCon</span></a></span></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DataAlt"><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-var">DataAlt</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>   </span><span class="hs-comment">--  ^ A plain data constructor: @case e of { Foo x -&gt; ... }@.</span><span>
</span><span id="line-282"></span><span>                      </span><span class="hs-comment">-- Invariant: the 'DataCon' is always from a @data@ type, and never from a @newtype@</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LitAlt"><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-var">LitAlt</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span>   </span><span class="hs-comment">-- ^ A literal: @case e of { 1 -&gt; ... }@</span><span>
</span><span id="line-285"></span><span>                      </span><span class="hs-comment">-- Invariant: always an *unlifted* literal</span><span>
</span><span id="line-286"></span><span>                      </span><span class="hs-comment">-- See Note [Literal alternatives]</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DEFAULT"><span class="annot"><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ Trivial alternative: @case e of { _ -&gt; ... }@</span></span><span>
</span><span id="line-289"></span><span>   </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682588797"><span id="local-6989586621682588806"><span class="annot"><span class="annottext">AltCon -&gt; AltCon -&gt; Bool
(AltCon -&gt; AltCon -&gt; Bool)
-&gt; (AltCon -&gt; AltCon -&gt; Bool) -&gt; Eq AltCon
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AltCon -&gt; AltCon -&gt; Bool
== :: AltCon -&gt; AltCon -&gt; Bool
$c/= :: AltCon -&gt; AltCon -&gt; Bool
/= :: AltCon -&gt; AltCon -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682588813"><span id="local-6989586621682588818"><span id="local-6989586621682588822"><span id="local-6989586621682588824"><span id="local-6989586621682588826"><span id="local-6989586621682588831"><span id="local-6989586621682588836"><span id="local-6989586621682588839"><span id="local-6989586621682588842"><span id="local-6989586621682588845"><span id="local-6989586621682588848"><span id="local-6989586621682588851"><span id="local-6989586621682588856"><span id="local-6989586621682588861"><span class="annot"><span class="annottext">Typeable AltCon
Typeable AltCon =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; AltCon -&gt; c AltCon)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AltCon)
-&gt; (AltCon -&gt; Constr)
-&gt; (AltCon -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AltCon))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c AltCon))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; AltCon -&gt; AltCon)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon)
-&gt; Data AltCon
AltCon -&gt; Constr
AltCon -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; AltCon -&gt; AltCon
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AltCon
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; AltCon -&gt; c AltCon
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AltCon)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c AltCon)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; AltCon -&gt; c AltCon
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; AltCon -&gt; c AltCon
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AltCon
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c AltCon
$ctoConstr :: AltCon -&gt; Constr
toConstr :: AltCon -&gt; Constr
$cdataTypeOf :: AltCon -&gt; DataType
dataTypeOf :: AltCon -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AltCon)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c AltCon)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c AltCon)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c AltCon)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; AltCon -&gt; AltCon
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; AltCon -&gt; AltCon
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; AltCon -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; [u]
$cgmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; AltCon -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; AltCon -&gt; m AltCon
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- This instance is a bit shady. It can only be used to compare AltCons for</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- a single type constructor. Fortunately, it seems quite unlikely that we'll</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- ever need to compare AltCons for different type constructors.</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- The instance adheres to the order described in Note [Case expression invariants]</span><span>
</span><span id="line-295"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682588869"><span id="local-6989586621682588873"><span id="local-6989586621682588876"><span id="local-6989586621682588879"><span id="local-6989586621682588882"><span id="local-6989586621682588885"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-296"></span><span>  </span><span id="local-6989586621682588894"><span class="annot"><span class="annottext">compare :: AltCon -&gt; AltCon -&gt; Ordering
</span><a href="#local-6989586621682588894"><span class="hs-identifier hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621682588896"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588896"><span class="hs-identifier hs-var">con1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621682588897"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588897"><span class="hs-identifier hs-var">con2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Ordering -&gt; Ordering
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588896"><span class="hs-identifier hs-var">con1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588897"><span class="hs-identifier hs-var">con2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; Ordering) -&gt; Ordering -&gt; Ordering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588896"><span class="hs-identifier hs-var">con1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682588897"><span class="hs-identifier hs-var">con2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-300"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-301"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span id="local-6989586621682588901"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682588901"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span id="local-6989586621682588902"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682588902"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Literal -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682588901"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682588902"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-303"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-304"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="annot"><span class="hs-comment">-- | Binding, used for top level bindings in a module and local bindings in a @let@.</span></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-310"></span><span class="hs-keyword">data</span><span> </span><span id="Bind"><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-var">Bind</span></a></span></span><span> </span><span id="local-6989586621682588204"><span class="annot"><a href="#local-6989586621682588204"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NonRec"><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621682588204"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588204"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span id="Rec"><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588204"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588204"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682588911"><span id="local-6989586621682588917"><span id="local-6989586621682588923"><span id="local-6989586621682588925"><span id="local-6989586621682588927"><span id="local-6989586621682588933"><span id="local-6989586621682588938"><span id="local-6989586621682588941"><span id="local-6989586621682588944"><span id="local-6989586621682588947"><span id="local-6989586621682588950"><span id="local-6989586621682588953"><span id="local-6989586621682588958"><span id="local-6989586621682588963"><span class="annot"><span class="annottext">Typeable (Bind b)
Typeable (Bind b) =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Bind b -&gt; c (Bind b))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Bind b))
-&gt; (Bind b -&gt; Constr)
-&gt; (Bind b -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Bind b)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Bind b)))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Bind b -&gt; Bind b)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b))
-&gt; Data (Bind b)
Bind b -&gt; Constr
Bind b -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Bind b -&gt; Bind b
forall b. Data b =&gt; Typeable (Bind b)
forall b. Data b =&gt; Bind b -&gt; Constr
forall b. Data b =&gt; Bind b -&gt; DataType
forall b.
Data b =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Bind b -&gt; Bind b
forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; u
forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; [u]
forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Bind b)
forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Bind b -&gt; c (Bind b)
forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Bind b))
forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Bind b))
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Bind b)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Bind b -&gt; c (Bind b)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Bind b))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Bind b))
$cgfoldl :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Bind b -&gt; c (Bind b)
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Bind b -&gt; c (Bind b)
$cgunfold :: forall b (c :: * -&gt; *).
Data b =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Bind b)
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Bind b)
$ctoConstr :: forall b. Data b =&gt; Bind b -&gt; Constr
toConstr :: Bind b -&gt; Constr
$cdataTypeOf :: forall b. Data b =&gt; Bind b -&gt; DataType
dataTypeOf :: Bind b -&gt; DataType
$cdataCast1 :: forall b (t :: * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Bind b))
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Bind b))
$cdataCast2 :: forall b (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data b, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Bind b))
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Bind b))
$cgmapT :: forall b.
Data b =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Bind b -&gt; Bind b
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Bind b -&gt; Bind b
$cgmapQl :: forall b r r'.
Data b =&gt;
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
$cgmapQr :: forall b r r'.
Data b =&gt;
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Bind b -&gt; r
$cgmapQ :: forall b u. Data b =&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; [u]
$cgmapQi :: forall b u.
Data b =&gt;
Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Bind b -&gt; u
$cgmapM :: forall b (m :: * -&gt; *).
(Data b, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
$cgmapMp :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
$cgmapMo :: forall b (m :: * -&gt; *).
(Data b, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Bind b -&gt; m (Bind b)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | Helper function. You can use the result of 'mkBinds' with 'mkLets' for</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- instance.</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">--   * @'mkBinds' 'Recursive' binds@ makes a single mutually-recursive</span><span>
</span><span id="line-318"></span><span class="hs-comment">--     bindings with all the rhs/lhs pairs in @binds@</span><span>
</span><span id="line-319"></span><span class="hs-comment">--   * @'mkBinds' 'NonRecursive' binds@ makes one non-recursive binding</span><span>
</span><span id="line-320"></span><span class="hs-comment">--     for each rhs/lhs pairs in @binds@</span><span>
</span><span id="line-321"></span><span id="local-6989586621682588202"><span class="annot"><a href="GHC.Core.html#mkBinds"><span class="hs-identifier hs-type">mkBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588202"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588202"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588202"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-322"></span><span id="mkBinds"><span class="annot"><span class="annottext">mkBinds :: forall b. RecFlag -&gt; [(b, Expr b)] -&gt; [Bind b]
</span><a href="GHC.Core.html#mkBinds"><span class="hs-identifier hs-var hs-var">mkBinds</span></a></span></span><span> </span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a></span><span> </span><span id="local-6989586621682588970"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682588970"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[(b, Expr b)] -&gt; Bind b
forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682588970"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-323"></span><span class="annot"><a href="GHC.Core.html#mkBinds"><span class="hs-identifier hs-var">mkBinds</span></a></span><span> </span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a></span><span> </span><span id="local-6989586621682588971"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682588971"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((b, Expr b) -&gt; Bind b) -&gt; [(b, Expr b)] -&gt; [Bind b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; Expr b -&gt; Bind b) -&gt; (b, Expr b) -&gt; Bind b
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Expr b -&gt; Bind b
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682588971"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">{-
Note [Literal alternatives]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Literal alternatives (LitAlt lit) are always for *un-lifted* literals.
We have one literal, a literal Integer, that is lifted, and we don't
allow in a LitAlt, because LitAlt cases don't do any evaluation. Also
(see #5603) if you say
    case 3 of
      IS x -&gt; ...
      IP _ -&gt; ...
      IN _ -&gt; ...
(where IS, IP, IN are the constructors for Integer) we don't want the
simplifier calling findAlt with argument (LitAlt 3).  No no.  Integer
literals are an opaque encoding of an algebraic data type, not of
an unlifted literal, like all the others.

Also, we do not permit case analysis with literal patterns on floating-point
types. See #9238 and Note [Rules for floating-point comparisons] in
GHC.Core.Opt.ConstantFold for the rationale for this restriction.

-------------------------- GHC.Core INVARIANTS ---------------------------

Note [Variable occurrences in Core]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Variable /occurrences/ are never CoVars, though /bindings/ can be.
All CoVars appear in Coercions.

For example
  \(c :: Age~#Int) (d::Int). d |&gt; (sym c)
Here 'c' is a CoVar, which is lambda-bound, but it /occurs/ in
a Coercion, (sym c).

Note [Shadowing in Core]
~~~~~~~~~~~~~~~~~~~~~~~~
You might wonder if there is an invariant that a Core expression has no
&quot;shadowing&quot;.  For example, is this illegal?
     \x. \x. blah     -- x is shadowed
Answer; no!  Core does /not/ have a no-shadowing invariant.

Neither the simplifier nor any other pass GUARANTEES that shadowing is
avoided. Thus, all passes SHOULD work fine even in the presence of
arbitrary shadowing in their inputs.

So the Unique in a Var is not really unique at all.  Still, it's very
useful to give a constant-time equality/ordering for Vars, and to give
a key that can be used to make sets of Vars (VarSet), or mappings from
Vars to other things (VarEnv).   Moreover, if you do want to eliminate
shadowing, you can give a new Unique to an Id without changing its
printable name, which makes debugging easier.

It would in many ways be easier to have a no-shadowing invariant.  And the
Simplifier does its best to clone variables that are shadowed.  But it is
extremely difficult to GUARANTEE it:

* We use `GHC.Types.Id.mkTemplateLocal` to make up local binders, with uniques
  that are locally-unique (enough for the purpose) but not globally unique.
  It is convenient not to have to plumb a unique supply to these functions.

* It is very difficult for the Simplifier to gurantee a no-shadowing result.
  See Note [Shadowing in the Simplifier] in GHC.Core.Opt.Simplify.Iteration.

* See Note [Shadowing in CSE] in GHC.Core.Opt.CSE

* See Note [Shadowing in SpecConstr] in GHC.Core.Opt.SpecContr

Note [Core letrec invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The Core letrec invariant:

  The right hand sides of all /top-level/ or /recursive/
  bindings must be of lifted type

See &quot;Type#type_classification&quot; in GHC.Core.Type
for the meaning of &quot;lifted&quot; vs. &quot;unlifted&quot;.

For the non-top-level, non-recursive case see
Note [Core let-can-float invariant].

At top level, however, there are two exceptions to this rule:

(TL1) A top-level binding is allowed to bind primitive string literal,
      (which is unlifted).  See Note [Core top-level string literals].

(TL2) In Core, we generate a top-level binding for every non-newtype data
constructor worker or wrapper
      e.g.   data T = MkT Int
      we generate
             MkT :: Int -&gt; T
             MkT = \x. MkT x
      (This binding looks recursive, but isn't; it defines a top-level, curried
      function whose body just allocates and returns the data constructor.)

      But if (a) the data constructor is nullary and (b) the data type is unlifted,
      this binding is unlifted.
      e.g.   data S :: UnliftedType where { S1 :: S, S2 :: S -&gt; S }
      we generate
             S1 :: S   -- A top-level unlifted binding
             S1 = S1
      We allow this top-level unlifted binding to exist.

Note [Core let-can-float invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The let-can-float invariant:

    The right hand side of a /non-top-level/, /non-recursive/ binding
    may be of unlifted type, but only if
    the expression is ok-for-speculation
    or the 'Let' is for a join point.

    (For top-level or recursive lets see Note [Core letrec invariant].)

This means that the let can be floated around
without difficulty. For example, this is OK:

   y::Int# = x +# 1#

But this is not, as it may affect termination if the
expression is floated out:

   y::Int# = fac 4#

In this situation you should use @case@ rather than a @let@. The function
'GHC.Core.Utils.needsCaseBinding' can help you determine which to generate, or
alternatively use 'GHC.Core.Make.mkCoreLet' rather than this constructor directly,
which will generate a @case@ if necessary

The let-can-float invariant is initially enforced by mkCoreLet in GHC.Core.Make.

Historical Note [The let/app invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Before 2022 GHC used the &quot;let/app invariant&quot;, which applied the let-can-float rules
to the argument of an application, as well as to the RHS of a let.  This made some
kind of sense, because 'let' can always be encoded as application:
   let x=rhs in b   =    (\x.b) rhs

But the let/app invariant got in the way of RULES; see #19313.  For example
  up :: Int# -&gt; Int#
  {-# RULES &quot;up/down&quot; forall x. up (down x) = x #-}
The LHS of this rule doesn't satisfy the let/app invariant.

Indeed RULES is a big reason that GHC doesn't use ANF, where the argument of an
application is always a variable or a constant.  To allow RULES to work nicely
we need to allow lots of things in the arguments of a call.

TL;DR: we relaxed the let/app invariant to become the let-can-float invariant.

Note [Core top-level string literals]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
As an exception to the usual rule that top-level binders must be lifted,
we allow binding primitive string literals (of type Addr#) at the
top level. This allows us to share string literals earlier in the pipeline and
crucially allows other optimizations in the Core2Core pipeline to fire.
Consider,

  f n = let a::Addr# = &quot;foo&quot;#
        in \x -&gt; blah

In order to be able to inline `f`, we would like to float `a` to the top.
Another option would be to inline `a`, but that would lead to duplicating string
literals, which we want to avoid. See #8472.

The solution is simply to allow top-level unlifted binders. We can't allow
arbitrary unlifted expression at the top-level though, unlifted binders cannot
be thunks, so we just allow string literals.

We allow the top-level primitive string literals to be wrapped in Ticks
in the same way they can be wrapped when nested in an expression.
CoreToSTG currently discards Ticks around top-level primitive string literals.
See #14779.

Also see Note [Compilation plan for top-level string literals].

Note [Compilation plan for top-level string literals]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here is a summary on how top-level string literals are handled by various
parts of the compilation pipeline.

* In the source language, there is no way to bind a primitive string literal
  at the top level.

* In Core, we have a special rule that permits top-level Addr# bindings. See
  Note [Core top-level string literals]. Core-to-core passes may introduce
  new top-level string literals.

  See GHC.Core.Utils.exprIsTopLevelBindable, and exprIsTickedString

* In STG, top-level string literals are explicitly represented in the syntax
  tree.

* A top-level string literal may end up exported from a module. In this case,
  in the object file, the content of the exported literal is given a label with
  the _bytes suffix.

Note [NON-BOTTOM-DICTS invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It is a global invariant (not checkable by Lint) that

     every non-newtype dictionary-typed expression is non-bottom.

These conditions are captured by GHC.Core.Type.isTerminatingType.

How are we so sure about this?  Dictionaries are built by GHC in only two ways:

* A dictionary function (DFun), arising from an instance declaration.
  DFuns do no computation: they always return a data constructor immediately.
  See DFunUnfolding in GHC.Core.  So the result of a call to a DFun is always
  non-bottom.

  Exception: newtype dictionaries.

  Plus: see the Very Nasty Wrinkle in Note [Speculative evaluation]
  in GHC.CoreToStg.Prep

* A superclass selection from some other dictionary. This is harder to guarantee:
  see Note [Recursive superclasses] and Note [Solving superclass constraints]
  in GHC.Tc.TyCl.Instance.

A bad Core-to-Core pass could invalidate this reasoning, but that's too bad.
It's still an invariant of Core programs generated by GHC from Haskell, and
Core-to-Core passes maintain it.

Why is it useful to know that dictionaries are non-bottom?

1. It justifies the use of `-XDictsStrict`;
   see `GHC.Core.Types.Demand.strictifyDictDmd`

2. It means that (eq_sel d) is ok-for-speculation and thus
     case (eq_sel d) of _ -&gt; blah
   can be discarded by the Simplifier.  See these Notes:
   Note [exprOkForSpeculation and type classes] in GHC.Core.Utils
   Note[Speculative evaluation] in GHC.CoreToStg.Prep

Note [Case expression invariants]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Case expressions are one of the more complicated elements of the Core
language, and come with a number of invariants.  All of them should be
checked by Core Lint.

1. The list of alternatives may be empty;
   See Note [Empty case alternatives]

2. The 'DEFAULT' case alternative must be first in the list,
   if it occurs at all.  Checked in GHC.Core.Lint.checkCaseAlts.

3. The remaining cases are in order of (strictly) increasing
     tag  (for 'DataAlts') or
     lit  (for 'LitAlts').
   This makes finding the relevant constructor easy, and makes
   comparison easier too.   Checked in GHC.Core.Lint.checkCaseAlts.

4. The list of alternatives must be exhaustive. An /exhaustive/ case
   does not necessarily mention all constructors:

   @
        data Foo = Red | Green | Blue
        ... case x of
              Red   -&gt; True
              other -&gt; f (case x of
                              Green -&gt; ...
                              Blue  -&gt; ... ) ...
   @

   The inner case does not need a @Red@ alternative, because @x@
   can't be @Red@ at that program point.

   This is not checked by Core Lint -- it's very hard to do so.
   E.g. suppose that inner case was floated out, thus:
         let a = case x of
                   Green -&gt; ...
                   Blue  -&gt; ... )
         case x of
           Red   -&gt; True
           other -&gt; f a
   Now it's really hard to see that the Green/Blue case is
   exhaustive.  But it is.

   If you have a case-expression that really /isn't/ exhaustive,
   we may generate seg-faults.  Consider the Green/Blue case
   above.  Since there are only two branches we may generate
   code that tests for Green, and if not Green simply /assumes/
   Blue (since, if the case is exhaustive, that's all that
   remains).  Of course, if it's not Blue and we start fetching
   fields that should be in a Blue constructor, we may die
   horribly. See also Note [Core Lint guarantee] in GHC.Core.Lint.

5. Floating-point values must not be scrutinised against literals.
   See #9238 and Note [Rules for floating-point comparisons]
   in GHC.Core.Opt.ConstantFold for rationale.  Checked in lintCaseExpr;
   see the call to isFloatingPrimTy.

6. The 'ty' field of (Case scrut bndr ty alts) is the type of the
   /entire/ case expression.  Checked in lintAltExpr.
   See also Note [Why does Case have a 'Type' field?].

7. The type of the scrutinee must be the same as the type
   of the case binder, obviously.  Checked in lintCaseExpr.

8. The multiplicity of the binders in constructor patterns must be the
   multiplicity of the corresponding field /scaled by the multiplicity of the
   case binder/. Checked in lintCoreAlt.

Note [Core type and coercion invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We allow a /non-recursive/, /non-top-level/ let to bind type and
coercion variables.  These can be very convenient for postponing type
substitutions until the next run of the simplifier.

* A type variable binding must have a RHS of (Type ty)

* A coercion variable binding must have a RHS of (Coercion co)

  It is possible to have terms that return a coercion, but we use
  case-binding for those; e.g.
     case (eq_sel d) of (co :: a ~# b) -&gt; blah
  where eq_sel :: (a~b) -&gt; (a~#b)

  Or even
      case (df @Int) of (co :: a ~# b) -&gt; blah
  Which is very exotic, and I think never encountered; but see
  Note [Equality superclasses in quantified constraints]
  in GHC.Tc.Solver.Dict

Note [Representation polymorphism invariants]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
GHC allows us to abstract over calling conventions using **representation polymorphism**.
For example, we have:

  ($) :: forall (r :: RuntimeRep) (a :: Type) (b :: TYPE r). (a -&gt; b) -&gt; a -&gt; b

In this example, the type `b` is representation-polymorphic: it has kind `TYPE r`,
where the type variable `r :: RuntimeRep` abstracts over the runtime representation
of values of type `b`.

To ensure that programs containing representation-polymorphism remain compilable,
we enforce the following representation-polymorphism invariants:

The paper &quot;Levity Polymorphism&quot; [PLDI'17] states the first two invariants:

  I1. The type of a bound variable must have a fixed runtime representation
      (except for join points: See Note [Invariants on join points])
  I2. The type of a function argument must have a fixed runtime representation.

Example of I1:

  \(r::RuntimeRep). \(a::TYPE r). \(x::a). e

    This contravenes I1 because x's type has kind (TYPE r), which has 'r' free.
    We thus wouldn't know how to compile this lambda abstraction.

Example of I2:

  f (undefined :: (a :: TYPE r))

    This contravenes I2: we are applying the function `f` to a value
    with an unknown runtime representation.

Note that these two invariants require us to check other types than just the
types of bound variables and types of function arguments, due to transformations
that GHC performs. For example, the definition

  myCoerce :: forall {r} (a :: TYPE r) (b :: TYPE r). Coercible a b =&gt; a -&gt; b
  myCoerce = coerce

is invalid, because `coerce` has no binding (see GHC.Types.Id.Make.coerceId).
So, before code-generation, GHC saturates the RHS of 'myCoerce' by performing
an eta-expansion (see GHC.CoreToStg.Prep.maybeSaturate):

  myCoerce = \ (x :: TYPE r) -&gt; coerce x

However, this transformation would be invalid, because now the binding of x
in the lambda abstraction would violate I1.

See Note [Representation-polymorphism checking built-ins] in GHC.Tc.Utils.Concrete
and Note [Linting representation-polymorphic builtins] in GHC.Core.Lint for
more details.

Note that we currently require something slightly stronger than a fixed runtime
representation: we check whether bound variables and function arguments have a
/fixed RuntimeRep/ in the sense of Note [Fixed RuntimeRep] in GHC.Tc.Utils.Concrete.
See Note [Representation polymorphism checking] in GHC.Tc.Utils.Concrete
for an overview of how we enforce these invariants in the typechecker.

Note [Empty case alternatives]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The alternatives of a case expression should be exhaustive.  But
this exhaustive list can be empty!

* A case expression can have empty alternatives if (and only if) the
  scrutinee is bound to raise an exception or diverge. When do we know
  this?  See Note [Bottoming expressions] in GHC.Core.Utils.

* The possibility of empty alternatives is one reason we need a type on
  the case expression: if the alternatives are empty we can't get the
  type from the alternatives!

* In the case of empty types (see Note [Bottoming expressions]), say
    data T
  we do NOT want to replace
    case (x::T) of Bool {}   --&gt;   error Bool &quot;Inaccessible case&quot;
  because x might raise an exception, and *that*'s what we want to see!
  (#6067 is an example.) To preserve semantics we'd have to say
     x `seq` error Bool &quot;Inaccessible case&quot;
  but the 'seq' is just such a case, so we are back to square 1.

* We can use the empty-alternative construct to coerce error values from
  one type to another.  For example

    f :: Int -&gt; Int
    f n = error &quot;urk&quot;

    g :: Int -&gt; (# Char, Bool #)
    g x = case f x of { 0 -&gt; ..., n -&gt; ... }

  Then if we inline f in g's RHS we get
    case (error Int &quot;urk&quot;) of (# Char, Bool #) { ... }
  and we can discard the alternatives since the scrutinee is bottom to give
    case (error Int &quot;urk&quot;) of (# Char, Bool #) {}

  This is nicer than using an unsafe coerce between Int ~ (# Char,Bool #),
  if for no other reason that we don't need to instantiate the (~) at an
  unboxed type.

* We treat a case expression with empty alternatives as trivial iff
  its scrutinee is (see GHC.Core.Utils.exprIsTrivial).  This is actually
  important; see Note [Empty case is trivial] in GHC.Core.Utils

* We lower empty cases in GHC.CoreToStg.coreToStgExpr to an eval on the
  scrutinee.

Historical Note: We used to lower EmptyCase in CorePrep by way of an
unsafeCoercion on the scrutinee, but that yielded panics in CodeGen when
we were beginning to eta expand in arguments, plus required to mess with
heterogenously-kinded coercions. It's simpler to stick to it just a bit longer.

Note [Join points]
~~~~~~~~~~~~~~~~~~
In Core, a *join point* is a specially tagged function whose only occurrences
are saturated tail calls. A tail call can appear in these places:

  1. In the branches (not the scrutinee) of a case
  2. Underneath a let (value or join point)
  3. Inside another join point

We write a join-point declaration as
  join j @a @b x y = e1 in e2,
like a let binding but with &quot;join&quot; instead (or &quot;join rec&quot; for &quot;let rec&quot;). Note
that we put the parameters before the = rather than using lambdas; this is
because it's relevant how many parameters the join point takes *as a join
point.* This number is called the *join arity,* distinct from arity because it
counts types as well as values. Note that a join point may return a lambda! So
  join j x = x + 1
is different from
  join j = \x -&gt; x + 1
The former has join arity 1, while the latter has join arity 0.

The identifier for a join point is called a join id or a *label.* An invocation
is called a *jump.* We write a jump using the jump keyword:

  jump j 3

The words *label* and *jump* are evocative of assembly code (or Cmm) for a
reason: join points are indeed compiled as labeled blocks, and jumps become
actual jumps (plus argument passing and stack adjustment). There is no closure
allocated and only a fraction of the function-call overhead. Hence we would
like as many functions as possible to become join points (see OccurAnal) and
the type rules for join points ensure we preserve the properties that make them
efficient.

In the actual AST, a join point is indicated by the IdDetails of the binder: a
local value binding gets 'VanillaId' but a join point gets a 'JoinId' with its
join arity.

For more details, see the paper:

  Luke Maurer, Paul Downen, Zena Ariola, and Simon Peyton Jones. &quot;Compiling
  without continuations.&quot; Submitted to PLDI'17.

  https://www.microsoft.com/en-us/research/publication/compiling-without-continuations/

Note [Invariants on join points]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Join points must follow these invariants:

  1. All occurrences must be tail calls. Each of these tail calls must pass the
     same number of arguments, counting both types and values; we call this the
     &quot;join arity&quot; (to distinguish from regular arity, which only counts values).

     See Note [Join points are less general than the paper]

  2. For join arity n, the right-hand side must begin with at least n lambdas.
     No ticks, no casts, just lambdas!  C.f. GHC.Core.Utils.joinRhsArity.

     2a. Moreover, this same constraint applies to any unfolding of
         the binder.  Reason: if we want to push a continuation into
         the RHS we must push it into the unfolding as well.

     2b. The Arity (in the IdInfo) of a join point varies independently of the
         join-arity. For example, we could have
             j x = case x of { T -&gt; \y.y; F -&gt; \y.3 }
         Its join-arity is 1, but its idArity is 2; and we do not eta-expand
         join points: see Note [Do not eta-expand join points] in
                          GHC.Core.Opt.Simplify.Utils.

         Allowing the idArity to be bigger than the join-arity is
         important in arityType; see GHC.Core.Opt.Arity
         Note [Arity for recursive join bindings]

         Historical note: see #17294.

  3. If the binding is recursive, then all other bindings in the recursive group
     must also be join points.

  4. The binding's type must not be polymorphic in its return type (as defined
     in Note [The polymorphism rule of join points]).

However, join points have simpler invariants in other ways

  5. A join point can have an unboxed type without the RHS being
     ok-for-speculation (i.e. drop the let-can-float invariant)
     e.g.  let j :: Int# = factorial x in ...

  6. The RHS of join point is not required to have a fixed runtime representation,
     e.g.  let j :: r :: TYPE l = fail (##) in ...
     This happened in an intermediate program #13394

Examples:

  join j1  x = 1 + x in jump j (jump j x)  -- Fails 1: non-tail call
  join j1' x = 1 + x in if even a
                          then jump j1 a
                          else jump j1 a b -- Fails 1: inconsistent calls
  join j2  x = flip (+) x in j2 1 2        -- Fails 2: not enough lambdas
  join j2' x = \y -&gt; x + y in j3 1         -- Passes: extra lams ok
  join j @a (x :: a) = x                   -- Fails 4: polymorphic in ret type

Invariant 1 applies to left-hand sides of rewrite rules, so a rule for a join
point must have an exact call as its LHS.

Strictly speaking, invariant 3 is redundant, since a call from inside a lazy
binding isn't a tail call. Since a let-bound value can't invoke a free join
point, then, they can't be mutually recursive. (A Core binding group *can*
include spurious extra bindings if the occurrence analyser hasn't run, so
invariant 3 does still need to be checked.) For the rigorous definition of
&quot;tail call&quot;, see Section 3 of the paper (Note [Join points]).

Invariant 4 is subtle; see Note [The polymorphism rule of join points].

Invariant 6 is to enable code like this:

  f = \(r :: RuntimeRep) (a :: TYPE r) (x :: T).
      join j :: a
           j = error @r @a &quot;bloop&quot;
      in case x of
           A -&gt; j
           B -&gt; j
           C -&gt; error @r @a &quot;blurp&quot;

Core Lint will check these invariants, anticipating that any binder whose
OccInfo is marked AlwaysTailCalled will become a join point as soon as the
simplifier (or simpleOptPgm) runs.

Note [Join points are less general than the paper]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the paper &quot;Compiling without continuations&quot;, this expression is
perfectly valid:

    join { j = \_ -&gt; e }
    in (case blah of       )
       (  True  -&gt; j void# ) arg
       (  False -&gt; blah    )

assuming 'j' has arity 1.   Here the call to 'j' does not look like a
tail call, but actually everything is fine. See Section 3, &quot;Managing \Delta&quot;
in the paper.

In GHC, however, we adopt a slightly more restrictive subset, in which
join point calls must be tail calls.  I think we /could/ loosen it up, but
in fact the simplifier ensures that we always get tail calls, and it makes
the back end a bit easier I think.  Generally, just less to think about;
nothing deeper than that.

Note [The type of a join point]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A join point has the same type it would have as a function. That is, if it takes
an Int and a Bool and its body produces a String, its type is `Int -&gt; Bool -&gt;
String`. Natural as this may seem, it can be awkward. A join point shouldn't be
thought to &quot;return&quot; in the same sense a function does---a jump is one-way. This
is crucial for understanding how case-of-case interacts with join points:

  case (join
          j :: Int -&gt; Bool -&gt; String
          j x y = ...
        in
          jump j z w) of
    &quot;&quot; -&gt; True
    _  -&gt; False

The simplifier will pull the case into the join point (see Note [Join points
and case-of-case] in GHC.Core.Opt.Simplify):

  join
    j :: Int -&gt; Bool -&gt; Bool -- changed!
    j x y = case ... of &quot;&quot; -&gt; True
                        _  -&gt; False
  in
    jump j z w

The body of the join point now returns a Bool, so the label `j` has to
have its type updated accordingly, which is done by
GHC.Core.Opt.Simplify.Env.adjustJoinPointType. Inconvenient though
this may be, it has the advantage that 'GHC.Core.Utils.exprType' can
still return a type for any expression, including a jump.

Relationship to the paper

This plan differs from the paper (see Note [Invariants on join
points]). In the paper, we instead give j the type `Int -&gt; Bool -&gt;
forall a. a`. Then each jump carries the &quot;return type&quot; as a parameter,
exactly the way other non-returning functions like `error` work:

  case (join
          j :: Int -&gt; Bool -&gt; forall a. a
          j x y = ...
        in
          jump j z w @String) of
    &quot;&quot; -&gt; True
    _  -&gt; False

Now we can move the case inward and we only have to change the jump:

  join
    j :: Int -&gt; Bool -&gt; forall a. a
    j x y = case ... of &quot;&quot; -&gt; True
                        _  -&gt; False
  in
    jump j z w @Bool

(Core Lint would still check that the body of the join point has the right type;
that type would simply not be reflected in the join id.)

Note [The polymorphism rule of join points]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Invariant 4 of Note [Invariants on join points] forbids a join point to be
polymorphic in its return type. That is, if its type is

  forall a1 ... ak. t1 -&gt; ... -&gt; tn -&gt; r

where its join arity is k+n, none of the type parameters ai may occur free in r.

In some way, this falls out of the fact that given

  join
     j @a1 ... @ak x1 ... xn = e1
  in e2

then all calls to `j` are in tail-call positions of `e`, and expressions in
tail-call positions in `e` have the same type as `e`.
Therefore the type of `e1` -- the return type of the join point -- must be the
same as the type of e2.
Since the type variables aren't bound in `e2`, its type can't include them, and
thus neither can the type of `e1`.

This unfortunately prevents the `go` in the following code from being a
join-point:

  iter :: forall a. Int -&gt; (a -&gt; a) -&gt; a -&gt; a
  iter @a n f x = go @a n f x
    where
      go :: forall a. Int -&gt; (a -&gt; a) -&gt; a -&gt; a
      go @a 0 _ x = x
      go @a n f x = go @a (n-1) f (f x)

In this case, a static argument transformation would fix that (see
ticket #14620):

  iter :: forall a. Int -&gt; (a -&gt; a) -&gt; a -&gt; a
  iter @a n f x = go' @a n f x
    where
      go' :: Int -&gt; (a -&gt; a) -&gt; a -&gt; a
      go' 0 _ x = x
      go' n f x = go' (n-1) f (f x)

In general, loopification could be employed to do that (see #14068.)

Can we simply drop the requirement, and allow `go` to be a join-point? We
could, and it would work. But we could not longer apply the case-of-join-point
transformation universally. This transformation would do:

  case (join go @a n f x = case n of 0 -&gt; x
                                     n -&gt; go @a (n-1) f (f x)
        in go @Bool n neg True) of
    True -&gt; e1; False -&gt; e2

 ===&gt;

  join go @a n f x = case n of 0 -&gt; case x of True -&gt; e1; False -&gt; e2
                               n -&gt; go @a (n-1) f (f x)
  in go @Bool n neg True

but that is ill-typed, as `x` is type `a`, not `Bool`.


This also justifies why we do not consider the `e` in `e |&gt; co` to be in
tail position: A cast changes the type, but the type must be the same. But
operationally, casts are vacuous, so this is a bit unfortunate! See #14610 for
ideas how to fix this.

************************************************************************
*                                                                      *
            In/Out type synonyms
*                                                                      *
********************************************************************* -}</span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="hs-comment">{- Many passes apply a substitution, and it's very handy to have type
   synonyms to remind us whether or not the substitution has been applied -}</span><span>
</span><span id="line-1040"></span><span>
</span><span id="line-1041"></span><span class="hs-comment">-- Pre-cloning or substitution</span><span>
</span><span id="line-1042"></span><span class="hs-keyword">type</span><span> </span><span id="InBndr"><span class="annot"><a href="GHC.Core.html#InBndr"><span class="hs-identifier hs-var">InBndr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1043"></span><span class="hs-keyword">type</span><span> </span><span id="InType"><span class="annot"><a href="GHC.Core.html#InType"><span class="hs-identifier hs-var">InType</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1044"></span><span class="hs-keyword">type</span><span> </span><span id="InKind"><span class="annot"><a href="GHC.Core.html#InKind"><span class="hs-identifier hs-var">InKind</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span>
</span><span id="line-1045"></span><span class="hs-keyword">type</span><span> </span><span id="InBind"><span class="annot"><a href="GHC.Core.html#InBind"><span class="hs-identifier hs-var">InBind</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-1046"></span><span class="hs-keyword">type</span><span> </span><span id="InExpr"><span class="annot"><a href="GHC.Core.html#InExpr"><span class="hs-identifier hs-var">InExpr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1047"></span><span class="hs-keyword">type</span><span> </span><span id="InAlt"><span class="annot"><a href="GHC.Core.html#InAlt"><span class="hs-identifier hs-var">InAlt</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1048"></span><span class="hs-keyword">type</span><span> </span><span id="InArg"><span class="annot"><a href="GHC.Core.html#InArg"><span class="hs-identifier hs-var">InArg</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-type">CoreArg</span></a></span><span>
</span><span id="line-1049"></span><span class="hs-keyword">type</span><span> </span><span id="InCoercion"><span class="annot"><a href="GHC.Core.html#InCoercion"><span class="hs-identifier hs-var">InCoercion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1050"></span><span>
</span><span id="line-1051"></span><span class="hs-comment">-- Post-cloning or substitution</span><span>
</span><span id="line-1052"></span><span class="hs-keyword">type</span><span> </span><span id="OutBndr"><span class="annot"><a href="GHC.Core.html#OutBndr"><span class="hs-identifier hs-var">OutBndr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1053"></span><span class="hs-keyword">type</span><span> </span><span id="OutType"><span class="annot"><a href="GHC.Core.html#OutType"><span class="hs-identifier hs-var">OutType</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1054"></span><span class="hs-keyword">type</span><span> </span><span id="OutKind"><span class="annot"><a href="GHC.Core.html#OutKind"><span class="hs-identifier hs-var">OutKind</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span>
</span><span id="line-1055"></span><span class="hs-keyword">type</span><span> </span><span id="OutCoercion"><span class="annot"><a href="GHC.Core.html#OutCoercion"><span class="hs-identifier hs-var">OutCoercion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1056"></span><span class="hs-keyword">type</span><span> </span><span id="OutBind"><span class="annot"><a href="GHC.Core.html#OutBind"><span class="hs-identifier hs-var">OutBind</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-1057"></span><span class="hs-keyword">type</span><span> </span><span id="OutExpr"><span class="annot"><a href="GHC.Core.html#OutExpr"><span class="hs-identifier hs-var">OutExpr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1058"></span><span class="hs-keyword">type</span><span> </span><span id="OutAlt"><span class="annot"><a href="GHC.Core.html#OutAlt"><span class="hs-identifier hs-var">OutAlt</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1059"></span><span class="hs-keyword">type</span><span> </span><span id="OutArg"><span class="annot"><a href="GHC.Core.html#OutArg"><span class="hs-identifier hs-var">OutArg</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-type">CoreArg</span></a></span><span>
</span><span id="line-1060"></span><span class="hs-keyword">type</span><span> </span><span id="MOutCoercion"><span class="annot"><a href="GHC.Core.html#MOutCoercion"><span class="hs-identifier hs-var">MOutCoercion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-type">MCoercion</span></a></span><span>
</span><span id="line-1061"></span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Orphans
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1070"></span><span>
</span><span id="line-1071"></span><span class="hs-comment">-- | Is this instance an orphan?  If it is not an orphan, contains an 'OccName'</span><span>
</span><span id="line-1072"></span><span class="hs-comment">-- witnessing the instance's non-orphanhood.</span><span>
</span><span id="line-1073"></span><span class="hs-comment">-- See Note [Orphans]</span><span>
</span><span id="line-1074"></span><span class="hs-keyword">data</span><span> </span><span id="IsOrphan"><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span></span><span>
</span><span id="line-1075"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsOrphan"><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span></span><span>
</span><span id="line-1076"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotOrphan"><span class="annot"><a href="GHC.Core.html#NotOrphan"><span class="hs-identifier hs-var">NotOrphan</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-comment">-- The OccName 'n' witnesses the instance's non-orphanhood</span><span>
</span><span id="line-1077"></span><span>                      </span><span class="hs-comment">-- In that case, the instance is fingerprinted as part</span><span>
</span><span id="line-1078"></span><span>                      </span><span class="hs-comment">-- of the definition of 'n's definition</span><span>
</span><span id="line-1079"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682588980"><span id="local-6989586621682588984"><span id="local-6989586621682588987"><span id="local-6989586621682588989"><span id="local-6989586621682588991"><span id="local-6989586621682588997"><span id="local-6989586621682589002"><span id="local-6989586621682589005"><span id="local-6989586621682589008"><span id="local-6989586621682589011"><span id="local-6989586621682589014"><span id="local-6989586621682589017"><span id="local-6989586621682589022"><span id="local-6989586621682589027"><span class="annot"><span class="annottext">Typeable IsOrphan
Typeable IsOrphan =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; IsOrphan -&gt; c IsOrphan)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c IsOrphan)
-&gt; (IsOrphan -&gt; Constr)
-&gt; (IsOrphan -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c IsOrphan))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c IsOrphan))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; IsOrphan -&gt; IsOrphan)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; [u])
-&gt; (forall u.
    Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan)
-&gt; Data IsOrphan
IsOrphan -&gt; Constr
IsOrphan -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; IsOrphan -&gt; IsOrphan
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c IsOrphan
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; IsOrphan -&gt; c IsOrphan
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c IsOrphan)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c IsOrphan)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; IsOrphan -&gt; c IsOrphan
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; IsOrphan -&gt; c IsOrphan
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c IsOrphan
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c IsOrphan
$ctoConstr :: IsOrphan -&gt; Constr
toConstr :: IsOrphan -&gt; Constr
$cdataTypeOf :: IsOrphan -&gt; DataType
dataTypeOf :: IsOrphan -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c IsOrphan)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c IsOrphan)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c IsOrphan)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c IsOrphan)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; IsOrphan -&gt; IsOrphan
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; IsOrphan -&gt; IsOrphan
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; IsOrphan -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; [u]
$cgmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; IsOrphan -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; IsOrphan -&gt; m IsOrphan
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1080"></span><span>
</span><span id="line-1081"></span><span class="annot"><span class="hs-comment">-- | Returns true if 'IsOrphan' is orphan.</span></span><span>
</span><span id="line-1082"></span><span class="annot"><a href="GHC.Core.html#isOrphan"><span class="hs-identifier hs-type">isOrphan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-type">IsOrphan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1083"></span><span id="isOrphan"><span class="annot"><span class="annottext">isOrphan :: IsOrphan -&gt; Bool
</span><a href="GHC.Core.html#isOrphan"><span class="hs-identifier hs-var hs-var">isOrphan</span></a></span></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1084"></span><span class="annot"><a href="GHC.Core.html#isOrphan"><span class="hs-identifier hs-var">isOrphan</span></a></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1085"></span><span>
</span><span id="line-1086"></span><span class="annot"><span class="hs-comment">-- | Returns true if 'IsOrphan' is not an orphan.</span></span><span>
</span><span id="line-1087"></span><span class="annot"><a href="GHC.Core.html#notOrphan"><span class="hs-identifier hs-type">notOrphan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-type">IsOrphan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1088"></span><span id="notOrphan"><span class="annot"><span class="annottext">notOrphan :: IsOrphan -&gt; Bool
</span><a href="GHC.Core.html#notOrphan"><span class="hs-identifier hs-var hs-var">notOrphan</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#NotOrphan"><span class="hs-identifier hs-type">NotOrphan</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1089"></span><span class="annot"><a href="GHC.Core.html#notOrphan"><span class="hs-identifier hs-var">notOrphan</span></a></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="annot"><a href="GHC.Core.html#chooseOrphanAnchor"><span class="hs-identifier hs-type">chooseOrphanAnchor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-type">IsOrphan</span></a></span><span>
</span><span id="line-1092"></span><span class="hs-comment">-- Something (rule, instance) is relate to all the Names in this</span><span>
</span><span id="line-1093"></span><span class="hs-comment">-- list. Choose one of them to be an &quot;anchor&quot; for the orphan.  We make</span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- the choice deterministic to avoid gratuitous changes in the ABI</span><span>
</span><span id="line-1095"></span><span class="hs-comment">-- hash (#4012).  Specifically, use lexicographic comparison of</span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- OccName rather than comparing Uniques</span><span>
</span><span id="line-1097"></span><span class="hs-comment">--</span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- NB: 'minimum' use Ord, and (Ord OccName) works lexicographically</span><span>
</span><span id="line-1099"></span><span class="hs-comment">--</span><span>
</span><span id="line-1100"></span><span id="chooseOrphanAnchor"><span class="annot"><span class="annottext">chooseOrphanAnchor :: NameSet -&gt; IsOrphan
</span><a href="GHC.Core.html#chooseOrphanAnchor"><span class="hs-identifier hs-var hs-var">chooseOrphanAnchor</span></a></span></span><span> </span><span id="local-6989586621682589031"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682589031"><span class="hs-identifier hs-var">local_names</span></a></span></span><span>
</span><span id="line-1101"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#isEmptyNameSet"><span class="hs-identifier hs-var">isEmptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682589031"><span class="hs-identifier hs-var">local_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span><span>
</span><span id="line-1102"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; IsOrphan
</span><a href="GHC.Core.html#NotOrphan"><span class="hs-identifier hs-var">NotOrphan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[OccName] -&gt; OccName
forall a. Ord a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">minimum</span></span><span> </span><span class="annot"><span class="annottext">[OccName]
</span><a href="#local-6989586621682589034"><span class="hs-identifier hs-var">occs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1103"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1104"></span><span>    </span><span id="local-6989586621682589034"><span class="annot"><span class="annottext">occs :: [OccName]
</span><a href="#local-6989586621682589034"><span class="hs-identifier hs-var hs-var">occs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; [OccName]) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; [Name]
forall elt. UniqSet elt -&gt; [elt]
</span><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier hs-var">nonDetEltsUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682589031"><span class="hs-identifier hs-var">local_names</span></a></span><span>
</span><span id="line-1105"></span><span>    </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here, see comments above</span><span>
</span><span id="line-1106"></span><span>
</span><span id="line-1107"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682589039"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-type">IsOrphan</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1108"></span><span>    </span><span id="local-6989586621682589051"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; IsOrphan -&gt; IO ()
</span><a href="#local-6989586621682589051"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682589053"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682589053"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682589053"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1109"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621682589055"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682589055"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NotOrphan"><span class="hs-identifier hs-type">NotOrphan</span></a></span><span> </span><span id="local-6989586621682589056"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682589056"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1110"></span><span>        </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682589055"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1111"></span><span>        </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; OccName -&gt; IO ()
forall a. Binary a =&gt; WriteBinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682589055"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682589056"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1112"></span><span>    </span><span id="local-6989586621682589065"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO IsOrphan
</span><a href="#local-6989586621682589065"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682589067"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682589067"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1113"></span><span>        </span><span id="local-6989586621682589068"><span class="annot"><a href="#local-6989586621682589068"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682589067"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1114"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682589068"><span class="hs-identifier hs-type">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1115"></span><span>            </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IsOrphan -&gt; IO IsOrphan
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">IsOrphan
</span><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-var">IsOrphan</span></a></span><span>
</span><span id="line-1116"></span><span>            </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1117"></span><span>                </span><span id="local-6989586621682589070"><span class="annot"><a href="#local-6989586621682589070"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO OccName
forall a. Binary a =&gt; ReadBinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682589067"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1118"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Core.html#NotOrphan"><span class="hs-identifier hs-type">NotOrphan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589070"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-1119"></span><span>
</span><span id="line-1120"></span><span class="hs-comment">{-
Note [Orphans]
~~~~~~~~~~~~~~
Class instances, rules, and family instances are divided into orphans
and non-orphans.  Roughly speaking, an instance/rule is an orphan if
its left hand side mentions nothing defined in this module.  Orphan-hood
has two major consequences

 * A module that contains orphans is called an &quot;orphan module&quot;.  If
   the module being compiled depends (transitively) on an orphan
   module M, then M.hi is read in regardless of whether M is otherwise
   needed. This is to ensure that we don't miss any instance decls in
   M.  But it's painful, because it means we need to keep track of all
   the orphan modules below us.

 * The &quot;visible orphan modules&quot; are all the orphan module in the transitive
   closure of the imports of this module.

 * During instance lookup, we filter orphan instances depending on
   whether or not the instance is in a visible orphan module.

 * A non-orphan is not finger-printed separately.  Instead, for
   fingerprinting purposes it is treated as part of the entity it
   mentions on the LHS.  For example
      data T = T1 | T2
      instance Eq T where ....
   The instance (Eq T) is incorporated as part of T's fingerprint.

   In contrast, orphans are all fingerprinted together in the
   mi_orph_hash field of the ModIface.

   See GHC.Iface.Recomp.addFingerprints.

Orphan-hood is computed
  * For class instances:
    when we make a ClsInst in GHC.Core.InstEnv.mkLocalClsInst
      (because it is needed during instance lookup)
    See Note [When exactly is an instance decl an orphan?]
        in GHC.Core.InstEnv

  * For rules
    when we generate a CoreRule (GHC.Core.Rules.mkRule)

  * For family instances:
    when we generate an IfaceFamInst (GHC.Iface.Make.instanceToIfaceInst)

Orphan-hood is persisted into interface files, in ClsInst, FamInst,
and CoreRules.

-}</span><span>
</span><span id="line-1170"></span><span>
</span><span id="line-1171"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Rewrite rules}
*                                                                      *
************************************************************************

The CoreRule type and its friends are dealt with mainly in GHC.Core.Rules, but
GHC.Core.FVs, GHC.Core.Subst, GHC.Core.Ppr, GHC.Core.Tidy also inspect the
representation.
-}</span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span>
</span><span id="line-1184"></span><span class="hs-comment">-- | A 'CoreRule' is:</span><span>
</span><span id="line-1185"></span><span class="hs-comment">--</span><span>
</span><span id="line-1186"></span><span class="hs-comment">-- * \&quot;Local\&quot; if the function it is a rule for is defined in the</span><span>
</span><span id="line-1187"></span><span class="hs-comment">--   same module as the rule itself.</span><span>
</span><span id="line-1188"></span><span class="hs-comment">--</span><span>
</span><span id="line-1189"></span><span class="hs-comment">-- * \&quot;Orphan\&quot; if nothing on the LHS is defined in the same module</span><span>
</span><span id="line-1190"></span><span class="hs-comment">--   as the rule itself</span><span>
</span><span id="line-1191"></span><span class="hs-keyword">data</span><span> </span><span id="CoreRule"><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-var">CoreRule</span></a></span></span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Rule"><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-var">Rule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1193"></span><span>        </span><span id="ru_name"><span class="annot"><span class="annottext">CoreRule -&gt; RuleName
</span><a href="GHC.Core.html#ru_name"><span class="hs-identifier hs-var hs-var">ru_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RuleName"><span class="hs-identifier hs-type">RuleName</span></a></span><span class="hs-special">,</span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Name of the rule, for communication with the user</span></span><span>
</span><span id="line-1194"></span><span>        </span><span id="ru_act"><span class="annot"><span class="annottext">CoreRule -&gt; Activation
</span><a href="GHC.Core.html#ru_act"><span class="hs-identifier hs-var hs-var">ru_act</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span class="hs-special">,</span><span>          </span><span class="annot"><span class="hs-comment">-- ^ When the rule is active</span></span><span>
</span><span id="line-1195"></span><span>
</span><span id="line-1196"></span><span>        </span><span class="hs-comment">-- Rough-matching stuff</span><span>
</span><span id="line-1197"></span><span>        </span><span class="hs-comment">-- see comments with InstEnv.ClsInst( is_cls, is_rough )</span><span>
</span><span id="line-1198"></span><span>        </span><span id="ru_fn"><span class="annot"><span class="annottext">CoreRule -&gt; Name
</span><a href="GHC.Core.html#ru_fn"><span class="hs-identifier hs-var hs-var">ru_fn</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span>               </span><span class="annot"><span class="hs-comment">-- ^ Name of the 'GHC.Types.Id.Id' at the head of this rule</span></span><span>
</span><span id="line-1199"></span><span>        </span><span id="ru_rough"><span class="annot"><span class="annottext">CoreRule -&gt; [Maybe Name]
</span><a href="GHC.Core.html#ru_rough"><span class="hs-identifier hs-var hs-var">ru_rough</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>       </span><span class="annot"><span class="hs-comment">-- ^ Name at the head of each argument to the left hand side</span></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span>        </span><span class="hs-comment">-- Proper-matching stuff</span><span>
</span><span id="line-1202"></span><span>        </span><span class="hs-comment">-- see comments with InstEnv.ClsInst( is_tvs, is_tys )</span><span>
</span><span id="line-1203"></span><span>        </span><span id="ru_bndrs"><span class="annot"><span class="annottext">CoreRule -&gt; [Id]
</span><a href="GHC.Core.html#ru_bndrs"><span class="hs-identifier hs-var hs-var">ru_bndrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Variables quantified over</span></span><span>
</span><span id="line-1204"></span><span>        </span><span id="ru_args"><span class="annot"><span class="annottext">CoreRule -&gt; [CoreExpr]
</span><a href="GHC.Core.html#ru_args"><span class="hs-identifier hs-var hs-var">ru_args</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Left hand side arguments</span></span><span>
</span><span id="line-1205"></span><span>
</span><span id="line-1206"></span><span>        </span><span class="hs-comment">-- And the right-hand side</span><span>
</span><span id="line-1207"></span><span>        </span><span id="ru_rhs"><span class="annot"><span class="annottext">CoreRule -&gt; CoreExpr
</span><a href="GHC.Core.html#ru_rhs"><span class="hs-identifier hs-var hs-var">ru_rhs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- ^ Right hand side of the rule</span><span>
</span><span id="line-1208"></span><span>                                        </span><span class="hs-comment">-- Occurrence info is guaranteed correct</span><span>
</span><span id="line-1209"></span><span>                                        </span><span class="hs-comment">-- See Note [OccInfo in unfoldings and rules]</span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span>        </span><span class="hs-comment">-- Locality</span><span>
</span><span id="line-1212"></span><span>        </span><span id="ru_auto"><span class="annot"><span class="annottext">CoreRule -&gt; Bool
</span><a href="GHC.Core.html#ru_auto"><span class="hs-identifier hs-var hs-var">ru_auto</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ @True@  &lt;=&gt; this rule is auto-generated</span><span>
</span><span id="line-1213"></span><span>                           </span><span class="hs-comment">--               (notably by Specialise or SpecConstr)</span><span>
</span><span id="line-1214"></span><span>                           </span><span class="hs-comment">--   @False@ &lt;=&gt; generated at the user's behest</span><span>
</span><span id="line-1215"></span><span>                           </span><span class="hs-comment">-- See Note [Trimming auto-rules] in &quot;GHC.Iface.Tidy&quot;</span><span>
</span><span id="line-1216"></span><span>                           </span><span class="hs-comment">-- for the sole purpose of this field.</span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span>        </span><span id="ru_origin"><span class="annot"><span class="annottext">CoreRule -&gt; Module
</span><a href="GHC.Core.html#ru_origin"><span class="hs-identifier hs-var hs-var">ru_origin</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- ^ 'Module' the rule was defined in, used</span><span>
</span><span id="line-1219"></span><span>                                </span><span class="hs-comment">-- to test if we should see an orphan rule.</span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span>        </span><span id="ru_orphan"><span class="annot"><span class="annottext">CoreRule -&gt; IsOrphan
</span><a href="GHC.Core.html#ru_orphan"><span class="hs-identifier hs-var hs-var">ru_orphan</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Core.html#IsOrphan"><span class="hs-identifier hs-type">IsOrphan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Whether or not the rule is an orphan.</span></span><span>
</span><span id="line-1222"></span><span>
</span><span id="line-1223"></span><span>        </span><span id="ru_local"><span class="annot"><span class="annottext">CoreRule -&gt; Bool
</span><a href="GHC.Core.html#ru_local"><span class="hs-identifier hs-var hs-var">ru_local</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>        </span><span class="hs-comment">-- ^ @True@ iff the fn at the head of the rule is</span><span>
</span><span id="line-1224"></span><span>                                </span><span class="hs-comment">-- defined in the same module as the rule</span><span>
</span><span id="line-1225"></span><span>                                </span><span class="hs-comment">-- and is not an implicit 'Id' (like a record selector,</span><span>
</span><span id="line-1226"></span><span>                                </span><span class="hs-comment">-- class operation, or data constructor).  This</span><span>
</span><span id="line-1227"></span><span>                                </span><span class="hs-comment">-- is different from 'ru_orphan', where a rule</span><span>
</span><span id="line-1228"></span><span>                                </span><span class="hs-comment">-- can avoid being an orphan if *any* Name in</span><span>
</span><span id="line-1229"></span><span>                                </span><span class="hs-comment">-- LHS of the rule was defined in the same</span><span>
</span><span id="line-1230"></span><span>                                </span><span class="hs-comment">-- module as the rule.</span><span>
</span><span id="line-1231"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1232"></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-comment">-- | Built-in rules are used for constant folding</span><span>
</span><span id="line-1234"></span><span>  </span><span class="hs-comment">-- and suchlike.  They have no free variables.</span><span>
</span><span id="line-1235"></span><span>  </span><span class="hs-comment">-- A built-in rule is always visible (there is no such thing as</span><span>
</span><span id="line-1236"></span><span>  </span><span class="hs-comment">-- an orphan built-in rule.)</span><span>
</span><span id="line-1237"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BuiltinRule"><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-var">BuiltinRule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1238"></span><span>        </span><span id="ru_name"><span class="annot"><a href="GHC.Core.html#ru_name"><span class="hs-identifier hs-var">ru_name</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RuleName"><span class="hs-identifier hs-type">RuleName</span></a></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="hs-comment">-- ^ As above</span></span><span>
</span><span id="line-1239"></span><span>        </span><span id="ru_fn"><span class="annot"><a href="GHC.Core.html#ru_fn"><span class="hs-identifier hs-var">ru_fn</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span>       </span><span class="annot"><span class="hs-comment">-- ^ As above</span></span><span>
</span><span id="line-1240"></span><span>        </span><span id="ru_nargs"><span class="annot"><span class="annottext">CoreRule -&gt; Arity
</span><a href="GHC.Core.html#ru_nargs"><span class="hs-identifier hs-var hs-var">ru_nargs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- ^ Number of arguments that 'ru_try' consumes,</span><span>
</span><span id="line-1241"></span><span>                                </span><span class="hs-comment">-- if it fires, including type arguments</span><span>
</span><span id="line-1242"></span><span>        </span><span id="ru_try"><span class="annot"><span class="annottext">CoreRule -&gt; RuleFun
</span><a href="GHC.Core.html#ru_try"><span class="hs-identifier hs-var hs-var">ru_try</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#RuleFun"><span class="hs-identifier hs-type">RuleFun</span></a></span><span>
</span><span id="line-1243"></span><span>                </span><span class="hs-comment">-- ^ This function does the rewrite.  It given too many</span><span>
</span><span id="line-1244"></span><span>                </span><span class="hs-comment">-- arguments, it simply discards them; the returned 'CoreExpr'</span><span>
</span><span id="line-1245"></span><span>                </span><span class="hs-comment">-- is just the rewrite of 'ru_fn' applied to the first 'ru_nargs' args</span><span>
</span><span id="line-1246"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1247"></span><span>                </span><span class="hs-comment">-- See Note [Extra args in the target] in GHC.Core.Rules</span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span class="hs-keyword">type</span><span> </span><span id="RuleFun"><span class="annot"><a href="GHC.Core.html#RuleFun"><span class="hs-identifier hs-var">RuleFun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Rules.Config.html#RuleOpts"><span class="hs-identifier hs-type">RuleOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#InScopeEnv"><span class="hs-identifier hs-type">InScopeEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1250"></span><span>
</span><span id="line-1251"></span><span class="hs-comment">-- | The 'InScopeSet' in the 'InScopeEnv' is a /superset/ of variables that are</span><span>
</span><span id="line-1252"></span><span class="hs-comment">-- currently in scope. See Note [The InScopeSet invariant].</span><span>
</span><span id="line-1253"></span><span class="hs-keyword">data</span><span> </span><span id="InScopeEnv"><span class="annot"><a href="GHC.Core.html#InScopeEnv"><span class="hs-identifier hs-var">InScopeEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ISE"><span class="annot"><a href="GHC.Core.html#ISE"><span class="hs-identifier hs-var">ISE</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#InScopeSet"><span class="hs-identifier hs-type">InScopeSet</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-type">IdUnfoldingFun</span></a></span><span>
</span><span id="line-1254"></span><span>
</span><span id="line-1255"></span><span class="hs-keyword">type</span><span> </span><span id="IdUnfoldingFun"><span class="annot"><a href="GHC.Core.html#IdUnfoldingFun"><span class="hs-identifier hs-var">IdUnfoldingFun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1256"></span><span class="hs-comment">-- A function that embodies how to unfold an Id if you need</span><span>
</span><span id="line-1257"></span><span class="hs-comment">-- to do that in the Rule.  The reason we need to pass this info in</span><span>
</span><span id="line-1258"></span><span class="hs-comment">-- is that whether an Id is unfoldable depends on the simplifier phase</span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span class="annot"><a href="GHC.Core.html#isBuiltinRule"><span class="hs-identifier hs-type">isBuiltinRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1261"></span><span id="isBuiltinRule"><span class="annot"><span class="annottext">isBuiltinRule :: CoreRule -&gt; Bool
</span><a href="GHC.Core.html#isBuiltinRule"><span class="hs-identifier hs-var hs-var">isBuiltinRule</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1262"></span><span class="annot"><a href="GHC.Core.html#isBuiltinRule"><span class="hs-identifier hs-var">isBuiltinRule</span></a></span><span> </span><span class="annot"><span class="annottext">CoreRule
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1263"></span><span>
</span><span id="line-1264"></span><span class="annot"><a href="GHC.Core.html#isAutoRule"><span class="hs-identifier hs-type">isAutoRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1265"></span><span id="isAutoRule"><span class="annot"><span class="annottext">isAutoRule :: CoreRule -&gt; Bool
</span><a href="GHC.Core.html#isAutoRule"><span class="hs-identifier hs-var hs-var">isAutoRule</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1266"></span><span class="annot"><a href="GHC.Core.html#isAutoRule"><span class="hs-identifier hs-var">isAutoRule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ru_auto :: CoreRule -&gt; Bool
</span><a href="GHC.Core.html#ru_auto"><span class="hs-identifier hs-var">ru_auto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589088"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682589088"><span class="hs-identifier hs-var">is_auto</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682589088"><span class="hs-identifier hs-var">is_auto</span></a></span><span>
</span><span id="line-1267"></span><span>
</span><span id="line-1268"></span><span class="hs-comment">-- | The number of arguments the 'ru_fn' must be applied</span><span>
</span><span id="line-1269"></span><span class="hs-comment">-- to before the rule can match on it</span><span>
</span><span id="line-1270"></span><span class="annot"><a href="GHC.Core.html#ruleArity"><span class="hs-identifier hs-type">ruleArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1271"></span><span id="ruleArity"><span class="annot"><span class="annottext">ruleArity :: CoreRule -&gt; Arity
</span><a href="GHC.Core.html#ruleArity"><span class="hs-identifier hs-var hs-var">ruleArity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ru_nargs :: CoreRule -&gt; Arity
</span><a href="GHC.Core.html#ru_nargs"><span class="hs-identifier hs-var">ru_nargs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589089"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589089"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589089"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1272"></span><span class="annot"><a href="GHC.Core.html#ruleArity"><span class="hs-identifier hs-var">ruleArity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ru_args :: CoreRule -&gt; [CoreExpr]
</span><a href="GHC.Core.html#ru_args"><span class="hs-identifier hs-var">ru_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589090"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682589090"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CoreExpr] -&gt; Arity
forall a. [a] -&gt; Arity
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682589090"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1273"></span><span>
</span><span id="line-1274"></span><span class="annot"><a href="GHC.Core.html#ruleName"><span class="hs-identifier hs-type">ruleName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RuleName"><span class="hs-identifier hs-type">RuleName</span></a></span><span>
</span><span id="line-1275"></span><span id="ruleName"><span class="annot"><span class="annottext">ruleName :: CoreRule -&gt; RuleName
</span><a href="GHC.Core.html#ruleName"><span class="hs-identifier hs-var hs-var">ruleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreRule -&gt; RuleName
</span><a href="GHC.Core.html#ru_name"><span class="hs-identifier hs-var">ru_name</span></a></span><span>
</span><span id="line-1276"></span><span>
</span><span id="line-1277"></span><span class="annot"><a href="GHC.Core.html#ruleModule"><span class="hs-identifier hs-type">ruleModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-1278"></span><span id="ruleModule"><span class="annot"><span class="annottext">ruleModule :: CoreRule -&gt; Maybe Module
</span><a href="GHC.Core.html#ruleModule"><span class="hs-identifier hs-var hs-var">ruleModule</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682589092"><span class="annot"><span class="annottext">Module
ru_origin :: CoreRule -&gt; Module
ru_origin :: Module
</span><a href="GHC.Core.html#ru_origin"><span class="hs-identifier hs-var hs-var">ru_origin</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; Maybe Module
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682589092"><span class="hs-identifier hs-var">ru_origin</span></a></span><span>
</span><span id="line-1279"></span><span class="annot"><a href="GHC.Core.html#ruleModule"><span class="hs-identifier hs-var">ruleModule</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Module
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1280"></span><span>
</span><span id="line-1281"></span><span class="annot"><a href="GHC.Core.html#ruleActivation"><span class="hs-identifier hs-type">ruleActivation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span>
</span><span id="line-1282"></span><span id="ruleActivation"><span class="annot"><span class="annottext">ruleActivation :: CoreRule -&gt; Activation
</span><a href="GHC.Core.html#ruleActivation"><span class="hs-identifier hs-var hs-var">ruleActivation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#BuiltinRule"><span class="hs-identifier hs-type">BuiltinRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="GHC.Types.Basic.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a></span><span>
</span><span id="line-1283"></span><span class="annot"><a href="GHC.Core.html#ruleActivation"><span class="hs-identifier hs-var">ruleActivation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rule"><span class="hs-identifier hs-type">Rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ru_act :: CoreRule -&gt; Activation
</span><a href="GHC.Core.html#ru_act"><span class="hs-identifier hs-var">ru_act</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589094"><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682589094"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682589094"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span class="annot"><span class="hs-comment">-- | The 'Name' of the 'GHC.Types.Id.Id' at the head of the rule left hand side</span></span><span>
</span><span id="line-1286"></span><span class="annot"><a href="GHC.Core.html#ruleIdName"><span class="hs-identifier hs-type">ruleIdName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1287"></span><span id="ruleIdName"><span class="annot"><span class="annottext">ruleIdName :: CoreRule -&gt; Name
</span><a href="GHC.Core.html#ruleIdName"><span class="hs-identifier hs-var hs-var">ruleIdName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreRule -&gt; Name
</span><a href="GHC.Core.html#ru_fn"><span class="hs-identifier hs-var">ru_fn</span></a></span><span>
</span><span id="line-1288"></span><span>
</span><span id="line-1289"></span><span class="annot"><a href="GHC.Core.html#isLocalRule"><span class="hs-identifier hs-type">isLocalRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1290"></span><span id="isLocalRule"><span class="annot"><span class="annottext">isLocalRule :: CoreRule -&gt; Bool
</span><a href="GHC.Core.html#isLocalRule"><span class="hs-identifier hs-var hs-var">isLocalRule</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreRule -&gt; Bool
</span><a href="GHC.Core.html#ru_local"><span class="hs-identifier hs-var">ru_local</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span class="annot"><span class="hs-comment">-- | Set the 'Name' of the 'GHC.Types.Id.Id' at the head of the rule left hand side</span></span><span>
</span><span id="line-1293"></span><span class="annot"><a href="GHC.Core.html#setRuleIdName"><span class="hs-identifier hs-type">setRuleIdName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreRule"><span class="hs-identifier hs-type">CoreRule</span></a></span><span>
</span><span id="line-1294"></span><span id="setRuleIdName"><span class="annot"><span class="annottext">setRuleIdName :: Name -&gt; CoreRule -&gt; CoreRule
</span><a href="GHC.Core.html#setRuleIdName"><span class="hs-identifier hs-var hs-var">setRuleIdName</span></a></span></span><span> </span><span id="local-6989586621682589095"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682589095"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621682589096"><span class="annot"><span class="annottext">CoreRule
</span><a href="#local-6989586621682589096"><span class="hs-identifier hs-var">ru</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreRule
</span><a href="#local-6989586621682589096"><span class="hs-identifier hs-var">ru</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.html#ru_fn"><span class="hs-identifier hs-var">ru_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682589095"><span class="hs-identifier hs-type">nm</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1295"></span><span>
</span><span id="line-1296"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                Unfoldings
*                                                                      *
************************************************************************

The @Unfolding@ type is declared here to avoid numerous loops

Note [Never put `OtherCon` unfoldings on lambda binders]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Based on #21496 we never attach unfoldings of any kind to lambda binders.
It's just too easy for the call site to change and invalidate the unfolding.
E.g. the caller of the lambda drops a seq (e.g. because the lambda is strict in it's binder)
which in turn makes the OtherCon[] unfolding a lie.
So unfoldings on lambda binders can never really be trusted when on lambda binders if there
is the chance of the call site to change. So it's easiest to just never attach any
to lambda binders to begin with, as well as stripping them off if we e.g. float out
and expression while abstracting over some arguments.
-}</span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span class="hs-comment">-- | Records the /unfolding/ of an identifier, which is approximately the form the</span><span>
</span><span id="line-1318"></span><span class="hs-comment">-- identifier would have if we substituted its definition in for the identifier.</span><span>
</span><span id="line-1319"></span><span class="hs-comment">-- This type should be treated as abstract everywhere except in &quot;GHC.Core.Unfold&quot;</span><span>
</span><span id="line-1320"></span><span class="hs-keyword">data</span><span> </span><span id="Unfolding"><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-var">Unfolding</span></a></span></span><span>
</span><span id="line-1321"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoUnfolding"><span class="annot"><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ We have no information about the unfolding.</span></span><span>
</span><span id="line-1322"></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BootUnfolding"><span class="annot"><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span></span><span>      </span><span class="hs-comment">-- ^ We have no information about the unfolding, because</span><span>
</span><span id="line-1324"></span><span>                       </span><span class="hs-comment">-- this 'Id' came from an @hi-boot@ file.</span><span>
</span><span id="line-1325"></span><span>                       </span><span class="hs-comment">-- See Note [Inlining and hs-boot files] in &quot;GHC.CoreToIface&quot;</span><span>
</span><span id="line-1326"></span><span>                       </span><span class="hs-comment">-- for what this is used for.</span><span>
</span><span id="line-1327"></span><span>
</span><span id="line-1328"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="OtherCon"><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-var">OtherCon</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- ^ It ain't one of these constructors.</span><span>
</span><span id="line-1329"></span><span>                       </span><span class="hs-comment">-- @OtherCon xs@ also indicates that something has been evaluated</span><span>
</span><span id="line-1330"></span><span>                       </span><span class="hs-comment">-- and hence there's no point in re-evaluating it.</span><span>
</span><span id="line-1331"></span><span>                       </span><span class="hs-comment">-- @OtherCon []@ is used even for non-data-type values</span><span>
</span><span id="line-1332"></span><span>                       </span><span class="hs-comment">-- to indicated evaluated-ness.  Notably:</span><span>
</span><span id="line-1333"></span><span>                       </span><span class="hs-comment">--</span><span>
</span><span id="line-1334"></span><span>                       </span><span class="hs-comment">-- &gt; data C = C !(Int -&gt; Int)</span><span>
</span><span id="line-1335"></span><span>                       </span><span class="hs-comment">-- &gt; case x of { C f -&gt; ... }</span><span>
</span><span id="line-1336"></span><span>                       </span><span class="hs-comment">--</span><span>
</span><span id="line-1337"></span><span>                       </span><span class="hs-comment">-- Here, @f@ gets an @OtherCon []@ unfolding.</span><span>
</span><span id="line-1338"></span><span>
</span><span id="line-1339"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DFunUnfolding"><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-var">DFunUnfolding</span></a></span></span><span> </span><span class="hs-special">{</span><span>     </span><span class="hs-comment">-- The Unfolding of a DFunId</span><span>
</span><span id="line-1340"></span><span>                        </span><span class="hs-comment">-- See Note [DFun unfoldings]</span><span>
</span><span id="line-1341"></span><span>                        </span><span class="hs-comment">--     df = /\a1..am. \d1..dn. MkD t1 .. tk</span><span>
</span><span id="line-1342"></span><span>                        </span><span class="hs-comment">--                                 (op1 a1..am d1..dn)</span><span>
</span><span id="line-1343"></span><span>                        </span><span class="hs-comment">--                                 (op2 a1..am d1..dn)</span><span>
</span><span id="line-1344"></span><span>        </span><span id="df_bndrs"><span class="annot"><span class="annottext">Unfolding -&gt; [Id]
</span><a href="GHC.Core.html#df_bndrs"><span class="hs-identifier hs-var hs-var">df_bndrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- The bound variables [a1..m],[d1..dn]</span><span>
</span><span id="line-1345"></span><span>        </span><span id="df_con"><span class="annot"><span class="annottext">Unfolding -&gt; DataCon
</span><a href="GHC.Core.html#df_con"><span class="hs-identifier hs-var hs-var">df_con</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- The dictionary data constructor (never a newtype datacon)</span><span>
</span><span id="line-1346"></span><span>        </span><span id="df_args"><span class="annot"><span class="annottext">Unfolding -&gt; [CoreExpr]
</span><a href="GHC.Core.html#df_args"><span class="hs-identifier hs-var hs-var">df_args</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Args of the data con: types, superclasses and methods,</span><span>
</span><span id="line-1347"></span><span>    </span><span class="hs-special">}</span><span>                           </span><span class="hs-comment">-- in positional order</span><span>
</span><span id="line-1348"></span><span>
</span><span id="line-1349"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CoreUnfolding"><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-var">CoreUnfolding</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- An unfolding for an Id with no pragma,</span><span>
</span><span id="line-1350"></span><span>                    </span><span class="hs-comment">-- or perhaps a NOINLINE pragma</span><span>
</span><span id="line-1351"></span><span>                    </span><span class="hs-comment">-- (For NOINLINE, the phase, if any, is in the</span><span>
</span><span id="line-1352"></span><span>                    </span><span class="hs-comment">-- InlinePragInfo for this Id.)</span><span>
</span><span id="line-1353"></span><span>        </span><span id="uf_tmpl"><span class="annot"><span class="annottext">Unfolding -&gt; CoreExpr
</span><a href="GHC.Core.html#uf_tmpl"><span class="hs-identifier hs-var hs-var">uf_tmpl</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- The unfolding itself (aka &quot;template&quot;)</span><span>
</span><span id="line-1354"></span><span>                                         </span><span class="hs-comment">-- Always occ-analysed;</span><span>
</span><span id="line-1355"></span><span>                                         </span><span class="hs-comment">-- See Note [OccInfo in unfoldings and rules]</span><span>
</span><span id="line-1356"></span><span>
</span><span id="line-1357"></span><span>        </span><span id="uf_src"><span class="annot"><span class="annottext">Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var hs-var">uf_src</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#UnfoldingSource"><span class="hs-identifier hs-type">UnfoldingSource</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Where the unfolding came from</span><span>
</span><span id="line-1358"></span><span>        </span><span id="uf_is_top"><span class="annot"><span class="annottext">Unfolding -&gt; Bool
</span><a href="GHC.Core.html#uf_is_top"><span class="hs-identifier hs-var hs-var">uf_is_top</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>             </span><span class="hs-comment">-- True &lt;=&gt; top level binding</span><span>
</span><span id="line-1359"></span><span>        </span><span id="uf_cache"><span class="annot"><span class="annottext">Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var hs-var">uf_cache</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfoldingCache"><span class="hs-identifier hs-type">UnfoldingCache</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- Cache of flags computable from the expr</span><span>
</span><span id="line-1360"></span><span>                                         </span><span class="hs-comment">-- See Note [Tying the 'CoreUnfolding' knot]</span><span>
</span><span id="line-1361"></span><span>        </span><span id="uf_guidance"><span class="annot"><span class="annottext">Unfolding -&gt; UnfoldingGuidance
</span><a href="GHC.Core.html#uf_guidance"><span class="hs-identifier hs-var hs-var">uf_guidance</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfoldingGuidance"><span class="hs-identifier hs-type">UnfoldingGuidance</span></a></span><span> </span><span class="hs-comment">-- Tells about the *size* of the template.</span><span>
</span><span id="line-1362"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1363"></span><span>  </span><span class="hs-comment">-- ^ An unfolding with redundant cached information. Parameters:</span><span>
</span><span id="line-1364"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1365"></span><span>  </span><span class="hs-comment">--  uf_tmpl: Template used to perform unfolding;</span><span>
</span><span id="line-1366"></span><span>  </span><span class="hs-comment">--           NB: Occurrence info is guaranteed correct:</span><span>
</span><span id="line-1367"></span><span>  </span><span class="hs-comment">--               see Note [OccInfo in unfoldings and rules]</span><span>
</span><span id="line-1368"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1369"></span><span>  </span><span class="hs-comment">--  uf_is_top: Is this a top level binding?</span><span>
</span><span id="line-1370"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1371"></span><span>  </span><span class="hs-comment">--  uf_is_value: 'exprIsHNF' template (cached); it is ok to discard a 'seq' on</span><span>
</span><span id="line-1372"></span><span>  </span><span class="hs-comment">--     this variable</span><span>
</span><span id="line-1373"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1374"></span><span>  </span><span class="hs-comment">--  uf_is_work_free:  Does this waste only a little work if we expand it inside an inlining?</span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-comment">--     Basically this is a cached version of 'exprIsWorkFree'</span><span>
</span><span id="line-1376"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-comment">--  uf_guidance:  Tells us about the /size/ of the unfolding template</span><span>
</span><span id="line-1378"></span><span>
</span><span id="line-1379"></span><span>
</span><span id="line-1380"></span><span class="hs-comment">-- | Properties of a 'CoreUnfolding' that could be computed on-demand from its template.</span><span>
</span><span id="line-1381"></span><span class="hs-comment">-- See Note [UnfoldingCache]</span><span>
</span><span id="line-1382"></span><span class="hs-keyword">data</span><span> </span><span id="UnfoldingCache"><span class="annot"><a href="GHC.Core.html#UnfoldingCache"><span class="hs-identifier hs-var">UnfoldingCache</span></a></span></span><span>
</span><span id="line-1383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UnfoldingCache"><span class="annot"><a href="GHC.Core.html#UnfoldingCache"><span class="hs-identifier hs-var">UnfoldingCache</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1384"></span><span>        </span><span id="uf_is_value"><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var hs-var">uf_is_value</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- exprIsHNF template (cached); it is ok to discard</span><span>
</span><span id="line-1385"></span><span>                                        </span><span class="hs-comment">--      a `seq` on this variable</span><span>
</span><span id="line-1386"></span><span>        </span><span id="uf_is_conlike"><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_conlike"><span class="hs-identifier hs-var hs-var">uf_is_conlike</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- True &lt;=&gt; applicn of constructor or CONLIKE function</span><span>
</span><span id="line-1387"></span><span>                                        </span><span class="hs-comment">--      Cached version of exprIsConLike</span><span>
</span><span id="line-1388"></span><span>        </span><span id="uf_is_work_free"><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_work_free"><span class="hs-identifier hs-var hs-var">uf_is_work_free</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>       </span><span class="hs-comment">-- True &lt;=&gt; doesn't waste (much) work to expand</span><span>
</span><span id="line-1389"></span><span>                                        </span><span class="hs-comment">--          inside an inlining</span><span>
</span><span id="line-1390"></span><span>                                        </span><span class="hs-comment">--      Cached version of exprIsCheap</span><span>
</span><span id="line-1391"></span><span>        </span><span id="uf_expandable"><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_expandable"><span class="hs-identifier hs-var hs-var">uf_expandable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>          </span><span class="hs-comment">-- True &lt;=&gt; can expand in RULE matching</span><span>
</span><span id="line-1392"></span><span>                                        </span><span class="hs-comment">--      Cached version of exprIsExpandable</span><span>
</span><span id="line-1393"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1394"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682589117"><span id="local-6989586621682589124"><span class="annot"><span class="annottext">UnfoldingCache -&gt; UnfoldingCache -&gt; Bool
(UnfoldingCache -&gt; UnfoldingCache -&gt; Bool)
-&gt; (UnfoldingCache -&gt; UnfoldingCache -&gt; Bool) -&gt; Eq UnfoldingCache
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnfoldingCache -&gt; UnfoldingCache -&gt; Bool
== :: UnfoldingCache -&gt; UnfoldingCache -&gt; Bool
$c/= :: UnfoldingCache -&gt; UnfoldingCache -&gt; Bool
/= :: UnfoldingCache -&gt; UnfoldingCache -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>
</span><span id="line-1396"></span><span class="annot"><span class="hs-comment">-- | 'UnfoldingGuidance' says when unfolding should take place</span></span><span>
</span><span id="line-1397"></span><span class="hs-keyword">data</span><span> </span><span id="UnfoldingGuidance"><span class="annot"><a href="GHC.Core.html#UnfoldingGuidance"><span class="hs-identifier hs-var">UnfoldingGuidance</span></a></span></span><span>
</span><span id="line-1398"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UnfWhen"><span class="annot"><a href="GHC.Core.html#UnfWhen"><span class="hs-identifier hs-var">UnfWhen</span></a></span></span><span> </span><span class="hs-special">{</span><span>   </span><span class="hs-comment">-- Inline without thinking about the *size* of the uf_tmpl</span><span>
</span><span id="line-1399"></span><span>                </span><span class="hs-comment">-- Used (a) for small *and* cheap unfoldings</span><span>
</span><span id="line-1400"></span><span>                </span><span class="hs-comment">--      (b) for INLINE functions</span><span>
</span><span id="line-1401"></span><span>                </span><span class="hs-comment">-- See Note [INLINE for small functions] in GHC.Core.Unfold</span><span>
</span><span id="line-1402"></span><span>      </span><span id="ug_arity"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Arity
</span><a href="GHC.Core.html#ug_arity"><span class="hs-identifier hs-var hs-var">ug_arity</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Number of value arguments expected</span><span>
</span><span id="line-1403"></span><span>
</span><span id="line-1404"></span><span>      </span><span id="ug_unsat_ok"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Bool
</span><a href="GHC.Core.html#ug_unsat_ok"><span class="hs-identifier hs-var hs-var">ug_unsat_ok</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- True &lt;=&gt; ok to inline even if unsaturated</span><span>
</span><span id="line-1405"></span><span>      </span><span id="ug_boring_ok"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Bool
</span><a href="GHC.Core.html#ug_boring_ok"><span class="hs-identifier hs-var hs-var">ug_boring_ok</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>      </span><span class="hs-comment">-- True &lt;=&gt; ok to inline even if the context is boring</span><span>
</span><span id="line-1406"></span><span>                </span><span class="hs-comment">-- So True,True means &quot;always&quot;</span><span>
</span><span id="line-1407"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1408"></span><span>
</span><span id="line-1409"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnfIfGoodArgs"><span class="annot"><a href="GHC.Core.html#UnfIfGoodArgs"><span class="hs-identifier hs-var">UnfIfGoodArgs</span></a></span></span><span> </span><span class="hs-special">{</span><span>     </span><span class="hs-comment">-- Arose from a normal Id; the info here is the</span><span>
</span><span id="line-1410"></span><span>                        </span><span class="hs-comment">-- result of a simple analysis of the RHS</span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span>      </span><span id="ug_args"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; [Arity]
</span><a href="GHC.Core.html#ug_args"><span class="hs-identifier hs-var hs-var">ug_args</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Discount if the argument is evaluated.</span><span>
</span><span id="line-1413"></span><span>                          </span><span class="hs-comment">-- (i.e., a simplification will definitely</span><span>
</span><span id="line-1414"></span><span>                          </span><span class="hs-comment">-- be possible).  One elt of the list per *value* arg.</span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span>      </span><span id="ug_size"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Arity
</span><a href="GHC.Core.html#ug_size"><span class="hs-identifier hs-var hs-var">ug_size</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- The &quot;size&quot; of the unfolding.</span><span>
</span><span id="line-1417"></span><span>
</span><span id="line-1418"></span><span>      </span><span id="ug_res"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Arity
</span><a href="GHC.Core.html#ug_res"><span class="hs-identifier hs-var hs-var">ug_res</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>       </span><span class="hs-comment">-- Scrutinee discount: the discount to subtract if the thing is in</span><span>
</span><span id="line-1419"></span><span>    </span><span class="hs-special">}</span><span>                     </span><span class="hs-comment">-- a context (case (thing args) of ...),</span><span>
</span><span id="line-1420"></span><span>                          </span><span class="hs-comment">-- (where there are the right number of arguments.)</span><span>
</span><span id="line-1421"></span><span>
</span><span id="line-1422"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnfNever"><span class="annot"><a href="GHC.Core.html#UnfNever"><span class="hs-identifier hs-var">UnfNever</span></a></span></span><span>        </span><span class="hs-comment">-- The RHS is big, so don't inline it</span><span>
</span><span id="line-1423"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682589137"><span id="local-6989586621682589148"><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool
(UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool)
-&gt; (UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool)
-&gt; Eq UnfoldingGuidance
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool
== :: UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool
$c/= :: UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool
/= :: UnfoldingGuidance -&gt; UnfoldingGuidance -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span class="hs-comment">{- Note [UnfoldingCache]
~~~~~~~~~~~~~~~~~~~~~~~~
The UnfoldingCache field of an Unfolding holds four (strict) booleans,
all derived from the uf_tmpl field of the unfolding.

* We serialise the UnfoldingCache to and from interface files, for
  reasons described in  Note [Tying the 'CoreUnfolding' knot] in
  GHC.IfaceToCore

* Because it is a strict data type, we must be careful not to
  pattern-match on it until we actually want its values.  E.g
  GHC.Core.Unfold.callSiteInline/tryUnfolding are careful not to force
  it unnecessarily.  Just saves a bit of work.

* When `seq`ing Core to eliminate space leaks, to suffices to `seq` on
  the cache, but not its fields, because it is strict in all fields.

Note [Historical note: unfoldings for wrappers]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We used to have a nice clever scheme in interface files for
wrappers. A wrapper's unfolding can be reconstructed from its worker's
id and its strictness. This decreased .hi file size (sometimes
significantly, for modules like GHC.Classes with many high-arity w/w
splits) and had a slight corresponding effect on compile times.

However, when we added the second demand analysis, this scheme lead to
some Core lint errors. The second analysis could change the strictness
signatures, which sometimes resulted in a wrapper's regenerated
unfolding applying the wrapper to too many arguments.

Instead of repairing the clever .hi scheme, we abandoned it in favor
of simplicity. The .hi sizes are usually insignificant (excluding the
+1M for base libraries), and compile time barely increases (~+1% for
nofib). The nicer upshot is that the UnfoldingSource no longer mentions
an Id, so, eg, substitutions need not traverse them.


Note [DFun unfoldings]
~~~~~~~~~~~~~~~~~~~~~~
The Arity in a DFunUnfolding is total number of args (type and value)
that the DFun needs to produce a dictionary.  That's not necessarily
related to the ordinary arity of the dfun Id, esp if the class has
one method, so the dictionary is represented by a newtype.  Example

     class C a where { op :: a -&gt; Int }
     instance C a -&gt; C [a] where op xs = op (head xs)

The instance translates to

     $dfCList :: forall a. C a =&gt; C [a]  -- Arity 2!
     $dfCList = /\a.\d. $copList {a} d |&gt; co

     $copList :: forall a. C a =&gt; [a] -&gt; Int  -- Arity 2!
     $copList = /\a.\d.\xs. op {a} d (head xs)

Now we might encounter (op (dfCList {ty} d) a1 a2)
and we want the (op (dfList {ty} d)) rule to fire, because $dfCList
has all its arguments, even though its (value) arity is 2.  That's
why we record the number of expected arguments in the DFunUnfolding.

Note that although it's an Arity, it's most convenient for it to give
the *total* number of arguments, both type and value.  See the use
site in exprIsConApp_maybe.
-}</span><span>
</span><span id="line-1489"></span><span>
</span><span id="line-1490"></span><span class="hs-comment">-- Constants for the UnfWhen constructor</span><span>
</span><span id="line-1491"></span><span class="annot"><a href="GHC.Core.html#needSaturated"><span class="hs-identifier hs-type">needSaturated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#unSaturatedOk"><span class="hs-identifier hs-type">unSaturatedOk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1492"></span><span id="needSaturated"><span class="annot"><span class="annottext">needSaturated :: Bool
</span><a href="GHC.Core.html#needSaturated"><span class="hs-identifier hs-var hs-var">needSaturated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1493"></span><span id="unSaturatedOk"><span class="annot"><span class="annottext">unSaturatedOk :: Bool
</span><a href="GHC.Core.html#unSaturatedOk"><span class="hs-identifier hs-var hs-var">unSaturatedOk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1494"></span><span>
</span><span id="line-1495"></span><span class="annot"><a href="GHC.Core.html#boringCxtNotOk"><span class="hs-identifier hs-type">boringCxtNotOk</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#boringCxtOk"><span class="hs-identifier hs-type">boringCxtOk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1496"></span><span id="boringCxtOk"><span class="annot"><span class="annottext">boringCxtOk :: Bool
</span><a href="GHC.Core.html#boringCxtOk"><span class="hs-identifier hs-var hs-var">boringCxtOk</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1497"></span><span id="boringCxtNotOk"><span class="annot"><span class="annottext">boringCxtNotOk :: Bool
</span><a href="GHC.Core.html#boringCxtNotOk"><span class="hs-identifier hs-var hs-var">boringCxtNotOk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1498"></span><span>
</span><span id="line-1499"></span><span class="hs-comment">------------------------------------------------</span><span>
</span><span id="line-1500"></span><span class="annot"><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-type">noUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1501"></span><span class="annot"><span class="hs-comment">-- ^ There is no known 'Unfolding'</span></span><span>
</span><span id="line-1502"></span><span class="annot"><a href="GHC.Core.html#evaldUnfolding"><span class="hs-identifier hs-type">evaldUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1503"></span><span class="annot"><span class="hs-comment">-- ^ This unfolding marks the associated thing as being evaluated</span></span><span>
</span><span id="line-1504"></span><span>
</span><span id="line-1505"></span><span id="noUnfolding"><span class="annot"><span class="annottext">noUnfolding :: Unfolding
</span><a href="GHC.Core.html#noUnfolding"><span class="hs-identifier hs-var hs-var">noUnfolding</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>
</span><span id="line-1506"></span><span id="evaldUnfolding"><span class="annot"><span class="annottext">evaldUnfolding :: Unfolding
</span><a href="GHC.Core.html#evaldUnfolding"><span class="hs-identifier hs-var hs-var">evaldUnfolding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AltCon] -&gt; Unfolding
</span><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-var">OtherCon</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span class="hs-comment">-- | There is no known 'Unfolding', because this came from an</span><span>
</span><span id="line-1509"></span><span class="hs-comment">-- hi-boot file.</span><span>
</span><span id="line-1510"></span><span class="annot"><a href="GHC.Core.html#bootUnfolding"><span class="hs-identifier hs-type">bootUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1511"></span><span id="bootUnfolding"><span class="annot"><span class="annottext">bootUnfolding :: Unfolding
</span><a href="GHC.Core.html#bootUnfolding"><span class="hs-identifier hs-var hs-var">bootUnfolding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span class="annot"><a href="GHC.Core.html#mkOtherCon"><span class="hs-identifier hs-type">mkOtherCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span>
</span><span id="line-1514"></span><span id="mkOtherCon"><span class="annot"><span class="annottext">mkOtherCon :: [AltCon] -&gt; Unfolding
</span><a href="GHC.Core.html#mkOtherCon"><span class="hs-identifier hs-var hs-var">mkOtherCon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AltCon] -&gt; Unfolding
</span><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-var">OtherCon</span></a></span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span class="annot"><span class="hs-comment">-- | Retrieves the template of an unfolding: panics if none is known</span></span><span>
</span><span id="line-1517"></span><span class="annot"><a href="GHC.Core.html#unfoldingTemplate"><span class="hs-identifier hs-type">unfoldingTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1518"></span><span id="unfoldingTemplate"><span class="annot"><span class="annottext">unfoldingTemplate :: Unfolding -&gt; CoreExpr
</span><a href="GHC.Core.html#unfoldingTemplate"><span class="hs-identifier hs-var hs-var">unfoldingTemplate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unfolding -&gt; CoreExpr
</span><a href="GHC.Core.html#uf_tmpl"><span class="hs-identifier hs-var">uf_tmpl</span></a></span><span>
</span><span id="line-1519"></span><span>
</span><span id="line-1520"></span><span class="hs-comment">-- | Retrieves the template of an unfolding if possible</span><span>
</span><span id="line-1521"></span><span class="hs-comment">-- maybeUnfoldingTemplate is used mainly when specialising, and we do</span><span>
</span><span id="line-1522"></span><span class="hs-comment">-- want to specialise DFuns, so it's important to return a template</span><span>
</span><span id="line-1523"></span><span class="hs-comment">-- for DFunUnfoldings</span><span>
</span><span id="line-1524"></span><span class="annot"><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier hs-type">maybeUnfoldingTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1525"></span><span id="maybeUnfoldingTemplate"><span class="annot"><span class="annottext">maybeUnfoldingTemplate :: Unfolding -&gt; Maybe CoreExpr
</span><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier hs-var hs-var">maybeUnfoldingTemplate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_tmpl :: Unfolding -&gt; CoreExpr
</span><a href="GHC.Core.html#uf_tmpl"><span class="hs-identifier hs-var">uf_tmpl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589151"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589151"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe CoreExpr
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589151"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1527"></span><span class="annot"><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier hs-var">maybeUnfoldingTemplate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">df_bndrs :: Unfolding -&gt; [Id]
</span><a href="GHC.Core.html#df_bndrs"><span class="hs-identifier hs-var">df_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589152"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589152"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">df_con :: Unfolding -&gt; DataCon
</span><a href="GHC.Core.html#df_con"><span class="hs-identifier hs-var">df_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589153"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589153"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">df_args :: Unfolding -&gt; [CoreExpr]
</span><a href="GHC.Core.html#df_args"><span class="hs-identifier hs-var">df_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589154"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682589154"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1528"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe CoreExpr
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; CoreExpr -&gt; CoreExpr
forall b. [b] -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLams"><span class="hs-identifier hs-var">mkLams</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589152"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreExpr -&gt; [CoreExpr] -&gt; CoreExpr
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-identifier hs-var">mkApps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; CoreExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-var">dataConWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589153"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682589154"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span class="annot"><a href="GHC.Core.html#maybeUnfoldingTemplate"><span class="hs-identifier hs-var">maybeUnfoldingTemplate</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1530"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1531"></span><span>
</span><span id="line-1532"></span><span class="hs-comment">-- | The constructors that the unfolding could never be:</span><span>
</span><span id="line-1533"></span><span class="hs-comment">-- returns @[]@ if no information is available</span><span>
</span><span id="line-1534"></span><span class="annot"><a href="GHC.Core.html#otherCons"><span class="hs-identifier hs-type">otherCons</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1535"></span><span id="otherCons"><span class="annot"><span class="annottext">otherCons :: Unfolding -&gt; [AltCon]
</span><a href="GHC.Core.html#otherCons"><span class="hs-identifier hs-var hs-var">otherCons</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-type">OtherCon</span></a></span><span> </span><span id="local-6989586621682589156"><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589156"><span class="hs-identifier hs-var">cons</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589156"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-1536"></span><span class="annot"><a href="GHC.Core.html#otherCons"><span class="hs-identifier hs-var">otherCons</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1537"></span><span>
</span><span id="line-1538"></span><span class="hs-comment">-- | Determines if it is certainly the case that the unfolding will</span><span>
</span><span id="line-1539"></span><span class="hs-comment">-- yield a value (something in HNF): returns @False@ if unsure</span><span>
</span><span id="line-1540"></span><span class="annot"><a href="GHC.Core.html#isValueUnfolding"><span class="hs-identifier hs-type">isValueUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1541"></span><span>        </span><span class="hs-comment">-- Returns False for OtherCon</span><span>
</span><span id="line-1542"></span><span id="isValueUnfolding"><span class="annot"><span class="annottext">isValueUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isValueUnfolding"><span class="hs-identifier hs-var hs-var">isValueUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589157"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589157"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589157"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1543"></span><span class="annot"><a href="GHC.Core.html#isValueUnfolding"><span class="hs-identifier hs-var">isValueUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1544"></span><span class="annot"><a href="GHC.Core.html#isValueUnfolding"><span class="hs-identifier hs-var">isValueUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1545"></span><span>
</span><span id="line-1546"></span><span class="hs-comment">-- | Determines if it possibly the case that the unfolding will</span><span>
</span><span id="line-1547"></span><span class="hs-comment">-- yield a value. Unlike 'isValueUnfolding' it returns @True@</span><span>
</span><span id="line-1548"></span><span class="hs-comment">-- for 'OtherCon'</span><span>
</span><span id="line-1549"></span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-type">isEvaldUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1550"></span><span>        </span><span class="hs-comment">-- Returns True for OtherCon</span><span>
</span><span id="line-1551"></span><span id="isEvaldUnfolding"><span class="annot"><span class="annottext">isEvaldUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-var hs-var">isEvaldUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-type">OtherCon</span></a></span><span> </span><span class="annot"><span class="annottext">[AltCon]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1552"></span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-var">isEvaldUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1553"></span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-var">isEvaldUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589158"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589158"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589158"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1554"></span><span class="annot"><a href="GHC.Core.html#isEvaldUnfolding"><span class="hs-identifier hs-var">isEvaldUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1555"></span><span>
</span><span id="line-1556"></span><span class="hs-comment">-- | @True@ if the unfolding is a constructor application, the application</span><span>
</span><span id="line-1557"></span><span class="hs-comment">-- of a CONLIKE function or 'OtherCon'</span><span>
</span><span id="line-1558"></span><span class="annot"><a href="GHC.Core.html#isConLikeUnfolding"><span class="hs-identifier hs-type">isConLikeUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1559"></span><span id="isConLikeUnfolding"><span class="annot"><span class="annottext">isConLikeUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isConLikeUnfolding"><span class="hs-identifier hs-var hs-var">isConLikeUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589159"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589159"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_conlike"><span class="hs-identifier hs-var">uf_is_conlike</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589159"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1560"></span><span class="annot"><a href="GHC.Core.html#isConLikeUnfolding"><span class="hs-identifier hs-var">isConLikeUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span class="annot"><span class="hs-comment">-- | Is the thing we will unfold into certainly cheap?</span></span><span>
</span><span id="line-1563"></span><span class="annot"><a href="GHC.Core.html#isCheapUnfolding"><span class="hs-identifier hs-type">isCheapUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1564"></span><span id="isCheapUnfolding"><span class="annot"><span class="annottext">isCheapUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isCheapUnfolding"><span class="hs-identifier hs-var hs-var">isCheapUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589160"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589160"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_work_free"><span class="hs-identifier hs-var">uf_is_work_free</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589160"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1565"></span><span class="annot"><a href="GHC.Core.html#isCheapUnfolding"><span class="hs-identifier hs-var">isCheapUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span class="annot"><a href="GHC.Core.html#isExpandableUnfolding"><span class="hs-identifier hs-type">isExpandableUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1568"></span><span id="isExpandableUnfolding"><span class="annot"><span class="annottext">isExpandableUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isExpandableUnfolding"><span class="hs-identifier hs-var hs-var">isExpandableUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589161"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589161"><span class="hs-identifier hs-var">cache</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_expandable"><span class="hs-identifier hs-var">uf_expandable</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589161"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1569"></span><span class="annot"><a href="GHC.Core.html#isExpandableUnfolding"><span class="hs-identifier hs-var">isExpandableUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1570"></span><span>
</span><span id="line-1571"></span><span class="annot"><a href="GHC.Core.html#expandUnfolding_maybe"><span class="hs-identifier hs-type">expandUnfolding_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1572"></span><span class="hs-comment">-- Expand an expandable unfolding; this is used in rule matching</span><span>
</span><span id="line-1573"></span><span class="hs-comment">--   See Note [Expanding variables] in GHC.Core.Rules</span><span>
</span><span id="line-1574"></span><span class="hs-comment">-- The key point here is that CONLIKE things can be expanded</span><span>
</span><span id="line-1575"></span><span id="expandUnfolding_maybe"><span class="annot"><span class="annottext">expandUnfolding_maybe :: Unfolding -&gt; Maybe CoreExpr
</span><a href="GHC.Core.html#expandUnfolding_maybe"><span class="hs-identifier hs-var hs-var">expandUnfolding_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589162"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589162"><span class="hs-identifier hs-var">cache</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uf_tmpl :: Unfolding -&gt; CoreExpr
</span><a href="GHC.Core.html#uf_tmpl"><span class="hs-identifier hs-var">uf_tmpl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589163"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589163"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_expandable"><span class="hs-identifier hs-var">uf_expandable</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589162"><span class="hs-identifier hs-var">cache</span></a></span><span>
</span><span id="line-1577"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Maybe CoreExpr
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589163"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1578"></span><span class="annot"><a href="GHC.Core.html#expandUnfolding_maybe"><span class="hs-identifier hs-var">expandUnfolding_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CoreExpr
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1579"></span><span>
</span><span id="line-1580"></span><span class="annot"><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier hs-type">isCompulsoryUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1581"></span><span id="isCompulsoryUnfolding"><span class="annot"><span class="annottext">isCompulsoryUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier hs-var hs-var">isCompulsoryUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_src :: Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var">uf_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589164"><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589164"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource -&gt; Bool
</span><a href="GHC.Types.Basic.html#isCompulsorySource"><span class="hs-identifier hs-var">isCompulsorySource</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589164"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1582"></span><span class="annot"><a href="GHC.Core.html#isCompulsoryUnfolding"><span class="hs-identifier hs-var">isCompulsoryUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1583"></span><span>
</span><span id="line-1584"></span><span class="annot"><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-type">isStableUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1585"></span><span class="hs-comment">-- True of unfoldings that should not be overwritten</span><span>
</span><span id="line-1586"></span><span class="hs-comment">-- by a CoreUnfolding for the RHS of a let-binding</span><span>
</span><span id="line-1587"></span><span id="isStableUnfolding"><span class="annot"><span class="annottext">isStableUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var hs-var">isStableUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_src :: Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var">uf_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589166"><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589166"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource -&gt; Bool
</span><a href="GHC.Types.Basic.html#isStableSource"><span class="hs-identifier hs-var">isStableSource</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589166"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1588"></span><span class="annot"><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var">isStableUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1589"></span><span class="annot"><a href="GHC.Core.html#isStableUnfolding"><span class="hs-identifier hs-var">isStableUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1590"></span><span>
</span><span id="line-1591"></span><span class="annot"><a href="GHC.Core.html#isStableUserUnfolding"><span class="hs-identifier hs-type">isStableUserUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1592"></span><span class="hs-comment">-- True of unfoldings that arise from an INLINE or INLINEABLE pragma</span><span>
</span><span id="line-1593"></span><span id="isStableUserUnfolding"><span class="annot"><span class="annottext">isStableUserUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableUserUnfolding"><span class="hs-identifier hs-var hs-var">isStableUserUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_src :: Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var">uf_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589167"><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589167"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource -&gt; Bool
</span><a href="GHC.Types.Basic.html#isStableUserSource"><span class="hs-identifier hs-var">isStableUserSource</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589167"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1594"></span><span class="annot"><a href="GHC.Core.html#isStableUserUnfolding"><span class="hs-identifier hs-var">isStableUserUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1595"></span><span>
</span><span id="line-1596"></span><span class="annot"><a href="GHC.Core.html#isStableSystemUnfolding"><span class="hs-identifier hs-type">isStableSystemUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1597"></span><span class="hs-comment">-- True of unfoldings that arise from an INLINE or INLINEABLE pragma</span><span>
</span><span id="line-1598"></span><span id="isStableSystemUnfolding"><span class="annot"><span class="annottext">isStableSystemUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isStableSystemUnfolding"><span class="hs-identifier hs-var hs-var">isStableSystemUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_src :: Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var">uf_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589169"><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589169"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource -&gt; Bool
</span><a href="GHC.Types.Basic.html#isStableSystemSource"><span class="hs-identifier hs-var">isStableSystemSource</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589169"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1599"></span><span class="annot"><a href="GHC.Core.html#isStableSystemUnfolding"><span class="hs-identifier hs-var">isStableSystemUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1600"></span><span>
</span><span id="line-1601"></span><span class="annot"><a href="GHC.Core.html#isInlineUnfolding"><span class="hs-identifier hs-type">isInlineUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1602"></span><span class="hs-comment">-- ^ True of a /stable/ unfolding that is</span><span>
</span><span id="line-1603"></span><span class="hs-comment">--   (a) always inlined; that is, with an `UnfWhen` guidance, or</span><span>
</span><span id="line-1604"></span><span class="hs-comment">--   (b) a DFunUnfolding which never needs to be inlined</span><span>
</span><span id="line-1605"></span><span id="isInlineUnfolding"><span class="annot"><span class="annottext">isInlineUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isInlineUnfolding"><span class="hs-identifier hs-var hs-var">isInlineUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_src :: Unfolding -&gt; UnfoldingSource
</span><a href="GHC.Core.html#uf_src"><span class="hs-identifier hs-var">uf_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589171"><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589171"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uf_guidance :: Unfolding -&gt; UnfoldingGuidance
</span><a href="GHC.Core.html#uf_guidance"><span class="hs-identifier hs-var">uf_guidance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589172"><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="#local-6989586621682589172"><span class="hs-identifier hs-var">guidance</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1606"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">UnfoldingSource -&gt; Bool
</span><a href="GHC.Types.Basic.html#isStableSource"><span class="hs-identifier hs-var">isStableSource</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingSource
</span><a href="#local-6989586621682589171"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-1607"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfWhen"><span class="hs-identifier hs-type">UnfWhen</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="#local-6989586621682589172"><span class="hs-identifier hs-var">guidance</span></a></span><span>
</span><span id="line-1608"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1609"></span><span>
</span><span id="line-1610"></span><span class="annot"><a href="GHC.Core.html#isInlineUnfolding"><span class="hs-identifier hs-var">isInlineUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1611"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1612"></span><span>
</span><span id="line-1613"></span><span class="hs-comment">-- Default case</span><span>
</span><span id="line-1614"></span><span class="annot"><a href="GHC.Core.html#isInlineUnfolding"><span class="hs-identifier hs-var">isInlineUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1615"></span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span class="annot"><span class="hs-comment">-- | Only returns False if there is no unfolding information available at all</span></span><span>
</span><span id="line-1618"></span><span class="annot"><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier hs-type">hasSomeUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1619"></span><span id="hasSomeUnfolding"><span class="annot"><span class="annottext">hasSomeUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier hs-var hs-var">hasSomeUnfolding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1620"></span><span class="annot"><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier hs-var">hasSomeUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1621"></span><span class="annot"><a href="GHC.Core.html#hasSomeUnfolding"><span class="hs-identifier hs-var">hasSomeUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.Core.html#isBootUnfolding"><span class="hs-identifier hs-type">isBootUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1624"></span><span id="isBootUnfolding"><span class="annot"><span class="annottext">isBootUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isBootUnfolding"><span class="hs-identifier hs-var hs-var">isBootUnfolding</span></a></span></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1625"></span><span class="annot"><a href="GHC.Core.html#isBootUnfolding"><span class="hs-identifier hs-var">isBootUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1626"></span><span>
</span><span id="line-1627"></span><span class="annot"><a href="GHC.Core.html#neverUnfoldGuidance"><span class="hs-identifier hs-type">neverUnfoldGuidance</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#UnfoldingGuidance"><span class="hs-identifier hs-type">UnfoldingGuidance</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1628"></span><span id="neverUnfoldGuidance"><span class="annot"><span class="annottext">neverUnfoldGuidance :: UnfoldingGuidance -&gt; Bool
</span><a href="GHC.Core.html#neverUnfoldGuidance"><span class="hs-identifier hs-var hs-var">neverUnfoldGuidance</span></a></span></span><span> </span><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="GHC.Core.html#UnfNever"><span class="hs-identifier hs-var">UnfNever</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1629"></span><span class="annot"><a href="GHC.Core.html#neverUnfoldGuidance"><span class="hs-identifier hs-var">neverUnfoldGuidance</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingGuidance
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1630"></span><span>
</span><span id="line-1631"></span><span class="annot"><a href="GHC.Core.html#hasCoreUnfolding"><span class="hs-identifier hs-type">hasCoreUnfolding</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1632"></span><span class="hs-comment">-- An unfolding &quot;has Core&quot; if it contains a Core expression, which</span><span>
</span><span id="line-1633"></span><span class="hs-comment">-- may mention free variables. See Note [Fragile unfoldings]</span><span>
</span><span id="line-1634"></span><span id="hasCoreUnfolding"><span class="annot"><span class="annottext">hasCoreUnfolding :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#hasCoreUnfolding"><span class="hs-identifier hs-var hs-var">hasCoreUnfolding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1635"></span><span class="annot"><a href="GHC.Core.html#hasCoreUnfolding"><span class="hs-identifier hs-var">hasCoreUnfolding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1636"></span><span class="annot"><a href="GHC.Core.html#hasCoreUnfolding"><span class="hs-identifier hs-var">hasCoreUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1637"></span><span>  </span><span class="hs-comment">-- NoUnfolding, BootUnfolding, OtherCon have no Core</span><span>
</span><span id="line-1638"></span><span>
</span><span id="line-1639"></span><span class="annot"><a href="GHC.Core.html#canUnfold"><span class="hs-identifier hs-type">canUnfold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1640"></span><span id="canUnfold"><span class="annot"><span class="annottext">canUnfold :: Unfolding -&gt; Bool
</span><a href="GHC.Core.html#canUnfold"><span class="hs-identifier hs-var hs-var">canUnfold</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uf_guidance :: Unfolding -&gt; UnfoldingGuidance
</span><a href="GHC.Core.html#uf_guidance"><span class="hs-identifier hs-var">uf_guidance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589173"><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="#local-6989586621682589173"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnfoldingGuidance -&gt; Bool
</span><a href="GHC.Core.html#neverUnfoldGuidance"><span class="hs-identifier hs-var">neverUnfoldGuidance</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingGuidance
</span><a href="#local-6989586621682589173"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span class="annot"><a href="GHC.Core.html#canUnfold"><span class="hs-identifier hs-var">canUnfold</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-type">isBetterUnfoldingThan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Unfolding"><span class="hs-identifier hs-type">Unfolding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1644"></span><span class="hs-comment">-- See Note [Better unfolding]</span><span>
</span><span id="line-1645"></span><span id="isBetterUnfoldingThan"><span class="annot"><span class="annottext">isBetterUnfoldingThan :: Unfolding -&gt; Unfolding -&gt; Bool
</span><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-var hs-var">isBetterUnfoldingThan</span></a></span></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>   </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1646"></span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-var">isBetterUnfoldingThan</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1647"></span><span>
</span><span id="line-1648"></span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-var">isBetterUnfoldingThan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589175"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589175"><span class="hs-identifier hs-var">uc1</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589176"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589176"><span class="hs-identifier hs-var">unf2</span></a></span></span><span>
</span><span id="line-1649"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589176"><span class="hs-identifier hs-var">unf2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1650"></span><span>      </span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589177"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589177"><span class="hs-identifier hs-var">uc2</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589175"><span class="hs-identifier hs-var">uc1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589177"><span class="hs-identifier hs-var">uc2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1651"></span><span>      </span><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-type">OtherCon</span></a></span><span> </span><span class="annot"><span class="annottext">[AltCon]
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589175"><span class="hs-identifier hs-var">uc1</span></a></span><span>
</span><span id="line-1652"></span><span>      </span><span class="annot"><span class="annottext">Unfolding
</span><span class="hs-identifier">_</span></span><span>                              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1653"></span><span>         </span><span class="hs-comment">-- Default case: CoreUnfolding better than NoUnfolding etc</span><span>
</span><span id="line-1654"></span><span>         </span><span class="hs-comment">-- Better than DFunUnfolding? I don't care.</span><span>
</span><span id="line-1655"></span><span>
</span><span id="line-1656"></span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-var">isBetterUnfoldingThan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589179"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589179"><span class="hs-identifier hs-var">unf2</span></a></span></span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589179"><span class="hs-identifier hs-var">unf2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1659"></span><span>
</span><span id="line-1660"></span><span class="annot"><a href="GHC.Core.html#isBetterUnfoldingThan"><span class="hs-identifier hs-var">isBetterUnfoldingThan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-type">OtherCon</span></a></span><span> </span><span id="local-6989586621682589180"><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589180"><span class="hs-identifier hs-var">cs1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589181"><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589181"><span class="hs-identifier hs-var">unf2</span></a></span></span><span>
</span><span id="line-1661"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Unfolding
</span><a href="#local-6989586621682589181"><span class="hs-identifier hs-var">unf2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1662"></span><span>      </span><span class="annot"><a href="GHC.Core.html#CoreUnfolding"><span class="hs-identifier hs-type">CoreUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">uf_cache :: Unfolding -&gt; UnfoldingCache
</span><a href="GHC.Core.html#uf_cache"><span class="hs-identifier hs-var">uf_cache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682589182"><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589182"><span class="hs-identifier hs-var">uc</span></a></span></span><span class="hs-special">}</span><span>             </span><span class="hs-comment">-- If unf1 is OtherCon and unf2 is</span><span>
</span><span id="line-1663"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnfoldingCache -&gt; Bool
</span><a href="GHC.Core.html#uf_is_value"><span class="hs-identifier hs-var">uf_is_value</span></a></span><span> </span><span class="annot"><span class="annottext">UnfoldingCache
</span><a href="#local-6989586621682589182"><span class="hs-identifier hs-var">uc</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- just a thunk, unf1 is better</span><span>
</span><span id="line-1664"></span><span>
</span><span id="line-1665"></span><span>      </span><span class="annot"><a href="GHC.Core.html#OtherCon"><span class="hs-identifier hs-type">OtherCon</span></a></span><span> </span><span id="local-6989586621682589183"><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589183"><span class="hs-identifier hs-var">cs2</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[AltCon] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589180"><span class="hs-identifier hs-var">cs1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[AltCon] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[AltCon]
</span><a href="#local-6989586621682589183"><span class="hs-identifier hs-var">cs2</span></a></span><span>  </span><span class="hs-comment">-- A bit crude</span><span>
</span><span id="line-1666"></span><span>      </span><span class="annot"><a href="GHC.Core.html#DFunUnfolding"><span class="hs-identifier hs-type">DFunUnfolding</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1667"></span><span>      </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#NoUnfolding"><span class="hs-identifier hs-var">NoUnfolding</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1668"></span><span>      </span><span class="annot"><span class="annottext">Unfolding
</span><a href="GHC.Core.html#BootUnfolding"><span class="hs-identifier hs-var">BootUnfolding</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1669"></span><span>
</span><span id="line-1670"></span><span class="hs-comment">{- Note [Fragile unfoldings]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
An unfolding is &quot;fragile&quot; if it mentions free variables (and hence would
need substitution) or might be affected by optimisation.  The non-fragile
ones are

   NoUnfolding, BootUnfolding

   OtherCon {}    If we know this binder (say a lambda binder) will be
                  bound to an evaluated thing, we want to retain that
                  info in simpleOptExpr; see #13077.

We consider even a StableUnfolding as fragile, because it needs substitution.

Note [Better unfolding]
~~~~~~~~~~~~~~~~~~~~~~~
(unf1 `isBetterUnfoldingThan` unf2) is used when we have
    let x = &lt;rhs&gt; in   -- unf2
    let $j y = ...x...
    in case x of
          K a -&gt; ...$j v....

At the /call site/ of $j, `x` has a better unfolding than it does at the
/defnition site/ of $j; so we are keener to inline $j.  See
Note [Inlining join points] in GHC.Core.Opt.Simplify.Inline for discussion.

The notion of &quot;better&quot; is encapsulated here.

Note [Stable unfoldings]
~~~~~~~~~~~~~~~~~~~~~~~~
When you say
      {-# INLINE f #-}
      f x = &lt;rhs&gt;
you intend that calls (f e) are replaced by &lt;rhs&gt;[e/x] So we
should capture (\x.&lt;rhs&gt;) in the Unfolding of 'f', and never meddle
with it.  Meanwhile, we can optimise &lt;rhs&gt; to our heart's content,
leaving the original unfolding intact in Unfolding of 'f'. For example
        all xs = foldr (&amp;&amp;) True xs
        any p = all . map p  {-# INLINE any #-}
We optimise any's RHS fully, but leave the stable unfolding for `any`
saying &quot;all . map p&quot;, which deforests well at the call site.

So INLINE pragma gives rise to a stable unfolding, which captures the
original RHS.

Moreover, it's only used when 'f' is applied to the
specified number of arguments; that is, the number of argument on
the LHS of the '=' sign in the original source definition.
For example, (.) is now defined in the libraries like this
   {-# INLINE (.) #-}
   (.) f g = \x -&gt; f (g x)
so that it'll inline when applied to two arguments. If 'x' appeared
on the left, thus
   (.) f g x = f (g x)
it'd only inline when applied to three arguments.  This slightly-experimental
change was requested by Roman, but it seems to make sense.

Note [OccInfo in unfoldings and rules]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In unfoldings and rules, we guarantee that the template is occ-analysed, so
that the occurrence info on the binders is correct. That way, when the
Simplifier inlines an unfolding, it doesn't need to occ-analysis it first.
(The Simplifier is designed to simplify occ-analysed expressions.)

Given this decision it's vital that we do *always* do it.

* If we don't, we may get more simplifier iterations than necessary,
  because once-occ info isn't there

* More seriously, we may get an infinite loop if there's a Rec without a
  loop breaker marked.

* Or we may get code that mentions variables not in scope: #22761
  e.g. Suppose we have a stable unfolding : \y. let z = p+1 in 3
  Then the pre-simplifier occ-anal will occ-anal the unfolding
  (redundantly perhaps, but we need its free vars); this will not report
  the use of `p`; so p's binding will be discarded, and yet `p` is still
  mentioned.

  Better to occ-anal the unfolding at birth, which will drop the
  z-binding as dead code.  (Remember, it's the occurrence analyser that
  drops dead code.)

* Another example is #8892:
    \x -&gt; letrec { f = ...g...; g* = f } in body
  where g* is (for some strange reason) the loop breaker.  If we don't
  occ-anal it when reading it in, we won't mark g as a loop breaker, and we
  may inline g entirely in body, dropping its binding, and leaving the
  occurrence in f out of scope. This happened in #8892, where the unfolding
  in question was a DFun unfolding.


************************************************************************
*                                                                      *
                  AltCon
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1768"></span><span>
</span><span id="line-1769"></span><span class="hs-comment">-- The Ord is needed for the FiniteMap used in the lookForConstructor</span><span>
</span><span id="line-1770"></span><span class="hs-comment">-- in GHC.Core.Opt.Simplify.Env.  If you declared that lookForConstructor</span><span>
</span><span id="line-1771"></span><span class="annot"><span class="hs-comment">-- *ignores* constructor-applications with LitArg args, then you could get rid</span></span><span>
</span><span id="line-1772"></span><span class="hs-comment">-- of this Ord.</span><span>
</span><span id="line-1773"></span><span>
</span><span id="line-1774"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1775"></span><span>  </span><span id="local-6989586621682589193"><span class="annot"><span class="annottext">ppr :: AltCon -&gt; SDoc
</span><a href="#local-6989586621682589193"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621682589195"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589195"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589195"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1776"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span id="local-6989586621682589196"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589196"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589196"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1777"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;__DEFAULT&quot;</span></span><span>
</span><span id="line-1778"></span><span>
</span><span id="line-1779"></span><span id="local-6989586621682588250"><span class="annot"><a href="GHC.Core.html#cmpAlt"><span class="hs-identifier hs-type">cmpAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588250"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588250"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span></span><span>
</span><span id="line-1780"></span><span id="cmpAlt"><span class="annot"><span class="annottext">cmpAlt :: forall a. Alt a -&gt; Alt a -&gt; Ordering
</span><a href="GHC.Core.html#cmpAlt"><span class="hs-identifier hs-var hs-var">cmpAlt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621682589198"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589198"><span class="hs-identifier hs-var">con1</span></a></span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621682589199"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589199"><span class="hs-identifier hs-var">con2</span></a></span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589198"><span class="hs-identifier hs-var">con1</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon -&gt; AltCon -&gt; Ordering
</span><a href="GHC.Core.html#cmpAltCon"><span class="hs-operator hs-var">`cmpAltCon`</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589199"><span class="hs-identifier hs-var">con2</span></a></span><span>
</span><span id="line-1781"></span><span>
</span><span id="line-1782"></span><span id="local-6989586621682588252"><span class="annot"><a href="GHC.Core.html#ltAlt"><span class="hs-identifier hs-type">ltAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588252"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588252"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1783"></span><span id="ltAlt"><span class="annot"><span class="annottext">ltAlt :: forall a. Alt a -&gt; Alt a -&gt; Bool
</span><a href="GHC.Core.html#ltAlt"><span class="hs-identifier hs-var hs-var">ltAlt</span></a></span></span><span> </span><span id="local-6989586621682589202"><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621682589202"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621682589203"><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621682589203"><span class="hs-identifier hs-var">a2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621682589202"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">Alt a -&gt; Alt a -&gt; Ordering
forall a. Alt a -&gt; Alt a -&gt; Ordering
</span><a href="GHC.Core.html#cmpAlt"><span class="hs-operator hs-var">`cmpAlt`</span></a></span><span> </span><span class="annot"><span class="annottext">Alt a
</span><a href="#local-6989586621682589203"><span class="hs-identifier hs-var">a2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-1784"></span><span>
</span><span id="line-1785"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-type">cmpAltCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-1786"></span><span class="hs-comment">-- ^ Compares 'AltCon's within a single list of alternatives</span><span>
</span><span id="line-1787"></span><span class="hs-comment">-- DEFAULT comes out smallest, so that sorting by AltCon puts</span><span>
</span><span id="line-1788"></span><span class="hs-comment">-- alternatives in the order required: see Note [Case expression invariants]</span><span>
</span><span id="line-1789"></span><span id="cmpAltCon"><span class="annot"><span class="annottext">cmpAltCon :: AltCon -&gt; AltCon -&gt; Ordering
</span><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var hs-var">cmpAltCon</span></a></span></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>      </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-1790"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>      </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-1791"></span><span>
</span><span id="line-1792"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621682589204"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589204"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span id="local-6989586621682589205"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589205"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589204"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589205"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-1793"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#DataAlt"><span class="hs-identifier hs-type">DataAlt</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-1794"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span>  </span><span id="local-6989586621682589206"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589206"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span>  </span><span id="local-6989586621682589207"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589207"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589206"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Literal -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589207"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-1795"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#LitAlt"><span class="hs-identifier hs-type">LitAlt</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">AltCon
</span><a href="GHC.Core.html#DEFAULT"><span class="hs-identifier hs-var">DEFAULT</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-1796"></span><span>
</span><span id="line-1797"></span><span class="annot"><a href="GHC.Core.html#cmpAltCon"><span class="hs-identifier hs-var">cmpAltCon</span></a></span><span> </span><span id="local-6989586621682589208"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589208"><span class="hs-identifier hs-var">con1</span></a></span></span><span> </span><span id="local-6989586621682589209"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589209"><span class="hs-identifier hs-var">con2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cmpAltCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AltCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589208"><span class="hs-identifier hs-var">con1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589209"><span class="hs-identifier hs-var">con2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1798"></span><span>
</span><span id="line-1799"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Useful synonyms}
*                                                                      *
************************************************************************

Note [CoreProgram]
~~~~~~~~~~~~~~~~~~
The top level bindings of a program, a CoreProgram, are represented as
a list of CoreBind

 * Later bindings in the list can refer to earlier ones, but not vice
   versa.  So this is OK
      NonRec { x = 4 }
      Rec { p = ...q...x...
          ; q = ...p...x }
      Rec { f = ...p..x..f.. }
      NonRec { g = ..f..q...x.. }
   But it would NOT be ok for 'f' to refer to 'g'.

 * The occurrence analyser does strongly-connected component analysis
   on each Rec binding, and splits it into a sequence of smaller
   bindings where possible.  So the program typically starts life as a
   single giant Rec, which is then dependency-analysed into smaller
   chunks.
-}</span><span>
</span><span id="line-1826"></span><span>
</span><span id="line-1827"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-1828"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-1829"></span><span class="hs-keyword">type</span><span> </span><span id="CoreProgram"><span class="annot"><a href="GHC.Core.html#CoreProgram"><span class="hs-identifier hs-var">CoreProgram</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- See Note [CoreProgram]</span><span>
</span><span id="line-1830"></span><span>
</span><span id="line-1831"></span><span class="hs-comment">-- | The common case for the type of binders and variables when</span><span>
</span><span id="line-1832"></span><span class="hs-comment">-- we are manipulating the Core language within GHC</span><span>
</span><span id="line-1833"></span><span class="hs-keyword">type</span><span> </span><span id="CoreBndr"><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-var">CoreBndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-1834"></span><span class="annot"><span class="hs-comment">-- | Expressions where binders are 'CoreBndr's</span></span><span>
</span><span id="line-1835"></span><span class="hs-keyword">type</span><span> </span><span id="CoreExpr"><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-var">CoreExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1836"></span><span class="annot"><span class="hs-comment">-- | Argument expressions where binders are 'CoreBndr's</span></span><span>
</span><span id="line-1837"></span><span class="hs-keyword">type</span><span> </span><span id="CoreArg"><span class="annot"><a href="GHC.Core.html#CoreArg"><span class="hs-identifier hs-var">CoreArg</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span>  </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1838"></span><span class="annot"><span class="hs-comment">-- | Binding groups where binders are 'CoreBndr's</span></span><span>
</span><span id="line-1839"></span><span class="hs-keyword">type</span><span> </span><span id="CoreBind"><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-var">CoreBind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1840"></span><span class="annot"><span class="hs-comment">-- | Case alternatives where binders are 'CoreBndr's</span></span><span>
</span><span id="line-1841"></span><span class="hs-keyword">type</span><span> </span><span id="CoreAlt"><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-var">CoreAlt</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span>  </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span>
</span><span id="line-1842"></span><span>
</span><span id="line-1843"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Tagging}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1850"></span><span>
</span><span id="line-1851"></span><span class="annot"><span class="hs-comment">-- | Binders are /tagged/ with a t</span></span><span>
</span><span id="line-1852"></span><span class="hs-keyword">data</span><span> </span><span id="TaggedBndr"><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-var">TaggedBndr</span></a></span></span><span> </span><span id="local-6989586621682589212"><span class="annot"><a href="#local-6989586621682589212"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TB"><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-var">TB</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589212"><span class="hs-identifier hs-type">t</span></a></span><span>       </span><span class="hs-comment">-- TB for &quot;tagged binder&quot;</span><span>
</span><span id="line-1853"></span><span>
</span><span id="line-1854"></span><span class="hs-keyword">type</span><span> </span><span id="TaggedBind"><span class="annot"><a href="GHC.Core.html#TaggedBind"><span class="hs-identifier hs-var">TaggedBind</span></a></span></span><span> </span><span id="local-6989586621682589214"><span class="annot"><a href="#local-6989586621682589214"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-type">TaggedBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589214"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1855"></span><span class="hs-keyword">type</span><span> </span><span id="TaggedExpr"><span class="annot"><a href="GHC.Core.html#TaggedExpr"><span class="hs-identifier hs-var">TaggedExpr</span></a></span></span><span> </span><span id="local-6989586621682589215"><span class="annot"><a href="#local-6989586621682589215"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-type">TaggedBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589215"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1856"></span><span class="hs-keyword">type</span><span> </span><span id="TaggedArg"><span class="annot"><a href="GHC.Core.html#TaggedArg"><span class="hs-identifier hs-var">TaggedArg</span></a></span></span><span>  </span><span id="local-6989586621682589216"><span class="annot"><a href="#local-6989586621682589216"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-type">TaggedBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589216"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1857"></span><span class="hs-keyword">type</span><span> </span><span id="TaggedAlt"><span class="annot"><a href="GHC.Core.html#TaggedAlt"><span class="hs-identifier hs-var">TaggedAlt</span></a></span></span><span>  </span><span id="local-6989586621682589217"><span class="annot"><a href="#local-6989586621682589217"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-type">TaggedBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589217"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1858"></span><span>
</span><span id="line-1859"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682588258"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588258"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TaggedBndr"><span class="hs-identifier hs-type">TaggedBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588258"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1860"></span><span>  </span><span id="local-6989586621682589231"><span class="annot"><span class="annottext">ppr :: TaggedBndr b -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589232"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589232"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589233"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589233"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589232"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">b -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589233"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-1861"></span><span>
</span><span id="line-1862"></span><span id="local-6989586621682588260"><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-type">deTagExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedExpr"><span class="hs-identifier hs-type">TaggedExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588260"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span></span><span>
</span><span id="line-1863"></span><span id="deTagExpr"><span class="annot"><span class="annottext">deTagExpr :: forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var hs-var">deTagExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621682589237"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589237"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589237"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1864"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621682589238"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589238"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; CoreExpr
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589238"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1865"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621682589239"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589239"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; CoreExpr
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589239"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1866"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621682589240"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589240"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionR -&gt; CoreExpr
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589240"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1867"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621682589241"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589241"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621682589242"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589242"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr -&gt; CoreExpr
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589241"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589242"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589243"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589243"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589244"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589244"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; CoreExpr
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589243"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589244"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1869"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621682589245"><span class="annot"><span class="annottext">Bind (TaggedBndr t)
</span><a href="#local-6989586621682589245"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621682589246"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589246"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bind Id -&gt; CoreExpr -&gt; CoreExpr
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bind (TaggedBndr t) -&gt; Bind Id
forall t. TaggedBind t -&gt; Bind Id
</span><a href="GHC.Core.html#deTagBind"><span class="hs-identifier hs-var">deTagBind</span></a></span><span> </span><span class="annot"><span class="annottext">Bind (TaggedBndr t)
</span><a href="#local-6989586621682589245"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589246"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1870"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span id="local-6989586621682589248"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589248"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589249"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589249"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589250"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589250"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682589251"><span class="annot"><span class="annottext">[Alt (TaggedBndr t)]
</span><a href="#local-6989586621682589251"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Id -&gt; Type -&gt; [Alt Id] -&gt; CoreExpr
forall b. Expr b -&gt; b -&gt; Type -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589248"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589249"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589250"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Alt (TaggedBndr t) -&gt; Alt Id) -&gt; [Alt (TaggedBndr t)] -&gt; [Alt Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Alt (TaggedBndr t) -&gt; Alt Id
forall t. TaggedAlt t -&gt; Alt Id
</span><a href="GHC.Core.html#deTagAlt"><span class="hs-identifier hs-var">deTagAlt</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt (TaggedBndr t)]
</span><a href="#local-6989586621682589251"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1871"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621682589253"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589253"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682589254"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589254"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreTickish -&gt; CoreExpr -&gt; CoreExpr
forall b. CoreTickish -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589253"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589254"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1872"></span><span class="annot"><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621682589255"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589255"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682589256"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589256"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoercionR -&gt; CoreExpr
forall b. Expr b -&gt; CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589255"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589256"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1873"></span><span>
</span><span id="line-1874"></span><span id="local-6989586621682588263"><span class="annot"><a href="GHC.Core.html#deTagBind"><span class="hs-identifier hs-type">deTagBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedBind"><span class="hs-identifier hs-type">TaggedBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588263"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span></span><span>
</span><span id="line-1875"></span><span id="deTagBind"><span class="annot"><span class="annottext">deTagBind :: forall t. TaggedBind t -&gt; Bind Id
</span><a href="GHC.Core.html#deTagBind"><span class="hs-identifier hs-var hs-var">deTagBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589257"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589257"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589258"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589258"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; Bind Id
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589257"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589258"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1876"></span><span class="annot"><a href="GHC.Core.html#deTagBind"><span class="hs-identifier hs-var">deTagBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621682589259"><span class="annot"><span class="annottext">[(TaggedBndr t, Expr (TaggedBndr t))]
</span><a href="#local-6989586621682589259"><span class="hs-identifier hs-var">prs</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Id, CoreExpr)] -&gt; Bind Id
forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589260"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589261"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589260"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589260"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682589261"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589261"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(TaggedBndr t, Expr (TaggedBndr t))]
</span><a href="#local-6989586621682589259"><span class="hs-identifier hs-var">prs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1877"></span><span>
</span><span id="line-1878"></span><span id="local-6989586621682588265"><span class="annot"><a href="GHC.Core.html#deTagAlt"><span class="hs-identifier hs-type">deTagAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#TaggedAlt"><span class="hs-identifier hs-type">TaggedAlt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588265"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span></span><span>
</span><span id="line-1879"></span><span id="deTagAlt"><span class="annot"><span class="annottext">deTagAlt :: forall t. TaggedAlt t -&gt; Alt Id
</span><a href="GHC.Core.html#deTagAlt"><span class="hs-identifier hs-var hs-var">deTagAlt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621682589262"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589262"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682589263"><span class="annot"><span class="annottext">[TaggedBndr t]
</span><a href="#local-6989586621682589263"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621682589264"><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589264"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AltCon -&gt; [Id] -&gt; CoreExpr -&gt; Alt Id
forall b. AltCon -&gt; [b] -&gt; Expr b -&gt; Alt b
</span><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589262"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589265"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.html#TB"><span class="hs-identifier hs-type">TB</span></a></span><span> </span><span id="local-6989586621682589265"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589265"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TaggedBndr t]
</span><a href="#local-6989586621682589263"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr (TaggedBndr t) -&gt; CoreExpr
forall t. TaggedExpr t -&gt; CoreExpr
</span><a href="GHC.Core.html#deTagExpr"><span class="hs-identifier hs-var">deTagExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr (TaggedBndr t)
</span><a href="#local-6989586621682589264"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1880"></span><span>
</span><span id="line-1881"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Core-constructing functions with checking}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1888"></span><span>
</span><span id="line-1889"></span><span class="hs-comment">-- | Apply a list of argument expressions to a function expression in a nested fashion. Prefer to</span><span>
</span><span id="line-1890"></span><span class="hs-comment">-- use 'GHC.Core.Make.mkCoreApps' if possible</span><span>
</span><span id="line-1891"></span><span id="local-6989586621682588244"><span class="annot"><a href="GHC.Core.html#mkApps"><span class="hs-identifier hs-type">mkApps</span></a></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588244"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588244"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588244"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1892"></span><span class="annot"><span class="hs-comment">-- | Apply a list of type argument expressions to a function expression in a nested fashion</span></span><span>
</span><span id="line-1893"></span><span id="local-6989586621682588280"><span class="annot"><a href="GHC.Core.html#mkTyApps"><span class="hs-identifier hs-type">mkTyApps</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588280"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588280"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1894"></span><span class="annot"><span class="hs-comment">-- | Apply a list of coercion argument expressions to a function expression in a nested fashion</span></span><span>
</span><span id="line-1895"></span><span id="local-6989586621682588273"><span class="annot"><a href="GHC.Core.html#mkCoApps"><span class="hs-identifier hs-type">mkCoApps</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588273"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588273"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1896"></span><span class="annot"><span class="hs-comment">-- | Apply a list of type or value variables to a function expression in a nested fashion</span></span><span>
</span><span id="line-1897"></span><span id="local-6989586621682588275"><span class="annot"><a href="GHC.Core.html#mkVarApps"><span class="hs-identifier hs-type">mkVarApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588275"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588275"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1898"></span><span class="hs-comment">-- | Apply a list of argument expressions to a data constructor in a nested fashion. Prefer to</span><span>
</span><span id="line-1899"></span><span class="hs-comment">-- use 'GHC.Core.Make.mkCoreConApps' if possible</span><span>
</span><span id="line-1900"></span><span id="local-6989586621682588277"><span class="annot"><a href="GHC.Core.html#mkConApp"><span class="hs-identifier hs-type">mkConApp</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588277"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588277"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1901"></span><span>
</span><span id="line-1902"></span><span id="mkApps"><span class="annot"><span class="annottext">mkApps :: forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-identifier hs-var hs-var">mkApps</span></a></span></span><span>    </span><span id="local-6989586621682589267"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589267"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589268"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589268"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Expr b -&gt; Expr b -&gt; Expr b) -&gt; Expr b -&gt; [Expr b] -&gt; Expr b
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b -&gt; Expr b
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span>                       </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589267"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589268"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1903"></span><span id="mkCoApps"><span class="annot"><span class="annottext">mkCoApps :: forall b. Expr b -&gt; [CoercionR] -&gt; Expr b
</span><a href="GHC.Core.html#mkCoApps"><span class="hs-identifier hs-var hs-var">mkCoApps</span></a></span></span><span>  </span><span id="local-6989586621682589271"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589271"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589272"><span class="annot"><span class="annottext">[CoercionR]
</span><a href="#local-6989586621682589272"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Expr b -&gt; CoercionR -&gt; Expr b) -&gt; Expr b -&gt; [CoercionR] -&gt; Expr b
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682589273"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589273"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682589274"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589274"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b -&gt; Expr b
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589273"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionR -&gt; Expr b
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589274"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589271"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[CoercionR]
</span><a href="#local-6989586621682589272"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1904"></span><span id="mkVarApps"><span class="annot"><span class="annottext">mkVarApps :: forall b. Expr b -&gt; [Id] -&gt; Expr b
</span><a href="GHC.Core.html#mkVarApps"><span class="hs-identifier hs-var hs-var">mkVarApps</span></a></span></span><span> </span><span id="local-6989586621682589276"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589276"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589277"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589277"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Expr b -&gt; Id -&gt; Expr b) -&gt; Expr b -&gt; [Id] -&gt; Expr b
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682589278"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589278"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682589279"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589279"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b -&gt; Expr b
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589278"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Expr b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier hs-var">varToCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589279"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589276"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589277"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-1905"></span><span id="mkConApp"><span class="annot"><span class="annottext">mkConApp :: forall b. DataCon -&gt; [Arg b] -&gt; Arg b
</span><a href="GHC.Core.html#mkConApp"><span class="hs-identifier hs-var hs-var">mkConApp</span></a></span></span><span> </span><span id="local-6989586621682589280"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589280"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682589281"><span class="annot"><span class="annottext">[Arg b]
</span><a href="#local-6989586621682589281"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arg b -&gt; [Arg b] -&gt; Arg b
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-identifier hs-var">mkApps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Arg b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-var">dataConWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589280"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg b]
</span><a href="#local-6989586621682589281"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1906"></span><span>
</span><span id="line-1907"></span><span id="mkTyApps"><span class="annot"><span class="annottext">mkTyApps :: forall b. Expr b -&gt; [Type] -&gt; Expr b
</span><a href="GHC.Core.html#mkTyApps"><span class="hs-identifier hs-var hs-var">mkTyApps</span></a></span></span><span>  </span><span id="local-6989586621682589283"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589283"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589284"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682589284"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Expr b -&gt; Type -&gt; Expr b) -&gt; Expr b -&gt; [Type] -&gt; Expr b
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682589285"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589285"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682589286"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589286"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b -&gt; Expr b
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589285"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Expr b
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#mkTyArg"><span class="hs-identifier hs-var">mkTyArg</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589286"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589283"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682589284"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1908"></span><span>
</span><span id="line-1909"></span><span id="local-6989586621682588282"><span class="annot"><a href="GHC.Core.html#mkConApp2"><span class="hs-identifier hs-type">mkConApp2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588282"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1910"></span><span id="mkConApp2"><span class="annot"><span class="annottext">mkConApp2 :: forall b. DataCon -&gt; [Type] -&gt; [Id] -&gt; Expr b
</span><a href="GHC.Core.html#mkConApp2"><span class="hs-identifier hs-var hs-var">mkConApp2</span></a></span></span><span> </span><span id="local-6989586621682589287"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589287"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682589288"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682589288"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621682589289"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589289"><span class="hs-identifier hs-var">arg_ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Expr b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Id
</span><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-var">dataConWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682589287"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1911"></span><span>                            </span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; Expr b
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-operator hs-var">`mkApps`</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Expr b) -&gt; [Type] -&gt; [Expr b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Expr b
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682589288"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1912"></span><span>                            </span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; Expr b
forall b. Expr b -&gt; [Expr b] -&gt; Expr b
</span><a href="GHC.Core.html#mkApps"><span class="hs-operator hs-var">`mkApps`</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Expr b) -&gt; [Id] -&gt; [Expr b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Expr b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier hs-var">varToCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589289"><span class="hs-identifier hs-var">arg_ids</span></a></span><span>
</span><span id="line-1913"></span><span>
</span><span id="line-1914"></span><span id="local-6989586621682589290"><span class="annot"><a href="GHC.Core.html#mkTyArg"><span class="hs-identifier hs-type">mkTyArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589290"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1915"></span><span id="mkTyArg"><span class="annot"><span class="annottext">mkTyArg :: forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#mkTyArg"><span class="hs-identifier hs-var hs-var">mkTyArg</span></a></span></span><span> </span><span id="local-6989586621682589291"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589291"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1916"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682589292"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589292"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe CoercionR
</span><a href="GHC.Core.Type.html#isCoercionTy_maybe"><span class="hs-identifier hs-var">isCoercionTy_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589291"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionR -&gt; Expr b
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589292"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1917"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Expr b
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589291"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1918"></span><span>
</span><span id="line-1919"></span><span class="hs-comment">-- | Create a machine integer literal expression of type @Int#@ from an @Integer@.</span><span>
</span><span id="line-1920"></span><span class="hs-comment">-- If you want an expression of type @Int@ use 'GHC.Core.Make.mkIntExpr'</span><span>
</span><span id="line-1921"></span><span id="local-6989586621682588286"><span class="annot"><a href="GHC.Core.html#mkIntLit"><span class="hs-identifier hs-type">mkIntLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588286"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1922"></span><span id="mkIntLit"><span class="annot"><span class="annottext">mkIntLit :: forall b. Platform -&gt; Integer -&gt; Expr b
</span><a href="GHC.Core.html#mkIntLit"><span class="hs-identifier hs-var hs-var">mkIntLit</span></a></span></span><span> </span><span id="local-6989586621682589294"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589294"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682589295"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589295"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitInt"><span class="hs-identifier hs-var">mkLitInt</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589294"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589295"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>
</span><span id="line-1924"></span><span class="hs-comment">-- | Create a machine integer literal expression of type @Int#@ from an</span><span>
</span><span id="line-1925"></span><span class="hs-comment">-- @Integer@, wrapping if necessary.</span><span>
</span><span id="line-1926"></span><span class="hs-comment">-- If you want an expression of type @Int@ use 'GHC.Core.Make.mkIntExpr'</span><span>
</span><span id="line-1927"></span><span id="local-6989586621682589297"><span class="annot"><a href="GHC.Core.html#mkIntLitWrap"><span class="hs-identifier hs-type">mkIntLitWrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589297"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1928"></span><span id="mkIntLitWrap"><span class="annot"><span class="annottext">mkIntLitWrap :: forall b. Platform -&gt; Integer -&gt; Expr b
</span><a href="GHC.Core.html#mkIntLitWrap"><span class="hs-identifier hs-var hs-var">mkIntLitWrap</span></a></span></span><span> </span><span id="local-6989586621682589298"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589298"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682589299"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589299"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitIntWrap"><span class="hs-identifier hs-var">mkLitIntWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589298"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589299"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1929"></span><span>
</span><span id="line-1930"></span><span class="hs-comment">-- | Create a machine word literal expression of type  @Word#@ from an @Integer@.</span><span>
</span><span id="line-1931"></span><span class="hs-comment">-- If you want an expression of type @Word@ use 'GHC.Core.Make.mkWordExpr'</span><span>
</span><span id="line-1932"></span><span id="local-6989586621682589301"><span class="annot"><a href="GHC.Core.html#mkWordLit"><span class="hs-identifier hs-type">mkWordLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589301"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1933"></span><span id="mkWordLit"><span class="annot"><span class="annottext">mkWordLit :: forall b. Platform -&gt; Integer -&gt; Expr b
</span><a href="GHC.Core.html#mkWordLit"><span class="hs-identifier hs-var hs-var">mkWordLit</span></a></span></span><span> </span><span id="local-6989586621682589302"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589302"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682589303"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589303"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitWord"><span class="hs-identifier hs-var">mkLitWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589302"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589303"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1934"></span><span>
</span><span id="line-1935"></span><span class="hs-comment">-- | Create a machine word literal expression of type  @Word#@ from an</span><span>
</span><span id="line-1936"></span><span class="hs-comment">-- @Integer@, wrapping if necessary.</span><span>
</span><span id="line-1937"></span><span class="hs-comment">-- If you want an expression of type @Word@ use 'GHC.Core.Make.mkWordExpr'</span><span>
</span><span id="line-1938"></span><span id="local-6989586621682589305"><span class="annot"><a href="GHC.Core.html#mkWordLitWrap"><span class="hs-identifier hs-type">mkWordLitWrap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589305"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1939"></span><span id="mkWordLitWrap"><span class="annot"><span class="annottext">mkWordLitWrap :: forall b. Platform -&gt; Integer -&gt; Expr b
</span><a href="GHC.Core.html#mkWordLitWrap"><span class="hs-identifier hs-var hs-var">mkWordLitWrap</span></a></span></span><span> </span><span id="local-6989586621682589306"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589306"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span id="local-6989586621682589307"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589307"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitWordWrap"><span class="hs-identifier hs-var">mkLitWordWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682589306"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589307"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1940"></span><span>
</span><span id="line-1941"></span><span id="local-6989586621682588291"><span class="annot"><a href="GHC.Core.html#mkWord8Lit"><span class="hs-identifier hs-type">mkWord8Lit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588291"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1942"></span><span id="mkWord8Lit"><span class="annot"><span class="annottext">mkWord8Lit :: forall b. Integer -&gt; Expr b
</span><a href="GHC.Core.html#mkWord8Lit"><span class="hs-identifier hs-var hs-var">mkWord8Lit</span></a></span></span><span>    </span><span id="local-6989586621682589309"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589309"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitWord8"><span class="hs-identifier hs-var">mkLitWord8</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621682589309"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1943"></span><span>
</span><span id="line-1944"></span><span id="local-6989586621682588293"><span class="annot"><a href="GHC.Core.html#mkWord32LitWord32"><span class="hs-identifier hs-type">mkWord32LitWord32</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588293"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1945"></span><span id="mkWord32LitWord32"><span class="annot"><span class="annottext">mkWord32LitWord32 :: forall b. Word32 -&gt; Expr b
</span><a href="GHC.Core.html#mkWord32LitWord32"><span class="hs-identifier hs-var hs-var">mkWord32LitWord32</span></a></span></span><span> </span><span id="local-6989586621682589313"><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682589313"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitWord32"><span class="hs-identifier hs-var">mkLitWord32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Word32
</span><a href="#local-6989586621682589313"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1946"></span><span>
</span><span id="line-1947"></span><span id="local-6989586621682588296"><span class="annot"><a href="GHC.Core.html#mkWord64LitWord64"><span class="hs-identifier hs-type">mkWord64LitWord64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588296"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1948"></span><span id="mkWord64LitWord64"><span class="annot"><span class="annottext">mkWord64LitWord64 :: forall b. Word64 -&gt; Expr b
</span><a href="GHC.Core.html#mkWord64LitWord64"><span class="hs-identifier hs-var hs-var">mkWord64LitWord64</span></a></span></span><span> </span><span id="local-6989586621682589317"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621682589317"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitWord64"><span class="hs-identifier hs-var">mkLitWord64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621682589317"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1949"></span><span>
</span><span id="line-1950"></span><span id="local-6989586621682588298"><span class="annot"><a href="GHC.Core.html#mkInt64LitInt64"><span class="hs-identifier hs-type">mkInt64LitInt64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588298"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1951"></span><span id="mkInt64LitInt64"><span class="annot"><span class="annottext">mkInt64LitInt64 :: forall b. Int64 -&gt; Expr b
</span><a href="GHC.Core.html#mkInt64LitInt64"><span class="hs-identifier hs-var hs-var">mkInt64LitInt64</span></a></span></span><span> </span><span id="local-6989586621682589321"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621682589321"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitInt64"><span class="hs-identifier hs-var">mkLitInt64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621682589321"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>
</span><span id="line-1953"></span><span class="hs-comment">-- | Create a machine character literal expression of type @Char#@.</span><span>
</span><span id="line-1954"></span><span class="hs-comment">-- If you want an expression of type @Char@ use 'GHC.Core.Make.mkCharExpr'</span><span>
</span><span id="line-1955"></span><span id="local-6989586621682588300"><span class="annot"><a href="GHC.Core.html#mkCharLit"><span class="hs-identifier hs-type">mkCharLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588300"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- | Create a machine string literal expression of type @Addr#@.</span><span>
</span><span id="line-1957"></span><span class="hs-comment">-- If you want an expression of type @String@ use 'GHC.Core.Make.mkStringExpr'</span><span>
</span><span id="line-1958"></span><span id="local-6989586621682588302"><span class="annot"><a href="GHC.Core.html#mkStringLit"><span class="hs-identifier hs-type">mkStringLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588302"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1959"></span><span>
</span><span id="line-1960"></span><span id="mkCharLit"><span class="annot"><span class="annottext">mkCharLit :: forall b. Char -&gt; Expr b
</span><a href="GHC.Core.html#mkCharLit"><span class="hs-identifier hs-var hs-var">mkCharLit</span></a></span></span><span>   </span><span id="local-6989586621682589323"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682589323"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitChar"><span class="hs-identifier hs-var">mkLitChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682589323"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1961"></span><span id="mkStringLit"><span class="annot"><span class="annottext">mkStringLit :: forall b. String -&gt; Expr b
</span><a href="GHC.Core.html#mkStringLit"><span class="hs-identifier hs-var hs-var">mkStringLit</span></a></span></span><span> </span><span id="local-6989586621682589325"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682589325"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitString"><span class="hs-identifier hs-var">mkLitString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682589325"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1962"></span><span>
</span><span id="line-1963"></span><span class="hs-comment">-- | Create a machine single precision literal expression of type @Float#@ from a @Rational@.</span><span>
</span><span id="line-1964"></span><span class="hs-comment">-- If you want an expression of type @Float@ use 'GHC.Core.Make.mkFloatExpr'</span><span>
</span><span id="line-1965"></span><span id="local-6989586621682588304"><span class="annot"><a href="GHC.Core.html#mkFloatLit"><span class="hs-identifier hs-type">mkFloatLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588304"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1966"></span><span class="hs-comment">-- | Create a machine single precision literal expression of type @Float#@ from a @Float@.</span><span>
</span><span id="line-1967"></span><span class="hs-comment">-- If you want an expression of type @Float@ use 'GHC.Core.Make.mkFloatExpr'</span><span>
</span><span id="line-1968"></span><span id="local-6989586621682588306"><span class="annot"><a href="GHC.Core.html#mkFloatLitFloat"><span class="hs-identifier hs-type">mkFloatLitFloat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588306"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1969"></span><span>
</span><span id="line-1970"></span><span id="mkFloatLit"><span class="annot"><span class="annottext">mkFloatLit :: forall b. Rational -&gt; Expr b
</span><a href="GHC.Core.html#mkFloatLit"><span class="hs-identifier hs-var hs-var">mkFloatLit</span></a></span></span><span>      </span><span id="local-6989586621682589327"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682589327"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitFloat"><span class="hs-identifier hs-var">mkLitFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682589327"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1971"></span><span id="mkFloatLitFloat"><span class="annot"><span class="annottext">mkFloatLitFloat :: forall b. Float -&gt; Expr b
</span><a href="GHC.Core.html#mkFloatLitFloat"><span class="hs-identifier hs-var hs-var">mkFloatLitFloat</span></a></span></span><span> </span><span id="local-6989586621682589331"><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621682589331"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitFloat"><span class="hs-identifier hs-var">mkLitFloat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Float -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Float
</span><a href="#local-6989586621682589331"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span class="hs-comment">-- | Create a machine double precision literal expression of type @Double#@ from a @Rational@.</span><span>
</span><span id="line-1974"></span><span class="hs-comment">-- If you want an expression of type @Double@ use 'GHC.Core.Make.mkDoubleExpr'</span><span>
</span><span id="line-1975"></span><span id="local-6989586621682589332"><span class="annot"><a href="GHC.Core.html#mkDoubleLit"><span class="hs-identifier hs-type">mkDoubleLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589332"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1976"></span><span class="hs-comment">-- | Create a machine double precision literal expression of type @Double#@ from a @Double@.</span><span>
</span><span id="line-1977"></span><span class="hs-comment">-- If you want an expression of type @Double@ use 'GHC.Core.Make.mkDoubleExpr'</span><span>
</span><span id="line-1978"></span><span id="local-6989586621682588310"><span class="annot"><a href="GHC.Core.html#mkDoubleLitDouble"><span class="hs-identifier hs-type">mkDoubleLitDouble</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588310"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1979"></span><span>
</span><span id="line-1980"></span><span id="mkDoubleLit"><span class="annot"><span class="annottext">mkDoubleLit :: forall b. Rational -&gt; Expr b
</span><a href="GHC.Core.html#mkDoubleLit"><span class="hs-identifier hs-var hs-var">mkDoubleLit</span></a></span></span><span>       </span><span id="local-6989586621682589333"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682589333"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitDouble"><span class="hs-identifier hs-var">mkLitDouble</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621682589333"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1981"></span><span id="mkDoubleLitDouble"><span class="annot"><span class="annottext">mkDoubleLitDouble :: forall b. Double -&gt; Expr b
</span><a href="GHC.Core.html#mkDoubleLitDouble"><span class="hs-identifier hs-var hs-var">mkDoubleLitDouble</span></a></span></span><span> </span><span id="local-6989586621682589337"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621682589337"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr b
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Literal
</span><a href="GHC.Types.Literal.html#mkLitDouble"><span class="hs-identifier hs-var">mkLitDouble</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621682589337"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1982"></span><span>
</span><span id="line-1983"></span><span class="hs-comment">-- | Bind all supplied binding groups over an expression in a nested let expression. Assumes</span><span>
</span><span id="line-1984"></span><span class="hs-comment">-- that the rhs satisfies the let-can-float invariant.  Prefer to use</span><span>
</span><span id="line-1985"></span><span class="hs-comment">-- 'GHC.Core.Make.mkCoreLets' if possible, which does guarantee the invariant</span><span>
</span><span id="line-1986"></span><span id="local-6989586621682588315"><span class="annot"><a href="GHC.Core.html#mkLets"><span class="hs-identifier hs-type">mkLets</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588315"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588315"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588315"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1987"></span><span class="hs-comment">-- | Bind all supplied binders over an expression in a nested lambda expression. Prefer to</span><span>
</span><span id="line-1988"></span><span class="hs-comment">-- use 'GHC.Core.Make.mkCoreLams' if possible</span><span>
</span><span id="line-1989"></span><span id="local-6989586621682588243"><span class="annot"><a href="GHC.Core.html#mkLams"><span class="hs-identifier hs-type">mkLams</span></a></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588243"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588243"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588243"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1990"></span><span>
</span><span id="line-1991"></span><span id="mkLams"><span class="annot"><span class="annottext">mkLams :: forall b. [b] -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLams"><span class="hs-identifier hs-var hs-var">mkLams</span></a></span></span><span> </span><span id="local-6989586621682589339"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589339"><span class="hs-identifier hs-var">binders</span></a></span></span><span> </span><span id="local-6989586621682589340"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589340"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(b -&gt; Expr b -&gt; Expr b) -&gt; Expr b -&gt; [b] -&gt; Expr b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Expr b -&gt; Expr b
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589340"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589339"><span class="hs-identifier hs-var">binders</span></a></span><span>
</span><span id="line-1992"></span><span id="mkLets"><span class="annot"><span class="annottext">mkLets :: forall b. [Bind b] -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLets"><span class="hs-identifier hs-var hs-var">mkLets</span></a></span></span><span> </span><span id="local-6989586621682589343"><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589343"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621682589344"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589344"><span class="hs-identifier hs-var">body</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bind b -&gt; Expr b -&gt; Expr b) -&gt; Expr b -&gt; [Bind b] -&gt; Expr b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Bind b -&gt; Expr b -&gt; Expr b
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLet"><span class="hs-identifier hs-var">mkLet</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589344"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589343"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1993"></span><span>
</span><span id="line-1994"></span><span id="local-6989586621682589345"><span class="annot"><a href="GHC.Core.html#mkLet"><span class="hs-identifier hs-type">mkLet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589345"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589345"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589345"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1995"></span><span class="hs-comment">-- The desugarer sometimes generates an empty Rec group</span><span>
</span><span id="line-1996"></span><span class="hs-comment">-- which Lint rejects, so we kill it off right away</span><span>
</span><span id="line-1997"></span><span id="mkLet"><span class="annot"><span class="annottext">mkLet :: forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLet"><span class="hs-identifier hs-var hs-var">mkLet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589346"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589346"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589346"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1998"></span><span class="annot"><a href="GHC.Core.html#mkLet"><span class="hs-identifier hs-var">mkLet</span></a></span><span> </span><span id="local-6989586621682589347"><span class="annot"><span class="annottext">Bind b
</span><a href="#local-6989586621682589347"><span class="hs-identifier hs-var">bind</span></a></span></span><span>     </span><span id="local-6989586621682589348"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589348"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bind b -&gt; Expr b -&gt; Expr b
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">Bind b
</span><a href="#local-6989586621682589347"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589348"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1999"></span><span>
</span><span id="line-2000"></span><span class="annot"><span class="hs-comment">-- | @mkLetNonRec bndr rhs body@ wraps @body@ in a @let@ binding @bndr@.</span></span><span>
</span><span id="line-2001"></span><span id="local-6989586621682588318"><span class="annot"><a href="GHC.Core.html#mkLetNonRec"><span class="hs-identifier hs-type">mkLetNonRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682588318"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588318"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588318"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588318"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-2002"></span><span id="mkLetNonRec"><span class="annot"><span class="annottext">mkLetNonRec :: forall b. b -&gt; Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLetNonRec"><span class="hs-identifier hs-var hs-var">mkLetNonRec</span></a></span></span><span> </span><span id="local-6989586621682589349"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589349"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589350"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589350"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621682589351"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589351"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bind b -&gt; Expr b -&gt; Expr b
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Expr b -&gt; Bind b
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589349"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589350"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589351"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2003"></span><span>
</span><span id="line-2004"></span><span class="hs-comment">-- | @mkLetRec binds body@ wraps @body@ in a @let rec@ with the given set of</span><span>
</span><span id="line-2005"></span><span class="hs-comment">-- @binds@ if binds is non-empty.</span><span>
</span><span id="line-2006"></span><span id="local-6989586621682588320"><span class="annot"><a href="GHC.Core.html#mkLetRec"><span class="hs-identifier hs-type">mkLetRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588320"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588320"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588320"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588320"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-2007"></span><span id="mkLetRec"><span class="annot"><span class="annottext">mkLetRec :: forall b. [(b, Expr b)] -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#mkLetRec"><span class="hs-identifier hs-var hs-var">mkLetRec</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621682589352"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589352"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589352"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2008"></span><span class="annot"><a href="GHC.Core.html#mkLetRec"><span class="hs-identifier hs-var">mkLetRec</span></a></span><span> </span><span id="local-6989586621682589353"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589353"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589354"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589354"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bind b -&gt; Expr b -&gt; Expr b
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(b, Expr b)] -&gt; Bind b
forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589353"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589354"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2009"></span><span>
</span><span id="line-2010"></span><span class="hs-comment">-- | Create a binding group where a type variable is bound to a type.</span><span>
</span><span id="line-2011"></span><span class="hs-comment">-- Per Note [Core type and coercion invariant],</span><span>
</span><span id="line-2012"></span><span class="hs-comment">-- this can only be used to bind something in a non-recursive @let@ expression</span><span>
</span><span id="line-2013"></span><span class="annot"><a href="GHC.Core.html#mkTyBind"><span class="hs-identifier hs-type">mkTyBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-2014"></span><span id="mkTyBind"><span class="annot"><span class="annottext">mkTyBind :: Id -&gt; Type -&gt; Bind Id
</span><a href="GHC.Core.html#mkTyBind"><span class="hs-identifier hs-var hs-var">mkTyBind</span></a></span></span><span> </span><span id="local-6989586621682589356"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589356"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621682589357"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589357"><span class="hs-identifier hs-var">ty</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; Bind Id
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589356"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; CoreExpr
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589357"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2015"></span><span>
</span><span id="line-2016"></span><span class="hs-comment">-- | Create a binding group where a type variable is bound to a type.</span><span>
</span><span id="line-2017"></span><span class="hs-comment">-- Per Note [Core type and coercion invariant],</span><span>
</span><span id="line-2018"></span><span class="hs-comment">-- this can only be used to bind something in a non-recursive @let@ expression</span><span>
</span><span id="line-2019"></span><span class="annot"><a href="GHC.Core.html#mkCoBind"><span class="hs-identifier hs-type">mkCoBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-2020"></span><span id="mkCoBind"><span class="annot"><span class="annottext">mkCoBind :: Id -&gt; CoercionR -&gt; Bind Id
</span><a href="GHC.Core.html#mkCoBind"><span class="hs-identifier hs-var hs-var">mkCoBind</span></a></span></span><span> </span><span id="local-6989586621682589359"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589359"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span id="local-6989586621682589360"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589360"><span class="hs-identifier hs-var">co</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; Bind Id
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589359"><span class="hs-identifier hs-var">cv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionR -&gt; CoreExpr
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589360"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2021"></span><span>
</span><span id="line-2022"></span><span class="annot"><span class="hs-comment">-- | Convert a binder into either a 'Var' or 'Type' 'Expr' appropriately</span></span><span>
</span><span id="line-2023"></span><span id="local-6989586621682589361"><span class="annot"><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier hs-type">varToCoreExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589361"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-2024"></span><span id="varToCoreExpr"><span class="annot"><span class="annottext">varToCoreExpr :: forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier hs-var hs-var">varToCoreExpr</span></a></span></span><span> </span><span id="local-6989586621682589364"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Expr b
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2025"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionR -&gt; Expr b
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; CoercionR
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2026"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Expr b -&gt; Expr b
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr b -&gt; Expr b) -&gt; Expr b -&gt; Expr b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Expr b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589364"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-2027"></span><span>
</span><span id="line-2028"></span><span id="local-6989586621682588323"><span class="annot"><a href="GHC.Core.html#varsToCoreExprs"><span class="hs-identifier hs-type">varsToCoreExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588323"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2029"></span><span id="varsToCoreExprs"><span class="annot"><span class="annottext">varsToCoreExprs :: forall b. [Id] -&gt; [Expr b]
</span><a href="GHC.Core.html#varsToCoreExprs"><span class="hs-identifier hs-var hs-var">varsToCoreExprs</span></a></span></span><span> </span><span id="local-6989586621682589369"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589369"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Expr b) -&gt; [Id] -&gt; [Expr b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Expr b
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#varToCoreExpr"><span class="hs-identifier hs-var">varToCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589369"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-2030"></span><span>
</span><span id="line-2031"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
   Getting a result type
*                                                                      *
************************************************************************

These are defined here to avoid a module loop between GHC.Core.Utils and GHC.Core.FVs

-}</span><span>
</span><span id="line-2041"></span><span>
</span><span id="line-2042"></span><span class="hs-comment">-- | If the expression is a 'Type', converts. Otherwise,</span><span>
</span><span id="line-2043"></span><span class="hs-comment">-- panics. NB: This does /not/ convert 'Coercion' to 'CoercionTy'.</span><span>
</span><span id="line-2044"></span><span class="annot"><a href="GHC.Core.html#exprToType"><span class="hs-identifier hs-type">exprToType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-2045"></span><span id="exprToType"><span class="annot"><span class="annottext">exprToType :: CoreExpr -&gt; Type
</span><a href="GHC.Core.html#exprToType"><span class="hs-identifier hs-var hs-var">exprToType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621682589370"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589370"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589370"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2046"></span><span class="annot"><a href="GHC.Core.html#exprToType"><span class="hs-identifier hs-var">exprToType</span></a></span><span> </span><span id="local-6989586621682589371"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589371"><span class="hs-identifier hs-var">_bad</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Type
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exprToType&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-2047"></span><span>
</span><span id="line-2048"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Simple access functions}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2055"></span><span>
</span><span id="line-2056"></span><span class="annot"><span class="hs-comment">-- | Extract every variable by this group</span></span><span>
</span><span id="line-2057"></span><span id="local-6989586621682588326"><span class="annot"><a href="GHC.Core.html#bindersOf"><span class="hs-identifier hs-type">bindersOf</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588326"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588326"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2058"></span><span class="hs-comment">-- If you edit this function, you may need to update the GHC formalism</span><span>
</span><span id="line-2059"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-2060"></span><span id="bindersOf"><span class="annot"><span class="annottext">bindersOf :: forall b. Bind b -&gt; [b]
</span><a href="GHC.Core.html#bindersOf"><span class="hs-identifier hs-var hs-var">bindersOf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621682589373"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589373"><span class="hs-identifier hs-var">binder</span></a></span></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589373"><span class="hs-identifier hs-var">binder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2061"></span><span class="annot"><a href="GHC.Core.html#bindersOf"><span class="hs-identifier hs-var">bindersOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621682589374"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589374"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589375"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682589375"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589375"><span class="hs-identifier hs-var">binder</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589374"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2062"></span><span>
</span><span id="line-2063"></span><span class="annot"><span class="hs-comment">-- | 'bindersOf' applied to a list of binding groups</span></span><span>
</span><span id="line-2064"></span><span id="local-6989586621682588328"><span class="annot"><a href="GHC.Core.html#bindersOfBinds"><span class="hs-identifier hs-type">bindersOfBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588328"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588328"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2065"></span><span id="bindersOfBinds"><span class="annot"><span class="annottext">bindersOfBinds :: forall b. [Bind b] -&gt; [b]
</span><a href="GHC.Core.html#bindersOfBinds"><span class="hs-identifier hs-var hs-var">bindersOfBinds</span></a></span></span><span> </span><span id="local-6989586621682589377"><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589377"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bind b -&gt; [b] -&gt; [b]) -&gt; [b] -&gt; [Bind b] -&gt; [b]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[b] -&gt; [b] -&gt; [b]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="annot"><span class="annottext">([b] -&gt; [b] -&gt; [b]) -&gt; (Bind b -&gt; [b]) -&gt; Bind b -&gt; [b] -&gt; [b]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bind b -&gt; [b]
forall b. Bind b -&gt; [b]
</span><a href="GHC.Core.html#bindersOf"><span class="hs-identifier hs-var">bindersOf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589377"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-2066"></span><span>
</span><span id="line-2067"></span><span class="hs-comment">-- We inline this to avoid unknown function calls.</span><span>
</span><span id="line-2068"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.html#foldBindersOfBindStrict"><span class="hs-pragma hs-type">foldBindersOfBindStrict</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-2069"></span><span id="local-6989586621682588334"><span id="local-6989586621682588335"><span class="annot"><a href="GHC.Core.html#foldBindersOfBindStrict"><span class="hs-identifier hs-type">foldBindersOfBindStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588334"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588335"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588334"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588334"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588335"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588334"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-2070"></span><span id="foldBindersOfBindStrict"><span class="annot"><span class="annottext">foldBindersOfBindStrict :: forall a b. (a -&gt; b -&gt; a) -&gt; a -&gt; Bind b -&gt; a
</span><a href="GHC.Core.html#foldBindersOfBindStrict"><span class="hs-identifier hs-var hs-var">foldBindersOfBindStrict</span></a></span></span><span> </span><span id="local-6989586621682589380"><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621682589380"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-2071"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682589381"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589381"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621682589382"><span class="annot"><span class="annottext">Bind b
</span><a href="#local-6989586621682589382"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bind b
</span><a href="#local-6989586621682589382"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2072"></span><span>      </span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621682589383"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589383"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589384"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589384"><span class="hs-identifier hs-var">_rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621682589380"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589381"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589383"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-2073"></span><span>      </span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621682589385"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589385"><span class="hs-identifier hs-var">pairs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b -&gt; a) -&gt; a -&gt; [b] -&gt; a
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621682589380"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589381"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">([b] -&gt; a) -&gt; [b] -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((b, Expr b) -&gt; b) -&gt; [(b, Expr b)] -&gt; [b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(b, Expr b) -&gt; b
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589385"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-2074"></span><span>
</span><span id="line-2075"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.html#foldBindersOfBindsStrict"><span class="hs-pragma hs-type">foldBindersOfBindsStrict</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-2076"></span><span id="local-6989586621682588340"><span id="local-6989586621682588341"><span class="annot"><a href="GHC.Core.html#foldBindersOfBindsStrict"><span class="hs-identifier hs-type">foldBindersOfBindsStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588341"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588340"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588340"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588341"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682588340"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-2077"></span><span id="foldBindersOfBindsStrict"><span class="annot"><span class="annottext">foldBindersOfBindsStrict :: forall a b. (a -&gt; b -&gt; a) -&gt; a -&gt; [Bind b] -&gt; a
</span><a href="GHC.Core.html#foldBindersOfBindsStrict"><span class="hs-identifier hs-var hs-var">foldBindersOfBindsStrict</span></a></span></span><span> </span><span id="local-6989586621682589388"><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621682589388"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682589389"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589389"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span id="local-6989586621682589390"><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589390"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; Bind b -&gt; a) -&gt; a -&gt; [Bind b] -&gt; a
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Bind b -&gt; a
</span><a href="#local-6989586621682589391"><span class="hs-identifier hs-var">fold_bind</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589389"><span class="hs-identifier hs-var">z</span></a></span><span> </span><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589390"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-2078"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2079"></span><span>    </span><span id="local-6989586621682589391"><span class="annot"><span class="annottext">fold_bind :: a -&gt; Bind b -&gt; a
</span><a href="#local-6989586621682589391"><span class="hs-identifier hs-var hs-var">fold_bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b -&gt; a) -&gt; a -&gt; Bind b -&gt; a
forall a b. (a -&gt; b -&gt; a) -&gt; a -&gt; Bind b -&gt; a
</span><a href="GHC.Core.html#foldBindersOfBindStrict"><span class="hs-identifier hs-var">foldBindersOfBindStrict</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b -&gt; a
</span><a href="#local-6989586621682589388"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2080"></span><span>
</span><span id="line-2081"></span><span>
</span><span id="line-2082"></span><span id="local-6989586621682588344"><span class="annot"><a href="GHC.Core.html#rhssOfBind"><span class="hs-identifier hs-type">rhssOfBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588344"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588344"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2083"></span><span id="rhssOfBind"><span class="annot"><span class="annottext">rhssOfBind :: forall b. Bind b -&gt; [Expr b]
</span><a href="GHC.Core.html#rhssOfBind"><span class="hs-identifier hs-var hs-var">rhssOfBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682589392"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589392"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589392"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2084"></span><span class="annot"><a href="GHC.Core.html#rhssOfBind"><span class="hs-identifier hs-var">rhssOfBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621682589393"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589393"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589394"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682589394"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589394"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589393"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2085"></span><span>
</span><span id="line-2086"></span><span id="local-6989586621682588346"><span class="annot"><a href="GHC.Core.html#rhssOfAlts"><span class="hs-identifier hs-type">rhssOfAlts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588346"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588346"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2087"></span><span id="rhssOfAlts"><span class="annot"><span class="annottext">rhssOfAlts :: forall b. [Alt b] -&gt; [Expr b]
</span><a href="GHC.Core.html#rhssOfAlts"><span class="hs-identifier hs-var hs-var">rhssOfAlts</span></a></span></span><span> </span><span id="local-6989586621682589395"><span class="annot"><span class="annottext">[Alt b]
</span><a href="#local-6989586621682589395"><span class="hs-identifier hs-var">alts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589396"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[b]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682589396"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589396"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Alt b]
</span><a href="#local-6989586621682589395"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2088"></span><span>
</span><span id="line-2089"></span><span class="hs-comment">-- | Collapse all the bindings in the supplied groups into a single</span><span>
</span><span id="line-2090"></span><span class="hs-comment">-- list of lhs\/rhs pairs suitable for binding in a 'Rec' binding group</span><span>
</span><span id="line-2091"></span><span id="local-6989586621682588348"><span class="annot"><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-type">flattenBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588348"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682588348"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588348"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-2092"></span><span id="flattenBinds"><span class="annot"><span class="annottext">flattenBinds :: forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var hs-var">flattenBinds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621682589397"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589397"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589398"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589398"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682589399"><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589399"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589397"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589398"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(b, Expr b) -&gt; [(b, Expr b)] -&gt; [(b, Expr b)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Bind b] -&gt; [(b, Expr b)]
forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589399"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-2093"></span><span class="annot"><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621682589400"><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589400"><span class="hs-identifier hs-var">prs1</span></a></span></span><span>   </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682589401"><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589401"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)]
</span><a href="#local-6989586621682589400"><span class="hs-identifier hs-var">prs1</span></a></span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)] -&gt; [(b, Expr b)] -&gt; [(b, Expr b)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Bind b] -&gt; [(b, Expr b)]
forall b. [Bind b] -&gt; [(b, Expr b)]
</span><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[Bind b]
</span><a href="#local-6989586621682589401"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-2094"></span><span class="annot"><a href="GHC.Core.html#flattenBinds"><span class="hs-identifier hs-var">flattenBinds</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2095"></span><span>
</span><span id="line-2096"></span><span class="hs-comment">-- | We often want to strip off leading lambdas before getting down to</span><span>
</span><span id="line-2097"></span><span class="hs-comment">-- business. Variants are 'collectTyBinders', 'collectValBinders',</span><span>
</span><span id="line-2098"></span><span class="hs-comment">-- and 'collectTyAndValBinders'</span><span>
</span><span id="line-2099"></span><span id="local-6989586621682588350"><span class="annot"><a href="GHC.Core.html#collectBinders"><span class="hs-identifier hs-type">collectBinders</span></a></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588350"><span class="hs-identifier hs-type">b</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588350"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588350"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2100"></span><span class="annot"><a href="GHC.Core.html#collectTyBinders"><span class="hs-identifier hs-type">collectTyBinders</span></a></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2101"></span><span class="annot"><a href="GHC.Core.html#collectValBinders"><span class="hs-identifier hs-type">collectValBinders</span></a></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2102"></span><span class="annot"><a href="GHC.Core.html#collectTyAndValBinders"><span class="hs-identifier hs-type">collectTyAndValBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2103"></span><span>
</span><span id="line-2104"></span><span class="hs-comment">-- | Strip off exactly N leading lambdas (type or value).</span><span>
</span><span id="line-2105"></span><span class="hs-comment">-- Good for use with join points.</span><span>
</span><span id="line-2106"></span><span class="hs-comment">-- Panic if there aren't enough</span><span>
</span><span id="line-2107"></span><span id="local-6989586621682588354"><span class="annot"><a href="GHC.Core.html#collectNBinders"><span class="hs-identifier hs-type">collectNBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#JoinArity"><span class="hs-identifier hs-type">JoinArity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588354"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588354"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588354"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2108"></span><span>
</span><span id="line-2109"></span><span id="collectBinders"><span class="annot"><span class="annottext">collectBinders :: forall b. Expr b -&gt; ([b], Expr b)
</span><a href="GHC.Core.html#collectBinders"><span class="hs-identifier hs-var hs-var">collectBinders</span></a></span></span><span> </span><span id="local-6989586621682589404"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589404"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2110"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[b] -&gt; Expr b -&gt; ([b], Expr b)
forall {a}. [a] -&gt; Expr a -&gt; ([a], Expr a)
</span><a href="#local-6989586621682589405"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589404"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2111"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2112"></span><span>    </span><span id="local-6989586621682589405"><span class="annot"><span class="annottext">go :: [a] -&gt; Expr a -&gt; ([a], Expr a)
</span><a href="#local-6989586621682589405"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682589406"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589406"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589407"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589407"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589408"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589408"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Expr a -&gt; ([a], Expr a)
</span><a href="#local-6989586621682589405"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589407"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589406"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589408"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2113"></span><span>    </span><span class="annot"><a href="#local-6989586621682589405"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589409"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589409"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589410"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589410"><span class="hs-identifier hs-var">e</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589409"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589410"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2114"></span><span>
</span><span id="line-2115"></span><span id="collectTyBinders"><span class="annot"><span class="annottext">collectTyBinders :: CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="GHC.Core.html#collectTyBinders"><span class="hs-identifier hs-var hs-var">collectTyBinders</span></a></span></span><span> </span><span id="local-6989586621682589412"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589412"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2116"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589413"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589412"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2117"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2118"></span><span>    </span><span id="local-6989586621682589413"><span class="annot"><span class="annottext">go :: [Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589413"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682589414"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589414"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589415"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589415"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589416"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589416"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589415"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589413"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589415"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589414"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589416"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2119"></span><span>    </span><span class="annot"><a href="#local-6989586621682589413"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589417"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589417"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621682589418"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589418"><span class="hs-identifier hs-var">e</span></a></span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; [Id]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589417"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589418"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2120"></span><span>
</span><span id="line-2121"></span><span id="collectValBinders"><span class="annot"><span class="annottext">collectValBinders :: CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="GHC.Core.html#collectValBinders"><span class="hs-identifier hs-var hs-var">collectValBinders</span></a></span></span><span> </span><span id="local-6989586621682589419"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589419"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2122"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589420"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589419"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2123"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2124"></span><span>    </span><span id="local-6989586621682589420"><span class="annot"><span class="annottext">go :: [Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589420"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682589421"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589421"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589422"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589422"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589423"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589423"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589422"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="#local-6989586621682589420"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589422"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589421"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589423"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2125"></span><span>    </span><span class="annot"><a href="#local-6989586621682589420"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589424"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589424"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span id="local-6989586621682589425"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589425"><span class="hs-identifier hs-var">body</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; [Id]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589424"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589425"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2126"></span><span>
</span><span id="line-2127"></span><span id="collectTyAndValBinders"><span class="annot"><span class="annottext">collectTyAndValBinders :: CoreExpr -&gt; ([Id], [Id], CoreExpr)
</span><a href="GHC.Core.html#collectTyAndValBinders"><span class="hs-identifier hs-var hs-var">collectTyAndValBinders</span></a></span></span><span> </span><span id="local-6989586621682589426"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589426"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2128"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589427"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589428"><span class="hs-identifier hs-var">ids</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589429"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2129"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2130"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682589427"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589427"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682589430"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589430"><span class="hs-identifier hs-var">body1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="GHC.Core.html#collectTyBinders"><span class="hs-identifier hs-var">collectTyBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589426"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2131"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682589428"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589428"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682589429"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589429"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; ([Id], CoreExpr)
</span><a href="GHC.Core.html#collectValBinders"><span class="hs-identifier hs-var">collectValBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589430"><span class="hs-identifier hs-var">body1</span></a></span><span>
</span><span id="line-2132"></span><span>
</span><span id="line-2133"></span><span id="collectNBinders"><span class="annot"><span class="annottext">collectNBinders :: forall b. Arity -&gt; Expr b -&gt; ([b], Expr b)
</span><a href="GHC.Core.html#collectNBinders"><span class="hs-identifier hs-var hs-var">collectNBinders</span></a></span></span><span> </span><span id="local-6989586621682589438"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589438"><span class="hs-identifier hs-var">orig_n</span></a></span></span><span> </span><span id="local-6989586621682589439"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589439"><span class="hs-identifier hs-var">orig_expr</span></a></span></span><span>
</span><span id="line-2134"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; [b] -&gt; Expr b -&gt; ([b], Expr b)
</span><a href="#local-6989586621682589440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589438"><span class="hs-identifier hs-var">orig_n</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589439"><span class="hs-identifier hs-var">orig_expr</span></a></span><span>
</span><span id="line-2135"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2136"></span><span>    </span><span id="local-6989586621682589440"><span class="annot"><span class="annottext">go :: Arity -&gt; [b] -&gt; Expr b -&gt; ([b], Expr b)
</span><a href="#local-6989586621682589440"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621682589441"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589441"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589442"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589442"><span class="hs-identifier hs-var">expr</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[b] -&gt; [b]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589441"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589442"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2137"></span><span>    </span><span class="annot"><a href="#local-6989586621682589440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589443"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589443"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682589444"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589444"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589445"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589445"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589446"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589446"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; [b] -&gt; Expr b -&gt; ([b], Expr b)
</span><a href="#local-6989586621682589440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589443"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Arity
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589445"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">b -&gt; [b] -&gt; [b]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621682589444"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589446"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2138"></span><span>    </span><span class="annot"><a href="#local-6989586621682589440"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[b]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; ([b], Expr b)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;collectNBinders&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; ([b], Expr b)) -&gt; SDoc -&gt; ([b], Expr b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; SDoc
forall doc. IsLine doc =&gt; Arity -&gt; doc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589438"><span class="hs-identifier hs-var">orig_n</span></a></span><span>
</span><span id="line-2139"></span><span>
</span><span id="line-2140"></span><span class="hs-comment">-- | Strip off exactly N leading value lambdas</span><span>
</span><span id="line-2141"></span><span class="hs-comment">-- returning all the binders found up to that point</span><span>
</span><span id="line-2142"></span><span class="hs-comment">-- Return Nothing if there aren't enough</span><span>
</span><span id="line-2143"></span><span class="annot"><a href="GHC.Core.html#collectNValBinders_maybe"><span class="hs-identifier hs-type">collectNValBinders_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2144"></span><span id="collectNValBinders_maybe"><span class="annot"><span class="annottext">collectNValBinders_maybe :: Arity -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
</span><a href="GHC.Core.html#collectNValBinders_maybe"><span class="hs-identifier hs-var hs-var">collectNValBinders_maybe</span></a></span></span><span> </span><span id="local-6989586621682589448"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589448"><span class="hs-identifier hs-var">orig_n</span></a></span></span><span> </span><span id="local-6989586621682589449"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589449"><span class="hs-identifier hs-var">orig_expr</span></a></span></span><span>
</span><span id="line-2145"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; [Id] -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
forall {t}.
(Eq t, Num t) =&gt;
t -&gt; [Id] -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
</span><a href="#local-6989586621682589450"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589448"><span class="hs-identifier hs-var">orig_n</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589449"><span class="hs-identifier hs-var">orig_expr</span></a></span><span>
</span><span id="line-2146"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2147"></span><span>    </span><span id="local-6989586621682589450"><span class="annot"><span class="annottext">go :: t -&gt; [Id] -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
</span><a href="#local-6989586621682589450"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621682589457"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589457"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589458"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589458"><span class="hs-identifier hs-var">expr</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Id], CoreExpr) -&gt; Maybe ([Id], CoreExpr)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; [Id]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589457"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589458"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2148"></span><span>    </span><span class="annot"><a href="#local-6989586621682589450"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589459"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621682589459"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682589460"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589460"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589461"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589461"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589462"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589462"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589461"><span class="hs-identifier hs-var">b</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Id] -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
</span><a href="#local-6989586621682589450"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621682589459"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">t -&gt; t -&gt; t
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">t
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589461"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589460"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589462"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2149"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Id] -&gt; CoreExpr -&gt; Maybe ([Id], CoreExpr)
</span><a href="#local-6989586621682589450"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621682589459"><span class="hs-identifier hs-var">n</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589461"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682589460"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589462"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2150"></span><span>    </span><span class="annot"><a href="#local-6989586621682589450"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">CoreExpr
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ([Id], CoreExpr)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2151"></span><span>
</span><span id="line-2152"></span><span class="hs-comment">-- | Takes a nested application expression and returns the function</span><span>
</span><span id="line-2153"></span><span class="hs-comment">-- being applied and the arguments to which it is applied</span><span>
</span><span id="line-2154"></span><span id="local-6989586621682588358"><span class="annot"><a href="GHC.Core.html#collectArgs"><span class="hs-identifier hs-type">collectArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588358"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588358"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588358"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-2155"></span><span id="collectArgs"><span class="annot"><span class="annottext">collectArgs :: forall b. Expr b -&gt; (Expr b, [Expr b])
</span><a href="GHC.Core.html#collectArgs"><span class="hs-identifier hs-var hs-var">collectArgs</span></a></span></span><span> </span><span id="local-6989586621682589463"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589463"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2156"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; (Expr b, [Expr b])
forall {b}. Expr b -&gt; [Expr b] -&gt; (Expr b, [Expr b])
</span><a href="#local-6989586621682589464"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589463"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2157"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2158"></span><span>    </span><span id="local-6989586621682589464"><span class="annot"><span class="annottext">go :: Expr b -&gt; [Expr b] -&gt; (Expr b, [Expr b])
</span><a href="#local-6989586621682589464"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621682589465"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589465"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589466"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589466"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589467"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589467"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; (Expr b, [Expr b])
</span><a href="#local-6989586621682589464"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589465"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589466"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; [Expr b]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589467"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2159"></span><span>    </span><span class="annot"><a href="#local-6989586621682589464"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589468"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589468"><span class="hs-identifier hs-var">e</span></a></span></span><span>         </span><span id="local-6989586621682589469"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589469"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589468"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589469"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2160"></span><span>
</span><span id="line-2161"></span><span class="hs-comment">-- | Takes a nested application expression and returns the function</span><span>
</span><span id="line-2162"></span><span class="hs-comment">-- being applied. Looking through casts and ticks to find it.</span><span>
</span><span id="line-2163"></span><span id="local-6989586621682588361"><span class="annot"><a href="GHC.Core.html#collectFunSimple"><span class="hs-identifier hs-type">collectFunSimple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588361"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588361"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-2164"></span><span id="collectFunSimple"><span class="annot"><span class="annottext">collectFunSimple :: forall b. Expr b -&gt; Expr b
</span><a href="GHC.Core.html#collectFunSimple"><span class="hs-identifier hs-var hs-var">collectFunSimple</span></a></span></span><span> </span><span id="local-6989586621682589470"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589470"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2165"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b
forall b. Expr b -&gt; Expr b
</span><a href="#local-6989586621682589471"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589470"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2166"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2167"></span><span>    </span><span id="local-6989586621682589471"><span class="annot"><span class="annottext">go :: Expr b -&gt; Expr b
</span><a href="#local-6989586621682589471"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682589472"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589472"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2168"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589472"><span class="hs-identifier hs-var">expr'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2169"></span><span>        </span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621682589473"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589473"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589474"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589474"><span class="hs-identifier hs-var">_a</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b
</span><a href="#local-6989586621682589471"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589473"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-2170"></span><span>        </span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621682589475"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589475"><span class="hs-identifier hs-var">_t</span></a></span></span><span> </span><span id="local-6989586621682589476"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589476"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b
</span><a href="#local-6989586621682589471"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589476"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2171"></span><span>        </span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621682589477"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589477"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682589478"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589478"><span class="hs-identifier hs-var">_co</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b -&gt; Expr b
</span><a href="#local-6989586621682589471"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589477"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2172"></span><span>        </span><span id="local-6989586621682589479"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589479"><span class="hs-identifier hs-var">e</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589479"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2173"></span><span>
</span><span id="line-2174"></span><span class="hs-comment">-- | fmap on the body of a lambda.</span><span>
</span><span id="line-2175"></span><span class="hs-comment">--   wrapLamBody f (\x -&gt; body) == (\x -&gt; f body)</span><span>
</span><span id="line-2176"></span><span class="annot"><a href="GHC.Core.html#wrapLamBody"><span class="hs-identifier hs-type">wrapLamBody</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-2177"></span><span id="wrapLamBody"><span class="annot"><span class="annottext">wrapLamBody :: (CoreExpr -&gt; CoreExpr) -&gt; CoreExpr -&gt; CoreExpr
</span><a href="GHC.Core.html#wrapLamBody"><span class="hs-identifier hs-var hs-var">wrapLamBody</span></a></span></span><span> </span><span id="local-6989586621682589480"><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr
</span><a href="#local-6989586621682589480"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589481"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589481"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr
</span><a href="#local-6989586621682589482"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589481"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2178"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2179"></span><span>  </span><span id="local-6989586621682589482"><span class="annot"><span class="annottext">go :: CoreExpr -&gt; CoreExpr
</span><a href="#local-6989586621682589482"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621682589483"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589483"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682589484"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589484"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; CoreExpr
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589483"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">(CoreExpr -&gt; CoreExpr) -&gt; CoreExpr -&gt; CoreExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr
</span><a href="#local-6989586621682589482"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589484"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2180"></span><span>  </span><span class="annot"><a href="#local-6989586621682589482"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589485"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589485"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; CoreExpr
</span><a href="#local-6989586621682589480"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682589485"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-2181"></span><span>
</span><span id="line-2182"></span><span class="hs-comment">-- | Attempt to remove the last N arguments of a function call.</span><span>
</span><span id="line-2183"></span><span class="hs-comment">-- Strip off any ticks or coercions encountered along the way and any</span><span>
</span><span id="line-2184"></span><span class="hs-comment">-- at the end.</span><span>
</span><span id="line-2185"></span><span id="local-6989586621682588364"><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-type">stripNArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588364"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588364"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2186"></span><span id="stripNArgs"><span class="annot"><span class="annottext">stripNArgs :: forall a. Word -&gt; Expr a -&gt; Maybe (Expr a)
</span><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var hs-var">stripNArgs</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682589492"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589492"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682589493"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589493"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Expr a -&gt; Maybe (Expr a)
forall a. Word -&gt; Expr a -&gt; Maybe (Expr a)
</span><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589492"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589493"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2187"></span><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span id="local-6989586621682589494"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589494"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621682589495"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589495"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Expr a -&gt; Maybe (Expr a)
forall a. Word -&gt; Expr a -&gt; Maybe (Expr a)
</span><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589494"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589495"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-2188"></span><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621682589496"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589496"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr a -&gt; Maybe (Expr a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589496"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2189"></span><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span id="local-6989586621682589497"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589497"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621682589498"><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589498"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word -&gt; Expr a -&gt; Maybe (Expr a)
forall a. Word -&gt; Expr a -&gt; Maybe (Expr a)
</span><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621682589497"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr a
</span><a href="#local-6989586621682589498"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-2190"></span><span class="annot"><a href="GHC.Core.html#stripNArgs"><span class="hs-identifier hs-var">stripNArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Expr a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Expr a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2191"></span><span>
</span><span id="line-2192"></span><span class="hs-comment">-- | Like @collectArgs@, but also looks through floatable</span><span>
</span><span id="line-2193"></span><span class="hs-comment">-- ticks if it means that we can find more arguments.</span><span>
</span><span id="line-2194"></span><span id="local-6989586621682588366"><span class="annot"><a href="GHC.Core.html#collectArgsTicks"><span class="hs-identifier hs-type">collectArgsTicks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588366"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-2195"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588366"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588366"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-2196"></span><span id="collectArgsTicks"><span class="annot"><span class="annottext">collectArgsTicks :: forall b.
(CoreTickish -&gt; Bool)
-&gt; Expr b -&gt; (Expr b, [Expr b], [CoreTickish])
</span><a href="GHC.Core.html#collectArgsTicks"><span class="hs-identifier hs-var hs-var">collectArgsTicks</span></a></span></span><span> </span><span id="local-6989586621682589499"><span class="annot"><span class="annottext">CoreTickish -&gt; Bool
</span><a href="#local-6989586621682589499"><span class="hs-identifier hs-var">skipTick</span></a></span></span><span> </span><span id="local-6989586621682589500"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589500"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2197"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b
-&gt; [Expr b] -&gt; [CoreTickish] -&gt; (Expr b, [Expr b], [CoreTickish])
</span><a href="#local-6989586621682589501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589500"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2198"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2199"></span><span>    </span><span id="local-6989586621682589501"><span class="annot"><span class="annottext">go :: Expr b
-&gt; [Expr b] -&gt; [CoreTickish] -&gt; (Expr b, [Expr b], [CoreTickish])
</span><a href="#local-6989586621682589501"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621682589502"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589502"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589503"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589503"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>  </span><span id="local-6989586621682589504"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589504"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589505"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589505"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b
-&gt; [Expr b] -&gt; [CoreTickish] -&gt; (Expr b, [Expr b], [CoreTickish])
</span><a href="#local-6989586621682589501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589502"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589503"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">Expr b -&gt; [Expr b] -&gt; [Expr b]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589504"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589505"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-2200"></span><span>    </span><span class="annot"><a href="#local-6989586621682589501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621682589506"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589506"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682589507"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589507"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589508"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589508"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589509"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589509"><span class="hs-identifier hs-var">ts</span></a></span></span><span>
</span><span id="line-2201"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CoreTickish -&gt; Bool
</span><a href="#local-6989586621682589499"><span class="hs-identifier hs-var">skipTick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589506"><span class="hs-identifier hs-var">t</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr b
-&gt; [Expr b] -&gt; [CoreTickish] -&gt; (Expr b, [Expr b], [CoreTickish])
</span><a href="#local-6989586621682589501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589507"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589508"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589506"><span class="hs-identifier hs-var">t</span></a></span><span class="annot"><span class="annottext">CoreTickish -&gt; [CoreTickish] -&gt; [CoreTickish]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589509"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2202"></span><span>    </span><span class="annot"><a href="#local-6989586621682589501"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589510"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589510"><span class="hs-identifier hs-var">e</span></a></span></span><span>          </span><span id="local-6989586621682589511"><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589511"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589512"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589512"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589510"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Expr b]
</span><a href="#local-6989586621682589511"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoreTickish] -&gt; [CoreTickish]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589512"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2203"></span><span>
</span><span id="line-2204"></span><span>
</span><span id="line-2205"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Predicates}
*                                                                      *
************************************************************************

At one time we optionally carried type arguments through to runtime.
@isRuntimeVar v@ returns if (Lam v _) really becomes a lambda at runtime,
i.e. if type applications are actual lambdas because types are kept around
at runtime.  Similarly isRuntimeArg.
-}</span><span>
</span><span id="line-2217"></span><span>
</span><span id="line-2218"></span><span class="annot"><span class="hs-comment">-- | Will this variable exist at runtime?</span></span><span>
</span><span id="line-2219"></span><span class="annot"><a href="GHC.Core.html#isRuntimeVar"><span class="hs-identifier hs-type">isRuntimeVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2220"></span><span id="isRuntimeVar"><span class="annot"><span class="annottext">isRuntimeVar :: Id -&gt; Bool
</span><a href="GHC.Core.html#isRuntimeVar"><span class="hs-identifier hs-var hs-var">isRuntimeVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span>
</span><span id="line-2221"></span><span>
</span><span id="line-2222"></span><span class="annot"><span class="hs-comment">-- | Will this argument expression exist at runtime?</span></span><span>
</span><span id="line-2223"></span><span class="annot"><a href="GHC.Core.html#isRuntimeArg"><span class="hs-identifier hs-type">isRuntimeArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2224"></span><span id="isRuntimeArg"><span class="annot"><span class="annottext">isRuntimeArg :: CoreExpr -&gt; Bool
</span><a href="GHC.Core.html#isRuntimeArg"><span class="hs-identifier hs-var hs-var">isRuntimeArg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreExpr -&gt; Bool
forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isValArg"><span class="hs-identifier hs-var">isValArg</span></a></span><span>
</span><span id="line-2225"></span><span>
</span><span id="line-2226"></span><span class="hs-comment">-- | Returns @True@ for value arguments, false for type args</span><span>
</span><span id="line-2227"></span><span class="hs-comment">-- NB: coercions are value arguments (zero width, to be sure,</span><span>
</span><span id="line-2228"></span><span class="hs-comment">-- like State#, but still value args).</span><span>
</span><span id="line-2229"></span><span id="local-6989586621682588368"><span class="annot"><a href="GHC.Core.html#isValArg"><span class="hs-identifier hs-type">isValArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588368"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2230"></span><span id="isValArg"><span class="annot"><span class="annottext">isValArg :: forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isValArg"><span class="hs-identifier hs-var hs-var">isValArg</span></a></span></span><span> </span><span id="local-6989586621682589513"><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589513"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr b -&gt; Bool
forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isTypeArg"><span class="hs-identifier hs-var">isTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><a href="#local-6989586621682589513"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2231"></span><span>
</span><span id="line-2232"></span><span class="hs-comment">-- | Returns @True@ iff the expression is a 'Type' or 'Coercion'</span><span>
</span><span id="line-2233"></span><span class="hs-comment">-- expression at its top level</span><span>
</span><span id="line-2234"></span><span id="local-6989586621682589514"><span class="annot"><a href="GHC.Core.html#isTyCoArg"><span class="hs-identifier hs-type">isTyCoArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589514"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2235"></span><span id="isTyCoArg"><span class="annot"><span class="annottext">isTyCoArg :: forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isTyCoArg"><span class="hs-identifier hs-var hs-var">isTyCoArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2236"></span><span class="annot"><a href="GHC.Core.html#isTyCoArg"><span class="hs-identifier hs-var">isTyCoArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2237"></span><span class="annot"><a href="GHC.Core.html#isTyCoArg"><span class="hs-identifier hs-var">isTyCoArg</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2238"></span><span>
</span><span id="line-2239"></span><span class="hs-comment">-- | Returns @True@ iff the expression is a 'Coercion'</span><span>
</span><span id="line-2240"></span><span class="hs-comment">-- expression at its top level</span><span>
</span><span id="line-2241"></span><span id="local-6989586621682589515"><span class="annot"><a href="GHC.Core.html#isCoArg"><span class="hs-identifier hs-type">isCoArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589515"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2242"></span><span id="isCoArg"><span class="annot"><span class="annottext">isCoArg :: forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isCoArg"><span class="hs-identifier hs-var hs-var">isCoArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2243"></span><span class="annot"><a href="GHC.Core.html#isCoArg"><span class="hs-identifier hs-var">isCoArg</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2244"></span><span>
</span><span id="line-2245"></span><span class="hs-comment">-- | Returns @True@ iff the expression is a 'Type' expression at its</span><span>
</span><span id="line-2246"></span><span class="hs-comment">-- top level.  Note this does NOT include 'Coercion's.</span><span>
</span><span id="line-2247"></span><span id="local-6989586621682589516"><span class="annot"><a href="GHC.Core.html#isTypeArg"><span class="hs-identifier hs-type">isTypeArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589516"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-2248"></span><span id="isTypeArg"><span class="annot"><span class="annottext">isTypeArg :: forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isTypeArg"><span class="hs-identifier hs-var hs-var">isTypeArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2249"></span><span class="annot"><a href="GHC.Core.html#isTypeArg"><span class="hs-identifier hs-var">isTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">Expr b
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2250"></span><span>
</span><span id="line-2251"></span><span class="annot"><span class="hs-comment">-- | The number of binders that bind values rather than types</span></span><span>
</span><span id="line-2252"></span><span class="annot"><a href="GHC.Core.html#valBndrCount"><span class="hs-identifier hs-type">valBndrCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-2253"></span><span id="valBndrCount"><span class="annot"><span class="annottext">valBndrCount :: [Id] -&gt; Arity
</span><a href="GHC.Core.html#valBndrCount"><span class="hs-identifier hs-var hs-var">valBndrCount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; Arity
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Arity
</span><a href="GHC.Utils.Misc.html#count"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span>
</span><span id="line-2254"></span><span>
</span><span id="line-2255"></span><span class="annot"><span class="hs-comment">-- | The number of argument expressions that are values rather than types at their top level</span></span><span>
</span><span id="line-2256"></span><span id="local-6989586621682588374"><span class="annot"><a href="GHC.Core.html#valArgCount"><span class="hs-identifier hs-type">valArgCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588374"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-2257"></span><span id="valArgCount"><span class="annot"><span class="annottext">valArgCount :: forall b. [Arg b] -&gt; Arity
</span><a href="GHC.Core.html#valArgCount"><span class="hs-identifier hs-var hs-var">valArgCount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg b -&gt; Bool) -&gt; [Arg b] -&gt; Arity
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Arity
</span><a href="GHC.Utils.Misc.html#count"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Arg b -&gt; Bool
forall b. Expr b -&gt; Bool
</span><a href="GHC.Core.html#isValArg"><span class="hs-identifier hs-var">isValArg</span></a></span><span>
</span><span id="line-2258"></span><span>
</span><span id="line-2259"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Annotated core}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-2266"></span><span>
</span><span id="line-2267"></span><span class="annot"><span class="hs-comment">-- | Annotated core: allows annotation at every node in the tree</span></span><span>
</span><span id="line-2268"></span><span class="hs-keyword">type</span><span> </span><span id="AnnExpr"><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-var">AnnExpr</span></a></span></span><span> </span><span id="local-6989586621682589518"><span class="annot"><a href="#local-6989586621682589518"><span class="hs-identifier hs-type">bndr</span></a></span></span><span> </span><span id="local-6989586621682589519"><span class="annot"><a href="#local-6989586621682589519"><span class="hs-identifier hs-type">annot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682589519"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr%27"><span class="hs-identifier hs-type">AnnExpr'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589518"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589519"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2269"></span><span>
</span><span id="line-2270"></span><span class="annot"><span class="hs-comment">-- | A clone of the 'Expr' type but allowing annotation at every tree node</span></span><span>
</span><span id="line-2271"></span><span class="hs-keyword">data</span><span> </span><span id="AnnExpr%27"><span class="annot"><a href="GHC.Core.html#AnnExpr%27"><span class="hs-identifier hs-var">AnnExpr'</span></a></span></span><span> </span><span id="local-6989586621682589520"><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span></span><span> </span><span id="local-6989586621682589521"><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span></span><span>
</span><span id="line-2272"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AnnVar"><span class="annot"><a href="GHC.Core.html#AnnVar"><span class="hs-identifier hs-var">AnnVar</span></a></span></span><span>      </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-2273"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnLit"><span class="annot"><a href="GHC.Core.html#AnnLit"><span class="hs-identifier hs-var">AnnLit</span></a></span></span><span>      </span><span class="annot"><a href="GHC.Types.Literal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span>
</span><span id="line-2274"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnLam"><span class="annot"><a href="GHC.Core.html#AnnLam"><span class="hs-identifier hs-var">AnnLam</span></a></span></span><span>      </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2275"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnApp"><span class="annot"><a href="GHC.Core.html#AnnApp"><span class="hs-identifier hs-var">AnnApp</span></a></span></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2276"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnCase"><span class="annot"><a href="GHC.Core.html#AnnCase"><span class="hs-identifier hs-var">AnnCase</span></a></span></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier hs-type">AnnAlt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2277"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnLet"><span class="annot"><a href="GHC.Core.html#AnnLet"><span class="hs-identifier hs-var">AnnLet</span></a></span></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnBind"><span class="hs-identifier hs-type">AnnBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2278"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnCast"><span class="annot"><a href="GHC.Core.html#AnnCast"><span class="hs-identifier hs-var">AnnCast</span></a></span></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2279"></span><span>                   </span><span class="hs-comment">-- Put an annotation on the (root of) the coercion</span><span>
</span><span id="line-2280"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnTick"><span class="annot"><a href="GHC.Core.html#AnnTick"><span class="hs-identifier hs-var">AnnTick</span></a></span></span><span>     </span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589520"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589521"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2281"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnType"><span class="annot"><a href="GHC.Core.html#AnnType"><span class="hs-identifier hs-var">AnnType</span></a></span></span><span>     </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-2282"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnCoercion"><span class="annot"><a href="GHC.Core.html#AnnCoercion"><span class="hs-identifier hs-var">AnnCoercion</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-2283"></span><span>
</span><span id="line-2284"></span><span class="annot"><span class="hs-comment">-- | A clone of the 'Alt' type but allowing annotation at every tree node</span></span><span>
</span><span id="line-2285"></span><span class="hs-keyword">data</span><span> </span><span id="AnnAlt"><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier hs-var">AnnAlt</span></a></span></span><span> </span><span id="local-6989586621682589532"><span class="annot"><a href="#local-6989586621682589532"><span class="hs-identifier hs-type">bndr</span></a></span></span><span> </span><span id="local-6989586621682589533"><span class="annot"><a href="#local-6989586621682589533"><span class="hs-identifier hs-type">annot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AnnAlt"><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier hs-var">AnnAlt</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.html#AltCon"><span class="hs-identifier hs-type">AltCon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682589532"><span class="hs-identifier hs-type">bndr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589532"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589533"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2286"></span><span>
</span><span id="line-2287"></span><span class="annot"><span class="hs-comment">-- | A clone of the 'Bind' type but allowing annotation at every tree node</span></span><span>
</span><span id="line-2288"></span><span class="hs-keyword">data</span><span> </span><span id="AnnBind"><span class="annot"><a href="GHC.Core.html#AnnBind"><span class="hs-identifier hs-var">AnnBind</span></a></span></span><span> </span><span id="local-6989586621682589535"><span class="annot"><a href="#local-6989586621682589535"><span class="hs-identifier hs-type">bndr</span></a></span></span><span> </span><span id="local-6989586621682589536"><span class="annot"><a href="#local-6989586621682589536"><span class="hs-identifier hs-type">annot</span></a></span></span><span>
</span><span id="line-2289"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AnnNonRec"><span class="annot"><a href="GHC.Core.html#AnnNonRec"><span class="hs-identifier hs-var">AnnNonRec</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621682589535"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589535"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589536"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2290"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AnnRec"><span class="annot"><a href="GHC.Core.html#AnnRec"><span class="hs-identifier hs-var">AnnRec</span></a></span></span><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682589535"><span class="hs-identifier hs-type">bndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589535"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682589536"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2291"></span><span>
</span><span id="line-2292"></span><span class="hs-comment">-- | Takes a nested application expression and returns the function</span><span>
</span><span id="line-2293"></span><span class="hs-comment">-- being applied and the arguments to which it is applied</span><span>
</span><span id="line-2294"></span><span id="local-6989586621682588376"><span id="local-6989586621682588377"><span class="annot"><a href="GHC.Core.html#collectAnnArgs"><span class="hs-identifier hs-type">collectAnnArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588377"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588377"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588376"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588377"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-2295"></span><span id="collectAnnArgs"><span class="annot"><span class="annottext">collectAnnArgs :: forall b a. AnnExpr b a -&gt; (AnnExpr b a, [AnnExpr b a])
</span><a href="GHC.Core.html#collectAnnArgs"><span class="hs-identifier hs-var hs-var">collectAnnArgs</span></a></span></span><span> </span><span id="local-6989586621682589539"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589539"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr b a -&gt; [AnnExpr b a] -&gt; (AnnExpr b a, [AnnExpr b a])
forall {bndr} {annot}.
AnnExpr bndr annot
-&gt; [AnnExpr bndr annot]
-&gt; (AnnExpr bndr annot, [AnnExpr bndr annot])
</span><a href="#local-6989586621682589540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589539"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2297"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2298"></span><span>    </span><span id="local-6989586621682589540"><span class="annot"><span class="annottext">go :: AnnExpr bndr annot
-&gt; [AnnExpr bndr annot]
-&gt; (AnnExpr bndr annot, [AnnExpr bndr annot])
</span><a href="#local-6989586621682589540"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">annot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnApp"><span class="hs-identifier hs-type">AnnApp</span></a></span><span> </span><span id="local-6989586621682589541"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589541"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589542"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589542"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589543"><span class="annot"><span class="annottext">[AnnExpr bndr annot]
</span><a href="#local-6989586621682589543"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
-&gt; [AnnExpr bndr annot]
-&gt; (AnnExpr bndr annot, [AnnExpr bndr annot])
</span><a href="#local-6989586621682589540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589541"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589542"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; [AnnExpr bndr annot] -&gt; [AnnExpr bndr annot]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[AnnExpr bndr annot]
</span><a href="#local-6989586621682589543"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2299"></span><span>    </span><span class="annot"><a href="#local-6989586621682589540"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589544"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589544"><span class="hs-identifier hs-var">e</span></a></span></span><span>               </span><span id="local-6989586621682589545"><span class="annot"><span class="annottext">[AnnExpr bndr annot]
</span><a href="#local-6989586621682589545"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589544"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[AnnExpr bndr annot]
</span><a href="#local-6989586621682589545"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2300"></span><span>
</span><span id="line-2301"></span><span id="local-6989586621682588384"><span id="local-6989586621682588385"><span class="annot"><a href="GHC.Core.html#collectAnnArgsTicks"><span class="hs-identifier hs-type">collectAnnArgsTicks</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588384"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588385"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-2302"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588384"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588385"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588384"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588385"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-type">CoreTickish</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-2303"></span><span id="collectAnnArgsTicks"><span class="annot"><span class="annottext">collectAnnArgsTicks :: forall b a.
(CoreTickish -&gt; Bool)
-&gt; AnnExpr b a -&gt; (AnnExpr b a, [AnnExpr b a], [CoreTickish])
</span><a href="GHC.Core.html#collectAnnArgsTicks"><span class="hs-identifier hs-var hs-var">collectAnnArgsTicks</span></a></span></span><span> </span><span id="local-6989586621682589546"><span class="annot"><span class="annottext">CoreTickish -&gt; Bool
</span><a href="#local-6989586621682589546"><span class="hs-identifier hs-var">tickishOk</span></a></span></span><span> </span><span id="local-6989586621682589547"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589547"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-2304"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
-&gt; [AnnExpr b a]
-&gt; [CoreTickish]
-&gt; (AnnExpr b a, [AnnExpr b a], [CoreTickish])
</span><a href="#local-6989586621682589548"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589547"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2305"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2306"></span><span>    </span><span id="local-6989586621682589548"><span class="annot"><span class="annottext">go :: AnnExpr b a
-&gt; [AnnExpr b a]
-&gt; [CoreTickish]
-&gt; (AnnExpr b a, [AnnExpr b a], [CoreTickish])
</span><a href="#local-6989586621682589548"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnApp"><span class="hs-identifier hs-type">AnnApp</span></a></span><span> </span><span id="local-6989586621682589549"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589549"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682589550"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589550"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>  </span><span id="local-6989586621682589551"><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589551"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589552"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589552"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
-&gt; [AnnExpr b a]
-&gt; [CoreTickish]
-&gt; (AnnExpr b a, [AnnExpr b a], [CoreTickish])
</span><a href="#local-6989586621682589548"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589549"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589550"><span class="hs-identifier hs-var">a</span></a></span><span class="annot"><span class="annottext">AnnExpr b a -&gt; [AnnExpr b a] -&gt; [AnnExpr b a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589551"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589552"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-2307"></span><span>    </span><span class="annot"><a href="#local-6989586621682589548"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnTick"><span class="hs-identifier hs-type">AnnTick</span></a></span><span> </span><span id="local-6989586621682589553"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589553"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682589554"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589554"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682589555"><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589555"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589556"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589556"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CoreTickish -&gt; Bool
</span><a href="#local-6989586621682589546"><span class="hs-identifier hs-var">tickishOk</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589553"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2308"></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
-&gt; [AnnExpr b a]
-&gt; [CoreTickish]
-&gt; (AnnExpr b a, [AnnExpr b a], [CoreTickish])
</span><a href="#local-6989586621682589548"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589554"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589555"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589553"><span class="hs-identifier hs-var">t</span></a></span><span class="annot"><span class="annottext">CoreTickish -&gt; [CoreTickish] -&gt; [CoreTickish]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589556"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2309"></span><span>    </span><span class="annot"><a href="#local-6989586621682589548"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682589557"><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589557"><span class="hs-identifier hs-var">e</span></a></span></span><span>                </span><span id="local-6989586621682589558"><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589558"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621682589559"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589559"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr b a
</span><a href="#local-6989586621682589557"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[AnnExpr b a]
</span><a href="#local-6989586621682589558"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoreTickish] -&gt; [CoreTickish]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621682589559"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2310"></span><span>
</span><span id="line-2311"></span><span id="local-6989586621682588388"><span id="local-6989586621682588389"><span class="annot"><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-type">deAnnotate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588388"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588389"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588388"><span class="hs-identifier hs-type">bndr</span></a></span></span></span><span>
</span><span id="line-2312"></span><span id="deAnnotate"><span class="annot"><span class="annottext">deAnnotate :: forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var hs-var">deAnnotate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">annot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682589560"><span class="annot"><span class="annottext">AnnExpr' bndr annot
</span><a href="#local-6989586621682589560"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnExpr' bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr' bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr' bndr annot
</span><a href="#local-6989586621682589560"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2313"></span><span>
</span><span id="line-2314"></span><span id="local-6989586621682588392"><span id="local-6989586621682588393"><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-type">deAnnotate'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr%27"><span class="hs-identifier hs-type">AnnExpr'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588392"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588393"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Expr"><span class="hs-identifier hs-type">Expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588392"><span class="hs-identifier hs-type">bndr</span></a></span></span></span><span>
</span><span id="line-2315"></span><span id="deAnnotate%27"><span class="annot"><span class="annottext">deAnnotate' :: forall bndr annot. AnnExpr' bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var hs-var">deAnnotate'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnType"><span class="hs-identifier hs-type">AnnType</span></a></span><span> </span><span id="local-6989586621682589561"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589561"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Expr bndr
forall b. Type -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589561"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2316"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnCoercion"><span class="hs-identifier hs-type">AnnCoercion</span></a></span><span> </span><span id="local-6989586621682589562"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589562"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionR -&gt; Expr bndr
forall b. CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589562"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2317"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnVar"><span class="hs-identifier hs-type">AnnVar</span></a></span><span>  </span><span id="local-6989586621682589563"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589563"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Expr bndr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682589563"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-2318"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnLit"><span class="hs-identifier hs-type">AnnLit</span></a></span><span>  </span><span id="local-6989586621682589564"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589564"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Expr bndr
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621682589564"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-2319"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnLam"><span class="hs-identifier hs-type">AnnLam</span></a></span><span>  </span><span id="local-6989586621682589565"><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589565"><span class="hs-identifier hs-var">binder</span></a></span></span><span> </span><span id="local-6989586621682589566"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589566"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">bndr -&gt; Expr bndr -&gt; Expr bndr
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589565"><span class="hs-identifier hs-var">binder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589566"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2320"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnApp"><span class="hs-identifier hs-type">AnnApp</span></a></span><span>  </span><span id="local-6989586621682589567"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589567"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span id="local-6989586621682589568"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589568"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr bndr -&gt; Expr bndr -&gt; Expr bndr
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589567"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589568"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2321"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnCast"><span class="hs-identifier hs-type">AnnCast</span></a></span><span> </span><span id="local-6989586621682589569"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589569"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">annot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682589570"><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589570"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr bndr -&gt; CoercionR -&gt; Expr bndr
forall b. Expr b -&gt; CoercionR -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589569"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CoercionR
</span><a href="#local-6989586621682589570"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-2322"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnTick"><span class="hs-identifier hs-type">AnnTick</span></a></span><span> </span><span id="local-6989586621682589571"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589571"><span class="hs-identifier hs-var">tick</span></a></span></span><span> </span><span id="local-6989586621682589572"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589572"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreTickish -&gt; Expr bndr -&gt; Expr bndr
forall b. CoreTickish -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621682589571"><span class="hs-identifier hs-var">tick</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589572"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2323"></span><span>
</span><span id="line-2324"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnLet"><span class="hs-identifier hs-type">AnnLet</span></a></span><span> </span><span id="local-6989586621682589573"><span class="annot"><span class="annottext">AnnBind bndr annot
</span><a href="#local-6989586621682589573"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621682589574"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589574"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2325"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bind bndr -&gt; Expr bndr -&gt; Expr bndr
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnBind bndr annot -&gt; Bind bndr
forall b annot. AnnBind b annot -&gt; Bind b
</span><a href="GHC.Core.html#deAnnBind"><span class="hs-identifier hs-var">deAnnBind</span></a></span><span> </span><span class="annot"><span class="annottext">AnnBind bndr annot
</span><a href="#local-6989586621682589573"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589574"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2326"></span><span class="annot"><a href="GHC.Core.html#deAnnotate%27"><span class="hs-identifier hs-var">deAnnotate'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnCase"><span class="hs-identifier hs-type">AnnCase</span></a></span><span> </span><span id="local-6989586621682589575"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589575"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621682589576"><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589576"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682589577"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589577"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682589578"><span class="annot"><span class="annottext">[AnnAlt bndr annot]
</span><a href="#local-6989586621682589578"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2327"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr bndr -&gt; bndr -&gt; Type -&gt; [Alt bndr] -&gt; Expr bndr
forall b. Expr b -&gt; b -&gt; Type -&gt; [Alt b] -&gt; Expr b
</span><a href="GHC.Core.html#Case"><span class="hs-identifier hs-var">Case</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589575"><span class="hs-identifier hs-var">scrut</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589576"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682589577"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(AnnAlt bndr annot -&gt; Alt bndr)
-&gt; [AnnAlt bndr annot] -&gt; [Alt bndr]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">AnnAlt bndr annot -&gt; Alt bndr
forall bndr annot. AnnAlt bndr annot -&gt; Alt bndr
</span><a href="GHC.Core.html#deAnnAlt"><span class="hs-identifier hs-var">deAnnAlt</span></a></span><span> </span><span class="annot"><span class="annottext">[AnnAlt bndr annot]
</span><a href="#local-6989586621682589578"><span class="hs-identifier hs-var">alts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2328"></span><span>
</span><span id="line-2329"></span><span id="local-6989586621682588400"><span id="local-6989586621682588401"><span class="annot"><a href="GHC.Core.html#deAnnAlt"><span class="hs-identifier hs-type">deAnnAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier hs-type">AnnAlt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588400"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588401"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588400"><span class="hs-identifier hs-type">bndr</span></a></span></span></span><span>
</span><span id="line-2330"></span><span id="deAnnAlt"><span class="annot"><span class="annottext">deAnnAlt :: forall bndr annot. AnnAlt bndr annot -&gt; Alt bndr
</span><a href="GHC.Core.html#deAnnAlt"><span class="hs-identifier hs-var hs-var">deAnnAlt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnAlt"><span class="hs-identifier hs-type">AnnAlt</span></a></span><span> </span><span id="local-6989586621682589579"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589579"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682589580"><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589580"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682589581"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589581"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AltCon -&gt; [bndr] -&gt; Expr bndr -&gt; Alt bndr
forall b. AltCon -&gt; [b] -&gt; Expr b -&gt; Alt b
</span><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-var">Alt</span></a></span><span> </span><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621682589579"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589580"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr bndr annot -&gt; Expr bndr
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589581"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2331"></span><span>
</span><span id="line-2332"></span><span id="local-6989586621682588397"><span id="local-6989586621682588398"><span class="annot"><a href="GHC.Core.html#deAnnBind"><span class="hs-identifier hs-type">deAnnBind</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnBind"><span class="hs-identifier hs-type">AnnBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588397"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588398"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588397"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-2333"></span><span id="deAnnBind"><span class="annot"><span class="annottext">deAnnBind :: forall b annot. AnnBind b annot -&gt; Bind b
</span><a href="GHC.Core.html#deAnnBind"><span class="hs-identifier hs-var hs-var">deAnnBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnNonRec"><span class="hs-identifier hs-type">AnnNonRec</span></a></span><span> </span><span id="local-6989586621682589582"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589582"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621682589583"><span class="annot"><span class="annottext">AnnExpr b annot
</span><a href="#local-6989586621682589583"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Expr b -&gt; Bind b
forall b. b -&gt; Expr b -&gt; Bind b
</span><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-var">NonRec</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589582"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnExpr b annot -&gt; Expr b
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b annot
</span><a href="#local-6989586621682589583"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2334"></span><span class="annot"><a href="GHC.Core.html#deAnnBind"><span class="hs-identifier hs-var">deAnnBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#AnnRec"><span class="hs-identifier hs-type">AnnRec</span></a></span><span> </span><span id="local-6989586621682589584"><span class="annot"><span class="annottext">[(b, AnnExpr b annot)]
</span><a href="#local-6989586621682589584"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(b, Expr b)] -&gt; Bind b
forall b. [(b, Expr b)] -&gt; Bind b
</span><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589585"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">AnnExpr b annot -&gt; Expr b
forall bndr annot. AnnExpr bndr annot -&gt; Expr bndr
</span><a href="GHC.Core.html#deAnnotate"><span class="hs-identifier hs-var">deAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">AnnExpr b annot
</span><a href="#local-6989586621682589586"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682589585"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621682589585"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682589586"><span class="annot"><span class="annottext">AnnExpr b annot
</span><a href="#local-6989586621682589586"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(b, AnnExpr b annot)]
</span><a href="#local-6989586621682589584"><span class="hs-identifier hs-var">pairs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2335"></span><span>
</span><span id="line-2336"></span><span class="annot"><span class="hs-comment">-- | As 'collectBinders' but for 'AnnExpr' rather than 'Expr'</span></span><span>
</span><span id="line-2337"></span><span id="local-6989586621682588406"><span id="local-6989586621682588407"><span class="annot"><a href="GHC.Core.html#collectAnnBndrs"><span class="hs-identifier hs-type">collectAnnBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588406"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588407"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588406"><span class="hs-identifier hs-type">bndr</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588406"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588407"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-2338"></span><span id="collectAnnBndrs"><span class="annot"><span class="annottext">collectAnnBndrs :: forall bndr annot.
AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
</span><a href="GHC.Core.html#collectAnnBndrs"><span class="hs-identifier hs-var hs-var">collectAnnBndrs</span></a></span></span><span> </span><span id="local-6989586621682589587"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589587"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-2339"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[bndr] -&gt; AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
forall {a} {annot}.
[a] -&gt; AnnExpr a annot -&gt; ([a], AnnExpr a annot)
</span><a href="#local-6989586621682589588"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589587"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2340"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2341"></span><span>    </span><span id="local-6989586621682589588"><span class="annot"><span class="annottext">collect :: [a] -&gt; AnnExpr a annot -&gt; ([a], AnnExpr a annot)
</span><a href="#local-6989586621682589588"><span class="hs-identifier hs-var hs-var">collect</span></a></span></span><span> </span><span id="local-6989586621682589589"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589589"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">annot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnLam"><span class="hs-identifier hs-type">AnnLam</span></a></span><span> </span><span id="local-6989586621682589590"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589590"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589591"><span class="annot"><span class="annottext">AnnExpr a annot
</span><a href="#local-6989586621682589591"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; AnnExpr a annot -&gt; ([a], AnnExpr a annot)
</span><a href="#local-6989586621682589588"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682589590"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589589"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnExpr a annot
</span><a href="#local-6989586621682589591"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2342"></span><span>    </span><span class="annot"><a href="#local-6989586621682589588"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span id="local-6989586621682589592"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589592"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589593"><span class="annot"><span class="annottext">AnnExpr a annot
</span><a href="#local-6989586621682589593"><span class="hs-identifier hs-var">body</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682589592"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnExpr a annot
</span><a href="#local-6989586621682589593"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2343"></span><span>
</span><span id="line-2344"></span><span class="annot"><span class="hs-comment">-- | As 'collectNBinders' but for 'AnnExpr' rather than 'Expr'</span></span><span>
</span><span id="line-2345"></span><span id="local-6989586621682588412"><span id="local-6989586621682588413"><span class="annot"><a href="GHC.Core.html#collectNAnnBndrs"><span class="hs-identifier hs-type">collectNAnnBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588412"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588413"><span class="hs-identifier hs-type">annot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682588412"><span class="hs-identifier hs-type">bndr</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnExpr"><span class="hs-identifier hs-type">AnnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588412"><span class="hs-identifier hs-type">bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682588413"><span class="hs-identifier hs-type">annot</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-2346"></span><span id="collectNAnnBndrs"><span class="annot"><span class="annottext">collectNAnnBndrs :: forall bndr annot.
Arity -&gt; AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
</span><a href="GHC.Core.html#collectNAnnBndrs"><span class="hs-identifier hs-var hs-var">collectNAnnBndrs</span></a></span></span><span> </span><span id="local-6989586621682589601"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589601"><span class="hs-identifier hs-var">orig_n</span></a></span></span><span> </span><span id="local-6989586621682589602"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589602"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-2347"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
-&gt; [bndr] -&gt; AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
</span><a href="#local-6989586621682589603"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589601"><span class="hs-identifier hs-var">orig_n</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589602"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2348"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2349"></span><span>    </span><span id="local-6989586621682589603"><span class="annot"><span class="annottext">collect :: Arity
-&gt; [bndr] -&gt; AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
</span><a href="#local-6989586621682589603"><span class="hs-identifier hs-var hs-var">collect</span></a></span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621682589604"><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589604"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682589605"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589605"><span class="hs-identifier hs-var">body</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[bndr] -&gt; [bndr]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589604"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589605"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2350"></span><span>    </span><span class="annot"><a href="#local-6989586621682589603"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span id="local-6989586621682589606"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589606"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682589607"><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589607"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">annot
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#AnnLam"><span class="hs-identifier hs-type">AnnLam</span></a></span><span> </span><span id="local-6989586621682589608"><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589608"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682589609"><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589609"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
-&gt; [bndr] -&gt; AnnExpr bndr annot -&gt; ([bndr], AnnExpr bndr annot)
</span><a href="#local-6989586621682589603"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589606"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Arity
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">bndr
</span><a href="#local-6989586621682589608"><span class="hs-identifier hs-var">b</span></a></span><span class="annot"><span class="annottext">bndr -&gt; [bndr] -&gt; [bndr]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[bndr]
</span><a href="#local-6989586621682589607"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><a href="#local-6989586621682589609"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2351"></span><span>    </span><span class="annot"><a href="#local-6989586621682589603"><span class="hs-identifier hs-var">collect</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[bndr]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">AnnExpr bndr annot
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; ([bndr], AnnExpr bndr annot)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;collectNBinders&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; ([bndr], AnnExpr bndr annot))
-&gt; SDoc -&gt; ([bndr], AnnExpr bndr annot)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; SDoc
forall doc. IsLine doc =&gt; Arity -&gt; doc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621682589601"><span class="hs-identifier hs-var">orig_n</span></a></span><span>
</span><span id="line-2352"></span></pre></body></html>