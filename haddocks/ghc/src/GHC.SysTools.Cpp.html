<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span class="hs-cpp">

#include &lt;ghcplatform.h&gt;
</span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html"><span class="hs-identifier">GHC.SysTools.Cpp</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#doCpp"><span class="hs-identifier">doCpp</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#CppOpts"><span class="hs-identifier">CppOpts</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#getGhcVersionPathName"><span class="hs-identifier">getGhcVersionPathName</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#applyCDefs"><span class="hs-identifier">applyCDefs</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#offsetIncludePaths"><span class="hs-identifier">offsetIncludePaths</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">where</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Backend.html"><span class="hs-identifier">GHC.Driver.Backend</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Version.html"><span class="hs-identifier">GHC.CmmToLlvm.Version</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Platform.ArchOS</span></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.SysTools.html"><span class="hs-identifier">GHC.SysTools</span></a></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html"><span class="hs-identifier">GHC.Unit.Env</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Info.html"><span class="hs-identifier">GHC.Unit.Info</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.State.html"><span class="hs-identifier">GHC.Unit.State</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html"><span class="hs-identifier">GHC.Unit.Types</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.TmpFs.html"><span class="hs-identifier">GHC.Utils.TmpFs</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Version.html"><span class="hs-identifier">Data.Version</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">intercalate</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../directory-1.3.9.0-af18/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">data</span><span> </span><span id="CppOpts"><span class="annot"><a href="GHC.SysTools.Cpp.html#CppOpts"><span class="hs-identifier hs-var">CppOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CppOpts"><span class="annot"><a href="GHC.SysTools.Cpp.html#CppOpts"><span class="hs-identifier hs-var">CppOpts</span></a></span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="sourceCodePreprocessor"><span class="annot"><span class="annottext">CppOpts -&gt; SourceCodePreprocessor
</span><a href="GHC.SysTools.Cpp.html#sourceCodePreprocessor"><span class="hs-identifier hs-var hs-var">sourceCodePreprocessor</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.SysTools.Tasks.html#SourceCodePreprocessor"><span class="hs-identifier hs-type">SourceCodePreprocessor</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cppLinePragmas"><span class="annot"><span class="annottext">CppOpts -&gt; Bool
</span><a href="GHC.SysTools.Cpp.html#cppLinePragmas"><span class="hs-identifier hs-var hs-var">cppLinePragmas</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Enable generation of LINE pragmas</span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">{-
Note [Preprocessing invocations]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We must consider four distinct preprocessors when preprocessing Haskell.
These are:

(1) The Haskell C preprocessor (HsCpp), which preprocesses Haskell files that make use
  of the CPP language extension

(2) The C preprocessor (Cpp), which is used to preprocess C files

(3) The JavaScript preprocessor (JsCpp), which preprocesses JavaScript files

(4) The C-- preprocessor (CmmCpp), which preprocesses C-- files

These preprocessors are indeed different. Despite often sharing the same
underlying program (the C compiler), the set of flags passed determines the
behaviour of the preprocessor, and Cpp and HsCpp behave differently.
Specifically, we rely on &quot;traditional&quot; (pre-standard) preprocessing semantics
(which most compilers expose via the `-traditional` flag) when preprocessing
Haskell source. This avoids the following situations:

  * Removal of C-style comments, which are not comments in Haskell but valid
    operators;

  * Errors due to an ANSI C preprocessor lexing the source and failing on
    names with single quotes (TH quotes, ticked promoted constructors,
    names with primes in them).

  Both of those cases may be subtle: gcc and clang permit C++-style //
  comments in C code, and Data.Array and Data.Vector both export a //
  operator whose type is such that a removed &quot;comment&quot; may leave code that
  typechecks but does the wrong thing. Another example is that, since ANSI
  C permits long character constants, an expression involving multiple
  functions with primes in their names may not expand macros properly when
  they occur between the primed functions.

Third special type of preprocessor for JavaScript was added laterly due to
needing to keep JSDoc comments and multiline comments. Various third party
minifying software (for example, Google Closure Compiler) uses JSDoc
information to apply more strict rules to code reduction which results in
better but more dangerous minification. JSDoc comments are usually used to
instruct minifiers where dangerous optimizations could be applied.

The fourth, the C-- preprocessor, is needed as modern compilers emit defines
for debug info generation when preprocessing.  The C-- preprocessor avoids this
by suppressing debug info generation.  The C-- preprocessor also inherits flags
passed to the C compiler.  This is done for compatibility.  Following those,
the C-- compiler receives -g0, if it was detected as supported, and flags
passed via -optCmmP specifically for the C-- preprocessor.  The combined
command line looks like:

  $pgmCmmP $optCs_without_g3s $g0_if_supported $optCmmP

-}</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Run either the Haskell preprocessor, JavaScript preprocessor</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- or the C preprocessor, as per the 'CppOpts' passed.</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- See Note [Preprocessing invocations].</span><span>
</span><span id="line-107"></span><span class="hs-comment">--</span><span>
</span><span id="line-108"></span><span class="hs-comment">-- UnitEnv is needed to compute MIN_VERSION macros</span><span>
</span><span id="line-109"></span><span class="hs-comment">--</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- If you change the macros defined by this function make sure to update the</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- user guide.</span><span>
</span><span id="line-112"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#doCpp"><span class="hs-identifier hs-type">doCpp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.TmpFs.html#TmpFs"><span class="hs-identifier hs-type">TmpFs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#CppOpts"><span class="hs-identifier hs-type">CppOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span id="doCpp"><span class="annot"><span class="annottext">doCpp :: Logger
-&gt; TmpFs
-&gt; DynFlags
-&gt; UnitEnv
-&gt; CppOpts
-&gt; String
-&gt; String
-&gt; IO ()
</span><a href="GHC.SysTools.Cpp.html#doCpp"><span class="hs-identifier hs-var hs-var">doCpp</span></a></span></span><span> </span><span id="local-6989586621682958486"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682958486"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621682958487"><span class="annot"><span class="annottext">TmpFs
</span><a href="#local-6989586621682958487"><span class="hs-identifier hs-var">tmpfs</span></a></span></span><span> </span><span id="local-6989586621682958488"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682958489"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span id="local-6989586621682958490"><span class="annot"><span class="annottext">CppOpts
</span><a href="#local-6989586621682958490"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621682958491"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958491"><span class="hs-identifier hs-var">input_fn</span></a></span></span><span> </span><span id="local-6989586621682958492"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958492"><span class="hs-identifier hs-var">output_fn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958493"><span class="annot"><span class="annottext">hscpp_opts :: [String]
</span><a href="#local-6989586621682958493"><span class="hs-identifier hs-var hs-var hs-var">hscpp_opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; [String]
</span><a href="GHC.Driver.Session.html#picPOpts"><span class="hs-identifier hs-var">picPOpts</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958495"><span class="annot"><span class="annottext">cmdline_include_paths :: IncludeSpecs
</span><a href="#local-6989586621682958495"><span class="hs-identifier hs-var hs-var hs-var">cmdline_include_paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; IncludeSpecs -&gt; IncludeSpecs
</span><a href="GHC.SysTools.Cpp.html#offsetIncludePaths"><span class="hs-identifier hs-var">offsetIncludePaths</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; IncludeSpecs
</span><a href="GHC.Driver.DynFlags.html#includePaths"><span class="hs-identifier hs-var">includePaths</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958497"><span class="annot"><span class="annottext">unit_state :: UnitState
</span><a href="#local-6989586621682958497"><span class="hs-identifier hs-var hs-var hs-var">unit_state</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; UnitState
UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span id="local-6989586621682958499"><span class="annot"><a href="#local-6989586621682958499"><span class="hs-identifier hs-var">pkg_include_dirs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MaybeErr UnitErr [String] -&gt; IO [String]
forall a. MaybeErr UnitErr a -&gt; IO a
</span><a href="GHC.Unit.State.html#mayThrowUnitErr"><span class="hs-identifier hs-var">mayThrowUnitErr</span></a></span><span>
</span><span id="line-118"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UnitInfo] -&gt; [String]
</span><a href="GHC.Unit.Info.html#collectIncludeDirs"><span class="hs-identifier hs-var">collectIncludeDirs</span></a></span><span> </span><span class="annot"><span class="annottext">([UnitInfo] -&gt; [String])
-&gt; MaybeErr UnitErr [UnitInfo] -&gt; MaybeErr UnitErr [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv -&gt; MaybeErr UnitErr [UnitInfo]
</span><a href="GHC.Unit.Env.html#preloadUnitsInfo"><span class="hs-identifier hs-var">preloadUnitsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- MP: This is not quite right, the headers which are supposed to be installed in</span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-comment">-- the package might not be the same as the provided include paths, but it's a close</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-comment">-- enough approximation for things to work. A proper solution would be to have to declare which paths should</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-comment">-- be propagated to dependent packages.</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958504"><span class="annot"><a href="#local-6989586621682958504"><span class="hs-identifier hs-var hs-var">home_pkg_deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-124"></span><span>         </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HomeUnitEnv -&gt; DynFlags
</span><a href="GHC.Unit.Env.html#homeUnitEnv_dflags"><span class="hs-identifier hs-var">homeUnitEnv_dflags</span></a></span><span> </span><span class="annot"><span class="annottext">(HomeUnitEnv -&gt; DynFlags)
-&gt; (UnitEnv -&gt; HomeUnitEnv) -&gt; UnitEnv -&gt; DynFlags
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
UnitId -&gt; UnitEnv -&gt; HomeUnitEnv
</span><a href="GHC.Unit.Env.html#ue_findHomeUnitEnv"><span class="hs-identifier hs-var">ue_findHomeUnitEnv</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682958508"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitEnv -&gt; DynFlags) -&gt; UnitEnv -&gt; DynFlags
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682958508"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621682958508"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; UnitEnv -&gt; [UnitId]
</span><a href="GHC.Unit.Env.html#ue_transitiveHomeDeps"><span class="hs-identifier hs-var">ue_transitiveHomeDeps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitEnv -&gt; UnitId
</span><a href="GHC.Unit.Env.html#ue_currentUnit"><span class="hs-identifier hs-var">ue_currentUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958489"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-125"></span><span>        </span><span id="local-6989586621682958511"><span class="annot"><a href="#local-6989586621682958511"><span class="hs-identifier hs-var hs-var">dep_pkg_extra_inputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DynFlags -&gt; IncludeSpecs -&gt; IncludeSpecs
</span><a href="GHC.SysTools.Cpp.html#offsetIncludePaths"><span class="hs-identifier hs-var">offsetIncludePaths</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958512"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; IncludeSpecs
</span><a href="GHC.Driver.DynFlags.html#includePaths"><span class="hs-identifier hs-var">includePaths</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958512"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682958512"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958512"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[DynFlags]
</span><a href="#local-6989586621682958504"><span class="hs-identifier hs-var">home_pkg_deps</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958513"><span class="annot"><a href="#local-6989586621682958513"><span class="hs-identifier hs-var hs-var">include_paths_global</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; [String] -&gt; [String])
-&gt; [String] -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682958515"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958515"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682958516"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958516"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-I&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958515"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958516"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IncludeSpecs -&gt; [String]
</span><a href="GHC.Driver.DynFlags.html#includePathsGlobal"><span class="hs-identifier hs-var">includePathsGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">IncludeSpecs
</span><a href="#local-6989586621682958495"><span class="hs-identifier hs-var">cmdline_include_paths</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958499"><span class="hs-identifier hs-var">pkg_include_dirs</span></a></span><span>
</span><span id="line-129"></span><span>                                                    </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(IncludeSpecs -&gt; [String]) -&gt; [IncludeSpecs] -&gt; [String]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">IncludeSpecs -&gt; [String]
</span><a href="GHC.Driver.DynFlags.html#includePathsGlobal"><span class="hs-identifier hs-var">includePathsGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">[IncludeSpecs]
</span><a href="#local-6989586621682958511"><span class="hs-identifier hs-var">dep_pkg_extra_inputs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958519"><span class="annot"><a href="#local-6989586621682958519"><span class="hs-identifier hs-var hs-var">include_paths_quote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; [String] -&gt; [String])
-&gt; [String] -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682958520"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958520"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682958521"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958521"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-iquote&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958520"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958521"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-131"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IncludeSpecs -&gt; [String]
</span><a href="GHC.Driver.DynFlags.html#includePathsQuote"><span class="hs-identifier hs-var">includePathsQuote</span></a></span><span> </span><span class="annot"><span class="annottext">IncludeSpecs
</span><a href="#local-6989586621682958495"><span class="hs-identifier hs-var">cmdline_include_paths</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-132"></span><span>           </span><span class="annot"><span class="annottext">IncludeSpecs -&gt; [String]
</span><a href="GHC.Driver.DynFlags.html#includePathsQuoteImplicit"><span class="hs-identifier hs-var">includePathsQuoteImplicit</span></a></span><span> </span><span class="annot"><span class="annottext">IncludeSpecs
</span><a href="#local-6989586621682958495"><span class="hs-identifier hs-var">cmdline_include_paths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958524"><span class="annot"><a href="#local-6989586621682958524"><span class="hs-identifier hs-var hs-var">include_paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958519"><span class="hs-identifier hs-var">include_paths_quote</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958513"><span class="hs-identifier hs-var">include_paths_global</span></a></span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958525"><span class="annot"><a href="#local-6989586621682958525"><span class="hs-identifier hs-var hs-var">verbFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; [String]
</span><a href="GHC.Driver.Session.html#getVerbFlags"><span class="hs-identifier hs-var">getVerbFlags</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958527"><span class="annot"><a href="#local-6989586621682958527"><span class="hs-identifier hs-var hs-var">cpp_prog</span></a></span></span><span> </span><span id="local-6989586621682958528"><span class="annot"><span class="annottext">[Option]
</span><a href="#local-6989586621682958528"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger
-&gt; TmpFs -&gt; DynFlags -&gt; SourceCodePreprocessor -&gt; [Option] -&gt; IO ()
</span><a href="GHC.SysTools.Tasks.html#runSourceCodePreprocessor"><span class="hs-identifier hs-var">runSourceCodePreprocessor</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682958486"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">TmpFs
</span><a href="#local-6989586621682958487"><span class="hs-identifier hs-var">tmpfs</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CppOpts -&gt; SourceCodePreprocessor
</span><a href="GHC.SysTools.Cpp.html#sourceCodePreprocessor"><span class="hs-identifier hs-var">sourceCodePreprocessor</span></a></span><span> </span><span class="annot"><span class="annottext">CppOpts
</span><a href="#local-6989586621682958490"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Option]
</span><a href="#local-6989586621682958528"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958530"><span class="annot"><a href="#local-6989586621682958530"><span class="hs-identifier hs-var hs-var">platform</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Platform
</span><a href="GHC.Driver.DynFlags.html#targetPlatform"><span class="hs-identifier hs-var">targetPlatform</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-140"></span><span>        </span><span id="local-6989586621682958532"><span class="annot"><a href="#local-6989586621682958532"><span class="hs-identifier hs-var hs-var">targetArch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arch -&gt; String
</span><span class="hs-identifier hs-var">stringEncodeArch</span></span><span> </span><span class="annot"><span class="annottext">(Arch -&gt; String) -&gt; Arch -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682958530"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span id="local-6989586621682958535"><span class="annot"><a href="#local-6989586621682958535"><span class="hs-identifier hs-var hs-var">targetOS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OS -&gt; String
</span><span class="hs-identifier hs-var">stringEncodeOS</span></span><span> </span><span class="annot"><span class="annottext">(OS -&gt; String) -&gt; OS -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682958530"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-142"></span><span>        </span><span id="local-6989586621682958538"><span class="annot"><a href="#local-6989586621682958538"><span class="hs-identifier hs-var hs-var">isWindows</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; OS
</span><a href="GHC.Platform.html#platformOS"><span class="hs-identifier hs-var">platformOS</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682958530"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">OS -&gt; OS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">OS
</span><span class="hs-identifier hs-var">OSMinGW32</span></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958540"><span class="annot"><a href="#local-6989586621682958540"><span class="hs-identifier hs-var hs-var">target_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-144"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">HOST_OS</span></span><span>     </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_BUILD_OS&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-identifier">HOST_ARCH</span><span>   </span><span class="hs-operator">++</span><span> </span><span class="hs-string">&quot;_BUILD_ARCH&quot;</span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958535"><span class="hs-identifier hs-var">targetOS</span></a></span><span>    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_HOST_OS&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958532"><span class="hs-identifier hs-var">targetArch</span></a></span><span>  </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_HOST_ARCH&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-comment">-- remember, in code we *compile*, the HOST is the same our TARGET,</span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-comment">-- and BUILD is the same as our HOST.</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958541"><span class="annot"><a href="#local-6989586621682958541"><span class="hs-identifier hs-var hs-var">io_manager_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__IO_MANAGER_WINIO__=1&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682958538"><span class="hs-identifier hs-var">isWindows</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-153"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__IO_MANAGER_MIO__=1&quot;</span></span><span>               </span><span class="hs-special">]</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958542"><span class="annot"><a href="#local-6989586621682958542"><span class="hs-identifier hs-var hs-var">sse_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-156"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__SSE__&quot;</span></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#isSseEnabled"><span class="hs-identifier hs-var">isSseEnabled</span></a></span><span>      </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682958530"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-157"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__SSE2__&quot;</span></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#isSse2Enabled"><span class="hs-identifier hs-var">isSse2Enabled</span></a></span><span>     </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621682958530"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-158"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__SSE4_2__&quot;</span></span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isSse4_2Enabled"><span class="hs-identifier hs-var">isSse4_2Enabled</span></a></span><span>   </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958546"><span class="annot"><a href="#local-6989586621682958546"><span class="hs-identifier hs-var hs-var">fma_def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>         </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__FMA__&quot;</span></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isFmaEnabled"><span class="hs-identifier hs-var">isFmaEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958548"><span class="annot"><a href="#local-6989586621682958548"><span class="hs-identifier hs-var hs-var">avx_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX__&quot;</span></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvxEnabled"><span class="hs-identifier hs-var">isAvxEnabled</span></a></span><span>      </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-165"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX2__&quot;</span></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvx2Enabled"><span class="hs-identifier hs-var">isAvx2Enabled</span></a></span><span>     </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-166"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX512CD__&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvx512cdEnabled"><span class="hs-identifier hs-var">isAvx512cdEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-167"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX512ER__&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvx512erEnabled"><span class="hs-identifier hs-var">isAvx512erEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-168"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX512F__&quot;</span></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvx512fEnabled"><span class="hs-identifier hs-var">isAvx512fEnabled</span></a></span><span>  </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-169"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__AVX512PF__&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#isAvx512pfEnabled"><span class="hs-identifier hs-var">isAvx512pfEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>    </span><span id="local-6989586621682958555"><span class="annot"><a href="#local-6989586621682958555"><span class="hs-identifier hs-var">backend_defs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#applyCDefs"><span class="hs-identifier hs-type">applyCDefs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.Backend.html#backendCDefs"><span class="hs-identifier hs-type">backendCDefs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#backend"><span class="hs-identifier hs-var">backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958488"><span class="hs-identifier hs-type">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682958486"><span class="hs-identifier hs-type">logger</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958488"><span class="hs-identifier hs-type">dflags</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958558"><span class="annot"><a href="#local-6989586621682958558"><span class="hs-identifier hs-var hs-var">th_defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__GLASGOW_HASKELL_TH__&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958559"><span class="annot"><a href="#local-6989586621682958559"><span class="hs-identifier hs-var hs-var">asserts_def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__GLASGOW_HASKELL_ASSERTS_IGNORED__&quot;</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_IgnoreAsserts"><span class="hs-identifier hs-var">Opt_IgnoreAsserts</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958488"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-comment">-- Default CPP defines in Haskell source</span><span>
</span><span id="line-178"></span><span>    </span><span id="local-6989586621682958562"><span class="annot"><a href="#local-6989586621682958562"><span class="hs-identifier hs-var">ghcVersionH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.SysTools.Cpp.html#getGhcVersionPathName"><span class="hs-identifier hs-type">getGhcVersionPathName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958488"><span class="hs-identifier hs-type">dflags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958489"><span class="hs-identifier hs-type">unit_env</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958563"><span class="annot"><a href="#local-6989586621682958563"><span class="hs-identifier hs-var hs-var">hsSourceCppOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-include&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958562"><span class="hs-identifier hs-var">ghcVersionH</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">-- MIN_VERSION macros</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958564"><span class="annot"><a href="#local-6989586621682958564"><span class="hs-identifier hs-var hs-var">uids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; [(Unit, Maybe PackageArg)]
</span><a href="GHC.Unit.State.html#explicitUnits"><span class="hs-identifier hs-var">explicitUnits</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682958497"><span class="hs-identifier hs-var">unit_state</span></a></span><span>
</span><span id="line-183"></span><span>        </span><span id="local-6989586621682958566"><span class="annot"><a href="#local-6989586621682958566"><span class="hs-identifier hs-var hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Unit, Maybe PackageArg) -&gt; Maybe UnitInfo)
-&gt; [(Unit, Maybe PackageArg)] -&gt; [UnitInfo]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitState -&gt; Unit -&gt; Maybe UnitInfo
</span><a href="GHC.Unit.State.html#lookupUnit"><span class="hs-identifier hs-var">lookupUnit</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621682958497"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="annot"><span class="annottext">(Unit -&gt; Maybe UnitInfo)
-&gt; ((Unit, Maybe PackageArg) -&gt; Unit)
-&gt; (Unit, Maybe PackageArg)
-&gt; Maybe UnitInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Unit, Maybe PackageArg) -&gt; Unit
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Unit, Maybe PackageArg)]
</span><a href="#local-6989586621682958564"><span class="hs-identifier hs-var">uids</span></a></span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621682958570"><span class="annot"><a href="#local-6989586621682958570"><span class="hs-identifier hs-var">mb_macro_include</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-185"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621682958566"><span class="hs-identifier hs-type">pkgs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#gopt"><span class="hs-identifier hs-type">gopt</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#Opt_VersionMacros"><span class="hs-identifier hs-type">Opt_VersionMacros</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958488"><span class="hs-identifier hs-type">dflags</span></a></span><span>
</span><span id="line-186"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682958575"><span class="annot"><a href="#local-6989586621682958575"><span class="hs-identifier hs-var">macro_stub</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.TmpFs.html#newTempName"><span class="hs-identifier hs-type">newTempName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958486"><span class="hs-identifier hs-type">logger</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958487"><span class="hs-identifier hs-type">tmpfs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#tmpDir"><span class="hs-identifier hs-var">tmpDir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958488"><span class="hs-identifier hs-type">dflags</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Utils.TmpFs.html#TFL_CurrentModule"><span class="hs-identifier hs-type">TFL_CurrentModule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;h&quot;</span></span><span>
</span><span id="line-187"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">writeFile</span></span><span> </span><span class="annot"><a href="#local-6989586621682958575"><span class="hs-identifier hs-type">macro_stub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.SysTools.Cpp.html#generatePackageVersionMacros"><span class="hs-identifier hs-type">generatePackageVersionMacros</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958566"><span class="hs-identifier hs-type">pkgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>                    </span><span class="hs-comment">-- Include version macros for every *exposed* package.</span><span>
</span><span id="line-189"></span><span>                    </span><span class="hs-comment">-- Without -hide-all-packages and with a package database</span><span>
</span><span id="line-190"></span><span>                    </span><span class="hs-comment">-- size of 1000 packages, it takes cpp an estimated 2</span><span>
</span><span id="line-191"></span><span>                    </span><span class="hs-comment">-- milliseconds to process this file. See #10970</span><span>
</span><span id="line-192"></span><span>                    </span><span class="hs-comment">-- comment 8.</span><span>
</span><span id="line-193"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.CliOption.html#FileOption"><span class="hs-identifier hs-type">GHC.SysTools.FileOption</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;-include&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682958575"><span class="hs-identifier hs-type">macro_stub</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958582"><span class="annot"><a href="#local-6989586621682958582"><span class="hs-identifier hs-var hs-var">line_pragmas</span></a></span></span><span>
</span><span id="line-197"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">CppOpts -&gt; Bool
</span><a href="GHC.SysTools.Cpp.html#cppLinePragmas"><span class="hs-identifier hs-var">cppLinePragmas</span></a></span><span> </span><span class="annot"><span class="annottext">CppOpts
</span><a href="#local-6989586621682958490"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- on by default</span><span>
</span><span id="line-198"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; Option
</span><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-var">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-P&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- disable LINE markers</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="#local-6989586621682958527"><span class="hs-identifier hs-type">cpp_prog</span></a></span><span>       </span><span class="hs-special">(</span><span>   </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958525"><span class="hs-identifier hs-type">verbFlags</span></a></span><span>
</span><span id="line-201"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958524"><span class="hs-identifier hs-type">include_paths</span></a></span><span>
</span><span id="line-202"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958563"><span class="hs-identifier hs-type">hsSourceCppOpts</span></a></span><span>
</span><span id="line-203"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958540"><span class="hs-identifier hs-type">target_defs</span></a></span><span>
</span><span id="line-204"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958555"><span class="hs-identifier hs-type">backend_defs</span></a></span><span>
</span><span id="line-205"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958558"><span class="hs-identifier hs-type">th_defs</span></a></span><span>
</span><span id="line-206"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958559"><span class="hs-identifier hs-type">asserts_def</span></a></span><span>
</span><span id="line-207"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958493"><span class="hs-identifier hs-type">hscpp_opts</span></a></span><span>
</span><span id="line-208"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958542"><span class="hs-identifier hs-type">sse_defs</span></a></span><span>
</span><span id="line-209"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958546"><span class="hs-identifier hs-type">fma_def</span></a></span><span>
</span><span id="line-210"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958548"><span class="hs-identifier hs-type">avx_defs</span></a></span><span>
</span><span id="line-211"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958541"><span class="hs-identifier hs-type">io_manager_defs</span></a></span><span>
</span><span id="line-212"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621682958570"><span class="hs-identifier hs-type">mb_macro_include</span></a></span><span>
</span><span id="line-213"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621682958582"><span class="hs-identifier hs-type">line_pragmas</span></a></span><span>
</span><span id="line-214"></span><span>        </span><span class="hs-comment">-- Set the language mode to assembler-with-cpp when preprocessing. This</span><span>
</span><span id="line-215"></span><span>        </span><span class="hs-comment">-- alleviates some of the C99 macro rules relating to whitespace and the hash</span><span>
</span><span id="line-216"></span><span>        </span><span class="hs-comment">-- operator, which we tend to abuse. Clang in particular is not very happy</span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-comment">-- about this.</span><span>
</span><span id="line-218"></span><span>                    </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span>     </span><span class="annot"><span class="hs-string">&quot;-x&quot;</span></span><span>
</span><span id="line-219"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span>     </span><span class="annot"><span class="hs-string">&quot;assembler-with-cpp&quot;</span></span><span>
</span><span id="line-220"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span>     </span><span class="annot"><a href="#local-6989586621682958491"><span class="hs-identifier hs-type">input_fn</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span class="hs-comment">-- We hackily use Option instead of FileOption here, so that the file</span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-comment">-- name is not back-slashed on Windows.  cpp is capable of</span><span>
</span><span id="line-223"></span><span>        </span><span class="hs-comment">-- dealing with / in filenames, so it works fine.  Furthermore</span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-comment">-- if we put in backslashes, cpp outputs #line directives</span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-comment">-- with *double* backslashes.   And that in turn means that</span><span>
</span><span id="line-226"></span><span>        </span><span class="hs-comment">-- our error messages get double backslashes in them.</span><span>
</span><span id="line-227"></span><span>        </span><span class="hs-comment">-- In due course we should arrange that the lexer deals</span><span>
</span><span id="line-228"></span><span>        </span><span class="hs-comment">-- with these \\ escapes properly.</span><span>
</span><span id="line-229"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#Option"><span class="hs-identifier hs-type">GHC.SysTools.Option</span></a></span><span>     </span><span class="annot"><span class="hs-string">&quot;-o&quot;</span></span><span>
</span><span id="line-230"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.CliOption.html#FileOption"><span class="hs-identifier hs-type">GHC.SysTools.FileOption</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621682958492"><span class="hs-identifier hs-type">output_fn</span></a></span><span>
</span><span id="line-231"></span><span>                       </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- ---------------------------------------------------------------------------</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- Macros (cribbed from Cabal)</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#generatePackageVersionMacros"><span class="hs-identifier hs-type">generatePackageVersionMacros</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Info.html#UnitInfo"><span class="hs-identifier hs-type">UnitInfo</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-237"></span><span id="generatePackageVersionMacros"><span class="annot"><span class="annottext">generatePackageVersionMacros :: [UnitInfo] -&gt; String
</span><a href="GHC.SysTools.Cpp.html#generatePackageVersionMacros"><span class="hs-identifier hs-var hs-var">generatePackageVersionMacros</span></a></span></span><span> </span><span id="local-6989586621682958584"><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621682958584"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-comment">-- Do not add any C-style comments. See #3389.</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Version -&gt; String
</span><a href="GHC.SysTools.Cpp.html#generateMacros"><span class="hs-identifier hs-var">generateMacros</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958587"><span class="hs-identifier hs-var">pkgname</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621682958588"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682958589"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621682958589"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[UnitInfo]
</span><a href="#local-6989586621682958584"><span class="hs-identifier hs-var">pkgs</span></a></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958588"><span class="annot"><span class="annottext">version :: Version
</span><a href="#local-6989586621682958588"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitInfo -&gt; Version
forall srcpkgid srcpkgname uid modulename mod.
GenericUnitInfo srcpkgid srcpkgname uid modulename mod -&gt; Version
</span><a href="../../ghc-boot-9.12.2-1a37/src/GHC.Unit.Database.html#unitPackageVersion"><span class="hs-identifier hs-var">unitPackageVersion</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621682958589"><span class="hs-identifier hs-var">pkg</span></a></span><span>
</span><span id="line-242"></span><span>        </span><span id="local-6989586621682958587"><span class="annot"><span class="annottext">pkgname :: String
</span><a href="#local-6989586621682958587"><span class="hs-identifier hs-var hs-var">pkgname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; String -&gt; String
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><a href="GHC.SysTools.Cpp.html#fixchar"><span class="hs-identifier hs-var">fixchar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnitInfo -&gt; String
forall u. GenUnitInfo u -&gt; String
</span><a href="GHC.Unit.Info.html#unitPackageNameString"><span class="hs-identifier hs-var">unitPackageNameString</span></a></span><span> </span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621682958589"><span class="hs-identifier hs-var">pkg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#fixchar"><span class="hs-identifier hs-type">fixchar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-246"></span><span id="fixchar"><span class="annot"><span class="annottext">fixchar :: Char -&gt; Char
</span><a href="GHC.SysTools.Cpp.html#fixchar"><span class="hs-identifier hs-var hs-var">fixchar</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span>
</span><span id="line-247"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#fixchar"><span class="hs-identifier hs-var">fixchar</span></a></span><span> </span><span id="local-6989586621682958593"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682958593"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682958593"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#generateMacros"><span class="hs-identifier hs-type">generateMacros</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Version</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-250"></span><span id="generateMacros"><span class="annot"><span class="annottext">generateMacros :: String -&gt; String -&gt; Version -&gt; String
</span><a href="GHC.SysTools.Cpp.html#generateMacros"><span class="hs-identifier hs-var hs-var">generateMacros</span></a></span></span><span> </span><span id="local-6989586621682958594"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958594"><span class="hs-identifier hs-var">prefix</span></a></span></span><span> </span><span id="local-6989586621682958595"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958595"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682958596"><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621682958596"><span class="hs-identifier hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-251"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-252"></span><span>  </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#define &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958594"><span class="hs-identifier hs-var">prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;VERSION_&quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958595"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; String
</span><span class="hs-identifier hs-var">showVersion</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621682958596"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-253"></span><span>  </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;#define MIN_&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958594"><span class="hs-identifier hs-var">prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;VERSION_&quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958595"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(major1,major2,minor) (\\\n&quot;</span></span><span>
</span><span id="line-254"></span><span>  </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  (major1) &lt;  &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958599"><span class="hs-identifier hs-var">major1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; || \\\n&quot;</span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  (major1) == &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958599"><span class="hs-identifier hs-var">major1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &amp;&amp; (major2) &lt;  &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958600"><span class="hs-identifier hs-var">major2</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; || \\\n&quot;</span></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  (major1) == &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958599"><span class="hs-identifier hs-var">major1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &amp;&amp; (major2) == &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958600"><span class="hs-identifier hs-var">major2</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &amp;&amp; (minor) &lt;= &quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958601"><span class="hs-identifier hs-var">minor</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-special">,</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621682958604"><span class="annot"><span class="annottext">take3 :: [c] -&gt; (c, c, c)
</span><a href="#local-6989586621682958604"><span class="hs-identifier hs-var hs-var">take3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682958605"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958605"><span class="hs-identifier hs-var">a</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682958606"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958606"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682958607"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958607"><span class="hs-identifier hs-var">c</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[c]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958605"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958606"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621682958607"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><span class="annottext">[c]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (c, c, c)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;take3&quot;</span></span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682958599"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958599"><span class="hs-identifier hs-var">major1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682958600"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958600"><span class="hs-identifier hs-var">major2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682958601"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958601"><span class="hs-identifier hs-var">minor</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; (String, String, String)
forall {c}. [c] -&gt; (c, c, c)
</span><a href="#local-6989586621682958604"><span class="hs-identifier hs-var">take3</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; (String, String, String))
-&gt; [String] -&gt; (String, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; String) -&gt; [Int] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; [Int]
</span><span class="hs-identifier hs-var">versionBranch</span></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="#local-6989586621682958596"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;0&quot;</span></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span class="annot"><span class="hs-comment">-- | Find out path to @ghcversion.h@ file</span></span><span>
</span><span id="line-267"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#getGhcVersionPathName"><span class="hs-identifier hs-type">getGhcVersionPathName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Env.html#UnitEnv"><span class="hs-identifier hs-type">UnitEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-268"></span><span id="getGhcVersionPathName"><span class="annot"><span class="annottext">getGhcVersionPathName :: DynFlags -&gt; UnitEnv -&gt; IO String
</span><a href="GHC.SysTools.Cpp.html#getGhcVersionPathName"><span class="hs-identifier hs-var hs-var">getGhcVersionPathName</span></a></span></span><span> </span><span id="local-6989586621682958611"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958611"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682958612"><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958612"><span class="hs-identifier hs-var">unit_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958613"><span class="annot"><span class="annottext">candidates :: [String]
</span><a href="#local-6989586621682958613"><span class="hs-identifier hs-var hs-var hs-var">candidates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Maybe String
</span><a href="GHC.Driver.DynFlags.html#ghcVersionFile"><span class="hs-identifier hs-var">ghcVersionFile</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958611"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-270"></span><span>        </span><span class="hs-comment">-- the user has provided an explicit `ghcversion.h` file to use.</span><span>
</span><span id="line-271"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682958615"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958615"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958615"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-272"></span><span>        </span><span class="hs-comment">-- otherwise, try to find it in the rts' include-dirs.</span><span>
</span><span id="line-273"></span><span>        </span><span class="hs-comment">-- Note: only in the RTS include-dirs! not all preload units less we may</span><span>
</span><span id="line-274"></span><span>        </span><span class="hs-comment">-- use a wrong file. See #25106 where a globally installed</span><span>
</span><span id="line-275"></span><span>        </span><span class="hs-comment">-- /usr/include/ghcversion.h file was used instead of the one provided</span><span>
</span><span id="line-276"></span><span>        </span><span class="hs-comment">-- by the rts.</span><span>
</span><span id="line-277"></span><span>        </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; UnitId -&gt; Maybe UnitInfo
</span><a href="GHC.Unit.State.html#lookupUnitId"><span class="hs-identifier hs-var">lookupUnitId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; UnitEnv -&gt; UnitState
UnitEnv -&gt; UnitState
</span><a href="GHC.Unit.Env.html#ue_units"><span class="hs-identifier hs-var">ue_units</span></a></span><span> </span><span class="annot"><span class="annottext">UnitEnv
</span><a href="#local-6989586621682958612"><span class="hs-identifier hs-var">unit_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="GHC.Unit.Types.html#rtsUnitId"><span class="hs-identifier hs-var">rtsUnitId</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-278"></span><span>          </span><span class="annot"><span class="annottext">Maybe UnitInfo
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-279"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682958618"><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621682958618"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
</span><a href="../../filepath-1.5.4.0-e69b/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghcversion.h&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; String) -&gt; [String] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[UnitInfo] -&gt; [String]
</span><a href="GHC.Unit.Info.html#collectIncludeDirs"><span class="hs-identifier hs-var">collectIncludeDirs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">UnitInfo
</span><a href="#local-6989586621682958618"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621682958620"><span class="annot"><a href="#local-6989586621682958620"><span class="hs-identifier hs-var">found</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO Bool) -&gt; [String] -&gt; IO [String]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-identifier hs-var">filterM</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="../../directory-1.3.9.0-af18/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958613"><span class="hs-identifier hs-var">candidates</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682958620"><span class="hs-identifier hs-type">found</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GhcException -&gt; IO String
forall a. GhcException -&gt; IO a
</span><a href="GHC.Utils.Panic.html#throwGhcExceptionIO"><span class="hs-identifier hs-var">throwGhcExceptionIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GhcException
</span><a href="GHC.Utils.Panic.html#InstallationError"><span class="hs-identifier hs-var">InstallationError</span></a></span><span>
</span><span id="line-284"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ghcversion.h missing; tried: &quot;</span></span><span>
</span><span id="line-285"></span><span>                                      </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958613"><span class="hs-identifier hs-var">candidates</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682958625"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958625"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[String]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682958625"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#applyCDefs"><span class="hs-identifier hs-type">applyCDefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Backend.html#DefunctionalizedCDefs"><span class="hs-identifier hs-type">DefunctionalizedCDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-289"></span><span id="applyCDefs"><span class="annot"><span class="annottext">applyCDefs :: DefunctionalizedCDefs -&gt; Logger -&gt; DynFlags -&gt; IO [String]
</span><a href="GHC.SysTools.Cpp.html#applyCDefs"><span class="hs-identifier hs-var hs-var">applyCDefs</span></a></span></span><span> </span><span class="annot"><span class="annottext">DefunctionalizedCDefs
</span><a href="GHC.Driver.Backend.html#NoCDefs"><span class="hs-identifier hs-var">NoCDefs</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; IO [String]
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-290"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#applyCDefs"><span class="hs-identifier hs-var">applyCDefs</span></a></span><span> </span><span class="annot"><span class="annottext">DefunctionalizedCDefs
</span><a href="GHC.Driver.Backend.html#LlvmCDefs"><span class="hs-identifier hs-var">LlvmCDefs</span></a></span><span> </span><span id="local-6989586621682958628"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682958628"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621682958629"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958629"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-291"></span><span>    </span><span id="local-6989586621682958630"><span class="annot"><a href="#local-6989586621682958630"><span class="hs-identifier hs-var">llvmVer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DynFlags -&gt; IO (Maybe LlvmVersion)
</span><a href="GHC.SysTools.Tasks.html#figureLlvmVersion"><span class="hs-identifier hs-var">figureLlvmVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621682958628"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958629"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Version.html#llvmVersionList"><span class="hs-identifier hs-type">llvmVersionList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682958630"><span class="hs-identifier hs-type">llvmVer</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-293"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621682958633"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958633"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__GLASGOW_HASKELL_LLVM__=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; String
</span><a href="#local-6989586621682958634"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958633"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682958635"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958635"><span class="hs-identifier hs-var">m</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682958636"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958636"><span class="hs-identifier hs-var">n</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Int]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-D__GLASGOW_HASKELL_LLVM__=&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; String
</span><a href="#local-6989586621682958634"><span class="hs-identifier hs-var">format</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958635"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958636"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-295"></span><span>               </span><span class="annot"><span class="annottext">Maybe [Int]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>    </span><span id="local-6989586621682958634"><span class="annot"><span class="annottext">format :: (Int, Int) -&gt; String
</span><a href="#local-6989586621682958634"><span class="hs-identifier hs-var hs-var">format</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682958647"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958647"><span class="hs-identifier hs-var">major</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682958648"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958648"><span class="hs-identifier hs-var">minor</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958648"><span class="hs-identifier hs-var">minor</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;backendCDefs: Unsupported minor version&quot;</span></span><span>
</span><span id="line-299"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958647"><span class="hs-identifier hs-var">major</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682958648"><span class="hs-identifier hs-var">minor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Contract is Int</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">-- Note [Filepaths and Multiple Home Units]</span><span>
</span><span id="line-303"></span><span class="annot"><a href="GHC.SysTools.Cpp.html#offsetIncludePaths"><span class="hs-identifier hs-type">offsetIncludePaths</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#IncludeSpecs"><span class="hs-identifier hs-type">IncludeSpecs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#IncludeSpecs"><span class="hs-identifier hs-type">IncludeSpecs</span></a></span><span>
</span><span id="line-304"></span><span id="offsetIncludePaths"><span class="annot"><span class="annottext">offsetIncludePaths :: DynFlags -&gt; IncludeSpecs -&gt; IncludeSpecs
</span><a href="GHC.SysTools.Cpp.html#offsetIncludePaths"><span class="hs-identifier hs-var hs-var">offsetIncludePaths</span></a></span></span><span> </span><span id="local-6989586621682958651"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958651"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Driver.DynFlags.html#IncludeSpecs"><span class="hs-identifier hs-type">IncludeSpecs</span></a></span><span> </span><span id="local-6989586621682958653"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958653"><span class="hs-identifier hs-var">incs</span></a></span></span><span> </span><span id="local-6989586621682958654"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958654"><span class="hs-identifier hs-var">quotes</span></a></span></span><span> </span><span id="local-6989586621682958655"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958655"><span class="hs-identifier hs-var">impl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-305"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682958656"><span class="annot"><span class="annottext">go :: [String] -&gt; [String]
</span><a href="#local-6989586621682958656"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; String) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; String -&gt; String
</span><a href="GHC.Driver.Session.html#augmentByWorkingDirectory"><span class="hs-identifier hs-var">augmentByWorkingDirectory</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682958651"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String] -&gt; IncludeSpecs
</span><a href="GHC.Driver.DynFlags.html#IncludeSpecs"><span class="hs-identifier hs-var">IncludeSpecs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621682958656"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958653"><span class="hs-identifier hs-var">incs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621682958656"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958654"><span class="hs-identifier hs-var">quotes</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; [String]
</span><a href="#local-6989586621682958656"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621682958655"><span class="hs-identifier hs-var">impl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span></pre></body></html>