<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The AQUA Project, Glasgow University, 1996-1998
-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">-- | Final zonking to 'Type'. See Note [Zonking to Type].</span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Distinct from the intra-typechecker zonking in &quot;GHC.Tc.Zonk.TcType&quot;;</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- see Note [Module structure for zonking].</span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html"><span class="hs-identifier">GHC.Tc.Zonk.Type</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Zonking</span></span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><span class="hs-comment">-- | For a description of &quot;zonking&quot;, see Note [What is zonking?].</span></span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier">ZonkTcM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopDecls"><span class="hs-identifier">zonkTopDecls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopExpr"><span class="hs-identifier">zonkTopExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopLExpr"><span class="hs-identifier">zonkTopLExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopBndrs"><span class="hs-identifier">zonkTopBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBindersX"><span class="hs-identifier">zonkTyVarBindersX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBinderX"><span class="hs-identifier">zonkTyVarBinderX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier">zonkTyBndrX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier">zonkTyBndrsX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToType"><span class="hs-identifier">zonkTcTypeToType</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier">zonkTcTypeToTypeX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypesToTypesX"><span class="hs-identifier">zonkTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier">zonkScaledTcTypesToTypesX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarOcc"><span class="hs-identifier">zonkTyVarOcc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier">zonkCoToCo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier">zonkEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier">zonkTcEvBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier">zonkTcMethInfoToMethInfoX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#lookupTyVarX"><span class="hs-identifier">lookupTyVarX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** 'ZonkEnv', and the 'ZonkT' and 'ZonkBndrT' monad transformers</span></span><span>
</span><span id="line-29"></span><span>        </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html"><span class="hs-identifier">GHC.Tc.Zonk.Env</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Coercion holes</span></span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#isFilledCoercionHole"><span class="hs-identifier">isFilledCoercionHole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole"><span class="hs-identifier">unpackCoercionHole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole_maybe"><span class="hs-identifier">unpackCoercionHole_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Rewriter sets</span></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRewriterSet"><span class="hs-identifier">zonkRewriterSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCtRewriterSet"><span class="hs-identifier">zonkCtRewriterSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier">zonkCtEvRewriterSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Tidying</span></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#tcInitTidyEnv"><span class="hs-identifier">tcInitTidyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#tcInitOpenTidyEnv"><span class="hs-identifier">tcInitOpenTidyEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier">pprTyVar</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Splice.html"><span class="hs-identifier">GHC.Tc.Gen.Splice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier">runTopSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html"><span class="hs-identifier">GHC.Tc.Types</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier">TcM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.TcRef.html"><span class="hs-identifier">GHC.Tc.Types.TcRef</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html"><span class="hs-identifier">GHC.Tc.TyCl.Build</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier">TcMethInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier">MethInfo</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#newZonkAnyType"><span class="hs-identifier">newZonkAnyType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier">setSrcSpanA</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#liftZonkM"><span class="hs-identifier">liftZonkM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier">traceTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier">addErr</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html"><span class="hs-identifier">GHC.Tc.Types.Constraint</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html"><span class="hs-identifier">GHC.Tc.Zonk.Env</span></a></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- Very little shared code between GHC.Tc.Zonk.TcType and GHC.Tc.Zonk.Type.</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- See Note [Module structure for zonking]</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html"><span class="hs-identifier">GHC.Tc.Zonk.TcType</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#tcInitTidyEnv"><span class="hs-identifier">tcInitTidyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#tcInitOpenTidyEnv"><span class="hs-identifier">tcInitOpenTidyEnv</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#writeMetaTyVarRef"><span class="hs-identifier">writeMetaTyVarRef</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#checkCoercionHole"><span class="hs-identifier">checkCoercionHole</span></a></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#zonkCoVar"><span class="hs-identifier">zonkCoVar</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html"><span class="hs-identifier">GHC.Utils.Monad</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html"><span class="hs-identifier">GHC.Types.TypeEnv</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html"><span class="hs-identifier">GHC.Tc.Types.BasicTypes</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html"><span class="hs-identifier">Control.Monad.Trans.Class</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier">lift</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">{- Note [What is zonking?]
~~~~~~~~~~~~~~~~~~~~~~~~~~
GHC relies heavily on mutability in the typechecker for efficient operation.
For this reason, throughout much of the type checking process, meta type
variables (the MetaTv constructor of TcTyVarDetails) are represented by mutable
variables (known as TcRefs).

Zonking is the process of replacing each such mutable variable with a Type.
This involves traversing the entire type expression, but the interesting part,
replacing the mutable variables, occurs in zonkTyVarOcc.

There are two ways to zonk a Type, using one of two entirely separate zonkers,
that share essentially no code:

*  GHC.Tc.Zonk.TcType.zonkTcType, which is used /during/ type checking:
   * It leaves unfilled metavars untouched, so the resulting Type can contain TcTyVars
   * It is only defined for Type and Coercion, not for HsExpr
   * It works in a very stripped-down monad, ZonkM, make it clear that it uses
     very few effects (for example, it can't throw errors).

* GHC.Tc.Zonk.Type.zonkTcTypeToType, is used /after/ typechecking is complete:
  * It always returns a Type with no remaining TcTyVars; no meta-tyvars remain.
  * It does defaulting, replacing an unconstrained TcTyVar with Any, or failing
     (determined by the ZonkFlexi parameter used; see GHC.Tc.Zonk.Type.commitFlexi).
  * It works over HsExpr and HsBinds as well as Type and Coercion. As part of this,
    it also removes the mutable variables in evidence bindings.
  * It works in the full TcM monad, augmented with an environment.
    More precisely, it uses ZonkTcM and ZonkBndrTcM, which augment TcM with a
    ZonkEnv environment using the zonking monad transformers ZonkT and ZonkBndrT
    (see Note [The ZonkEnv] in GHC.Tc.Zonk.Env).

    Why TcM rather than a smaller monad? See Note [Using TcM for zonking to Type].

Note [Module structure for zonking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
As remarked in Note [What is zonking?], there are really two different zonkers;
we have GHC.Tc.Zonk.TcType for zonking within the typechecker and
GHC.Tc.Zonk.Type for the final zonking pass.

The code relating to zonking is thus split up across the following modules:

  I. Zonking within the typechecker
    1. GHC.Tc.Zonk.Monad
    2. GHC.Tc.Zonk.TcType

  II. Final zonking to Type
    1. GHC.Tc.Zonk.Env
    2. GHC.Tc.Zonk.Type

I.1. GHC.Tc.Zonk.Monad - the ZonkM monad

  GHC.Tc.Zonk.Monad defines the ZonkM monad, which is a stripped down version
  of TcM which has just enough information to be able to zonk types.

  This is the monad used for zonking inside the typechecker,
  as used in GHC.Tc.Zonk.TcType.

  Crucially, it never errors. It is the monad we use when reporting errors
  (see ErrCtxt), and it would be quite bad if we could error in the middle
  of reporting an error!

I.2. GHC.Tc.Zonk.TcType - zonking types in the typechecker

  GHC.Tc.Zonk.TcType contains code for zonking types and constraints, for use
  within the typechecker. It uses the ZonkM monad.
  For example, it defines:

    zonkTcType :: TcType -&gt; ZonkM TcType
    zonkCt     :: Ct     -&gt; ZonkM Ct

II.1. GHC.Tc.Zonk.Env - the ZonkEnv and ZonkT/ZonkBndrT monad transformers

   GHC.Tc.Zonk.Env defines the the ZonkT and ZonkBndrT monad transformers.
   These are essentially &quot;ReaderT ZonkEnv&quot; and &quot;StateT ZonkEnv&quot;, except
   that ZonkBndrT use continuation-passing style instead of an explicit state.
   See Note [The ZonkEnv] in GHC.Tc.Zonk.Env.

   These are used for the final zonking to type, in GHC.Tc.Zonk.Type.

II.2. GHC.Tc.Zonk.Type - final zonking to type

  GHC.Tc.Zonk.Type is concerned with the &quot;final zonking&quot; pass, after we finish
  typechecking. It zonks not only types, but terms. It uses the monads

    type ZonkTcM     = ZonkT     TcM
    type ZonkBndrTcM = ZonkBndrTcM

  for example:

    zonkTyBndrX       :: TcTyVar  -&gt; ZonkBndrTcM TyVar
    zonkTcTypeToTypeX :: TcType   -&gt; ZonkT     TcM Type

Note that ZonkTcM does a lot more things than ZonkM:

  - it uses a separate ZonkEnv state to accumulate zonked type
      (see Note [The ZonkEnv] in GHC.Tc.Zonk.Env)
  - it defaults type variables,
      (see Note [Un-unified unification variables] in GHC.Tc.Zonk.Env)
  - turns TcTyVars into TyVars,
  - ...

This means that there is essentially no code shared between &quot;GHC.Tc.Zonk.TcType&quot;
and &quot;GHC.Tc.Zonk.Type'; they're really two different zonkers.

Note [Zonking to Type]
~~~~~~~~~~~~~~~~~~~~~~
Zonking to Type is a final zonking pass done *after* typechecking.
It runs over the bindings

 a) to convert TcTyVars to TyVars etc, dereferencing any bindings etc
 b) convert unbound TcTyVar to Void
 c) convert each TcId to an Id by zonking its type

The type variables are converted by binding mutable tyvars to immutable ones
and then zonking as normal.

The Ids are converted by binding them in the normal Tc envt; that
way we maintain sharing; eg an Id is zonked at its binding site and they
all occurrences of that Id point to the common zonked copy

It's all pretty boring stuff, because HsSyn is such a large type, and
the environment manipulation is tiresome.

Note [Sharing when zonking to Type]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Problem:

    In GHC.Tc.Zonk.TcType.zonkTcTyVar, we short-circuit (Indirect ty) to
    (Indirect zty), see Note [Sharing in zonking] in GHC.Tc.Zonk.TcType.
    But we /can't/ do this when zonking a TcType to a Type (#15552, esp comment:3).
    Suppose we have

       alpha -&gt; alpha
         where
            alpha is already unified:
             alpha := T{tc-tycon} Int -&gt; Int
         and T is knot-tied

    By &quot;knot-tied&quot; I mean that the occurrence of T is currently a TcTyCon,
    but the global env contains a mapping &quot;T&quot; :-&gt; T{knot-tied-tc}. See
    Note [Type checking recursive type and class declarations] in
    GHC.Tc.TyCl.

    Now we call zonkTcTypeToType on that (alpha -&gt; alpha). If we follow
    the same path as Note [Sharing in zonking] in GHC.Tc.Zonk.TcType, we'll
    update alpha to
       alpha := T{knot-tied-tc} Int -&gt; Int

    But alas, if we encounter alpha for a /second/ time, we end up
    looking at T{knot-tied-tc} and fall into a black hole. The whole
    point of zonkTcTypeToType is that it produces a type full of
    knot-tied tycons, and you must not look at the result!!

    To put it another way (zonkTcTypeToType . zonkTcTypeToType) is not
    the same as zonkTcTypeToType. (If we distinguished TcType from
    Type, this issue would have been a type error!)

Solutions: (see #15552 for other variants)

One possible solution is simply not to do the short-circuiting.
That has less sharing, but maybe sharing is rare. And indeed,
that usually turns out to be viable from a perf point of view

But zonkTyVarOcc implements something a bit better

* ZonkEnv contains ze_meta_tv_env, which maps
      from a MetaTyVar (unification variable)
      to a Type (not a TcType)

* In zonkTyVarOcc, we check this map to see if we have zonked
  this variable before. If so, use the previous answer; if not
  zonk it, and extend the map.

* The map is of course stateful, held in a TcRef. (That is unlike
  the treatment of lexically-scoped variables in ze_tv_env and
  ze_id_env.)

* In zonkTyVarOcc we read the TcRef to look up the unification
  variable:
    - if we get a hit we use the zonked result;
    - if not, in zonk_meta we see if the variable is `Indirect ty`,
      zonk that, and update the map (in finish_meta)
  But Nota Bene that the &quot;update map&quot; step must re-read the TcRef
  (or, more precisely, use updTcRef) because the zonking of the
  `Indirect ty` may have added lots of stuff to the map.  See
  #19668 for an example where this made an asymptotic difference!

Is it worth the extra work of carrying ze_meta_tv_env? Some
non-systematic perf measurements suggest that compiler allocation is
reduced overall (by 0.5% or so) but compile time really doesn't
change.  But in some cases it makes a HUGE difference: see test
T9198 and #19668.  So yes, it seems worth it.

Note [Using TcM for zonking to Type]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The main zonking monads currently wrap TcM, because we need access to
the full TcM monad in order to expand typed TH splices.
See zonkExpr (HsTypedSplice s _) = ...

After the Typed TH plan has been implemented, this should no longer be necessary,
and we should be able to use a stripped down monad, similar to the ZonkM monad
which we use for zonking within the typechecker (but we will need a place to
accumulate errors).

Note [Inlining ZonkBndrT computations]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Computations that use the ZonkBndrT monad transformer must be inlined:
ZonkBndrT uses continuation-passing style; failing to inline means applying
an unknown continuation (unknown function call), which prevents many
optimisations from taking place.

See test cases T14683, which regresses without these changes.
-}</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-comment">-- Why do we use TcM below? See Note [Using TcM for zonking to Type]</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | Zonking monad for a computation that zonks to Type, reading from a 'ZonkEnv'</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- but not extending or modifying it.</span><span>
</span><span id="line-323"></span><span class="hs-comment">--</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- See Note [Zonking to Type].</span><span>
</span><span id="line-325"></span><span class="hs-keyword">type</span><span> </span><span id="ZonkTcM"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-var">ZonkTcM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-type">ZonkT</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-comment">-- | Zonking monad for a computation that zonks to Type, reading from</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- and extending or modifying a 'ZonkEnv'.</span><span>
</span><span id="line-329"></span><span class="hs-comment">--</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- See Note [Zonking to Type].</span><span>
</span><span id="line-331"></span><span class="hs-keyword">type</span><span> </span><span id="ZonkBndrTcM"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-var">ZonkBndrTcM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkBndrT"><span class="hs-identifier hs-type">ZonkBndrT</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span id="local-6989586621683010106"><span id="local-6989586621683010107"><span id="local-6989586621683010109"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-type">wrapLocZonkMA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010106"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010107"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010109"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683010106"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-334"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010109"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683010107"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-335"></span><span id="wrapLocZonkMA"><span class="annot"><span class="annottext">wrapLocZonkMA :: forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var hs-var">wrapLocZonkMA</span></a></span></span><span> </span><span id="local-6989586621683011434"><span class="annot"><span class="annottext">a -&gt; ZonkTcM b
</span><a href="#local-6989586621683011434"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011436"><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683011436"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011437"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683011437"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (GenLocated (EpAnn ann) b))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b)
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (GenLocated (EpAnn ann) b))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b))
-&gt; (ZonkEnv -&gt; TcM (GenLocated (EpAnn ann) b))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011438"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011438"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><span class="annottext">EpAnn ann
-&gt; TcM (GenLocated (EpAnn ann) b) -&gt; TcM (GenLocated (EpAnn ann) b)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683011436"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM (GenLocated (EpAnn ann) b) -&gt; TcM (GenLocated (EpAnn ann) b))
-&gt; TcM (GenLocated (EpAnn ann) b) -&gt; TcM (GenLocated (EpAnn ann) b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011439"><span class="annot"><a href="#local-6989586621683011439"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkTcM b -&gt; ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) b
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; ZonkTcM b
</span><a href="#local-6989586621683011434"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683011437"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011438"><span class="hs-identifier hs-var">ze</span></a></span><span>
</span><span id="line-338"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011436"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011439"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span id="local-6989586621683010130"><span id="local-6989586621683010131"><span id="local-6989586621683010133"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkBndrMA"><span class="hs-identifier hs-type">wrapLocZonkBndrMA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010130"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010131"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010133"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683010130"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-341"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010133"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683010131"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-342"></span><span id="wrapLocZonkBndrMA"><span class="annot"><span class="annottext">wrapLocZonkBndrMA :: forall a b ann.
(a -&gt; ZonkBndrTcM b)
-&gt; GenLocated (EpAnn ann) a
-&gt; ZonkBndrTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkBndrMA"><span class="hs-identifier hs-var hs-var">wrapLocZonkBndrMA</span></a></span></span><span> </span><span id="local-6989586621683011442"><span class="annot"><span class="annottext">a -&gt; ZonkBndrTcM b
</span><a href="#local-6989586621683011442"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011443"><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683011443"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011444"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683011444"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall r.
 (GenLocated (EpAnn ann) b
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b)
forall (m :: * -&gt; *) a.
(forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r) -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkBndrT"><span class="hs-identifier hs-var">ZonkBndrT</span></a></span><span> </span><span class="annot"><span class="annottext">((forall r.
  (GenLocated (EpAnn ann) b
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b))
-&gt; (forall r.
    (GenLocated (EpAnn ann) b
     -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated (EpAnn ann) b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011445"><span class="annot"><span class="annottext">GenLocated (EpAnn ann) b -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
</span><a href="#local-6989586621683011445"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; (ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011446"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011446"><span class="hs-identifier hs-var">ze</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><span class="annottext">EpAnn ann -&gt; TcM r -&gt; TcM r
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683011443"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM r -&gt; TcM r) -&gt; TcM r -&gt; TcM r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-344"></span><span>  </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; ZonkEnv -&gt; TcM r
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">ZonkBndrTcM b
-&gt; forall r.
   (b -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; ZonkBndrTcM b
</span><a href="#local-6989586621683011442"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683011444"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((b -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; (b -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011448"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621683011448"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated (EpAnn ann) b -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
</span><a href="#local-6989586621683011445"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn ann -&gt; b -&gt; GenLocated (EpAnn ann) b
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683011443"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621683011448"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011446"><span class="hs-identifier hs-var">ze</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier hs-type">zonkTyBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-349"></span><span id="zonkTyBndrsX"><span class="annot"><span class="annottext">zonkTyBndrsX :: [Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier hs-var hs-var">zonkTyBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; [Id] -&gt; ZonkBndrTcM [Id]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span>
</span><span id="line-350"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-pragma hs-type">zonkTyBndrsX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-type">zonkTyBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-353"></span><span class="hs-comment">-- This guarantees to return a TyVar (not a TcTyVar)</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- then we add it to the envt, so all occurrences are replaced</span><span>
</span><span id="line-355"></span><span class="hs-comment">--</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- It does not clone: the new TyVar has the sane Name</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- as the old one.  This important when zonking the</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- TyVarBndrs of a TyCon, whose Names may scope.</span><span>
</span><span id="line-359"></span><span id="zonkTyBndrX"><span class="annot"><span class="annottext">zonkTyBndrX :: Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var hs-var">zonkTyBndrX</span></a></span></span><span> </span><span id="local-6989586621683011452"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; SDoc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImmutableTyVar"><span class="hs-identifier hs-var">isImmutableTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011459"><span class="annot"><a href="#local-6989586621683011459"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>               </span><span class="hs-comment">-- Internal names tidy up better, for iface files.</span><span>
</span><span id="line-363"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683011461"><span class="annot"><a href="#local-6989586621683011461"><span class="hs-identifier hs-var hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011452"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011459"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-364"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendTyZonkEnv"><span class="hs-identifier hs-type">extendTyZonkEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011461"><span class="hs-identifier hs-type">tv'</span></a></span><span>
</span><span id="line-365"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683011461"><span class="hs-identifier hs-type">tv'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-366"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-pragma hs-type">zonkTyBndrX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span id="local-6989586621683010154"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBindersX"><span class="hs-identifier hs-type">zonkTyVarBindersX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010154"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-369"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010154"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-370"></span><span id="zonkTyVarBindersX"><span class="annot"><span class="annottext">zonkTyVarBindersX :: forall vis. [VarBndr Id vis] -&gt; ZonkBndrTcM [VarBndr Id vis]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBindersX"><span class="hs-identifier hs-var hs-var">zonkTyVarBindersX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VarBndr Id vis
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (VarBndr Id vis))
-&gt; [VarBndr Id vis]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [VarBndr Id vis]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">VarBndr Id vis
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (VarBndr Id vis)
forall vis. VarBndr Id vis -&gt; ZonkBndrTcM (VarBndr Id vis)
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBinderX"><span class="hs-identifier hs-var">zonkTyVarBinderX</span></a></span><span>
</span><span id="line-371"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBindersX"><span class="hs-pragma hs-type">zonkTyVarBindersX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span id="local-6989586621683010157"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBinderX"><span class="hs-identifier hs-type">zonkTyVarBinderX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010157"><span class="hs-identifier hs-type">vis</span></a></span><span>
</span><span id="line-374"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683010157"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- Takes a TcTyVar and guarantees to return a TyVar</span><span>
</span><span id="line-376"></span><span id="zonkTyVarBinderX"><span class="annot"><span class="annottext">zonkTyVarBinderX :: forall vis. VarBndr Id vis -&gt; ZonkBndrTcM (VarBndr Id vis)
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBinderX"><span class="hs-identifier hs-var hs-var">zonkTyVarBinderX</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621683011470"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011470"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621683011471"><span class="annot"><span class="annottext">vis
</span><a href="#local-6989586621683011471"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011472"><span class="annot"><a href="#local-6989586621683011472"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011470"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-378"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011472"><span class="hs-identifier hs-type">tv'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011471"><span class="hs-identifier hs-type">vis</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-379"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarBinderX"><span class="hs-pragma hs-type">zonkTyVarBinderX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyVarOcc"><span class="hs-identifier hs-type">zonkTyVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-382"></span><span id="zonkTyVarOcc"><span class="annot"><span class="annottext">zonkTyVarOcc :: HasDebugCallStack =&gt;
Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyVarOcc"><span class="hs-identifier hs-var hs-var">zonkTyVarOcc</span></a></span></span><span> </span><span id="local-6989586621683011492"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011494"><span class="annot"><a href="#local-6989586621683011494"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
forall (m :: * -&gt; *). Monad m =&gt; ZonkT m ZonkEnv
</span><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-var">getZonkEnv</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683011496"><span class="annot"><a href="#local-6989586621683011496"><span class="hs-identifier hs-var hs-var">lookup_in_tv_env</span></a></span></span><span>    </span><span class="hs-comment">-- Look up in the env just as we do for Ids</span><span>
</span><span id="line-386"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621683011494"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-387"></span><span>                   </span><span class="annot"><span class="annottext">Maybe Id
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- TyVar/SkolemTv/RuntimeUnk that isn't in the ZonkEnv</span><span>
</span><span id="line-388"></span><span>                               </span><span class="hs-comment">-- This can happen for RuntimeUnk variables (which</span><span>
</span><span id="line-389"></span><span>                               </span><span class="hs-comment">-- should stay as RuntimeUnk), but I think it should</span><span>
</span><span id="line-390"></span><span>                               </span><span class="hs-comment">-- not happen for SkolemTv.</span><span>
</span><span id="line-391"></span><span>                               </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateTyVarKindM"><span class="hs-identifier hs-var">updateTyVarKindM</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span>                   </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683011501"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011501"><span class="hs-identifier hs-var">tv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011501"><span class="hs-identifier hs-var">tv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span>             </span><span id="local-6989586621683011502"><span class="annot"><a href="#local-6989586621683011502"><span class="hs-identifier hs-var hs-var">zonk_meta</span></a></span></span><span> </span><span id="local-6989586621683011503"><span class="annot"><span class="annottext">TcRef MetaDetails
</span><a href="#local-6989586621683011503"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="annot"><span class="annottext">MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#Flexi"><span class="hs-identifier hs-var">Flexi</span></a></span><span>
</span><span id="line-396"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011505"><span class="annot"><a href="#local-6989586621683011505"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>                    </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011506"><span class="annot"><a href="#local-6989586621683011506"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#commitFlexi"><span class="hs-identifier hs-type">commitFlexi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011492"><span class="hs-identifier hs-type">tv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011505"><span class="hs-identifier hs-type">kind</span></a></span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-type">lift</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#liftZonkM"><span class="hs-identifier hs-type">liftZonkM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#writeMetaTyVarRef"><span class="hs-identifier hs-type">writeMetaTyVarRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011492"><span class="hs-identifier hs-type">tv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011503"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011506"><span class="hs-identifier hs-type">ty</span></a></span><span>  </span><span class="hs-comment">-- Belt and braces</span><span>
</span><span id="line-400"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683011508"><span class="hs-identifier hs-type">finish_meta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011506"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>             </span><span class="annot"><a href="#local-6989586621683011502"><span class="hs-identifier hs-var">zonk_meta</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef MetaDetails
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#Indirect"><span class="hs-identifier hs-type">Indirect</span></a></span><span> </span><span id="local-6989586621683011510"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011510"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011511"><span class="annot"><a href="#local-6989586621683011511"><span class="hs-identifier hs-var">zty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011510"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-404"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683011508"><span class="hs-identifier hs-type">finish_meta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011511"><span class="hs-identifier hs-type">zty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span>             </span><span id="local-6989586621683011508"><span class="annot"><a href="#local-6989586621683011508"><span class="hs-identifier hs-var hs-var">finish_meta</span></a></span></span><span> </span><span id="local-6989586621683011512"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011512"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-407"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
</span><a href="GHC.Tc.Zonk.Type.html#extendMetaEnv"><span class="hs-identifier hs-var">extendMetaEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011512"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-408"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011512"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#isTcTyVar"><span class="hs-identifier hs-type">isTcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011492"><span class="hs-identifier hs-type">tv</span></a></span><span>
</span><span id="line-411"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#tcTyVarDetails"><span class="hs-identifier hs-type">tcTyVarDetails</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011492"><span class="hs-identifier hs-type">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-412"></span><span>           </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-type">SkolemTv</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="#local-6989586621683011496"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-413"></span><span>           </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-type">RuntimeUnk</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="#local-6989586621683011496"><span class="hs-identifier hs-var">lookup_in_tv_env</span></a></span><span>
</span><span id="line-414"></span><span>           </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#MetaTv"><span class="hs-identifier hs-type">MetaTv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mtv_ref :: TcTyVarDetails -&gt; TcRef MetaDetails
</span><a href="GHC.Tc.Utils.TcType.html#mtv_ref"><span class="hs-identifier hs-var">mtv_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011520"><span class="annot"><span class="annottext">TcRef MetaDetails
</span><a href="#local-6989586621683011520"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-415"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011521"><span class="annot"><a href="#local-6989586621683011521"><span class="hs-identifier hs-var">mb_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkTcM (Maybe Kind)
</span><a href="GHC.Tc.Zonk.Type.html#lookupMetaTv"><span class="hs-identifier hs-var">lookupMetaTv</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011492"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-416"></span><span>                     </span><span class="hs-comment">-- See Note [Sharing when zonking to Type]</span><span>
</span><span id="line-417"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683011521"><span class="hs-identifier hs-type">mb_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-418"></span><span>                       </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683011523"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011523"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011523"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-419"></span><span>                       </span><span class="annot"><span class="annottext">Maybe Kind
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011524"><span class="annot"><a href="#local-6989586621683011524"><span class="hs-identifier hs-var">mtv_details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRef MetaDetails
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) MetaDetails
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">TcRef MetaDetails
</span><a href="#local-6989586621683011520"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-420"></span><span>                                     </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683011502"><span class="hs-identifier hs-type">zonk_meta</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011520"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011524"><span class="hs-identifier hs-type">mtv_details</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>         </span><span class="hs-comment">-- This should never really happen;</span><span>
</span><span id="line-423"></span><span>         </span><span class="hs-comment">-- TyVars should not occur in the typechecker</span><span>
</span><span id="line-424"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621683011496"><span class="hs-identifier hs-type">lookup_in_tv_env</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#extendMetaEnv"><span class="hs-identifier hs-type">extendMetaEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-427"></span><span id="extendMetaEnv"><span class="annot"><span class="annottext">extendMetaEnv :: Id -&gt; Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
</span><a href="GHC.Tc.Zonk.Type.html#extendMetaEnv"><span class="hs-identifier hs-var hs-var">extendMetaEnv</span></a></span></span><span> </span><span id="local-6989586621683011526"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011526"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621683011527"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011527"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>  </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ())
-&gt; (ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: ZonkEnv -&gt; IORef (TyVarEnv Kind)
</span><a href="GHC.Tc.Zonk.Env.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011529"><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
</span><a href="#local-6989586621683011529"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-429"></span><span>    </span><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
-&gt; (TyVarEnv Kind -&gt; TyVarEnv Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; (a -&gt; a) -&gt; m ()
</span><a href="GHC.Tc.Types.TcRef.html#updTcRef"><span class="hs-identifier hs-var">updTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
</span><a href="#local-6989586621683011529"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683011531"><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621683011531"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind -&gt; Id -&gt; Kind -&gt; TyVarEnv Kind
forall a. VarEnv a -&gt; Id -&gt; a -&gt; VarEnv a
</span><a href="GHC.Types.Var.Env.html#extendVarEnv"><span class="hs-identifier hs-var">extendVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVarEnv Kind
</span><a href="#local-6989586621683011531"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011526"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011527"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#lookupMetaTv"><span class="hs-identifier hs-type">lookupMetaTv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span id="lookupMetaTv"><span class="annot"><span class="annottext">lookupMetaTv :: Id -&gt; ZonkTcM (Maybe Kind)
</span><a href="GHC.Tc.Zonk.Type.html#lookupMetaTv"><span class="hs-identifier hs-var hs-var">lookupMetaTv</span></a></span></span><span> </span><span id="local-6989586621683011533"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011533"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-433"></span><span>  </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (Maybe Kind)) -&gt; ZonkTcM (Maybe Kind)
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM (Maybe Kind)) -&gt; ZonkTcM (Maybe Kind))
-&gt; (ZonkEnv -&gt; TcM (Maybe Kind)) -&gt; ZonkTcM (Maybe Kind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_meta_tv_env :: ZonkEnv -&gt; IORef (TyVarEnv Kind)
</span><a href="GHC.Tc.Zonk.Env.html#ze_meta_tv_env"><span class="hs-identifier hs-var">ze_meta_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011534"><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
</span><a href="#local-6989586621683011534"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-434"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011535"><span class="annot"><a href="#local-6989586621683011535"><span class="hs-identifier hs-var">mtv_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (TyVarEnv Kind)
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (TyVarEnv Kind)
</span><a href="#local-6989586621683011534"><span class="hs-identifier hs-var">mtv_env_ref</span></a></span><span>
</span><span id="line-435"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-type">lookupVarEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011535"><span class="hs-identifier hs-type">mtv_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011533"><span class="hs-identifier hs-type">tv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#lookupTyVarX"><span class="hs-identifier hs-type">lookupTyVarX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-438"></span><span id="lookupTyVarX"><span class="annot"><span class="annottext">lookupTyVarX :: Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#lookupTyVarX"><span class="hs-identifier hs-var hs-var">lookupTyVarX</span></a></span></span><span> </span><span id="local-6989586621683011536"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011536"><span class="hs-identifier hs-var">tv</span></a></span></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011537"><span class="annot"><a href="#local-6989586621683011537"><span class="hs-identifier hs-var">tv_env</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
forall (m :: * -&gt; *). Monad m =&gt; ZonkT m ZonkEnv
</span><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-var">getZonkEnv</span></a></span><span>
</span><span id="line-440"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621683011538"><span class="annot"><a href="#local-6989586621683011538"><span class="hs-identifier hs-var hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; Id -&gt; Maybe Id
forall a. VarEnv a -&gt; Id -&gt; Maybe a
</span><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-var">lookupVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621683011537"><span class="hs-identifier hs-var">tv_env</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011536"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-441"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683011539"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011539"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011539"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-442"></span><span>                      </span><span class="annot"><span class="annottext">Maybe Id
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Id
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lookupTyVarOcc&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011536"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621683011537"><span class="hs-identifier hs-var">tv_env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683011538"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#commitFlexi"><span class="hs-identifier hs-type">commitFlexi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-446"></span><span id="commitFlexi"><span class="annot"><span class="annottext">commitFlexi :: Id -&gt; Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#commitFlexi"><span class="hs-identifier hs-var hs-var">commitFlexi</span></a></span></span><span> </span><span id="local-6989586621683011542"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621683011543"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span></span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011544"><span class="annot"><a href="#local-6989586621683011544"><span class="hs-identifier hs-var">flexi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#ze_flexi"><span class="hs-identifier hs-var">ze_flexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; ZonkFlexi)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkFlexi
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
forall (m :: * -&gt; *). Monad m =&gt; ZonkT m ZonkEnv
</span><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-var">getZonkEnv</span></a></span><span>
</span><span id="line-448"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-type">lift</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683011544"><span class="hs-identifier hs-type">flexi</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-449"></span><span>         </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683011547"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span>         </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span>
</span><span id="line-452"></span><span>             </span><span class="hs-comment">-- Normally, RuntimeRep variables are defaulted in GHC.Tc.Utils.TcMType.defaultTyVar</span><span>
</span><span id="line-453"></span><span>             </span><span class="hs-comment">-- But that sees only type variables that appear in, say, an inferred type.</span><span>
</span><span id="line-454"></span><span>             </span><span class="hs-comment">-- Defaulting here, in the zonker, is needed to catch e.g.</span><span>
</span><span id="line-455"></span><span>             </span><span class="hs-comment">--    y :: Bool</span><span>
</span><span id="line-456"></span><span>             </span><span class="hs-comment">--    y = (\x -&gt; True) undefined</span><span>
</span><span id="line-457"></span><span>             </span><span class="hs-comment">-- We need *some* known RuntimeRep for the x and undefined, but no one</span><span>
</span><span id="line-458"></span><span>             </span><span class="hs-comment">-- will choose it until we get here, in the zonker.</span><span>
</span><span id="line-459"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isRuntimeRepTy"><span class="hs-identifier hs-var">isRuntimeRepTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-460"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to LiftedRep:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#liftedRepTy"><span class="hs-identifier hs-var">liftedRepTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-462"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isLevityTy"><span class="hs-identifier hs-var">isLevityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-463"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Lifted:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#liftedDataConTy"><span class="hs-identifier hs-var">liftedDataConTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-465"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier hs-var">isMultiplicityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span>
</span><span id="line-466"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to Many:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-468"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#ConcreteFRR"><span class="hs-identifier hs-type">ConcreteFRR</span></a></span><span> </span><span id="local-6989586621683011556"><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621683011556"><span class="hs-identifier hs-var">origin</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe ConcreteTvOrigin
</span><a href="GHC.Tc.Utils.TcType.html#isConcreteTyVar_maybe"><span class="hs-identifier hs-var">isConcreteTyVar_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-469"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ())
-&gt; TcRnMessage -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ZonkerMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnZonkerMessage"><span class="hs-identifier hs-var">TcRnZonkerMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin -&gt; ZonkerMessage
</span><a href="GHC.Tc.Errors.Types.html#ZonkerCannotDefaultConcrete"><span class="hs-identifier hs-var">ZonkerCannotDefaultConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">FixedRuntimeRepOrigin
</span><a href="#local-6989586621683011556"><span class="hs-identifier hs-var">origin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Builtin.Types.html#anyTypeOfKind"><span class="hs-identifier hs-var">anyTypeOfKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-471"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-472"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to ZonkAny:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-473"></span><span>                   </span><span class="hs-comment">-- See Note [Any types] in GHC.Builtin.Types, esp wrinkle (Any4)</span><span>
</span><span id="line-474"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Monad.html#newZonkAnyType"><span class="hs-identifier hs-var">newZonkAnyType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>         </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#RuntimeUnkFlexi"><span class="hs-identifier hs-var">RuntimeUnkFlexi</span></a></span><span>
</span><span id="line-477"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Defaulting flexi tyvar to RuntimeUnk:&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; TcM Kind
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVarDetails -&gt; Id
</span><a href="GHC.Types.Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683011547"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="GHC.Tc.Utils.TcType.html#RuntimeUnk"><span class="hs-identifier hs-var">RuntimeUnk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>                           </span><span class="hs-comment">-- This is where RuntimeUnks are born:</span><span>
</span><span id="line-480"></span><span>                           </span><span class="hs-comment">-- otherwise-unconstrained unification variables are</span><span>
</span><span id="line-481"></span><span>                           </span><span class="hs-comment">-- turned into RuntimeUnks as they leave the</span><span>
</span><span id="line-482"></span><span>                           </span><span class="hs-comment">-- typechecker's monad</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>         </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#NoFlexi"><span class="hs-identifier hs-var">NoFlexi</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM Kind
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NoFlexi&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011543"><span class="hs-identifier hs-var">zonked_kind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-487"></span><span>     </span><span id="local-6989586621683011547"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621683011547"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011542"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoVarOcc"><span class="hs-identifier hs-type">zonkCoVarOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-491"></span><span id="zonkCoVarOcc"><span class="annot"><span class="annottext">zonkCoVarOcc :: Id -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoVarOcc"><span class="hs-identifier hs-var hs-var">zonkCoVarOcc</span></a></span></span><span> </span><span id="local-6989586621683011566"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011566"><span class="hs-identifier hs-var">cv</span></a></span></span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ze_tv_env"><span class="hs-identifier hs-var">ze_tv_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011567"><span class="annot"><a href="#local-6989586621683011567"><span class="hs-identifier hs-var">tyco_env</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
forall (m :: * -&gt; *). Monad m =&gt; ZonkT m ZonkEnv
</span><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-var">getZonkEnv</span></a></span><span>
</span><span id="line-493"></span><span>         </span><span class="hs-comment">-- don't look in the knot-tied env</span><span>
</span><span id="line-494"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-type">lookupVarEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011567"><span class="hs-identifier hs-type">tyco_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011566"><span class="hs-identifier hs-type">cv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-495"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683011568"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011568"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Coercion -&gt; ZonkTcM Coercion) -&gt; Coercion -&gt; ZonkTcM Coercion
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011568"><span class="hs-identifier hs-var">cv'</span></a></span><span>
</span><span id="line-496"></span><span>          </span><span class="annot"><span class="annottext">Maybe Id
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-var">mkCoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Coercion)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id -&gt; ZonkTcM Coercion
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ZonkT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) Id
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a. ZonkM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#liftZonkM"><span class="hs-identifier hs-var">liftZonkM</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id)
-&gt; ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkM Id
</span><a href="GHC.Tc.Zonk.TcType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011566"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoHole"><span class="hs-identifier hs-type">zonkCoHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-499"></span><span id="zonkCoHole"><span class="annot"><span class="annottext">zonkCoHole :: CoercionHole -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoHole"><span class="hs-identifier hs-var hs-var">zonkCoHole</span></a></span></span><span> </span><span id="local-6989586621683011571"><span class="annot"><span class="annottext">hole :: CoercionHole
</span><a href="#local-6989586621683011571"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_ref :: CoercionHole -&gt; IORef (Maybe Coercion)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var">ch_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011574"><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683011574"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ch_co_var :: CoercionHole -&gt; Id
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011576"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011576"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011577"><span class="annot"><a href="#local-6989586621683011577"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe Coercion)
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683011574"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-501"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683011577"><span class="hs-identifier hs-type">contents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-502"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683011578"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683011578"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011579"><span class="annot"><a href="#local-6989586621683011579"><span class="hs-identifier hs-var">co'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683011578"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-503"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-type">lift</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#liftZonkM"><span class="hs-identifier hs-type">liftZonkM</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.TcType.html#checkCoercionHole"><span class="hs-identifier hs-type">checkCoercionHole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011576"><span class="hs-identifier hs-type">cv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011579"><span class="hs-identifier hs-type">co'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>              </span><span class="hs-comment">-- This next case should happen only in the presence of</span><span>
</span><span id="line-506"></span><span>              </span><span class="hs-comment">-- (undeferred) type errors. Originally, I put in a panic</span><span>
</span><span id="line-507"></span><span>              </span><span class="hs-comment">-- here, but that caused too many uses of `failIfErrsM`.</span><span>
</span><span id="line-508"></span><span>           </span><span class="annot"><span class="annottext">Maybe Coercion
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ZonkT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) ()
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ())
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Zonking unfilled coercion hole&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683011571"><span class="hs-identifier hs-var">hole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>                         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011580"><span class="annot"><a href="#local-6989586621683011580"><span class="hs-identifier hs-var">cv'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ZonkT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.2-38b1/src/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) Id
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a. ZonkM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#liftZonkM"><span class="hs-identifier hs-var">liftZonkM</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id)
-&gt; ZonkM Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkM Id
</span><a href="GHC.Tc.Zonk.TcType.html#zonkCoVar"><span class="hs-identifier hs-var">zonkCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011576"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-510"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html#mkCoVarCo"><span class="hs-identifier hs-type">mkCoVarCo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011580"><span class="hs-identifier hs-type">cv'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-511"></span><span>                             </span><span class="hs-comment">-- This will be an out-of-scope variable, but keeping</span><span>
</span><span id="line-512"></span><span>                             </span><span class="hs-comment">-- this as a coercion hole led to #15787</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_tycomapper"><span class="hs-identifier hs-type">zonk_tycomapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span>
</span><span id="line-515"></span><span id="zonk_tycomapper"><span class="annot"><span class="annottext">zonk_tycomapper :: TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Zonk.Type.html#zonk_tycomapper"><span class="hs-identifier hs-var hs-var">zonk_tycomapper</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#TyCoMapper"><span class="hs-identifier hs-type">TyCoMapper</span></a></span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcm_tyvar :: ZonkEnv -&gt; Id -&gt; TcM Kind
</span><a href="GHC.Core.Type.html#tcm_tyvar"><span class="hs-identifier hs-var">tcm_tyvar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011584"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011584"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683011585"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011585"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind -&gt; ZonkEnv -&gt; TcM Kind
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyVarOcc"><span class="hs-identifier hs-var">zonkTyVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011585"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011584"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_covar :: ZonkEnv -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
</span><a href="GHC.Core.Type.html#tcm_covar"><span class="hs-identifier hs-var">tcm_covar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011587"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011587"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683011588"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011588"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkTcM Coercion
-&gt; ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011588"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011587"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_hole :: ZonkEnv -&gt; CoercionHole -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
</span><a href="GHC.Core.Type.html#tcm_hole"><span class="hs-identifier hs-var">tcm_hole</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011590"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011590"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683011591"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683011591"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ZonkTcM Coercion
-&gt; ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoHole"><span class="hs-identifier hs-var">zonkCoHole</span></a></span><span>   </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683011591"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011590"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycobinder :: forall r.
ZonkEnv -&gt; Id -&gt; ForAllTyFlag -&gt; (ZonkEnv -&gt; Id -&gt; TcM r) -&gt; TcM r
</span><a href="GHC.Core.Type.html#tcm_tycobinder"><span class="hs-identifier hs-var">tcm_tycobinder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011593"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011593"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683011594"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011594"><span class="hs-identifier hs-var">tcv</span></a></span></span><span> </span><span id="local-6989586621683011595"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621683011595"><span class="hs-identifier hs-var">_vis</span></a></span></span><span> </span><span id="local-6989586621683011596"><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM r
</span><a href="#local-6989586621683011596"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; ZonkEnv -&gt; TcM r)
-&gt; ZonkEnv -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; TcM r
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; ZonkEnv -&gt; TcM r
forall (m :: * -&gt; *) a. ZonkT m a -&gt; ZonkEnv -&gt; m a
</span><a href="GHC.Tc.Zonk.Env.html#runZonkT"><span class="hs-identifier hs-var">runZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011593"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; TcM r)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r -&gt; TcM r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-520"></span><span>                     </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; forall r.
   (Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011594"><span class="hs-identifier hs-var">tcv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; (Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-521"></span><span>                     </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011598"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011598"><span class="hs-identifier hs-var">tcv'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
-&gt; (ZonkEnv -&gt; TcM r) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011599"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011599"><span class="hs-identifier hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ZonkEnv -&gt; Id -&gt; TcM r
</span><a href="#local-6989586621683011596"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621683011599"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011598"><span class="hs-identifier hs-var">tcv'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcm_tycon :: TcTyCon -&gt; TcM TcTyCon
</span><a href="GHC.Core.Type.html#tcm_tycon"><span class="hs-identifier hs-var">tcm_tycon</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011601"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011601"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; TcM TcTyCon
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var">zonkTcTyConToTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011601"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-comment">-- Zonk a TyCon by changing a TcTyCon to a regular TyCon</span><span>
</span><span id="line-526"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-type">zonkTcTyConToTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTyCon"><span class="hs-identifier hs-type">TcTyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-527"></span><span id="zonkTcTyConToTyCon"><span class="annot"><span class="annottext">zonkTcTyConToTyCon :: TcTyCon -&gt; TcM TcTyCon
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTyConToTyCon"><span class="hs-identifier hs-var hs-var">zonkTcTyConToTyCon</span></a></span></span><span> </span><span id="local-6989586621683011604"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011604"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTcTyCon"><span class="hs-identifier hs-var">isTcTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011604"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011606"><span class="annot"><a href="#local-6989586621683011606"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcM TyThing
</span><a href="GHC.Tc.Utils.Env.html#tcLookupGlobalOnly"><span class="hs-identifier hs-var">tcLookupGlobalOnly</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011604"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-529"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683011606"><span class="hs-identifier hs-type">thing</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-530"></span><span>                          </span><span class="annot"><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621683011609"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011609"><span class="hs-identifier hs-var">real_tc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; TcM TcTyCon
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011609"><span class="hs-identifier hs-var">real_tc</span></a></span><span>
</span><span id="line-531"></span><span>                          </span><span class="annot"><span class="annottext">TyThing
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM TcTyCon
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkTcTyCon&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcTyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011604"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621683011606"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcTyCon -&gt; TcM TcTyCon
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683011604"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-comment">-- it's already zonked</span><span>
</span><span id="line-533"></span><span>
</span><span id="line-534"></span><span class="annot"><span class="hs-comment">-- | Confused by zonking? See Note [What is zonking?] in &quot;GHC.Tc.Zonk.Type&quot;.</span></span><span>
</span><span id="line-535"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToType"><span class="hs-identifier hs-type">zonkTcTypeToType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-536"></span><span id="zonkTcTypeToType"><span class="annot"><span class="annottext">zonkTcTypeToType :: Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToType"><span class="hs-identifier hs-var hs-var">zonkTcTypeToType</span></a></span></span><span> </span><span id="local-6989586621683011611"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011611"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind -&gt; TcM Kind
forall (m :: * -&gt; *) b. MonadIO m =&gt; ZonkFlexi -&gt; ZonkT m b -&gt; m b
</span><a href="GHC.Tc.Zonk.Env.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind -&gt; TcM Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind -&gt; TcM Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011611"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-type">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span id="zonkScaledTcTypeToTypeX"><span class="annot"><span class="annottext">zonkScaledTcTypeToTypeX :: Scaled Kind -&gt; ZonkTcM (Scaled Kind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypeToTypeX</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621683011615"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011615"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621683011616"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011616"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Scaled Kind
forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind -&gt; Scaled Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Kind -&gt; Scaled Kind)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011615"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-540"></span><span>                                               </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Kind -&gt; Scaled Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkTcM (Scaled Kind)
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011616"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-543"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-type">zonkTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-544"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-type">zonkCoToCo</span></a></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-545"></span><span class="hs-special">(</span><span id="zonkTcTypeToTypeX"><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkTcTypesToTypesX"><span class="annot"><span class="annottext">[Kind] -&gt; ZonkTcM [Kind]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span></span><span class="hs-special">,</span><span> </span><span id="zonkCoToCo"><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
-&gt; (ZonkEnv -&gt; Kind -&gt; TcM Kind, ZonkEnv -&gt; [Kind] -&gt; TcM [Kind],
    ZonkEnv -&gt; Coercion -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion,
    ZonkEnv -&gt; [Coercion] -&gt; TcM [Coercion])
forall (m :: * -&gt; *) env.
Monad m =&gt;
TyCoMapper env m
-&gt; (env -&gt; Kind -&gt; m Kind, env -&gt; [Kind] -&gt; m [Kind],
    env -&gt; Coercion -&gt; m Coercion, env -&gt; [Coercion] -&gt; m [Coercion])
</span><a href="GHC.Core.Type.html#mapTyCoX"><span class="hs-identifier hs-var">mapTyCoX</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoMapper ZonkEnv (IOEnv (Env TcGblEnv TcLclEnv))
</span><a href="GHC.Tc.Zonk.Type.html#zonk_tycomapper"><span class="hs-identifier hs-var">zonk_tycomapper</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-547"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621683011619"><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="#local-6989586621683011619"><span class="hs-identifier hs-var">zty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011620"><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="#local-6989586621683011620"><span class="hs-identifier hs-var">ztys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011621"><span class="annot"><span class="annottext">ZonkEnv -&gt; Coercion -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
</span><a href="#local-6989586621683011621"><span class="hs-identifier hs-var">zco</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Coercion] -&gt; TcM [Coercion]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-548"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM Kind) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM Kind)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; (Kind -&gt; ZonkEnv -&gt; TcM Kind)
-&gt; Kind
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; Kind -&gt; TcM Kind) -&gt; Kind -&gt; ZonkEnv -&gt; TcM Kind
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="#local-6989586621683011619"><span class="hs-identifier hs-var">zty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM [Kind]) -&gt; ZonkTcM [Kind]
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; TcM [Kind]) -&gt; ZonkTcM [Kind])
-&gt; ([Kind] -&gt; ZonkEnv -&gt; TcM [Kind]) -&gt; [Kind] -&gt; ZonkTcM [Kind]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; [Kind] -&gt; TcM [Kind])
-&gt; [Kind] -&gt; ZonkEnv -&gt; TcM [Kind]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="#local-6989586621683011620"><span class="hs-identifier hs-var">ztys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion)
-&gt; ZonkTcM Coercion
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="annot"><span class="annottext">((ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion)
 -&gt; ZonkTcM Coercion)
-&gt; (Coercion -&gt; ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion)
-&gt; Coercion
-&gt; ZonkTcM Coercion
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; Coercion -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion)
-&gt; Coercion -&gt; ZonkEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Coercion -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
</span><a href="#local-6989586621683011621"><span class="hs-identifier hs-var">zco</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-type">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-551"></span><span id="zonkScaledTcTypesToTypesX"><span class="annot"><span class="annottext">zonkScaledTcTypesToTypesX :: [Scaled Kind] -&gt; ZonkTcM [Scaled Kind]
</span><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-var hs-var">zonkScaledTcTypesToTypesX</span></a></span></span><span> </span><span id="local-6989586621683011623"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621683011623"><span class="hs-identifier hs-var">scaled_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-552"></span><span>   </span><span class="annot"><span class="annottext">(Scaled Kind -&gt; ZonkTcM (Scaled Kind))
-&gt; [Scaled Kind] -&gt; ZonkTcM [Scaled Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; ZonkTcM (Scaled Kind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621683011623"><span class="hs-identifier hs-var">scaled_tys</span></a></span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEnvIds"><span class="hs-identifier hs-type">zonkEnvIds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span>
</span><span id="line-556"></span><span id="zonkEnvIds"><span class="annot"><span class="annottext">zonkEnvIds :: ZonkEnv -&gt; TypeEnv
</span><a href="GHC.Tc.Zonk.Type.html#zonkEnvIds"><span class="hs-identifier hs-var hs-var">zonkEnvIds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ze_id_env :: ZonkEnv -&gt; TyCoVarEnv Id
</span><a href="GHC.Tc.Zonk.Env.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011627"><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621683011627"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Name, TyThing)] -&gt; TypeEnv
forall a. [(Name, a)] -&gt; NameEnv a
</span><a href="GHC.Types.Name.Env.html#mkNameEnv"><span class="hs-identifier hs-var">mkNameEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011629"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AnId"><span class="hs-identifier hs-var">AnId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011629"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683011629"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011629"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id -&gt; [Id]
forall {k} (key :: k) elt. UniqFM key elt -&gt; [elt]
</span><a href="GHC.Types.Unique.FM.html#nonDetEltsUFM"><span class="hs-identifier hs-var">nonDetEltsUFM</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoVarEnv Id
</span><a href="#local-6989586621683011627"><span class="hs-identifier hs-var">id_env</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here because we forget the ordering</span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-comment">-- immediately by creating a TypeEnv</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-type">zonkLIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span id="zonkLIdOcc"><span class="annot"><span class="annottext">zonkLIdOcc :: GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var hs-var">zonkLIdOcc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b)
-&gt; GenLocated SrcSpanAnnN a -&gt; f (GenLocated SrcSpanAnnN b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span>
</span><span id="line-563"></span><span>
</span><span id="line-564"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-type">zonkIdOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-565"></span><span class="hs-comment">-- Ids defined in this module should be in the envt;</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- ignore others.  (Actually, data constructors are also</span><span>
</span><span id="line-567"></span><span class="hs-comment">-- not LocalVars, even when locally defined, but that is fine.)</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- (Also foreign-imported things aren't currently in the ZonkEnv;</span><span>
</span><span id="line-569"></span><span class="hs-comment">--  that's ok because they don't need zonking.)</span><span>
</span><span id="line-570"></span><span class="hs-comment">--</span><span>
</span><span id="line-571"></span><span class="hs-comment">-- Actually, Template Haskell works in 'chunks' of declarations, and</span><span>
</span><span id="line-572"></span><span class="hs-comment">-- an earlier chunk won't be in the 'env' that the zonking phase</span><span>
</span><span id="line-573"></span><span class="hs-comment">-- carries around.  Instead it'll be in the tcg_gbl_env, already fully</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- zonked.  There's no point in looking it up there (except for error</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- checking), and it's not conveniently to hand; hence the simple</span><span>
</span><span id="line-576"></span><span class="hs-comment">-- 'orElse' case in the LocalVar branch.</span><span>
</span><span id="line-577"></span><span class="hs-comment">--</span><span>
</span><span id="line-578"></span><span class="hs-comment">-- Even without template splices, in module Main, the checking of</span><span>
</span><span id="line-579"></span><span class="hs-comment">-- 'main' is done as a separate chunk.</span><span>
</span><span id="line-580"></span><span id="zonkIdOcc"><span class="annot"><span class="annottext">zonkIdOcc :: Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var hs-var">zonkIdOcc</span></a></span></span><span> </span><span id="local-6989586621683011636"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011636"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isLocalVar"><span class="hs-identifier hs-var">isLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011636"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-582"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ZonkEnv"><span class="hs-identifier hs-type">ZonkEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#ze_id_env"><span class="hs-identifier hs-var">ze_id_env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011638"><span class="annot"><a href="#local-6989586621683011638"><span class="hs-identifier hs-var">id_env</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ZonkEnv
forall (m :: * -&gt; *). Monad m =&gt; ZonkT m ZonkEnv
</span><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-var">getZonkEnv</span></a></span><span>
</span><span id="line-583"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#lookupVarEnv"><span class="hs-identifier hs-type">lookupVarEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011638"><span class="hs-identifier hs-type">id_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011636"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-type">`orElse`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011636"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-585"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011636"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-586"></span><span>
</span><span id="line-587"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdOccs"><span class="hs-identifier hs-type">zonkIdOccs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-588"></span><span id="zonkIdOccs"><span class="annot"><span class="annottext">zonkIdOccs :: [Id] -&gt; ZonkTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOccs"><span class="hs-identifier hs-var hs-var">zonkIdOccs</span></a></span></span><span> </span><span id="local-6989586621683011641"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011641"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; [Id] -&gt; ZonkTcM [Id]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011641"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span class="hs-comment">-- zonkIdBndr is used *after* typechecking to get the Id's type</span><span>
</span><span id="line-591"></span><span class="hs-comment">-- to its final form.  The TyVarEnv give</span><span>
</span><span id="line-592"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-type">zonkIdBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-593"></span><span id="zonkIdBndrX"><span class="annot"><span class="annottext">zonkIdBndrX :: Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-var hs-var">zonkIdBndrX</span></a></span></span><span> </span><span id="local-6989586621683011643"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011643"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011644"><span class="annot"><a href="#local-6989586621683011644"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011643"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-595"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnv"><span class="hs-identifier hs-type">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011644"><span class="hs-identifier hs-type">id</span></a></span><span>
</span><span id="line-596"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683011644"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-597"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-pragma hs-type">zonkIdBndrX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-type">zonkIdBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-600"></span><span id="zonkIdBndr"><span class="annot"><span class="annottext">zonkIdBndr :: Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var hs-var">zonkIdBndr</span></a></span></span><span> </span><span id="local-6989586621683011647"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011647"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-601"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621683011648"><span class="annot"><a href="#local-6989586621683011648"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621683011649"><span class="annot"><a href="#local-6989586621683011649"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; ZonkTcM (Scaled Kind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Scaled Kind
</span><a href="GHC.Types.Id.html#idScaledType"><span class="hs-identifier hs-var">idScaledType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011647"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#setIdMult"><span class="hs-identifier hs-type">setIdMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Id.html#setIdType"><span class="hs-identifier hs-type">setIdType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011647"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011649"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683011648"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrs"><span class="hs-identifier hs-type">zonkIdBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-605"></span><span id="zonkIdBndrs"><span class="annot"><span class="annottext">zonkIdBndrs :: [Id] -&gt; ZonkTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrs"><span class="hs-identifier hs-var hs-var">zonkIdBndrs</span></a></span></span><span> </span><span id="local-6989586621683011654"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011654"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; [Id] -&gt; ZonkTcM [Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011654"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopBndrs"><span class="hs-identifier hs-type">zonkTopBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.BasicTypes.html#TcId"><span class="hs-identifier hs-type">TcId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-608"></span><span id="zonkTopBndrs"><span class="annot"><span class="annottext">zonkTopBndrs :: [Id] -&gt; TcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTopBndrs"><span class="hs-identifier hs-var hs-var">zonkTopBndrs</span></a></span></span><span> </span><span id="local-6989586621683011655"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011655"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; ZonkTcM [Id] -&gt; TcM [Id]
forall (m :: * -&gt; *) b. MonadIO m =&gt; ZonkFlexi -&gt; ZonkT m b -&gt; m b
</span><a href="GHC.Tc.Zonk.Env.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkTcM [Id] -&gt; TcM [Id]) -&gt; ZonkTcM [Id] -&gt; TcM [Id]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrs"><span class="hs-identifier hs-var">zonkIdBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011655"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-609"></span><span>
</span><span id="line-610"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkFieldOcc"><span class="hs-identifier hs-type">zonkFieldOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span id="zonkFieldOcc"><span class="annot"><span class="annottext">zonkFieldOcc :: FieldOcc GhcTc -&gt; ZonkTcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkFieldOcc"><span class="hs-identifier hs-var hs-var">zonkFieldOcc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span id="local-6989586621683011658"><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621683011658"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011659"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011659"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683011660"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011660"><span class="hs-identifier hs-var">sel</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcTc -&gt; LIdP GhcTc -&gt; FieldOcc GhcTc
forall pass. XCFieldOcc pass -&gt; LIdP pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-var">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621683011658"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Id -&gt; FieldOcc GhcTc)
-&gt; (Id -&gt; GenLocated SrcSpanAnnN Id) -&gt; Id -&gt; FieldOcc GhcTc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Id -&gt; GenLocated SrcSpanAnnN Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011659"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; FieldOcc GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkTcM (FieldOcc GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011660"><span class="hs-identifier hs-var">sel</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-identifier hs-type">zonkEvBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-615"></span><span id="zonkEvBndrsX"><span class="annot"><span class="annottext">zonkEvBndrsX :: [Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-identifier hs-var hs-var">zonkEvBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; [Id] -&gt; ZonkBndrTcM [Id]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span>
</span><span id="line-616"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-pragma hs-type">zonkEvBndrsX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-617"></span><span>
</span><span id="line-618"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrX"><span class="hs-identifier hs-type">zonkEvBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-619"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-620"></span><span id="zonkEvBndrX"><span class="annot"><span class="annottext">zonkEvBndrX :: Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrX"><span class="hs-identifier hs-var hs-var">zonkEvBndrX</span></a></span></span><span> </span><span id="local-6989586621683011664"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011664"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011665"><span class="annot"><a href="#local-6989586621683011665"><span class="hs-identifier hs-var">var'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011664"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-622"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendZonkEnv"><span class="hs-identifier hs-type">extendZonkEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683011665"><span class="hs-identifier hs-type">var'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-623"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683011665"><span class="hs-identifier hs-type">var'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-624"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndr"><span class="hs-pragma hs-type">zonkEvBndr</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndr"><span class="hs-identifier hs-type">zonkEvBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span>
</span><span id="line-627"></span><span class="hs-comment">-- Works for dictionaries and coercions</span><span>
</span><span id="line-628"></span><span class="hs-comment">-- Does not extend the ZonkEnv</span><span>
</span><span id="line-629"></span><span id="zonkEvBndr"><span class="annot"><span class="annottext">zonkEvBndr :: Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndr"><span class="hs-identifier hs-var hs-var">zonkEvBndr</span></a></span></span><span> </span><span id="local-6989586621683011668"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011668"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr_zonkTcTypeToType&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011668"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span class="hs-comment">{-
zonkEvVarOcc :: EvVar -&gt; ZonkTcM EvTerm
zonkEvVarOcc env v
  | isCoVar v
  = EvCoercion &lt;$&gt; zonkCoVarOcc env v
  | otherwise
  = return (EvId $ zonkIdOcc env v)
-}</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrX"><span class="hs-identifier hs-type">zonkCoreBndrX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span>
</span><span id="line-642"></span><span id="zonkCoreBndrX"><span class="annot"><span class="annottext">zonkCoreBndrX :: Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrX</span></a></span></span><span> </span><span id="local-6989586621683011672"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011672"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011672"><span class="hs-identifier hs-var">v</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-var">zonkIdBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011672"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011672"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-645"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrX"><span class="hs-pragma hs-type">zonkCoreBndrX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrsX"><span class="hs-identifier hs-type">zonkCoreBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-648"></span><span id="zonkCoreBndrsX"><span class="annot"><span class="annottext">zonkCoreBndrsX :: [Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrsX"><span class="hs-identifier hs-var hs-var">zonkCoreBndrsX</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; [Id] -&gt; ZonkBndrTcM [Id]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span>
</span><span id="line-649"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrsX"><span class="hs-pragma hs-type">zonkCoreBndrsX</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Inlining ZonkBndrT computations]</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopExpr"><span class="hs-identifier hs-type">zonkTopExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span id="zonkTopExpr"><span class="annot"><span class="annottext">zonkTopExpr :: HsExpr GhcTc -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkTopExpr"><span class="hs-identifier hs-var hs-var">zonkTopExpr</span></a></span></span><span> </span><span id="local-6989586621683011675"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683011675"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
-&gt; TcM (HsExpr GhcTc)
forall (m :: * -&gt; *) b. MonadIO m =&gt; ZonkFlexi -&gt; ZonkT m b -&gt; m b
</span><a href="GHC.Tc.Zonk.Env.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
 -&gt; TcM (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
-&gt; TcM (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683011675"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopLExpr"><span class="hs-identifier hs-type">zonkTopLExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span id="zonkTopLExpr"><span class="annot"><span class="annottext">zonkTopLExpr :: LHsExpr GhcTc -&gt; TcM (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkTopLExpr"><span class="hs-identifier hs-var hs-var">zonkTopLExpr</span></a></span></span><span> </span><span id="local-6989586621683011677"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683011677"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; TcM (LHsExpr GhcTc)
forall (m :: * -&gt; *) b. MonadIO m =&gt; ZonkFlexi -&gt; ZonkT m b -&gt; m b
</span><a href="GHC.Tc.Zonk.Env.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
 -&gt; TcM (LHsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; TcM (LHsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683011677"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTopDecls"><span class="hs-identifier hs-type">zonkTopDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-658"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-659"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-660"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-661"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TypeEnv.html#TypeEnv"><span class="hs-identifier hs-type">TypeEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-662"></span><span>                     </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-663"></span><span>                     </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-664"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-665"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-666"></span><span>                     </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span>    </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span id="zonkTopDecls"><span class="annot"><span class="annottext">zonkTopDecls :: Bag EvBind
-&gt; LHsBinds GhcTc
-&gt; [LRuleDecl GhcTc]
-&gt; [LTcSpecPrag]
-&gt; [LForeignDecl GhcTc]
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
</span><a href="GHC.Tc.Zonk.Type.html#zonkTopDecls"><span class="hs-identifier hs-var hs-var">zonkTopDecls</span></a></span></span><span> </span><span id="local-6989586621683011679"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683011679"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span> </span><span id="local-6989586621683011680"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011680"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621683011681"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621683011681"><span class="hs-identifier hs-var">rules</span></a></span></span><span> </span><span id="local-6989586621683011682"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621683011682"><span class="hs-identifier hs-var">imp_specs</span></a></span></span><span> </span><span id="local-6989586621683011683"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621683011683"><span class="hs-identifier hs-var">fords</span></a></span></span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
forall (m :: * -&gt; *) b. MonadIO m =&gt; ZonkFlexi -&gt; ZonkT m b -&gt; m b
</span><a href="GHC.Tc.Zonk.Env.html#initZonkEnv"><span class="hs-identifier hs-var">initZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#DefaultFlexi"><span class="hs-identifier hs-var">DefaultFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT
   (IOEnv (Env TcGblEnv TcLclEnv))
   (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
    [LTcSpecPrag], [LRuleDecl GhcTc])
 -&gt; TcM
      (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
       [LTcSpecPrag], [LRuleDecl GhcTc]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
-&gt; TcM
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
-&gt; forall r.
   (Bag EvBind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag EvBind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683011679"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">((Bag EvBind
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
        [LTcSpecPrag], [LRuleDecl GhcTc]))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
       [LTcSpecPrag], [LRuleDecl GhcTc]))
-&gt; (Bag EvBind
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
          [LTcSpecPrag], [LRuleDecl GhcTc]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011684"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683011684"><span class="hs-identifier hs-var">ev_binds'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
-&gt; forall r.
   ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011680"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
        [LTcSpecPrag], [LRuleDecl GhcTc]))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
       [LTcSpecPrag], [LRuleDecl GhcTc]))
-&gt; ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
          [LTcSpecPrag], [LRuleDecl GhcTc]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (TypeEnv, Bag EvBind, LHsBinds GhcTc, [LForeignDecl GhcTc],
      [LTcSpecPrag], [LRuleDecl GhcTc])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011686"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011686"><span class="hs-identifier hs-var">binds'</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-671"></span><span>     </span><span class="hs-comment">-- Top level is implicitly recursive</span><span>
</span><span id="line-672"></span><span>  </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011687"><span class="annot"><a href="#local-6989586621683011687"><span class="hs-identifier hs-var">rules'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc] -&gt; ZonkTcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Zonk.Type.html#zonkRules"><span class="hs-identifier hs-var">zonkRules</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621683011681"><span class="hs-identifier hs-var">rules</span></a></span><span>
</span><span id="line-673"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011689"><span class="annot"><a href="#local-6989586621683011689"><span class="hs-identifier hs-var">specs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLTcSpecPrags"><span class="hs-identifier hs-type">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011682"><span class="hs-identifier hs-type">imp_specs</span></a></span><span>
</span><span id="line-674"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011691"><span class="annot"><a href="#local-6989586621683011691"><span class="hs-identifier hs-var">fords'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkForeignExports"><span class="hs-identifier hs-type">zonkForeignExports</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011683"><span class="hs-identifier hs-type">fords</span></a></span><span>
</span><span id="line-675"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011693"><span class="annot"><a href="#local-6989586621683011693"><span class="hs-identifier hs-var">ty_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEnvIds"><span class="hs-identifier hs-type">zonkEnvIds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#getZonkEnv"><span class="hs-identifier hs-type">getZonkEnv</span></a></span><span>
</span><span id="line-676"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011693"><span class="hs-identifier hs-type">ty_env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011684"><span class="hs-identifier hs-type">ev_binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011686"><span class="hs-identifier hs-type">binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011691"><span class="hs-identifier hs-type">fords'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011689"><span class="hs-identifier hs-type">specs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011687"><span class="hs-identifier hs-type">rules'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-680"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-type">zonkLocalBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-681"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span id="zonkLocalBinds"><span class="annot"><span class="annottext">zonkLocalBinds :: HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var hs-var">zonkLocalBinds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span id="local-6989586621683011696"><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621683011696"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc -&gt; HsLocalBinds GhcTc
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
</span><a href="#local-6989586621683011696"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkLocalBinds&quot;</span></span><span> </span><span class="hs-comment">-- Not in typechecker output</span><span>
</span><span id="line-687"></span><span>
</span><span id="line-688"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621683011700"><span class="annot"><span class="annottext">XHsValBinds GhcTc GhcTc
</span><a href="#local-6989586621683011700"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span id="local-6989586621683011703"><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
</span><a href="#local-6989586621683011703"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621683011704"><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621683011704"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011705"><span class="annot"><a href="#local-6989586621683011705"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]))
-&gt; [(RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [(RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">(RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
forall {a}.
(a, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (a, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
</span><a href="#local-6989586621683011706"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcTc)]
[(RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])]
</span><a href="#local-6989586621683011703"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-690"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011700"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011705"><span class="hs-identifier hs-type">new_binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011704"><span class="hs-identifier hs-type">sigs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-692"></span><span>    </span><span id="local-6989586621683011706"><span class="annot"><span class="annottext">go :: (a, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (a, [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)])
</span><a href="#local-6989586621683011706"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683011709"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683011709"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683011710"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011710"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011711"><span class="annot"><a href="#local-6989586621683011711"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRecMonoBinds"><span class="hs-identifier hs-var">zonkRecMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011710"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-694"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011709"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621683011711"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span id="local-6989586621683011713"><span class="annot"><span class="annottext">XHsIPBinds GhcTc GhcTc
</span><a href="#local-6989586621683011713"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span id="local-6989586621683011715"><span class="annot"><span class="annottext">XIPBinds GhcTc
</span><a href="#local-6989586621683011715"><span class="hs-identifier hs-var">dict_binds</span></a></span></span><span> </span><span id="local-6989586621683011716"><span class="annot"><span class="annottext">[LIPBind GhcTc]
</span><a href="#local-6989586621683011716"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-697"></span><span>    </span><span id="local-6989586621683011717"><span class="annot"><a href="#local-6989586621683011717"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated SrcSpanAnnA (IPBind GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (IPBind GhcTc)]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT
   (IOEnv (Env TcGblEnv TcLclEnv))
   [GenLocated SrcSpanAnnA (IPBind GhcTc)]
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv))
      [GenLocated SrcSpanAnnA (IPBind GhcTc)])
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (IPBind GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (IPBind GhcTc)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (IPBind GhcTc)
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (IPBind GhcTc)))
-&gt; [GenLocated SrcSpanAnnA (IPBind GhcTc)]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (IPBind GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IPBind GhcTc -&gt; ZonkTcM (IPBind GhcTc))
-&gt; GenLocated SrcSpanAnnA (IPBind GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (IPBind GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">IPBind GhcTc -&gt; ZonkTcM (IPBind GhcTc)
</span><a href="#local-6989586621683011718"><span class="hs-identifier hs-var">zonk_ip_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcTc]
[GenLocated SrcSpanAnnA (IPBind GhcTc)]
</span><a href="#local-6989586621683011716"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-698"></span><span>    </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="#local-6989586621683011720"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span id="local-6989586621683011720"><span class="annot"><a href="#local-6989586621683011720"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683011717"><span class="hs-identifier hs-type">new_binds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-699"></span><span>    </span><span id="local-6989586621683011722"><span class="annot"><a href="#local-6989586621683011722"><span class="hs-identifier hs-var">new_dict_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-type">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011715"><span class="hs-identifier hs-type">dict_binds</span></a></span><span>
</span><span id="line-700"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011713"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011722"><span class="hs-identifier hs-type">new_dict_binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011717"><span class="hs-identifier hs-type">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-702"></span><span>    </span><span id="local-6989586621683011718"><span class="annot"><span class="annottext">zonk_ip_bind :: IPBind GhcTc -&gt; ZonkTcM (IPBind GhcTc)
</span><a href="#local-6989586621683011718"><span class="hs-identifier hs-var hs-var">zonk_ip_bind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span id="local-6989586621683011727"><span class="annot"><span class="annottext">XCIPBind GhcTc
</span><a href="#local-6989586621683011727"><span class="hs-identifier hs-var">dict_id</span></a></span></span><span> </span><span id="local-6989586621683011728"><span class="annot"><span class="annottext">XRec GhcTc HsIPName
</span><a href="#local-6989586621683011728"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621683011729"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683011729"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683011730"><span class="annot"><a href="#local-6989586621683011730"><span class="hs-identifier hs-var">dict_id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcTc
Id
</span><a href="#local-6989586621683011727"><span class="hs-identifier hs-var">dict_id</span></a></span><span>
</span><span id="line-704"></span><span>             </span><span id="local-6989586621683011731"><span class="annot"><a href="#local-6989586621683011731"><span class="hs-identifier hs-var">e'</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011729"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-705"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011730"><span class="hs-identifier hs-type">dict_id'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011728"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011731"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-708"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRecMonoBinds"><span class="hs-identifier hs-type">zonkRecMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span id="zonkRecMonoBinds"><span class="annot"><span class="annottext">zonkRecMonoBinds :: LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRecMonoBinds"><span class="hs-identifier hs-var hs-var">zonkRecMonoBinds</span></a></span></span><span> </span><span id="local-6989586621683011732"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011732"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-710"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc))
-&gt; ZonkBndrTcM (LHsBinds GhcTc)
forall a.
(a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. MonadFix m =&gt; (a -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">mfix</span></span><span> </span><span class="annot"><span class="annottext">((LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc))
 -&gt; ZonkBndrTcM (LHsBinds GhcTc))
-&gt; (LHsBinds GhcTc -&gt; ZonkBndrTcM (LHsBinds GhcTc))
-&gt; ZonkBndrTcM (LHsBinds GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011733"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011733"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *). [Id] -&gt; ZonkBndrT m ()
</span><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CollectFlag GhcTc -&gt; LHsBinds GhcTc -&gt; [IdP GhcTc]
forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcTc
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011733"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsBinds GhcTc)
-&gt; ZonkBndrTcM (LHsBinds GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsBinds GhcTc)
 -&gt; ZonkBndrTcM (LHsBinds GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsBinds GhcTc)
-&gt; ZonkBndrTcM (LHsBinds GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkMonoBinds"><span class="hs-identifier hs-var">zonkMonoBinds</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011732"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-comment">---------------------------------------------</span><span>
</span><span id="line-715"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMonoBinds"><span class="hs-identifier hs-type">zonkMonoBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span id="zonkMonoBinds"><span class="annot"><span class="annottext">zonkMonoBinds :: LHsBinds GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkMonoBinds"><span class="hs-identifier hs-var hs-var">zonkMonoBinds</span></a></span></span><span> </span><span id="local-6989586621683011737"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011737"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
-&gt; [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc -&gt; ZonkTcM (LHsBind GhcTc)
GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011737"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_lbind"><span class="hs-identifier hs-type">zonk_lbind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-719"></span><span id="zonk_lbind"><span class="annot"><span class="annottext">zonk_lbind :: LHsBind GhcTc -&gt; ZonkTcM (LHsBind GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_lbind"><span class="hs-identifier hs-var hs-var">zonk_lbind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsBindLR GhcTc GhcTc -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc -&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-type">zonk_bind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span id="zonk_bind"><span class="annot"><span class="annottext">zonk_bind :: HsBindLR GhcTc GhcTc -&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var hs-var">zonk_bind</span></a></span></span><span> </span><span id="local-6989586621683011741"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621683011741"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: forall idL idR. HsBindLR idL idR -&gt; LPat idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011744"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683011744"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: forall idL idR. HsBindLR idL idR -&gt; GRHSs idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011746"><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683011746"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-723"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_mult :: forall idL idR. HsBindLR idL idR -&gt; HsMultAnn idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_mult"><span class="hs-identifier hs-var">pat_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011748"><span class="annot"><span class="annottext">HsMultAnn GhcTc
</span><a href="#local-6989586621683011748"><span class="hs-identifier hs-var">mult_ann</span></a></span></span><span>
</span><span id="line-724"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: forall idL idR. HsBindLR idL idR -&gt; XPatBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683011750"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011750"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011751"><span class="annot"><span class="annottext">([CoreTickish], [[CoreTickish]])
</span><a href="#local-6989586621683011751"><span class="hs-identifier hs-var">ticks</span></a></span></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011752"><span class="annot"><a href="#local-6989586621683011752"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkBndrT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-var">don'tBind</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc))
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683011744"><span class="hs-identifier hs-var">pat</span></a></span><span>            </span><span class="hs-comment">-- Env already extended</span><span>
</span><span id="line-726"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011755"><span class="annot"><a href="#local-6989586621683011755"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkGRHSs"><span class="hs-identifier hs-type">zonkGRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011746"><span class="hs-identifier hs-type">grhss</span></a></span><span>
</span><span id="line-727"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011757"><span class="annot"><a href="#local-6989586621683011757"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011750"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011758"><span class="annot"><a href="#local-6989586621683011758"><span class="hs-identifier hs-var">new_mult</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMultAnn"><span class="hs-identifier hs-type">zonkMultAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011748"><span class="hs-identifier hs-type">mult_ann</span></a></span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011741"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011752"><span class="hs-identifier hs-type">new_pat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011755"><span class="hs-identifier hs-type">new_grhss</span></a></span><span>
</span><span id="line-730"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_mult"><span class="hs-identifier hs-var">pat_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011758"><span class="hs-identifier hs-type">new_mult</span></a></span><span>
</span><span id="line-731"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011757"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011751"><span class="hs-identifier hs-type">ticks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: forall idL idR. HsBindLR idL idR -&gt; XVarBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011762"><span class="annot"><span class="annottext">XVarBind GhcTc GhcTc
</span><a href="#local-6989586621683011762"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-734"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_id :: forall idL idR. HsBindLR idL idR -&gt; IdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011764"><span class="annot"><span class="annottext">IdP GhcTc
</span><a href="#local-6989586621683011764"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">var_rhs :: forall idL idR. HsBindLR idL idR -&gt; LHsExpr idR
</span><a href="Language.Haskell.Syntax.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011766"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683011766"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-735"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011767"><span class="annot"><a href="#local-6989586621683011767"><span class="hs-identifier hs-var">new_var</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
Id
</span><a href="#local-6989586621683011764"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-736"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011768"><span class="annot"><a href="#local-6989586621683011768"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011766"><span class="hs-identifier hs-type">expr</span></a></span><span>
</span><span id="line-737"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011762"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-738"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#var_id"><span class="hs-identifier hs-var">var_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011767"><span class="hs-identifier hs-type">new_var</span></a></span><span>
</span><span id="line-739"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#var_rhs"><span class="hs-identifier hs-var">var_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011768"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span id="local-6989586621683011769"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621683011769"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011772"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011772"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011773"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011773"><span class="hs-identifier hs-var">var</span></a></span></span><span>
</span><span id="line-742"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011775"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683011775"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-743"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683011777"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011777"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011778"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621683011778"><span class="hs-identifier hs-var">ticks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011779"><span class="annot"><a href="#local-6989586621683011779"><span class="hs-identifier hs-var">new_var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011773"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-745"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-type">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011777"><span class="hs-identifier hs-type">co_fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011781"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011781"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-746"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011782"><span class="annot"><a href="#local-6989586621683011782"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsExpr GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683011775"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-747"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011769"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011772"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011779"><span class="hs-identifier hs-type">new_var</span></a></span><span>
</span><span id="line-748"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011782"><span class="hs-identifier hs-type">new_ms</span></a></span><span>
</span><span id="line-749"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011781"><span class="hs-identifier hs-type">new_co_fn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011778"><span class="hs-identifier hs-type">ticks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XHsBindsLR"><span class="hs-identifier hs-type">XHsBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abs_tvs :: AbsBinds -&gt; [Id]
</span><a href="GHC.Hs.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011787"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011787"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_vars :: AbsBinds -&gt; [Id]
</span><a href="GHC.Hs.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011789"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011789"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-752"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_ev_binds :: AbsBinds -&gt; [TcEvBinds]
</span><a href="GHC.Hs.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011791"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621683011791"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span>
</span><span id="line-753"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_exports :: AbsBinds -&gt; [ABExport]
</span><a href="GHC.Hs.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011793"><span class="annot"><span class="annottext">[ABExport]
</span><a href="#local-6989586621683011793"><span class="hs-identifier hs-var">exports</span></a></span></span><span>
</span><span id="line-754"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_binds :: AbsBinds -&gt; LHsBinds GhcTc
</span><a href="GHC.Hs.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011795"><span class="annot"><span class="annottext">LHsBinds GhcTc
</span><a href="#local-6989586621683011795"><span class="hs-identifier hs-var">val_binds</span></a></span></span><span>
</span><span id="line-755"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abs_sig :: AbsBinds -&gt; Bool
</span><a href="GHC.Hs.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011797"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683011797"><span class="hs-identifier hs-var">has_sig</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; ZonkTcM (HsBindLR GhcTc GhcTc) -&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImmutableTyVar"><span class="hs-identifier hs-var">isImmutableTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011787"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ZonkTcM (HsBindLR GhcTc GhcTc) -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ZonkTcM (HsBindLR GhcTc GhcTc) -&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-757"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrTcM [Id]
-&gt; forall r.
   ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span>    </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011787"><span class="hs-identifier hs-var">tyvars</span></a></span><span>  </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Id] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
 -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ([Id] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011800"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011800"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-758"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrTcM [Id]
-&gt; forall r.
   ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span>    </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011789"><span class="hs-identifier hs-var">evs</span></a></span><span>     </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Id] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
 -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ([Id] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011801"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683011801"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-759"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [TcEvBinds]
-&gt; forall r.
   ([TcEvBinds] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TcEvBinds]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [TcEvBinds]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var">zonkTcEvBinds_s</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621683011791"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([TcEvBinds] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
 -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ([TcEvBinds] -&gt; ZonkTcM (HsBindLR GhcTc GhcTc))
-&gt; ZonkTcM (HsBindLR GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011803"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621683011803"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683011804"><span class="annot"><a href="#local-6989586621683011804"><span class="hs-identifier hs-var">new_val_bind</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011805"><span class="annot"><a href="#local-6989586621683011805"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
forall a.
(a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. MonadFix m =&gt; (a -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">mfix</span></span><span> </span><span class="annot"><span class="annottext">((([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
-&gt; (([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span id="local-6989586621683011806"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011806"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[ABExport]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-761"></span><span>       </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
-&gt; forall r.
   (() -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *). [Id] -&gt; ZonkBndrT m ()
</span><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ())
-&gt; [Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcTc -&gt; LHsBinds GhcTc -&gt; [IdP GhcTc]
forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcTc
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011806"><span class="hs-identifier hs-var">new_val_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((()
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
-&gt; (()
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport]))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     ([GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)], [ABExport])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-762"></span><span>       </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011807"><span class="annot"><a href="#local-6989586621683011807"><span class="hs-identifier hs-var">new_val_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
-&gt; [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621683011808"><span class="hs-identifier hs-var">zonk_val_bind</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcTc
[GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)]
</span><a href="#local-6989586621683011795"><span class="hs-identifier hs-var">val_binds</span></a></span><span>
</span><span id="line-763"></span><span>          </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011809"><span class="annot"><a href="#local-6989586621683011809"><span class="hs-identifier hs-var">new_exports</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621683011810"><span class="hs-identifier hs-type">zonk_export</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011793"><span class="hs-identifier hs-type">exports</span></a></span><span>
</span><span id="line-764"></span><span>          </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011807"><span class="hs-identifier hs-type">new_val_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011809"><span class="hs-identifier hs-type">new_exports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-765"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-766"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XHsBindsLR"><span class="hs-identifier hs-type">XHsBindsLR</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-767"></span><span>                </span><span class="annot"><a href="GHC.Hs.Binds.html#AbsBinds"><span class="hs-identifier hs-type">AbsBinds</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_tvs"><span class="hs-identifier hs-var">abs_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011800"><span class="hs-identifier hs-type">new_tyvars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_ev_vars"><span class="hs-identifier hs-var">abs_ev_vars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011801"><span class="hs-identifier hs-type">new_evs</span></a></span><span>
</span><span id="line-768"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_ev_binds"><span class="hs-identifier hs-var">abs_ev_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011803"><span class="hs-identifier hs-type">new_ev_binds</span></a></span><span>
</span><span id="line-769"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_exports"><span class="hs-identifier hs-var">abs_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011805"><span class="hs-identifier hs-type">new_exports</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_binds"><span class="hs-identifier hs-var">abs_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011804"><span class="hs-identifier hs-type">new_val_bind</span></a></span><span>
</span><span id="line-770"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abs_sig"><span class="hs-identifier hs-var">abs_sig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011797"><span class="hs-identifier hs-type">has_sig</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-772"></span><span>    </span><span id="local-6989586621683011808"><span class="annot"><span class="annottext">zonk_val_bind :: GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621683011808"><span class="hs-identifier hs-var hs-var">zonk_val_bind</span></a></span></span><span> </span><span id="local-6989586621683011811"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621683011811"><span class="hs-identifier hs-var">lbind</span></a></span></span><span>
</span><span id="line-773"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683011797"><span class="hs-identifier hs-var">has_sig</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011812"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683011812"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011813"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621683011813"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011814"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011814"><span class="hs-identifier hs-var">mloc</span></a></span></span><span> </span><span id="local-6989586621683011815"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011815"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011816"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683011816"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-776"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: forall idL idR. HsBindLR idL idR -&gt; XFunBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683011817"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011817"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683011818"><span class="annot"><span class="annottext">[CoreTickish]
</span><a href="#local-6989586621683011818"><span class="hs-identifier hs-var">ticks</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621683011811"><span class="hs-identifier hs-var">lbind</span></a></span><span>
</span><span id="line-777"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011819"><span class="annot"><a href="#local-6989586621683011819"><span class="hs-identifier hs-var">new_mono_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *). Monad m =&gt; (Kind -&gt; m Kind) -&gt; Id -&gt; m Id
</span><a href="GHC.Types.Var.html#updateIdTypeAndMultM"><span class="hs-identifier hs-var">updateIdTypeAndMultM</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011815"><span class="hs-identifier hs-var">mono_id</span></a></span><span>
</span><span id="line-778"></span><span>                            </span><span class="hs-comment">-- Specifically /not/ zonkIdBndr; we do not want to</span><span>
</span><span id="line-779"></span><span>                            </span><span class="hs-comment">-- complain about a representation-polymorphic binder</span><span>
</span><span id="line-780"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-type">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011817"><span class="hs-identifier hs-type">co_fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011820"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011820"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-781"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011821"><span class="annot"><a href="#local-6989586621683011821"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsExpr GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683011816"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-782"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011812"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-783"></span><span>             </span><span class="annot"><a href="#local-6989586621683011813"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011814"><span class="hs-identifier hs-type">mloc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011819"><span class="hs-identifier hs-type">new_mono_id</span></a></span><span>
</span><span id="line-784"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011821"><span class="hs-identifier hs-type">new_ms</span></a></span><span>
</span><span id="line-785"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011820"><span class="hs-identifier hs-type">new_co_fn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683011818"><span class="hs-identifier hs-type">ticks</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-786"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-787"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc -&gt; ZonkTcM (LHsBind GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_lbind"><span class="hs-identifier hs-var">zonk_lbind</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBind GhcTc
GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
</span><a href="#local-6989586621683011811"><span class="hs-identifier hs-var">lbind</span></a></span><span>   </span><span class="hs-comment">-- The normal case</span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span>    </span><span class="annot"><a href="#local-6989586621683011810"><span class="hs-identifier hs-type">zonk_export</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#ABExport"><span class="hs-identifier hs-type">ABExport</span></a></span><span>
</span><span id="line-790"></span><span>    </span><span id="local-6989586621683011810"><span class="annot"><span class="annottext">zonk_export :: ABExport -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ABExport
</span><a href="#local-6989586621683011810"><span class="hs-identifier hs-var hs-var">zonk_export</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">abe_wrap :: ABExport -&gt; HsWrapper
</span><a href="GHC.Hs.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011824"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011824"><span class="hs-identifier hs-var">wrap</span></a></span></span><span>
</span><span id="line-791"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_poly :: ABExport -&gt; Id
</span><a href="GHC.Hs.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011826"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011826"><span class="hs-identifier hs-var">poly_id</span></a></span></span><span>
</span><span id="line-792"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_mono :: ABExport -&gt; Id
</span><a href="GHC.Hs.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011828"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011828"><span class="hs-identifier hs-var">mono_id</span></a></span></span><span>
</span><span id="line-793"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">abe_prags :: ABExport -&gt; TcSpecPrags
</span><a href="GHC.Hs.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011830"><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="#local-6989586621683011830"><span class="hs-identifier hs-var">prags</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683011831"><span class="annot"><a href="#local-6989586621683011831"><span class="hs-identifier hs-var">new_poly_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011826"><span class="hs-identifier hs-var">poly_id</span></a></span><span>
</span><span id="line-795"></span><span>             </span><span id="local-6989586621683011832"><span class="annot"><a href="#local-6989586621683011832"><span class="hs-identifier hs-var">new_wrap</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-type">don'tBind</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011824"><span class="hs-identifier hs-type">wrap</span></a></span><span>
</span><span id="line-796"></span><span>             </span><span id="local-6989586621683011833"><span class="annot"><a href="#local-6989586621683011833"><span class="hs-identifier hs-var">new_prags</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSpecPrags"><span class="hs-identifier hs-type">zonkSpecPrags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011830"><span class="hs-identifier hs-type">prags</span></a></span><span>
</span><span id="line-797"></span><span>             </span><span id="local-6989586621683011835"><span class="annot"><a href="#local-6989586621683011835"><span class="hs-identifier hs-var">new_mono_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-type">zonkIdOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011828"><span class="hs-identifier hs-type">mono_id</span></a></span><span>
</span><span id="line-798"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#ABE"><span class="hs-identifier hs-type">ABE</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abe_wrap"><span class="hs-identifier hs-var">abe_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011832"><span class="hs-identifier hs-type">new_wrap</span></a></span><span>
</span><span id="line-799"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abe_poly"><span class="hs-identifier hs-var">abe_poly</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011831"><span class="hs-identifier hs-type">new_poly_id</span></a></span><span>
</span><span id="line-800"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abe_mono"><span class="hs-identifier hs-var">abe_mono</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011835"><span class="hs-identifier hs-type">new_mono_id</span></a></span><span>
</span><span id="line-801"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#abe_prags"><span class="hs-identifier hs-var">abe_prags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011833"><span class="hs-identifier hs-type">new_prags</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>
</span><span id="line-803"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_bind"><span class="hs-identifier hs-var">zonk_bind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span id="local-6989586621683011837"><span class="annot"><span class="annottext">XPatSynBind GhcTc GhcTc
</span><a href="#local-6989586621683011837"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683011838"><span class="annot"><span class="annottext">bind :: PatSynBind GhcTc GhcTc
</span><a href="#local-6989586621683011838"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011841"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011841"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011842"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011842"><span class="hs-identifier hs-var">id</span></a></span></span><span>
</span><span id="line-804"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011844"><span class="annot"><span class="annottext">HsPatSynDetails GhcTc
</span><a href="#local-6989586621683011844"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-805"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011846"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683011846"><span class="hs-identifier hs-var">lpat</span></a></span></span><span>
</span><span id="line-806"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011848"><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="#local-6989586621683011848"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011849"><span class="annot"><a href="#local-6989586621683011849"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011842"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-808"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-type">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011846"><span class="hs-identifier hs-type">lpat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011850"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621683011850"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-809"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011851"><span class="annot"><a href="#local-6989586621683011851"><span class="hs-identifier hs-var">details'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcTc -&gt; ZonkTcM (HsPatSynDetails GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcTc
</span><a href="#local-6989586621683011844"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-810"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011853"><span class="annot"><a href="#local-6989586621683011853"><span class="hs-identifier hs-var">dir'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDir"><span class="hs-identifier hs-type">zonkPatSynDir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011848"><span class="hs-identifier hs-type">dir</span></a></span><span>
</span><span id="line-811"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011837"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-812"></span><span>                  </span><span class="annot"><a href="#local-6989586621683011838"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011841"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011849"><span class="hs-identifier hs-type">id'</span></a></span><span>
</span><span id="line-813"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011851"><span class="hs-identifier hs-type">details'</span></a></span><span>
</span><span id="line-814"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011850"><span class="hs-identifier hs-type">lpat'</span></a></span><span>
</span><span id="line-815"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011853"><span class="hs-identifier hs-type">dir'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-816"></span><span>
</span><span id="line-817"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMultAnn"><span class="hs-identifier hs-type">zonkMultAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span id="zonkMultAnn"><span class="annot"><span class="annottext">zonkMultAnn :: HsMultAnn GhcTc -&gt; ZonkTcM (HsMultAnn GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkMultAnn"><span class="hs-identifier hs-var hs-var">zonkMultAnn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-type">HsNoMultAnn</span></a></span><span> </span><span id="local-6989586621683011856"><span class="annot"><span class="annottext">XNoMultAnn GhcTc
</span><a href="#local-6989586621683011856"><span class="hs-identifier hs-var">mult</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011857"><span class="annot"><a href="#local-6989586621683011857"><span class="hs-identifier hs-var">mult'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XNoMultAnn GhcTc
</span><a href="#local-6989586621683011856"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-820"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-type">HsNoMultAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011857"><span class="hs-identifier hs-type">mult'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-821"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMultAnn"><span class="hs-identifier hs-var">zonkMultAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPct1Ann"><span class="hs-identifier hs-type">HsPct1Ann</span></a></span><span> </span><span id="local-6989586621683011859"><span class="annot"><span class="annottext">XPct1Ann GhcTc
</span><a href="#local-6989586621683011859"><span class="hs-identifier hs-var">mult</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011860"><span class="annot"><a href="#local-6989586621683011860"><span class="hs-identifier hs-var">mult'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XPct1Ann GhcTc
</span><a href="#local-6989586621683011859"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-823"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPct1Ann"><span class="hs-identifier hs-type">HsPct1Ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011860"><span class="hs-identifier hs-type">mult'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-824"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMultAnn"><span class="hs-identifier hs-var">zonkMultAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span id="local-6989586621683011862"><span class="annot"><span class="annottext">XMultAnn GhcTc
</span><a href="#local-6989586621683011862"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621683011863"><span class="annot"><span class="annottext">LHsType (NoGhcTc GhcTc)
</span><a href="#local-6989586621683011863"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011864"><span class="annot"><a href="#local-6989586621683011864"><span class="hs-identifier hs-var">mult'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
XMultAnn GhcTc
</span><a href="#local-6989586621683011862"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-826"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011864"><span class="hs-identifier hs-type">mult'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011863"><span class="hs-identifier hs-type">hs_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDetails"><span class="hs-identifier hs-type">zonkPatSynDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-829"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span id="zonkPatSynDetails"><span class="annot"><span class="annottext">zonkPatSynDetails :: HsPatSynDetails GhcTc -&gt; ZonkTcM (HsPatSynDetails GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDetails"><span class="hs-identifier hs-var hs-var">zonkPatSynDetails</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683011866"><span class="annot"><span class="annottext">[LIdP GhcTc]
</span><a href="#local-6989586621683011866"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-831"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Void]
-&gt; [GenLocated SrcSpanAnnN Id]
-&gt; HsConDetails
     Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc]
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnN Id]
 -&gt; HsConDetails
      Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv)) [GenLocated SrcSpanAnnN Id]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (HsConDetails
        Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id))
-&gt; [GenLocated SrcSpanAnnN Id]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv)) [GenLocated SrcSpanAnnN Id]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcTc]
[GenLocated SrcSpanAnnN Id]
</span><a href="#local-6989586621683011866"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-832"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621683011869"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621683011869"><span class="hs-identifier hs-var">a1</span></a></span></span><span> </span><span id="local-6989586621683011870"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621683011870"><span class="hs-identifier hs-var">a2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id
-&gt; GenLocated SrcSpanAnnN Id
-&gt; HsConDetails
     Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc]
forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Id
 -&gt; GenLocated SrcSpanAnnN Id
 -&gt; HsConDetails
      Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
-&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnN Id
      -&gt; HsConDetails
           Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
GenLocated SrcSpanAnnN Id
</span><a href="#local-6989586621683011869"><span class="hs-identifier hs-var">a1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT
  (IOEnv (Env TcGblEnv TcLclEnv))
  (GenLocated SrcSpanAnnN Id
   -&gt; HsConDetails
        Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
-&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (HsConDetails
        Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
GenLocated SrcSpanAnnN Id
</span><a href="#local-6989586621683011870"><span class="hs-identifier hs-var">a2</span></a></span><span>
</span><span id="line-834"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDetails"><span class="hs-identifier hs-var">zonkPatSynDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621683011872"><span class="annot"><span class="annottext">[RecordPatSynField GhcTc]
</span><a href="#local-6989586621683011872"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcTc]
-&gt; HsConDetails
     Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc]
forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="annot"><span class="annottext">([RecordPatSynField GhcTc]
 -&gt; HsConDetails
      Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [RecordPatSynField GhcTc]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (HsConDetails
        Void (GenLocated SrcSpanAnnN Id) [RecordPatSynField GhcTc])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(RecordPatSynField GhcTc
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (RecordPatSynField GhcTc))
-&gt; [RecordPatSynField GhcTc]
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [RecordPatSynField GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">RecordPatSynField GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (RecordPatSynField GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPatSynField"><span class="hs-identifier hs-var">zonkPatSynField</span></a></span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcTc]
</span><a href="#local-6989586621683011872"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynField"><span class="hs-identifier hs-type">zonkPatSynField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span id="zonkPatSynField"><span class="annot"><span class="annottext">zonkPatSynField :: RecordPatSynField GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (RecordPatSynField GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPatSynField"><span class="hs-identifier hs-var hs-var">zonkPatSynField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span id="local-6989586621683011875"><span class="annot"><span class="annottext">FieldOcc GhcTc
</span><a href="#local-6989586621683011875"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683011876"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621683011876"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-839"></span><span>  </span><span class="annot"><span class="annottext">FieldOcc GhcTc -&gt; LIdP GhcTc -&gt; RecordPatSynField GhcTc
FieldOcc GhcTc
-&gt; GenLocated SrcSpanAnnN Id -&gt; RecordPatSynField GhcTc
forall pass. FieldOcc pass -&gt; LIdP pass -&gt; RecordPatSynField pass
</span><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-var">RecordPatSynField</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcTc
 -&gt; GenLocated SrcSpanAnnN Id -&gt; RecordPatSynField GhcTc)
-&gt; ZonkTcM (FieldOcc GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnN Id -&gt; RecordPatSynField GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc -&gt; ZonkTcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc
</span><a href="#local-6989586621683011875"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT
  (IOEnv (Env TcGblEnv TcLclEnv))
  (GenLocated SrcSpanAnnN Id -&gt; RecordPatSynField GhcTc)
-&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (RecordPatSynField GhcTc)
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
GenLocated SrcSpanAnnN Id
</span><a href="#local-6989586621683011876"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDir"><span class="hs-identifier hs-type">zonkPatSynDir</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-842"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span id="zonkPatSynDir"><span class="annot"><span class="annottext">zonkPatSynDir :: HsPatSynDir GhcTc -&gt; ZonkTcM (HsPatSynDir GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDir"><span class="hs-identifier hs-var hs-var">zonkPatSynDir</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc -&gt; ZonkTcM (HsPatSynDir GhcTc)
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span>
</span><span id="line-844"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc -&gt; ZonkTcM (HsPatSynDir GhcTc)
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcTc
forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span>
</span><span id="line-845"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPatSynDir"><span class="hs-identifier hs-var">zonkPatSynDir</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span id="local-6989586621683011880"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683011880"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsPatSynDir GhcTc
MatchGroup GhcTc (LocatedA (HsExpr GhcTc)) -&gt; HsPatSynDir GhcTc
forall id. MatchGroup id (LHsExpr id) -&gt; HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-var">ExplicitBidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">(MatchGroup GhcTc (LocatedA (HsExpr GhcTc)) -&gt; HsPatSynDir GhcTc)
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsExpr GhcTc)))
-&gt; ZonkTcM (HsPatSynDir GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsExpr GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683011880"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSpecPrags"><span class="hs-identifier hs-type">zonkSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#TcSpecPrags"><span class="hs-identifier hs-type">TcSpecPrags</span></a></span><span>
</span><span id="line-848"></span><span id="zonkSpecPrags"><span class="annot"><span class="annottext">zonkSpecPrags :: TcSpecPrags -&gt; ZonkTcM TcSpecPrags
</span><a href="GHC.Tc.Zonk.Type.html#zonkSpecPrags"><span class="hs-identifier hs-var hs-var">zonkSpecPrags</span></a></span></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="GHC.Hs.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcSpecPrags -&gt; ZonkTcM TcSpecPrags
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TcSpecPrags
</span><a href="GHC.Hs.Binds.html#IsDefaultMethod"><span class="hs-identifier hs-var">IsDefaultMethod</span></a></span><span>
</span><span id="line-849"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSpecPrags"><span class="hs-identifier hs-var">zonkSpecPrags</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrags"><span class="hs-identifier hs-type">SpecPrags</span></a></span><span> </span><span id="local-6989586621683011883"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621683011883"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011884"><span class="annot"><a href="#local-6989586621683011884"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag] -&gt; ZonkTcM [LTcSpecPrag]
</span><a href="GHC.Tc.Zonk.Type.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var">zonkLTcSpecPrags</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621683011883"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-850"></span><span>                                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrags"><span class="hs-identifier hs-type">SpecPrags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011884"><span class="hs-identifier hs-type">ps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLTcSpecPrags"><span class="hs-identifier hs-type">zonkLTcSpecPrags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Binds.html#LTcSpecPrag"><span class="hs-identifier hs-type">LTcSpecPrag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-853"></span><span id="zonkLTcSpecPrags"><span class="annot"><span class="annottext">zonkLTcSpecPrags :: [LTcSpecPrag] -&gt; ZonkTcM [LTcSpecPrag]
</span><a href="GHC.Tc.Zonk.Type.html#zonkLTcSpecPrags"><span class="hs-identifier hs-var hs-var">zonkLTcSpecPrags</span></a></span></span><span> </span><span id="local-6989586621683011885"><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621683011885"><span class="hs-identifier hs-var">ps</span></a></span></span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LTcSpecPrag -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) LTcSpecPrag)
-&gt; [LTcSpecPrag] -&gt; ZonkTcM [LTcSpecPrag]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LTcSpecPrag -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) LTcSpecPrag
forall {l}.
GenLocated l TcSpecPrag
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated l TcSpecPrag)
</span><a href="#local-6989586621683011886"><span class="hs-identifier hs-var">zonk_prag</span></a></span><span> </span><span class="annot"><span class="annottext">[LTcSpecPrag]
</span><a href="#local-6989586621683011885"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-856"></span><span>    </span><span id="local-6989586621683011886"><span class="annot"><span class="annottext">zonk_prag :: GenLocated l TcSpecPrag
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (GenLocated l TcSpecPrag)
</span><a href="#local-6989586621683011886"><span class="hs-identifier hs-var hs-var">zonk_prag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011892"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621683011892"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrag"><span class="hs-identifier hs-type">SpecPrag</span></a></span><span> </span><span id="local-6989586621683011894"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011894"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621683011895"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011895"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621683011896"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621683011896"><span class="hs-identifier hs-var">inl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011897"><span class="annot"><a href="#local-6989586621683011897"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkBndrT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-var">don'tBind</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683011895"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-858"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011898"><span class="annot"><a href="#local-6989586621683011898"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-type">zonkIdOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011894"><span class="hs-identifier hs-type">id</span></a></span><span>
</span><span id="line-859"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011892"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#SpecPrag"><span class="hs-identifier hs-type">SpecPrag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011898"><span class="hs-identifier hs-type">id'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011897"><span class="hs-identifier hs-type">co_fn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011896"><span class="hs-identifier hs-type">inl</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-860"></span><span>
</span><span id="line-861"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Match-GRHSs]{Match and GRHSs}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span id="local-6989586621683010305"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-type">zonkMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010305"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-870"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010305"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010305"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-871"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010305"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010305"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-873"></span><span id="zonkMatchGroup"><span class="annot"><span class="annottext">zonkMatchGroup :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var hs-var">zonkMatchGroup</span></a></span></span><span> </span><span id="local-6989586621683011909"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011909"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011912"><span class="annot"><span class="annottext">Anno
  [GenLocated
     (Anno (Match GhcTc (LocatedA (body GhcTc))))
     (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621683011912"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683011913"><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621683011913"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-874"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: forall p body. MatchGroup p body -&gt; XMG p body
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-type">MatchGroupTc</span></a></span><span> </span><span id="local-6989586621683011916"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621683011916"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span id="local-6989586621683011917"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011917"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span> </span><span id="local-6989586621683011918"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621683011918"><span class="hs-identifier hs-var">origin</span></a></span></span><span>
</span><span id="line-875"></span><span>                         </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011919"><span class="annot"><a href="#local-6989586621683011919"><span class="hs-identifier hs-var">ms'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated
         (Anno (Match GhcTc (LocatedA (body GhcTc))))
         (Match GhcTc (LocatedA (body GhcTc)))))
-&gt; [GenLocated
      (Anno (Match GhcTc (LocatedA (body GhcTc))))
      (Match GhcTc (LocatedA (body GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        (Anno (Match GhcTc (LocatedA (body GhcTc))))
        (Match GhcTc (LocatedA (body GhcTc)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; LMatch GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (LMatch GhcTc (LocatedA (body GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; LMatch GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (LMatch GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatch"><span class="hs-identifier hs-var">zonkMatch</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011909"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   (Anno (Match GhcTc (LocatedA (body GhcTc))))
   (Match GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621683011913"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-877"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011921"><span class="annot"><a href="#local-6989586621683011921"><span class="hs-identifier hs-var">arg_tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypesToTypesX"><span class="hs-identifier hs-type">zonkScaledTcTypesToTypesX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011916"><span class="hs-identifier hs-type">arg_tys</span></a></span><span>
</span><span id="line-878"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683011922"><span class="annot"><a href="#local-6989586621683011922"><span class="hs-identifier hs-var">res_ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011917"><span class="hs-identifier hs-type">res_ty</span></a></span><span>
</span><span id="line-879"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011912"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011919"><span class="hs-identifier hs-type">ms'</span></a></span><span>
</span><span id="line-880"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-type">MatchGroupTc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011921"><span class="hs-identifier hs-type">arg_tys'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011922"><span class="hs-identifier hs-type">res_ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011918"><span class="hs-identifier hs-type">origin</span></a></span><span>
</span><span id="line-881"></span><span>                     </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span id="local-6989586621683010353"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMatch"><span class="hs-identifier hs-type">zonkMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010353"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-884"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010353"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010353"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-885"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010353"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010353"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-887"></span><span id="zonkMatch"><span class="annot"><span class="annottext">zonkMatch :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; LMatch GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (LMatch GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatch"><span class="hs-identifier hs-var hs-var">zonkMatch</span></a></span></span><span> </span><span id="local-6989586621683011930"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011930"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011931"><span class="annot"><span class="annottext">Anno (Match GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621683011931"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683011932"><span class="annot"><span class="annottext">match :: Match GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011932"><span class="hs-identifier hs-var">match</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; XRec p [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011935"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621683011935"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683011936"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621683011936"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-888"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683011938"><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011938"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-889"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated SrcSpanAnnA (Pat GhcTc)]
-&gt; forall r.
   ([GenLocated SrcSpanAnnA (Pat GhcTc)]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LPat GhcTc] -&gt; ZonkBndrTcM [LPat GhcTc]
forall (f :: * -&gt; *).
Traversable f =&gt;
f (LPat GhcTc) -&gt; ZonkBndrTcM (f (LPat GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621683011936"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated SrcSpanAnnA (Pat GhcTc)]
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       (LMatch GhcTc (LocatedA (body GhcTc))))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (LMatch GhcTc (LocatedA (body GhcTc))))
-&gt; ([GenLocated SrcSpanAnnA (Pat GhcTc)]
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         (LMatch GhcTc (LocatedA (body GhcTc))))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (LMatch GhcTc (LocatedA (body GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011940"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621683011940"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011941"><span class="annot"><a href="#local-6989586621683011941"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHSs GhcTc (LocatedA (body GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHSs GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkGRHSs"><span class="hs-identifier hs-var">zonkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011930"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011938"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-891"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011931"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683011932"><span class="hs-identifier hs-type">match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011935"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011940"><span class="hs-identifier hs-type">new_pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683011941"><span class="hs-identifier hs-type">new_grhss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-892"></span><span>
</span><span id="line-893"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-894"></span><span id="local-6989586621683010288"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkGRHSs"><span class="hs-identifier hs-type">zonkGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010288"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-895"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010288"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010288"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010288"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010288"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span id="zonkGRHSs"><span class="annot"><span class="annottext">zonkGRHSs :: forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; GRHSs GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHSs GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkGRHSs"><span class="hs-identifier hs-var hs-var">zonkGRHSs</span></a></span></span><span> </span><span id="local-6989586621683011951"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011951"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span id="local-6989586621683011953"><span class="annot"><span class="annottext">XCGRHSs GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011953"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683011954"><span class="annot"><span class="annottext">[LGRHS GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621683011954"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span id="local-6989586621683011955"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683011955"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-900"></span><span>  </span><span class="annot"><span class="annottext">ZonkBndrTcM (HsLocalBinds GhcTc)
-&gt; forall r.
   (HsLocalBinds GhcTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683011955"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsLocalBinds GhcTc
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       (GRHSs GhcTc (LocatedA (body GhcTc))))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GRHSs GhcTc (LocatedA (body GhcTc))))
-&gt; (HsLocalBinds GhcTc
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         (GRHSs GhcTc (LocatedA (body GhcTc))))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GRHSs GhcTc (LocatedA (body GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011956"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683011956"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-901"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011957"><span class="annot"><a href="#local-6989586621683011957"><span class="hs-identifier hs-var">new_grhss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))))
-&gt; [GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GRHS GhcTc (LocatedA (body GhcTc))
 -&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc))))
-&gt; GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc))))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621683011958"><span class="hs-identifier hs-var">zonk_grhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LocatedA (body GhcTc))]
[GenLocated EpAnnCO (GRHS GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621683011954"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-902"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011953"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011957"><span class="hs-identifier hs-type">new_grhss</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011956"><span class="hs-identifier hs-type">new_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-904"></span><span>     </span><span id="local-6989586621683011958"><span class="annot"><span class="annottext">zonk_grhs :: GRHS GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621683011958"><span class="hs-identifier hs-var hs-var">zonk_grhs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621683011960"><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011960"><span class="hs-identifier hs-var">xx</span></a></span></span><span> </span><span id="local-6989586621683011961"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683011961"><span class="hs-identifier hs-var">guarded</span></a></span></span><span> </span><span id="local-6989586621683011962"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683011962"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-905"></span><span>       </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; forall r.
   ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
[LStmt GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="#local-6989586621683011961"><span class="hs-identifier hs-var">guarded</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
  -&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc))))
 -&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc))))
-&gt; ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc))))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683011964"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683011964"><span class="hs-identifier hs-var">new_guarded</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-906"></span><span>         </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (body GhcTc))
-&gt; [GuardLStmt GhcTc]
-&gt; LocatedA (body GhcTc)
-&gt; GRHS GhcTc (LocatedA (body GhcTc))
forall p body.
XCGRHS p body -&gt; [GuardLStmt p] -&gt; body -&gt; GRHS p body
</span><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-var">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011960"><span class="hs-identifier hs-var">xx</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683011964"><span class="hs-identifier hs-var">new_guarded</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedA (body GhcTc) -&gt; GRHS GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkTcM (LocatedA (body GhcTc))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (body GhcTc)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683011951"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683011962"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-907"></span><span>
</span><span id="line-908"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-HsExpr]{Running a zonkitution over a TypeCheckedExpr}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExprs"><span class="hs-identifier hs-type">zonkLExprs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-917"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-918"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span id="zonkLExprs"><span class="annot"><span class="annottext">zonkLExprs :: [LHsExpr GhcTc] -&gt; ZonkTcM [LHsExpr GhcTc]
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExprs"><span class="hs-identifier hs-var hs-var">zonkLExprs</span></a></span></span><span> </span><span id="local-6989586621683011966"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621683011966"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LocatedA (HsExpr GhcTc)]
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [LocatedA (HsExpr GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621683011966"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-921"></span><span id="zonkLExpr"><span class="annot"><span class="annottext">zonkLExpr :: LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var hs-var">zonkLExpr</span></a></span></span><span>  </span><span id="local-6989586621683011967"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683011967"><span class="hs-identifier hs-var">expr</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621683011967"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span id="zonkExpr"><span class="annot"><span class="annottext">zonkExpr :: HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var hs-var">zonkExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span id="local-6989586621683011969"><span class="annot"><span class="annottext">XVar GhcTc
</span><a href="#local-6989586621683011969"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683011970"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683011970"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683011971"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011971"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; SDoc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe DataCon -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isNothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Maybe DataCon
</span><a href="GHC.Types.Id.html#isDataConId_maybe"><span class="hs-identifier hs-var">isDataConId_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011971"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011971"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-925"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683011974"><span class="annot"><a href="#local-6989586621683011974"><span class="hs-identifier hs-var">id'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683011971"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-926"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011969"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011970"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011974"><span class="hs-identifier hs-type">id'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-927"></span><span>
</span><span id="line-928"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span id="local-6989586621683011976"><span class="annot"><span class="annottext">XUnboundVar GhcTc
</span><a href="#local-6989586621683011976"><span class="hs-identifier hs-var">her</span></a></span></span><span> </span><span id="local-6989586621683011977"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683011977"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683011978"><span class="annot"><a href="#local-6989586621683011978"><span class="hs-identifier hs-var">her'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HoleExprRef -&gt; ZonkTcM HoleExprRef
</span><a href="#local-6989586621683011979"><span class="hs-identifier hs-var">zonk_her</span></a></span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcTc
HoleExprRef
</span><a href="#local-6989586621683011976"><span class="hs-identifier hs-var">her</span></a></span><span>
</span><span id="line-930"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011978"><span class="hs-identifier hs-type">her'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011977"><span class="hs-identifier hs-type">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-932"></span><span>    </span><span class="annot"><a href="#local-6989586621683011979"><span class="hs-identifier hs-type">zonk_her</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HoleExprRef"><span class="hs-identifier hs-type">HoleExprRef</span></a></span><span>
</span><span id="line-933"></span><span>    </span><span id="local-6989586621683011979"><span class="annot"><span class="annottext">zonk_her :: HoleExprRef -&gt; ZonkTcM HoleExprRef
</span><a href="#local-6989586621683011979"><span class="hs-identifier hs-var hs-var">zonk_her</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-type">HER</span></a></span><span> </span><span id="local-6989586621683011981"><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621683011981"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621683011982"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011982"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683011983"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621683011983"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
-&gt; (EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; (a -&gt; m a) -&gt; m ()
</span><a href="GHC.Tc.Types.TcRef.html#updTcRefM"><span class="hs-identifier hs-var">updTcRefM</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvTerm
</span><a href="#local-6989586621683011981"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span>
</span><span id="line-935"></span><span>           </span><span id="local-6989586621683011986"><span class="annot"><a href="#local-6989586621683011986"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011982"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-936"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HER"><span class="hs-identifier hs-type">HER</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011981"><span class="hs-identifier hs-type">ref</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011986"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011983"><span class="hs-identifier hs-type">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIPVar"><span class="hs-identifier hs-type">HsIPVar</span></a></span><span> </span><span id="local-6989586621683011988"><span class="annot"><span class="annottext">XIPVar GhcTc
</span><a href="#local-6989586621683011988"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsIPName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XIPVar GhcTc
DataConCantHappen
</span><a href="#local-6989586621683011988"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLabel"><span class="hs-identifier hs-type">HsOverLabel</span></a></span><span> </span><span id="local-6989586621683011991"><span class="annot"><span class="annottext">XOverLabel GhcTc
</span><a href="#local-6989586621683011991"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLabel GhcTc
DataConCantHappen
</span><a href="#local-6989586621683011991"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-942"></span><span>
</span><span id="line-943"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621683011993"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621683011993"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span id="local-6989586621683011995"><span class="annot"><span class="annottext">XHsRat GhcTc
</span><a href="#local-6989586621683011995"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621683011996"><span class="annot"><span class="annottext">FractionalLit
</span><a href="#local-6989586621683011996"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621683011997"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011997"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-944"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683011998"><span class="annot"><a href="#local-6989586621683011998"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683011997"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-945"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011993"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsRat"><span class="hs-identifier hs-type">HsRat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011995"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011996"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683011998"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>
</span><span id="line-947"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span id="local-6989586621683011999"><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621683011999"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012000"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621683012000"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitE GhcTc -&gt; HsLit GhcTc -&gt; HsExpr GhcTc
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcTc
</span><a href="#local-6989586621683011999"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621683012000"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>
</span><span id="line-950"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span id="local-6989586621683012002"><span class="annot"><span class="annottext">XOverLitE GhcTc
</span><a href="#local-6989586621683012002"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012003"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621683012003"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012004"><span class="annot"><a href="#local-6989586621683012004"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc -&gt; ZonkTcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-var">zonkOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621683012003"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-952"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012002"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012004"><span class="hs-identifier hs-type">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-953"></span><span>
</span><span id="line-954"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span id="local-6989586621683012007"><span class="annot"><span class="annottext">XLam GhcTc
</span><a href="#local-6989586621683012007"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012008"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621683012008"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span id="local-6989586621683012009"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683012009"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-955"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012010"><span class="annot"><a href="#local-6989586621683012010"><span class="hs-identifier hs-var">new_matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsExpr GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
MatchGroup GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683012009"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-956"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012007"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012008"><span class="hs-identifier hs-type">lam_variant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012010"><span class="hs-identifier hs-type">new_matches</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span id="local-6989586621683012012"><span class="annot"><span class="annottext">XApp GhcTc
</span><a href="#local-6989586621683012012"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012013"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012013"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012014"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012014"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-959"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012015"><span class="annot"><a href="#local-6989586621683012015"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012013"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-960"></span><span>       </span><span id="local-6989586621683012016"><span class="annot"><a href="#local-6989586621683012016"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012014"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-961"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-type">HsApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012012"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012015"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012016"><span class="hs-identifier hs-type">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-962"></span><span>
</span><span id="line-963"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span id="local-6989586621683012018"><span class="annot"><span class="annottext">XAppTypeE GhcTc
</span><a href="#local-6989586621683012018"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012019"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012019"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621683012020"><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621683012020"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012021"><span class="annot"><a href="#local-6989586621683012021"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012019"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-965"></span><span>       </span><span id="local-6989586621683012022"><span class="annot"><a href="#local-6989586621683012022"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012018"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-966"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-type">HsAppType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012022"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012021"><span class="hs-identifier hs-type">new_e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012020"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>       </span><span class="hs-comment">-- NB: the type is an HsType; can't zonk that!</span><span>
</span><span id="line-968"></span><span>
</span><span id="line-969"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsTypedBracket"><span class="hs-identifier hs-type">HsTypedBracket</span></a></span><span> </span><span id="local-6989586621683012024"><span class="annot"><span class="annottext">XTypedBracket GhcTc
</span><a href="#local-6989586621683012024"><span class="hs-identifier hs-var">hsb_tc</span></a></span></span><span> </span><span id="local-6989586621683012025"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012025"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-970"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683012026"><span class="annot"><span class="annottext">HsBracketTc
</span><a href="#local-6989586621683012026"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XTypedBracket GhcTc -&gt; LHsExpr GhcTc -&gt; HsExpr GhcTc
forall p. XTypedBracket p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsTypedBracket"><span class="hs-identifier hs-var">HsTypedBracket</span></a></span><span> </span><span class="annot"><span class="annottext">XTypedBracket GhcTc
HsBracketTc
</span><a href="#local-6989586621683012026"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012025"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsBracketTc -&gt; HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsBracketTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HsBracketTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsBracketTc
</span><a href="GHC.Tc.Zonk.Type.html#zonkBracket"><span class="hs-identifier hs-var">zonkBracket</span></a></span><span> </span><span class="annot"><span class="annottext">XTypedBracket GhcTc
HsBracketTc
</span><a href="#local-6989586621683012024"><span class="hs-identifier hs-var">hsb_tc</span></a></span><span>
</span><span id="line-971"></span><span>
</span><span id="line-972"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedBracket"><span class="hs-identifier hs-type">HsUntypedBracket</span></a></span><span> </span><span id="local-6989586621683012029"><span class="annot"><span class="annottext">XUntypedBracket GhcTc
</span><a href="#local-6989586621683012029"><span class="hs-identifier hs-var">hsb_tc</span></a></span></span><span> </span><span id="local-6989586621683012030"><span class="annot"><span class="annottext">HsQuote GhcTc
</span><a href="#local-6989586621683012030"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-973"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683012031"><span class="annot"><span class="annottext">HsBracketTc
</span><a href="#local-6989586621683012031"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XUntypedBracket GhcTc -&gt; HsQuote GhcTc -&gt; HsExpr GhcTc
forall p. XUntypedBracket p -&gt; HsQuote p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsUntypedBracket"><span class="hs-identifier hs-var">HsUntypedBracket</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedBracket GhcTc
HsBracketTc
</span><a href="#local-6989586621683012031"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsQuote GhcTc
</span><a href="#local-6989586621683012030"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsBracketTc -&gt; HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsBracketTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HsBracketTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsBracketTc
</span><a href="GHC.Tc.Zonk.Type.html#zonkBracket"><span class="hs-identifier hs-var">zonkBracket</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedBracket GhcTc
HsBracketTc
</span><a href="#local-6989586621683012029"><span class="hs-identifier hs-var">hsb_tc</span></a></span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsTypedSplice"><span class="hs-identifier hs-type">HsTypedSplice</span></a></span><span> </span><span id="local-6989586621683012033"><span class="annot"><span class="annottext">XTypedSplice GhcTc
</span><a href="#local-6989586621683012033"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ZonkEnv -&gt; TcM (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall (m :: * -&gt; *) a. (ZonkEnv -&gt; m a) -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#ZonkT"><span class="hs-identifier hs-var">ZonkT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DelayedSplice -&gt; TcM (HsExpr GhcTc)
</span><a href="GHC.Tc.Gen.Splice.html#runTopSplice"><span class="hs-identifier hs-var">runTopSplice</span></a></span><span> </span><span class="annot"><span class="annottext">XTypedSplice GhcTc
DelayedSplice
</span><a href="#local-6989586621683012033"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
-&gt; (HsExpr GhcTc
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; (a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSplice"><span class="hs-identifier hs-type">HsUntypedSplice</span></a></span><span> </span><span id="local-6989586621683012035"><span class="annot"><span class="annottext">XUntypedSplice GhcTc
</span><a href="#local-6989586621683012035"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedSplice GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012035"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621683012037"><span class="annot"><span class="annottext">XOpApp GhcTc
</span><a href="#local-6989586621683012037"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012037"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-980"></span><span>
</span><span id="line-981"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span id="local-6989586621683012039"><span class="annot"><span class="annottext">XNegApp GhcTc
</span><a href="#local-6989586621683012039"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012040"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012040"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012041"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012041"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; forall r.
   (SyntaxExprTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012041"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((SyntaxExprTc
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; (SyntaxExprTc
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012043"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012043"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-983"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012044"><span class="annot"><a href="#local-6989586621683012044"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012040"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-984"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012039"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012044"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012043"><span class="hs-identifier hs-type">new_op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span id="local-6989586621683012046"><span class="annot"><span class="annottext">XPar GhcTc
</span><a href="#local-6989586621683012046"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012047"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012047"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012048"><span class="annot"><a href="#local-6989586621683012048"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012047"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-988"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012046"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012048"><span class="hs-identifier hs-type">new_e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionL"><span class="hs-identifier hs-type">SectionL</span></a></span><span> </span><span id="local-6989586621683012050"><span class="annot"><span class="annottext">XSectionL GhcTc
</span><a href="#local-6989586621683012050"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionL GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012050"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-991"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span id="local-6989586621683012052"><span class="annot"><span class="annottext">XSectionR GhcTc
</span><a href="#local-6989586621683012052"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XSectionR GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012052"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-992"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span id="local-6989586621683012054"><span class="annot"><span class="annottext">XExplicitTuple GhcTc
</span><a href="#local-6989586621683012054"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012055"><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621683012055"><span class="hs-identifier hs-var">tup_args</span></a></span></span><span> </span><span id="local-6989586621683012056"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621683012056"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012057"><span class="annot"><a href="#local-6989586621683012057"><span class="hs-identifier hs-var">new_tup_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsTupArg GhcTc
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsTupArg GhcTc))
-&gt; [HsTupArg GhcTc]
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [HsTupArg GhcTc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">HsTupArg GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsTupArg GhcTc)
</span><a href="#local-6989586621683012058"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcTc]
</span><a href="#local-6989586621683012055"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-994"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012054"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012057"><span class="hs-identifier hs-type">new_tup_args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012056"><span class="hs-identifier hs-type">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-995"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-996"></span><span>    </span><span id="local-6989586621683012058"><span class="annot"><span class="annottext">zonk_tup_arg :: HsTupArg GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsTupArg GhcTc)
</span><a href="#local-6989586621683012058"><span class="hs-identifier hs-var hs-var">zonk_tup_arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-type">Present</span></a></span><span> </span><span id="local-6989586621683012065"><span class="annot"><span class="annottext">XPresent GhcTc
</span><a href="#local-6989586621683012065"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012066"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012066"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012067"><span class="annot"><a href="#local-6989586621683012067"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012066"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-997"></span><span>                                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-type">Present</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012065"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012067"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-998"></span><span>    </span><span class="annot"><a href="#local-6989586621683012058"><span class="hs-identifier hs-var">zonk_tup_arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span id="local-6989586621683012069"><span class="annot"><span class="annottext">XMissing GhcTc
</span><a href="#local-6989586621683012069"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012070"><span class="annot"><a href="#local-6989586621683012070"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; ZonkTcM (Scaled Kind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-var">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XMissing GhcTc
Scaled Kind
</span><a href="#local-6989586621683012069"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-999"></span><span>                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Missing"><span class="hs-identifier hs-type">Missing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012070"><span class="hs-identifier hs-type">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span id="local-6989586621683012072"><span class="annot"><span class="annottext">XExplicitSum GhcTc
</span><a href="#local-6989586621683012072"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621683012073"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621683012073"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621683012074"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621683012074"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621683012075"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012075"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012076"><span class="annot"><a href="#local-6989586621683012076"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; [Kind] -&gt; ZonkTcM [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XExplicitSum GhcTc
</span><a href="#local-6989586621683012072"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1004"></span><span>       </span><span id="local-6989586621683012077"><span class="annot"><a href="#local-6989586621683012077"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012075"><span class="hs-identifier hs-type">expr</span></a></span><span>
</span><span id="line-1005"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012076"><span class="hs-identifier hs-type">new_args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012073"><span class="hs-identifier hs-type">alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012074"><span class="hs-identifier hs-type">arity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012077"><span class="hs-identifier hs-type">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1006"></span><span>
</span><span id="line-1007"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span id="local-6989586621683012079"><span class="annot"><span class="annottext">XCase GhcTc
</span><a href="#local-6989586621683012079"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012080"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012080"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012081"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621683012081"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1008"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012082"><span class="annot"><a href="#local-6989586621683012082"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012080"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1009"></span><span>       </span><span id="local-6989586621683012083"><span class="annot"><a href="#local-6989586621683012083"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-type">zonkMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012081"><span class="hs-identifier hs-type">ms</span></a></span><span>
</span><span id="line-1010"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012079"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012082"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012083"><span class="hs-identifier hs-type">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>
</span><span id="line-1012"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span id="local-6989586621683012085"><span class="annot"><span class="annottext">XIf GhcTc
</span><a href="#local-6989586621683012085"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012086"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012086"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012087"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012087"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621683012088"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012088"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012089"><span class="annot"><a href="#local-6989586621683012089"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012086"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1014"></span><span>       </span><span id="local-6989586621683012090"><span class="annot"><a href="#local-6989586621683012090"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012087"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1015"></span><span>       </span><span id="local-6989586621683012091"><span class="annot"><a href="#local-6989586621683012091"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012088"><span class="hs-identifier hs-type">e3</span></a></span><span>
</span><span id="line-1016"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012085"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012089"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012090"><span class="hs-identifier hs-type">new_e2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012091"><span class="hs-identifier hs-type">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1017"></span><span>
</span><span id="line-1018"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-type">HsMultiIf</span></a></span><span> </span><span id="local-6989586621683012093"><span class="annot"><span class="annottext">XMultiIf GhcTc
</span><a href="#local-6989586621683012093"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012094"><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621683012094"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012095"><span class="annot"><a href="#local-6989586621683012095"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))))
-&gt; [GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GRHS GhcTc (LocatedA (HsExpr GhcTc))
 -&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc))))
-&gt; GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc))))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">GRHS GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621683012096"><span class="hs-identifier hs-var">zonk_alt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
[GenLocated EpAnnCO (GRHS GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012094"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1020"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012097"><span class="annot"><a href="#local-6989586621683012097"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012093"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1021"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMultiIf"><span class="hs-identifier hs-type">HsMultiIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012097"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012095"><span class="hs-identifier hs-type">alts'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1022"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621683012096"><span class="annot"><span class="annottext">zonk_alt :: GRHS GhcTc (LocatedA (HsExpr GhcTc))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621683012096"><span class="hs-identifier hs-var hs-var">zonk_alt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span id="local-6989586621683012103"><span class="annot"><span class="annottext">XCGRHS GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683012103"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012104"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012104"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621683012105"><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621683012105"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1023"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; forall r.
   ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
[LStmt GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="#local-6989586621683012104"><span class="hs-identifier hs-var">guard</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
  -&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc))))
 -&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc))))
-&gt; ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc))))
-&gt; ZonkTcM (GRHS GhcTc (LocatedA (HsExpr GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012106"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012106"><span class="hs-identifier hs-var">guard'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1024"></span><span>            </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012107"><span class="annot"><a href="#local-6989586621683012107"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621683012105"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1025"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012103"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012106"><span class="hs-identifier hs-type">guard'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012107"><span class="hs-identifier hs-type">expr'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1026"></span><span>
</span><span id="line-1027"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span id="local-6989586621683012109"><span class="annot"><span class="annottext">XLet GhcTc
</span><a href="#local-6989586621683012109"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012110"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012110"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621683012111"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012111"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1028"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrTcM (HsLocalBinds GhcTc)
-&gt; forall r.
   (HsLocalBinds GhcTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012110"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsLocalBinds GhcTc
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; (HsLocalBinds GhcTc
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012112"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012112"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1029"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012113"><span class="annot"><a href="#local-6989586621683012113"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012111"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1030"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012109"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012112"><span class="hs-identifier hs-type">new_binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012113"><span class="hs-identifier hs-type">new_expr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1031"></span><span>
</span><span id="line-1032"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span id="local-6989586621683012115"><span class="annot"><span class="annottext">XDo GhcTc
</span><a href="#local-6989586621683012115"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012116"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683012116"><span class="hs-identifier hs-var">do_or_lc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012117"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621683012117"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012118"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012118"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1033"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012119"><span class="annot"><a href="#local-6989586621683012119"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkBndrT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-var">don'tBind</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT
   (IOEnv (Env TcGblEnv TcLclEnv))
   [GenLocated
      SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      [GenLocated
         SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))])
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcTc (LocatedA (HsExpr GhcTc))]
[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012118"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1034"></span><span>       </span><span id="local-6989586621683012120"><span class="annot"><a href="#local-6989586621683012120"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012115"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1035"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012120"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012116"><span class="hs-identifier hs-type">do_or_lc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012117"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012119"><span class="hs-identifier hs-type">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span>
</span><span id="line-1037"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span id="local-6989586621683012122"><span class="annot"><span class="annottext">XExplicitList GhcTc
</span><a href="#local-6989586621683012122"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012123"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621683012123"><span class="hs-identifier hs-var">exprs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012124"><span class="annot"><a href="#local-6989586621683012124"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitList GhcTc
Kind
</span><a href="#local-6989586621683012122"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1039"></span><span>       </span><span id="local-6989586621683012125"><span class="annot"><a href="#local-6989586621683012125"><span class="hs-identifier hs-var">new_exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExprs"><span class="hs-identifier hs-type">zonkLExprs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012123"><span class="hs-identifier hs-type">exprs</span></a></span><span>
</span><span id="line-1040"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012124"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012125"><span class="hs-identifier hs-type">new_exprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621683012126"><span class="annot"><span class="annottext">expr :: HsExpr GhcTc
</span><a href="#local-6989586621683012126"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: forall p. HsExpr p -&gt; XRecordCon p
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012129"><span class="annot"><span class="annottext">XRecordCon GhcTc
</span><a href="#local-6989586621683012129"><span class="hs-identifier hs-var">con_expr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: forall p. HsExpr p -&gt; HsRecordBinds p
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012131"><span class="annot"><span class="annottext">HsRecordBinds GhcTc
</span><a href="#local-6989586621683012131"><span class="hs-identifier hs-var">rbinds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012132"><span class="annot"><a href="#local-6989586621683012132"><span class="hs-identifier hs-var">new_con_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRecordCon GhcTc
HsExpr GhcTc
</span><a href="#local-6989586621683012129"><span class="hs-identifier hs-var">con_expr</span></a></span><span>
</span><span id="line-1044"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012133"><span class="annot"><a href="#local-6989586621683012133"><span class="hs-identifier hs-var">new_rbinds</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRecFields"><span class="hs-identifier hs-type">zonkRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012131"><span class="hs-identifier hs-type">rbinds</span></a></span><span>
</span><span id="line-1045"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012126"><span class="hs-identifier hs-type">expr</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012132"><span class="hs-identifier hs-type">new_con_expr</span></a></span><span>
</span><span id="line-1046"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012133"><span class="hs-identifier hs-type">new_rbinds</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1047"></span><span>
</span><span id="line-1048"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><span class="annottext">XExprWithTySig GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012136"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012136"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621683012137"><span class="annot"><span class="annottext">LHsSigWcType (NoGhcTc GhcTc)
</span><a href="#local-6989586621683012137"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012138"><span class="annot"><a href="#local-6989586621683012138"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012136"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1050"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012138"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012137"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-type">ArithSeq</span></a></span><span> </span><span id="local-6989586621683012141"><span class="annot"><span class="annottext">XArithSeq GhcTc
</span><a href="#local-6989586621683012141"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012142"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621683012142"><span class="hs-identifier hs-var">wit</span></a></span></span><span> </span><span id="local-6989586621683012143"><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621683012143"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1053"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012144"><span class="annot"><a href="#local-6989586621683012144"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XArithSeq GhcTc
HsExpr GhcTc
</span><a href="#local-6989586621683012141"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1054"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-type">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012145"><span class="hs-identifier hs-type">zonkWit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012142"><span class="hs-identifier hs-type">wit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012146"><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><a href="#local-6989586621683012146"><span class="hs-identifier hs-var">new_wit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1055"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012147"><span class="annot"><a href="#local-6989586621683012147"><span class="hs-identifier hs-var">new_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc -&gt; ZonkTcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span>  </span><span class="annot"><span class="annottext">ArithSeqInfo GhcTc
</span><a href="#local-6989586621683012143"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-1056"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeq"><span class="hs-identifier hs-type">ArithSeq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012144"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012146"><span class="hs-identifier hs-type">new_wit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012147"><span class="hs-identifier hs-type">new_info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1057"></span><span>   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621683012145"><span class="annot"><span class="annottext">zonkWit :: Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
</span><a href="#local-6989586621683012145"><span class="hs-identifier hs-var hs-var">zonkWit</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><span class="hs-identifier hs-var">Nothing</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1058"></span><span>         </span><span class="annot"><a href="#local-6989586621683012145"><span class="hs-identifier hs-var">zonkWit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683012151"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012151"><span class="hs-identifier hs-var">fln</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621683012151"><span class="hs-identifier hs-var">fln</span></a></span><span>
</span><span id="line-1059"></span><span>
</span><span id="line-1060"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span id="local-6989586621683012153"><span class="annot"><span class="annottext">XPragE GhcTc
</span><a href="#local-6989586621683012153"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012154"><span class="annot"><span class="annottext">HsPragE GhcTc
</span><a href="#local-6989586621683012154"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621683012155"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012155"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012156"><span class="annot"><a href="#local-6989586621683012156"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012155"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1062"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012153"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012154"><span class="hs-identifier hs-type">prag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012156"><span class="hs-identifier hs-type">new_expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1063"></span><span>
</span><span id="line-1064"></span><span class="hs-comment">-- arrow notation extensions</span><span>
</span><span id="line-1065"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span id="local-6989586621683012158"><span class="annot"><span class="annottext">XProc GhcTc
</span><a href="#local-6989586621683012158"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012159"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012159"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012160"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621683012160"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  (GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; forall r.
   (GenLocated SrcSpanAnnA (Pat GhcTc)
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012159"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((GenLocated SrcSpanAnnA (Pat GhcTc)
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; (GenLocated SrcSpanAnnA (Pat GhcTc)
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012161"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621683012161"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1067"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012162"><span class="annot"><a href="#local-6989586621683012162"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc -&gt; ZonkTcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCmdTop"><span class="hs-identifier hs-var">zonkCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621683012160"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012158"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012161"><span class="hs-identifier hs-type">new_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012162"><span class="hs-identifier hs-type">new_body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span class="hs-comment">-- StaticPointers extension</span><span>
</span><span id="line-1071"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-type">HsStatic</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683012165"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683012165"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683012166"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012166"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012167"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012167"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012168"><span class="annot"><a href="#local-6989586621683012168"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012166"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1073"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsStatic"><span class="hs-identifier hs-type">HsStatic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012165"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683012168"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012167"><span class="hs-identifier hs-type">expr</span></a></span><span>
</span><span id="line-1074"></span><span>
</span><span id="line-1075"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsEmbTy"><span class="hs-identifier hs-type">HsEmbTy</span></a></span><span> </span><span id="local-6989586621683012170"><span class="annot"><span class="annottext">XEmbTy GhcTc
</span><a href="#local-6989586621683012170"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsWcType (NoGhcTc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XEmbTy GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012170"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1076"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsQual"><span class="hs-identifier hs-type">HsQual</span></a></span><span> </span><span id="local-6989586621683012172"><span class="annot"><span class="annottext">XQual GhcTc
</span><a href="#local-6989586621683012172"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc [LHsExpr GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XQual GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012172"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1077"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsForAll"><span class="hs-identifier hs-type">HsForAll</span></a></span><span> </span><span id="local-6989586621683012174"><span class="annot"><span class="annottext">XForAll GhcTc
</span><a href="#local-6989586621683012174"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XForAll GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012174"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1078"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsFunArr"><span class="hs-identifier hs-type">HsFunArr</span></a></span><span> </span><span id="local-6989586621683012176"><span class="annot"><span class="annottext">XFunArr GhcTc
</span><a href="#local-6989586621683012176"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (LHsExpr GhcTc) GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XFunArr GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012176"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-type">WrapExpr</span></a></span><span> </span><span id="local-6989586621683012179"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012179"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621683012180"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012180"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; forall r.
   (HsWrapper -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012179"><span class="hs-identifier hs-var">co_fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsWrapper
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; (HsWrapper
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012181"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012181"><span class="hs-identifier hs-var">new_co_fn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1082"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012182"><span class="annot"><a href="#local-6989586621683012182"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012180"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1083"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#WrapExpr"><span class="hs-identifier hs-type">WrapExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012181"><span class="hs-identifier hs-type">new_co_fn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012182"><span class="hs-identifier hs-type">new_expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>
</span><span id="line-1085"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExpandedThingTc"><span class="hs-identifier hs-type">ExpandedThingTc</span></a></span><span> </span><span id="local-6989586621683012184"><span class="annot"><span class="annottext">HsThingRn
</span><a href="#local-6989586621683012184"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span id="local-6989586621683012185"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012185"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012186"><span class="annot"><a href="#local-6989586621683012186"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012185"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1087"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ExpandedThingTc"><span class="hs-identifier hs-type">ExpandedThingTc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012184"><span class="hs-identifier hs-type">thing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012186"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span>
</span><span id="line-1090"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ConLikeTc"><span class="hs-identifier hs-type">ConLikeTc</span></a></span><span> </span><span id="local-6989586621683012188"><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621683012188"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621683012189"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012189"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621683012190"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621683012190"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1091"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XXExpr GhcTc -&gt; HsExpr GhcTc
XXExprGhcTc -&gt; HsExpr GhcTc
forall p. XXExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-var">XExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(XXExprGhcTc -&gt; HsExpr GhcTc)
-&gt; ([Scaled Kind] -&gt; XXExprGhcTc) -&gt; [Scaled Kind] -&gt; HsExpr GhcTc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; [Id] -&gt; [Scaled Kind] -&gt; XXExprGhcTc
</span><a href="GHC.Hs.Expr.html#ConLikeTc"><span class="hs-identifier hs-var">ConLikeTc</span></a></span><span> </span><span class="annot"><span class="annottext">ConLike
</span><a href="#local-6989586621683012188"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012189"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">([Scaled Kind] -&gt; HsExpr GhcTc)
-&gt; ZonkTcM [Scaled Kind]
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Scaled Kind -&gt; ZonkTcM (Scaled Kind))
-&gt; [Scaled Kind] -&gt; ZonkTcM [Scaled Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; ZonkTcM (Scaled Kind)
forall {a}.
Scaled a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Scaled a)
</span><a href="#local-6989586621683012191"><span class="hs-identifier hs-var">zonk_scale</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621683012190"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1092"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1093"></span><span>    </span><span id="local-6989586621683012191"><span class="annot"><span class="annottext">zonk_scale :: Scaled a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Scaled a)
</span><a href="#local-6989586621683012191"><span class="hs-identifier hs-var hs-var">zonk_scale</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621683012197"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012197"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621683012198"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683012198"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; a -&gt; Scaled a
forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; a -&gt; Scaled a)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; Scaled a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012197"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; Scaled a)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Scaled a)
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683012198"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1094"></span><span>    </span><span class="hs-comment">-- Only the multiplicity can contain unification variables</span><span>
</span><span id="line-1095"></span><span>    </span><span class="hs-comment">-- The tvs come straight from the data-con, and so are strictly redundant</span><span>
</span><span id="line-1096"></span><span>    </span><span class="hs-comment">-- See Wrinkles of Note [Typechecking data constructors] in GHC.Tc.Gen.Head</span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsRecSelTc"><span class="hs-identifier hs-type">HsRecSelTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span id="local-6989586621683012200"><span class="annot"><span class="annottext">XCFieldOcc GhcTc
</span><a href="#local-6989586621683012200"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012201"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683012201"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012202"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012202"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1099"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012203"><span class="annot"><a href="#local-6989586621683012203"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012202"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1100"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsRecSelTc"><span class="hs-identifier hs-type">HsRecSelTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012200"><span class="hs-identifier hs-type">occ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012201"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012203"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1101"></span><span>
</span><span id="line-1102"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span id="local-6989586621683012205"><span class="annot"><span class="annottext">XRecordUpd GhcTc
</span><a href="#local-6989586621683012205"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdFields GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XRecordUpd GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012205"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1103"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsGetField"><span class="hs-identifier hs-type">HsGetField</span></a></span><span> </span><span id="local-6989586621683012207"><span class="annot"><span class="annottext">XGetField GhcTc
</span><a href="#local-6989586621683012207"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc (DotFieldOcc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XGetField GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012207"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1104"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProjection"><span class="hs-identifier hs-type">HsProjection</span></a></span><span> </span><span id="local-6989586621683012209"><span class="annot"><span class="annottext">XProjection GhcTc
</span><a href="#local-6989586621683012209"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (DotFieldOcc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XProjection GhcTc
DataConCantHappen
</span><a href="#local-6989586621683012209"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1105"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621683012210"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621683012210"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsTick"><span class="hs-identifier hs-type">HsTick</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; SDoc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012210"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span id="local-6989586621683012212"><span class="annot"><span class="annottext">e :: HsExpr GhcTc
</span><a href="#local-6989586621683012212"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsBinTick"><span class="hs-identifier hs-type">HsBinTick</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; SDoc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonkExpr&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012212"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1109"></span><span class="hs-comment">{-
Note [Skolems in zonkSyntaxExpr]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider rebindable syntax with something like

  (&gt;&gt;=) :: (forall x. blah) -&gt; (forall y. blah') -&gt; blah''

The x and y become skolems that are in scope when type-checking the
arguments to the bind. This means that we must extend the ZonkEnv with
these skolems when zonking the arguments to the bind. But the skolems
are different between the two arguments, and so we should theoretically
carry around different environments to use for the different arguments.

However, this becomes a logistical nightmare, especially in dealing with
the more exotic Stmt forms. So, we simplify by making the critical
assumption that the uniques of the skolems are different. (This assumption
is justified by the use of newUnique in GHC.Tc.Utils.TcMType.instSkolTyCoVarX.)
Now, we can safely just extend one environment.
-}</span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="hs-comment">-- See Note [Skolems in zonkSyntaxExpr]</span><span>
</span><span id="line-1130"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1131"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span id="zonkSyntaxExpr"><span class="annot"><span class="annottext">zonkSyntaxExpr :: SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var hs-var">zonkSyntaxExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">syn_expr :: SyntaxExprTc -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012216"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012216"><span class="hs-identifier hs-var">expr</span></a></span></span><span>
</span><span id="line-1133"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_arg_wraps :: SyntaxExprTc -&gt; [HsWrapper]
</span><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012218"><span class="annot"><span class="annottext">[HsWrapper]
</span><a href="#local-6989586621683012218"><span class="hs-identifier hs-var">arg_wraps</span></a></span></span><span>
</span><span id="line-1134"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">syn_res_wrap :: SyntaxExprTc -&gt; HsWrapper
</span><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012220"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012220"><span class="hs-identifier hs-var">res_wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012221"><span class="annot"><a href="#local-6989586621683012221"><span class="hs-identifier hs-var">res_wrap'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012220"><span class="hs-identifier hs-var">res_wrap</span></a></span><span>
</span><span id="line-1136"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012222"><span class="annot"><a href="#local-6989586621683012222"><span class="hs-identifier hs-var">expr'</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012216"><span class="hs-identifier hs-type">expr</span></a></span><span>
</span><span id="line-1137"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012223"><span class="annot"><a href="#local-6989586621683012223"><span class="hs-identifier hs-var">arg_wraps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012218"><span class="hs-identifier hs-type">arg_wraps</span></a></span><span>
</span><span id="line-1138"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprTc"><span class="hs-identifier hs-type">SyntaxExprTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#syn_expr"><span class="hs-identifier hs-var">syn_expr</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012222"><span class="hs-identifier hs-type">expr'</span></a></span><span>
</span><span id="line-1139"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#syn_arg_wraps"><span class="hs-identifier hs-var">syn_arg_wraps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012223"><span class="hs-identifier hs-type">arg_wraps'</span></a></span><span>
</span><span id="line-1140"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#syn_res_wrap"><span class="hs-identifier hs-var">syn_res_wrap</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012221"><span class="hs-identifier hs-type">res_wrap'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1141"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="GHC.Hs.Expr.html#NoSyntaxExprTc"><span class="hs-identifier hs-var">NoSyntaxExprTc</span></a></span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1144"></span><span>
</span><span id="line-1145"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1146"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-type">zonkCmd</span></a></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1147"></span><span>
</span><span id="line-1148"></span><span id="zonkLCmd"><span class="annot"><span class="annottext">zonkLCmd :: LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var hs-var">zonkLCmd</span></a></span></span><span>  </span><span id="local-6989586621683012227"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012227"><span class="hs-identifier hs-var">cmd</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsCmd GhcTc -&gt; ZonkTcM (HsCmd GhcTc))
-&gt; LocatedA (HsCmd GhcTc) -&gt; ZonkTcM (LocatedA (HsCmd GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; ZonkTcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
LocatedA (HsCmd GhcTc)
</span><a href="#local-6989586621683012227"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1149"></span><span>
</span><span id="line-1150"></span><span id="zonkCmd"><span class="annot"><span class="annottext">zonkCmd :: HsCmd GhcTc -&gt; ZonkTcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var hs-var">zonkCmd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XCmd"><span class="hs-identifier hs-type">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span id="local-6989586621683012230"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012230"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621683012231"><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621683012231"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1151"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; forall r.
   (HsWrapper -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012230"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsWrapper -&gt; ZonkTcM (HsCmd GhcTc)) -&gt; ZonkTcM (HsCmd GhcTc))
-&gt; (HsWrapper -&gt; ZonkTcM (HsCmd GhcTc)) -&gt; ZonkTcM (HsCmd GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012232"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012232"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1152"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012233"><span class="annot"><a href="#local-6989586621683012233"><span class="hs-identifier hs-var">cmd'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc -&gt; ZonkTcM (HsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcTc
</span><a href="#local-6989586621683012231"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1153"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XCmd"><span class="hs-identifier hs-type">XCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsWrap"><span class="hs-identifier hs-type">HsWrap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012232"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012233"><span class="hs-identifier hs-type">cmd'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1154"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span id="local-6989586621683012235"><span class="annot"><span class="annottext">XCmdArrApp GhcTc
</span><a href="#local-6989586621683012235"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012236"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012236"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012237"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012237"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621683012238"><span class="annot"><span class="annottext">HsArrAppType
</span><a href="#local-6989586621683012238"><span class="hs-identifier hs-var">ho</span></a></span></span><span> </span><span id="local-6989586621683012239"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683012239"><span class="hs-identifier hs-var">rl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1155"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012240"><span class="annot"><a href="#local-6989586621683012240"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012236"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1156"></span><span>       </span><span id="local-6989586621683012241"><span class="annot"><a href="#local-6989586621683012241"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012237"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1157"></span><span>       </span><span id="local-6989586621683012242"><span class="annot"><a href="#local-6989586621683012242"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012235"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1158"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrApp"><span class="hs-identifier hs-type">HsCmdArrApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012242"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012240"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012241"><span class="hs-identifier hs-type">new_e2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012238"><span class="hs-identifier hs-type">ho</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012239"><span class="hs-identifier hs-type">rl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1159"></span><span>
</span><span id="line-1160"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span id="local-6989586621683012244"><span class="annot"><span class="annottext">XCmdArrForm GhcTc
</span><a href="#local-6989586621683012244"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012245"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012245"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621683012246"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621683012246"><span class="hs-identifier hs-var">fixity</span></a></span></span><span> </span><span id="local-6989586621683012247"><span class="annot"><span class="annottext">[LHsCmdTop GhcTc]
</span><a href="#local-6989586621683012247"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012248"><span class="annot"><a href="#local-6989586621683012248"><span class="hs-identifier hs-var">new_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012245"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1162"></span><span>       </span><span id="local-6989586621683012249"><span class="annot"><a href="#local-6989586621683012249"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmdTop"><span class="hs-identifier hs-type">zonkCmdTop</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012247"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1163"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012244"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012248"><span class="hs-identifier hs-type">new_op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012246"><span class="hs-identifier hs-type">fixity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012249"><span class="hs-identifier hs-type">new_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span id="local-6989586621683012251"><span class="annot"><span class="annottext">XCmdApp GhcTc
</span><a href="#local-6989586621683012251"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012252"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012252"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621683012253"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012253"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012254"><span class="annot"><a href="#local-6989586621683012254"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012252"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1167"></span><span>       </span><span id="local-6989586621683012255"><span class="annot"><a href="#local-6989586621683012255"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012253"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-1168"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-type">HsCmdApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012251"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012254"><span class="hs-identifier hs-type">new_c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012255"><span class="hs-identifier hs-type">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1169"></span><span>
</span><span id="line-1170"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span id="local-6989586621683012257"><span class="annot"><span class="annottext">XCmdPar GhcTc
</span><a href="#local-6989586621683012257"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012258"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012258"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012259"><span class="annot"><a href="#local-6989586621683012259"><span class="hs-identifier hs-var">new_c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012258"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1172"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012257"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012259"><span class="hs-identifier hs-type">new_c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span id="local-6989586621683012261"><span class="annot"><span class="annottext">XCmdCase GhcTc
</span><a href="#local-6989586621683012261"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012262"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012262"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012263"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621683012263"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012264"><span class="annot"><a href="#local-6989586621683012264"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012262"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1176"></span><span>       </span><span id="local-6989586621683012265"><span class="annot"><a href="#local-6989586621683012265"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-type">zonkMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012263"><span class="hs-identifier hs-type">ms</span></a></span><span>
</span><span id="line-1177"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012261"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012264"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012265"><span class="hs-identifier hs-type">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span id="local-6989586621683012267"><span class="annot"><span class="annottext">XCmdLamCase GhcTc
</span><a href="#local-6989586621683012267"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012268"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621683012268"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span id="local-6989586621683012269"><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
</span><a href="#local-6989586621683012269"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1180"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012270"><span class="annot"><a href="#local-6989586621683012270"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsCmd GhcTc) -&gt; ZonkTcM (LocatedA (HsCmd GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (HsCmd GhcTc)))
forall (body :: * -&gt; *).
(Anno (GRHS GhcTc (LocatedA (body GhcTc))) ~ EpAnnCO) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; MatchGroup GhcTc (LocatedA (body GhcTc))
-&gt; ZonkTcM (MatchGroup GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkMatchGroup"><span class="hs-identifier hs-var">zonkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
LocatedA (HsCmd GhcTc) -&gt; ZonkTcM (LocatedA (HsCmd GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsCmd GhcTc)
MatchGroup GhcTc (LocatedA (HsCmd GhcTc))
</span><a href="#local-6989586621683012269"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1181"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012267"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012268"><span class="hs-identifier hs-type">lam_variant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012270"><span class="hs-identifier hs-type">new_ms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>
</span><span id="line-1183"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span id="local-6989586621683012272"><span class="annot"><span class="annottext">XCmdIf GhcTc
</span><a href="#local-6989586621683012272"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012273"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012273"><span class="hs-identifier hs-var">eCond</span></a></span></span><span> </span><span id="local-6989586621683012274"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012274"><span class="hs-identifier hs-var">ePred</span></a></span></span><span> </span><span id="local-6989586621683012275"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012275"><span class="hs-identifier hs-var">cThen</span></a></span></span><span> </span><span id="local-6989586621683012276"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012276"><span class="hs-identifier hs-var">cElse</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1184"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; forall r.
   (SyntaxExprTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012273"><span class="hs-identifier hs-var">eCond</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((SyntaxExprTc -&gt; ZonkTcM (HsCmd GhcTc)) -&gt; ZonkTcM (HsCmd GhcTc))
-&gt; (SyntaxExprTc -&gt; ZonkTcM (HsCmd GhcTc)) -&gt; ZonkTcM (HsCmd GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012277"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012277"><span class="hs-identifier hs-var">new_eCond</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1185"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012278"><span class="annot"><a href="#local-6989586621683012278"><span class="hs-identifier hs-var">new_ePred</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012274"><span class="hs-identifier hs-var">ePred</span></a></span><span>
</span><span id="line-1186"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012279"><span class="annot"><a href="#local-6989586621683012279"><span class="hs-identifier hs-var">new_cThen</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012275"><span class="hs-identifier hs-type">cThen</span></a></span><span>
</span><span id="line-1187"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012280"><span class="annot"><a href="#local-6989586621683012280"><span class="hs-identifier hs-var">new_cElse</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-type">zonkLCmd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012276"><span class="hs-identifier hs-type">cElse</span></a></span><span>
</span><span id="line-1188"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012272"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012277"><span class="hs-identifier hs-type">new_eCond</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012278"><span class="hs-identifier hs-type">new_ePred</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012279"><span class="hs-identifier hs-type">new_cThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012280"><span class="hs-identifier hs-type">new_cElse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1189"></span><span>
</span><span id="line-1190"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span id="local-6989586621683012282"><span class="annot"><span class="annottext">XCmdLet GhcTc
</span><a href="#local-6989586621683012282"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012283"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012283"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621683012284"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012284"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrTcM (HsLocalBinds GhcTc)
-&gt; forall r.
   (HsLocalBinds GhcTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012283"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((HsLocalBinds GhcTc -&gt; ZonkTcM (HsCmd GhcTc))
 -&gt; ZonkTcM (HsCmd GhcTc))
-&gt; (HsLocalBinds GhcTc -&gt; ZonkTcM (HsCmd GhcTc))
-&gt; ZonkTcM (HsCmd GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012285"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012285"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1192"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012286"><span class="annot"><a href="#local-6989586621683012286"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012284"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1193"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012282"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012285"><span class="hs-identifier hs-type">new_binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012286"><span class="hs-identifier hs-type">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1194"></span><span>
</span><span id="line-1195"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmd"><span class="hs-identifier hs-var">zonkCmd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span id="local-6989586621683012288"><span class="annot"><span class="annottext">XCmdDo GhcTc
</span><a href="#local-6989586621683012288"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012289"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621683012289"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012290"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621683012290"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012291"><span class="annot"><a href="#local-6989586621683012291"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkBndrT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-var">don'tBind</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT
   (IOEnv (Env TcGblEnv TcLclEnv))
   [GenLocated
      SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      [GenLocated
         SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))])
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsCmd GhcTc) -&gt; ZonkTcM (LocatedA (HsCmd GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsCmd GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsCmd GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
LocatedA (HsCmd GhcTc) -&gt; ZonkTcM (LocatedA (HsCmd GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmt GhcTc (LocatedA (HsCmd GhcTc))]
[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsCmd GhcTc)))]
</span><a href="#local-6989586621683012290"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-1197"></span><span>       </span><span id="local-6989586621683012292"><span class="annot"><a href="#local-6989586621683012292"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012288"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1198"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012292"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012289"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012291"><span class="hs-identifier hs-type">new_stmts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span>
</span><span id="line-1202"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCmdTop"><span class="hs-identifier hs-type">zonkCmdTop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmdTop"><span class="hs-identifier hs-type">LHsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span id="zonkCmdTop"><span class="annot"><span class="annottext">zonkCmdTop :: LHsCmdTop GhcTc -&gt; ZonkTcM (LHsCmdTop GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCmdTop"><span class="hs-identifier hs-var hs-var">zonkCmdTop</span></a></span></span><span> </span><span id="local-6989586621683012293"><span class="annot"><span class="annottext">LHsCmdTop GhcTc
</span><a href="#local-6989586621683012293"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsCmdTop GhcTc -&gt; ZonkTcM (HsCmdTop GhcTc))
-&gt; GenLocated EpAnnCO (HsCmdTop GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated EpAnnCO (HsCmdTop GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsCmdTop GhcTc -&gt; ZonkTcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_cmd_top"><span class="hs-identifier hs-var">zonk_cmd_top</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmdTop GhcTc
GenLocated EpAnnCO (HsCmdTop GhcTc)
</span><a href="#local-6989586621683012293"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1204"></span><span>
</span><span id="line-1205"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_cmd_top"><span class="hs-identifier hs-type">zonk_cmd_top</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1206"></span><span id="zonk_cmd_top"><span class="annot"><span class="annottext">zonk_cmd_top :: HsCmdTop GhcTc -&gt; ZonkTcM (HsCmdTop GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_cmd_top"><span class="hs-identifier hs-var hs-var">zonk_cmd_top</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-type">CmdTopTc</span></a></span><span> </span><span id="local-6989586621683012297"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012297"><span class="hs-identifier hs-var">stack_tys</span></a></span></span><span> </span><span id="local-6989586621683012298"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012298"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012299"><span class="annot"><span class="annottext">CmdSyntaxTable GhcTc
</span><a href="#local-6989586621683012299"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012300"><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012300"><span class="hs-identifier hs-var">cmd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1207"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012301"><span class="annot"><a href="#local-6989586621683012301"><span class="hs-identifier hs-var">new_cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc -&gt; ZonkTcM (LHsCmd GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLCmd"><span class="hs-identifier hs-var">zonkLCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcTc
</span><a href="#local-6989586621683012300"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1208"></span><span>       </span><span id="local-6989586621683012302"><span class="annot"><a href="#local-6989586621683012302"><span class="hs-identifier hs-var">new_stack_tys</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012297"><span class="hs-identifier hs-type">stack_tys</span></a></span><span>
</span><span id="line-1209"></span><span>       </span><span id="local-6989586621683012303"><span class="annot"><a href="#local-6989586621683012303"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012298"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1210"></span><span>       </span><span id="local-6989586621683012304"><span class="annot"><a href="#local-6989586621683012304"><span class="hs-identifier hs-var">new_ids</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html#mapSndM"><span class="hs-identifier hs-type">mapSndM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012299"><span class="hs-identifier hs-type">ids</span></a></span><span>
</span><span id="line-1211"></span><span>
</span><span id="line-1212"></span><span>       </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html#massert"><span class="hs-identifier hs-type">massert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Type.html#definitelyLiftedType"><span class="hs-identifier hs-type">definitelyLiftedType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012302"><span class="hs-identifier hs-type">new_stack_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1213"></span><span>         </span><span class="hs-comment">-- desugarer assumes that this is not representation-polymorphic...</span><span>
</span><span id="line-1214"></span><span>         </span><span class="hs-comment">-- but indeed it should always be lifted due to the typing</span><span>
</span><span id="line-1215"></span><span>         </span><span class="hs-comment">-- rules for arrows</span><span>
</span><span id="line-1216"></span><span>
</span><span id="line-1217"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-type">HsCmdTop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#CmdTopTc"><span class="hs-identifier hs-type">CmdTopTc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012302"><span class="hs-identifier hs-type">new_stack_tys</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012303"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012304"><span class="hs-identifier hs-type">new_ids</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012301"><span class="hs-identifier hs-type">new_cmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1218"></span><span>
</span><span id="line-1219"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1220"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#HsWrapper"><span class="hs-identifier hs-type">HsWrapper</span></a></span><span>
</span><span id="line-1221"></span><span id="zonkCoFn"><span class="annot"><span class="annottext">zonkCoFn :: HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var hs-var">zonkCoFn</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpHole"><span class="hs-identifier hs-var">WpHole</span></a></span><span>
</span><span id="line-1222"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span id="local-6989586621683012310"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012310"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621683012311"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012311"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012312"><span class="annot"><a href="#local-6989586621683012312"><span class="hs-identifier hs-var">c1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012310"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1223"></span><span>                                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012313"><span class="annot"><a href="#local-6989586621683012313"><span class="hs-identifier hs-var">c2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012311"><span class="hs-identifier hs-type">c2</span></a></span><span>
</span><span id="line-1224"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCompose"><span class="hs-identifier hs-type">WpCompose</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012312"><span class="hs-identifier hs-type">c1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012313"><span class="hs-identifier hs-type">c2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1225"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span id="local-6989586621683012315"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012315"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621683012316"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012316"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621683012317"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621683012317"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012318"><span class="annot"><a href="#local-6989586621683012318"><span class="hs-identifier hs-var">c1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012315"><span class="hs-identifier hs-var">c1</span></a></span><span>
</span><span id="line-1226"></span><span>                                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012319"><span class="annot"><a href="#local-6989586621683012319"><span class="hs-identifier hs-var">c2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012316"><span class="hs-identifier hs-type">c2</span></a></span><span>
</span><span id="line-1227"></span><span>                                </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012320"><span class="annot"><a href="#local-6989586621683012320"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkScaledTcTypeToTypeX"><span class="hs-identifier hs-type">zonkScaledTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012317"><span class="hs-identifier hs-type">t1</span></a></span><span>
</span><span id="line-1228"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpFun"><span class="hs-identifier hs-type">WpFun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012318"><span class="hs-identifier hs-type">c1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012319"><span class="hs-identifier hs-type">c2'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012320"><span class="hs-identifier hs-type">t1'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1229"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-type">WpCast</span></a></span><span> </span><span id="local-6989586621683012322"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012322"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpCast"><span class="hs-identifier hs-var">WpCast</span></a></span><span>  </span><span class="annot"><span class="annottext">(Coercion -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Coercion
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkTcM Coercion
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Coercion
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012322"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1230"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-type">WpEvLam</span></a></span><span> </span><span id="local-6989586621683012324"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012324"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvLam"><span class="hs-identifier hs-var">WpEvLam</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrX"><span class="hs-identifier hs-var">zonkEvBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012324"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1231"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-type">WpEvApp</span></a></span><span> </span><span id="local-6989586621683012326"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683012326"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpEvApp"><span class="hs-identifier hs-var">WpEvApp</span></a></span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683012326"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1232"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-type">WpTyLam</span></a></span><span> </span><span id="local-6989586621683012328"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012328"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImmutableTyVar"><span class="hs-identifier hs-var">isImmutableTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012328"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1233"></span><span>                         </span><span class="annot"><span class="annottext">Id -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyLam"><span class="hs-identifier hs-var">WpTyLam</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012328"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1234"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-type">WpTyApp</span></a></span><span> </span><span id="local-6989586621683012330"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012330"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpTyApp"><span class="hs-identifier hs-var">WpTyApp</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012330"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1235"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-type">WpLet</span></a></span><span> </span><span id="local-6989586621683012332"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012332"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpLet"><span class="hs-identifier hs-var">WpLet</span></a></span><span>   </span><span class="annot"><span class="annottext">(TcEvBinds -&gt; HsWrapper)
-&gt; ZonkBndrTcM TcEvBinds
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; ZonkBndrTcM TcEvBinds
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012332"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1236"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-type">WpMultCoercion</span></a></span><span> </span><span id="local-6989586621683012334"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012334"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#WpMultCoercion"><span class="hs-identifier hs-var">WpMultCoercion</span></a></span><span> </span><span class="annot"><span class="annottext">(Coercion -&gt; HsWrapper)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Coercion
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkTcM Coercion
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Coercion
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012334"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>
</span><span id="line-1238"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1239"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1240"></span><span id="zonkOverLit"><span class="annot"><span class="annottext">zonkOverLit :: HsOverLit GhcTc -&gt; ZonkTcM (HsOverLit GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-var hs-var">zonkOverLit</span></a></span></span><span> </span><span id="local-6989586621683012335"><span class="annot"><span class="annottext">lit :: HsOverLit GhcTc
</span><a href="#local-6989586621683012335"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ol_ext :: forall p. HsOverLit p -&gt; XOverLit p
</span><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012338"><span class="annot"><span class="annottext">x :: XOverLit GhcTc
</span><a href="#local-6989586621683012338"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Hs.Lit.html#OverLitTc"><span class="hs-identifier hs-type">OverLitTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ol_witness :: OverLitTc -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012341"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012341"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ol_type :: OverLitTc -&gt; Kind
</span><a href="GHC.Hs.Lit.html#ol_type"><span class="hs-identifier hs-var">ol_type</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012343"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012343"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012344"><span class="annot"><a href="#local-6989586621683012344"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012343"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1242"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012345"><span class="annot"><a href="#local-6989586621683012345"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012341"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-1243"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012335"><span class="hs-identifier hs-type">lit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#ol_ext"><span class="hs-identifier hs-var">ol_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012338"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#ol_witness"><span class="hs-identifier hs-var">ol_witness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012345"><span class="hs-identifier hs-type">e'</span></a></span><span>
</span><span id="line-1244"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Lit.html#ol_type"><span class="hs-identifier hs-var">ol_type</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012344"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1245"></span><span>
</span><span id="line-1246"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1247"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkBracket"><span class="hs-identifier hs-type">zonkBracket</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsBracketTc"><span class="hs-identifier hs-type">HsBracketTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsBracketTc"><span class="hs-identifier hs-type">HsBracketTc</span></a></span><span>
</span><span id="line-1248"></span><span id="zonkBracket"><span class="annot"><span class="annottext">zonkBracket :: HsBracketTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) HsBracketTc
</span><a href="GHC.Tc.Zonk.Type.html#zonkBracket"><span class="hs-identifier hs-var hs-var">zonkBracket</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsBracketTc"><span class="hs-identifier hs-type">HsBracketTc</span></a></span><span> </span><span id="local-6989586621683012347"><span class="annot"><span class="annottext">HsQuote GhcRn
</span><a href="#local-6989586621683012347"><span class="hs-identifier hs-var">hsb_thing</span></a></span></span><span> </span><span id="local-6989586621683012348"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012348"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012349"><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621683012349"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span id="local-6989586621683012350"><span class="annot"><span class="annottext">[PendingTcSplice]
</span><a href="#local-6989586621683012350"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1249"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012351"><span class="annot"><a href="#local-6989586621683012351"><span class="hs-identifier hs-var">wrap'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QuoteWrapper
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) QuoteWrapper)
-&gt; Maybe QuoteWrapper
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe QuoteWrapper)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Maybe a -&gt; f (Maybe b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">QuoteWrapper -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) QuoteWrapper
</span><a href="#local-6989586621683012352"><span class="hs-identifier hs-var">zonkQuoteWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe QuoteWrapper
</span><a href="#local-6989586621683012349"><span class="hs-identifier hs-var">wrap</span></a></span><span>
</span><span id="line-1250"></span><span>       </span><span id="local-6989586621683012353"><span class="annot"><a href="#local-6989586621683012353"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621683012354"><span class="hs-identifier hs-type">zonk_b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012350"><span class="hs-identifier hs-type">bs</span></a></span><span>
</span><span id="line-1251"></span><span>       </span><span id="local-6989586621683012355"><span class="annot"><a href="#local-6989586621683012355"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012348"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1252"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsBracketTc"><span class="hs-identifier hs-type">HsBracketTc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012347"><span class="hs-identifier hs-type">hsb_thing</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012355"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012351"><span class="hs-identifier hs-type">wrap'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012353"><span class="hs-identifier hs-type">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1254"></span><span>    </span><span id="local-6989586621683012352"><span class="annot"><span class="annottext">zonkQuoteWrap :: QuoteWrapper -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) QuoteWrapper
</span><a href="#local-6989586621683012352"><span class="hs-identifier hs-var hs-var">zonkQuoteWrap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span id="local-6989586621683012361"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012361"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span id="local-6989586621683012362"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012362"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1255"></span><span>        </span><span id="local-6989586621683012363"><span class="annot"><a href="#local-6989586621683012363"><span class="hs-identifier hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012361"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1256"></span><span>        </span><span id="local-6989586621683012364"><span class="annot"><a href="#local-6989586621683012364"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012362"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1257"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#QuoteWrapper"><span class="hs-identifier hs-type">QuoteWrapper</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012363"><span class="hs-identifier hs-type">ev'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012364"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1258"></span><span>
</span><span id="line-1259"></span><span>    </span><span id="local-6989586621683012354"><span class="annot"><span class="annottext">zonk_b :: PendingTcSplice
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) PendingTcSplice
</span><a href="#local-6989586621683012354"><span class="hs-identifier hs-var hs-var">zonk_b</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-type">PendingTcSplice</span></a></span><span> </span><span id="local-6989586621683012369"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683012369"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621683012370"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012370"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012371"><span class="annot"><a href="#local-6989586621683012371"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012370"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1260"></span><span>                                      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#PendingTcSplice"><span class="hs-identifier hs-type">PendingTcSplice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012369"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012371"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1261"></span><span>
</span><span id="line-1262"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1263"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-type">zonkArithSeq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArithSeqInfo"><span class="hs-identifier hs-type">ArithSeqInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>
</span><span id="line-1265"></span><span id="zonkArithSeq"><span class="annot"><span class="annottext">zonkArithSeq :: ArithSeqInfo GhcTc -&gt; ZonkTcM (ArithSeqInfo GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-var hs-var">zonkArithSeq</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-type">From</span></a></span><span> </span><span id="local-6989586621683012373"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012373"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1266"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012374"><span class="annot"><a href="#local-6989586621683012374"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012373"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1267"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#From"><span class="hs-identifier hs-type">From</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012374"><span class="hs-identifier hs-type">new_e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-type">FromThen</span></a></span><span> </span><span id="local-6989586621683012376"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012376"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012377"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012377"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012378"><span class="annot"><a href="#local-6989586621683012378"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012376"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1271"></span><span>       </span><span id="local-6989586621683012379"><span class="annot"><a href="#local-6989586621683012379"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012377"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1272"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThen"><span class="hs-identifier hs-type">FromThen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012378"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012379"><span class="hs-identifier hs-type">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>
</span><span id="line-1274"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-type">FromTo</span></a></span><span> </span><span id="local-6989586621683012381"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012381"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012382"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012382"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1275"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012383"><span class="annot"><a href="#local-6989586621683012383"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012381"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1276"></span><span>       </span><span id="local-6989586621683012384"><span class="annot"><a href="#local-6989586621683012384"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012382"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1277"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromTo"><span class="hs-identifier hs-type">FromTo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012383"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012384"><span class="hs-identifier hs-type">new_e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkArithSeq"><span class="hs-identifier hs-var">zonkArithSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-type">FromThenTo</span></a></span><span> </span><span id="local-6989586621683012386"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012386"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012387"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012387"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span id="local-6989586621683012388"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012388"><span class="hs-identifier hs-var">e3</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683012389"><span class="annot"><a href="#local-6989586621683012389"><span class="hs-identifier hs-var">new_e1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012386"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1281"></span><span>       </span><span id="local-6989586621683012390"><span class="annot"><a href="#local-6989586621683012390"><span class="hs-identifier hs-var">new_e2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012387"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1282"></span><span>       </span><span id="local-6989586621683012391"><span class="annot"><a href="#local-6989586621683012391"><span class="hs-identifier hs-var">new_e3</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012388"><span class="hs-identifier hs-type">e3</span></a></span><span>
</span><span id="line-1283"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FromThenTo"><span class="hs-identifier hs-type">FromThenTo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012389"><span class="hs-identifier hs-type">new_e1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012390"><span class="hs-identifier hs-type">new_e2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012391"><span class="hs-identifier hs-type">new_e3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1284"></span><span>
</span><span id="line-1285"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1286"></span><span id="local-6989586621683010369"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010369"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1287"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010369"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010369"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010369"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1289"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010369"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1290"></span><span id="zonkStmts"><span class="annot"><span class="annottext">zonkStmts :: forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var hs-var">zonkStmts</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1291"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span id="local-6989586621683012401"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012401"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683012402"><span class="annot"><span class="annottext">LStmt GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012402"><span class="hs-identifier hs-var">s</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621683012403"><span class="annot"><span class="annottext">[LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="#local-6989586621683012403"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012404"><span class="annot"><a href="#local-6989586621683012404"><span class="hs-identifier hs-var">s'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
 -&gt; ZonkBndrTcM (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
-&gt; GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkBndrTcM
     (GenLocated
        SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
forall a b ann.
(a -&gt; ZonkBndrTcM b)
-&gt; GenLocated (EpAnn ann) a
-&gt; ZonkBndrTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkBndrMA"><span class="hs-identifier hs-var">wrapLocZonkBndrMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; ZonkBndrTcM (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; ZonkBndrTcM (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012401"><span class="hs-identifier hs-var">zBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LStmt GhcTc (LocatedA (body GhcTc))
GenLocated SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="#local-6989586621683012402"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1292"></span><span>                            </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012406"><span class="annot"><a href="#local-6989586621683012406"><span class="hs-identifier hs-var">ss'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012401"><span class="hs-identifier hs-type">zBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012403"><span class="hs-identifier hs-type">ss</span></a></span><span>
</span><span id="line-1293"></span><span>                            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012404"><span class="hs-identifier hs-type">s'</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621683012406"><span class="hs-identifier hs-type">ss'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span id="local-6989586621683010502"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-type">zonkStmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010502"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1296"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010502"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010502"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1297"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010502"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1298"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010502"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1299"></span><span id="zonkStmt"><span class="annot"><span class="annottext">zonkStmt :: forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; ZonkBndrTcM (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var hs-var">zonkStmt</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span id="local-6989586621683012510"><span class="annot"><span class="annottext">XParStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012510"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span> </span><span id="local-6989586621683012511"><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621683012511"><span class="hs-identifier hs-var">stmts_w_bndrs</span></a></span></span><span> </span><span id="local-6989586621683012512"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012512"><span class="hs-identifier hs-var">mzip_op</span></a></span></span><span> </span><span id="local-6989586621683012513"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012513"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1300"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012514"><span class="annot"><a href="#local-6989586621683012514"><span class="hs-identifier hs-var">new_bind_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012513"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1301"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012515"><span class="annot"><a href="#local-6989586621683012515"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012510"><span class="hs-identifier hs-type">bind_ty</span></a></span><span>
</span><span id="line-1302"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012516"><span class="annot"><a href="#local-6989586621683012516"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621683012517"><span class="hs-identifier hs-type">zonk_branch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012511"><span class="hs-identifier hs-type">stmts_w_bndrs</span></a></span><span>
</span><span id="line-1303"></span><span>
</span><span id="line-1304"></span><span>       </span><span class="hs-comment">-- Add in the binders after we're done with all the branches.</span><span>
</span><span id="line-1305"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683012518"><span class="annot"><a href="#local-6989586621683012518"><span class="hs-identifier hs-var hs-var">new_binders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012519"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012521"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621683012521"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ParStmtBlock GhcTc GhcTc]
</span><a href="#local-6989586621683012516"><span class="hs-identifier hs-var">new_stmts_w_bndrs</span></a></span><span>
</span><span id="line-1306"></span><span>                           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621683012519"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012519"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
[Id]
</span><a href="#local-6989586621683012521"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1307"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012518"><span class="hs-identifier hs-type">new_binders</span></a></span><span>
</span><span id="line-1308"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012522"><span class="annot"><a href="#local-6989586621683012522"><span class="hs-identifier hs-var">new_mzip</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012512"><span class="hs-identifier hs-type">mzip_op</span></a></span><span>
</span><span id="line-1309"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmt"><span class="hs-identifier hs-type">ParStmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012515"><span class="hs-identifier hs-type">new_bind_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012516"><span class="hs-identifier hs-type">new_stmts_w_bndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012522"><span class="hs-identifier hs-type">new_mzip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012514"><span class="hs-identifier hs-type">new_bind_op</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-1310"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1311"></span><span>    </span><span class="annot"><a href="#local-6989586621683012517"><span class="hs-identifier hs-type">zonk_branch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1312"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span>    </span><span id="local-6989586621683012517"><span class="annot"><span class="annottext">zonk_branch :: ParStmtBlock GhcTc GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc)
</span><a href="#local-6989586621683012517"><span class="hs-identifier hs-var hs-var">zonk_branch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span id="local-6989586621683012523"><span class="annot"><span class="annottext">XParStmtBlock GhcTc GhcTc
</span><a href="#local-6989586621683012523"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012524"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012524"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621683012525"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621683012525"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621683012526"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012526"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1314"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; forall r.
   ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
[LStmt GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="#local-6989586621683012524"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
-&gt; ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012527"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012527"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1315"></span><span>         </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; forall r.
   (SyntaxExprTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012526"><span class="hs-identifier hs-var">return_op</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">((SyntaxExprTc
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
-&gt; (SyntaxExprTc
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ParStmtBlock GhcTc GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012528"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012528"><span class="hs-identifier hs-var">new_return</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1316"></span><span>         </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012529"><span class="annot"><a href="#local-6989586621683012529"><span class="hs-identifier hs-var">new_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOccs"><span class="hs-identifier hs-var">zonkIdOccs</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcTc]
[Id]
</span><a href="#local-6989586621683012525"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1317"></span><span>            </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ParStmtBlock"><span class="hs-identifier hs-type">ParStmtBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012523"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012527"><span class="hs-identifier hs-type">new_stmts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012529"><span class="hs-identifier hs-type">new_bndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012528"><span class="hs-identifier hs-type">new_return</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1318"></span><span>
</span><span id="line-1319"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621683012530"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012530"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_stmts :: forall idL idR body.
StmtLR idL idR body -&gt; XRec idR [LStmtLR idL idR body]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012533"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))]
</span><a href="#local-6989586621683012533"><span class="hs-identifier hs-var">segStmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012535"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621683012535"><span class="hs-identifier hs-var">lvs</span></a></span></span><span>
</span><span id="line-1320"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_ids :: forall idL idR body. StmtLR idL idR body -&gt; [IdP idR]
</span><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012537"><span class="annot"><span class="annottext">[IdP GhcTc]
</span><a href="#local-6989586621683012537"><span class="hs-identifier hs-var">rvs</span></a></span></span><span>
</span><span id="line-1321"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012539"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012539"><span class="hs-identifier hs-var">ret_id</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_mfix_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012541"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012541"><span class="hs-identifier hs-var">mfix_id</span></a></span></span><span>
</span><span id="line-1322"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_bind_fn :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012543"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012543"><span class="hs-identifier hs-var">bind_id</span></a></span></span><span>
</span><span id="line-1323"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XRecStmt idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1324"></span><span>                                   </span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recS_bind_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012547"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012547"><span class="hs-identifier hs-var">bind_ty</span></a></span></span><span>
</span><span id="line-1325"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_later_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012549"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621683012549"><span class="hs-identifier hs-var">later_rets</span></a></span></span><span>
</span><span id="line-1326"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_rec_rets :: RecStmtTc -&gt; [HsExpr GhcTc]
</span><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012551"><span class="annot"><span class="annottext">[HsExpr GhcTc]
</span><a href="#local-6989586621683012551"><span class="hs-identifier hs-var">rec_rets</span></a></span></span><span>
</span><span id="line-1327"></span><span>                                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recS_ret_ty :: RecStmtTc -&gt; Kind
</span><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012553"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012553"><span class="hs-identifier hs-var">ret_ty</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1328"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012554"><span class="annot"><a href="#local-6989586621683012554"><span class="hs-identifier hs-var">new_bind_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012543"><span class="hs-identifier hs-var">bind_id</span></a></span><span>
</span><span id="line-1329"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012555"><span class="annot"><a href="#local-6989586621683012555"><span class="hs-identifier hs-var">new_mfix_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012541"><span class="hs-identifier hs-type">mfix_id</span></a></span><span>
</span><span id="line-1330"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012556"><span class="annot"><a href="#local-6989586621683012556"><span class="hs-identifier hs-var">new_ret_id</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012539"><span class="hs-identifier hs-type">ret_id</span></a></span><span>
</span><span id="line-1331"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012557"><span class="annot"><a href="#local-6989586621683012557"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012547"><span class="hs-identifier hs-type">bind_ty</span></a></span><span>
</span><span id="line-1332"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012558"><span class="annot"><a href="#local-6989586621683012558"><span class="hs-identifier hs-var">new_rvs</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrs"><span class="hs-identifier hs-type">zonkIdBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012537"><span class="hs-identifier hs-type">rvs</span></a></span><span>
</span><span id="line-1333"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012559"><span class="annot"><a href="#local-6989586621683012559"><span class="hs-identifier hs-var">new_lvs</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrs"><span class="hs-identifier hs-type">zonkIdBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012535"><span class="hs-identifier hs-type">lvs</span></a></span><span>
</span><span id="line-1334"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012560"><span class="annot"><a href="#local-6989586621683012560"><span class="hs-identifier hs-var">new_ret_ty</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012553"><span class="hs-identifier hs-type">ret_ty</span></a></span><span>
</span><span id="line-1335"></span><span>
</span><span id="line-1336"></span><span>    </span><span class="hs-comment">-- Zonk the ret-expressions in an environment that</span><span>
</span><span id="line-1337"></span><span>    </span><span class="hs-comment">-- has the polymorphic bindings</span><span>
</span><span id="line-1338"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012561"><span class="annot"><a href="#local-6989586621683012561"><span class="hs-identifier hs-var">rec_stmt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-type">don'tBind</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1339"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012558"><span class="hs-identifier hs-type">new_rvs</span></a></span><span>
</span><span id="line-1340"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012562"><span class="annot"><a href="#local-6989586621683012562"><span class="hs-identifier hs-var">new_segStmts</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012530"><span class="hs-identifier hs-type">zBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012533"><span class="hs-identifier hs-type">segStmts</span></a></span><span>
</span><span id="line-1341"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012563"><span class="annot"><a href="#local-6989586621683012563"><span class="hs-identifier hs-var">new_later_rets</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012549"><span class="hs-identifier hs-type">later_rets</span></a></span><span>
</span><span id="line-1342"></span><span>             </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012564"><span class="annot"><a href="#local-6989586621683012564"><span class="hs-identifier hs-var">new_rec_rets</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012551"><span class="hs-identifier hs-type">rec_rets</span></a></span><span>
</span><span id="line-1343"></span><span>             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1344"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecStmt"><span class="hs-identifier hs-type">RecStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_stmts"><span class="hs-identifier hs-var">recS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-type">noLocA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012562"><span class="hs-identifier hs-type">new_segStmts</span></a></span><span>
</span><span id="line-1345"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_later_ids"><span class="hs-identifier hs-var">recS_later_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012559"><span class="hs-identifier hs-type">new_lvs</span></a></span><span>
</span><span id="line-1346"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_rec_ids"><span class="hs-identifier hs-var">recS_rec_ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012558"><span class="hs-identifier hs-type">new_rvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_ret_fn"><span class="hs-identifier hs-var">recS_ret_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012556"><span class="hs-identifier hs-type">new_ret_id</span></a></span><span>
</span><span id="line-1347"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_mfix_fn"><span class="hs-identifier hs-var">recS_mfix_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012555"><span class="hs-identifier hs-type">new_mfix_id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_bind_fn"><span class="hs-identifier hs-var">recS_bind_fn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012554"><span class="hs-identifier hs-type">new_bind_id</span></a></span><span>
</span><span id="line-1348"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#recS_ext"><span class="hs-identifier hs-var">recS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#RecStmtTc"><span class="hs-identifier hs-type">RecStmtTc</span></a></span><span>
</span><span id="line-1349"></span><span>                           </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#recS_bind_ty"><span class="hs-identifier hs-var">recS_bind_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012557"><span class="hs-identifier hs-type">new_bind_ty</span></a></span><span>
</span><span id="line-1350"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#recS_later_rets"><span class="hs-identifier hs-var">recS_later_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012563"><span class="hs-identifier hs-type">new_later_rets</span></a></span><span>
</span><span id="line-1351"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#recS_rec_rets"><span class="hs-identifier hs-var">recS_rec_rets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012564"><span class="hs-identifier hs-type">new_rec_rets</span></a></span><span>
</span><span id="line-1352"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#recS_ret_ty"><span class="hs-identifier hs-var">recS_ret_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012560"><span class="hs-identifier hs-type">new_ret_ty</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1353"></span><span>
</span><span id="line-1354"></span><span>    </span><span class="hs-comment">-- Only the lvs are needed</span><span>
</span><span id="line-1355"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-type">extendIdZonkEnvRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012559"><span class="hs-identifier hs-type">new_lvs</span></a></span><span>
</span><span id="line-1356"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683012561"><span class="hs-identifier hs-type">rec_stmt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1357"></span><span>
</span><span id="line-1358"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621683012566"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012566"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span id="local-6989586621683012568"><span class="annot"><span class="annottext">XBodyStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012568"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012569"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683012569"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621683012570"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012570"><span class="hs-identifier hs-var">then_op</span></a></span></span><span> </span><span id="local-6989586621683012571"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012571"><span class="hs-identifier hs-var">guard_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1359"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012572"><span class="annot"><a href="#local-6989586621683012572"><span class="hs-identifier hs-var">new_then_op</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012570"><span class="hs-identifier hs-var">then_op</span></a></span><span>
</span><span id="line-1360"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012573"><span class="annot"><a href="#local-6989586621683012573"><span class="hs-identifier hs-var">new_guard_op</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012571"><span class="hs-identifier hs-type">guard_op</span></a></span><span>
</span><span id="line-1361"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012574"><span class="annot"><a href="#local-6989586621683012574"><span class="hs-identifier hs-var">new_body</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683012566"><span class="hs-identifier hs-type">zBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012569"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1362"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012575"><span class="annot"><a href="#local-6989586621683012575"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621683012568"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1363"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012575"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012574"><span class="hs-identifier hs-type">new_body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012572"><span class="hs-identifier hs-type">new_then_op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012573"><span class="hs-identifier hs-type">new_guard_op</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621683012576"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012576"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span id="local-6989586621683012578"><span class="annot"><span class="annottext">XLastStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012578"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012579"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683012579"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621683012580"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621683012580"><span class="hs-identifier hs-var">noret</span></a></span></span><span> </span><span id="local-6989586621683012581"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012581"><span class="hs-identifier hs-var">ret_op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkT
  (IOEnv (Env TcGblEnv TcLclEnv))
  (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT
   (IOEnv (Env TcGblEnv TcLclEnv))
   (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; forall r.
   (SyntaxExprTc -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012581"><span class="hs-identifier hs-var">ret_op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((SyntaxExprTc
  -&gt; ZonkT
       (IOEnv (Env TcGblEnv TcLclEnv))
       (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
-&gt; (SyntaxExprTc
    -&gt; ZonkT
         (IOEnv (Env TcGblEnv TcLclEnv))
         (StmtLR GhcTc GhcTc (LocatedA (body GhcTc))))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012582"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012582"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1367"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012583"><span class="annot"><a href="#local-6989586621683012583"><span class="hs-identifier hs-var">new_body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012576"><span class="hs-identifier hs-var">zBody</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683012579"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-1368"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LastStmt"><span class="hs-identifier hs-type">LastStmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012578"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012583"><span class="hs-identifier hs-type">new_body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012580"><span class="hs-identifier hs-type">noret</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012582"><span class="hs-identifier hs-type">new_ret</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">trS_stmts :: forall idL idR body. StmtLR idL idR body -&gt; [ExprLStmt idL]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012586"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012586"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bndrs :: forall idL idR body. StmtLR idL idR body -&gt; [(IdP idR, IdP idR)]
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012588"><span class="annot"><span class="annottext">[(IdP GhcTc, IdP GhcTc)]
</span><a href="#local-6989586621683012588"><span class="hs-identifier hs-var">binderMap</span></a></span></span><span>
</span><span id="line-1371"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_by :: forall idL idR body. StmtLR idL idR body -&gt; Maybe (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012590"><span class="annot"><span class="annottext">Maybe (LHsExpr GhcTc)
</span><a href="#local-6989586621683012590"><span class="hs-identifier hs-var">by</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_form :: forall idL idR body. StmtLR idL idR body -&gt; TransForm
</span><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012592"><span class="annot"><span class="annottext">TransForm
</span><a href="#local-6989586621683012592"><span class="hs-identifier hs-var">form</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_using :: forall idL idR body. StmtLR idL idR body -&gt; LHsExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012594"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012594"><span class="hs-identifier hs-var">using</span></a></span></span><span>
</span><span id="line-1372"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ret :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012596"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012596"><span class="hs-identifier hs-var">return_op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_bind :: forall idL idR body. StmtLR idL idR body -&gt; SyntaxExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012598"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012598"><span class="hs-identifier hs-var">bind_op</span></a></span></span><span>
</span><span id="line-1373"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_ext :: forall idL idR body. StmtLR idL idR body -&gt; XTransStmt idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012600"><span class="annot"><span class="annottext">XTransStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012600"><span class="hs-identifier hs-var">bind_arg_ty</span></a></span></span><span>
</span><span id="line-1374"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">trS_fmap :: forall idL idR body. StmtLR idL idR body -&gt; HsExpr idR
</span><a href="Language.Haskell.Syntax.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012602"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012602"><span class="hs-identifier hs-var">liftM_op</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1375"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012603"><span class="annot"><a href="#local-6989586621683012603"><span class="hs-identifier hs-var">bind_op'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012598"><span class="hs-identifier hs-var">bind_op</span></a></span><span>
</span><span id="line-1376"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012604"><span class="annot"><a href="#local-6989586621683012604"><span class="hs-identifier hs-var">bind_arg_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012600"><span class="hs-identifier hs-type">bind_arg_ty</span></a></span><span>
</span><span id="line-1377"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012605"><span class="annot"><a href="#local-6989586621683012605"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-type">zonkStmts</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012586"><span class="hs-identifier hs-type">stmts</span></a></span><span>
</span><span id="line-1378"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012606"><span class="annot"><a href="#local-6989586621683012606"><span class="hs-identifier hs-var">by'</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012590"><span class="hs-identifier hs-type">by</span></a></span><span>
</span><span id="line-1379"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012607"><span class="annot"><a href="#local-6989586621683012607"><span class="hs-identifier hs-var">using'</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012594"><span class="hs-identifier hs-type">using</span></a></span><span>
</span><span id="line-1380"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012608"><span class="annot"><a href="#local-6989586621683012608"><span class="hs-identifier hs-var">return_op'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012596"><span class="hs-identifier hs-type">return_op</span></a></span><span>
</span><span id="line-1381"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012609"><span class="annot"><a href="#local-6989586621683012609"><span class="hs-identifier hs-var">liftM_op'</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-type">zonkExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012602"><span class="hs-identifier hs-type">liftM_op</span></a></span><span>
</span><span id="line-1382"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012610"><span class="annot"><a href="#local-6989586621683012610"><span class="hs-identifier hs-var">binderMap'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621683012611"><span class="hs-identifier hs-type">zonkBinderMapEntry</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012588"><span class="hs-identifier hs-type">binderMap</span></a></span><span>
</span><span id="line-1383"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#TransStmt"><span class="hs-identifier hs-type">TransStmt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_stmts"><span class="hs-identifier hs-var">trS_stmts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012605"><span class="hs-identifier hs-type">stmts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_bndrs"><span class="hs-identifier hs-var">trS_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012610"><span class="hs-identifier hs-type">binderMap'</span></a></span><span>
</span><span id="line-1384"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_by"><span class="hs-identifier hs-var">trS_by</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012606"><span class="hs-identifier hs-type">by'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_form"><span class="hs-identifier hs-var">trS_form</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012592"><span class="hs-identifier hs-type">form</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_using"><span class="hs-identifier hs-var">trS_using</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012607"><span class="hs-identifier hs-type">using'</span></a></span><span>
</span><span id="line-1385"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_ret"><span class="hs-identifier hs-var">trS_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012608"><span class="hs-identifier hs-type">return_op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_bind"><span class="hs-identifier hs-var">trS_bind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012603"><span class="hs-identifier hs-type">bind_op'</span></a></span><span>
</span><span id="line-1386"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_ext"><span class="hs-identifier hs-var">trS_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012604"><span class="hs-identifier hs-type">bind_arg_ty'</span></a></span><span>
</span><span id="line-1387"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#trS_fmap"><span class="hs-identifier hs-var">trS_fmap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012609"><span class="hs-identifier hs-type">liftM_op'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1389"></span><span>    </span><span id="local-6989586621683012611"><span class="annot"><span class="annottext">zonkBinderMapEntry :: (Id, Id) -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, Id)
</span><a href="#local-6989586621683012611"><span class="hs-identifier hs-var hs-var">zonkBinderMapEntry</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683012616"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012616"><span class="hs-identifier hs-var">oldBinder</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683012617"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012617"><span class="hs-identifier hs-var">newBinder</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1390"></span><span>        </span><span id="local-6989586621683012618"><span class="annot"><a href="#local-6989586621683012618"><span class="hs-identifier hs-var">oldBinder'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012616"><span class="hs-identifier hs-var">oldBinder</span></a></span><span>
</span><span id="line-1391"></span><span>        </span><span id="local-6989586621683012619"><span class="annot"><a href="#local-6989586621683012619"><span class="hs-identifier hs-var">newBinder'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-type">zonkIdBndrX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012617"><span class="hs-identifier hs-type">newBinder</span></a></span><span>
</span><span id="line-1392"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012618"><span class="hs-identifier hs-type">oldBinder'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683012619"><span class="hs-identifier hs-type">newBinder'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-type">LetStmt</span></a></span><span> </span><span id="local-6989586621683012621"><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012621"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012622"><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012622"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (LocatedA (body GhcTc))
-&gt; HsLocalBinds GhcTc -&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc))
forall idL idR body.
XLetStmt idL idR body
-&gt; HsLocalBindsLR idL idR -&gt; StmtLR idL idR body
</span><a href="Language.Haskell.Syntax.Expr.html#LetStmt"><span class="hs-identifier hs-var">LetStmt</span></a></span><span> </span><span class="annot"><span class="annottext">XLetStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012621"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">(HsLocalBinds GhcTc -&gt; StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
-&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc -&gt; ZonkBndrTcM (HsLocalBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLocalBinds"><span class="hs-identifier hs-var">zonkLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><a href="#local-6989586621683012622"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621683012623"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012623"><span class="hs-identifier hs-var">zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span> </span><span id="local-6989586621683012625"><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012625"><span class="hs-identifier hs-var">xbs</span></a></span></span><span> </span><span id="local-6989586621683012626"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012626"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012627"><span class="annot"><span class="annottext">LocatedA (body GhcTc)
</span><a href="#local-6989586621683012627"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1398"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012628"><span class="annot"><a href="#local-6989586621683012628"><span class="hs-identifier hs-var">new_bind</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBindStmtTc -&gt; SyntaxExpr GhcTc
</span><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var">xbstc_bindOp</span></a></span><span> </span><span class="annot"><span class="annottext">XBindStmt GhcTc GhcTc (LocatedA (body GhcTc))
XBindStmtTc
</span><a href="#local-6989586621683012625"><span class="hs-identifier hs-var">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1399"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012630"><span class="annot"><a href="#local-6989586621683012630"><span class="hs-identifier hs-var">new_w</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012625"><span class="hs-identifier hs-type">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1400"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012632"><span class="annot"><a href="#local-6989586621683012632"><span class="hs-identifier hs-var">new_bind_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012625"><span class="hs-identifier hs-type">xbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012634"><span class="annot"><a href="#local-6989586621683012634"><span class="hs-identifier hs-var">new_body</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683012623"><span class="hs-identifier hs-type">zBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012627"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1402"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012635"><span class="annot"><a href="#local-6989586621683012635"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var">xbstc_failOp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012625"><span class="hs-identifier hs-type">xbs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1403"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1404"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683012637"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012637"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a b.
(a -&gt; b)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc))
-&gt; (ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
    -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkBndrT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-var">don'tBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012637"><span class="hs-identifier hs-var">fail_op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012638"><span class="annot"><a href="#local-6989586621683012638"><span class="hs-identifier hs-var">new_pat</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012626"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-1407"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1408"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BindStmt"><span class="hs-identifier hs-type">BindStmt</span></a></span><span>
</span><span id="line-1409"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#XBindStmtTc"><span class="hs-identifier hs-type">XBindStmtTc</span></a></span><span>
</span><span id="line-1410"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_bindOp"><span class="hs-identifier hs-var">xbstc_bindOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012628"><span class="hs-identifier hs-type">new_bind</span></a></span><span>
</span><span id="line-1411"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_boundResultType"><span class="hs-identifier hs-var">xbstc_boundResultType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012632"><span class="hs-identifier hs-type">new_bind_ty</span></a></span><span>
</span><span id="line-1412"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_boundResultMult"><span class="hs-identifier hs-var">xbstc_boundResultMult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012630"><span class="hs-identifier hs-type">new_w</span></a></span><span>
</span><span id="line-1413"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#xbstc_failOp"><span class="hs-identifier hs-var">xbstc_failOp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012635"><span class="hs-identifier hs-type">new_fail</span></a></span><span>
</span><span id="line-1414"></span><span>              </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1415"></span><span>            </span><span class="annot"><a href="#local-6989586621683012638"><span class="hs-identifier hs-type">new_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012634"><span class="hs-identifier hs-type">new_body</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1416"></span><span>
</span><span id="line-1417"></span><span class="hs-comment">-- Scopes: join &gt; ops (in reverse order) &gt; pats (in forward order)</span><span>
</span><span id="line-1418"></span><span class="hs-comment">--              &gt; rest of stmts</span><span>
</span><span id="line-1419"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkStmt"><span class="hs-identifier hs-var">zonkStmt</span></a></span><span> </span><span id="local-6989586621683012640"><span class="annot"><span class="annottext">LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc))
</span><a href="#local-6989586621683012640"><span class="hs-identifier hs-var">_zBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XStmtLR"><span class="hs-identifier hs-type">XStmtLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span id="local-6989586621683012643"><span class="annot"><span class="annottext">XApplicativeStmt GhcTc GhcTc
</span><a href="#local-6989586621683012643"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span> </span><span id="local-6989586621683012644"><span class="annot"><span class="annottext">[(SyntaxExpr GhcTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012644"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621683012645"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621683012645"><span class="hs-identifier hs-var">mb_join</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012646"><span class="annot"><a href="#local-6989586621683012646"><span class="hs-identifier hs-var">new_mb_join</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
</span><a href="#local-6989586621683012647"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
Maybe SyntaxExprTc
</span><a href="#local-6989586621683012645"><span class="hs-identifier hs-var">mb_join</span></a></span><span>
</span><span id="line-1421"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012648"><span class="annot"><a href="#local-6989586621683012648"><span class="hs-identifier hs-var">new_args</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683012649"><span class="hs-identifier hs-type">zonk_args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012644"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1422"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012650"><span class="annot"><a href="#local-6989586621683012650"><span class="hs-identifier hs-var">new_body_ty</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012643"><span class="hs-identifier hs-type">body_ty</span></a></span><span>
</span><span id="line-1423"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XStmtLR"><span class="hs-identifier hs-type">XStmtLR</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeStmt"><span class="hs-identifier hs-type">ApplicativeStmt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012650"><span class="hs-identifier hs-type">new_body_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012648"><span class="hs-identifier hs-type">new_args</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012646"><span class="hs-identifier hs-type">new_mb_join</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1424"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1425"></span><span>    </span><span id="local-6989586621683012647"><span class="annot"><span class="annottext">zonk_join :: Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
</span><a href="#local-6989586621683012647"><span class="hs-identifier hs-var hs-var">zonk_join</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1426"></span><span>    </span><span class="annot"><a href="#local-6989586621683012647"><span class="hs-identifier hs-var">zonk_join</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683012653"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012653"><span class="hs-identifier hs-var">j</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621683012653"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span>    </span><span class="annot"><a href="#local-6989586621683012654"><span class="hs-identifier hs-type">get_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1429"></span><span>    </span><span id="local-6989586621683012654"><span class="annot"><span class="annottext">get_pat :: (SyntaxExpr GhcTc, ApplicativeArg GhcTc) -&gt; LPat GhcTc
</span><a href="#local-6989586621683012654"><span class="hs-identifier hs-var hs-var">get_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012656"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012656"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012656"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1430"></span><span>    </span><span class="annot"><a href="#local-6989586621683012654"><span class="hs-identifier hs-var">get_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012658"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012658"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012658"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1431"></span><span>
</span><span id="line-1432"></span><span>    </span><span class="annot"><a href="#local-6989586621683012659"><span class="hs-identifier hs-type">replace_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1433"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArg"><span class="hs-identifier hs-type">ApplicativeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>    </span><span id="local-6989586621683012659"><span class="annot"><span class="annottext">replace_pat :: LPat GhcTc
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
-&gt; (SyntaxExpr GhcTc, ApplicativeArg GhcTc)
</span><a href="#local-6989586621683012659"><span class="hs-identifier hs-var hs-var">replace_pat</span></a></span></span><span> </span><span id="local-6989586621683012660"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012660"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683012661"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012661"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621683012662"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621683012662"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012663"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012663"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621683012664"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683012664"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1436"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012661"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
-&gt; LPat GhcTc -&gt; LHsExpr GhcTc -&gt; Bool -&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgOne idL
-&gt; LPat idL -&gt; LHsExpr idL -&gt; Bool -&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-var">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621683012662"><span class="hs-identifier hs-var">fail_op</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012660"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012663"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683012664"><span class="hs-identifier hs-var">isBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1437"></span><span>    </span><span class="annot"><a href="#local-6989586621683012659"><span class="hs-identifier hs-var">replace_pat</span></a></span><span> </span><span id="local-6989586621683012665"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012665"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683012666"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012666"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621683012667"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621683012667"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012668"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012668"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621683012669"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012669"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683012670"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683012670"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012666"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
-&gt; [GuardLStmt GhcTc]
-&gt; HsExpr GhcTc
-&gt; LPat GhcTc
-&gt; HsDoFlavour
-&gt; ApplicativeArg GhcTc
forall idL.
XApplicativeArgMany idL
-&gt; [ExprLStmt idL]
-&gt; HsExpr idL
-&gt; LPat idL
-&gt; HsDoFlavour
-&gt; ApplicativeArg idL
</span><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-var">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621683012667"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012668"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012669"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012665"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683012670"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>
</span><span id="line-1440"></span><span>    </span><span id="local-6989586621683012649"><span class="annot"><span class="annottext">zonk_args :: [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012649"><span class="hs-identifier hs-var hs-var">zonk_args</span></a></span></span><span> </span><span id="local-6989586621683012676"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012676"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1441"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012677"><span class="annot"><a href="#local-6989586621683012677"><span class="hs-identifier hs-var">new_args_rev</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012678"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012676"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1442"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012680"><span class="annot"><a href="#local-6989586621683012680"><span class="hs-identifier hs-var">new_pats</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621683012654"><span class="hs-identifier hs-type">get_pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012676"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1443"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#zipWithEqual"><span class="hs-identifier hs-type">zipWithEqual</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;zonkStmt&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621683012659"><span class="hs-identifier hs-type">replace_pat</span></a></span><span>
</span><span id="line-1444"></span><span>                        </span><span class="annot"><a href="#local-6989586621683012680"><span class="hs-identifier hs-type">new_pats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">reverse</span></span><span> </span><span class="annot"><a href="#local-6989586621683012677"><span class="hs-identifier hs-type">new_args_rev</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1445"></span><span>
</span><span id="line-1446"></span><span>     </span><span class="hs-comment">-- these need to go backward, because if any operators are higher-rank,</span><span>
</span><span id="line-1447"></span><span>     </span><span class="hs-comment">-- later operators may introduce skolems that are in scope for earlier</span><span>
</span><span id="line-1448"></span><span>     </span><span class="hs-comment">-- arguments</span><span>
</span><span id="line-1449"></span><span>    </span><span id="local-6989586621683012678"><span class="annot"><span class="annottext">zonk_args_rev :: [(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012678"><span class="hs-identifier hs-var hs-var">zonk_args_rev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621683012688"><span class="annot"><span class="annottext">SyntaxExprTc
</span><a href="#local-6989586621683012688"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683012689"><span class="annot"><span class="annottext">ApplicativeArg GhcTc
</span><a href="#local-6989586621683012689"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621683012690"><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
</span><a href="#local-6989586621683012690"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1450"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012691"><span class="annot"><a href="#local-6989586621683012691"><span class="hs-identifier hs-var">new_op</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621683012688"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1451"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012692"><span class="annot"><a href="#local-6989586621683012692"><span class="hs-identifier hs-var">new_arg</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683012693"><span class="hs-identifier hs-type">zonk_arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012689"><span class="hs-identifier hs-type">arg</span></a></span><span>
</span><span id="line-1452"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012694"><span class="annot"><a href="#local-6989586621683012694"><span class="hs-identifier hs-var">new_args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683012678"><span class="hs-identifier hs-type">zonk_args_rev</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012690"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1453"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012691"><span class="hs-identifier hs-type">new_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683012692"><span class="hs-identifier hs-type">new_arg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621683012694"><span class="hs-identifier hs-type">new_args</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1454"></span><span>    </span><span class="annot"><a href="#local-6989586621683012678"><span class="hs-identifier hs-var">zonk_args_rev</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(SyntaxExprTc, ApplicativeArg GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [(SyntaxExprTc, ApplicativeArg GhcTc)]
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span>    </span><span id="local-6989586621683012693"><span class="annot"><span class="annottext">zonk_arg :: ApplicativeArg GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ApplicativeArg GhcTc)
</span><a href="#local-6989586621683012693"><span class="hs-identifier hs-var hs-var">zonk_arg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span id="local-6989586621683012706"><span class="annot"><span class="annottext">XApplicativeArgOne GhcTc
</span><a href="#local-6989586621683012706"><span class="hs-identifier hs-var">fail_op</span></a></span></span><span> </span><span id="local-6989586621683012707"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012707"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012708"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012708"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012709"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683012709"><span class="hs-identifier hs-var">isBody</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012710"><span class="annot"><a href="#local-6989586621683012710"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012708"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1458"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012711"><span class="annot"><a href="#local-6989586621683012711"><span class="hs-identifier hs-var">new_fail</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">forM</span></span><span> </span><span class="annot"><a href="#local-6989586621683012706"><span class="hs-identifier hs-type">fail_op</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#don%27tBind"><span class="hs-identifier hs-type">don'tBind</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span>
</span><span id="line-1459"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgOne"><span class="hs-identifier hs-type">ApplicativeArgOne</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012711"><span class="hs-identifier hs-type">new_fail</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012707"><span class="hs-identifier hs-type">pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012710"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012709"><span class="hs-identifier hs-type">isBody</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1460"></span><span>    </span><span class="annot"><a href="#local-6989586621683012693"><span class="hs-identifier hs-var">zonk_arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span id="local-6989586621683012713"><span class="annot"><span class="annottext">XApplicativeArgMany GhcTc
</span><a href="#local-6989586621683012713"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012714"><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
</span><a href="#local-6989586621683012714"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621683012715"><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012715"><span class="hs-identifier hs-var">ret</span></a></span></span><span> </span><span id="local-6989586621683012716"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012716"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012717"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621683012717"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; forall r.
   ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (HsExpr GhcTc))]
forall (body :: * -&gt; *).
(Anno (StmtLR GhcTc GhcTc (LocatedA (body GhcTc)))
 ~ SrcSpanAnnA) =&gt;
(LocatedA (body GhcTc) -&gt; ZonkTcM (LocatedA (body GhcTc)))
-&gt; [LStmt GhcTc (LocatedA (body GhcTc))]
-&gt; ZonkBndrTcM [LStmt GhcTc (LocatedA (body GhcTc))]
</span><a href="GHC.Tc.Zonk.Type.html#zonkStmts"><span class="hs-identifier hs-var">zonkStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
LocatedA (HsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LocatedA (HsExpr GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[GuardLStmt GhcTc]
[LStmt GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="#local-6989586621683012714"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated
     SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
  -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ApplicativeArg GhcTc))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ApplicativeArg GhcTc))
-&gt; ([GenLocated
       SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ApplicativeArg GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (ApplicativeArg GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012718"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (StmtLR GhcTc GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012718"><span class="hs-identifier hs-var">new_stmts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1462"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012719"><span class="annot"><a href="#local-6989586621683012719"><span class="hs-identifier hs-var">new_ret</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (HsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkExpr"><span class="hs-identifier hs-var">zonkExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621683012715"><span class="hs-identifier hs-var">ret</span></a></span><span>
</span><span id="line-1463"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#ApplicativeArgMany"><span class="hs-identifier hs-type">ApplicativeArgMany</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012713"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012718"><span class="hs-identifier hs-type">new_stmts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012719"><span class="hs-identifier hs-type">new_ret</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012716"><span class="hs-identifier hs-type">pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012717"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1464"></span><span>
</span><span id="line-1465"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-1466"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRecFields"><span class="hs-identifier hs-type">zonkRecFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span id="zonkRecFields"><span class="annot"><span class="annottext">zonkRecFields :: HsRecordBinds GhcTc -&gt; ZonkTcM (HsRecordBinds GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRecFields"><span class="hs-identifier hs-var hs-var">zonkRecFields</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621683012721"><span class="annot"><span class="annottext">XHsRecFields GhcTc
</span><a href="#local-6989586621683012721"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012722"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621683012722"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621683012723"><span class="annot"><span class="annottext">Maybe (XRec GhcTc RecFieldsDotDot)
</span><a href="#local-6989586621683012723"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1468"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012724"><span class="annot"><a href="#local-6989586621683012724"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (LocatedA (HsExpr GhcTc)))
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated
         SrcSpanAnnA
         (HsFieldBind
            (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
            (LocatedA (HsExpr GhcTc)))))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (LocatedA (HsExpr GhcTc)))]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
           (LocatedA (HsExpr GhcTc)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
     (LocatedA (HsExpr GhcTc)))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
           (LocatedA (HsExpr GhcTc))))
forall {l} {ann}.
GenLocated
  l
  (HsFieldBind
     (GenLocated (EpAnn ann) (FieldOcc GhcTc))
     (LocatedA (HsExpr GhcTc)))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated
        l
        (HsFieldBind
           (GenLocated (EpAnn ann) (FieldOcc GhcTc))
           (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621683012725"><span class="hs-identifier hs-var">zonk_rbind</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LHsExpr GhcTc)]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621683012722"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1469"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012721"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012724"><span class="hs-identifier hs-type">flds'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012723"><span class="hs-identifier hs-type">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1470"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1471"></span><span>    </span><span id="local-6989586621683012725"><span class="annot"><span class="annottext">zonk_rbind :: GenLocated
  l
  (HsFieldBind
     (GenLocated (EpAnn ann) (FieldOcc GhcTc))
     (LocatedA (HsExpr GhcTc)))
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated
        l
        (HsFieldBind
           (GenLocated (EpAnn ann) (FieldOcc GhcTc))
           (LocatedA (HsExpr GhcTc))))
</span><a href="#local-6989586621683012725"><span class="hs-identifier hs-var hs-var">zonk_rbind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012730"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621683012730"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012731"><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn ann) (FieldOcc GhcTc)) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683012731"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012732"><span class="annot"><a href="#local-6989586621683012732"><span class="hs-identifier hs-var">new_id</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcTc -&gt; ZonkTcM (FieldOcc GhcTc))
-&gt; GenLocated (EpAnn ann) (FieldOcc GhcTc)
-&gt; ZonkTcM (GenLocated (EpAnn ann) (FieldOcc GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcTc -&gt; ZonkTcM (FieldOcc GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkFieldOcc"><span class="hs-identifier hs-var">zonkFieldOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn ann) (FieldOcc GhcTc)) (LocatedA (HsExpr GhcTc))
-&gt; GenLocated (EpAnn ann) (FieldOcc GhcTc)
forall lhs rhs. HsFieldBind lhs rhs -&gt; lhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (EpAnn ann) (FieldOcc GhcTc)) (LocatedA (HsExpr GhcTc))
</span><a href="#local-6989586621683012731"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1473"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012734"><span class="annot"><a href="#local-6989586621683012734"><span class="hs-identifier hs-var">new_expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012731"><span class="hs-identifier hs-type">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012730"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683012731"><span class="hs-identifier hs-type">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012732"><span class="hs-identifier hs-type">new_id</span></a></span><span>
</span><span id="line-1475"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012734"><span class="hs-identifier hs-type">new_expr</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1476"></span><span>
</span><span id="line-1477"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Pats]{Patterns}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1484"></span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1487"></span><span class="hs-comment">-- Extend the environment as we go, because it's possible for one</span><span>
</span><span id="line-1488"></span><span class="hs-comment">-- pattern to bind something that is used in another (inside or</span><span>
</span><span id="line-1489"></span><span class="hs-comment">-- to the right)</span><span>
</span><span id="line-1490"></span><span id="zonkPat"><span class="annot"><span class="annottext">zonkPat :: LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var hs-var">zonkPat</span></a></span></span><span> </span><span id="local-6989586621683012736"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012736"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pat GhcTc -&gt; ZonkBndrTcM (Pat GhcTc))
-&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (Pat GhcTc))
forall a b ann.
(a -&gt; ZonkBndrTcM b)
-&gt; GenLocated (EpAnn ann) a
-&gt; ZonkBndrTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkBndrMA"><span class="hs-identifier hs-var">wrapLocZonkBndrMA</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ZonkBndrTcM (Pat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621683012736"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-type">zonk_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span id="zonk_pat"><span class="annot"><span class="annottext">zonk_pat :: Pat GhcTc -&gt; ZonkBndrTcM (Pat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var hs-var">zonk_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span id="local-6989586621683012739"><span class="annot"><span class="annottext">XParPat GhcTc
</span><a href="#local-6989586621683012739"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012740"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012740"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1494"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012741"><span class="annot"><a href="#local-6989586621683012741"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012740"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1495"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012739"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012741"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span id="local-6989586621683012743"><span class="annot"><span class="annottext">XWildPat GhcTc
</span><a href="#local-6989586621683012743"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012744"><span class="annot"><a href="#local-6989586621683012744"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc
Kind
</span><a href="#local-6989586621683012743"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1499"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012744"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1500"></span><span>
</span><span id="line-1501"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span id="local-6989586621683012746"><span class="annot"><span class="annottext">XVarPat GhcTc
</span><a href="#local-6989586621683012746"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012747"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683012747"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012748"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012748"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1502"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012749"><span class="annot"><a href="#local-6989586621683012749"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-var">zonkIdBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012748"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1503"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012746"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012747"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012749"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1504"></span><span>
</span><span id="line-1505"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span id="local-6989586621683012751"><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><a href="#local-6989586621683012751"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012752"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012752"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1506"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012753"><span class="annot"><a href="#local-6989586621683012753"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012752"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1507"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012751"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012753"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1508"></span><span>
</span><span id="line-1509"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span id="local-6989586621683012755"><span class="annot"><span class="annottext">XBangPat GhcTc
</span><a href="#local-6989586621683012755"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012756"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012756"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1510"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012757"><span class="annot"><a href="#local-6989586621683012757"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012756"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1511"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012755"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012757"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1512"></span><span>
</span><span id="line-1513"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span id="local-6989586621683012759"><span class="annot"><span class="annottext">XAsPat GhcTc
</span><a href="#local-6989586621683012759"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012760"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683012760"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683012761"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012761"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012762"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012762"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012763"><span class="annot"><a href="#local-6989586621683012763"><span class="hs-identifier hs-var">v'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-var">zonkIdBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012761"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012764"><span class="annot"><a href="#local-6989586621683012764"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012762"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-1516"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012759"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012760"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012763"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012764"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1517"></span><span>
</span><span id="line-1518"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621683012766"><span class="annot"><span class="annottext">XViewPat GhcTc
</span><a href="#local-6989586621683012766"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012767"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012767"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621683012768"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012768"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012769"><span class="annot"><a href="#local-6989586621683012769"><span class="hs-identifier hs-var">expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012767"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1520"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012770"><span class="annot"><a href="#local-6989586621683012770"><span class="hs-identifier hs-var">pat'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012768"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-1521"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012771"><span class="annot"><a href="#local-6989586621683012771"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012766"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1522"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012771"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012769"><span class="hs-identifier hs-type">expr'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012770"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1523"></span><span>
</span><span id="line-1524"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span id="local-6989586621683012773"><span class="annot"><span class="annottext">XListPat GhcTc
</span><a href="#local-6989586621683012773"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012774"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621683012774"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012775"><span class="annot"><a href="#local-6989586621683012775"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcTc
Kind
</span><a href="#local-6989586621683012773"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1526"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012776"><span class="annot"><a href="#local-6989586621683012776"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012774"><span class="hs-identifier hs-type">pats</span></a></span><span>
</span><span id="line-1527"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012775"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012776"><span class="hs-identifier hs-type">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1528"></span><span>
</span><span id="line-1529"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span id="local-6989586621683012778"><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><a href="#local-6989586621683012778"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621683012779"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621683012779"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621683012780"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621683012780"><span class="hs-identifier hs-var">boxed</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012781"><span class="annot"><a href="#local-6989586621683012781"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkTcM [Kind] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkTcM [Kind]
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind])
-&gt; ZonkTcM [Kind]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; [Kind] -&gt; ZonkTcM [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XTuplePat GhcTc
</span><a href="#local-6989586621683012778"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1531"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012782"><span class="annot"><a href="#local-6989586621683012782"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012779"><span class="hs-identifier hs-type">pats</span></a></span><span>
</span><span id="line-1532"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012781"><span class="hs-identifier hs-type">tys'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012782"><span class="hs-identifier hs-type">pats'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012780"><span class="hs-identifier hs-type">boxed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1533"></span><span>
</span><span id="line-1534"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#OrPat"><span class="hs-identifier hs-type">OrPat</span></a></span><span> </span><span id="local-6989586621683012784"><span class="annot"><span class="annottext">XOrPat GhcTc
</span><a href="#local-6989586621683012784"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012785"><span class="annot"><span class="annottext">NonEmpty (LPat GhcTc)
</span><a href="#local-6989586621683012785"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1535"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012786"><span class="annot"><a href="#local-6989586621683012786"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XOrPat GhcTc
Kind
</span><a href="#local-6989586621683012784"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1536"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012787"><span class="annot"><a href="#local-6989586621683012787"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012785"><span class="hs-identifier hs-type">pats</span></a></span><span>
</span><span id="line-1537"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#OrPat"><span class="hs-identifier hs-type">OrPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012786"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012787"><span class="hs-identifier hs-type">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1538"></span><span>
</span><span id="line-1539"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span id="local-6989586621683012789"><span class="annot"><span class="annottext">XSumPat GhcTc
</span><a href="#local-6989586621683012789"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621683012790"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012790"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012791"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621683012791"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621683012792"><span class="annot"><span class="annottext">ConTag
</span><a href="#local-6989586621683012792"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012793"><span class="annot"><a href="#local-6989586621683012793"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkTcM [Kind] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkTcM [Kind]
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind])
-&gt; ZonkTcM [Kind]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; [Kind] -&gt; ZonkTcM [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
XSumPat GhcTc
</span><a href="#local-6989586621683012789"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1541"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012794"><span class="annot"><a href="#local-6989586621683012794"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012790"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-1542"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012793"><span class="hs-identifier hs-type">tys'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012794"><span class="hs-identifier hs-type">pat'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012791"><span class="hs-identifier hs-type">alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012792"><span class="hs-identifier hs-type">arity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1543"></span><span>
</span><span id="line-1544"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621683012795"><span class="annot"><span class="annottext">p :: Pat GhcTc
</span><a href="#local-6989586621683012795"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_args :: forall p. Pat p -&gt; HsConPatDetails p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012798"><span class="annot"><span class="annottext">HsConPatDetails GhcTc
</span><a href="#local-6989586621683012798"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1545"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012800"><span class="annot"><span class="annottext">p' :: XConPat GhcTc
</span><a href="#local-6989586621683012800"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#ConPatTc"><span class="hs-identifier hs-type">ConPatTc</span></a></span><span>
</span><span id="line-1546"></span><span>                     </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cpt_tvs :: ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012803"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012803"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span>
</span><span id="line-1547"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_dicts :: ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012805"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012805"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1548"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_binds :: ConPatTc -&gt; TcEvBinds
</span><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012807"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012807"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1549"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_wrap :: ConPatTc -&gt; HsWrapper
</span><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012809"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012809"><span class="hs-identifier hs-var">wrapper</span></a></span></span><span>
</span><span id="line-1550"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cpt_arg_tys :: ConPatTc -&gt; [Kind]
</span><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012811"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621683012811"><span class="hs-identifier hs-var">tys</span></a></span></span><span>
</span><span id="line-1551"></span><span>                     </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1552"></span><span>                   </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ZonkBndrTcM (Pat GhcTc) -&gt; ZonkBndrTcM (Pat GhcTc)
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImmutableTyVar"><span class="hs-identifier hs-var">isImmutableTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012803"><span class="hs-identifier hs-var">tyvars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ZonkBndrTcM (Pat GhcTc) -&gt; ZonkBndrTcM (Pat GhcTc))
-&gt; ZonkBndrTcM (Pat GhcTc) -&gt; ZonkBndrTcM (Pat GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1554"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012812"><span class="annot"><a href="#local-6989586621683012812"><span class="hs-identifier hs-var">new_tys</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkTcM [Kind] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkTcM [Kind]
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind])
-&gt; ZonkTcM [Kind]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Kind]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; [Kind] -&gt; ZonkTcM [Kind]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621683012811"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1555"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012813"><span class="annot"><a href="#local-6989586621683012813"><span class="hs-identifier hs-var">new_tyvars</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier hs-type">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012803"><span class="hs-identifier hs-type">tyvars</span></a></span><span>
</span><span id="line-1556"></span><span>          </span><span class="hs-comment">-- Must zonk the existential variables, because their</span><span>
</span><span id="line-1557"></span><span>          </span><span class="hs-comment">-- /kind/ need potential zonking.</span><span>
</span><span id="line-1558"></span><span>          </span><span class="hs-comment">-- cf typecheck/should_compile/tc221.hs</span><span>
</span><span id="line-1559"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012814"><span class="annot"><a href="#local-6989586621683012814"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-identifier hs-type">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012805"><span class="hs-identifier hs-type">evs</span></a></span><span>
</span><span id="line-1560"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012815"><span class="annot"><a href="#local-6989586621683012815"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-type">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012807"><span class="hs-identifier hs-type">binds</span></a></span><span>
</span><span id="line-1561"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012816"><span class="annot"><a href="#local-6989586621683012816"><span class="hs-identifier hs-var">new_wrapper</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-type">zonkCoFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012809"><span class="hs-identifier hs-type">wrapper</span></a></span><span>
</span><span id="line-1562"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012817"><span class="annot"><a href="#local-6989586621683012817"><span class="hs-identifier hs-var">new_args</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkConStuff"><span class="hs-identifier hs-type">zonkConStuff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012798"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-1563"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683012795"><span class="hs-identifier hs-type">p</span></a></span><span>
</span><span id="line-1564"></span><span>                 </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012817"><span class="hs-identifier hs-type">new_args</span></a></span><span>
</span><span id="line-1565"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012800"><span class="hs-identifier hs-type">p'</span></a></span><span>
</span><span id="line-1566"></span><span>                   </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#cpt_arg_tys"><span class="hs-identifier hs-var">cpt_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012812"><span class="hs-identifier hs-type">new_tys</span></a></span><span>
</span><span id="line-1567"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012813"><span class="hs-identifier hs-type">new_tyvars</span></a></span><span>
</span><span id="line-1568"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012814"><span class="hs-identifier hs-type">new_evs</span></a></span><span>
</span><span id="line-1569"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#cpt_binds"><span class="hs-identifier hs-var">cpt_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012815"><span class="hs-identifier hs-type">new_binds</span></a></span><span>
</span><span id="line-1570"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#cpt_wrap"><span class="hs-identifier hs-var">cpt_wrap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012816"><span class="hs-identifier hs-type">new_wrapper</span></a></span><span>
</span><span id="line-1571"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-1572"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1573"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1574"></span><span>
</span><span id="line-1575"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span id="local-6989586621683012820"><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621683012820"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012821"><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621683012821"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ZonkBndrTcM (Pat GhcTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLitPat GhcTc -&gt; HsLit GhcTc -&gt; Pat GhcTc
forall p. XLitPat p -&gt; HsLit p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-var">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcTc
</span><a href="#local-6989586621683012820"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcTc
</span><a href="#local-6989586621683012821"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span>
</span><span id="line-1577"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span id="local-6989586621683012823"><span class="annot"><span class="annottext">XSigPat GhcTc
</span><a href="#local-6989586621683012823"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012824"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012824"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012825"><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><a href="#local-6989586621683012825"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012826"><span class="annot"><a href="#local-6989586621683012826"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcTc
Kind
</span><a href="#local-6989586621683012823"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1579"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012827"><span class="annot"><a href="#local-6989586621683012827"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012824"><span class="hs-identifier hs-type">pat</span></a></span><span>
</span><span id="line-1580"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012826"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012827"><span class="hs-identifier hs-type">pat'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012825"><span class="hs-identifier hs-type">hs_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1581"></span><span>
</span><span id="line-1582"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span id="local-6989586621683012829"><span class="annot"><span class="annottext">XNPat GhcTc
</span><a href="#local-6989586621683012829"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012830"><span class="annot"><span class="annottext">EpAnnCO
</span><a href="#local-6989586621683012830"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012831"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621683012831"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012832"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><a href="#local-6989586621683012832"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span> </span><span id="local-6989586621683012833"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012833"><span class="hs-identifier hs-var">eq_expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1583"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012834"><span class="annot"><a href="#local-6989586621683012834"><span class="hs-identifier hs-var">eq_expr'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012833"><span class="hs-identifier hs-var">eq_expr</span></a></span><span>
</span><span id="line-1584"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012835"><span class="annot"><a href="#local-6989586621683012835"><span class="hs-identifier hs-var">mb_neg'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683012832"><span class="hs-identifier hs-type">mb_neg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1585"></span><span>            </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcTc)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe SyntaxExprTc
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1586"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683012836"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012836"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; Maybe SyntaxExprTc
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(SyntaxExprTc -&gt; Maybe SyntaxExprTc)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) SyntaxExprTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Maybe SyntaxExprTc)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012836"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1587"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1588"></span><span>     </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012837"><span class="annot"><a href="#local-6989586621683012837"><span class="hs-identifier hs-var">lit'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012831"><span class="hs-identifier hs-type">lit</span></a></span><span>
</span><span id="line-1589"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012838"><span class="annot"><a href="#local-6989586621683012838"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012829"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1590"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012838"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012830"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012837"><span class="hs-identifier hs-type">lit'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012835"><span class="hs-identifier hs-type">mb_neg'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012834"><span class="hs-identifier hs-type">eq_expr'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1591"></span><span>
</span><span id="line-1592"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span id="local-6989586621683012840"><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><a href="#local-6989586621683012840"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012841"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683012841"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683012842"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012842"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012843"><span class="annot"><span class="annottext">EpAnnCO
</span><a href="#local-6989586621683012843"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012844"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621683012844"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012845"><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><a href="#local-6989586621683012845"><span class="hs-identifier hs-var">lit2</span></a></span></span><span> </span><span id="local-6989586621683012846"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012846"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012847"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012847"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012848"><span class="annot"><a href="#local-6989586621683012848"><span class="hs-identifier hs-var">e1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc -&gt; ZonkBndrTcM (SyntaxExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-var">zonkSyntaxExpr</span></a></span><span>  </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621683012846"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1594"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012849"><span class="annot"><a href="#local-6989586621683012849"><span class="hs-identifier hs-var">e2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkSyntaxExpr"><span class="hs-identifier hs-type">zonkSyntaxExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012847"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1595"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012850"><span class="annot"><a href="#local-6989586621683012850"><span class="hs-identifier hs-var">lit1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012844"><span class="hs-identifier hs-type">lit1</span></a></span><span>
</span><span id="line-1596"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012851"><span class="annot"><a href="#local-6989586621683012851"><span class="hs-identifier hs-var">lit2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkOverLit"><span class="hs-identifier hs-type">zonkOverLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012845"><span class="hs-identifier hs-type">lit2</span></a></span><span>
</span><span id="line-1597"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012852"><span class="annot"><a href="#local-6989586621683012852"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012840"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1598"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012853"><span class="annot"><a href="#local-6989586621683012853"><span class="hs-identifier hs-var">n'</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-type">zonkIdBndrX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012842"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-1599"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012852"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012841"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012853"><span class="hs-identifier hs-type">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012843"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012850"><span class="hs-identifier hs-type">lit1'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012851"><span class="hs-identifier hs-type">lit2'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012848"><span class="hs-identifier hs-type">e1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012849"><span class="hs-identifier hs-type">e2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1600"></span><span>
</span><span id="line-1601"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-type">EmbTyPat</span></a></span><span> </span><span id="local-6989586621683012855"><span class="annot"><span class="annottext">XEmbTyPat GhcTc
</span><a href="#local-6989586621683012855"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012856"><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcTc)
</span><a href="#local-6989586621683012856"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012857"><span class="annot"><a href="#local-6989586621683012857"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XEmbTyPat GhcTc
Kind
</span><a href="#local-6989586621683012855"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1603"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-type">EmbTyPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012857"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012856"><span class="hs-identifier hs-type">tp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1604"></span><span>
</span><span id="line-1605"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span id="local-6989586621683012859"><span class="annot"><span class="annottext">XInvisPat GhcTc
</span><a href="#local-6989586621683012859"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012860"><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcTc)
</span><a href="#local-6989586621683012860"><span class="hs-identifier hs-var">tp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1606"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012861"><span class="annot"><a href="#local-6989586621683012861"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">XInvisPat GhcTc
Kind
</span><a href="#local-6989586621683012859"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1607"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012861"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012860"><span class="hs-identifier hs-type">tp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1608"></span><span>
</span><span id="line-1609"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span id="local-6989586621683012863"><span class="annot"><span class="annottext">XXPat GhcTc
</span><a href="#local-6989586621683012863"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XXPat GhcTc
</span><a href="#local-6989586621683012863"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1610"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#ExpansionPat"><span class="hs-identifier hs-type">ExpansionPat</span></a></span><span> </span><span id="local-6989586621683012865"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683012865"><span class="hs-identifier hs-var">orig</span></a></span></span><span> </span><span id="local-6989586621683012866"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621683012866"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1611"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012867"><span class="annot"><a href="#local-6989586621683012867"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ZonkBndrTcM (Pat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621683012866"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1612"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#ExpansionPat"><span class="hs-identifier hs-type">ExpansionPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012865"><span class="hs-identifier hs-type">orig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012867"><span class="hs-identifier hs-type">pat'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span id="local-6989586621683012869"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012869"><span class="hs-identifier hs-var">co_fn</span></a></span></span><span> </span><span id="local-6989586621683012870"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621683012870"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621683012871"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012871"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1614"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012872"><span class="annot"><a href="#local-6989586621683012872"><span class="hs-identifier hs-var">co_fn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) HsWrapper
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoFn"><span class="hs-identifier hs-var">zonkCoFn</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621683012869"><span class="hs-identifier hs-var">co_fn</span></a></span><span>
</span><span id="line-1615"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012873"><span class="annot"><a href="#local-6989586621683012873"><span class="hs-identifier hs-var">pat'</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-type">noLocA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012870"><span class="hs-identifier hs-type">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1616"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012874"><span class="annot"><a href="#local-6989586621683012874"><span class="hs-identifier hs-var">ty'</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012871"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1617"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012872"><span class="hs-identifier hs-type">co_fn'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012873"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012874"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1618"></span><span>       </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1619"></span><span>
</span><span id="line-1620"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_pat"><span class="hs-identifier hs-var">zonk_pat</span></a></span><span> </span><span id="local-6989586621683012876"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621683012876"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; ZonkBndrTcM (Pat GhcTc)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_pat&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621683012876"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1621"></span><span>
</span><span id="line-1622"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkConStuff"><span class="hs-identifier hs-type">zonkConStuff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1624"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1625"></span><span id="zonkConStuff"><span class="annot"><span class="annottext">zonkConStuff :: HsConPatDetails GhcTc -&gt; ZonkBndrTcM (HsConPatDetails GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkConStuff"><span class="hs-identifier hs-var hs-var">zonkConStuff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span id="local-6989586621683012877"><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcTc)]
</span><a href="#local-6989586621683012877"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621683012878"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621683012878"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012879"><span class="annot"><a href="#local-6989586621683012879"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc] -&gt; ZonkBndrTcM [LPat GhcTc]
forall (f :: * -&gt; *).
Traversable f =&gt;
f (LPat GhcTc) -&gt; ZonkBndrTcM (f (LPat GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621683012878"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1627"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012877"><span class="hs-identifier hs-type">tyargs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012879"><span class="hs-identifier hs-type">pats'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1628"></span><span>
</span><span id="line-1629"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621683012880"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012880"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621683012881"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012881"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1630"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012882"><span class="annot"><a href="#local-6989586621683012882"><span class="hs-identifier hs-var">p1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621683012880"><span class="hs-identifier hs-var">p1</span></a></span><span>
</span><span id="line-1631"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012883"><span class="annot"><a href="#local-6989586621683012883"><span class="hs-identifier hs-var">p2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-type">zonkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012881"><span class="hs-identifier hs-type">p2</span></a></span><span>
</span><span id="line-1632"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012882"><span class="hs-identifier hs-type">p1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012883"><span class="hs-identifier hs-type">p2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1633"></span><span>
</span><span id="line-1634"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkConStuff"><span class="hs-identifier hs-var">zonkConStuff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621683012884"><span class="annot"><span class="annottext">XHsRecFields GhcTc
</span><a href="#local-6989586621683012884"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683012885"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621683012885"><span class="hs-identifier hs-var">rpats</span></a></span></span><span> </span><span id="local-6989586621683012886"><span class="annot"><span class="annottext">Maybe (XRec GhcTc RecFieldsDotDot)
</span><a href="#local-6989586621683012886"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1635"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012887"><span class="annot"><a href="#local-6989586621683012887"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc] -&gt; ZonkBndrTcM [LPat GhcTc]
forall (f :: * -&gt; *).
Traversable f =&gt;
f (LPat GhcTc) -&gt; ZonkBndrTcM (f (LPat GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-var">zonkPats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))
 -&gt; GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))]
-&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
  (GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="annot"><span class="annottext">(HsFieldBind
   (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
   (GenLocated SrcSpanAnnA (Pat GhcTc))
 -&gt; GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))
    -&gt; HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
        (GenLocated SrcSpanAnnA (Pat GhcTc)))
-&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
     (GenLocated SrcSpanAnnA (Pat GhcTc)))
-&gt; HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
     (GenLocated SrcSpanAnnA (Pat GhcTc))
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))]
</span><a href="#local-6989586621683012885"><span class="hs-identifier hs-var">rpats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1636"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012888"><span class="annot"><a href="#local-6989586621683012888"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-type">noBinders</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-type">zonkCoToCo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683012884"><span class="hs-identifier hs-type">x</span></a></span><span>
</span><span id="line-1637"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683012889"><span class="annot"><a href="#local-6989586621683012889"><span class="hs-identifier hs-var hs-var">rpats'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))
 -&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
 -&gt; GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc))))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))]
-&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)]
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012891"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683012891"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683012892"><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
  (GenLocated SrcSpanAnnA (Pat GhcTc))
</span><a href="#local-6989586621683012892"><span class="hs-identifier hs-var">rp</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683012893"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621683012893"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1638"></span><span>                                  </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
     (GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
        (GenLocated SrcSpanAnnA (Pat GhcTc)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683012891"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
  (GenLocated SrcSpanAnnA (Pat GhcTc))
</span><a href="#local-6989586621683012892"><span class="hs-identifier hs-var">rp</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012893"><span class="hs-identifier hs-type">p'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1639"></span><span>                               </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcTc))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))]
</span><a href="#local-6989586621683012885"><span class="hs-identifier hs-var">rpats</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621683012887"><span class="hs-identifier hs-var">pats'</span></a></span><span>
</span><span id="line-1640"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012888"><span class="hs-identifier hs-type">x'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012889"><span class="hs-identifier hs-type">rpats'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012886"><span class="hs-identifier hs-type">dd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1641"></span><span>        </span><span class="hs-comment">-- Field selectors have declared types; hence no zonking</span><span>
</span><span id="line-1642"></span><span>
</span><span id="line-1643"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1644"></span><span id="local-6989586621683010360"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-type">zonkPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Traversable</span></span><span> </span><span class="annot"><a href="#local-6989586621683010360"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621683010360"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683010360"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1645"></span><span id="zonkPats"><span class="annot"><span class="annottext">zonkPats :: forall (f :: * -&gt; *).
Traversable f =&gt;
f (LPat GhcTc) -&gt; ZonkBndrTcM (f (LPat GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-identifier hs-var hs-var">zonkPats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcTc)
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))
-&gt; f (GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (f (GenLocated SrcSpanAnnA (Pat GhcTc)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; f a -&gt; f (f b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (LPat GhcTc)
GenLocated SrcSpanAnnA (Pat GhcTc)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (Pat GhcTc))
</span><a href="GHC.Tc.Zonk.Type.html#zonkPat"><span class="hs-identifier hs-var">zonkPat</span></a></span><span>
</span><span id="line-1646"></span><span class="hs-pragma">{-# SPECIALISE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-pragma hs-type">zonkPats</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-pragma hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-pragma hs-type">GhcTc</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-pragma hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-pragma">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-pragma hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-pragma hs-type">GhcTc</span></a></span><span class="hs-pragma">]</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1647"></span><span class="hs-pragma">{-# SPECIALISE</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkPats"><span class="hs-pragma hs-type">zonkPats</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-pragma hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-pragma hs-type">GhcTc</span></a></span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-pragma hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">NonEmpty</span></span><span> </span><span class="hs-pragma">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-pragma hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-pragma hs-type">GhcTc</span></a></span><span class="hs-pragma">)</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1648"></span><span>
</span><span id="line-1649"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[BackSubst-Foreign]{Foreign exports}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1656"></span><span>
</span><span id="line-1657"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkForeignExports"><span class="hs-identifier hs-type">zonkForeignExports</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1658"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LForeignDecl"><span class="hs-identifier hs-type">LForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1659"></span><span id="zonkForeignExports"><span class="annot"><span class="annottext">zonkForeignExports :: [LForeignDecl GhcTc] -&gt; ZonkTcM [LForeignDecl GhcTc]
</span><a href="GHC.Tc.Zonk.Type.html#zonkForeignExports"><span class="hs-identifier hs-var hs-var">zonkForeignExports</span></a></span></span><span> </span><span id="local-6989586621683012897"><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
</span><a href="#local-6989586621683012897"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ForeignDecl GhcTc)
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (ForeignDecl GhcTc)))
-&gt; [GenLocated SrcSpanAnnA (ForeignDecl GhcTc)]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (ForeignDecl GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ForeignDecl GhcTc -&gt; ZonkTcM (ForeignDecl GhcTc))
-&gt; GenLocated SrcSpanAnnA (ForeignDecl GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (ForeignDecl GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc -&gt; ZonkTcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LForeignDecl GhcTc]
[GenLocated SrcSpanAnnA (ForeignDecl GhcTc)]
</span><a href="#local-6989586621683012897"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-1660"></span><span>
</span><span id="line-1661"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkForeignExport"><span class="hs-identifier hs-type">zonkForeignExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignDecl"><span class="hs-identifier hs-type">ForeignDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1662"></span><span id="zonkForeignExport"><span class="annot"><span class="annottext">zonkForeignExport :: ForeignDecl GhcTc -&gt; ZonkTcM (ForeignDecl GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkForeignExport"><span class="hs-identifier hs-var hs-var">zonkForeignExport</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_name :: forall pass. ForeignDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012901"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621683012901"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: forall pass. ForeignDecl pass -&gt; XForeignExport pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012903"><span class="annot"><span class="annottext">XForeignExport GhcTc
</span><a href="#local-6989586621683012903"><span class="hs-identifier hs-var">co</span></a></span></span><span>
</span><span id="line-1663"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: forall pass. ForeignDecl pass -&gt; ForeignExport pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012905"><span class="annot"><span class="annottext">ForeignExport GhcTc
</span><a href="#local-6989586621683012905"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1664"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012906"><span class="annot"><a href="#local-6989586621683012906"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; ZonkTcM (GenLocated SrcSpanAnnN Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLIdOcc"><span class="hs-identifier hs-var">zonkLIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
GenLocated SrcSpanAnnN Id
</span><a href="#local-6989586621683012901"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1665"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012906"><span class="hs-identifier hs-type">i'</span></a></span><span>
</span><span id="line-1666"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">undefined</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012903"><span class="hs-identifier hs-type">co</span></a></span><span>
</span><span id="line-1667"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012905"><span class="hs-identifier hs-type">spec</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1668"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkForeignExport"><span class="hs-identifier hs-var">zonkForeignExport</span></a></span><span> </span><span id="local-6989586621683012909"><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621683012909"><span class="hs-identifier hs-var">for_imp</span></a></span></span><span>
</span><span id="line-1669"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc -&gt; ZonkTcM (ForeignDecl GhcTc)
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcTc
</span><a href="#local-6989586621683012909"><span class="hs-identifier hs-var">for_imp</span></a></span><span>     </span><span class="hs-comment">-- Foreign imports don't need zonking</span><span>
</span><span id="line-1670"></span><span>
</span><span id="line-1671"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRules"><span class="hs-identifier hs-type">zonkRules</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleDecl"><span class="hs-identifier hs-type">LRuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1672"></span><span id="zonkRules"><span class="annot"><span class="annottext">zonkRules :: [LRuleDecl GhcTc] -&gt; ZonkTcM [LRuleDecl GhcTc]
</span><a href="GHC.Tc.Zonk.Type.html#zonkRules"><span class="hs-identifier hs-var hs-var">zonkRules</span></a></span></span><span> </span><span id="local-6989586621683012910"><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
</span><a href="#local-6989586621683012910"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (RuleDecl GhcTc)
 -&gt; ZonkT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated SrcSpanAnnA (RuleDecl GhcTc)))
-&gt; [GenLocated SrcSpanAnnA (RuleDecl GhcTc)]
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated SrcSpanAnnA (RuleDecl GhcTc)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RuleDecl GhcTc -&gt; ZonkTcM (RuleDecl GhcTc))
-&gt; GenLocated SrcSpanAnnA (RuleDecl GhcTc)
-&gt; ZonkT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated SrcSpanAnnA (RuleDecl GhcTc))
forall a b ann.
(a -&gt; ZonkTcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; ZonkTcM (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Zonk.Type.html#wrapLocZonkMA"><span class="hs-identifier hs-var">wrapLocZonkMA</span></a></span><span> </span><span class="annot"><span class="annottext">RuleDecl GhcTc -&gt; ZonkTcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRule"><span class="hs-identifier hs-var">zonkRule</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LRuleDecl GhcTc]
[GenLocated SrcSpanAnnA (RuleDecl GhcTc)]
</span><a href="#local-6989586621683012910"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-1673"></span><span>
</span><span id="line-1674"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRule"><span class="hs-identifier hs-type">zonkRule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleDecl"><span class="hs-identifier hs-type">RuleDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span id="zonkRule"><span class="annot"><span class="annottext">zonkRule :: RuleDecl GhcTc -&gt; ZonkTcM (RuleDecl GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkRule"><span class="hs-identifier hs-var hs-var">zonkRule</span></a></span></span><span> </span><span id="local-6989586621683012912"><span class="annot"><span class="annottext">rule :: RuleDecl GhcTc
</span><a href="#local-6989586621683012912"><span class="hs-identifier hs-var">rule</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsRule"><span class="hs-identifier hs-type">HsRule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rd_tmvs :: forall pass. RuleDecl pass -&gt; [LRuleBndr pass]
</span><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012915"><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
</span><a href="#local-6989586621683012915"><span class="hs-identifier hs-var">tm_bndrs</span></a></span></span><span class="hs-comment">{-::[RuleBndr TcId]-}</span><span>
</span><span id="line-1676"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_lhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012917"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012917"><span class="hs-identifier hs-var">lhs</span></a></span></span><span>
</span><span id="line-1677"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rd_rhs :: forall pass. RuleDecl pass -&gt; XRec pass (HsExpr pass)
</span><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012919"><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012919"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1678"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT
  (IOEnv (Env TcGblEnv TcLclEnv))
  [GenLocated EpAnnCO (RuleBndr GhcTc)]
-&gt; forall r.
   ([GenLocated EpAnnCO (RuleBndr GhcTc)]
    -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (RuleBndr GhcTc)
 -&gt; ZonkBndrT
      (IOEnv (Env TcGblEnv TcLclEnv))
      (GenLocated EpAnnCO (RuleBndr GhcTc)))
-&gt; [GenLocated EpAnnCO (RuleBndr GhcTc)]
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     [GenLocated EpAnnCO (RuleBndr GhcTc)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">LRuleBndr GhcTc -&gt; ZonkBndrTcM (LRuleBndr GhcTc)
GenLocated EpAnnCO (RuleBndr GhcTc)
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated EpAnnCO (RuleBndr GhcTc))
</span><a href="#local-6989586621683012920"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">[LRuleBndr GhcTc]
[GenLocated EpAnnCO (RuleBndr GhcTc)]
</span><a href="#local-6989586621683012915"><span class="hs-identifier hs-var">tm_bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([GenLocated EpAnnCO (RuleBndr GhcTc)]
  -&gt; ZonkTcM (RuleDecl GhcTc))
 -&gt; ZonkTcM (RuleDecl GhcTc))
-&gt; ([GenLocated EpAnnCO (RuleBndr GhcTc)]
    -&gt; ZonkTcM (RuleDecl GhcTc))
-&gt; ZonkTcM (RuleDecl GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012921"><span class="annot"><span class="annottext">[GenLocated EpAnnCO (RuleBndr GhcTc)]
</span><a href="#local-6989586621683012921"><span class="hs-identifier hs-var">new_tm_bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1679"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- See Note [Zonking the LHS of a RULE]</span><span>
</span><span id="line-1680"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012922"><span class="annot"><a href="#local-6989586621683012922"><span class="hs-identifier hs-var">new_lhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
forall (m :: * -&gt; *) a. ZonkFlexi -&gt; ZonkT m a -&gt; ZonkT m a
</span><a href="GHC.Tc.Zonk.Env.html#setZonkType"><span class="hs-identifier hs-var">setZonkType</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Zonk.Env.html#SkolemiseFlexi"><span class="hs-identifier hs-var">SkolemiseFlexi</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (LHsExpr GhcTc)
</span><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-var">zonkLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><a href="#local-6989586621683012917"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1681"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012924"><span class="annot"><a href="#local-6989586621683012924"><span class="hs-identifier hs-var">new_rhs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>                              </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkLExpr"><span class="hs-identifier hs-type">zonkLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012919"><span class="hs-identifier hs-type">rhs</span></a></span><span>
</span><span id="line-1682"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621683012912"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#rd_tmvs"><span class="hs-identifier hs-var">rd_tmvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012921"><span class="hs-identifier hs-type">new_tm_bndrs</span></a></span><span>
</span><span id="line-1683"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#rd_lhs"><span class="hs-identifier hs-var">rd_lhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012922"><span class="hs-identifier hs-type">new_lhs</span></a></span><span>
</span><span id="line-1684"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#rd_rhs"><span class="hs-identifier hs-var">rd_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012924"><span class="hs-identifier hs-type">new_rhs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1685"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1686"></span><span>   </span><span class="annot"><a href="#local-6989586621683012920"><span class="hs-identifier hs-type">zonk_tm_bndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1687"></span><span>   </span><span id="local-6989586621683012920"><span class="annot"><span class="annottext">zonk_tm_bndr :: LRuleBndr GhcTc -&gt; ZonkBndrTcM (LRuleBndr GhcTc)
</span><a href="#local-6989586621683012920"><span class="hs-identifier hs-var hs-var">zonk_tm_bndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012925"><span class="annot"><span class="annottext">EpAnnCO
</span><a href="#local-6989586621683012925"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span id="local-6989586621683012927"><span class="annot"><span class="annottext">XCRuleBndr GhcTc
</span><a href="#local-6989586621683012927"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683012928"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683012928"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683012929"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012929"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1688"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012930"><span class="annot"><a href="#local-6989586621683012930"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="#local-6989586621683012931"><span class="hs-identifier hs-var">zonk_it</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012929"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1689"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012925"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-type">RuleBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012927"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012928"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012930"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1690"></span><span>   </span><span class="annot"><a href="#local-6989586621683012920"><span class="hs-identifier hs-var">zonk_tm_bndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-type">RuleBndrSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; ZonkBndrT
     (IOEnv (Env TcGblEnv TcLclEnv))
     (GenLocated EpAnnCO (RuleBndr GhcTc))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zonk_tm_bndr RuleBndrSig&quot;</span></span><span>
</span><span id="line-1691"></span><span>
</span><span id="line-1692"></span><span>   </span><span id="local-6989586621683012931"><span class="annot"><span class="annottext">zonk_it :: Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="#local-6989586621683012931"><span class="hs-identifier hs-var hs-var">zonk_it</span></a></span></span><span> </span><span id="local-6989586621683012935"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012935"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-1693"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012935"><span class="hs-identifier hs-var">v</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-var">zonkIdBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012935"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1694"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; (Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id)
-&gt; Id
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Tc.Utils.TcType.html#isImmutableTyVar"><span class="hs-identifier hs-var">isImmutableTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012935"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1695"></span><span>                    </span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrX"><span class="hs-identifier hs-var">zonkTyBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012935"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1696"></span><span>                    </span><span class="hs-comment">-- DV: used to be &quot;return v&quot;, but that is plain</span><span>
</span><span id="line-1697"></span><span>                    </span><span class="hs-comment">-- wrong because we may need to go inside the kind</span><span>
</span><span id="line-1698"></span><span>                    </span><span class="hs-comment">-- of v and zonk there!</span><span>
</span><span id="line-1699"></span><span>
</span><span id="line-1700"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
              Constraints and evidence
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1707"></span><span>
</span><span id="line-1708"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span>
</span><span id="line-1709"></span><span id="zonkEvTerm"><span class="annot"><span class="annottext">zonkEvTerm :: EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var hs-var">zonkEvTerm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-type">EvExpr</span></a></span><span> </span><span id="local-6989586621683012937"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012937"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1710"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012937"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1711"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span id="local-6989586621683012940"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012940"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012941"><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621683012941"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1712"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; EvTypeable -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-var">EvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; EvTypeable -&gt; EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (EvTypeable -&gt; EvTerm)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012940"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (EvTypeable -&gt; EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTypeable
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvTypeable -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTypeable
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="annot"><span class="annottext">EvTypeable
</span><a href="#local-6989586621683012941"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1713"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">et_tvs :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012945"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012945"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_given :: EvTerm -&gt; [Id]
</span><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012947"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012947"><span class="hs-identifier hs-var">evs</span></a></span></span><span>
</span><span id="line-1714"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_binds :: EvTerm -&gt; TcEvBinds
</span><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012949"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012949"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">et_body :: EvTerm -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683012951"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012951"><span class="hs-identifier hs-var">body_id</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1715"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrTcM [Id]
-&gt; forall r.
   ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTyBndrsX"><span class="hs-identifier hs-var">zonkTyBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012945"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span>       </span><span class="annot"><span class="annottext">(([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012952"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012952"><span class="hs-identifier hs-var">new_tvs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1716"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrTcM [Id]
-&gt; forall r.
   ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndrsX"><span class="hs-identifier hs-var">zonkEvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012947"><span class="hs-identifier hs-var">evs</span></a></span><span class="hs-special">)</span><span>       </span><span class="annot"><span class="annottext">(([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012953"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012953"><span class="hs-identifier hs-var">new_evs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1717"></span><span>    </span><span class="annot"><span class="annottext">ZonkBndrTcM TcEvBinds
-&gt; forall r.
   (TcEvBinds -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcEvBinds -&gt; ZonkBndrTcM TcEvBinds
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-var">zonkTcEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012949"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((TcEvBinds -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; (TcEvBinds -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012954"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683012954"><span class="hs-identifier hs-var">new_ev_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1718"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012955"><span class="annot"><a href="#local-6989586621683012955"><span class="hs-identifier hs-var">new_body_id</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012951"><span class="hs-identifier hs-var">body_id</span></a></span><span>
</span><span id="line-1719"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvFun"><span class="hs-identifier hs-type">EvFun</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#et_tvs"><span class="hs-identifier hs-var">et_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012952"><span class="hs-identifier hs-type">new_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#et_given"><span class="hs-identifier hs-var">et_given</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012953"><span class="hs-identifier hs-type">new_evs</span></a></span><span>
</span><span id="line-1720"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#et_binds"><span class="hs-identifier hs-var">et_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012954"><span class="hs-identifier hs-type">new_ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#et_body"><span class="hs-identifier hs-var">et_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683012955"><span class="hs-identifier hs-type">new_body_id</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1721"></span><span>
</span><span id="line-1722"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-type">zonkCoreExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span>
</span><span id="line-1723"></span><span id="zonkCoreExpr"><span class="annot"><span class="annottext">zonkCoreExpr :: EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var hs-var">zonkCoreExpr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621683012958"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012958"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1724"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012958"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1725"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; EvExpr
forall b. Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">(Coercion -&gt; EvExpr)
-&gt; ZonkTcM Coercion -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoVarOcc"><span class="hs-identifier hs-var">zonkCoVarOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012958"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1726"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1727"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; EvExpr
forall b. Id -&gt; Expr b
</span><a href="GHC.Core.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdOcc"><span class="hs-identifier hs-var">zonkIdOcc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012958"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1728"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-type">Lit</span></a></span><span> </span><span id="local-6989586621683012962"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621683012962"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1729"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
-&gt; EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; EvExpr
forall b. Literal -&gt; Expr b
</span><a href="GHC.Core.html#Lit"><span class="hs-identifier hs-var">Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621683012962"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1730"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span id="local-6989586621683012963"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012963"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1731"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; EvExpr
forall b. Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span><span> </span><span class="annot"><span class="annottext">(Coercion -&gt; EvExpr)
-&gt; ZonkTcM Coercion -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012963"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1732"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621683012964"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012964"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1733"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; EvExpr
forall b. Kind -&gt; Expr b
</span><a href="GHC.Core.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012964"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1734"></span><span>
</span><span id="line-1735"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-type">Cast</span></a></span><span> </span><span id="local-6989586621683012966"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012966"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621683012967"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012967"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1736"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; Coercion -&gt; EvExpr
forall b. Expr b -&gt; Coercion -&gt; Expr b
</span><a href="GHC.Core.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; Coercion -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Coercion -&gt; EvExpr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012966"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Coercion -&gt; EvExpr)
-&gt; ZonkTcM Coercion -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; ZonkTcM Coercion
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoToCo"><span class="hs-identifier hs-var">zonkCoToCo</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683012967"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1737"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-type">Tick</span></a></span><span> </span><span id="local-6989586621683012969"><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621683012969"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621683012970"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012970"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1738"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreTickish -&gt; EvExpr -&gt; EvExpr
forall b. CoreTickish -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Tick"><span class="hs-identifier hs-var">Tick</span></a></span><span> </span><span class="annot"><span class="annottext">CoreTickish
</span><a href="#local-6989586621683012969"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012970"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-comment">-- Do we need to zonk in ticks?</span><span>
</span><span id="line-1739"></span><span>
</span><span id="line-1740"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621683012972"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012972"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683012973"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012973"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1741"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvExpr -&gt; EvExpr
forall b. Expr b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (EvExpr -&gt; EvExpr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012972"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (EvExpr -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a b.
ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (a -&gt; b)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012973"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1742"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621683012975"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012975"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621683012976"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012976"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1743"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
-&gt; forall r.
   (Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrX"><span class="hs-identifier hs-var">zonkCoreBndrX</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012975"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
-&gt; (Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012977"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012977"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1744"></span><span>      </span><span class="annot"><span class="annottext">Id -&gt; EvExpr -&gt; EvExpr
forall b. b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012977"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012976"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1745"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Let"><span class="hs-identifier hs-type">Let</span></a></span><span> </span><span id="local-6989586621683012979"><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621683012979"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621683012980"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012980"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1746"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bind Id)
-&gt; forall r.
   (Bind Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bind Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bind Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621683012979"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Bind Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
-&gt; (Bind Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012982"><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621683012982"><span class="hs-identifier hs-var">bind'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1747"></span><span>      </span><span class="annot"><span class="annottext">Bind Id -&gt; EvExpr -&gt; EvExpr
forall b. Bind b -&gt; Expr b -&gt; Expr b
</span><a href="GHC.Core.html#Let"><span class="hs-identifier hs-var">Let</span></a></span><span> </span><span class="annot"><span class="annottext">Bind Id
</span><a href="#local-6989586621683012982"><span class="hs-identifier hs-var">bind'</span></a></span><span> </span><span class="annot"><span class="annottext">(EvExpr -&gt; EvExpr)
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012980"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1748"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span id="local-6989586621683012984"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012984"><span class="hs-identifier hs-var">scrut</span></a></span></span><span> </span><span id="local-6989586621683012985"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012985"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621683012986"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683012986"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683012987"><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621683012987"><span class="hs-identifier hs-var">alts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1749"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012988"><span class="annot"><a href="#local-6989586621683012988"><span class="hs-identifier hs-var">scrut'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012984"><span class="hs-identifier hs-var">scrut</span></a></span><span>
</span><span id="line-1750"></span><span>         </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683012989"><span class="annot"><a href="#local-6989586621683012989"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-type">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012986"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1751"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-type">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkIdBndrX"><span class="hs-identifier hs-type">zonkIdBndrX</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012985"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012990"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683012990"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1752"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012991"><span class="annot"><a href="#local-6989586621683012991"><span class="hs-identifier hs-var">alts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Alt Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id))
-&gt; [Alt Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [Alt Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Alt Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreAlt"><span class="hs-identifier hs-var">zonkCoreAlt</span></a></span><span> </span><span class="annot"><span class="annottext">[Alt Id]
</span><a href="#local-6989586621683012987"><span class="hs-identifier hs-var">alts</span></a></span><span>
</span><span id="line-1753"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Core.html#Case"><span class="hs-identifier hs-type">Case</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012988"><span class="hs-identifier hs-type">scrut'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012990"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012989"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012991"><span class="hs-identifier hs-type">alts'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1754"></span><span>
</span><span id="line-1755"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreAlt"><span class="hs-identifier hs-type">zonkCoreAlt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreAlt"><span class="hs-identifier hs-type">CoreAlt</span></a></span><span>
</span><span id="line-1756"></span><span id="zonkCoreAlt"><span class="annot"><span class="annottext">zonkCoreAlt :: Alt Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreAlt"><span class="hs-identifier hs-var hs-var">zonkCoreAlt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span id="local-6989586621683012995"><span class="annot"><span class="annottext">AltCon
</span><a href="#local-6989586621683012995"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span id="local-6989586621683012996"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012996"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621683012997"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012997"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1757"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ZonkBndrTcM [Id]
-&gt; forall r.
   ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r)
   -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) r
forall (m :: * -&gt; *) a.
ZonkBndrT m a -&gt; forall r. (a -&gt; ZonkT m r) -&gt; ZonkT m r
</span><a href="GHC.Tc.Zonk.Env.html#runZonkBndrT"><span class="hs-identifier hs-var">runZonkBndrT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrTcM [Id]
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBndrsX"><span class="hs-identifier hs-var">zonkCoreBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012996"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id))
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id))
-&gt; ([Id] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Alt Id)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683012998"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683012998"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1758"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683012999"><span class="annot"><a href="#local-6989586621683012999"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvExpr
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-var">zonkCoreExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683012997"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1759"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Core.html#Alt"><span class="hs-identifier hs-type">Alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012995"><span class="hs-identifier hs-type">dc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012998"><span class="hs-identifier hs-type">bndrs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683012999"><span class="hs-identifier hs-type">rhs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1760"></span><span>
</span><span id="line-1761"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBind"><span class="hs-identifier hs-type">zonkCoreBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.html#CoreBind"><span class="hs-identifier hs-type">CoreBind</span></a></span><span>
</span><span id="line-1762"></span><span id="zonkCoreBind"><span class="annot"><span class="annottext">zonkCoreBind :: Bind Id -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bind Id)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCoreBind"><span class="hs-identifier hs-var hs-var">zonkCoreBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span id="local-6989586621683013002"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013002"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621683013003"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683013003"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1763"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683013004"><span class="annot"><a href="#local-6989586621683013004"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683013005"><span class="annot"><a href="#local-6989586621683013005"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Id, EvExpr) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCorePair"><span class="hs-identifier hs-var">zonkCorePair</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013002"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683013003"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1764"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnv"><span class="hs-identifier hs-type">extendIdZonkEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013004"><span class="hs-identifier hs-type">v'</span></a></span><span>
</span><span id="line-1765"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#NonRec"><span class="hs-identifier hs-type">NonRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013004"><span class="hs-identifier hs-type">v'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013005"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1766"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreBind"><span class="hs-identifier hs-var">zonkCoreBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span id="local-6989586621683013008"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621683013008"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1767"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683013009"><span class="annot"><a href="#local-6989586621683013009"><span class="hs-identifier hs-var">pairs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(Id, EvExpr)]
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)])
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
forall a.
(a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. MonadFix m =&gt; (a -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">mfix</span></span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
</span><a href="#local-6989586621683013010"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-1768"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Core.html#Rec"><span class="hs-identifier hs-type">Rec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013009"><span class="hs-identifier hs-type">pairs'</span></a></span><span>
</span><span id="line-1769"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1770"></span><span>    </span><span id="local-6989586621683013010"><span class="annot"><span class="annottext">go :: [(Id, EvExpr)]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
</span><a href="#local-6989586621683013010"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621683013011"><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621683013011"><span class="hs-identifier hs-var">new_pairs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1771"></span><span>      </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *). [Id] -&gt; ZonkBndrT m ()
</span><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Id, EvExpr) -&gt; Id) -&gt; [(Id, EvExpr)] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Id, EvExpr) -&gt; Id
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621683013011"><span class="hs-identifier hs-var">new_pairs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1772"></span><span>      </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)])
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Id, EvExpr)
 -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr))
-&gt; [(Id, EvExpr)]
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [(Id, EvExpr)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(Id, EvExpr) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCorePair"><span class="hs-identifier hs-var">zonkCorePair</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, EvExpr)]
</span><a href="#local-6989586621683013008"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1773"></span><span>
</span><span id="line-1774"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCorePair"><span class="hs-identifier hs-type">zonkCorePair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreBndr"><span class="hs-identifier hs-type">CoreBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1775"></span><span id="zonkCorePair"><span class="annot"><span class="annottext">zonkCorePair :: (Id, EvExpr) -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Id, EvExpr)
</span><a href="GHC.Tc.Zonk.Type.html#zonkCorePair"><span class="hs-identifier hs-var hs-var">zonkCorePair</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683013014"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013014"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683013015"><span class="annot"><span class="annottext">EvExpr
</span><a href="#local-6989586621683013015"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1776"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013016"><span class="annot"><a href="#local-6989586621683013016"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkIdBndr"><span class="hs-identifier hs-var">zonkIdBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013014"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1777"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013017"><span class="annot"><a href="#local-6989586621683013017"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCoreExpr"><span class="hs-identifier hs-type">zonkCoreExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013015"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-1778"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013016"><span class="hs-identifier hs-type">v'</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621683013017"><span class="hs-identifier hs-type">e'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1779"></span><span>
</span><span id="line-1780"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-type">zonkEvTypeable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeable"><span class="hs-identifier hs-type">EvTypeable</span></a></span><span>
</span><span id="line-1781"></span><span id="zonkEvTypeable"><span class="annot"><span class="annottext">zonkEvTypeable :: EvTypeable -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTypeable
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-var hs-var">zonkEvTypeable</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span id="local-6989586621683013019"><span class="annot"><span class="annottext">TcTyCon
</span><a href="#local-6989586621683013019"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621683013020"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621683013020"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1782"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013021"><span class="annot"><a href="#local-6989586621683013021"><span class="hs-identifier hs-var">e'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm)
-&gt; [EvTerm] -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) [EvTerm]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621683013020"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1783"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyCon"><span class="hs-identifier hs-type">EvTypeableTyCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013019"><span class="hs-identifier hs-type">tycon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013021"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1784"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span id="local-6989586621683013023"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013023"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621683013024"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013024"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1785"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013025"><span class="annot"><a href="#local-6989586621683013025"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013023"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1786"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013026"><span class="annot"><a href="#local-6989586621683013026"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013024"><span class="hs-identifier hs-type">t2</span></a></span><span>
</span><span id="line-1787"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyApp"><span class="hs-identifier hs-type">EvTypeableTyApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013025"><span class="hs-identifier hs-type">t1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013026"><span class="hs-identifier hs-type">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1788"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span id="local-6989586621683013028"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013028"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621683013029"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013029"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621683013030"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013030"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013031"><span class="annot"><a href="#local-6989586621683013031"><span class="hs-identifier hs-var">tm'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013028"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1790"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013032"><span class="annot"><a href="#local-6989586621683013032"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013029"><span class="hs-identifier hs-type">t1</span></a></span><span>
</span><span id="line-1791"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013033"><span class="annot"><a href="#local-6989586621683013033"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-type">zonkEvTerm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013030"><span class="hs-identifier hs-type">t2</span></a></span><span>
</span><span id="line-1792"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTrFun"><span class="hs-identifier hs-type">EvTypeableTrFun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013031"><span class="hs-identifier hs-type">tm'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013032"><span class="hs-identifier hs-type">t1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013033"><span class="hs-identifier hs-type">t2'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1793"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvTypeable"><span class="hs-identifier hs-var">zonkEvTypeable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span id="local-6989586621683013035"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013035"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1794"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013036"><span class="annot"><a href="#local-6989586621683013036"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013035"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1795"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTypeableTyLit"><span class="hs-identifier hs-type">EvTypeableTyLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013036"><span class="hs-identifier hs-type">t1'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1796"></span><span>
</span><span id="line-1797"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds_s"><span class="hs-identifier hs-type">zonkTcEvBinds_s</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1798"></span><span id="zonkTcEvBinds_s"><span class="annot"><span class="annottext">zonkTcEvBinds_s :: [TcEvBinds]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [TcEvBinds]
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds_s"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds_s</span></a></span></span><span> </span><span id="local-6989586621683013037"><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621683013037"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013038"><span class="annot"><a href="#local-6989586621683013038"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TcEvBinds
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
-&gt; [TcEvBinds]
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) [Bag EvBind]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[TcEvBinds]
</span><a href="#local-6989586621683013037"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1799"></span><span>                        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#unionManyBags"><span class="hs-identifier hs-type">unionManyBags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013038"><span class="hs-identifier hs-type">bs'</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1800"></span><span>
</span><span id="line-1801"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-type">zonkTcEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span>
</span><span id="line-1802"></span><span id="zonkTcEvBinds"><span class="annot"><span class="annottext">zonkTcEvBinds :: TcEvBinds -&gt; ZonkBndrTcM TcEvBinds
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcEvBinds"><span class="hs-identifier hs-var hs-var">zonkTcEvBinds</span></a></span></span><span> </span><span id="local-6989586621683013042"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683013042"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013043"><span class="annot"><a href="#local-6989586621683013043"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcEvBinds -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621683013042"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1803"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013043"><span class="hs-identifier hs-type">bs'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1804"></span><span>
</span><span id="line-1805"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_tc_ev_binds"><span class="hs-identifier hs-type">zonk_tc_ev_binds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1806"></span><span id="zonk_tc_ev_binds"><span class="annot"><span class="annottext">zonk_tc_ev_binds :: TcEvBinds -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var hs-var">zonk_tc_ev_binds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span> </span><span id="local-6989586621683013045"><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621683013045"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EvBindsVar
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span class="annot"><span class="annottext">EvBindsVar
</span><a href="#local-6989586621683013045"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1807"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonk_tc_ev_binds"><span class="hs-identifier hs-var">zonk_tc_ev_binds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBinds"><span class="hs-identifier hs-type">EvBinds</span></a></span><span> </span><span id="local-6989586621683013047"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013047"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier hs-var">zonkEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013047"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1808"></span><span>
</span><span id="line-1809"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBindsVar"><span class="hs-identifier hs-type">zonkEvBindsVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1810"></span><span id="zonkEvBindsVar"><span class="annot"><span class="annottext">zonkEvBindsVar :: EvBindsVar
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBindsVar"><span class="hs-identifier hs-var hs-var">zonkEvBindsVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBindsVar"><span class="hs-identifier hs-type">EvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ebv_binds :: EvBindsVar -&gt; IORef EvBindMap
</span><a href="GHC.Tc.Types.Evidence.html#ebv_binds"><span class="hs-identifier hs-var">ebv_binds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013050"><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621683013050"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1811"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013051"><span class="annot"><a href="#local-6989586621683013051"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef EvBindMap
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) EvBindMap
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef EvBindMap
</span><a href="#local-6989586621683013050"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1812"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier hs-type">zonkEvBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#evBindMapBinds"><span class="hs-identifier hs-type">evBindMapBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013051"><span class="hs-identifier hs-type">bs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1813"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBindsVar"><span class="hs-identifier hs-var">zonkEvBindsVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#CoEvBindsVar"><span class="hs-identifier hs-type">CoEvBindsVar</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall a. a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-1814"></span><span>
</span><span id="line-1815"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier hs-type">zonkEvBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkBndrTcM"><span class="hs-identifier hs-type">ZonkBndrTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1816"></span><span id="zonkEvBinds"><span class="annot"><span class="annottext">zonkEvBinds :: Bag EvBind
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBinds"><span class="hs-identifier hs-var hs-var">zonkEvBinds</span></a></span></span><span> </span><span id="local-6989586621683013055"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013055"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-1817"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBinds&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1818"></span><span>    </span><span class="annot"><span class="annottext">(Bag EvBind
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall a.
(a -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. MonadFix m =&gt; (a -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">mfix</span></span><span> </span><span class="annot"><span class="annottext">((Bag EvBind
  -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
-&gt; (Bag EvBind
    -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683013056"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013056"><span class="hs-identifier hs-var">new_binds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1819"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) ()
forall (m :: * -&gt; *). [Id] -&gt; ZonkBndrT m ()
</span><a href="GHC.Tc.Zonk.Env.html#extendIdZonkEnvRec"><span class="hs-identifier hs-var">extendIdZonkEnvRec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag EvBind -&gt; [Id]
</span><a href="#local-6989586621683013057"><span class="hs-identifier hs-var">collect_ev_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013056"><span class="hs-identifier hs-var">new_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1820"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall (m :: * -&gt; *) a. Monad m =&gt; ZonkT m a -&gt; ZonkBndrT m a
</span><a href="GHC.Tc.Zonk.Env.html#noBinders"><span class="hs-identifier hs-var">noBinders</span></a></span><span> </span><span class="annot"><span class="annottext">(ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
 -&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind))
-&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
-&gt; ZonkBndrT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvBind)
-&gt; Bag EvBind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) (Bag EvBind)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; Bag a -&gt; m (Bag b)
</span><a href="GHC.Data.Bag.html#mapBagM"><span class="hs-identifier hs-var">mapBagM</span></a></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvBind
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBind"><span class="hs-identifier hs-var">zonkEvBind</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621683013055"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1821"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1822"></span><span>    </span><span class="annot"><a href="#local-6989586621683013057"><span class="hs-identifier hs-type">collect_ev_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1823"></span><span>    </span><span id="local-6989586621683013057"><span class="annot"><span class="annottext">collect_ev_bndrs :: Bag EvBind -&gt; [Id]
</span><a href="#local-6989586621683013057"><span class="hs-identifier hs-var hs-var">collect_ev_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EvBind -&gt; [Id] -&gt; [Id]) -&gt; [Id] -&gt; Bag EvBind -&gt; [Id]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; Bag a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">EvBind -&gt; [Id] -&gt; [Id]
</span><a href="#local-6989586621683013061"><span class="hs-identifier hs-var">add</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1824"></span><span>    </span><span id="local-6989586621683013061"><span class="annot"><span class="annottext">add :: EvBind -&gt; [Id] -&gt; [Id]
</span><a href="#local-6989586621683013061"><span class="hs-identifier hs-var hs-var">add</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013064"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013064"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683013065"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683013065"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013064"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621683013065"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-1825"></span><span>
</span><span id="line-1826"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkEvBind"><span class="hs-identifier hs-type">zonkEvBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span>
</span><span id="line-1827"></span><span id="zonkEvBind"><span class="annot"><span class="annottext">zonkEvBind :: EvBind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvBind
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBind"><span class="hs-identifier hs-var hs-var">zonkEvBind</span></a></span></span><span> </span><span id="local-6989586621683013066"><span class="annot"><span class="annottext">bind :: EvBind
</span><a href="#local-6989586621683013066"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvBind"><span class="hs-identifier hs-type">EvBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eb_lhs :: EvBind -&gt; Id
</span><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013067"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013067"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">eb_rhs :: EvBind -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013069"><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013069"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1828"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013070"><span class="annot"><a href="#local-6989586621683013070"><span class="hs-identifier hs-var">var'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;zonkEvBndr&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">Id -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Id
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvBndr"><span class="hs-identifier hs-var">zonkEvBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013067"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-1829"></span><span>
</span><span id="line-1830"></span><span>         </span><span class="hs-comment">-- Optimise the common case of Refl coercions</span><span>
</span><span id="line-1831"></span><span>         </span><span class="hs-comment">-- See Note [Optimise coercion zonking]</span><span>
</span><span id="line-1832"></span><span>         </span><span class="hs-comment">-- This has a very big effect on some programs (eg #5030)</span><span>
</span><span id="line-1833"></span><span>
</span><span id="line-1834"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013071"><span class="annot"><a href="#local-6989586621683013071"><span class="hs-identifier hs-var">term'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#getEqPredTys_maybe"><span class="hs-identifier hs-type">getEqPredTys_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-type">idType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013070"><span class="hs-identifier hs-type">var'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1835"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683013074"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621683013074"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013075"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013075"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013076"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013076"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013075"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Kind -&gt; Kind -&gt; Bool
Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-operator hs-var">`eqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013076"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-1836"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evCoercion"><span class="hs-identifier hs-var">evCoercion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; Kind -&gt; Coercion
</span><a href="GHC.Core.Coercion.html#mkReflCo"><span class="hs-identifier hs-var">mkReflCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621683013074"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013075"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1837"></span><span>           </span><span id="local-6989586621683013080"><span class="annot"><span class="annottext">Maybe (Role, Kind, Kind)
</span><a href="#local-6989586621683013080"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EvTerm -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) EvTerm
</span><a href="GHC.Tc.Zonk.Type.html#zonkEvTerm"><span class="hs-identifier hs-var">zonkEvTerm</span></a></span><span> </span><span class="annot"><span class="annottext">EvTerm
</span><a href="#local-6989586621683013069"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-1838"></span><span>
</span><span id="line-1839"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013066"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#eb_lhs"><span class="hs-identifier hs-var">eb_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013070"><span class="hs-identifier hs-type">var'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#eb_rhs"><span class="hs-identifier hs-var">eb_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013071"><span class="hs-identifier hs-type">term'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1840"></span><span>
</span><span id="line-1841"></span><span class="hs-comment">{- Note [Optimise coercion zonking]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When optimising evidence binds we may come across situations where
a coercion looks like
      cv = ReflCo ty
or    cv1 = cv2
where the type 'ty' is big.  In such cases it is a waste of time to zonk both
  * The variable on the LHS
  * The coercion on the RHS
Rather, we can zonk the variable, and if its type is (ty ~ ty), we can just
use Refl on the right, ignoring the actual coercion on the RHS.

This can have a very big effect, because the constraint solver sometimes does go
to a lot of effort to prove Refl!  (Eg when solving  10+3 = 10+3; cf #5030)
-}</span><span>
</span><span id="line-1856"></span><span>
</span><span id="line-1857"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-type">zonkTcMethInfoToMethInfoX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#TcMethInfo"><span class="hs-identifier hs-type">TcMethInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html#MethInfo"><span class="hs-identifier hs-type">MethInfo</span></a></span><span>
</span><span id="line-1858"></span><span id="zonkTcMethInfoToMethInfoX"><span class="annot"><span class="annottext">zonkTcMethInfoToMethInfoX :: TcMethInfo -&gt; ZonkTcM TcMethInfo
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcMethInfoToMethInfoX"><span class="hs-identifier hs-var hs-var">zonkTcMethInfoToMethInfoX</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683013081"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683013081"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013082"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013082"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013083"><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><a href="#local-6989586621683013083"><span class="hs-identifier hs-var">gdm_spec</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1859"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013084"><span class="annot"><a href="#local-6989586621683013084"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013082"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1860"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683013085"><span class="annot"><a href="#local-6989586621683013085"><span class="hs-identifier hs-var">gdm_spec'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683013086"><span class="hs-identifier hs-type">zonk_gdm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013083"><span class="hs-identifier hs-type">gdm_spec</span></a></span><span>
</span><span id="line-1861"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013081"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683013084"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683013085"><span class="hs-identifier hs-type">gdm_spec'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1862"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1863"></span><span>    </span><span class="annot"><a href="#local-6989586621683013086"><span class="hs-identifier hs-type">zonk_gdm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1864"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#ZonkTcM"><span class="hs-identifier hs-type">ZonkTcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1865"></span><span>    </span><span id="local-6989586621683013086"><span class="annot"><span class="annottext">zonk_gdm :: Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; ZonkTcM (Maybe (DefMethSpec (SrcSpan, Kind)))
</span><a href="#local-6989586621683013086"><span class="hs-identifier hs-var hs-var">zonk_gdm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; ZonkTcM (Maybe (DefMethSpec (SrcSpan, Kind)))
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1866"></span><span>    </span><span class="annot"><a href="#local-6989586621683013086"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind)
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (DefMethSpec (SrcSpan, Kind))
-&gt; ZonkTcM (Maybe (DefMethSpec (SrcSpan, Kind)))
forall a. a -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind) -&gt; Maybe (DefMethSpec (SrcSpan, Kind))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">DefMethSpec (SrcSpan, Kind)
forall ty. DefMethSpec ty
</span><a href="GHC.Types.Basic.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1867"></span><span>    </span><span class="annot"><a href="#local-6989586621683013086"><span class="hs-identifier hs-var">zonk_gdm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-type">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683013089"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683013089"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013090"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013090"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013091"><span class="annot"><a href="#local-6989586621683013091"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; ZonkT (IOEnv (Env TcGblEnv TcLclEnv)) Kind
</span><a href="GHC.Tc.Zonk.Type.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621683013090"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1869"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#GenericDM"><span class="hs-identifier hs-type">GenericDM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013089"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683013091"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1870"></span><span>
</span><span id="line-1871"></span><span class="hs-comment">---------------------------------------</span><span>
</span><span id="line-1872"></span><span class="hs-comment">{- Note [Zonking the LHS of a RULE]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
See also GHC.HsToCore.Binds Note [Free tyvars on rule LHS]

We need to gather the type variables mentioned on the LHS so we can
quantify over them.  Example:
  data T a = C

  foo :: T a -&gt; Int
  foo C = 1

  {-# RULES &quot;myrule&quot;  foo C = 1 #-}

After type checking the LHS becomes (foo alpha (C alpha)) and we do
not want to zap the unbound meta-tyvar 'alpha' to Any, because that
limits the applicability of the rule.  Instead, we want to quantify
over it!

We do this in two stages.

* During zonking, we skolemise the TcTyVar 'alpha' to TyVar 'a'.  We
  do this by using zonkTvSkolemising as the UnboundTyVarZonker in the
  ZonkEnv.  (This is in fact the whole reason that the ZonkEnv has a
  UnboundTyVarZonker.)

* In GHC.HsToCore.Binds, we quantify over it.  See GHC.HsToCore.Binds
  Note [Free tyvars on rule LHS]

Quantifying here is awkward because (a) the data type is big and (b)
finding the free type vars of an expression is necessarily monadic
operation. (consider /\a -&gt; f @ b, where b is side-effected to a)
-}</span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
             Checking for coercion holes
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1912"></span><span>
</span><span id="line-1913"></span><span class="annot"><span class="hs-comment">-- | Is a coercion hole filled in?</span></span><span>
</span><span id="line-1914"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#isFilledCoercionHole"><span class="hs-identifier hs-type">isFilledCoercionHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1915"></span><span id="isFilledCoercionHole"><span class="annot"><span class="annottext">isFilledCoercionHole :: CoercionHole -&gt; TcM Bool
</span><a href="GHC.Tc.Zonk.Type.html#isFilledCoercionHole"><span class="hs-identifier hs-var hs-var">isFilledCoercionHole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_ref :: CoercionHole -&gt; IORef (Maybe Coercion)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var">ch_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013092"><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683013092"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1916"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Coercion -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Coercion -&gt; Bool)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion) -&gt; TcM Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion)
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683013092"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1917"></span><span>
</span><span id="line-1918"></span><span class="hs-comment">-- | Retrieve the contents of a coercion hole. Panics if the hole</span><span>
</span><span id="line-1919"></span><span class="hs-comment">-- is unfilled</span><span>
</span><span id="line-1920"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole"><span class="hs-identifier hs-type">unpackCoercionHole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1921"></span><span id="unpackCoercionHole"><span class="annot"><span class="annottext">unpackCoercionHole :: CoercionHole -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
</span><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole"><span class="hs-identifier hs-var hs-var">unpackCoercionHole</span></a></span></span><span> </span><span id="local-6989586621683013094"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013094"><span class="hs-identifier hs-var">hole</span></a></span></span><span>
</span><span id="line-1922"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013095"><span class="annot"><a href="#local-6989586621683013095"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion)
</span><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole_maybe"><span class="hs-identifier hs-var">unpackCoercionHole_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013094"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1923"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683013095"><span class="hs-identifier hs-type">contents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1924"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683013096"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683013096"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Coercion -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683013096"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1925"></span><span>           </span><span class="annot"><span class="annottext">Maybe Coercion
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; IOEnv (Env TcGblEnv TcLclEnv) Coercion
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unfilled coercion hole&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013094"><span class="hs-identifier hs-var">hole</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span class="annot"><span class="hs-comment">-- | Retrieve the contents of a coercion hole, if it is filled</span></span><span>
</span><span id="line-1928"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole_maybe"><span class="hs-identifier hs-type">unpackCoercionHole_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1929"></span><span id="unpackCoercionHole_maybe"><span class="annot"><span class="annottext">unpackCoercionHole_maybe :: CoercionHole -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion)
</span><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole_maybe"><span class="hs-identifier hs-var hs-var">unpackCoercionHole_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_ref :: CoercionHole -&gt; IORef (Maybe Coercion)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var">ch_ref</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013097"><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683013097"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion)
forall (m :: * -&gt; *) a. MonadIO m =&gt; TcRef a -&gt; m a
</span><a href="GHC.Tc.Types.TcRef.html#readTcRef"><span class="hs-identifier hs-var">readTcRef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe Coercion)
</span><a href="#local-6989586621683013097"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-1930"></span><span>
</span><span id="line-1931"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCtRewriterSet"><span class="hs-identifier hs-type">zonkCtRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#Ct"><span class="hs-identifier hs-type">Ct</span></a></span><span>
</span><span id="line-1932"></span><span id="zonkCtRewriterSet"><span class="annot"><span class="annottext">zonkCtRewriterSet :: Ct -&gt; TcM Ct
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtRewriterSet"><span class="hs-identifier hs-var hs-var">zonkCtRewriterSet</span></a></span></span><span> </span><span id="local-6989586621683013098"><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621683013098"><span class="hs-identifier hs-var">ct</span></a></span></span><span>
</span><span id="line-1933"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; Bool
</span><a href="GHC.Tc.Types.Constraint.html#isGivenCt"><span class="hs-identifier hs-var">isGivenCt</span></a></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621683013098"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1934"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; TcM Ct
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621683013098"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1935"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1936"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621683013098"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1937"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span id="local-6989586621683013101"><span class="annot"><span class="annottext">eq :: EqCt
</span><a href="#local-6989586621683013101"><span class="hs-identifier hs-var">eq</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#EqCt"><span class="hs-identifier hs-type">EqCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">eq_ev :: EqCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013104"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013104"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013105"><span class="annot"><a href="#local-6989586621683013105"><span class="hs-identifier hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; TcM CtEvidence
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var">zonkCtEvRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013104"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1938"></span><span>                                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CEqCan"><span class="hs-identifier hs-type">CEqCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013101"><span class="hs-identifier hs-type">eq</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#eq_ev"><span class="hs-identifier hs-var">eq_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013105"><span class="hs-identifier hs-type">ev'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1939"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span id="local-6989586621683013107"><span class="annot"><span class="annottext">ir :: IrredCt
</span><a href="#local-6989586621683013107"><span class="hs-identifier hs-var">ir</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#IrredCt"><span class="hs-identifier hs-type">IrredCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ir_ev :: IrredCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013110"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013110"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013111"><span class="annot"><a href="#local-6989586621683013111"><span class="hs-identifier hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; TcM CtEvidence
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var">zonkCtEvRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013110"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1940"></span><span>                                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CIrredCan"><span class="hs-identifier hs-type">CIrredCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013107"><span class="hs-identifier hs-type">ir</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ir_ev"><span class="hs-identifier hs-var">ir_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013111"><span class="hs-identifier hs-type">ev'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1941"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span id="local-6989586621683013113"><span class="annot"><span class="annottext">di :: DictCt
</span><a href="#local-6989586621683013113"><span class="hs-identifier hs-var">di</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#DictCt"><span class="hs-identifier hs-type">DictCt</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">di_ev :: DictCt -&gt; CtEvidence
</span><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013116"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013116"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013117"><span class="annot"><a href="#local-6989586621683013117"><span class="hs-identifier hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; TcM CtEvidence
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var">zonkCtEvRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013116"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1942"></span><span>                                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CDictCan"><span class="hs-identifier hs-type">CDictCan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013113"><span class="hs-identifier hs-type">di</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#di_ev"><span class="hs-identifier hs-var">di_ev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013117"><span class="hs-identifier hs-type">ev'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1943"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CQuantCan"><span class="hs-identifier hs-type">CQuantCan</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ct -&gt; TcM Ct
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Ct
</span><a href="#local-6989586621683013098"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-1944"></span><span>      </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-type">CNonCanonical</span></a></span><span> </span><span id="local-6989586621683013120"><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013120"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013121"><span class="annot"><a href="#local-6989586621683013121"><span class="hs-identifier hs-var">ev'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; TcM CtEvidence
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var">zonkCtEvRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013120"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1945"></span><span>                             </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CNonCanonical"><span class="hs-identifier hs-type">CNonCanonical</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683013121"><span class="hs-identifier hs-type">ev'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1946"></span><span>
</span><span id="line-1947"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-type">zonkCtEvRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtEvidence"><span class="hs-identifier hs-type">CtEvidence</span></a></span><span>
</span><span id="line-1948"></span><span id="zonkCtEvRewriterSet"><span class="annot"><span class="annottext">zonkCtEvRewriterSet :: CtEvidence -&gt; TcM CtEvidence
</span><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var hs-var">zonkCtEvRewriterSet</span></a></span></span><span> </span><span id="local-6989586621683013122"><span class="annot"><span class="annottext">ev :: CtEvidence
</span><a href="#local-6989586621683013122"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtGiven"><span class="hs-identifier hs-type">CtGiven</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1949"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CtEvidence -&gt; TcM CtEvidence
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">CtEvidence
</span><a href="#local-6989586621683013122"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-1950"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkCtEvRewriterSet"><span class="hs-identifier hs-var">zonkCtEvRewriterSet</span></a></span><span> </span><span id="local-6989586621683013124"><span class="annot"><span class="annottext">ev :: CtEvidence
</span><a href="#local-6989586621683013124"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#CtWanted"><span class="hs-identifier hs-type">CtWanted</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctev_rewriters :: CtEvidence -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#ctev_rewriters"><span class="hs-identifier hs-var">ctev_rewriters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683013127"><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621683013127"><span class="hs-identifier hs-var">rewriters</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1951"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013128"><span class="annot"><a href="#local-6989586621683013128"><span class="hs-identifier hs-var">rewriters'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; TcM RewriterSet
</span><a href="GHC.Tc.Zonk.Type.html#zonkRewriterSet"><span class="hs-identifier hs-var">zonkRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="#local-6989586621683013127"><span class="hs-identifier hs-var">rewriters</span></a></span><span>
</span><span id="line-1952"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683013124"><span class="hs-identifier hs-type">ev</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#ctev_rewriters"><span class="hs-identifier hs-var">ctev_rewriters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683013128"><span class="hs-identifier hs-type">rewriters'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1953"></span><span>
</span><span id="line-1954"></span><span class="hs-comment">-- | Check whether any coercion hole in a RewriterSet is still unsolved.</span><span>
</span><span id="line-1955"></span><span class="hs-comment">-- Does this by recursively looking through filled coercion holes until</span><span>
</span><span id="line-1956"></span><span class="hs-comment">-- one is found that is not yet filled in, at which point this aborts.</span><span>
</span><span id="line-1957"></span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#zonkRewriterSet"><span class="hs-identifier hs-type">zonkRewriterSet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-1958"></span><span id="zonkRewriterSet"><span class="annot"><span class="annottext">zonkRewriterSet :: RewriterSet -&gt; TcM RewriterSet
</span><a href="GHC.Tc.Zonk.Type.html#zonkRewriterSet"><span class="hs-identifier hs-var hs-var">zonkRewriterSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span id="local-6989586621683013130"><span class="annot"><span class="annottext">UniqSet CoercionHole
</span><a href="#local-6989586621683013130"><span class="hs-identifier hs-var">set</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1959"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CoercionHole -&gt; TcM RewriterSet -&gt; TcM RewriterSet)
-&gt; TcM RewriterSet -&gt; UniqSet CoercionHole -&gt; TcM RewriterSet
forall elt a. (elt -&gt; a -&gt; a) -&gt; a -&gt; UniqSet elt -&gt; a
</span><a href="GHC.Types.Unique.Set.html#nonDetStrictFoldUniqSet"><span class="hs-identifier hs-var">nonDetStrictFoldUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TcM RewriterSet -&gt; TcM RewriterSet
</span><a href="#local-6989586621683013132"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewriterSet -&gt; TcM RewriterSet
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-var">emptyRewriterSet</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UniqSet CoercionHole
</span><a href="#local-6989586621683013130"><span class="hs-identifier hs-var">set</span></a></span><span>
</span><span id="line-1960"></span><span>     </span><span class="hs-comment">-- this does not introduce non-determinism, because the only</span><span>
</span><span id="line-1961"></span><span>     </span><span class="hs-comment">-- monadic action is to read, and the combining function is</span><span>
</span><span id="line-1962"></span><span>     </span><span class="hs-comment">-- commutative</span><span>
</span><span id="line-1963"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1964"></span><span>    </span><span class="annot"><a href="#local-6989586621683013132"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-1965"></span><span>    </span><span id="local-6989586621683013132"><span class="annot"><span class="annottext">go :: CoercionHole -&gt; TcM RewriterSet -&gt; TcM RewriterSet
</span><a href="#local-6989586621683013132"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621683013134"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013134"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span id="local-6989586621683013135"><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013135"><span class="hs-identifier hs-var">m_acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; RewriterSet -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#unionRewriterSet"><span class="hs-identifier hs-var">unionRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">(RewriterSet -&gt; RewriterSet -&gt; RewriterSet)
-&gt; TcM RewriterSet
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (RewriterSet -&gt; RewriterSet)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TcM RewriterSet
</span><a href="#local-6989586621683013137"><span class="hs-identifier hs-var">check_hole</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013134"><span class="hs-identifier hs-var">hole</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (RewriterSet -&gt; RewriterSet)
-&gt; TcM RewriterSet -&gt; TcM RewriterSet
forall a b.
IOEnv (Env TcGblEnv TcLclEnv) (a -&gt; b)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) a
-&gt; IOEnv (Env TcGblEnv TcLclEnv) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013135"><span class="hs-identifier hs-var">m_acc</span></a></span><span>
</span><span id="line-1966"></span><span>
</span><span id="line-1967"></span><span>    </span><span class="annot"><a href="#local-6989586621683013137"><span class="hs-identifier hs-type">check_hole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span>
</span><span id="line-1968"></span><span>    </span><span id="local-6989586621683013137"><span class="annot"><span class="annottext">check_hole :: CoercionHole -&gt; TcM RewriterSet
</span><a href="#local-6989586621683013137"><span class="hs-identifier hs-var hs-var">check_hole</span></a></span></span><span> </span><span id="local-6989586621683013138"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013138"><span class="hs-identifier hs-var">hole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683013139"><span class="annot"><a href="#local-6989586621683013139"><span class="hs-identifier hs-var">m_co</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Maybe Coercion)
</span><a href="GHC.Tc.Zonk.Type.html#unpackCoercionHole_maybe"><span class="hs-identifier hs-var">unpackCoercionHole_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013138"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1969"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683013139"><span class="hs-identifier hs-type">m_co</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1970"></span><span>                             </span><span class="annot"><span class="annottext">Maybe Coercion
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RewriterSet -&gt; TcM RewriterSet
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoercionHole -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#unitRewriterSet"><span class="hs-identifier hs-var">unitRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621683013138"><span class="hs-identifier hs-var">hole</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1971"></span><span>                             </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683013141"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683013141"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnfilledCoercionHoleMonoid -&gt; TcM RewriterSet
</span><a href="GHC.Tc.Zonk.Type.html#unUCHM"><span class="hs-identifier hs-var">unUCHM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013143"><span class="hs-identifier hs-var">check_co</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621683013141"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span>    </span><span class="annot"><a href="#local-6989586621683013144"><span class="hs-identifier hs-type">check_ty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-type">UnfilledCoercionHoleMonoid</span></a></span><span>
</span><span id="line-1974"></span><span>    </span><span class="annot"><a href="#local-6989586621683013143"><span class="hs-identifier hs-type">check_co</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-type">UnfilledCoercionHoleMonoid</span></a></span><span>
</span><span id="line-1975"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683013144"><span class="annot"><span class="annottext">Kind -&gt; UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013144"><span class="hs-identifier hs-var">check_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; UnfilledCoercionHoleMonoid
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683013143"><span class="annot"><span class="annottext">Coercion -&gt; UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013143"><span class="hs-identifier hs-var">check_co</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Coercion] -&gt; UnfilledCoercionHoleMonoid
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCoFolder () UnfilledCoercionHoleMonoid
-&gt; ()
-&gt; (Kind -&gt; UnfilledCoercionHoleMonoid,
    [Kind] -&gt; UnfilledCoercionHoleMonoid,
    Coercion -&gt; UnfilledCoercionHoleMonoid,
    [Coercion] -&gt; UnfilledCoercionHoleMonoid)
forall a env.
Monoid a =&gt;
TyCoFolder env a
-&gt; env -&gt; (Kind -&gt; a, [Kind] -&gt; a, Coercion -&gt; a, [Coercion] -&gt; a)
</span><a href="GHC.Core.TyCo.Rep.html#foldTyCo"><span class="hs-identifier hs-var">foldTyCo</span></a></span><span> </span><span class="annot"><span class="annottext">TyCoFolder () UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013148"><span class="hs-identifier hs-var">folder</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>
</span><span id="line-1977"></span><span>    </span><span class="annot"><a href="#local-6989586621683013148"><span class="hs-identifier hs-type">folder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-type">TyCoFolder</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-type">UnfilledCoercionHoleMonoid</span></a></span><span>
</span><span id="line-1978"></span><span>    </span><span id="local-6989586621683013148"><span class="annot"><span class="annottext">folder :: TyCoFolder () UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013148"><span class="hs-identifier hs-var hs-var">folder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-type">TyCoFolder</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcf_view :: Kind -&gt; Maybe Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcf_view"><span class="hs-identifier hs-var">tcf_view</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Maybe Kind
</span><a href="GHC.Core.TyCo.Rep.html#noView"><span class="hs-identifier hs-var">noView</span></a></span><span>
</span><span id="line-1979"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_tyvar :: () -&gt; Id -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tyvar"><span class="hs-identifier hs-var">tcf_tyvar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683013153"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013153"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013144"><span class="hs-identifier hs-var">check_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013153"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1980"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_covar :: () -&gt; Id -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Core.TyCo.Rep.html#tcf_covar"><span class="hs-identifier hs-var">tcf_covar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683013155"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013155"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; UnfilledCoercionHoleMonoid
</span><a href="#local-6989586621683013144"><span class="hs-identifier hs-var">check_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621683013155"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1981"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_hole :: () -&gt; CoercionHole -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Core.TyCo.Rep.html#tcf_hole"><span class="hs-identifier hs-var">tcf_hole</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-var">UCHM</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM RewriterSet -&gt; UnfilledCoercionHoleMonoid)
-&gt; (CoercionHole -&gt; TcM RewriterSet)
-&gt; CoercionHole
-&gt; UnfilledCoercionHoleMonoid
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TcM RewriterSet
</span><a href="#local-6989586621683013137"><span class="hs-identifier hs-var">check_hole</span></a></span><span>
</span><span id="line-1982"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_tycobinder :: () -&gt; Id -&gt; ForAllTyFlag -&gt; ()
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tycobinder"><span class="hs-identifier hs-var">tcf_tycobinder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Id
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span class="hs-keyword">newtype</span><span> </span><span id="UnfilledCoercionHoleMonoid"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-var">UnfilledCoercionHoleMonoid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UCHM"><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-var">UCHM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unUCHM"><span class="annot"><span class="annottext">UnfilledCoercionHoleMonoid -&gt; TcM RewriterSet
</span><a href="GHC.Tc.Zonk.Type.html#unUCHM"><span class="hs-identifier hs-var hs-var">unUCHM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.Constraint.html#RewriterSet"><span class="hs-identifier hs-type">RewriterSet</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1985"></span><span>
</span><span id="line-1986"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621683013162"><span id="local-6989586621683013166"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-type">UnfilledCoercionHoleMonoid</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1987"></span><span>  </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-type">UCHM</span></a></span><span> </span><span id="local-6989586621683013173"><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013173"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683013174"><span class="annot"><span class="annottext">&lt;&gt; :: UnfilledCoercionHoleMonoid
-&gt; UnfilledCoercionHoleMonoid -&gt; UnfilledCoercionHoleMonoid
</span><span class="hs-operator hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-type">UCHM</span></a></span><span> </span><span id="local-6989586621683013175"><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013175"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-var">UCHM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewriterSet -&gt; RewriterSet -&gt; RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#unionRewriterSet"><span class="hs-identifier hs-var">unionRewriterSet</span></a></span><span> </span><span class="annot"><span class="annottext">(RewriterSet -&gt; RewriterSet -&gt; RewriterSet)
-&gt; TcM RewriterSet
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (RewriterSet -&gt; RewriterSet)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013173"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) (RewriterSet -&gt; RewriterSet)
-&gt; TcM RewriterSet -&gt; TcM RewriterSet
forall a b.
IOEnv (Env TcGblEnv TcLclEnv) (a -&gt; b)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) a
-&gt; IOEnv (Env TcGblEnv TcLclEnv) b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet
</span><a href="#local-6989586621683013175"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1988"></span><span>
</span><span id="line-1989"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621683013180"><span id="local-6989586621683013183"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="GHC.Tc.Zonk.Type.html#UnfilledCoercionHoleMonoid"><span class="hs-identifier hs-type">UnfilledCoercionHoleMonoid</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1990"></span><span>  </span><span id="local-6989586621683013187"><span class="annot"><span class="annottext">mempty :: UnfilledCoercionHoleMonoid
</span><span class="hs-identifier hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcM RewriterSet -&gt; UnfilledCoercionHoleMonoid
</span><a href="GHC.Tc.Zonk.Type.html#UCHM"><span class="hs-identifier hs-var">UCHM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RewriterSet -&gt; TcM RewriterSet
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">RewriterSet
</span><a href="GHC.Tc.Types.Constraint.html#emptyRewriterSet"><span class="hs-identifier hs-var">emptyRewriterSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1991"></span></pre></body></html>