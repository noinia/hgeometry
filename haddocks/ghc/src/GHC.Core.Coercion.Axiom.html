<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621682548201"><span id="local-6989586621682548202"></span></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans     #-}</span><span> </span><span class="hs-comment">-- Outputable</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable  #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GADTs               #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures      #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RoleAnnotations     #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-comment">-- (c) The University of Glasgow 2012</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">-- | Module for coercion axioms, used to represent type family instances</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- and newtypes</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-15"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchFlag"><span class="hs-identifier">BranchFlag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier">Branched</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier">Unbranched</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier">BranchIndex</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier">Branches</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#manyBranches"><span class="hs-identifier">manyBranches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#unbranched"><span class="hs-identifier">unbranched</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fromBranches"><span class="hs-identifier">fromBranches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#numBranches"><span class="hs-identifier">numBranches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#mapAccumBranches"><span class="hs-identifier">mapAccumBranches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier">CoAxiom</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier">CoAxBranch</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toBranchedAxiom"><span class="hs-identifier">toBranchedAxiom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toUnbranchedAxiom"><span class="hs-identifier">toUnbranchedAxiom</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomName"><span class="hs-identifier">coAxiomName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomArity"><span class="hs-identifier">coAxiomArity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomBranches"><span class="hs-identifier">coAxiomBranches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier">coAxiomTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#isImplicitCoAxiom"><span class="hs-identifier">isImplicitCoAxiom</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomNumPats"><span class="hs-identifier">coAxiomNumPats</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier">coAxiomNthBranch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch_maybe"><span class="hs-identifier">coAxiomSingleBranch_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRole"><span class="hs-identifier">coAxiomRole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier">coAxiomSingleBranch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchTyVars"><span class="hs-identifier">coAxBranchTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchCoVars"><span class="hs-identifier">coAxBranchCoVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRoles"><span class="hs-identifier">coAxBranchRoles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchLHS"><span class="hs-identifier">coAxBranchLHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRHS"><span class="hs-identifier">coAxBranchRHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchSpan"><span class="hs-identifier">coAxBranchSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchIncomps"><span class="hs-identifier">coAxBranchIncomps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#placeHolderIncomps"><span class="hs-identifier">placeHolderIncomps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier">Role</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier">fsFromRole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier">CoAxiomRule</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRewrite"><span class="hs-identifier">BuiltInFamRewrite</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInjectivity"><span class="hs-identifier">BuiltInFamInjectivity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier">TypeEqn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier">coAxiomRuleArgRoles</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier">coAxiomRuleRole</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleBranch_maybe"><span class="hs-identifier">coAxiomRuleBranch_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#isNewtypeAxiomRule_maybe"><span class="hs-identifier">isNewtypeAxiomRule_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>       </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInSynFamily"><span class="hs-identifier">BuiltInSynFamily</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#trivialBuiltInFamily"><span class="hs-identifier">trivialBuiltInFamily</span></a></span><span>
</span><span id="line-37"></span><span>       </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html"><span class="hs-identifier">Language.Haskell.Syntax.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier">Role</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier">Type</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier">pprType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier">pprTyVar</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier">TyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier">isNewTyCon</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html"><span class="hs-identifier">GHC.Data.Pair</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Typeable.html"><span class="hs-identifier">Data.Typeable</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Typeable</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Data</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../array-0.5.8.0-9044/src/Data.Array.html"><span class="hs-identifier">Data.Array</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">mapAccumL</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">{-
Note [Coercion axiom branches]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In order to allow closed type families, an axiom needs to contain an
ordered list of alternatives, called branches. The kind of the coercion built
from an axiom is determined by which index is used when building the coercion
from the axiom.

For example, consider the axiom derived from the following declaration:

type family F a where
  F [Int] = Bool
  F [a]   = Double
  F (a b) = Char

This will give rise to this axiom:

axF :: {                                         F [Int] ~ Bool
       ; forall (a :: *).                        F [a]   ~ Double
       ; forall (k :: *) (a :: k -&gt; *) (b :: k). F (a b) ~ Char
       }

The axiom is used with the AxiomCo constructor of Coercion. If we wish
to have a coercion showing that F (Maybe Int) ~ Char, it will look like

axF[2] &lt;*&gt; &lt;Maybe&gt; &lt;Int&gt; :: F (Maybe Int) ~ Char
-- or, written using concrete-ish syntax --
AxiomRuleCo axF 2 [Refl *, Refl Maybe, Refl Int]

Note that the index is 0-based.

For type-checking, it is also necessary to check that no previous pattern
can unify with the supplied arguments. After all, it is possible that some
of the type arguments are lambda-bound type variables whose instantiation may
cause an earlier match among the branches. We wish to prohibit this behavior,
so the type checker rules out the choice of a branch where a previous branch
can unify. See also [Apartness] in GHC.Core.FamInstEnv.

For example, the following is malformed, where 'a' is a lambda-bound type
variable:

axF[2] &lt;*&gt; &lt;a&gt; &lt;Bool&gt; :: F (a Bool) ~ Char

Why? Because a might be instantiated with [], meaning that branch 1 should
apply, not branch 2. This is a vital consistency check; without it, we could
derive Int ~ Bool, and that is a Bad Thing.

Note [Branched axioms]
~~~~~~~~~~~~~~~~~~~~~~
Although a CoAxiom has the capacity to store many branches, in certain cases,
we want only one. These cases are in data/newtype family instances, newtype
coercions, and type family instances.
Furthermore, these unbranched axioms are used in a
variety of places throughout GHC, and it would difficult to generalize all of
that code to deal with branched axioms, especially when the code can be sure
of the fact that an axiom is indeed a singleton. At the same time, it seems
dangerous to assume singlehood in various places through GHC.

The solution to this is to label a CoAxiom with a phantom type variable
declaring whether it is known to be a singleton or not. The branches
are stored using a special datatype, declared below, that ensures that the
type variable is accurate.

************************************************************************
*                                                                      *
                    Branches
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">{- Note [BranchIndex]
~~~~~~~~~~~~~~~~~~~~
A CoAxiom has 1 or more branches. Each branch has contains a list
of the free type variables in that branch, the LHS type patterns,
and the RHS type for that branch. When we apply an axiom to a list
of coercions, we must choose which branch of the axiom we wish to
use, as the different branches may have different numbers of free
type variables. (The number of type patterns is always the same
among branches, but that doesn't quite concern us here.)
-}</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-keyword">type</span><span> </span><span id="BranchIndex"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-var">BranchIndex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>         </span><span class="hs-comment">-- Counting from zero</span><span>
</span><span id="line-145"></span><span>      </span><span class="hs-comment">-- The index of the branch in the list of branches</span><span>
</span><span id="line-146"></span><span>      </span><span class="hs-comment">-- See Note [BranchIndex]</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-comment">-- promoted data type</span><span>
</span><span id="line-149"></span><span class="hs-keyword">data</span><span> </span><span id="BranchFlag"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchFlag"><span class="hs-identifier hs-var">BranchFlag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Branched"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-var">Branched</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Unbranched"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-var">Unbranched</span></a></span></span><span>
</span><span id="line-150"></span><span class="hs-keyword">type</span><span> </span><span id="Branched"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-var">Branched</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span>
</span><span id="line-151"></span><span class="hs-keyword">type</span><span> </span><span id="Unbranched"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-var">Unbranched</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- By using type synonyms for the promoted constructors, we avoid needing</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- DataKinds and the promotion quote in client modules. This also means that</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- we don't need to export the term-level constructors, which should never be used.</span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">newtype</span><span> </span><span id="Branches"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-var">Branches</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682548014"><span class="annot"><a href="#local-6989586621682548014"><span class="hs-identifier hs-type">br</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchFlag"><span class="hs-identifier hs-type">BranchFlag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MkBranches"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unMkBranches"><span class="annot"><span class="annottext">forall (br :: BranchFlag).
Branches br -&gt; Array BranchIndex CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#unMkBranches"><span class="hs-identifier hs-var hs-var">unMkBranches</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Array</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-158"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">role</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><span class="hs-identifier">nominal</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#manyBranches"><span class="hs-identifier hs-type">manyBranches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span>
</span><span id="line-161"></span><span id="manyBranches"><span class="annot"><span class="annottext">manyBranches :: [CoAxBranch] -&gt; Branches Branched
</span><a href="GHC.Core.Coercion.Axiom.html#manyBranches"><span class="hs-identifier hs-var hs-var">manyBranches</span></a></span></span><span> </span><span id="local-6989586621682548261"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548261"><span class="hs-identifier hs-var">brs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; (Array BranchIndex CoAxBranch -&gt; Branches Branched)
-&gt; Array BranchIndex CoAxBranch
-&gt; Branches Branched
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex) -&gt; BranchIndex
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
</span><a href="#local-6989586621682548264"><span class="hs-identifier hs-var">bnds</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex) -&gt; BranchIndex
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
</span><a href="#local-6989586621682548264"><span class="hs-identifier hs-var">bnds</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                   </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; Branches Branched
forall (br :: BranchFlag).
Array BranchIndex CoAxBranch -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
-&gt; [CoAxBranch] -&gt; Array BranchIndex CoAxBranch
forall i e. Ix i =&gt; (i, i) -&gt; [e] -&gt; Array i e
</span><span class="hs-identifier hs-var">listArray</span></span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
</span><a href="#local-6989586621682548264"><span class="hs-identifier hs-var">bnds</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548261"><span class="hs-identifier hs-var">brs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621682548264"><span class="annot"><span class="annottext">bnds :: (BranchIndex, BranchIndex)
</span><a href="#local-6989586621682548264"><span class="hs-identifier hs-var hs-var">bnds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; BranchIndex
forall a. [a] -&gt; BranchIndex
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; BranchIndex
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548261"><span class="hs-identifier hs-var">brs</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; BranchIndex
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#unbranched"><span class="hs-identifier hs-type">unbranched</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span><span>
</span><span id="line-167"></span><span id="unbranched"><span class="annot"><span class="annottext">unbranched :: CoAxBranch -&gt; Branches Unbranched
</span><a href="GHC.Core.Coercion.Axiom.html#unbranched"><span class="hs-identifier hs-var hs-var">unbranched</span></a></span></span><span> </span><span id="local-6989586621682548268"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621682548268"><span class="hs-identifier hs-var">br</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; Branches Unbranched
forall (br :: BranchFlag).
Array BranchIndex CoAxBranch -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
-&gt; [CoAxBranch] -&gt; Array BranchIndex CoAxBranch
forall i e. Ix i =&gt; (i, i) -&gt; [e] -&gt; Array i e
</span><span class="hs-identifier hs-var">listArray</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621682548268"><span class="hs-identifier hs-var">br</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621682548032"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toBranched"><span class="hs-identifier hs-type">toBranched</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548032"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span></span><span>
</span><span id="line-170"></span><span id="toBranched"><span class="annot"><span class="annottext">toBranched :: forall (br :: BranchFlag). Branches br -&gt; Branches Branched
</span><a href="GHC.Core.Coercion.Axiom.html#toBranched"><span class="hs-identifier hs-var hs-var">toBranched</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; Branches Branched
forall (br :: BranchFlag).
Array BranchIndex CoAxBranch -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span><span> </span><span class="annot"><span class="annottext">(Array BranchIndex CoAxBranch -&gt; Branches Branched)
-&gt; (Branches br -&gt; Array BranchIndex CoAxBranch)
-&gt; Branches br
-&gt; Branches Branched
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Branches br -&gt; Array BranchIndex CoAxBranch
forall (br :: BranchFlag).
Branches br -&gt; Array BranchIndex CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#unMkBranches"><span class="hs-identifier hs-var">unMkBranches</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621682548037"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toUnbranched"><span class="hs-identifier hs-type">toUnbranched</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548037"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span></span><span>
</span><span id="line-173"></span><span id="toUnbranched"><span class="annot"><span class="annottext">toUnbranched :: forall (br :: BranchFlag). Branches br -&gt; Branches Unbranched
</span><a href="GHC.Core.Coercion.Axiom.html#toUnbranched"><span class="hs-identifier hs-var hs-var">toUnbranched</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548281"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548281"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; (Array BranchIndex CoAxBranch -&gt; Branches Unbranched)
-&gt; Array BranchIndex CoAxBranch
-&gt; Branches Unbranched
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; (BranchIndex, BranchIndex)
forall i e. Array i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">bounds</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548281"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex) -&gt; (BranchIndex, BranchIndex) -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>                                </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; Branches Unbranched
forall (br :: BranchFlag).
Array BranchIndex CoAxBranch -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548281"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span id="local-6989586621682548044"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fromBranches"><span class="hs-identifier hs-type">fromBranches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548044"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-177"></span><span id="fromBranches"><span class="annot"><span class="annottext">fromBranches :: forall (br :: BranchFlag). Branches br -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#fromBranches"><span class="hs-identifier hs-var hs-var">fromBranches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; [CoAxBranch]
forall i e. Array i e -&gt; [e]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">(Array BranchIndex CoAxBranch -&gt; [CoAxBranch])
-&gt; (Branches br -&gt; Array BranchIndex CoAxBranch)
-&gt; Branches br
-&gt; [CoAxBranch]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Branches br -&gt; Array BranchIndex CoAxBranch
forall (br :: BranchFlag).
Branches br -&gt; Array BranchIndex CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#unMkBranches"><span class="hs-identifier hs-var">unMkBranches</span></a></span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span id="local-6989586621682548048"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#branchesNth"><span class="hs-identifier hs-type">branchesNth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548048"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span></span><span>
</span><span id="line-180"></span><span id="branchesNth"><span class="annot"><span class="annottext">branchesNth :: forall (br :: BranchFlag). Branches br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#branchesNth"><span class="hs-identifier hs-var hs-var">branchesNth</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548286"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548286"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682548287"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548287"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548286"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; BranchIndex -&gt; CoAxBranch
forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">!</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548287"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span id="local-6989586621682548052"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#numBranches"><span class="hs-identifier hs-type">numBranches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548052"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-183"></span><span id="numBranches"><span class="annot"><span class="annottext">numBranches :: forall (br :: BranchFlag). Branches br -&gt; BranchIndex
</span><a href="GHC.Core.Coercion.Axiom.html#numBranches"><span class="hs-identifier hs-var hs-var">numBranches</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548291"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548291"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex) -&gt; BranchIndex
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; (BranchIndex, BranchIndex)
forall i e. Array i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">bounds</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548291"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; BranchIndex
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">1</span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | The @[CoAxBranch]@ passed into the mapping function is a list of</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- all previous branches, reversed</span><span>
</span><span id="line-187"></span><span id="local-6989586621682548054"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#mapAccumBranches"><span class="hs-identifier hs-type">mapAccumBranches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548054"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548054"><span class="hs-identifier hs-type">br</span></a></span></span><span>
</span><span id="line-189"></span><span id="mapAccumBranches"><span class="annot"><span class="annottext">mapAccumBranches :: forall (br :: BranchFlag).
([CoAxBranch] -&gt; CoAxBranch -&gt; CoAxBranch)
-&gt; Branches br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#mapAccumBranches"><span class="hs-identifier hs-var hs-var">mapAccumBranches</span></a></span></span><span> </span><span id="local-6989586621682548296"><span class="annot"><span class="annottext">[CoAxBranch] -&gt; CoAxBranch -&gt; CoAxBranch
</span><a href="#local-6989586621682548296"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548297"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548297"><span class="hs-identifier hs-var">arr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; Branches br
forall (br :: BranchFlag).
Array BranchIndex CoAxBranch -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-var">MkBranches</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex)
-&gt; [CoAxBranch] -&gt; Array BranchIndex CoAxBranch
forall i e. Ix i =&gt; (i, i) -&gt; [e] -&gt; Array i e
</span><span class="hs-identifier hs-var">listArray</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; (BranchIndex, BranchIndex)
forall i e. Array i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">bounds</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548297"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([CoAxBranch], [CoAxBranch]) -&gt; [CoAxBranch]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(([CoAxBranch], [CoAxBranch]) -&gt; [CoAxBranch])
-&gt; ([CoAxBranch], [CoAxBranch]) -&gt; [CoAxBranch]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([CoAxBranch] -&gt; CoAxBranch -&gt; ([CoAxBranch], CoAxBranch))
-&gt; [CoAxBranch] -&gt; [CoAxBranch] -&gt; ([CoAxBranch], [CoAxBranch])
forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><span class="hs-identifier hs-var">mapAccumL</span></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; CoAxBranch -&gt; ([CoAxBranch], CoAxBranch)
</span><a href="#local-6989586621682548298"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; [CoAxBranch]
forall i e. Array i e -&gt; [e]
</span><span class="hs-identifier hs-var">elems</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548297"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>    </span><span class="annot"><a href="#local-6989586621682548298"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span id="local-6989586621682548298"><span class="annot"><span class="annottext">go :: [CoAxBranch] -&gt; CoAxBranch -&gt; ([CoAxBranch], CoAxBranch)
</span><a href="#local-6989586621682548298"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682548299"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548299"><span class="hs-identifier hs-var">prev_branches</span></a></span></span><span> </span><span id="local-6989586621682548300"><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621682548300"><span class="hs-identifier hs-var">cur_branch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621682548300"><span class="hs-identifier hs-var">cur_branch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [CoAxBranch] -&gt; [CoAxBranch]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548299"><span class="hs-identifier hs-var">prev_branches</span></a></span><span>
</span><span id="line-194"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; CoAxBranch -&gt; CoAxBranch
</span><a href="#local-6989586621682548296"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548299"><span class="hs-identifier hs-var">prev_branches</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxBranch
</span><a href="#local-6989586621682548300"><span class="hs-identifier hs-var">cur_branch</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    Coercion axioms
*                                                                      *
************************************************************************

Note [Storing compatibility]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
During axiom application, we need to be aware of which branches are compatible
with which others. The full explanation is in Note [Compatibility] in
GHc.Core.FamInstEnv. (The code is placed there to avoid a dependency from
GHC.Core.Coercion.Axiom on the unification algorithm.) Although we could
theoretically compute compatibility on the fly, this is silly, so we store it
in a CoAxiom.

Specifically, each branch refers to all other branches with which it is
incompatible. This list might well be empty, and it will always be for the
first branch of any axiom.

CoAxBranches that do not (yet) belong to a CoAxiom should have a panic thunk
stored in cab_incomps. The incompatibilities are properly a property of the
axiom as a whole, and they are computed only when the final axiom is built.

During serialization, the list is converted into a list of the indices
of the branches.

Note [CoAxioms are homogeneous]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
All axioms must be *homogeneous*, meaning that the kind of the LHS must
match the kind of the RHS. In practice, this means:

  Given a CoAxiom { co_ax_tc = ax_tc },
  for every branch CoAxBranch { cab_lhs = lhs, cab_rhs = rhs }:
    typeKind (mkTyConApp ax_tc lhs) `eqType` typeKind rhs

This is checked in FamInstEnv.mkCoAxBranch.
-}</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><span class="hs-comment">-- | A 'CoAxiom' is a \&quot;coercion constructor\&quot;, i.e. a named equality axiom.</span></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-240"></span><span class="hs-keyword">data</span><span> </span><span id="CoAxiom"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-var">CoAxiom</span></a></span></span><span> </span><span id="local-6989586621682548065"><span class="annot"><a href="#local-6989586621682548065"><span class="hs-identifier hs-type">br</span></a></span></span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CoAxiom"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-var">CoAxiom</span></a></span></span><span>                   </span><span class="hs-comment">-- Type equality axiom.</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="co_ax_unique"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Unique
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_unique"><span class="hs-identifier hs-var hs-var">co_ax_unique</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>        </span><span class="hs-comment">-- Unique identifier</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="co_ax_name"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_name"><span class="hs-identifier hs-var hs-var">co_ax_name</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>          </span><span class="hs-comment">-- Name for pretty-printing</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="co_ax_role"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var hs-var">co_ax_role</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>          </span><span class="hs-comment">-- Role of the axiom's equality</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="co_ax_tc"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var hs-var">co_ax_tc</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>         </span><span class="hs-comment">-- The head of the LHS patterns</span><span>
</span><span id="line-246"></span><span>                                      </span><span class="hs-comment">-- e.g.  the newtype or family tycon</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="co_ax_branches"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var hs-var">co_ax_branches</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548065"><span class="hs-identifier hs-type">br</span></a></span><span>   </span><span class="hs-comment">-- The branches that form this axiom</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="co_ax_implicit"><span class="annot"><span class="annottext">forall (br :: BranchFlag). CoAxiom br -&gt; Bool
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_implicit"><span class="hs-identifier hs-var hs-var">co_ax_implicit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>          </span><span class="hs-comment">-- True &lt;=&gt; the axiom is &quot;implicit&quot;</span><span>
</span><span id="line-249"></span><span>                                      </span><span class="hs-comment">-- See Note [Implicit axioms]</span><span>
</span><span id="line-250"></span><span>         </span><span class="hs-comment">-- INVARIANT: co_ax_implicit == True implies length co_ax_branches == 1.</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-comment">-- | A branch of a coercion axiom, which provides the evidence for</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- unwrapping a newtype or a type-family reduction step using a single equation.</span><span>
</span><span id="line-255"></span><span class="hs-keyword">data</span><span> </span><span id="CoAxBranch"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-var">CoAxBranch</span></a></span></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CoAxBranch"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-var">CoAxBranch</span></a></span></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="cab_loc"><span class="annot"><span class="annottext">CoAxBranch -&gt; SrcSpan
</span><a href="GHC.Core.Coercion.Axiom.html#cab_loc"><span class="hs-identifier hs-var hs-var">cab_loc</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-258"></span><span>        </span><span class="hs-comment">-- ^ Location of the defining equation</span><span>
</span><span id="line-259"></span><span>        </span><span class="hs-comment">-- See Note [CoAxiom locations]</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_tvs"><span class="annot"><span class="annottext">CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var hs-var">cab_tvs</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span>       </span><span class="hs-comment">-- ^ Bound type variables; not necessarily fresh</span><span>
</span><span id="line-262"></span><span>       </span><span class="hs-comment">-- See Note [CoAxBranch type variables]</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_eta_tvs"><span class="annot"><span class="annottext">CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_eta_tvs"><span class="hs-identifier hs-var hs-var">cab_eta_tvs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>       </span><span class="hs-comment">-- ^ Eta-reduced tyvars</span><span>
</span><span id="line-265"></span><span>       </span><span class="hs-comment">-- cab_tvs and cab_lhs may be eta-reduced; see</span><span>
</span><span id="line-266"></span><span>       </span><span class="hs-comment">-- Note [Eta reduction for data families]</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_cvs"><span class="annot"><span class="annottext">CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var hs-var">cab_cvs</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-comment">-- ^ Bound coercion variables</span><span>
</span><span id="line-269"></span><span>       </span><span class="hs-comment">-- Always empty, for now.</span><span>
</span><span id="line-270"></span><span>       </span><span class="hs-comment">-- See Note [Constraints in patterns]</span><span>
</span><span id="line-271"></span><span>       </span><span class="hs-comment">-- in GHC.Tc.TyCl</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_roles"><span class="annot"><span class="annottext">CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var hs-var">cab_roles</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-273"></span><span>       </span><span class="annot"><span class="hs-comment">-- ^ See Note [CoAxBranch roles]</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_lhs"><span class="annot"><span class="annottext">CoAxBranch -&gt; [Type]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var hs-var">cab_lhs</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-275"></span><span>       </span><span class="annot"><span class="hs-comment">-- ^ Type patterns to match against</span></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_rhs"><span class="annot"><span class="annottext">CoAxBranch -&gt; Type
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var hs-var">cab_rhs</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-277"></span><span>       </span><span class="hs-comment">-- ^ Right-hand side of the equality</span><span>
</span><span id="line-278"></span><span>       </span><span class="hs-comment">-- See Note [CoAxioms are homogeneous]</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="cab_incomps"><span class="annot"><span class="annottext">CoAxBranch -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_incomps"><span class="hs-identifier hs-var hs-var">cab_incomps</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span>       </span><span class="hs-comment">-- ^ The previous incompatible branches</span><span>
</span><span id="line-281"></span><span>       </span><span class="hs-comment">-- See Note [Storing compatibility]</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682548321"><span id="local-6989586621682548337"><span id="local-6989586621682548350"><span id="local-6989586621682548352"><span id="local-6989586621682548354"><span id="local-6989586621682548360"><span id="local-6989586621682548365"><span id="local-6989586621682548368"><span id="local-6989586621682548371"><span id="local-6989586621682548374"><span id="local-6989586621682548377"><span id="local-6989586621682548380"><span id="local-6989586621682548385"><span id="local-6989586621682548390"><span class="annot"><span class="annottext">Typeable CoAxBranch
Typeable CoAxBranch =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; CoAxBranch -&gt; c CoAxBranch)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoAxBranch)
-&gt; (CoAxBranch -&gt; Constr)
-&gt; (CoAxBranch -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoAxBranch))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c CoAxBranch))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; CoAxBranch -&gt; CoAxBranch)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; [u])
-&gt; (forall u.
    BranchIndex -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch)
-&gt; Data CoAxBranch
CoAxBranch -&gt; Constr
CoAxBranch -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; CoAxBranch -&gt; CoAxBranch
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u.
    BranchIndex -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
BranchIndex -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoAxBranch
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoAxBranch -&gt; c CoAxBranch
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoAxBranch)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoAxBranch)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoAxBranch -&gt; c CoAxBranch
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoAxBranch -&gt; c CoAxBranch
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoAxBranch
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoAxBranch
$ctoConstr :: CoAxBranch -&gt; Constr
toConstr :: CoAxBranch -&gt; Constr
$cdataTypeOf :: CoAxBranch -&gt; DataType
dataTypeOf :: CoAxBranch -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoAxBranch)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoAxBranch)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoAxBranch)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoAxBranch)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; CoAxBranch -&gt; CoAxBranch
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; CoAxBranch -&gt; CoAxBranch
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoAxBranch -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; [u]
$cgmapQi :: forall u.
BranchIndex -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; u
gmapQi :: forall u.
BranchIndex -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoAxBranch -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoAxBranch -&gt; m CoAxBranch
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span id="local-6989586621682548118"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toBranchedAxiom"><span class="hs-identifier hs-type">toBranchedAxiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548118"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span></span><span>
</span><span id="line-286"></span><span id="toBranchedAxiom"><span class="annot"><span class="annottext">toBranchedAxiom :: forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Branched
</span><a href="GHC.Core.Coercion.Axiom.html#toBranchedAxiom"><span class="hs-identifier hs-var hs-var">toBranchedAxiom</span></a></span></span><span> </span><span id="local-6989586621682548401"><span class="annot"><span class="annottext">ax :: CoAxiom br
</span><a href="#local-6989586621682548401"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548402"><span class="annot"><span class="annottext">Branches br
</span><a href="#local-6989586621682548402"><span class="hs-identifier hs-var">branches</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548401"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toBranched"><span class="hs-identifier hs-type">toBranched</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548402"><span class="hs-identifier hs-type">branches</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621682548120"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-type">toUnbranchedAxiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548120"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span></span><span>
</span><span id="line-290"></span><span id="toUnbranchedAxiom"><span class="annot"><span class="annottext">toUnbranchedAxiom :: forall (br :: BranchFlag). CoAxiom br -&gt; CoAxiom Unbranched
</span><a href="GHC.Core.Coercion.Axiom.html#toUnbranchedAxiom"><span class="hs-identifier hs-var hs-var">toUnbranchedAxiom</span></a></span></span><span> </span><span id="local-6989586621682548403"><span class="annot"><span class="annottext">ax :: CoAxiom br
</span><a href="#local-6989586621682548403"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548404"><span class="annot"><span class="annottext">Branches br
</span><a href="#local-6989586621682548404"><span class="hs-identifier hs-var">branches</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548403"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#toUnbranched"><span class="hs-identifier hs-type">toUnbranched</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548404"><span class="hs-identifier hs-type">branches</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span id="local-6989586621682548122"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomNumPats"><span class="hs-identifier hs-type">coAxiomNumPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548122"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-294"></span><span id="coAxiomNumPats"><span class="annot"><span class="annottext">coAxiomNumPats :: forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNumPats"><span class="hs-identifier hs-var hs-var">coAxiomNumPats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; BranchIndex
forall a. [a] -&gt; BranchIndex
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; BranchIndex
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">([Type] -&gt; BranchIndex)
-&gt; (CoAxiom br -&gt; [Type]) -&gt; CoAxiom br -&gt; BranchIndex
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [Type]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchLHS"><span class="hs-identifier hs-var">coAxBranchLHS</span></a></span><span> </span><span class="annot"><span class="annottext">(CoAxBranch -&gt; [Type])
-&gt; (CoAxiom br -&gt; CoAxBranch) -&gt; CoAxiom br -&gt; [Type]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch)
-&gt; BranchIndex -&gt; CoAxiom br -&gt; CoAxBranch
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var">coAxiomNthBranch</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span id="local-6989586621682548129"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomArity"><span class="hs-identifier hs-type">coAxiomArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548129"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span></span><span>
</span><span id="line-297"></span><span id="coAxiomArity"><span class="annot"><span class="annottext">coAxiomArity :: forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; BranchIndex
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomArity"><span class="hs-identifier hs-var hs-var">coAxiomArity</span></a></span></span><span> </span><span id="local-6989586621682548412"><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548412"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621682548413"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548413"><span class="hs-identifier hs-var">index</span></a></span></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; BranchIndex
forall a. [a] -&gt; BranchIndex
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; BranchIndex
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548414"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; BranchIndex
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; BranchIndex
forall a. [a] -&gt; BranchIndex
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; BranchIndex
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548415"><span class="hs-identifier hs-var">cvs</span></a></span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548414"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548414"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548415"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548415"><span class="hs-identifier hs-var">cvs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var">coAxiomNthBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548412"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548413"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-301"></span><span id="local-6989586621682548416"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomName"><span class="hs-identifier hs-type">coAxiomName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548416"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span></span><span>
</span><span id="line-302"></span><span id="coAxiomName"><span class="annot"><span class="annottext">coAxiomName :: forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomName"><span class="hs-identifier hs-var hs-var">coAxiomName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Name
forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_name"><span class="hs-identifier hs-var">co_ax_name</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621682548417"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRole"><span class="hs-identifier hs-type">coAxiomRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548417"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span></span><span>
</span><span id="line-305"></span><span id="coAxiomRole"><span class="annot"><span class="annottext">coAxiomRole :: forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRole"><span class="hs-identifier hs-var hs-var">coAxiomRole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Role
forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span id="local-6989586621682548418"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomBranches"><span class="hs-identifier hs-type">coAxiomBranches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548418"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branches"><span class="hs-identifier hs-type">Branches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548418"><span class="hs-identifier hs-type">br</span></a></span></span><span>
</span><span id="line-308"></span><span id="coAxiomBranches"><span class="annot"><span class="annottext">coAxiomBranches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomBranches"><span class="hs-identifier hs-var hs-var">coAxiomBranches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Branches br
forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span id="local-6989586621682548128"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-type">coAxiomNthBranch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548128"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span></span><span>
</span><span id="line-311"></span><span id="coAxiomNthBranch"><span class="annot"><span class="annottext">coAxiomNthBranch :: forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var hs-var">coAxiomNthBranch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548419"><span class="annot"><span class="annottext">Branches br
</span><a href="#local-6989586621682548419"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682548420"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548420"><span class="hs-identifier hs-var">index</span></a></span></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Branches br -&gt; BranchIndex -&gt; CoAxBranch
forall (br :: BranchFlag). Branches br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#branchesNth"><span class="hs-identifier hs-var">branchesNth</span></a></span><span> </span><span class="annot"><span class="annottext">Branches br
</span><a href="#local-6989586621682548419"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548420"><span class="hs-identifier hs-var">index</span></a></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier hs-type">coAxiomSingleBranch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span>
</span><span id="line-315"></span><span id="coAxiomSingleBranch"><span class="annot"><span class="annottext">coAxiomSingleBranch :: CoAxiom Unbranched -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier hs-var hs-var">coAxiomSingleBranch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548421"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548421"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548421"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; BranchIndex -&gt; CoAxBranch
forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">!</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span id="local-6989586621682548135"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch_maybe"><span class="hs-identifier hs-type">coAxiomSingleBranch_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548135"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span></span><span>
</span><span id="line-319"></span><span id="coAxiomSingleBranch_maybe"><span class="annot"><span class="annottext">coAxiomSingleBranch_maybe :: forall (br :: BranchFlag). CoAxiom br -&gt; Maybe CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch_maybe"><span class="hs-identifier hs-var hs-var">coAxiomSingleBranch_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">co_ax_branches :: forall (br :: BranchFlag). CoAxiom br -&gt; Branches br
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_branches"><span class="hs-identifier hs-var">co_ax_branches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#MkBranches"><span class="hs-identifier hs-type">MkBranches</span></a></span><span> </span><span id="local-6989586621682548425"><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548425"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(BranchIndex, BranchIndex) -&gt; BranchIndex
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; (BranchIndex, BranchIndex)
forall i e. Array i e -&gt; (i, i)
</span><span class="hs-identifier hs-var">bounds</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548425"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; Maybe CoAxBranch
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(CoAxBranch -&gt; Maybe CoAxBranch) -&gt; CoAxBranch -&gt; Maybe CoAxBranch
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch
</span><a href="#local-6989586621682548425"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Array BranchIndex CoAxBranch -&gt; BranchIndex -&gt; CoAxBranch
forall i e. Ix i =&gt; Array i e -&gt; i -&gt; e
</span><span class="hs-operator hs-var">!</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">0</span></span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CoAxBranch
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span id="local-6989586621682548426"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-type">coAxiomTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548426"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span></span><span>
</span><span id="line-326"></span><span id="coAxiomTyCon"><span class="annot"><span class="annottext">coAxiomTyCon :: forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var hs-var">coAxiomTyCon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; TyCon
forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchTyVars"><span class="hs-identifier hs-type">coAxBranchTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span id="coAxBranchTyVars"><span class="annot"><span class="annottext">coAxBranchTyVars :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchTyVars"><span class="hs-identifier hs-var hs-var">coAxBranchTyVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchCoVars"><span class="hs-identifier hs-type">coAxBranchCoVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-332"></span><span id="coAxBranchCoVars"><span class="annot"><span class="annottext">coAxBranchCoVars :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchCoVars"><span class="hs-identifier hs-var hs-var">coAxBranchCoVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchLHS"><span class="hs-identifier hs-type">coAxBranchLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-335"></span><span id="coAxBranchLHS"><span class="annot"><span class="annottext">coAxBranchLHS :: CoAxBranch -&gt; [Type]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchLHS"><span class="hs-identifier hs-var hs-var">coAxBranchLHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [Type]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRHS"><span class="hs-identifier hs-type">coAxBranchRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-338"></span><span id="coAxBranchRHS"><span class="annot"><span class="annottext">coAxBranchRHS :: CoAxBranch -&gt; Type
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRHS"><span class="hs-identifier hs-var hs-var">coAxBranchRHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; Type
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRoles"><span class="hs-identifier hs-type">coAxBranchRoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-341"></span><span id="coAxBranchRoles"><span class="annot"><span class="annottext">coAxBranchRoles :: CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRoles"><span class="hs-identifier hs-var hs-var">coAxBranchRoles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_roles"><span class="hs-identifier hs-var">cab_roles</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchSpan"><span class="hs-identifier hs-type">coAxBranchSpan</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-344"></span><span id="coAxBranchSpan"><span class="annot"><span class="annottext">coAxBranchSpan :: CoAxBranch -&gt; SrcSpan
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchSpan"><span class="hs-identifier hs-var hs-var">coAxBranchSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; SrcSpan
</span><a href="GHC.Core.Coercion.Axiom.html#cab_loc"><span class="hs-identifier hs-var">cab_loc</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span id="local-6989586621682548427"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#isImplicitCoAxiom"><span class="hs-identifier hs-type">isImplicitCoAxiom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548427"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-347"></span><span id="isImplicitCoAxiom"><span class="annot"><span class="annottext">isImplicitCoAxiom :: forall (br :: BranchFlag). CoAxiom br -&gt; Bool
</span><a href="GHC.Core.Coercion.Axiom.html#isImplicitCoAxiom"><span class="hs-identifier hs-var hs-var">isImplicitCoAxiom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Bool
forall (br :: BranchFlag). CoAxiom br -&gt; Bool
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_implicit"><span class="hs-identifier hs-var">co_ax_implicit</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxBranchIncomps"><span class="hs-identifier hs-type">coAxBranchIncomps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-350"></span><span id="coAxBranchIncomps"><span class="annot"><span class="annottext">coAxBranchIncomps :: CoAxBranch -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchIncomps"><span class="hs-identifier hs-var hs-var">coAxBranchIncomps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_incomps"><span class="hs-identifier hs-var">cab_incomps</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-comment">-- See Note [Compatibility] in GHC.Core.FamInstEnv</span><span>
</span><span id="line-353"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#placeHolderIncomps"><span class="hs-identifier hs-type">placeHolderIncomps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-354"></span><span id="placeHolderIncomps"><span class="annot"><span class="annottext">placeHolderIncomps :: [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#placeHolderIncomps"><span class="hs-identifier hs-var hs-var">placeHolderIncomps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [CoAxBranch]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;placeHolderIncomps&quot;</span></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">{-
Note [CoAxBranch type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the case of a CoAxBranch of an associated type-family instance,
we use the *same* type variables in cab_tvs (where possible) as the
enclosing class or instance.  Consider

  instance C Int [z] where
     type F Int [z] = ...   -- Second param must be [z]

In the CoAxBranch in the instance decl (F Int [z]) we use the
same 'z', so that it's easy to check that that type is the same
as that in the instance header.

However, I believe that the cab_tvs of any CoAxBranch are distinct
from the cab_tvs of other CoAxBranches in the same CoAxiom.  This is
important when checking for compatiblity and apartness; e.g. see
GHC.Core.FamInstEnv.compatibleBranches.  (The story seems a bit wobbly
here, but it seems to work.)

Note [CoAxBranch roles]
~~~~~~~~~~~~~~~~~~~~~~~
Consider this code:

  newtype Age = MkAge Int
  newtype Wrap a = MkWrap a

  convert :: Wrap Age -&gt; Int
  convert (MkWrap (MkAge i)) = i

We want this to compile to:

  NTCo:Wrap :: forall a. Wrap a ~R a
  NTCo:Age  :: Age ~R Int
  convert = \x -&gt; x |&gt; (NTCo:Wrap[0] NTCo:Age[0])

But, note that NTCo:Age is at role R. Thus, we need to be able to pass
coercions at role R into axioms. However, we don't *always* want to be able to
do this, as it would be disastrous with type families. The solution is to
annotate the arguments to the axiom with roles, much like we annotate tycon
tyvars. Where do these roles get set? Newtype axioms inherit their roles from
the newtype tycon; family axioms are all at role N.

Note [CoAxiom locations]
~~~~~~~~~~~~~~~~~~~~~~~~
The source location of a CoAxiom is stored in two places in the
datatype tree.
  * The first is in the location info buried in the Name of the
    CoAxiom. This span includes all of the branches of a branched
    CoAxiom.
  * The second is in the cab_loc fields of the CoAxBranches.

In the case of a single branch, we can extract the source location of
the branch from the name of the CoAxiom. In other cases, we need an
explicit SrcSpan to correctly store the location of the equation
giving rise to the FamInstBranch.

Note [Implicit axioms]
~~~~~~~~~~~~~~~~~~~~~~
See also Note [Implicit TyThings] in GHC.Types.TyThing
* A CoAxiom arising from data/type family instances is not &quot;implicit&quot;.
  That is, it has its own IfaceAxiom declaration in an interface file

* The CoAxiom arising from a newtype declaration *is* &quot;implicit&quot;.
  That is, it does not have its own IfaceAxiom declaration in an
  interface file; instead the CoAxiom is generated by type-checking
  the newtype declaration

Note [Eta reduction for data families]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider this
   data family T a b :: *
   newtype instance T Int a = MkT (IO a) deriving( Monad )
We'd like this to work.

From the 'newtype instance' you might think we'd get:
   newtype TInt a = MkT (IO a)
   axiom ax1 a :: T Int a ~ TInt a   -- The newtype-instance part
   axiom ax2 a :: TInt a ~ IO a      -- The newtype part

But now what can we do?  We have this problem
   Given:   d  :: Monad IO
   Wanted:  d' :: Monad (T Int) = d |&gt; ????
What coercion can we use for the ???

Solution: eta-reduce both axioms, thus:
   axiom ax1 :: T Int ~ TInt
   axiom ax2 :: TInt ~ IO
Now
   d' = d |&gt; Monad (sym (ax2 ; ax1))

----- Bottom line ------

For a CoAxBranch for a data family instance with representation
TyCon rep_tc:

  - cab_tvs (of its CoAxiom) may be shorter
    than tyConTyVars of rep_tc.

  - cab_lhs may be shorter than tyConArity of the family tycon
       i.e. LHS is unsaturated

  - cab_rhs will be (rep_tc cab_tvs)
       i.e. RHS is un-saturated

  - This eta reduction happens for data instances as well
    as newtype instances. Here we want to eta-reduce the data family axiom.

  - This eta-reduction is done in GHC.Tc.TyCl.Instance.tcDataFamInstDecl.

But for a /type/ family
  - cab_lhs has the exact arity of the family tycon

There are certain situations (e.g., pretty-printing) where it is necessary to
deal with eta-expanded data family instances. For these situations, the
cab_eta_tvs field records the stuff that has been eta-reduced away.
So if we have
    axiom forall a b. F [a-&gt;b] = D b a
and cab_eta_tvs is [p,q], then the original user-written definition
looked like
    axiom forall a b p q. F [a-&gt;b] p q = D b a p q
(See #9692, #14179, and #15845 for examples of what can go wrong if
we don't eta-expand when showing things to the user.)

See also:

* Note [Newtype eta] in GHC.Core.TyCon.  This is notionally separate
  and deals with the axiom connecting a newtype with its representation
  type; but it too is eta-reduced.
* Note [Implementing eta reduction for data families] in &quot;GHC.Tc.TyCl.Instance&quot;. This
  describes the implementation details of this eta reduction happen.
* Note [RoughMap and rm_empty] for how this complicates the RoughMap implementation slightly.
-}</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
              Instances, especially pretty-printing
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548141"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548141"><span class="hs-identifier hs-type">br</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>    </span><span id="local-6989586621682548438"><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548438"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682548439"><span class="annot"><span class="annottext">== :: CoAxiom br -&gt; CoAxiom br -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621682548440"><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548440"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548438"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548440"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-498"></span><span>    </span><span id="local-6989586621682548445"><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548445"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682548446"><span class="annot"><span class="annottext">/= :: CoAxiom br -&gt; CoAxiom br -&gt; Bool
</span><a href="#local-6989586621682548446"><span class="hs-operator hs-var hs-var hs-var">/=</span></a></span></span><span> </span><span id="local-6989586621682548448"><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548448"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548445"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><a href="#local-6989586621682548448"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548143"><span class="annot"><a href="GHC.Types.Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548143"><span class="hs-identifier hs-type">br</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-501"></span><span>    </span><span id="local-6989586621682548451"><span class="annot"><span class="annottext">getUnique :: CoAxiom br -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var hs-var hs-var">getUnique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Unique
forall (br :: BranchFlag). CoAxiom br -&gt; Unique
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_unique"><span class="hs-identifier hs-var">co_ax_unique</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548150"><span id="local-6989586621682548453"><span class="annot"><a href="GHC.Types.Name.html#NamedThing"><span class="hs-identifier hs-type">NamedThing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548150"><span class="hs-identifier hs-type">br</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-504"></span><span>    </span><span id="local-6989586621682548458"><span class="annot"><span class="annottext">getName :: CoAxiom br -&gt; Name
</span><a href="#local-6989586621682548458"><span class="hs-identifier hs-var hs-var hs-var">getName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Name
forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_name"><span class="hs-identifier hs-var">co_ax_name</span></a></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548157"><span id="local-6989586621682548465"><span id="local-6989586621682548472"><span id="local-6989586621682548477"><span id="local-6989586621682548482"><span id="local-6989586621682548485"><span id="local-6989586621682548488"><span id="local-6989586621682548491"><span id="local-6989586621682548494"><span id="local-6989586621682548497"><span id="local-6989586621682548502"><span id="local-6989586621682548507"><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621682548157"><span class="hs-identifier hs-type">br</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data.Data</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548157"><span class="hs-identifier hs-type">br</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-507"></span><span>    </span><span class="hs-comment">-- don't traverse?</span><span>
</span><span id="line-508"></span><span>    </span><span id="local-6989586621682548511"><span class="annot"><span class="annottext">toConstr :: CoAxiom br -&gt; Constr
</span><span class="hs-identifier hs-var hs-var hs-var">toConstr</span></span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoAxiom&quot;</span></span><span>
</span><span id="line-509"></span><span>    </span><span id="local-6989586621682548515"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (CoAxiom br)
</span><span class="hs-identifier hs-var hs-var hs-var">gunfold</span></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c (CoAxiom br)
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-510"></span><span>    </span><span id="local-6989586621682548517"><span class="annot"><span class="annottext">dataTypeOf :: CoAxiom br -&gt; DataType
</span><span class="hs-identifier hs-var hs-var hs-var">dataTypeOf</span></span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><span class="hs-identifier hs-var">mkNoRepType</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoAxiom&quot;</span></span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548165"><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682548165"><span class="hs-identifier hs-type">br</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-comment">-- You may want GHC.Core.Coercion.pprCoAxiom instead</span><span>
</span><span id="line-514"></span><span>  </span><span id="local-6989586621682548525"><span class="annot"><span class="annottext">ppr :: CoAxiom br -&gt; SDoc
</span><a href="#local-6989586621682548525"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; SDoc) -&gt; (CoAxiom br -&gt; Name) -&gt; CoAxiom br -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom br -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-comment">-- This instance doesn't know the name of the type family</span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-comment">-- If possible, use GHC.Core.Coercion.pprCoAxBranch instead</span><span>
</span><span id="line-519"></span><span>  </span><span id="local-6989586621682548553"><span class="annot"><span class="annottext">ppr :: CoAxBranch -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cab_tvs :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_tvs"><span class="hs-identifier hs-var">cab_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548554"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548554"><span class="hs-identifier hs-var">tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_cvs :: CoAxBranch -&gt; [TyVar]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_cvs"><span class="hs-identifier hs-var">cab_cvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548555"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548555"><span class="hs-identifier hs-var">cvs</span></a></span></span><span>
</span><span id="line-520"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_lhs :: CoAxBranch -&gt; [Type]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_lhs"><span class="hs-identifier hs-var">cab_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548556"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682548556"><span class="hs-identifier hs-var">lhs_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_rhs :: CoAxBranch -&gt; Type
</span><a href="GHC.Core.Coercion.Axiom.html#cab_rhs"><span class="hs-identifier hs-var">cab_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548557"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682548557"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cab_incomps :: CoAxBranch -&gt; [CoAxBranch]
</span><a href="GHC.Core.Coercion.Axiom.html#cab_incomps"><span class="hs-identifier hs-var">cab_incomps</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682548558"><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548558"><span class="hs-identifier hs-var">incomps</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoAxBranch&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682548562"><span class="hs-identifier hs-var">payload</span></a></span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-523"></span><span>      </span><span id="local-6989586621682548562"><span class="annot"><span class="annottext">payload :: SDoc
</span><a href="#local-6989586621682548562"><span class="hs-identifier hs-var hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; BranchIndex -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;forall&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; SDoc) -&gt; [TyVar] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyVar"><span class="hs-identifier hs-var">pprTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548554"><span class="hs-identifier hs-var">tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621682548555"><span class="hs-identifier hs-var">cvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#dot"><span class="hs-identifier hs-var">dot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>                   </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&lt;tycon&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Type -&gt; SDoc) -&gt; [Type] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682548556"><span class="hs-identifier hs-var">lhs_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682548557"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; SDoc
forall doc. IsOutput doc =&gt; Bool -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#ppUnless"><span class="hs-identifier hs-var">ppUnless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoAxBranch] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548558"><span class="hs-identifier hs-var">incomps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-527"></span><span>                             </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;incomps:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CoAxBranch -&gt; SDoc) -&gt; [CoAxBranch] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[CoAxBranch]
</span><a href="#local-6989586621682548558"><span class="hs-identifier hs-var">incomps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    Roles
*                                                                      *
************************************************************************

Roles are defined here to avoid circular dependencies.
-}</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-comment">-- These names are slurped into the parser code. Changing these strings</span><span>
</span><span id="line-540"></span><span class="hs-comment">-- will change the **surface syntax** that GHC accepts! If you want to</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- change only the pretty-printing, do some replumbing. See</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- mkRoleAnnotDecl in GHC.Parser.PostProcess</span><span>
</span><span id="line-543"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-type">fsFromRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-544"></span><span id="fsFromRole"><span class="annot"><span class="annottext">fsFromRole :: Role -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-var hs-var">fsFromRole</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nominal&quot;</span></span><span>
</span><span id="line-545"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-var">fsFromRole</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;representational&quot;</span></span><span>
</span><span id="line-546"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-var">fsFromRole</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;phantom&quot;</span></span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-549"></span><span>  </span><span id="local-6989586621682548579"><span class="annot"><span class="annottext">ppr :: Role -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
forall doc. IsLine doc =&gt; FastString -&gt; doc
</span><a href="GHC.Utils.Outputable.html#ftext"><span class="hs-identifier hs-var">ftext</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; SDoc) -&gt; (Role -&gt; FastString) -&gt; Role -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Role -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-var">fsFromRole</span></a></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548583"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-552"></span><span>  </span><span id="local-6989586621682548592"><span class="annot"><span class="annottext">put_ :: WriteBinHandle -&gt; Role -&gt; IO ()
</span><a href="#local-6989586621682548592"><span class="hs-identifier hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621682548594"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548594"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548594"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-553"></span><span>  </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621682548596"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548596"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548596"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-554"></span><span>  </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621682548597"><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548597"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriteBinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">WriteBinHandle
</span><a href="#local-6989586621682548597"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span>  </span><span id="local-6989586621682548614"><span class="annot"><span class="annottext">get :: ReadBinHandle -&gt; IO Role
</span><a href="#local-6989586621682548614"><span class="hs-identifier hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621682548616"><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682548616"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682548617"><span class="annot"><a href="#local-6989586621682548617"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReadBinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">ReadBinHandle
</span><a href="#local-6989586621682548616"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-557"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682548617"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; IO Role
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>
</span><span id="line-558"></span><span>                          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; IO Role
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span>
</span><span id="line-559"></span><span>                          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Role -&gt; IO Role
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span>
</span><span id="line-560"></span><span>                          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Role
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;get Role &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621682548617"><span class="hs-identifier hs-var">tag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>
</span><span id="line-562"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    CoAxiomRule
              Rules for building Evidence
*                                                                      *
************************************************************************

Note [CoAxiomRule]
~~~~~~~~~~~~~~~~~~
A CoAxiomRule is a built-in axiom, one that we assume to be true:
CoAxiomRules come in four flavours:

* BuiltInFamRew: provides evidence for, say
      (ax1)    3+4 ----&gt; 7
      (ax2)    s+0 ----&gt; s
  The evidence looks like
      AxiomCo ax1 [3,4] :: 3+4 ~ 7
      AxiomCo ax2 [s]   :: s+0 ~ s
  The arguments in the AxiomCo are the /instantiating types/, or
  more generally coercions (see Note [Coercion axioms applied to coercions]
  in GHC.Core.TyCo.Rep).

* BuiltInFamInj: provides evidence for the injectivity of type families
  For example
      (ax3)   g1: a+b ~ 0        ---&gt;  a~0
      (ax4)   g2: a+b ~ 0        ---&gt;  b~0
      (ax5)   g3: a+b1 ~ a~b2    ---&gt;  b1~b2
  The argument to the AxiomCo is the full coercion (always just one).
  So then:
      AxiomCo ax3 [g1] :: a ~ 0
      AxiomCo ax4 [g2] :: b ~ 0
      AxiomCo ax5 [g3] :: b1 ~ b2

* BranchedAxiom: used for closed type families
      type family F a where
        F Int  = Bool
        F Bool = Char
        F a    = a -&gt; Int
  We get one (CoAxiom Branched) for the entire family; when used in an
  AxiomCo we pair it with the BranchIndex to say which branch to pick.

* UnbranchedAxiom: used for several purposes;
    - Newtypes
    - Data family instances
    - Open type family instances

Note [Avoiding allocating lots of CoAxiomRules]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CoAxiomRule is a sum type of four alternatives, which is very nice. But
there is a danger of allocating lots of (BuiltInFamRew bif) objects, every
time we (say) need a type-family rewrite.

To avoid this allocation, we cache the appropraite CoAxiomRule inside each
   BuiltInFamRewrite, BuiltInFamInjectivity
making a little circular data structure.  See the `bifrw_axr` field of
BuiltInFamRewrite, and similarly the others.

It's simple to do this, and saves a percent or two of allocation in programs
that do a lot of type-family work.
-}</span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span class="hs-comment">-- | CoAxiomRule describes a built-in axiom, one that we assume to be true</span><span>
</span><span id="line-625"></span><span class="hs-comment">-- See Note [CoAxiomRule]</span><span>
</span><span id="line-626"></span><span class="hs-keyword">data</span><span> </span><span id="CoAxiomRule"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-var">CoAxiomRule</span></a></span></span><span>
</span><span id="line-627"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BuiltInFamRew"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-var">BuiltInFamRew</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRewrite"><span class="hs-identifier hs-type">BuiltInFamRewrite</span></a></span><span>                   </span><span class="hs-comment">-- Built-in type-family rewrites</span><span>
</span><span id="line-628"></span><span>                                                       </span><span class="hs-comment">--    e.g.  3+5 ~ 7</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BuiltInFamInj"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-var">BuiltInFamInj</span></a></span></span><span>  </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInjectivity"><span class="hs-identifier hs-type">BuiltInFamInjectivity</span></a></span><span>               </span><span class="hs-comment">-- Built-in type-family deductions</span><span>
</span><span id="line-631"></span><span>                                                       </span><span class="hs-comment">--    e.g.  a+b~0 ==&gt;  a~0</span><span>
</span><span id="line-632"></span><span>                                                       </span><span class="hs-comment">-- Always unary</span><span>
</span><span id="line-633"></span><span>
</span><span id="line-634"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BranchedAxiom"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-var">BranchedAxiom</span></a></span></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span>  </span><span class="hs-comment">-- Closed type family</span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnbranchedAxiom"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-var">UnbranchedAxiom</span></a></span></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Unbranched"><span class="hs-identifier hs-type">Unbranched</span></a></span><span class="hs-special">)</span><span>            </span><span class="hs-comment">-- Open type family instance,</span><span>
</span><span id="line-637"></span><span>                                                       </span><span class="hs-comment">--    data family instances</span><span>
</span><span id="line-638"></span><span>                                                       </span><span class="hs-comment">--    and newtypes</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548626"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-type">BuiltInFamRew</span></a></span><span>  </span><span id="local-6989586621682548639"><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548639"><span class="hs-identifier hs-var">bif1</span></a></span></span><span class="hs-special">)</span><span>  </span><span id="local-6989586621682548640"><span class="annot"><span class="annottext">== :: CoAxiomRule -&gt; CoAxiomRule -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var">==</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-type">BuiltInFamRew</span></a></span><span>  </span><span id="local-6989586621682548641"><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548641"><span class="hs-identifier hs-var">bif2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_name"><span class="hs-identifier hs-var">bifrw_name</span></a></span><span>  </span><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548639"><span class="hs-identifier hs-var">bif1</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_name"><span class="hs-identifier hs-var">bifrw_name</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548641"><span class="hs-identifier hs-var">bif2</span></a></span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-type">BuiltInFamInj</span></a></span><span> </span><span id="local-6989586621682548643"><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548643"><span class="hs-identifier hs-var">bif1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-type">BuiltInFamInj</span></a></span><span> </span><span id="local-6989586621682548644"><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548644"><span class="hs-identifier hs-var">bif2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_name"><span class="hs-identifier hs-var">bifinj_name</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548643"><span class="hs-identifier hs-var">bif1</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; FastString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_name"><span class="hs-identifier hs-var">bifinj_name</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548644"><span class="hs-identifier hs-var">bif2</span></a></span><span>
</span><span id="line-643"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548646"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548646"><span class="hs-identifier hs-var">ax1</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548647"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548647"><span class="hs-identifier hs-var">ax2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548646"><span class="hs-identifier hs-var">ax1</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548647"><span class="hs-identifier hs-var">ax2</span></a></span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548648"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548648"><span class="hs-identifier hs-var">ax1</span></a></span></span><span> </span><span id="local-6989586621682548649"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548649"><span class="hs-identifier hs-var">i1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548650"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548650"><span class="hs-identifier hs-var">ax2</span></a></span></span><span> </span><span id="local-6989586621682548651"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548651"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548648"><span class="hs-identifier hs-var">ax1</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548650"><span class="hs-identifier hs-var">ax2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548649"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; BranchIndex -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548651"><span class="hs-identifier hs-var">i2</span></a></span><span>
</span><span id="line-645"></span><span>  </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier hs-type">coAxiomRuleRole</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-648"></span><span id="coAxiomRuleRole"><span class="annot"><span class="annottext">coAxiomRuleRole :: CoAxiomRule -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier hs-var hs-var">coAxiomRuleRole</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-type">BuiltInFamRew</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>
</span><span id="line-649"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier hs-var">coAxiomRuleRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-type">BuiltInFamInj</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>
</span><span id="line-650"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier hs-var">coAxiomRuleRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548653"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548653"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; Role
forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRole"><span class="hs-identifier hs-var">coAxiomRole</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548653"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-651"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleRole"><span class="hs-identifier hs-var">coAxiomRuleRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548654"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548654"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Role
forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRole"><span class="hs-identifier hs-var">coAxiomRole</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548654"><span class="hs-identifier hs-var">ax</span></a></span><span>
</span><span id="line-652"></span><span>
</span><span id="line-653"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier hs-type">coAxiomRuleArgRoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-654"></span><span id="coAxiomRuleArgRoles"><span class="annot"><span class="annottext">coAxiomRuleArgRoles :: CoAxiomRule -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier hs-var hs-var">coAxiomRuleArgRoles</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-type">BuiltInFamRew</span></a></span><span>  </span><span id="local-6989586621682548655"><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548655"><span class="hs-identifier hs-var">bif</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BranchIndex -&gt; Role -&gt; [Role]
forall a. BranchIndex -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; BranchIndex
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_arity"><span class="hs-identifier hs-var">bifrw_arity</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548655"><span class="hs-identifier hs-var">bif</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span>
</span><span id="line-655"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier hs-var">coAxiomRuleArgRoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-type">BuiltInFamInj</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-656"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier hs-var">coAxiomRuleArgRoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548658"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548658"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRoles"><span class="hs-identifier hs-var">coAxBranchRoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier hs-var">coAxiomSingleBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548658"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleArgRoles"><span class="hs-identifier hs-var">coAxiomRuleArgRoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548659"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548659"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621682548660"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548660"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxBranch -&gt; [Role]
</span><a href="GHC.Core.Coercion.Axiom.html#coAxBranchRoles"><span class="hs-identifier hs-var">coAxBranchRoles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; BranchIndex -&gt; CoAxBranch
forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var">coAxiomNthBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548659"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548660"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleBranch_maybe"><span class="hs-identifier hs-type">coAxiomRuleBranch_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span id="coAxiomRuleBranch_maybe"><span class="annot"><span class="annottext">coAxiomRuleBranch_maybe :: CoAxiomRule -&gt; Maybe (TyCon, Role, CoAxBranch)
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleBranch_maybe"><span class="hs-identifier hs-var hs-var">coAxiomRuleBranch_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548661"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548661"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyCon, Role, CoAxBranch) -&gt; Maybe (TyCon, Role, CoAxBranch)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; TyCon
forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548661"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; Role
forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548661"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier hs-var">coAxiomSingleBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548661"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleBranch_maybe"><span class="hs-identifier hs-var">coAxiomRuleBranch_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548662"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548662"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621682548663"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548663"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyCon, Role, CoAxBranch) -&gt; Maybe (TyCon, Role, CoAxBranch)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; TyCon
forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_tc"><span class="hs-identifier hs-var">co_ax_tc</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548662"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Role
forall (br :: BranchFlag). CoAxiom br -&gt; Role
</span><a href="GHC.Core.Coercion.Axiom.html#co_ax_role"><span class="hs-identifier hs-var">co_ax_role</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548662"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; BranchIndex -&gt; CoAxBranch
forall (br :: BranchFlag). CoAxiom br -&gt; BranchIndex -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomNthBranch"><span class="hs-identifier hs-var">coAxiomNthBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548662"><span class="hs-identifier hs-var">ax</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548663"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#coAxiomRuleBranch_maybe"><span class="hs-identifier hs-var">coAxiomRuleBranch_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (TyCon, Role, CoAxBranch)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#isNewtypeAxiomRule_maybe"><span class="hs-identifier hs-type">isNewtypeAxiomRule_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxBranch"><span class="hs-identifier hs-type">CoAxBranch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-665"></span><span id="isNewtypeAxiomRule_maybe"><span class="annot"><span class="annottext">isNewtypeAxiomRule_maybe :: CoAxiomRule -&gt; Maybe (TyCon, CoAxBranch)
</span><a href="GHC.Core.Coercion.Axiom.html#isNewtypeAxiomRule_maybe"><span class="hs-identifier hs-var hs-var">isNewtypeAxiomRule_maybe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548664"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548664"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682548665"><span class="annot"><span class="annottext">tc :: TyCon
</span><a href="#local-6989586621682548665"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; TyCon
forall (br :: BranchFlag). CoAxiom br -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomTyCon"><span class="hs-identifier hs-var">coAxiomTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548664"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682548665"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyCon, CoAxBranch) -&gt; Maybe (TyCon, CoAxBranch)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682548665"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; CoAxBranch
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomSingleBranch"><span class="hs-identifier hs-var">coAxiomSingleBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548664"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#isNewtypeAxiomRule_maybe"><span class="hs-identifier hs-var">isNewtypeAxiomRule_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (TyCon, CoAxBranch)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682548669"><span id="local-6989586621682548676"><span id="local-6989586621682548681"><span id="local-6989586621682548686"><span id="local-6989586621682548689"><span id="local-6989586621682548692"><span id="local-6989586621682548695"><span id="local-6989586621682548698"><span id="local-6989586621682548701"><span id="local-6989586621682548706"><span id="local-6989586621682548711"><span class="annot"><span class="hs-identifier hs-type">Data.Data</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-670"></span><span>  </span><span class="hs-comment">-- don't traverse?</span><span>
</span><span id="line-671"></span><span>  </span><span id="local-6989586621682548715"><span class="annot"><span class="annottext">toConstr :: CoAxiomRule -&gt; Constr
</span><span class="hs-identifier hs-var hs-var hs-var">toConstr</span></span></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoAxiomRule&quot;</span></span><span>
</span><span id="line-672"></span><span>  </span><span id="local-6989586621682548718"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoAxiomRule
</span><span class="hs-identifier hs-var hs-var hs-var">gunfold</span></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c CoAxiomRule
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-673"></span><span>  </span><span id="local-6989586621682548719"><span class="annot"><span class="annottext">dataTypeOf :: CoAxiomRule -&gt; DataType
</span><span class="hs-identifier hs-var hs-var hs-var">dataTypeOf</span></span></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><span class="hs-identifier hs-var">mkNoRepType</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoAxiomRule&quot;</span></span><span>
</span><span id="line-674"></span><span>
</span><span id="line-675"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-676"></span><span>  </span><span id="local-6989586621682548730"><span class="annot"><span class="annottext">ppr :: CoAxiomRule -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRew"><span class="hs-identifier hs-type">BuiltInFamRew</span></a></span><span>  </span><span id="local-6989586621682548731"><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548731"><span class="hs-identifier hs-var">bif</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_name"><span class="hs-identifier hs-var">bifrw_name</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamRewrite
</span><a href="#local-6989586621682548731"><span class="hs-identifier hs-var">bif</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInj"><span class="hs-identifier hs-type">BuiltInFamInj</span></a></span><span> </span><span id="local-6989586621682548732"><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548732"><span class="hs-identifier hs-var">bif</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_name"><span class="hs-identifier hs-var">bifinj_name</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltInFamInjectivity
</span><a href="#local-6989586621682548732"><span class="hs-identifier hs-var">bif</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#UnbranchedAxiom"><span class="hs-identifier hs-type">UnbranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548733"><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548733"><span class="hs-identifier hs-var">ax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Unbranched -&gt; Name
forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomName"><span class="hs-identifier hs-var">coAxiomName</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Unbranched
</span><a href="#local-6989586621682548733"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchedAxiom"><span class="hs-identifier hs-type">BranchedAxiom</span></a></span><span> </span><span id="local-6989586621682548734"><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548734"><span class="hs-identifier hs-var">ax</span></a></span></span><span> </span><span id="local-6989586621682548735"><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548735"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CoAxiom Branched -&gt; Name
forall (br :: BranchFlag). CoAxiom br -&gt; Name
</span><a href="GHC.Core.Coercion.Axiom.html#coAxiomName"><span class="hs-identifier hs-var">coAxiomName</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><a href="#local-6989586621682548734"><span class="hs-identifier hs-var">ax</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BranchIndex -&gt; SDoc
forall doc. IsLine doc =&gt; BranchIndex -&gt; doc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">BranchIndex
</span><a href="#local-6989586621682548735"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                    Built-in families
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span>
</span><span id="line-688"></span><span class="annot"><span class="hs-comment">-- | A more explicit representation for `t1 ~ t2`.</span></span><span>
</span><span id="line-689"></span><span class="hs-keyword">type</span><span> </span><span id="TypeEqn"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier hs-var">TypeEqn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.Pair.html#Pair"><span class="hs-identifier hs-type">Pair</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span class="hs-comment">-- Type checking of built-in families</span><span>
</span><span id="line-692"></span><span class="hs-keyword">data</span><span> </span><span id="BuiltInSynFamily"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInSynFamily"><span class="hs-identifier hs-var">BuiltInSynFamily</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BuiltInSynFamily"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInSynFamily"><span class="hs-identifier hs-var">BuiltInSynFamily</span></a></span></span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="sfMatchFam"><span class="annot"><span class="annottext">BuiltInSynFamily -&gt; [BuiltInFamRewrite]
</span><a href="GHC.Core.Coercion.Axiom.html#sfMatchFam"><span class="hs-identifier hs-var hs-var">sfMatchFam</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRewrite"><span class="hs-identifier hs-type">BuiltInFamRewrite</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="sfInteract"><span class="annot"><span class="annottext">BuiltInSynFamily -&gt; [BuiltInFamInjectivity]
</span><a href="GHC.Core.Coercion.Axiom.html#sfInteract"><span class="hs-identifier hs-var hs-var">sfInteract</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInjectivity"><span class="hs-identifier hs-type">BuiltInFamInjectivity</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-695"></span><span>    </span><span class="hs-comment">-- If given these type arguments and RHS, returns the equalities that</span><span>
</span><span id="line-696"></span><span>    </span><span class="hs-comment">-- are guaranteed to hold.  That is, if</span><span>
</span><span id="line-697"></span><span>    </span><span class="hs-comment">--     (ar, Pair s1 s2)  is an element of  (sfInteract tys ty)</span><span>
</span><span id="line-698"></span><span>    </span><span class="hs-comment">-- then  AxiomRule ar [co :: F tys ~ ty]  ::  s1~s2</span><span>
</span><span id="line-699"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span class="hs-keyword">data</span><span> </span><span id="BuiltInFamInjectivity"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamInjectivity"><span class="hs-identifier hs-var">BuiltInFamInjectivity</span></a></span></span><span>  </span><span class="hs-comment">-- Argument and result role are always Nominal</span><span>
</span><span id="line-702"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BIF_Interact"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BIF_Interact"><span class="hs-identifier hs-var">BIF_Interact</span></a></span></span><span>
</span><span id="line-703"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="bifinj_name"><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_name"><span class="hs-identifier hs-var hs-var">bifinj_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-704"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifinj_axr"><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; CoAxiomRule
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_axr"><span class="hs-identifier hs-var hs-var">bifinj_axr</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-comment">-- Cached copy of (BuiltInFamINj this-bif)</span><span>
</span><span id="line-705"></span><span>                                   </span><span class="hs-comment">-- See Note [Avoiding allocating lots of CoAxiomRules]</span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifinj_proves"><span class="annot"><span class="annottext">BuiltInFamInjectivity -&gt; TypeEqn -&gt; Maybe TypeEqn
</span><a href="GHC.Core.Coercion.Axiom.html#bifinj_proves"><span class="hs-identifier hs-var hs-var">bifinj_proves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier hs-type">TypeEqn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier hs-type">TypeEqn</span></a></span><span>
</span><span id="line-708"></span><span>            </span><span class="hs-comment">-- ^ Always unary: just one TypeEqn argument</span><span>
</span><span id="line-709"></span><span>            </span><span class="hs-comment">-- Returns @Nothing@ when it doesn't like the supplied argument.</span><span>
</span><span id="line-710"></span><span>            </span><span class="hs-comment">-- When this happens in a coercion that means that the coercion is</span><span>
</span><span id="line-711"></span><span>            </span><span class="hs-comment">-- ill-formed, and Core Lint checks for that.</span><span>
</span><span id="line-712"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span class="hs-keyword">data</span><span> </span><span id="BuiltInFamRewrite"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInFamRewrite"><span class="hs-identifier hs-var">BuiltInFamRewrite</span></a></span></span><span>  </span><span class="hs-comment">-- Argument roles and result role are always Nominal</span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BIF_Rewrite"><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BIF_Rewrite"><span class="hs-identifier hs-var">BIF_Rewrite</span></a></span></span><span>
</span><span id="line-716"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="bifrw_name"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_name"><span class="hs-identifier hs-var hs-var">bifrw_name</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-717"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifrw_axr"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; CoAxiomRule
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_axr"><span class="hs-identifier hs-var hs-var">bifrw_axr</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-comment">-- Cached copy of (BuiltInFamRew this-bif)</span><span>
</span><span id="line-718"></span><span>                                    </span><span class="hs-comment">-- See Note [Avoiding allocating lots of CoAxiomRules]</span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifrw_fam_tc"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; TyCon
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_fam_tc"><span class="hs-identifier hs-var hs-var">bifrw_fam_tc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>       </span><span class="hs-comment">-- Needed for tyConsOfType</span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifrw_arity"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; BranchIndex
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_arity"><span class="hs-identifier hs-var hs-var">bifrw_arity</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>       </span><span class="hs-comment">-- Number of type arguments needed</span><span>
</span><span id="line-723"></span><span>                                    </span><span class="hs-comment">-- to instantiate this axiom</span><span>
</span><span id="line-724"></span><span>
</span><span id="line-725"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifrw_match"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; [Type] -&gt; Maybe ([Type], Type)
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_match"><span class="hs-identifier hs-var hs-var">bifrw_match</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>           </span><span class="hs-comment">-- coaxrMatch: does this reduce on the given arguments?</span><span>
</span><span id="line-727"></span><span>           </span><span class="hs-comment">-- If it does, returns (types to instantiate the rule at, rhs type)</span><span>
</span><span id="line-728"></span><span>           </span><span class="hs-comment">-- That is: mkAxiomCo ax (zipWith mkReflCo coAxiomRuleArgRoles ts)</span><span>
</span><span id="line-729"></span><span>           </span><span class="hs-comment">--              :: F tys ~N rhs,</span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="bifrw_proves"><span class="annot"><span class="annottext">BuiltInFamRewrite -&gt; [TypeEqn] -&gt; Maybe TypeEqn
</span><a href="GHC.Core.Coercion.Axiom.html#bifrw_proves"><span class="hs-identifier hs-var hs-var">bifrw_proves</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier hs-type">TypeEqn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#TypeEqn"><span class="hs-identifier hs-type">TypeEqn</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-732"></span><span>           </span><span class="hs-comment">-- length(inst_tys) = bifrw_arity</span><span>
</span><span id="line-733"></span><span>
</span><span id="line-734"></span><span>      </span><span class="hs-comment">-- INVARIANT: bifrw_match and bifrw_proves are related as follows:</span><span>
</span><span id="line-735"></span><span>      </span><span class="hs-comment">-- If    Just (inst_tys, res_ty) = bifrw_match ax arg_tys</span><span>
</span><span id="line-736"></span><span>      </span><span class="hs-comment">-- then  * length arg_tys = tyConArity fam_tc</span><span>
</span><span id="line-737"></span><span>      </span><span class="hs-comment">--       * length inst_tys = bifrw_arity</span><span>
</span><span id="line-738"></span><span>       </span><span class="hs-comment">--      * bifrw_proves (map (return @Pair) inst_tys) = Just (return @Pair res_ty)</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="hs-comment">-- Provides default implementations that do nothing.</span><span>
</span><span id="line-742"></span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#trivialBuiltInFamily"><span class="hs-identifier hs-type">trivialBuiltInFamily</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInSynFamily"><span class="hs-identifier hs-type">BuiltInSynFamily</span></a></span><span>
</span><span id="line-743"></span><span id="trivialBuiltInFamily"><span class="annot"><span class="annottext">trivialBuiltInFamily :: BuiltInSynFamily
</span><a href="GHC.Core.Coercion.Axiom.html#trivialBuiltInFamily"><span class="hs-identifier hs-var hs-var">trivialBuiltInFamily</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BuiltInSynFamily"><span class="hs-identifier hs-type">BuiltInSynFamily</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sfMatchFam :: [BuiltInFamRewrite]
</span><a href="GHC.Core.Coercion.Axiom.html#sfMatchFam"><span class="hs-identifier hs-var">sfMatchFam</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sfInteract :: [BuiltInFamInjectivity]
</span><a href="GHC.Core.Coercion.Axiom.html#sfInteract"><span class="hs-identifier hs-var">sfInteract</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-744"></span></pre></body></html>