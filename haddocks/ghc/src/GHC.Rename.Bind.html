<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns   #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">{-
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

Renaming and dependency analysis of bindings

This module does renaming and dependency analysis on value bindings in
the abstract syntax.  It does {\em not} do cycle-checks on class or
type-synonym declarations; those cannot be done at this stage because
they may be affected by renaming (which isn't fully worked out yet).
-}</span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html"><span class="hs-identifier">GHC.Rename.Bind</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-18"></span><span>   </span><span class="hs-comment">-- Renaming top-level bindings</span><span>
</span><span id="line-19"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsLHS"><span class="hs-identifier">rnTopBindsLHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsLHSBoot"><span class="hs-identifier">rnTopBindsLHSBoot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsBoot"><span class="hs-identifier">rnTopBindsBoot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier">rnValBindsRHS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>   </span><span class="hs-comment">-- Renaming local bindings</span><span>
</span><span id="line-22"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier">rnLocalBindsAndThen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier">rnLocalValBindsLHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier">rnLocalValBindsRHS</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>   </span><span class="hs-comment">-- Other bindings</span><span>
</span><span id="line-25"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#rnMethodBinds"><span class="hs-identifier">rnMethodBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier">renameSigs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier">rnMatchGroup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHSs"><span class="hs-identifier">rnGRHSs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier">rnGRHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnSrcFixityDecl"><span class="hs-identifier">rnSrcFixityDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier">makeMiniFixityEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier">MiniFixityEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#emptyMiniFixityEnv"><span class="hs-identifier">emptyMiniFixityEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>   </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier">HsSigCtxt</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>   </span><span class="hs-comment">-- Utility for hs-boot files</span><span>
</span><span id="line-31"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#rejectBootDecls"><span class="hs-identifier">rejectBootDecls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span>   </span><span class="hs-comment">-- Utility for COMPLETE pragmas</span><span>
</span><span id="line-34"></span><span>   </span><span class="annot"><a href="GHC.Rename.Bind.html#localCompletePragmas"><span class="hs-identifier">localCompletePragmas</span></a></span><span>
</span><span id="line-35"></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html"><span class="hs-identifier">GHC.Rename.Expr</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier">rnExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier">rnLExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier">rnStmts</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html"><span class="hs-identifier">GHC.Rename.HsType</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html"><span class="hs-identifier">GHC.Rename.Pat</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Names.html"><span class="hs-identifier">GHC.Rename.Names</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html"><span class="hs-identifier">GHC.Rename.Fixity</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier">mapFvRn</span></a></span><span>
</span><span id="line-50"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier">checkDupRdrNames</span></a></span><span>
</span><span id="line-51"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier">warnUnusedLocalBinds</span></a></span><span>
</span><span id="line-52"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier">checkUnusedRecordWildcard</span></a></span><span>
</span><span id="line-53"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier">checkDupAndShadowedNames</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier">bindLocalNamesFV</span></a></span><span>
</span><span id="line-54"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier">addNoNestedForallsContextsErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier">checkInferredVars</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html"><span class="hs-identifier">GHC.Driver.DynFlags</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Env.html"><span class="hs-identifier">GHC.Types.Name.Env</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier">rdrNameOcc</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html"><span class="hs-identifier">GHC.Types.SourceFile</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html"><span class="hs-identifier">GHC.Data.List.SetOps</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.List.SetOps.html#findDupsEq"><span class="hs-identifier">findDupsEq</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RecFlag"><span class="hs-identifier">RecFlag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier">TypeOrKind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Graph.Directed.html"><span class="hs-identifier">GHC.Data.Graph.Directed</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Graph.html#SCC"><span class="hs-identifier">SCC</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html"><span class="hs-identifier">GHC.Types.CompleteMatch</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html#orElse"><span class="hs-identifier">orElse</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.LanguageExtensions.html"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html"><span class="hs-identifier">Language.Haskell.Syntax.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier">FieldLabelString</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">partition</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DSet.html"><span class="hs-identifier">GHC.Types.Unique.DSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DSet.html#mkUniqDSet"><span class="hs-identifier">mkUniqDSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">{-
-- ToDo: Put the annotations into the monad, so that they arrive in the proper
-- place and can be used when complaining.

The code tree received by the function @rnBinds@ contains definitions
in where-clauses which are all apparently mutually recursive, but which may
not really depend upon each other. For example, in the top level program
\begin{verbatim}
f x = y where a = x
              y = x
\end{verbatim}
the definitions of @a@ and @y@ do not depend on each other at all.
Unfortunately, the typechecker cannot always check such definitions.
\footnote{Mycroft, A. 1984. Polymorphic type schemes and recursive
definitions. In Proceedings of the International Symposium on Programming,
Toulouse, pp. 217-39. LNCS 167. Springer Verlag.}
However, the typechecker usually can check definitions in which only the
strongly connected components have been collected into recursive bindings.
This is precisely what the function @rnBinds@ does.

ToDo: deal with case where a single monobinds binds the same variable
twice.

The vertag tag is a unique @Int@; the tags only need to be unique
within one @MonoBinds@, so that unique-Int plumbing is done explicitly
(heavy monad machinery not needed).


************************************************************************
*                                                                      *
* naming conventions                                                   *
*                                                                      *
************************************************************************

\subsection[name-conventions]{Name conventions}

The basic algorithm involves walking over the tree and returning a tuple
containing the new tree plus its free variables. Some functions, such
as those walking polymorphic bindings (HsBinds) and qualifier lists in
list comprehensions (@Quals@), return the variables bound in local
environments. These are then used to calculate the free variables of the
expression evaluated in these environments.

Conventions for variable names are as follows:
\begin{itemize}
\item
new code is given a prime to distinguish it from the old.

\item
a set of variables defined in @Exp@ is written @dvExp@

\item
a set of variables free in @Exp@ is written @fvExp@
\end{itemize}

************************************************************************
*                                                                      *
* analysing polymorphic bindings (HsBindGroup, HsBind)
*                                                                      *
************************************************************************

\subsubsection[dep-HsBinds]{Polymorphic bindings}

Non-recursive expressions are reconstructed without any changes at top
level, although their component expressions may have to be altered.
However, non-recursive expressions are currently not expected as
\Haskell{} programs, and this code should not be executed.

Monomorphic bindings contain information that is returned in a tuple
(a @FlatMonoBinds@) containing:

\begin{enumerate}
\item
a unique @Int@ that serves as the ``vertex tag'' for this binding.

\item
the name of a function or the names in a pattern. These are a set
referred to as @dvLhs@, the defined variables of the left hand side.

\item
the free variables of the body. These are referred to as @fvBody@.

\item
the definition's actual code. This is referred to as just @code@.
\end{enumerate}

The function @nonRecDvFv@ returns two sets of variables. The first is
the set of variables defined in the set of monomorphic bindings, while the
second is the set of free variables in those bindings.

The set of variables defined in a non-recursive binding is just the
union of all of them, as @union@ removes duplicates. However, the
free variables in each successive set of cumulative bindings is the
union of those in the previous set plus those of the newest binding after
the defined variables of the previous set have been removed.

@rnMethodBinds@ deals only with the declarations in class and
instance declarations.  It expects only to see @FunMonoBind@s, and
it expects the global environment to contain bindings for the binders
(which are all class operations).

************************************************************************
*                                                                      *
\subsubsection{ Top-level bindings}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- for top-level bindings, we need to make top-level names,</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- so we have a different entry point than for local bindings</span><span>
</span><span id="line-194"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsLHS"><span class="hs-identifier hs-type">rnTopBindsLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-195"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-196"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span id="rnTopBindsLHS"><span class="annot"><span class="annottext">rnTopBindsLHS :: MiniFixityEnv -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnTopBindsLHS"><span class="hs-identifier hs-var hs-var">rnTopBindsLHS</span></a></span></span><span> </span><span id="local-6989586621683059287"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059287"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span id="local-6989586621683059288"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059288"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnValBindsLHS"><span class="hs-identifier hs-var">rnValBindsLHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#topRecNameMaker"><span class="hs-identifier hs-var">topRecNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059287"><span class="hs-identifier hs-var">fix_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059288"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- Ensure that a hs-boot file has no top-level bindings.</span><span>
</span><span id="line-201"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsLHSBoot"><span class="hs-identifier hs-type">rnTopBindsLHSBoot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-202"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-203"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span id="rnTopBindsLHSBoot"><span class="annot"><span class="annottext">rnTopBindsLHSBoot :: MiniFixityEnv -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnTopBindsLHSBoot"><span class="hs-identifier hs-var hs-var">rnTopBindsLHSBoot</span></a></span></span><span> </span><span id="local-6989586621683059291"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059291"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span id="local-6989586621683059292"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059292"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059293"><span class="annot"><a href="#local-6989586621683059293"><span class="hs-identifier hs-var">topBinds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnTopBindsLHS"><span class="hs-identifier hs-var">rnTopBindsLHS</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059291"><span class="hs-identifier hs-var">fix_env</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059292"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683059293"><span class="hs-identifier hs-type">topBinds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-207"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span id="local-6989586621683059295"><span class="annot"><span class="annottext">XValBinds GhcRn GhcPs
</span><a href="#local-6989586621683059295"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059296"><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059296"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span> </span><span id="local-6989586621683059297"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059297"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-208"></span><span>              </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">HsBootOrSig
-&gt; (NonEmpty (LocatedA (HsBindLR GhcRn GhcPs)) -&gt; BadBootDecls)
-&gt; [LocatedA (HsBindLR GhcRn GhcPs)]
-&gt; TcM ()
forall decl.
HsBootOrSig
-&gt; (NonEmpty (LocatedA decl) -&gt; BadBootDecls)
-&gt; [LocatedA decl]
-&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#rejectBootDecls"><span class="hs-identifier hs-var">rejectBootDecls</span></a></span><span> </span><span class="annot"><span class="annottext">HsBootOrSig
</span><a href="GHC.Types.SourceFile.html#HsBoot"><span class="hs-identifier hs-var">HsBoot</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LHsBindLR GhcRn GhcPs) -&gt; BadBootDecls
NonEmpty (LocatedA (HsBindLR GhcRn GhcPs)) -&gt; BadBootDecls
</span><a href="GHC.Tc.Errors.Types.html#BootBindsPs"><span class="hs-identifier hs-var">BootBindsPs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
[LocatedA (HsBindLR GhcRn GhcPs)]
</span><a href="#local-6989586621683059296"><span class="hs-identifier hs-var">mbinds</span></a></span><span>
</span><span id="line-209"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XValBinds GhcRn GhcPs
-&gt; LHsBindsLR GhcRn GhcPs
-&gt; [XRec GhcPs (Sig GhcPs)]
-&gt; HsValBindsLR GhcRn GhcPs
forall idL idR.
XValBinds idL idR
-&gt; LHsBindsLR idL idR -&gt; [LSig idR] -&gt; HsValBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-var">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcRn GhcPs
</span><a href="#local-6989586621683059295"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059297"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-210"></span><span>            </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RnM (HsValBindsLR GhcRn GhcPs)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnTopBindsLHSBoot&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059293"><span class="hs-identifier hs-var">topBinds</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span id="local-6989586621683058519"><span class="annot"><a href="GHC.Rename.Bind.html#rejectBootDecls"><span class="hs-identifier hs-type">rejectBootDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SourceFile.html#HsBootOrSig"><span class="hs-identifier hs-type">HsBootOrSig</span></a></span><span>
</span><span id="line-213"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058519"><span class="hs-identifier hs-type">decl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#BadBootDecls"><span class="hs-identifier hs-type">BadBootDecls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058519"><span class="hs-identifier hs-type">decl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-216"></span><span id="rejectBootDecls"><span class="annot"><span class="annottext">rejectBootDecls :: forall decl.
HsBootOrSig
-&gt; (NonEmpty (LocatedA decl) -&gt; BadBootDecls)
-&gt; [LocatedA decl]
-&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#rejectBootDecls"><span class="hs-identifier hs-var hs-var">rejectBootDecls</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsBootOrSig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedA decl) -&gt; BadBootDecls
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcM ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span class="annot"><a href="GHC.Rename.Bind.html#rejectBootDecls"><span class="hs-identifier hs-var">rejectBootDecls</span></a></span><span> </span><span id="local-6989586621683059304"><span class="annot"><span class="annottext">HsBootOrSig
</span><a href="#local-6989586621683059304"><span class="hs-identifier hs-var">hsc_src</span></a></span></span><span> </span><span id="local-6989586621683059305"><span class="annot"><span class="annottext">NonEmpty (LocatedA decl) -&gt; BadBootDecls
</span><a href="#local-6989586621683059305"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059306"><span class="annot"><span class="annottext">decl :: LocatedA decl
</span><a href="#local-6989586621683059306"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059308"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059308"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">decl
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621683059309"><span class="annot"><span class="annottext">[LocatedA decl]
</span><a href="#local-6989586621683059309"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059308"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>  </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM ()) -&gt; TcRnMessage -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsBootOrSig -&gt; BadBootDecls -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalHsBootOrSigDecl"><span class="hs-identifier hs-var">TcRnIllegalHsBootOrSigDecl</span></a></span><span> </span><span class="annot"><span class="annottext">HsBootOrSig
</span><a href="#local-6989586621683059304"><span class="hs-identifier hs-var">hsc_src</span></a></span><span>
</span><span id="line-220"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (LocatedA decl) -&gt; BadBootDecls
</span><a href="#local-6989586621683059305"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (LocatedA decl) -&gt; BadBootDecls)
-&gt; NonEmpty (LocatedA decl) -&gt; BadBootDecls
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LocatedA decl
</span><a href="#local-6989586621683059306"><span class="hs-identifier hs-var">decl</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA decl -&gt; [LocatedA decl] -&gt; NonEmpty (LocatedA decl)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA decl]
</span><a href="#local-6989586621683059309"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsBoot"><span class="hs-identifier hs-type">rnTopBindsBoot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-223"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#DefUses"><span class="hs-identifier hs-type">DefUses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- A hs-boot file has no bindings.</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- Return a single HsBindGroup with empty binds and renamed signatures</span><span>
</span><span id="line-226"></span><span id="rnTopBindsBoot"><span class="annot"><span class="annottext">rnTopBindsBoot :: NameSet
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnTopBindsBoot"><span class="hs-identifier hs-var hs-var">rnTopBindsBoot</span></a></span></span><span> </span><span id="local-6989586621683059314"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059314"><span class="hs-identifier hs-var">bound_names</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcRn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059315"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059315"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059316"><span class="annot"><a href="#local-6989586621683059316"><span class="hs-identifier hs-var">sigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059317"><span class="annot"><a href="#local-6989586621683059317"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; [XRec GhcPs (Sig GhcPs)] -&gt; RnM ([LSig GhcRn], NameSet)
</span><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-var">renameSigs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#HsBootCtxt"><span class="hs-identifier hs-var">HsBootCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059314"><span class="hs-identifier hs-var">bound_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059315"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-228"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621683059316"><span class="hs-identifier hs-type">sigs'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#usesOnly"><span class="hs-identifier hs-type">usesOnly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059317"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-229"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnTopBindsBoot"><span class="hs-identifier hs-var">rnTopBindsBoot</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059322"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059322"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RnM (HsValBinds GhcRn, DefUses)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnTopBindsBoot&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059322"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">{-
*********************************************************
*                                                      *
                HsLocalBinds
*                                                      *
*********************************************************
-}</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span id="local-6989586621683058548"><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-type">rnLocalBindsAndThen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-240"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058548"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058548"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-242"></span><span class="hs-comment">-- This version (a) assumes that the binding vars are *not* already in scope</span><span>
</span><span id="line-243"></span><span class="hs-comment">--               (b) removes the binders from the free vars of the thing inside</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- The parser doesn't produce ThenBinds</span><span>
</span><span id="line-245"></span><span id="rnLocalBindsAndThen"><span class="annot"><span class="annottext">rnLocalBindsAndThen :: forall result.
HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
</span><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var hs-var">rnLocalBindsAndThen</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span id="local-6989586621683059328"><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs
</span><a href="#local-6989586621683059328"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059329"><span class="annot"><span class="annottext">HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059329"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-246"></span><span>  </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059329"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcRn GhcRn -&gt; HsLocalBinds GhcRn
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs
XEmptyLocalBinds GhcRn GhcRn
</span><a href="#local-6989586621683059328"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621683059332"><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
</span><a href="#local-6989586621683059332"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059333"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059333"><span class="hs-identifier hs-var">val_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059334"><span class="annot"><span class="annottext">HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059334"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
-&gt; (HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
forall result.
HsValBinds GhcPs
-&gt; (HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsAndThen"><span class="hs-identifier hs-var">rnLocalValBindsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059333"><span class="hs-identifier hs-var">val_binds</span></a></span><span> </span><span class="annot"><span class="annottext">((HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
 -&gt; RnM (result, NameSet))
-&gt; (HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683059336"><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621683059336"><span class="hs-identifier hs-var">val_binds'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><span class="annottext">HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059334"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsValBinds GhcRn GhcRn -&gt; HsValBinds GhcRn -&gt; HsLocalBinds GhcRn
forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
XHsValBinds GhcRn GhcRn
</span><a href="#local-6989586621683059332"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621683059336"><span class="hs-identifier hs-var">val_binds'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span id="local-6989586621683059338"><span class="annot"><span class="annottext">XHsIPBinds GhcPs GhcPs
</span><a href="#local-6989586621683059338"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059339"><span class="annot"><span class="annottext">HsIPBinds GhcPs
</span><a href="#local-6989586621683059339"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059340"><span class="annot"><span class="annottext">HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059340"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683059341"><span class="annot"><a href="#local-6989586621683059341"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059342"><span class="annot"><a href="#local-6989586621683059342"><span class="hs-identifier hs-var">fv_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsIPBinds GhcPs -&gt; RnM (HsIPBinds GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#rnIPBinds"><span class="hs-identifier hs-var">rnIPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">HsIPBinds GhcPs
</span><a href="#local-6989586621683059339"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683059344"><span class="annot"><a href="#local-6989586621683059344"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059345"><span class="annot"><a href="#local-6989586621683059345"><span class="hs-identifier hs-var">fvs_thing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683059340"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059338"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059341"><span class="hs-identifier hs-type">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059342"><span class="hs-identifier hs-type">fv_binds</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059344"><span class="hs-identifier hs-type">thing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059345"><span class="hs-identifier hs-type">fvs_thing</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059342"><span class="hs-identifier hs-type">fv_binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnIPBinds"><span class="hs-identifier hs-type">rnIPBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span id="rnIPBinds"><span class="annot"><span class="annottext">rnIPBinds :: HsIPBinds GhcPs -&gt; RnM (HsIPBinds GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#rnIPBinds"><span class="hs-identifier hs-var hs-var">rnIPBinds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XIPBinds GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059348"><span class="annot"><span class="annottext">[LIPBind GhcPs]
</span><a href="#local-6989586621683059348"><span class="hs-identifier hs-var">ip_binds</span></a></span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683059349"><span class="annot"><a href="#local-6989586621683059349"><span class="hs-identifier hs-var">ip_binds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059350"><span class="annot"><a href="#local-6989586621683059350"><span class="hs-identifier hs-var">fvs_s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (IPBind GhcPs)
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv)
      (GenLocated SrcSpanAnnA (IPBind GhcRn), NameSet))
-&gt; [GenLocated SrcSpanAnnA (IPBind GhcPs)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (IPBind GhcRn)], [NameSet])
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; m (b, c)) -&gt; [a] -&gt; m ([b], [c])
</span><span class="hs-identifier hs-var">mapAndUnzipM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(IPBind GhcPs -&gt; TcM (IPBind GhcRn, NameSet))
-&gt; GenLocated SrcSpanAnnA (IPBind GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (IPBind GhcRn), NameSet)
forall a b c ann.
(a -&gt; TcM (b, c))
-&gt; GenLocated (EpAnn ann) a -&gt; TcM (GenLocated (EpAnn ann) b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="annot"><span class="annottext">IPBind GhcPs -&gt; TcM (IPBind GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#rnIPBind"><span class="hs-identifier hs-var">rnIPBind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIPBind GhcPs]
[GenLocated SrcSpanAnnA (IPBind GhcPs)]
</span><a href="#local-6989586621683059348"><span class="hs-identifier hs-var">ip_binds</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBinds"><span class="hs-identifier hs-type">IPBinds</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059349"><span class="hs-identifier hs-type">ip_binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-type">plusFVs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059350"><span class="hs-identifier hs-type">fvs_s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnIPBind"><span class="hs-identifier hs-type">rnIPBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span id="rnIPBind"><span class="annot"><span class="annottext">rnIPBind :: IPBind GhcPs -&gt; TcM (IPBind GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#rnIPBind"><span class="hs-identifier hs-var hs-var">rnIPBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><span class="annottext">XCIPBind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059357"><span class="annot"><span class="annottext">XRec GhcPs HsIPName
</span><a href="#local-6989586621683059357"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621683059358"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621683059358"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683059359"><span class="annot"><a href="#local-6989586621683059359"><span class="hs-identifier hs-var">expr'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059360"><span class="annot"><a href="#local-6989586621683059360"><span class="hs-identifier hs-var">fvExpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (LHsExpr GhcRn, NameSet)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621683059358"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#IPBind"><span class="hs-identifier hs-type">IPBind</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059357"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059359"><span class="hs-identifier hs-type">expr'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059360"><span class="hs-identifier hs-type">fvExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                ValBinds
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-comment">-- Renaming local binding groups</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- Does duplicate/shadow check</span><span>
</span><span id="line-277"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier hs-type">rnLocalValBindsLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-278"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-279"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span id="rnLocalValBindsLHS"><span class="annot"><span class="annottext">rnLocalValBindsLHS :: MiniFixityEnv
-&gt; HsValBinds GhcPs -&gt; RnM ([Name], HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier hs-var hs-var">rnLocalValBindsLHS</span></a></span></span><span> </span><span id="local-6989586621683059361"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059361"><span class="hs-identifier hs-var">fix_env</span></a></span></span><span> </span><span id="local-6989586621683059362"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059362"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059363"><span class="annot"><a href="#local-6989586621683059363"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnValBindsLHS"><span class="hs-identifier hs-var">rnValBindsLHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; NameMaker
</span><a href="GHC.Rename.Pat.html#localRecNameMaker"><span class="hs-identifier hs-var">localRecNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059361"><span class="hs-identifier hs-var">fix_env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059362"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>         </span><span class="hs-comment">-- Check for duplicates and shadowing</span><span>
</span><span id="line-284"></span><span>         </span><span class="hs-comment">-- Must do this *after* renaming the patterns</span><span>
</span><span id="line-285"></span><span>         </span><span class="hs-comment">-- See Note [Collect binders only after renaming] in GHC.Hs.Utils</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span>         </span><span class="hs-comment">-- We need to check for dups here because we</span><span>
</span><span id="line-288"></span><span>         </span><span class="hs-comment">-- don't don't bind all of the variables from the ValBinds at once</span><span>
</span><span id="line-289"></span><span>         </span><span class="hs-comment">-- with bindLocatedLocals any more.</span><span>
</span><span id="line-290"></span><span>         </span><span class="hs-comment">--</span><span>
</span><span id="line-291"></span><span>         </span><span class="hs-comment">-- Note that we don't want to do this at the top level, since</span><span>
</span><span id="line-292"></span><span>         </span><span class="hs-comment">-- sorting out duplicates and shadowing there happens elsewhere.</span><span>
</span><span id="line-293"></span><span>         </span><span class="hs-comment">-- The behavior is even different. For example,</span><span>
</span><span id="line-294"></span><span>         </span><span class="hs-comment">--   import A(f)</span><span>
</span><span id="line-295"></span><span>         </span><span class="hs-comment">--   f = ...</span><span>
</span><span id="line-296"></span><span>         </span><span class="hs-comment">-- should not produce a shadowing warning (but it will produce</span><span>
</span><span id="line-297"></span><span>         </span><span class="hs-comment">-- an ambiguity warning if you use f), but</span><span>
</span><span id="line-298"></span><span>         </span><span class="hs-comment">--   import A(f)</span><span>
</span><span id="line-299"></span><span>         </span><span class="hs-comment">--   g = let f = ... in f</span><span>
</span><span id="line-300"></span><span>         </span><span class="hs-comment">-- should.</span><span>
</span><span id="line-301"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059365"><span class="annot"><a href="#local-6989586621683059365"><span class="hs-identifier hs-var hs-var">bound_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn -&gt; HsValBindsLR GhcRn GhcPs -&gt; [IdP GhcRn]
forall (idL :: Pass) idR.
CollectPass (GhcPass idL) =&gt;
CollectFlag (GhcPass idL)
-&gt; HsValBindsLR (GhcPass idL) idR -&gt; [IdP (GhcPass idL)]
</span><a href="GHC.Hs.Utils.html#collectHsValBinders"><span class="hs-identifier hs-var">collectHsValBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059363"><span class="hs-identifier hs-var">binds'</span></a></span><span>
</span><span id="line-302"></span><span>             </span><span class="hs-comment">-- There should be only Ids, but if there are any bogus</span><span>
</span><span id="line-303"></span><span>             </span><span class="hs-comment">-- pattern synonyms, we'll collect them anyway, so that</span><span>
</span><span id="line-304"></span><span>             </span><span class="hs-comment">-- we don't generate subsequent out-of-scope messages</span><span>
</span><span id="line-305"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059368"><span class="annot"><a href="#local-6989586621683059368"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-type">getRdrEnvs</span></a></span><span>
</span><span id="line-306"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupAndShadowedNames"><span class="hs-identifier hs-type">checkDupAndShadowedNames</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059368"><span class="hs-identifier hs-type">envs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059365"><span class="hs-identifier hs-type">bound_names</span></a></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059365"><span class="hs-identifier hs-type">bound_names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059363"><span class="hs-identifier hs-type">binds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="hs-comment">-- renames the left-hand sides</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- generic version used both at the top level and for local binds</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- does some error checking, but not what gets done elsewhere at the top level</span><span>
</span><span id="line-313"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnValBindsLHS"><span class="hs-identifier hs-type">rnValBindsLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-314"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-315"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span id="rnValBindsLHS"><span class="annot"><span class="annottext">rnValBindsLHS :: NameMaker -&gt; HsValBinds GhcPs -&gt; RnM (HsValBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnValBindsLHS"><span class="hs-identifier hs-var hs-var">rnValBindsLHS</span></a></span></span><span> </span><span id="local-6989586621683059370"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059370"><span class="hs-identifier hs-var">topP</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span id="local-6989586621683059371"><span class="annot"><span class="annottext">XValBinds GhcPs GhcPs
</span><a href="#local-6989586621683059371"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059372"><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><a href="#local-6989586621683059372"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span> </span><span id="local-6989586621683059373"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059373"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059374"><span class="annot"><a href="#local-6989586621683059374"><span class="hs-identifier hs-var">mbinds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsBind GhcPs)
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LocatedA (HsBindLR GhcRn GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (HsBind GhcPs)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LocatedA (HsBindLR GhcRn GhcPs)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HsBind GhcPs -&gt; TcM (HsBindLR GhcRn GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsBind GhcPs)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LocatedA (HsBindLR GhcRn GhcPs))
forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; TcRn (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMaker -&gt; SDoc -&gt; HsBind GhcPs -&gt; TcM (HsBindLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-var">rnBindLHS</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059370"><span class="hs-identifier hs-var">topP</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621683059378"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
[GenLocated SrcSpanAnnA (HsBind GhcPs)]
</span><a href="#local-6989586621683059372"><span class="hs-identifier hs-var">mbinds</span></a></span><span>
</span><span id="line-318"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059371"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059374"><span class="hs-identifier hs-type">mbinds'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059373"><span class="hs-identifier hs-type">sigs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-320"></span><span>    </span><span id="local-6989586621683059379"><span class="annot"><span class="annottext">bndrs :: [IdP GhcPs]
</span><a href="#local-6989586621683059379"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcPs -&gt; LHsBindsLR GhcPs GhcPs -&gt; [IdP GhcPs]
forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcPs
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><a href="#local-6989586621683059372"><span class="hs-identifier hs-var">mbinds</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span id="local-6989586621683059378"><span class="annot"><span class="annottext">doc :: SDoc
</span><a href="#local-6989586621683059378"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the binding group for:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; SDoc) -&gt; [RdrName] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[IdP GhcPs]
[RdrName]
</span><a href="#local-6989586621683059379"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnValBindsLHS"><span class="hs-identifier hs-var">rnValBindsLHS</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059384"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059384"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RnM (HsValBindsLR GhcRn GhcPs)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnValBindsLHSFromDoc&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsValBinds GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059384"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-comment">-- General version used both from the top-level and for local things</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- Assumes the LHS vars are in scope</span><span>
</span><span id="line-327"></span><span class="hs-comment">--</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- Does not bind the local fixity declarations</span><span>
</span><span id="line-329"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier hs-type">rnValBindsRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier hs-type">HsSigCtxt</span></a></span><span>
</span><span id="line-330"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-331"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#DefUses"><span class="hs-identifier hs-type">DefUses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span id="rnValBindsRHS"><span class="annot"><span class="annottext">rnValBindsRHS :: HsSigCtxt
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier hs-var hs-var">rnValBindsRHS</span></a></span></span><span> </span><span id="local-6989586621683059385"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059385"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcRn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059386"><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059386"><span class="hs-identifier hs-var">mbinds</span></a></span></span><span> </span><span id="local-6989586621683059387"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059387"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059388"><span class="annot"><a href="#local-6989586621683059388"><span class="hs-identifier hs-var">sigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059389"><span class="annot"><a href="#local-6989586621683059389"><span class="hs-identifier hs-var">sig_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; [XRec GhcPs (Sig GhcPs)] -&gt; RnM ([LSig GhcRn], NameSet)
</span><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-var">renameSigs</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059385"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059387"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span>       </span><span class="hs-comment">-- Update the TcGblEnv with renamed COMPLETE pragmas from the current</span><span>
</span><span id="line-337"></span><span>       </span><span class="hs-comment">-- module, for pattern irrefutability checking in do notation.</span><span>
</span><span id="line-338"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059390"><span class="annot"><a href="#local-6989586621683059390"><span class="hs-identifier hs-var hs-var">localCompletePrags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn] -&gt; CompleteMatches
</span><a href="GHC.Rename.Bind.html#localCompletePragmas"><span class="hs-identifier hs-var">localCompletePragmas</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621683059388"><span class="hs-identifier hs-var">sigs'</span></a></span><span>
</span><span id="line-339"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#updGblEnv"><span class="hs-identifier hs-type">updGblEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683059392"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621683059392"><span class="hs-identifier hs-var">gblEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621683059392"><span class="hs-identifier hs-var">gblEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#tcg_complete_matches"><span class="hs-identifier hs-var">tcg_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#tcg_complete_matches"><span class="hs-identifier hs-var">tcg_complete_matches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059392"><span class="hs-identifier hs-type">gblEnv</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621683059390"><span class="hs-identifier hs-type">localCompletePrags</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059394"><span class="annot"><a href="#local-6989586621683059394"><span class="hs-identifier hs-var">binds_w_dus</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#rnLBind"><span class="hs-identifier hs-type">rnLBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#mkScopedTvFn"><span class="hs-identifier hs-type">mkScopedTvFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059388"><span class="hs-identifier hs-type">sigs'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059386"><span class="hs-identifier hs-type">mbinds</span></a></span><span>
</span><span id="line-341"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span id="local-6989586621683059397"><span class="annot"><a href="#local-6989586621683059397"><span class="hs-identifier hs-var">anal_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059398"><span class="annot"><a href="#local-6989586621683059398"><span class="hs-identifier hs-var">anal_dus</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#depAnalBinds"><span class="hs-identifier hs-type">depAnalBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059394"><span class="hs-identifier hs-type">binds_w_dus</span></a></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059400"><span class="annot"><a href="#local-6989586621683059400"><span class="hs-identifier hs-var hs-var">patsyn_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatSynBind GhcRn GhcRn -&gt; NameSet -&gt; NameSet)
-&gt; NameSet -&gt; [PatSynBind GhcRn GhcRn] -&gt; NameSet
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-identifier hs-var">unionNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">(NameSet -&gt; NameSet -&gt; NameSet)
-&gt; (PatSynBind GhcRn GhcRn -&gt; NameSet)
-&gt; PatSynBind GhcRn GhcRn
-&gt; NameSet
-&gt; NameSet
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn -&gt; XPSB GhcRn GhcRn
PatSynBind GhcRn GhcRn -&gt; NameSet
forall idL idR. PatSynBind idL idR -&gt; XPSB idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_ext"><span class="hs-identifier hs-var">psb_ext</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">([PatSynBind GhcRn GhcRn] -&gt; NameSet)
-&gt; [PatSynBind GhcRn GhcRn] -&gt; NameSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-344"></span><span>                          </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcRn)] -&gt; [PatSynBind GhcRn GhcRn]
forall id.
UnXRec id =&gt;
[(RecFlag, LHsBinds id)] -&gt; [PatSynBind id id]
</span><a href="GHC.Hs.Utils.html#getPatSynBinds"><span class="hs-identifier hs-var">getPatSynBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[(RecFlag, LHsBinds GhcRn)]
</span><a href="#local-6989586621683059397"><span class="hs-identifier hs-var">anal_binds</span></a></span><span>
</span><span id="line-345"></span><span>                </span><span class="hs-comment">-- The uses in binds_w_dus for PatSynBinds do not include</span><span>
</span><span id="line-346"></span><span>                </span><span class="hs-comment">-- variables used in the patsyn builders; see</span><span>
</span><span id="line-347"></span><span>                </span><span class="hs-comment">-- Note [Pattern synonym builders don't yield dependencies]</span><span>
</span><span id="line-348"></span><span>                </span><span class="hs-comment">-- But psb_fvs /does/ include those builder fvs.  So we</span><span>
</span><span id="line-349"></span><span>                </span><span class="hs-comment">-- add them back in here to avoid bogus warnings about</span><span>
</span><span id="line-350"></span><span>                </span><span class="hs-comment">-- unused variables (#12548)</span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span>             </span><span id="local-6989586621683059406"><span class="annot"><a href="#local-6989586621683059406"><span class="hs-identifier hs-var hs-var">valbind'_dus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621683059398"><span class="hs-identifier hs-var">anal_dus</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; DefUses -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#plusDU"><span class="hs-operator hs-var">`plusDU`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#usesOnly"><span class="hs-identifier hs-var">usesOnly</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059389"><span class="hs-identifier hs-var">sig_fvs</span></a></span><span>
</span><span id="line-353"></span><span>                                     </span><span class="annot"><span class="annottext">DefUses -&gt; DefUses -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#plusDU"><span class="hs-operator hs-var">`plusDU`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; DefUses
</span><a href="GHC.Types.Name.Set.html#usesOnly"><span class="hs-identifier hs-var">usesOnly</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059400"><span class="hs-identifier hs-var">patsyn_fvs</span></a></span><span>
</span><span id="line-354"></span><span>                            </span><span class="hs-comment">-- Put the sig uses *after* the bindings</span><span>
</span><span id="line-355"></span><span>                            </span><span class="hs-comment">-- so that the binders are removed from</span><span>
</span><span id="line-356"></span><span>                            </span><span class="hs-comment">-- the uses in the sigs</span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XValBindsLR"><span class="hs-identifier hs-type">XValBindsLR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Binds.html#NValBinds"><span class="hs-identifier hs-type">NValBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059397"><span class="hs-identifier hs-type">anal_binds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059388"><span class="hs-identifier hs-type">sigs'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059406"><span class="hs-identifier hs-type">valbind'_dus</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier hs-var">rnValBindsRHS</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059408"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059408"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RnM (HsValBinds GhcRn, DefUses)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnValBindsRHS&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059408"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- Wrapper for local binds</span><span>
</span><span id="line-363"></span><span class="hs-comment">--</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- The *client* of this function is responsible for checking for unused binders;</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- it doesn't (and can't: we don't have the thing inside the binds) happen here</span><span>
</span><span id="line-366"></span><span class="hs-comment">--</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- The client is also responsible for bringing the fixities into scope</span><span>
</span><span id="line-368"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier hs-type">rnLocalValBindsRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>  </span><span class="hs-comment">-- names bound by the LHSes</span><span>
</span><span id="line-369"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBindsLR"><span class="hs-identifier hs-type">HsValBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-370"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#DefUses"><span class="hs-identifier hs-type">DefUses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span id="rnLocalValBindsRHS"><span class="annot"><span class="annottext">rnLocalValBindsRHS :: NameSet
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier hs-var hs-var">rnLocalValBindsRHS</span></a></span></span><span> </span><span id="local-6989586621683059409"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059409"><span class="hs-identifier hs-var">bound_names</span></a></span></span><span> </span><span id="local-6989586621683059410"><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059410"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; HsValBindsLR GhcRn GhcPs -&gt; RnM (HsValBinds GhcRn, DefUses)
</span><a href="GHC.Rename.Bind.html#rnValBindsRHS"><span class="hs-identifier hs-var">rnValBindsRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#LocalBindCtxt"><span class="hs-identifier hs-var">LocalBindCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059409"><span class="hs-identifier hs-var">bound_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059410"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="hs-comment">-- for local binds</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- wrapper that does both the left- and right-hand sides</span><span>
</span><span id="line-376"></span><span class="hs-comment">--</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- here there are no local fixity decls passed in;</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- the local fixity decls come from the ValBinds sigs</span><span>
</span><span id="line-379"></span><span id="local-6989586621683058555"><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsAndThen"><span class="hs-identifier hs-type">rnLocalValBindsAndThen</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058555"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058555"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-383"></span><span id="rnLocalValBindsAndThen"><span class="annot"><span class="annottext">rnLocalValBindsAndThen :: forall result.
HsValBinds GhcPs
-&gt; (HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
</span><a href="GHC.Rename.Bind.html#rnLocalValBindsAndThen"><span class="hs-identifier hs-var hs-var">rnLocalValBindsAndThen</span></a></span></span><span> </span><span id="local-6989586621683059426"><span class="annot"><span class="annottext">binds :: HsValBinds GhcPs
</span><a href="#local-6989586621683059426"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XValBinds GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059427"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059427"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059428"><span class="annot"><span class="annottext">HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><a href="#local-6989586621683059428"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-384"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>   </span><span class="hs-special">{</span><span>     </span><span class="hs-comment">-- (A) Create the local fixity environment</span><span>
</span><span id="line-385"></span><span>          </span><span id="local-6989586621683059429"><span class="annot"><a href="#local-6989586621683059429"><span class="hs-identifier hs-var">new_fixities</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LFixitySig GhcPs] -&gt; RnM MiniFixityEnv
</span><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier hs-var">makeMiniFixityEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; FixitySig GhcPs -&gt; GenLocated SrcSpanAnnA (FixitySig GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059430"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621683059431"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-386"></span><span>                                            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059430"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059430"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059431"><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621683059431"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
[GenLocated SrcSpanAnnA (Sig GhcPs)]
</span><a href="#local-6989586621683059427"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span>              </span><span class="hs-comment">-- (B) Rename the LHSes</span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059433"><span class="annot"><a href="#local-6989586621683059433"><span class="hs-identifier hs-var">bound_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059434"><span class="annot"><a href="#local-6989586621683059434"><span class="hs-identifier hs-var">new_lhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsLHS"><span class="hs-identifier hs-type">rnLocalValBindsLHS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059429"><span class="hs-identifier hs-type">new_fixities</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059426"><span class="hs-identifier hs-type">binds</span></a></span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span>              </span><span class="hs-comment">--     ...and bring them (and their fixities) into scope</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059433"><span class="hs-identifier hs-type">bound_names</span></a></span><span>              </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-393"></span><span>          </span><span class="annot"><a href="GHC.Rename.Fixity.html#addLocalFixities"><span class="hs-identifier hs-type">addLocalFixities</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059429"><span class="hs-identifier hs-type">new_fixities</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059433"><span class="hs-identifier hs-type">bound_names</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span>        </span><span class="hs-special">{</span><span>      </span><span class="hs-comment">-- (C) Do the RHS and thing inside</span><span>
</span><span id="line-396"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621683059436"><span class="annot"><a href="#local-6989586621683059436"><span class="hs-identifier hs-var">binds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059437"><span class="annot"><a href="#local-6989586621683059437"><span class="hs-identifier hs-var">dus</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsRHS"><span class="hs-identifier hs-type">rnLocalValBindsRHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-type">mkNameSet</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059433"><span class="hs-identifier hs-type">bound_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059434"><span class="hs-identifier hs-type">new_lhs</span></a></span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059439"><span class="annot"><a href="#local-6989586621683059439"><span class="hs-identifier hs-var">result</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059440"><span class="annot"><a href="#local-6989586621683059440"><span class="hs-identifier hs-var">result_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683059428"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059436"><span class="hs-identifier hs-type">binds'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Set.html#allUses"><span class="hs-identifier hs-type">allUses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059437"><span class="hs-identifier hs-type">dus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>                </span><span class="hs-comment">-- Report unused bindings based on the (accurate)</span><span>
</span><span id="line-400"></span><span>                </span><span class="hs-comment">-- findUses.  E.g.</span><span>
</span><span id="line-401"></span><span>                </span><span class="hs-comment">--      let x = x in 3</span><span>
</span><span id="line-402"></span><span>                </span><span class="hs-comment">-- should report 'x' unused</span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059442"><span class="annot"><a href="#local-6989586621683059442"><span class="hs-identifier hs-var hs-var">real_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#findUses"><span class="hs-identifier hs-var">findUses</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621683059437"><span class="hs-identifier hs-var">dus</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059440"><span class="hs-identifier hs-var">result_fvs</span></a></span><span>
</span><span id="line-404"></span><span>              </span><span class="hs-comment">-- Insert fake uses for variables introduced implicitly by</span><span>
</span><span id="line-405"></span><span>              </span><span class="hs-comment">-- wildcards (#4404)</span><span>
</span><span id="line-406"></span><span>              </span><span id="local-6989586621683059444"><span class="annot"><a href="#local-6989586621683059444"><span class="hs-identifier hs-var hs-var">rec_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn -&gt; [(SrcSpan, [ImplicitFieldBinders])]
forall (idR :: Pass).
HsValBindsLR GhcRn (GhcPass idR)
-&gt; [(SrcSpan, [ImplicitFieldBinders])]
</span><a href="GHC.Hs.Utils.html#hsValBindsImplicits"><span class="hs-identifier hs-var">hsValBindsImplicits</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn
</span><a href="#local-6989586621683059436"><span class="hs-identifier hs-var">binds'</span></a></span><span>
</span><span id="line-407"></span><span>              </span><span id="local-6989586621683059446"><span class="annot"><a href="#local-6989586621683059446"><span class="hs-identifier hs-var hs-var">implicit_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">([Name] -&gt; NameSet) -&gt; [Name] -&gt; NameSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((SrcSpan, [ImplicitFieldBinders]) -&gt; [Name])
-&gt; [(SrcSpan, [ImplicitFieldBinders])] -&gt; [Name]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ImplicitFieldBinders -&gt; [Name])
-&gt; [ImplicitFieldBinders] -&gt; [Name]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">ImplicitFieldBinders -&gt; [Name]
</span><a href="GHC.Hs.Utils.html#implFlBndr_binders"><span class="hs-identifier hs-var">implFlBndr_binders</span></a></span><span> </span><span class="annot"><span class="annottext">([ImplicitFieldBinders] -&gt; [Name])
-&gt; ((SrcSpan, [ImplicitFieldBinders]) -&gt; [ImplicitFieldBinders])
-&gt; (SrcSpan, [ImplicitFieldBinders])
-&gt; [Name]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(SrcSpan, [ImplicitFieldBinders]) -&gt; [ImplicitFieldBinders]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>                                        </span><span class="annot"><span class="annottext">([(SrcSpan, [ImplicitFieldBinders])] -&gt; [Name])
-&gt; [(SrcSpan, [ImplicitFieldBinders])] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(SrcSpan, [ImplicitFieldBinders])]
</span><a href="#local-6989586621683059444"><span class="hs-identifier hs-var">rec_uses</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621683059451"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059451"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059452"><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683059452"><span class="hs-identifier hs-var">ns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-410"></span><span>                    </span><span class="annot"><span class="annottext">SrcSpan -&gt; NameSet -&gt; Maybe [ImplicitFieldBinders] -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkUnusedRecordWildcard"><span class="hs-identifier hs-var">checkUnusedRecordWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059451"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059442"><span class="hs-identifier hs-var">real_uses</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ImplicitFieldBinders] -&gt; Maybe [ImplicitFieldBinders]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[ImplicitFieldBinders]
</span><a href="#local-6989586621683059452"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>                </span><span class="annot"><a href="#local-6989586621683059444"><span class="hs-identifier hs-type">rec_uses</span></a></span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#warnUnusedLocalBinds"><span class="hs-identifier hs-type">warnUnusedLocalBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059433"><span class="hs-identifier hs-type">bound_names</span></a></span><span>
</span><span id="line-413"></span><span>                                      </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059442"><span class="hs-identifier hs-type">real_uses</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#unionNameSet"><span class="hs-operator hs-type">`unionNameSet`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059446"><span class="hs-identifier hs-type">implicit_uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-416"></span><span>            </span><span class="hs-comment">-- The variables &quot;used&quot; in the val binds are:</span><span>
</span><span id="line-417"></span><span>            </span><span class="hs-comment">--   (1) the uses of the binds (allUses)</span><span>
</span><span id="line-418"></span><span>            </span><span class="hs-comment">--   (2) the FVs of the thing-inside</span><span>
</span><span id="line-419"></span><span>            </span><span id="local-6989586621683059453"><span class="annot"><a href="#local-6989586621683059453"><span class="hs-identifier hs-var hs-var">all_uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DefUses -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#allUses"><span class="hs-identifier hs-var">allUses</span></a></span><span> </span><span class="annot"><span class="annottext">DefUses
</span><a href="#local-6989586621683059437"><span class="hs-identifier hs-var">dus</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059440"><span class="hs-identifier hs-var">result_fvs</span></a></span><span>
</span><span id="line-420"></span><span>                </span><span class="hs-comment">-- Note [Unused binding hack]</span><span>
</span><span id="line-421"></span><span>                </span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-422"></span><span>                </span><span class="hs-comment">-- Note that *in contrast* to the above reporting of</span><span>
</span><span id="line-423"></span><span>                </span><span class="hs-comment">-- unused bindings, (1) above uses duUses to return *all*</span><span>
</span><span id="line-424"></span><span>                </span><span class="hs-comment">-- the uses, even if the binding is unused.  Otherwise consider:</span><span>
</span><span id="line-425"></span><span>                </span><span class="hs-comment">--      x = 3</span><span>
</span><span id="line-426"></span><span>                </span><span class="hs-comment">--      y = let p = x in 'x'    -- NB: p not used</span><span>
</span><span id="line-427"></span><span>                </span><span class="hs-comment">-- If we don't &quot;see&quot; the dependency of 'y' on 'x', we may put the</span><span>
</span><span id="line-428"></span><span>                </span><span class="hs-comment">-- bindings in the wrong order, and the type checker will complain</span><span>
</span><span id="line-429"></span><span>                </span><span class="hs-comment">-- that x isn't in scope</span><span>
</span><span id="line-430"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-431"></span><span>                </span><span class="hs-comment">-- But note that this means we won't report 'x' as unused,</span><span>
</span><span id="line-432"></span><span>                </span><span class="hs-comment">-- whereas we would if we had { x = 3; p = x; y = 'x' }</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059439"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059453"><span class="hs-identifier hs-type">all_uses</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-435"></span><span>                </span><span class="hs-comment">-- The bound names are pruned out of all_uses</span><span>
</span><span id="line-436"></span><span>                </span><span class="hs-comment">-- by the bindLocalNamesFV call above</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLocalValBindsAndThen"><span class="hs-identifier hs-var">rnLocalValBindsAndThen</span></a></span><span> </span><span id="local-6989586621683059454"><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059454"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RnM (result, NameSet)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnLocalValBindsAndThen&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsValBinds GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsValBinds GhcPs
</span><a href="#local-6989586621683059454"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="hs-comment">---------------------</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- renaming a single bind</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-type">rnBindLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Pat.html#NameMaker"><span class="hs-identifier hs-type">NameMaker</span></a></span><span>
</span><span id="line-446"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-447"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-448"></span><span>          </span><span class="hs-comment">-- returns the renamed left-hand side,</span><span>
</span><span id="line-449"></span><span>          </span><span class="hs-comment">-- and the FreeVars *of the LHS*</span><span>
</span><span id="line-450"></span><span>          </span><span class="hs-comment">-- (i.e., any free variables of the pattern)</span><span>
</span><span id="line-451"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBindLR"><span class="hs-identifier hs-type">HsBindLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span id="rnBindLHS"><span class="annot"><span class="annottext">rnBindLHS :: NameMaker -&gt; SDoc -&gt; HsBind GhcPs -&gt; TcM (HsBindLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-var hs-var">rnBindLHS</span></a></span></span><span> </span><span id="local-6989586621683059455"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059455"><span class="hs-identifier hs-var">name_maker</span></a></span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059456"><span class="annot"><span class="annottext">bind :: HsBind GhcPs
</span><a href="#local-6989586621683059456"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: forall idL idR. HsBindLR idL idR -&gt; LPat idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059459"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621683059459"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_mult :: forall idL idR. HsBindLR idL idR -&gt; HsMultAnn idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_mult"><span class="hs-identifier hs-var">pat_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059461"><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621683059461"><span class="hs-identifier hs-var">pat_mult</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>      </span><span class="hs-comment">-- we don't actually use the FV processing of rnPatsAndThen here</span><span>
</span><span id="line-456"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621683059462"><span class="annot"><a href="#local-6989586621683059462"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059463"><span class="annot"><a href="#local-6989586621683059463"><span class="hs-identifier hs-var">pat'_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LPat GhcPs -&gt; RnM (LPat GhcRn, NameSet)
</span><a href="GHC.Rename.Pat.html#rnBindPat"><span class="hs-identifier hs-var">rnBindPat</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059455"><span class="hs-identifier hs-var">name_maker</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621683059459"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-457"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621683059465"><span class="annot"><a href="#local-6989586621683059465"><span class="hs-identifier hs-var">pat_mult'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059466"><span class="annot"><a href="#local-6989586621683059466"><span class="hs-identifier hs-var">mult'_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnHsMultAnn"><span class="hs-identifier hs-type">rnHsMultAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059461"><span class="hs-identifier hs-type">pat_mult</span></a></span><span>
</span><span id="line-458"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059456"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059462"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059463"><span class="hs-identifier hs-type">pat'_fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059466"><span class="hs-identifier hs-type">mult'_fvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_mult"><span class="hs-identifier hs-var">pat_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059465"><span class="hs-identifier hs-type">pat_mult'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>                </span><span class="hs-comment">-- We temporarily store the pat's FVs in bind_fvs;</span><span>
</span><span id="line-460"></span><span>                </span><span class="hs-comment">-- gets updated to the FVs of the whole bind</span><span>
</span><span id="line-461"></span><span>                </span><span class="hs-comment">-- when doing the RHS below</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-var">rnBindLHS</span></a></span><span> </span><span id="local-6989586621683059469"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059469"><span class="hs-identifier hs-var">name_maker</span></a></span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059470"><span class="annot"><span class="annottext">bind :: HsBind GhcPs
</span><a href="#local-6989586621683059470"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059473"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059473"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059474"><span class="annot"><a href="#local-6989586621683059474"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Pat.html#applyNameMaker"><span class="hs-identifier hs-var">applyNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059469"><span class="hs-identifier hs-var">name_maker</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059473"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-465"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059470"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059474"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-466"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-var">rnBindLHS</span></a></span><span> </span><span id="local-6989586621683059477"><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059477"><span class="hs-identifier hs-var">name_maker</span></a></span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span id="local-6989586621683059479"><span class="annot"><span class="annottext">XPatSynBind GhcPs GhcPs
</span><a href="#local-6989586621683059479"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059480"><span class="annot"><span class="annottext">psb :: PatSynBind GhcPs GhcPs
</span><a href="#local-6989586621683059480"><span class="hs-identifier hs-var">psb</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059483"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059483"><span class="hs-identifier hs-var">rdrname</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; Bool
</span><a href="GHC.Rename.Pat.html#isTopRecNameMaker"><span class="hs-identifier hs-var">isTopRecNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059477"><span class="hs-identifier hs-var">name_maker</span></a></span><span>
</span><span id="line-470"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; TcM ()) -&gt; LocatedN RdrName -&gt; TcM ()
forall t a b. HasLoc t =&gt; (a -&gt; TcM b) -&gt; GenLocated t a -&gt; TcM b
</span><a href="GHC.Tc.Utils.Monad.html#addLocM"><span class="hs-identifier hs-var">addLocM</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; TcM ()
</span><a href="GHC.Rename.Names.html#checkConName"><span class="hs-identifier hs-var">checkConName</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059483"><span class="hs-identifier hs-var">rdrname</span></a></span><span>
</span><span id="line-471"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059487"><span class="annot"><a href="#local-6989586621683059487"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-472"></span><span>           </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedTopConstructorRnN"><span class="hs-identifier hs-var">lookupLocatedTopConstructorRnN</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059483"><span class="hs-identifier hs-var">rdrname</span></a></span><span> </span><span class="hs-comment">-- Should be in scope already</span><span>
</span><span id="line-473"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059479"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059480"><span class="hs-identifier hs-type">psb</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_ext"><span class="hs-identifier hs-var">psb_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059487"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-comment">-- Pattern synonym, not at top level</span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683059491"><span class="hs-identifier hs-var">localPatternSynonymErr</span></a></span><span>  </span><span class="hs-comment">-- Complain, but make up a fake</span><span>
</span><span id="line-477"></span><span>                                        </span><span class="hs-comment">-- name so that we can carry on</span><span>
</span><span id="line-478"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059492"><span class="annot"><a href="#local-6989586621683059492"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NameMaker -&gt; LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Pat.html#applyNameMaker"><span class="hs-identifier hs-var">applyNameMaker</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><a href="#local-6989586621683059477"><span class="hs-identifier hs-var">name_maker</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059483"><span class="hs-identifier hs-var">rdrname</span></a></span><span>
</span><span id="line-479"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059479"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059480"><span class="hs-identifier hs-type">psb</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_ext"><span class="hs-identifier hs-var">psb_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059492"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><a href="#local-6989586621683059491"><span class="hs-identifier hs-type">localPatternSynonymErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span id="local-6989586621683059491"><span class="annot"><span class="annottext">localPatternSynonymErr :: TcRnMessage
</span><a href="#local-6989586621683059491"><span class="hs-identifier hs-var hs-var">localPatternSynonymErr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalPatSynDecl"><span class="hs-identifier hs-var">TcRnIllegalPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059483"><span class="hs-identifier hs-var">rdrname</span></a></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBindLHS"><span class="hs-identifier hs-var">rnBindLHS</span></a></span><span> </span><span class="annot"><span class="annottext">NameMaker
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059494"><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621683059494"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcM (HsBindLR GhcRn GhcPs)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnBindHS&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBind GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621683059494"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnLBind"><span class="hs-identifier hs-type">rnLBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- Signature tyvar function</span><span>
</span><span id="line-487"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBindLR"><span class="hs-identifier hs-type">LHsBindLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-488"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#Uses"><span class="hs-identifier hs-type">Uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span id="rnLBind"><span class="annot"><span class="annottext">rnLBind :: (Name -&gt; [Name])
-&gt; LHsBindLR GhcRn GhcPs -&gt; RnM (LHsBind GhcRn, [Name], NameSet)
</span><a href="GHC.Rename.Bind.html#rnLBind"><span class="hs-identifier hs-var hs-var">rnLBind</span></a></span></span><span> </span><span id="local-6989586621683059496"><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059496"><span class="hs-identifier hs-var">sig_fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059497"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059497"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683059498"><span class="annot"><span class="annottext">HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059498"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; RnM (LHsBind GhcRn, [Name], NameSet)
-&gt; RnM (LHsBind GhcRn, [Name], NameSet)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059497"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (LHsBind GhcRn, [Name], NameSet)
 -&gt; RnM (LHsBind GhcRn, [Name], NameSet))
-&gt; RnM (LHsBind GhcRn, [Name], NameSet)
-&gt; RnM (LHsBind GhcRn, [Name], NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059500"><span class="annot"><a href="#local-6989586621683059500"><span class="hs-identifier hs-var">bind'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059501"><span class="annot"><a href="#local-6989586621683059501"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059502"><span class="annot"><a href="#local-6989586621683059502"><span class="hs-identifier hs-var">dus</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [Name])
-&gt; HsBindLR GhcRn GhcPs
-&gt; RnM (HsBindLR GhcRn GhcRn, [Name], NameSet)
</span><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-var">rnBind</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059496"><span class="hs-identifier hs-var">sig_fn</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059498"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-492"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059497"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059500"><span class="hs-identifier hs-type">bind'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059501"><span class="hs-identifier hs-type">bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059502"><span class="hs-identifier hs-type">dus</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span class="hs-comment">-- assumes the left-hands-side vars are in scope</span><span>
</span><span id="line-495"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-type">rnBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- Signature tyvar function</span><span>
</span><span id="line-496"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBindLR"><span class="hs-identifier hs-type">HsBindLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-497"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#Uses"><span class="hs-identifier hs-type">Uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span id="rnBind"><span class="annot"><span class="annottext">rnBind :: (Name -&gt; [Name])
-&gt; HsBindLR GhcRn GhcPs
-&gt; RnM (HsBindLR GhcRn GhcRn, [Name], NameSet)
</span><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-var hs-var">rnBind</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059504"><span class="annot"><span class="annottext">bind :: HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059504"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_lhs :: forall idL idR. HsBindLR idL idR -&gt; LPat idL
</span><a href="Language.Haskell.Syntax.Binds.html#pat_lhs"><span class="hs-identifier hs-var">pat_lhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059505"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059505"><span class="hs-identifier hs-var">pat</span></a></span></span><span>
</span><span id="line-499"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_rhs :: forall idL idR. HsBindLR idL idR -&gt; GRHSs idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059507"><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621683059507"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-500"></span><span>                                   </span><span class="hs-comment">-- pat fvs were stored in bind_fvs</span><span>
</span><span id="line-501"></span><span>                                   </span><span class="hs-comment">-- after processing the LHS</span><span>
</span><span id="line-502"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_ext :: forall idL idR. HsBindLR idL idR -&gt; XPatBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059508"><span class="annot"><span class="annottext">XPatBind GhcRn GhcPs
</span><a href="#local-6989586621683059508"><span class="hs-identifier hs-var">pat_fvs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-503"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059509"><span class="annot"><a href="#local-6989586621683059509"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) Module
forall (m :: * -&gt; *). HasModule m =&gt; m Module
</span><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-var">getModule</span></a></span><span>
</span><span id="line-504"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059511"><span class="annot"><a href="#local-6989586621683059511"><span class="hs-identifier hs-var">grhss'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059512"><span class="annot"><a href="#local-6989586621683059512"><span class="hs-identifier hs-var">rhs_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHSs"><span class="hs-identifier hs-type">rnGRHSs</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatBindRhs"><span class="hs-identifier hs-type">PatBindRhs</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-type">rnLExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059507"><span class="hs-identifier hs-type">grhss</span></a></span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span>                </span><span class="hs-comment">-- No scoped type variables for pattern bindings</span><span>
</span><span id="line-507"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059514"><span class="annot"><a href="#local-6989586621683059514"><span class="hs-identifier hs-var hs-var">all_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XPatBind GhcRn GhcPs
NameSet
</span><a href="#local-6989586621683059508"><span class="hs-identifier hs-var">pat_fvs</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059512"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span>
</span><span id="line-508"></span><span>              </span><span id="local-6989586621683059515"><span class="annot"><a href="#local-6989586621683059515"><span class="hs-identifier hs-var hs-var">fvs'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#filterNameSet"><span class="hs-identifier hs-var">filterNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621683059509"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059514"><span class="hs-identifier hs-var">all_fvs</span></a></span><span>
</span><span id="line-509"></span><span>                </span><span class="hs-comment">-- Keep locally-defined Names</span><span>
</span><span id="line-510"></span><span>                </span><span class="hs-comment">-- As well as dependency analysis, we need these for the</span><span>
</span><span id="line-511"></span><span>                </span><span class="hs-comment">-- MonoLocalBinds test in GHC.Tc.Gen.Bind.decideGeneralisationPlan</span><span>
</span><span id="line-512"></span><span>              </span><span id="local-6989586621683059518"><span class="annot"><a href="#local-6989586621683059518"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn -&gt; LPat GhcRn -&gt; [IdP GhcRn]
forall p. CollectPass p =&gt; CollectFlag p -&gt; LPat p -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectPatBinders"><span class="hs-identifier hs-var">collectPatBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059505"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-513"></span><span>              </span><span id="local-6989586621683059520"><span class="annot"><a href="#local-6989586621683059520"><span class="hs-identifier hs-var hs-var">bind'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059504"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_rhs"><span class="hs-identifier hs-var">pat_rhs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059511"><span class="hs-identifier hs-type">grhss'</span></a></span><span>
</span><span id="line-514"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#pat_ext"><span class="hs-identifier hs-var">pat_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059515"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-515"></span><span>
</span><span id="line-516"></span><span>        </span><span class="hs-comment">-- Warn if the pattern binds no variables</span><span>
</span><span id="line-517"></span><span>        </span><span class="hs-comment">-- See Note [Pattern bindings that bind no variables]</span><span>
</span><span id="line-518"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#whenWOptM"><span class="hs-identifier hs-type">whenWOptM</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#Opt_WarnUnusedPatternBinds"><span class="hs-identifier hs-type">Opt_WarnUnusedPatternBinds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-519"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621683059518"><span class="hs-identifier hs-type">bndrs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#isOkNoBindPattern"><span class="hs-identifier hs-type">isOkNoBindPattern</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059505"><span class="hs-identifier hs-type">pat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-520"></span><span>          </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addTcRnDiagnostic"><span class="hs-identifier hs-type">addTcRnDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUnusedPatternBinds"><span class="hs-identifier hs-type">TcRnUnusedPatternBinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059520"><span class="hs-identifier hs-type">bind'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683059515"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`seq`</span></span><span> </span><span class="hs-comment">-- See Note [Free-variable space leak]</span><span>
</span><span id="line-523"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059520"><span class="hs-identifier hs-type">bind'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059518"><span class="hs-identifier hs-type">bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059514"><span class="hs-identifier hs-type">all_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-var">rnBind</span></a></span><span> </span><span id="local-6989586621683059530"><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059530"><span class="hs-identifier hs-var">sig_fn</span></a></span></span><span> </span><span id="local-6989586621683059531"><span class="annot"><span class="annottext">bind :: HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059531"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059532"><span class="annot"><span class="annottext">XRec GhcRn (IdP GhcRn)
</span><a href="#local-6989586621683059532"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-526"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059534"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621683059534"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>       </span><span class="hs-comment">-- invariant: no free vars here when it's a FunBind</span><span>
</span><span id="line-528"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059535"><span class="annot"><span class="annottext">plain_name :: Name
</span><a href="#local-6989586621683059535"><span class="hs-identifier hs-var hs-var hs-var">plain_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (IdP GhcRn)
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683059532"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-529"></span><span>
</span><span id="line-530"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059537"><span class="annot"><a href="#local-6989586621683059537"><span class="hs-identifier hs-var">matches'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059538"><span class="annot"><a href="#local-6989586621683059538"><span class="hs-identifier hs-var">rhs_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall a. [Name] -&gt; RnM (a, NameSet) -&gt; RnM (a, NameSet)
</span><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-var">bindSigTyVarsFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059530"><span class="hs-identifier hs-var">sig_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059535"><span class="hs-identifier hs-var">plain_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM
   (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
 -&gt; RnM
      (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)),
       NameSet))
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-531"></span><span>                                </span><span class="hs-comment">-- bindSigTyVars tests for LangExt.ScopedTyVars</span><span>
</span><span id="line-532"></span><span>                                 </span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (HsExpr GhcPs)
    -&gt; IOEnv
         (Env TcGblEnv TcLclEnv)
         (GenLocated SrcSpanAnnA (HsExpr GhcRn), NameSet))
-&gt; MatchGroup GhcPs (LocatedA (HsExpr GhcPs))
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
-&gt; AnnFunRhs -&gt; HsMatchContext (GenLocated SrcSpanAnnN Name)
forall fn. fn -&gt; AnnFunRhs -&gt; HsMatchContext fn
</span><a href="GHC.Hs.Utils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (IdP GhcRn)
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683059532"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">AnnFunRhs
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>                                              </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (LHsExpr GhcRn, NameSet)
LocatedA (HsExpr GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsExpr GhcRn), NameSet)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
MatchGroup GhcPs (LocatedA (HsExpr GhcPs))
</span><a href="#local-6989586621683059534"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059541"><span class="annot"><a href="#local-6989586621683059541"><span class="hs-identifier hs-var hs-var">is_infix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcPs -&gt; Bool
forall id1 id2. UnXRec id2 =&gt; HsBindLR id1 id2 -&gt; Bool
</span><a href="GHC.Hs.Utils.html#isInfixFunBind"><span class="hs-identifier hs-var">isInfixFunBind</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcPs
</span><a href="#local-6989586621683059531"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="annot"><a href="#local-6989586621683059541"><span class="hs-identifier hs-type">is_infix</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#checkPrecMatch"><span class="hs-identifier hs-type">checkPrecMatch</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059535"><span class="hs-identifier hs-type">plain_name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059537"><span class="hs-identifier hs-type">matches'</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059544"><span class="annot"><a href="#local-6989586621683059544"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-type">getModule</span></a></span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059545"><span class="annot"><a href="#local-6989586621683059545"><span class="hs-identifier hs-var hs-var">fvs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#filterNameSet"><span class="hs-identifier hs-var">filterNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621683059544"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059538"><span class="hs-identifier hs-var">rhs_fvs</span></a></span><span>
</span><span id="line-539"></span><span>                </span><span class="hs-comment">-- Keep locally-defined Names</span><span>
</span><span id="line-540"></span><span>                </span><span class="hs-comment">-- As well as dependency analysis, we need these for the</span><span>
</span><span id="line-541"></span><span>                </span><span class="hs-comment">-- MonoLocalBinds test in GHC.Tc.Gen.Bind.decideGeneralisationPlan</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683059545"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`seq`</span></span><span> </span><span class="hs-comment">-- See Note [Free-variable space leak]</span><span>
</span><span id="line-544"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059531"><span class="hs-identifier hs-type">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059537"><span class="hs-identifier hs-type">matches'</span></a></span><span>
</span><span id="line-545"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059545"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-546"></span><span>                  </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683059535"><span class="hs-identifier hs-type">plain_name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059538"><span class="hs-identifier hs-type">rhs_fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-547"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-548"></span><span>
</span><span id="line-549"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-var">rnBind</span></a></span><span> </span><span id="local-6989586621683059546"><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059546"><span class="hs-identifier hs-var">sig_fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span id="local-6989586621683059547"><span class="annot"><span class="annottext">XPatSynBind GhcRn GhcPs
</span><a href="#local-6989586621683059547"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683059548"><span class="annot"><span class="annottext">PatSynBind GhcRn GhcPs
</span><a href="#local-6989586621683059548"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059549"><span class="annot"><a href="#local-6989586621683059549"><span class="hs-identifier hs-var">bind'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059550"><span class="annot"><a href="#local-6989586621683059550"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059551"><span class="annot"><a href="#local-6989586621683059551"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; [Name])
-&gt; PatSynBind GhcRn GhcPs
-&gt; RnM (PatSynBind GhcRn GhcRn, [Name], NameSet)
</span><a href="GHC.Rename.Bind.html#rnPatSynBind"><span class="hs-identifier hs-var">rnPatSynBind</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059546"><span class="hs-identifier hs-var">sig_fn</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcPs
</span><a href="#local-6989586621683059548"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-551"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059547"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059549"><span class="hs-identifier hs-type">bind'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059550"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059551"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnBind"><span class="hs-identifier hs-var">rnBind</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#VarBind"><span class="hs-identifier hs-type">VarBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">var_ext :: forall idL idR. HsBindLR idL idR -&gt; XVarBind idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#var_ext"><span class="hs-identifier hs-var">var_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059555"><span class="annot"><span class="annottext">XVarBind GhcRn GhcPs
</span><a href="#local-6989586621683059555"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConCantHappen -&gt; RnM (HsBindLR GhcRn GhcRn, [Name], NameSet)
forall a. DataConCantHappen -&gt; a
</span><a href="Language.Haskell.Syntax.Extension.html#dataConCantHappen"><span class="hs-identifier hs-var">dataConCantHappen</span></a></span><span> </span><span class="annot"><span class="annottext">XVarBind GhcRn GhcPs
DataConCantHappen
</span><a href="#local-6989586621683059555"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span> </span><span class="hs-comment">-- See Note [Pattern bindings that bind no variables]</span><span>
</span><span id="line-556"></span><span class="annot"><a href="GHC.Rename.Bind.html#isOkNoBindPattern"><span class="hs-identifier hs-type">isOkNoBindPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-557"></span><span id="isOkNoBindPattern"><span class="annot"><span class="annottext">isOkNoBindPattern :: LPat GhcRn -&gt; Bool
</span><a href="GHC.Rename.Bind.html#isOkNoBindPattern"><span class="hs-identifier hs-var hs-var">isOkNoBindPattern</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059557"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059557"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059557"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- Exception (1)</span><span>
</span><span id="line-560"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-comment">-- Exception (2) #9127, #13646</span><span>
</span><span id="line-561"></span><span>    </span><span id="local-6989586621683059560"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059560"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059561"><span class="hs-identifier hs-var">patternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059560"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-comment">-- Exception (3)</span><span>
</span><span id="line-562"></span><span>
</span><span id="line-563"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-564"></span><span>      </span><span class="annot"><a href="#local-6989586621683059562"><span class="hs-identifier hs-type">lpatternContainsSplice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-565"></span><span>      </span><span id="local-6989586621683059562"><span class="annot"><span class="annottext">lpatternContainsSplice :: LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var hs-var">lpatternContainsSplice</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059563"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059563"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059561"><span class="hs-identifier hs-var">patternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059563"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-566"></span><span>      </span><span class="annot"><a href="#local-6989586621683059561"><span class="hs-identifier hs-type">patternContainsSplice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-567"></span><span>      </span><span id="local-6989586621683059561"><span class="annot"><span class="annottext">patternContainsSplice :: Pat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059561"><span class="hs-identifier hs-var hs-var">patternContainsSplice</span></a></span></span><span> </span><span id="local-6989586621683059564"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059564"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-568"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059564"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-569"></span><span>          </span><span class="hs-comment">-- A top-level splice has been evaluated by this point, so we know the pattern it is evaluated to</span><span>
</span><span id="line-570"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-type">HsUntypedSpliceTop</span></a></span><span> </span><span class="annot"><span class="annottext">ThModFinalizers
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059567"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059567"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059561"><span class="hs-identifier hs-var">patternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059567"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-571"></span><span>          </span><span class="hs-comment">-- A nested splice isn't evaluated so we can't guess what it will expand to</span><span>
</span><span id="line-572"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-type">HsUntypedSpliceNested</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-573"></span><span>          </span><span class="hs-comment">-- The base cases</span><span>
</span><span id="line-574"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-575"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-576"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-577"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-578"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-579"></span><span>          </span><span class="hs-comment">-- Recursive cases</span><span>
</span><span id="line-580"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059573"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059573"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059573"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-581"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059575"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059575"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059575"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-582"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (IdP GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059577"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059577"><span class="hs-identifier hs-var">lp</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059577"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-583"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059579"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059579"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059579"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-584"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">XViewPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059581"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059581"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059581"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-585"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#OrPat"><span class="hs-identifier hs-type">OrPat</span></a></span><span> </span><span class="annot"><span class="annottext">XOrPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059583"><span class="annot"><span class="annottext">NonEmpty (LPat GhcRn)
</span><a href="#local-6989586621683059583"><span class="hs-identifier hs-var">lps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool)
-&gt; NonEmpty (GenLocated SrcSpanAnnA (Pat GhcRn)) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LPat GhcRn)
NonEmpty (GenLocated SrcSpanAnnA (Pat GhcRn))
</span><a href="#local-6989586621683059583"><span class="hs-identifier hs-var">lps</span></a></span><span>
</span><span id="line-586"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059586"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059586"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcRn)
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059586"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-587"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059588"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683059588"><span class="hs-identifier hs-var">lps</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool)
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621683059588"><span class="hs-identifier hs-var">lps</span></a></span><span>
</span><span id="line-588"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059590"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683059590"><span class="hs-identifier hs-var">lps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool)
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621683059590"><span class="hs-identifier hs-var">lps</span></a></span><span>
</span><span id="line-589"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSumPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059592"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059592"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConTag
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059592"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-590"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059594"><span class="annot"><span class="annottext">HsConPatDetails GhcRn
</span><a href="#local-6989586621683059594"><span class="hs-identifier hs-var">cpd</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool)
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Bool
GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Bool
</span><a href="#local-6989586621683059562"><span class="hs-identifier hs-var">lpatternContainsSplice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsConPatDetails GhcRn -&gt; [LPat GhcRn]
forall p. UnXRec p =&gt; HsConPatDetails p -&gt; [LPat p]
</span><a href="Language.Haskell.Syntax.Pat.html#hsConPatArgs"><span class="hs-identifier hs-var">hsConPatArgs</span></a></span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcRn
</span><a href="#local-6989586621683059594"><span class="hs-identifier hs-var">cpd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsPatExpanded"><span class="hs-identifier hs-type">HsPatExpanded</span></a></span><span> </span><span id="local-6989586621683059598"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059598"><span class="hs-identifier hs-var">_orig</span></a></span></span><span> </span><span id="local-6989586621683059599"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059599"><span class="hs-identifier hs-var">new</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Bool
</span><a href="#local-6989586621683059561"><span class="hs-identifier hs-var">patternContainsSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683059599"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-592"></span><span>
</span><span id="line-593"></span><span>          </span><span class="hs-comment">-- The behavior of this case is unimportant, as GHC will throw an error shortly</span><span>
</span><span id="line-594"></span><span>          </span><span class="hs-comment">-- after reaching this case for other reasons (see TcRnIllegalTypePattern).</span><span>
</span><span id="line-595"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-type">EmbTyPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-type">InvisPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span class="hs-comment">{- Note [Pattern bindings that bind no variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Generally, we want to warn about pattern bindings like
  Just _ = e
because they don't do anything!  But we have three exceptions:

(1) A wildcard pattern
       _ = rhs
  which (a) is not that different from  _v = rhs
        (b) is sometimes used to give a type sig for,
            or an occurrence of, a variable on the RHS

(2) A strict pattern binding; that is, one with an outermost bang
     !Just _ = e
  This can fail, so unlike the lazy variant, it is not a no-op.
  Moreover, #13646 argues that even for single constructor
  types, you might want to write the constructor.  See also #9127.

(3) A splice pattern
      $(th-lhs) = rhs
   It is impossible to determine whether or not th-lhs really
   binds any variable. You have to recurse all the way into the pattern to check
   it doesn't contain any splices like this. See #22057.

Note [Free-variable space leak]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We have
    fvs' = trim fvs
and we seq fvs' before turning it as part of a record.

The reason is that trim is sometimes something like
    \xs -&gt; intersectNameSet (mkNameSet bound_names) xs
and we don't want to retain the list bound_names. This showed up in
ticket #1136.
-}</span><span>
</span><span id="line-634"></span><span>
</span><span id="line-635"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
          Dependency analysis and other support functions
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><a href="GHC.Rename.Bind.html#depAnalBinds"><span class="hs-identifier hs-type">depAnalBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#Uses"><span class="hs-identifier hs-type">Uses</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-642"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#RecFlag"><span class="hs-identifier hs-type">RecFlag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#DefUses"><span class="hs-identifier hs-type">DefUses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span class="hs-comment">-- Dependency analysis; this is important so that</span><span>
</span><span id="line-644"></span><span class="hs-comment">-- unused-binding reporting is accurate</span><span>
</span><span id="line-645"></span><span id="depAnalBinds"><span class="annot"><span class="annottext">depAnalBinds :: [(LHsBind GhcRn, [Name], NameSet)]
-&gt; ([(RecFlag, LHsBinds GhcRn)], DefUses)
</span><a href="GHC.Rename.Bind.html#depAnalBinds"><span class="hs-identifier hs-var hs-var">depAnalBinds</span></a></span></span><span> </span><span id="local-6989586621683059602"><span class="annot"><span class="annottext">[(LHsBind GhcRn, [Name], NameSet)]
</span><a href="#local-6989586621683059602"><span class="hs-identifier hs-var">binds_w_dus</span></a></span></span><span>
</span><span id="line-646"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(SCC
   (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
 -&gt; (RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)]))
-&gt; [SCC
      (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
-&gt; [(RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SCC
  (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
-&gt; (RecFlag, [GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)])
forall {a} {b} {c}. SCC (a, b, c) -&gt; (RecFlag, [a])
</span><a href="#local-6989586621683059603"><span class="hs-identifier hs-var">get_binds</span></a></span><span> </span><span class="annot"><span class="annottext">[SCC
   (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
</span><a href="#local-6989586621683059604"><span class="hs-identifier hs-var">sccs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[DefUse] -&gt; DefUses
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">([DefUse] -&gt; DefUses) -&gt; [DefUse] -&gt; DefUses
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(SCC
   (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
 -&gt; DefUse)
-&gt; [SCC
      (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
-&gt; [DefUse]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">SCC
  (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
-&gt; DefUse
forall {a}. SCC (a, [Name], NameSet) -&gt; DefUse
</span><a href="#local-6989586621683059606"><span class="hs-identifier hs-var">get_du</span></a></span><span> </span><span class="annot"><span class="annottext">[SCC
   (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
</span><a href="#local-6989586621683059604"><span class="hs-identifier hs-var">sccs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-647"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-648"></span><span>    </span><span id="local-6989586621683059604"><span class="annot"><span class="annottext">sccs :: [SCC
   (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
</span><a href="#local-6989586621683059604"><span class="hs-identifier hs-var hs-var">sccs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
 -&gt; [Name])
-&gt; ((GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name],
     NameSet)
    -&gt; [Name])
-&gt; [(GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name],
     NameSet)]
-&gt; [SCC
      (GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
forall node.
(node -&gt; [Name]) -&gt; (node -&gt; [Name]) -&gt; [node] -&gt; [SCC node]
</span><a href="GHC.Types.Name.Env.html#depAnal"><span class="hs-identifier hs-var">depAnal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059608"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059608"><span class="hs-identifier hs-var">defs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059608"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>                   </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059609"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059609"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; [Name]
forall elt. UniqSet elt -&gt; [elt]
</span><a href="GHC.Types.Unique.Set.html#nonDetEltsUniqSet"><span class="hs-identifier hs-var">nonDetEltsUniqSet</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059609"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>                   </span><span class="hs-comment">-- It's OK to use nonDetEltsUniqSet here as explained in</span><span>
</span><span id="line-651"></span><span>                   </span><span class="hs-comment">-- Note [depAnal determinism] in GHC.Types.Name.Env.</span><span>
</span><span id="line-652"></span><span>                   </span><span class="annot"><span class="annottext">[(LHsBind GhcRn, [Name], NameSet)]
[(GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
</span><a href="#local-6989586621683059602"><span class="hs-identifier hs-var">binds_w_dus</span></a></span><span>
</span><span id="line-653"></span><span>
</span><span id="line-654"></span><span>    </span><span id="local-6989586621683059603"><span class="annot"><span class="annottext">get_binds :: SCC (a, b, c) -&gt; (RecFlag, [a])
</span><a href="#local-6989586621683059603"><span class="hs-identifier hs-var hs-var">get_binds</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Graph.html#AcyclicSCC"><span class="hs-identifier hs-type">AcyclicSCC</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059612"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683059612"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#NonRecursive"><span class="hs-identifier hs-var">NonRecursive</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683059612"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>    </span><span class="annot"><a href="#local-6989586621683059603"><span class="hs-identifier hs-var">get_binds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Graph.html#CyclicSCC"><span class="hs-identifier hs-type">CyclicSCC</span></a></span><span>  </span><span id="local-6989586621683059615"><span class="annot"><span class="annottext">[(a, b, c)]
</span><a href="#local-6989586621683059615"><span class="hs-identifier hs-var">binds_w_dus</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RecFlag
</span><a href="GHC.Types.Basic.html#Recursive"><span class="hs-identifier hs-var">Recursive</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683059617"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059617"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621683059617"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(a, b, c)]
</span><a href="#local-6989586621683059615"><span class="hs-identifier hs-var">binds_w_dus</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span>    </span><span id="local-6989586621683059606"><span class="annot"><span class="annottext">get_du :: SCC (a, [Name], NameSet) -&gt; DefUse
</span><a href="#local-6989586621683059606"><span class="hs-identifier hs-var hs-var">get_du</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Graph.html#AcyclicSCC"><span class="hs-identifier hs-type">AcyclicSCC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059618"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059618"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059619"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059619"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; Maybe NameSet
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059618"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059619"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>    </span><span class="annot"><a href="#local-6989586621683059606"><span class="hs-identifier hs-var">get_du</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Graph.html#CyclicSCC"><span class="hs-identifier hs-type">CyclicSCC</span></a></span><span>  </span><span id="local-6989586621683059620"><span class="annot"><span class="annottext">[(a, [Name], NameSet)]
</span><a href="#local-6989586621683059620"><span class="hs-identifier hs-var">binds_w_dus</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSet -&gt; Maybe NameSet
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059621"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059622"><span class="hs-identifier hs-var">uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-659"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-660"></span><span>          </span><span id="local-6989586621683059621"><span class="annot"><span class="annottext">defs :: NameSet
</span><a href="#local-6989586621683059621"><span class="hs-identifier hs-var hs-var">defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059623"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621683059624"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059624"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">NameSet
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(a, [Name], NameSet)]
</span><a href="#local-6989586621683059620"><span class="hs-identifier hs-var">binds_w_dus</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059623"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059623"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059624"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-661"></span><span>          </span><span id="local-6989586621683059622"><span class="annot"><span class="annottext">uses :: NameSet
</span><a href="#local-6989586621683059622"><span class="hs-identifier hs-var hs-var">uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NameSet] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#unionNameSets"><span class="hs-identifier hs-var">unionNameSets</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059626"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621683059626"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059626"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(a, [Name], NameSet)]
</span><a href="#local-6989586621683059620"><span class="hs-identifier hs-var">binds_w_dus</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span class="hs-comment">---------------------</span><span>
</span><span id="line-664"></span><span class="hs-comment">-- Bind the top-level forall'd type variables in the sigs.</span><span>
</span><span id="line-665"></span><span class="hs-comment">-- E.g  f :: forall a. a -&gt; a</span><span>
</span><span id="line-666"></span><span class="hs-comment">--      f = rhs</span><span>
</span><span id="line-667"></span><span class="hs-comment">--      The 'a' scopes over the rhs</span><span>
</span><span id="line-668"></span><span class="hs-comment">--</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- NB: there'll usually be just one (for a function binding)</span><span>
</span><span id="line-670"></span><span class="hs-comment">--     but if there are many, one may shadow the rest; too bad!</span><span>
</span><span id="line-671"></span><span class="hs-comment">--      e.g  x :: forall a. [a] -&gt; [a]</span><span>
</span><span id="line-672"></span><span class="hs-comment">--           y :: forall a. [(a,a)] -&gt; a</span><span>
</span><span id="line-673"></span><span class="hs-comment">--           (x,y) = e</span><span>
</span><span id="line-674"></span><span class="hs-comment">--      In e, 'a' will be in scope, and it'll be the one from 'y'!</span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="annot"><a href="GHC.Rename.Bind.html#mkScopedTvFn"><span class="hs-identifier hs-type">mkScopedTvFn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span class="hs-comment">-- Return a lookup function that maps an Id Name to the names</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- of the type variables that should scope over its body.</span><span>
</span><span id="line-679"></span><span id="mkScopedTvFn"><span class="annot"><span class="annottext">mkScopedTvFn :: [LSig GhcRn] -&gt; Name -&gt; [Name]
</span><a href="GHC.Rename.Bind.html#mkScopedTvFn"><span class="hs-identifier hs-var hs-var">mkScopedTvFn</span></a></span></span><span> </span><span id="local-6989586621683059627"><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621683059627"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683059628"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059628"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NameEnv [Name] -&gt; Name -&gt; Maybe [Name]
forall a. NameEnv a -&gt; Name -&gt; Maybe a
</span><a href="GHC.Types.Name.Env.html#lookupNameEnv"><span class="hs-identifier hs-var">lookupNameEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NameEnv [Name]
</span><a href="#local-6989586621683059630"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059628"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Name] -&gt; [Name] -&gt; [Name]
forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-681"></span><span>    </span><span id="local-6989586621683059630"><span class="annot"><span class="annottext">env :: NameEnv [Name]
</span><a href="#local-6989586621683059630"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LSig GhcRn -&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name]))
-&gt; [LSig GhcRn] -&gt; NameEnv [Name]
forall a.
(LSig GhcRn -&gt; Maybe ([GenLocated SrcSpanAnnN Name], a))
-&gt; [LSig GhcRn] -&gt; NameEnv a
</span><a href="GHC.Hs.Utils.html#mkHsSigEnv"><span class="hs-identifier hs-var">mkHsSigEnv</span></a></span><span> </span><span class="annot"><span class="annottext">LSig GhcRn -&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name])
</span><a href="#local-6989586621683059632"><span class="hs-identifier hs-var">get_scoped_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621683059627"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-682"></span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><a href="#local-6989586621683059632"><span class="hs-identifier hs-type">get_scoped_tvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>    </span><span class="hs-comment">-- Returns (binders, scoped tvs for those binders)</span><span>
</span><span id="line-685"></span><span>    </span><span id="local-6989586621683059632"><span class="annot"><span class="annottext">get_scoped_tvs :: LSig GhcRn -&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name])
</span><a href="#local-6989586621683059632"><span class="hs-identifier hs-var hs-var">get_scoped_tvs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059634"><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
</span><a href="#local-6989586621683059634"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683059635"><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621683059635"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnN Name], [Name])
-&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683059634"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsScopedTvs"><span class="hs-identifier hs-var">hsScopedTvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621683059635"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><a href="#local-6989586621683059632"><span class="hs-identifier hs-var">get_scoped_tvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059638"><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
</span><a href="#local-6989586621683059638"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683059639"><span class="annot"><span class="annottext">LHsSigWcType GhcRn
</span><a href="#local-6989586621683059639"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnN Name], [Name])
-&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683059638"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsWcScopedTvs"><span class="hs-identifier hs-var">hsWcScopedTvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcRn
</span><a href="#local-6989586621683059639"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>    </span><span class="annot"><a href="#local-6989586621683059632"><span class="hs-identifier hs-var">get_scoped_tvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059642"><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
</span><a href="#local-6989586621683059642"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683059643"><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621683059643"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnN Name], [Name])
-&gt; Maybe ([GenLocated SrcSpanAnnN Name], [Name])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683059642"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn -&gt; [Name]
</span><a href="GHC.Hs.Type.html#hsScopedTvs"><span class="hs-identifier hs-var">hsScopedTvs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcRn
</span><a href="#local-6989586621683059643"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>    </span><span class="annot"><a href="#local-6989586621683059632"><span class="hs-identifier hs-var">get_scoped_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">LSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ([GenLocated SrcSpanAnnN Name], [Name])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span class="hs-comment">-- Process the fixity declarations, making a FastString -&gt; (Located Fixity) map</span><span>
</span><span id="line-694"></span><span class="hs-comment">-- (We keep the location around for reporting duplicate fixity declarations.)</span><span>
</span><span id="line-695"></span><span class="hs-comment">--</span><span>
</span><span id="line-696"></span><span class="hs-comment">-- Checks for duplicates, but not that only locally defined things are fixed.</span><span>
</span><span id="line-697"></span><span class="hs-comment">-- Note: for local fixity declarations, duplicates would also be checked in</span><span>
</span><span id="line-698"></span><span class="hs-comment">--       check_sigs below.  But we also use this function at the top level.</span><span>
</span><span id="line-699"></span><span>
</span><span id="line-700"></span><span class="annot"><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier hs-type">makeMiniFixityEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LFixitySig"><span class="hs-identifier hs-type">LFixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span id="makeMiniFixityEnv"><span class="annot"><span class="annottext">makeMiniFixityEnv :: [LFixitySig GhcPs] -&gt; RnM MiniFixityEnv
</span><a href="GHC.Rename.Bind.html#makeMiniFixityEnv"><span class="hs-identifier hs-var hs-var">makeMiniFixityEnv</span></a></span></span><span> </span><span id="local-6989586621683059644"><span class="annot"><span class="annottext">[LFixitySig GhcPs]
</span><a href="#local-6989586621683059644"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MiniFixityEnv
 -&gt; GenLocated SrcSpanAnnA (FixitySig GhcPs) -&gt; RnM MiniFixityEnv)
-&gt; MiniFixityEnv
-&gt; [GenLocated SrcSpanAnnA (FixitySig GhcPs)]
-&gt; RnM MiniFixityEnv
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldlM</span></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; LFixitySig GhcPs -&gt; RnM MiniFixityEnv
MiniFixityEnv
-&gt; GenLocated SrcSpanAnnA (FixitySig GhcPs) -&gt; RnM MiniFixityEnv
</span><a href="#local-6989586621683059646"><span class="hs-identifier hs-var">add_one_sig</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="GHC.Rename.Fixity.html#emptyMiniFixityEnv"><span class="hs-identifier hs-var">emptyMiniFixityEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[LFixitySig GhcPs]
[GenLocated SrcSpanAnnA (FixitySig GhcPs)]
</span><a href="#local-6989586621683059644"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-703"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-704"></span><span>   </span><span class="annot"><a href="#local-6989586621683059646"><span class="hs-identifier hs-type">add_one_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LFixitySig"><span class="hs-identifier hs-type">LFixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MiniFixityEnv"><span class="hs-identifier hs-type">MiniFixityEnv</span></a></span><span>
</span><span id="line-705"></span><span>   </span><span id="local-6989586621683059646"><span class="annot"><span class="annottext">add_one_sig :: MiniFixityEnv -&gt; LFixitySig GhcPs -&gt; RnM MiniFixityEnv
</span><a href="#local-6989586621683059646"><span class="hs-identifier hs-var hs-var">add_one_sig</span></a></span></span><span> </span><span id="local-6989586621683059647"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059647"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059648"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059648"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span id="local-6989586621683059650"><span class="annot"><span class="annottext">XFixitySig GhcPs
</span><a href="#local-6989586621683059650"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span> </span><span id="local-6989586621683059651"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059651"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683059652"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683059652"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-706"></span><span>     </span><span class="annot"><span class="annottext">(MiniFixityEnv
 -&gt; (SrcSpan, SrcSpan, RdrName, Fixity, NamespaceSpecifier)
 -&gt; RnM MiniFixityEnv)
-&gt; MiniFixityEnv
-&gt; [(SrcSpan, SrcSpan, RdrName, Fixity, NamespaceSpecifier)]
-&gt; RnM MiniFixityEnv
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldlM</span></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
-&gt; (SrcSpan, SrcSpan, RdrName, Fixity, NamespaceSpecifier)
-&gt; RnM MiniFixityEnv
</span><a href="#local-6989586621683059653"><span class="hs-identifier hs-var">add_one</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059647"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059648"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683059654"><span class="hs-identifier hs-var">name_loc</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059655"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683059652"><span class="hs-identifier hs-var">fixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XFixitySig GhcPs
NamespaceSpecifier
</span><a href="#local-6989586621683059650"><span class="hs-identifier hs-var">ns_spec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059654"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683059654"><span class="hs-identifier hs-var">name_loc</span></a></span></span><span> </span><span id="local-6989586621683059655"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059655"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059651"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span>   </span><span id="local-6989586621683059653"><span class="annot"><span class="annottext">add_one :: MiniFixityEnv
-&gt; (SrcSpan, SrcSpan, RdrName, Fixity, NamespaceSpecifier)
-&gt; RnM MiniFixityEnv
</span><a href="#local-6989586621683059653"><span class="hs-identifier hs-var hs-var">add_one</span></a></span></span><span> </span><span id="local-6989586621683059659"><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059659"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059660"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059660"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059661"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059661"><span class="hs-identifier hs-var">name_loc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059662"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059662"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059663"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683059663"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059664"><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059664"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-710"></span><span>     </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- this fixity decl is a duplicate iff</span><span>
</span><span id="line-711"></span><span>       </span><span class="hs-comment">-- the ReaderName's OccName's FastString is already in the env</span><span>
</span><span id="line-712"></span><span>       </span><span class="hs-comment">-- (we only need to check the local fix_env because</span><span>
</span><span id="line-713"></span><span>       </span><span class="hs-comment">--  definitions of non-local will be caught elsewhere)</span><span>
</span><span id="line-714"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059665"><span class="annot"><span class="annottext">fs :: FastString
</span><a href="#local-6989586621683059665"><span class="hs-identifier hs-var hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059662"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059667"><span class="annot"><span class="annottext">fix_item :: GenLocated SrcSpan Fixity
</span><a href="#local-6989586621683059667"><span class="hs-identifier hs-var hs-var">fix_item</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Fixity -&gt; GenLocated SrcSpan Fixity
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059660"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683059663"><span class="hs-identifier hs-var">fixity</span></a></span><span class="hs-special">}</span><span class="hs-special">;</span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
-&gt; MiniFixityEnv -&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059668"><span class="hs-identifier hs-var">search_for_dups</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059664"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059659"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059665"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-718"></span><span>         </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan Fixity)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; RnM MiniFixityEnv
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MiniFixityEnv -&gt; RnM MiniFixityEnv)
-&gt; MiniFixityEnv -&gt; RnM MiniFixityEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
-&gt; MiniFixityEnv
-&gt; FastString
-&gt; GenLocated SrcSpan Fixity
-&gt; MiniFixityEnv
</span><a href="#local-6989586621683059669"><span class="hs-identifier hs-var">extend_mini_fixity_env</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059664"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059659"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059665"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Fixity
</span><a href="#local-6989586621683059667"><span class="hs-identifier hs-var">fix_item</span></a></span><span>
</span><span id="line-719"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059670"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059670"><span class="hs-identifier hs-var">loc'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-720"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcM () -&gt; TcM ()
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059660"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM () -&gt; TcM ()) -&gt; TcM () -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-721"></span><span>             </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059661"><span class="hs-identifier hs-var">name_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; RdrName -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnMultipleFixityDecls"><span class="hs-identifier hs-var">TcRnMultipleFixityDecls</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683059670"><span class="hs-identifier hs-var">loc'</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059662"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv -&gt; RnM MiniFixityEnv
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059659"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-723"></span><span>     </span><span class="hs-special">}</span><span>
</span><span id="line-724"></span><span>   </span><span id="local-6989586621683059668"><span class="annot"><span class="annottext">search_for_dups :: NamespaceSpecifier
-&gt; MiniFixityEnv -&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059668"><span class="hs-identifier hs-var hs-var">search_for_dups</span></a></span></span><span> </span><span id="local-6989586621683059673"><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059673"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MFE"><span class="hs-identifier hs-type">MFE</span></a></span><span class="hs-special">{</span><span id="local-6989586621683059675"><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
mfe_data_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
mfe_data_level_names :: MiniFixityEnv -&gt; FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059675"><span class="hs-identifier hs-var hs-var">mfe_data_level_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059677"><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
mfe_type_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
mfe_type_level_names :: MiniFixityEnv -&gt; FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059677"><span class="hs-identifier hs-var hs-var">mfe_type_level_names</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621683059679"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059679"><span class="hs-identifier hs-var">fs</span></a></span></span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059673"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-726"></span><span>      </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="GHC.Hs.Binds.html#NoNamespaceSpecifier"><span class="hs-identifier hs-var">NoNamespaceSpecifier</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; Maybe a
</span><a href="GHC.Data.FastString.Env.html#lookupFsEnv"><span class="hs-identifier hs-var">lookupFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059675"><span class="hs-identifier hs-var">mfe_data_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059679"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-727"></span><span>        </span><span class="hs-comment">-- We only need to find a single duplicate to emit an error about</span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-comment">-- multiple fixity decls. Therefore, if we find a duplicate in the</span><span>
</span><span id="line-729"></span><span>        </span><span class="hs-comment">-- term-level namespace, then there is no need to look in the type-level namespace.</span><span>
</span><span id="line-730"></span><span>        </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan Fixity)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; Maybe a
</span><a href="GHC.Data.FastString.Env.html#lookupFsEnv"><span class="hs-identifier hs-var">lookupFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059677"><span class="hs-identifier hs-var">mfe_type_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059679"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-731"></span><span>        </span><span id="local-6989586621683059682"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059682"><span class="hs-identifier hs-var">just_dup</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059682"><span class="hs-identifier hs-var">just_dup</span></a></span><span>
</span><span id="line-732"></span><span>      </span><span class="annot"><a href="GHC.Hs.Binds.html#TypeNamespaceSpecifier"><span class="hs-identifier hs-type">TypeNamespaceSpecifier</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; Maybe a
</span><a href="GHC.Data.FastString.Env.html#lookupFsEnv"><span class="hs-identifier hs-var">lookupFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059677"><span class="hs-identifier hs-var">mfe_type_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059679"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-733"></span><span>      </span><span class="annot"><a href="GHC.Hs.Binds.html#DataNamespaceSpecifier"><span class="hs-identifier hs-type">DataNamespaceSpecifier</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString -&gt; Maybe (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; Maybe a
</span><a href="GHC.Data.FastString.Env.html#lookupFsEnv"><span class="hs-identifier hs-var">lookupFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059675"><span class="hs-identifier hs-var">mfe_data_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059679"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span>   </span><span id="local-6989586621683059669"><span class="annot"><span class="annottext">extend_mini_fixity_env :: NamespaceSpecifier
-&gt; MiniFixityEnv
-&gt; FastString
-&gt; GenLocated SrcSpan Fixity
-&gt; MiniFixityEnv
</span><a href="#local-6989586621683059669"><span class="hs-identifier hs-var hs-var">extend_mini_fixity_env</span></a></span></span><span> </span><span id="local-6989586621683059685"><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059685"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span> </span><span id="local-6989586621683059686"><span class="annot"><span class="annottext">env :: MiniFixityEnv
</span><a href="#local-6989586621683059686"><span class="hs-identifier hs-var">env</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Rename.Fixity.html#MFE"><span class="hs-identifier hs-type">MFE</span></a></span><span class="hs-special">{</span><span id="local-6989586621683059687"><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
mfe_data_level_names :: MiniFixityEnv -&gt; FastStringEnv (GenLocated SrcSpan Fixity)
mfe_data_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="GHC.Rename.Fixity.html#mfe_data_level_names"><span class="hs-identifier hs-var hs-var">mfe_data_level_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059688"><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
mfe_type_level_names :: MiniFixityEnv -&gt; FastStringEnv (GenLocated SrcSpan Fixity)
mfe_type_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="GHC.Rename.Fixity.html#mfe_type_level_names"><span class="hs-identifier hs-var hs-var">mfe_type_level_names</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621683059689"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059689"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621683059690"><span class="annot"><span class="annottext">GenLocated SrcSpan Fixity
</span><a href="#local-6989586621683059690"><span class="hs-identifier hs-var">fix_item</span></a></span></span><span>
</span><span id="line-736"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683059685"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-737"></span><span>      </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="GHC.Hs.Binds.html#NoNamespaceSpecifier"><span class="hs-identifier hs-var">NoNamespaceSpecifier</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#MFE"><span class="hs-identifier hs-type">MFE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mfe_data_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="GHC.Rename.Fixity.html#mfe_data_level_names"><span class="hs-identifier hs-var">mfe_data_level_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString
-&gt; GenLocated SrcSpan Fixity
-&gt; FastStringEnv (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; a -&gt; FastStringEnv a
</span><a href="GHC.Data.FastString.Env.html#extendFsEnv"><span class="hs-identifier hs-var">extendFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059687"><span class="hs-identifier hs-var">mfe_data_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059689"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Fixity
</span><a href="#local-6989586621683059690"><span class="hs-identifier hs-var">fix_item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mfe_type_level_names :: FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="GHC.Rename.Fixity.html#mfe_type_level_names"><span class="hs-identifier hs-var">mfe_type_level_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
-&gt; FastString
-&gt; GenLocated SrcSpan Fixity
-&gt; FastStringEnv (GenLocated SrcSpan Fixity)
forall a. FastStringEnv a -&gt; FastString -&gt; a -&gt; FastStringEnv a
</span><a href="GHC.Data.FastString.Env.html#extendFsEnv"><span class="hs-identifier hs-var">extendFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv (GenLocated SrcSpan Fixity)
</span><a href="#local-6989586621683059688"><span class="hs-identifier hs-var">mfe_type_level_names</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683059689"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Fixity
</span><a href="#local-6989586621683059690"><span class="hs-identifier hs-var">fix_item</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span>      </span><span class="annot"><a href="GHC.Hs.Binds.html#TypeNamespaceSpecifier"><span class="hs-identifier hs-type">TypeNamespaceSpecifier</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059686"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#mfe_type_level_names"><span class="hs-identifier hs-var">mfe_type_level_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.Env.html#extendFsEnv"><span class="hs-identifier hs-type">extendFsEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059688"><span class="hs-identifier hs-type">mfe_type_level_names</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059689"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059690"><span class="hs-identifier hs-type">fix_item</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span>      </span><span class="annot"><a href="GHC.Hs.Binds.html#DataNamespaceSpecifier"><span class="hs-identifier hs-type">DataNamespaceSpecifier</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MiniFixityEnv
</span><a href="#local-6989586621683059686"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#mfe_data_level_names"><span class="hs-identifier hs-var">mfe_data_level_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.Env.html#extendFsEnv"><span class="hs-identifier hs-type">extendFsEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059687"><span class="hs-identifier hs-type">mfe_data_level_names</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059689"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059690"><span class="hs-identifier hs-type">fix_item</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="hs-comment">-- | Multiplicity annotations are a simple wrapper around types. As such,</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- renaming them is a straightforward wrapper around 'rnLHsType'.</span><span>
</span><span id="line-747"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnHsMultAnn"><span class="hs-identifier hs-type">rnHsMultAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-748"></span><span id="rnHsMultAnn"><span class="annot"><span class="annottext">rnHsMultAnn :: HsMultAnn GhcPs -&gt; RnM (HsMultAnn GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#rnHsMultAnn"><span class="hs-identifier hs-var hs-var">rnHsMultAnn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-type">HsNoMultAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XNoMultAnn GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsMultAnn GhcRn, NameSet) -&gt; RnM (HsMultAnn GhcRn, NameSet)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XNoMultAnn GhcRn -&gt; HsMultAnn GhcRn
forall pass. XNoMultAnn pass -&gt; HsMultAnn pass
</span><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-var">HsNoMultAnn</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XNoMultAnn GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnHsMultAnn"><span class="hs-identifier hs-var">rnHsMultAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPct1Ann"><span class="hs-identifier hs-type">HsPct1Ann</span></a></span><span> </span><span class="annot"><span class="annottext">XPct1Ann GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsMultAnn GhcRn, NameSet) -&gt; RnM (HsMultAnn GhcRn, NameSet)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPct1Ann GhcRn -&gt; HsMultAnn GhcRn
forall pass. XPct1Ann pass -&gt; HsMultAnn pass
</span><a href="Language.Haskell.Syntax.Binds.html#HsPct1Ann"><span class="hs-identifier hs-var">HsPct1Ann</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XPct1Ann GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-750"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnHsMultAnn"><span class="hs-identifier hs-var">rnHsMultAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XMultAnn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059697"><span class="annot"><span class="annottext">LHsType (NoGhcTc GhcPs)
</span><a href="#local-6989586621683059697"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-751"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621683059698"><span class="annot"><a href="#local-6989586621683059698"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059699"><span class="annot"><a href="#local-6989586621683059699"><span class="hs-identifier hs-var">freeVars'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, NameSet)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var">rnLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#PatCtx"><span class="hs-identifier hs-var">PatCtx</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType (NoGhcTc GhcPs)
LHsType GhcPs
</span><a href="#local-6989586621683059697"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059698"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059699"><span class="hs-identifier hs-type">freeVars'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                Pattern synonym bindings
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnPatSynBind"><span class="hs-identifier hs-type">rnPatSynBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>           </span><span class="hs-comment">-- Signature tyvar function</span><span>
</span><span id="line-761"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-762"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#Uses"><span class="hs-identifier hs-type">Uses</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span id="rnPatSynBind"><span class="annot"><span class="annottext">rnPatSynBind :: (Name -&gt; [Name])
-&gt; PatSynBind GhcRn GhcPs
-&gt; RnM (PatSynBind GhcRn GhcRn, [Name], NameSet)
</span><a href="GHC.Rename.Bind.html#rnPatSynBind"><span class="hs-identifier hs-var hs-var">rnPatSynBind</span></a></span></span><span> </span><span id="local-6989586621683059701"><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059701"><span class="hs-identifier hs-var">sig_fn</span></a></span></span><span> </span><span id="local-6989586621683059702"><span class="annot"><span class="annottext">bind :: PatSynBind GhcRn GhcPs
</span><a href="#local-6989586621683059702"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059703"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683059703"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683059704"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059704"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-764"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059706"><span class="annot"><span class="annottext">HsPatSynDetails GhcPs
</span><a href="#local-6989586621683059706"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-765"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059708"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621683059708"><span class="hs-identifier hs-var">pat</span></a></span></span><span>
</span><span id="line-766"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059710"><span class="annot"><span class="annottext">HsPatSynDir GhcPs
</span><a href="#local-6989586621683059710"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>       </span><span class="hs-comment">-- invariant: no free vars here when it's a FunBind</span><span>
</span><span id="line-768"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059711"><span class="annot"><a href="#local-6989586621683059711"><span class="hs-identifier hs-var">pattern_synonym_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PatternSynonyms</span></span><span>
</span><span id="line-769"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683059711"><span class="hs-identifier hs-type">pattern_synonym_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalPatternSynonymDecl"><span class="hs-identifier hs-type">TcRnIllegalPatternSynonymDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059716"><span class="annot"><a href="#local-6989586621683059716"><span class="hs-identifier hs-var hs-var">scoped_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [Name]
</span><a href="#local-6989586621683059701"><span class="hs-identifier hs-var">sig_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059704"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621683059717"><span class="annot"><a href="#local-6989586621683059717"><span class="hs-identifier hs-var">pat'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059718"><span class="annot"><a href="#local-6989586621683059718"><span class="hs-identifier hs-var">details'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059719"><span class="annot"><a href="#local-6989586621683059719"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-type">bindSigTyVarsFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059716"><span class="hs-identifier hs-type">scoped_tvs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-773"></span><span>                                      </span><span class="annot"><a href="GHC.Rename.Pat.html#rnPat"><span class="hs-identifier hs-type">rnPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059708"><span class="hs-identifier hs-type">pat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683059722"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683059722"><span class="hs-identifier hs-var">pat'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-774"></span><span>         </span><span class="hs-comment">-- We check the 'RdrName's instead of the 'Name's</span><span>
</span><span id="line-775"></span><span>         </span><span class="hs-comment">-- so that the binding locations are reported</span><span>
</span><span id="line-776"></span><span>         </span><span class="hs-comment">-- from the left-hand side</span><span>
</span><span id="line-777"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcPs
</span><a href="#local-6989586621683059706"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-778"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059724"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059724"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-779"></span><span>                   </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var">checkDupRdrNames</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059724"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-780"></span><span>                      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059725"><span class="annot"><a href="#local-6989586621683059725"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name))
-&gt; [LocatedN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall {ann}.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="#local-6989586621683059726"><span class="hs-identifier hs-var">lookupPatSynBndr</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059724"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-781"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059722"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-type">noTypeArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059725"><span class="hs-identifier hs-type">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-type">mkFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059725"><span class="hs-identifier hs-type">names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-783"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621683059730"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059730"><span class="hs-identifier hs-var">var1</span></a></span></span><span> </span><span id="local-6989586621683059731"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059731"><span class="hs-identifier hs-var">var2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-784"></span><span>                   </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var">checkDupRdrNames</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059730"><span class="hs-identifier hs-var">var1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059731"><span class="hs-identifier hs-var">var2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-785"></span><span>                      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059732"><span class="annot"><a href="#local-6989586621683059732"><span class="hs-identifier hs-var">name1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall {ann}.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="#local-6989586621683059726"><span class="hs-identifier hs-var">lookupPatSynBndr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059730"><span class="hs-identifier hs-var">var1</span></a></span><span>
</span><span id="line-786"></span><span>                      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059733"><span class="annot"><a href="#local-6989586621683059733"><span class="hs-identifier hs-var">name2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683059726"><span class="hs-identifier hs-type">lookupPatSynBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059731"><span class="hs-identifier hs-type">var2</span></a></span><span>
</span><span id="line-787"></span><span>                      </span><span class="hs-comment">-- ; checkPrecMatch -- TODO</span><span>
</span><span id="line-788"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059722"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059732"><span class="hs-identifier hs-type">name1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059733"><span class="hs-identifier hs-type">name2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-type">mkFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683059732"><span class="hs-identifier hs-type">name1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059733"><span class="hs-identifier hs-type">name2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-790"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621683059735"><span class="annot"><span class="annottext">[RecordPatSynField GhcPs]
</span><a href="#local-6989586621683059735"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-791"></span><span>                   </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var">checkDupRdrNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RecordPatSynField GhcPs -&gt; LocatedN RdrName)
-&gt; [RecordPatSynField GhcPs] -&gt; [LocatedN RdrName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldOcc GhcPs -&gt; LIdP GhcPs
FieldOcc GhcPs -&gt; LocatedN RdrName
forall pass. FieldOcc pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Type.html#foLabel"><span class="hs-identifier hs-var">foLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcPs -&gt; LocatedN RdrName)
-&gt; (RecordPatSynField GhcPs -&gt; FieldOcc GhcPs)
-&gt; RecordPatSynField GhcPs
-&gt; LocatedN RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RecordPatSynField GhcPs -&gt; FieldOcc GhcPs
forall pass. RecordPatSynField pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynField"><span class="hs-identifier hs-var">recordPatSynField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcPs]
</span><a href="#local-6989586621683059735"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>                      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059738"><span class="annot"><a href="#local-6989586621683059738"><span class="hs-identifier hs-var">fls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; RnM [FieldLabel]
Name -&gt; RnM [FieldLabel]
</span><a href="GHC.Rename.Env.html#lookupConstructorFields"><span class="hs-identifier hs-var">lookupConstructorFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059704"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-793"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059740"><span class="annot"><a href="#local-6989586621683059740"><span class="hs-identifier hs-var hs-var">fld_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(FastString, FieldLabel)] -&gt; FastStringEnv FieldLabel
forall a. [(FastString, a)] -&gt; FastStringEnv a
</span><a href="GHC.Data.FastString.Env.html#mkFsEnv"><span class="hs-identifier hs-var">mkFsEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabelString -&gt; FastString
</span><a href="Language.Haskell.Syntax.Basic.html#field_label"><span class="hs-identifier hs-var">field_label</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldLabelString -&gt; FastString) -&gt; FieldLabelString -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldLabelString
</span><a href="GHC.Types.FieldLabel.html#flLabel"><span class="hs-identifier hs-var">flLabel</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683059744"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683059744"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683059744"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683059744"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621683059738"><span class="hs-identifier hs-var">fls</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-794"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059745"><span class="annot"><a href="#local-6989586621683059745"><span class="hs-identifier hs-var hs-var">rnRecordPatSynField</span></a></span></span><span>
</span><span id="line-795"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">recordPatSynField :: forall pass. RecordPatSynField pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynField"><span class="hs-identifier hs-var">recordPatSynField</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059747"><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621683059747"><span class="hs-identifier hs-var">visible</span></a></span></span><span>
</span><span id="line-796"></span><span>                                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recordPatSynPatVar :: forall pass. RecordPatSynField pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynPatVar"><span class="hs-identifier hs-var">recordPatSynPatVar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059749"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059749"><span class="hs-identifier hs-var">hidden</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059750"><span class="annot"><span class="annottext">visible' :: FieldOcc GhcRn
</span><a href="#local-6989586621683059750"><span class="hs-identifier hs-var hs-var hs-var">visible'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel -&gt; FieldOcc GhcPs -&gt; FieldOcc GhcRn
</span><a href="GHC.Rename.HsType.html#lookupField"><span class="hs-identifier hs-var">lookupField</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683059740"><span class="hs-identifier hs-var">fld_env</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621683059747"><span class="hs-identifier hs-var">visible</span></a></span><span>
</span><span id="line-798"></span><span>                                   </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059752"><span class="annot"><a href="#local-6989586621683059752"><span class="hs-identifier hs-var">hidden'</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall {ann}.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="#local-6989586621683059726"><span class="hs-identifier hs-var">lookupPatSynBndr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059749"><span class="hs-identifier hs-var">hidden</span></a></span><span>
</span><span id="line-799"></span><span>                                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#RecordPatSynField"><span class="hs-identifier hs-type">RecordPatSynField</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#recordPatSynField"><span class="hs-identifier hs-var">recordPatSynField</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059750"><span class="hs-identifier hs-type">visible'</span></a></span><span>
</span><span id="line-800"></span><span>                                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#recordPatSynPatVar"><span class="hs-identifier hs-var">recordPatSynPatVar</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059752"><span class="hs-identifier hs-type">hidden'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-801"></span><span>                      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059753"><span class="annot"><a href="#local-6989586621683059753"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="annot"><a href="#local-6989586621683059745"><span class="hs-identifier hs-type">rnRecordPatSynField</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621683059735"><span class="hs-identifier hs-type">vars</span></a></span><span>
</span><span id="line-802"></span><span>                      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059722"><span class="hs-identifier hs-type">pat'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059753"><span class="hs-identifier hs-type">names</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-803"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-type">mkFVs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#recordPatSynPatVar"><span class="hs-identifier hs-var">recordPatSynPatVar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059753"><span class="hs-identifier hs-type">names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059754"><span class="annot"><a href="#local-6989586621683059754"><span class="hs-identifier hs-var">dir'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059755"><span class="annot"><a href="#local-6989586621683059755"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621683059710"><span class="hs-identifier hs-type">dir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-806"></span><span>            </span><span class="annot"><span class="annottext">HsPatSynDir GhcPs
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HsPatSynDir GhcRn, NameSet)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsPatSynDir GhcRn, NameSet)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>            </span><span class="annot"><span class="annottext">HsPatSynDir GhcPs
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HsPatSynDir GhcRn, NameSet)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (HsPatSynDir GhcRn, NameSet)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
forall id. HsPatSynDir id
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span id="local-6989586621683059759"><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621683059759"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-809"></span><span>                </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059760"><span class="annot"><a href="#local-6989586621683059760"><span class="hs-identifier hs-var">mg'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059761"><span class="annot"><a href="#local-6989586621683059761"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall a. [Name] -&gt; RnM (a, NameSet) -&gt; RnM (a, NameSet)
</span><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-var">bindSigTyVarsFV</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059716"><span class="hs-identifier hs-var">scoped_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM
   (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
 -&gt; RnM
      (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)),
       NameSet))
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-810"></span><span>                                   </span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (HsExpr GhcPs)
    -&gt; IOEnv
         (Env TcGblEnv TcLclEnv)
         (GenLocated SrcSpanAnnA (HsExpr GhcRn), NameSet))
-&gt; MatchGroup GhcPs (LocatedA (HsExpr GhcPs))
-&gt; RnM
     (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)), NameSet)
forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var">rnMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
-&gt; AnnFunRhs -&gt; HsMatchContext (GenLocated SrcSpanAnnN Name)
forall fn. fn -&gt; AnnFunRhs -&gt; HsMatchContext fn
</span><a href="GHC.Hs.Utils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; GenLocated SrcSpanAnnN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683059703"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059704"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnFunRhs
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>                                                </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; RnM (LHsExpr GhcRn, NameSet)
LocatedA (HsExpr GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsExpr GhcRn), NameSet)
</span><a href="GHC.Rename.Expr.html#rnLExpr"><span class="hs-identifier hs-var">rnLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
MatchGroup GhcPs (LocatedA (HsExpr GhcPs))
</span><a href="#local-6989586621683059759"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-812"></span><span>                   </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059760"><span class="hs-identifier hs-type">mg'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059761"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059762"><span class="annot"><a href="#local-6989586621683059762"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-type">getModule</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059763"><span class="annot"><a href="#local-6989586621683059763"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059719"><span class="hs-identifier hs-var">fvs1</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059755"><span class="hs-identifier hs-var">fvs2</span></a></span><span>
</span><span id="line-816"></span><span>              </span><span id="local-6989586621683059764"><span class="annot"><a href="#local-6989586621683059764"><span class="hs-identifier hs-var hs-var">fvs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#filterNameSet"><span class="hs-identifier hs-var">filterNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Name -&gt; Bool
</span><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-var">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621683059762"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059763"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-817"></span><span>                </span><span class="hs-comment">-- Keep locally-defined Names</span><span>
</span><span id="line-818"></span><span>                </span><span class="hs-comment">-- As well as dependency analysis, we need these for the</span><span>
</span><span id="line-819"></span><span>                </span><span class="hs-comment">-- MonoLocalBinds test in GHC.Tc.Gen.Bind.decideGeneralisationPlan</span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span>              </span><span id="local-6989586621683059765"><span class="annot"><a href="#local-6989586621683059765"><span class="hs-identifier hs-var hs-var">bind'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcPs
</span><a href="#local-6989586621683059702"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059718"><span class="hs-identifier hs-type">details'</span></a></span><span>
</span><span id="line-822"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059717"><span class="hs-identifier hs-type">pat'</span></a></span><span>
</span><span id="line-823"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059754"><span class="hs-identifier hs-type">dir'</span></a></span><span>
</span><span id="line-824"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#psb_ext"><span class="hs-identifier hs-var">psb_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059764"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-825"></span><span>              </span><span id="local-6989586621683059766"><span class="annot"><a href="#local-6989586621683059766"><span class="hs-identifier hs-var hs-var">selector_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConDetails
  Void (GenLocated SrcSpanAnnN Name) [RecordPatSynField GhcRn]
</span><a href="#local-6989586621683059718"><span class="hs-identifier hs-var">details'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-826"></span><span>                                 </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621683059767"><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621683059767"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-827"></span><span>                                      </span><span class="annot"><span class="annottext">(RecordPatSynField GhcRn -&gt; Name)
-&gt; [RecordPatSynField GhcRn] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Name -&gt; Name)
-&gt; (RecordPatSynField GhcRn -&gt; GenLocated SrcSpanAnnN Name)
-&gt; RecordPatSynField GhcRn
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcRn -&gt; XRec GhcRn (IdP GhcRn)
FieldOcc GhcRn -&gt; GenLocated SrcSpanAnnN Name
forall pass. FieldOcc pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Type.html#foLabel"><span class="hs-identifier hs-var">foLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcRn -&gt; GenLocated SrcSpanAnnN Name)
-&gt; (RecordPatSynField GhcRn -&gt; FieldOcc GhcRn)
-&gt; RecordPatSynField GhcRn
-&gt; GenLocated SrcSpanAnnN Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RecordPatSynField GhcRn -&gt; FieldOcc GhcRn
forall pass. RecordPatSynField pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynField"><span class="hs-identifier hs-var">recordPatSynField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621683059767"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-828"></span><span>                                 </span><span class="annot"><span class="annottext">HsConDetails
  Void (GenLocated SrcSpanAnnN Name) [RecordPatSynField GhcRn]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-829"></span><span>
</span><span id="line-830"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683059764"><span class="hs-identifier hs-type">fvs'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">`seq`</span></span><span> </span><span class="hs-comment">-- See Note [Free-variable space leak]</span><span>
</span><span id="line-831"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059765"><span class="hs-identifier hs-type">bind'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059704"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621683059766"><span class="hs-identifier hs-type">selector_names</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059719"><span class="hs-identifier hs-type">fvs1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>          </span><span class="hs-comment">-- Why fvs1?  See Note [Pattern synonym builders don't yield dependencies]</span><span>
</span><span id="line-833"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-834"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-835"></span><span>    </span><span class="hs-comment">-- See Note [Renaming pattern synonym variables]</span><span>
</span><span id="line-836"></span><span>    </span><span id="local-6989586621683059726"><span class="annot"><span class="annottext">lookupPatSynBndr :: GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="#local-6989586621683059726"><span class="hs-identifier hs-var hs-var">lookupPatSynBndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; TcM Name)
-&gt; GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; TcRn (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; TcM Name
</span><a href="GHC.Rename.Env.html#lookupLocalOccRn"><span class="hs-identifier hs-var">lookupLocalOccRn</span></a></span><span>
</span><span id="line-837"></span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="hs-comment">{-
Note [Renaming pattern synonym variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

We rename pattern synonym declarations backwards to normal to reuse
the logic already implemented for renaming patterns.

We first rename the RHS of a declaration which brings into
scope the variables bound by the pattern (as they would be
in normal function definitions). We then lookup the variables
which we want to bind in this local environment.

It is crucial that we then only lookup in the *local* environment which
only contains the variables brought into scope by the pattern and nothing
else. Amazingly no-one encountered this bug for 3 GHC versions but
it was possible to define a pattern synonym which referenced global
identifiers and worked correctly.

```
x = 5

pattern P :: Int -&gt; ()
pattern P x &lt;- _

f (P x) = x

&gt; f () = 5
```

See #13470 for the original report.

Note [Pattern synonym builders don't yield dependencies]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When renaming a pattern synonym that has an explicit builder,
references in the builder definition should not be used when
calculating dependencies. For example, consider the following pattern
synonym definition:

pattern P x &lt;- C1 x where
  P x = f (C1 x)

f (P x) = C2 x

In this case, 'P' needs to be typechecked in two passes:

1. Typecheck the pattern definition of 'P', which fully determines the
   type of 'P'. This step doesn't require knowing anything about 'f',
   since the builder definition is not looked at.

2. Typecheck the builder definition, which needs the typechecked
   definition of 'f' to be in scope; done by calls oo tcPatSynBuilderBind
   in GHC.Tc.Gen.Bind.tcValBinds.

This behaviour is implemented in 'tcValBinds', but it crucially
depends on 'P' not being put in a recursive group with 'f' (which
would make it look like a recursive pattern synonym a la 'pattern P =
P' which is unsound and rejected).

So:
 * We do not include builder fvs in the Uses returned by rnPatSynBind
   (which is then used for dependency analysis)
 * But we /do/ include them in the psb_fvs for the PatSynBind
 * In rnValBinds we record these builder uses, to avoid bogus
   unused-variable warnings (#12548)
-}</span><span>
</span><span id="line-904"></span><span>
</span><span id="line-905"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                Class/instance method bindings
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="hs-comment">{- @rnMethodBinds@ is used for the method bindings of a class and an instance
declaration.   Like @rnBinds@ but without dependency analysis.

NOTA BENE: we record each {\em binder} of a method-bind group as a free variable.
That's crucial when dealing with an instance decl:
\begin{verbatim}
        instance Foo (T a) where
           op x = ...
\end{verbatim}
This might be the {\em sole} occurrence of @op@ for an imported class @Foo@,
and unless @op@ occurs we won't treat the type signature of @op@ in the class
decl for @Foo@ as a source of instance-decl gates.  But we should!  Indeed,
in many ways the @op@ in an instance decl is just like an occurrence, not
a binder.
-}</span><span>
</span><span id="line-926"></span><span>
</span><span id="line-927"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnMethodBinds"><span class="hs-identifier hs-type">rnMethodBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                   </span><span class="hs-comment">-- True &lt;=&gt; is a class declaration</span><span>
</span><span id="line-928"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>                   </span><span class="hs-comment">-- Class name</span><span>
</span><span id="line-929"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>                 </span><span class="hs-comment">-- Type variables from the class/instance header</span><span>
</span><span id="line-930"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>         </span><span class="hs-comment">-- Binds</span><span>
</span><span id="line-931"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- and signatures/pragmas</span><span>
</span><span id="line-932"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-933"></span><span class="hs-comment">-- Used for</span><span>
</span><span id="line-934"></span><span class="hs-comment">--   * the default method bindings in a class decl</span><span>
</span><span id="line-935"></span><span class="hs-comment">--   * the method bindings in an instance decl</span><span>
</span><span id="line-936"></span><span id="rnMethodBinds"><span class="annot"><span class="annottext">rnMethodBinds :: Bool
-&gt; Name
-&gt; [Name]
-&gt; LHsBindsLR GhcPs GhcPs
-&gt; [XRec GhcPs (Sig GhcPs)]
-&gt; RnM (LHsBinds GhcRn, [LSig GhcRn], NameSet)
</span><a href="GHC.Rename.Bind.html#rnMethodBinds"><span class="hs-identifier hs-var hs-var">rnMethodBinds</span></a></span></span><span> </span><span id="local-6989586621683059769"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059769"><span class="hs-identifier hs-var">is_cls_decl</span></a></span></span><span> </span><span id="local-6989586621683059770"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059770"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span id="local-6989586621683059771"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683059771"><span class="hs-identifier hs-var">ktv_names</span></a></span></span><span> </span><span id="local-6989586621683059772"><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><a href="#local-6989586621683059772"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621683059773"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059773"><span class="hs-identifier hs-var">sigs</span></a></span></span><span>
</span><span id="line-937"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var">checkDupRdrNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs -&gt; [LIdP GhcPs]
forall idL idR. UnXRec idL =&gt; LHsBindsLR idL idR -&gt; [LIdP idL]
</span><a href="GHC.Hs.Utils.html#collectMethodBinders"><span class="hs-identifier hs-var">collectMethodBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
</span><a href="#local-6989586621683059772"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>             </span><span class="hs-comment">-- Check that the same method is not given twice in the</span><span>
</span><span id="line-939"></span><span>             </span><span class="hs-comment">-- same instance decl      instance C T where</span><span>
</span><span id="line-940"></span><span>             </span><span class="hs-comment">--                       f x = ...</span><span>
</span><span id="line-941"></span><span>             </span><span class="hs-comment">--                       g y = ...</span><span>
</span><span id="line-942"></span><span>             </span><span class="hs-comment">--                       f x = ...</span><span>
</span><span id="line-943"></span><span>             </span><span class="hs-comment">-- We must use checkDupRdrNames because the Name of the</span><span>
</span><span id="line-944"></span><span>             </span><span class="hs-comment">-- method is the Name of the class selector, whose SrcSpan</span><span>
</span><span id="line-945"></span><span>             </span><span class="hs-comment">-- points to the class declaration; and we use rnMethodBinds</span><span>
</span><span id="line-946"></span><span>             </span><span class="hs-comment">-- for instance decls too</span><span>
</span><span id="line-947"></span><span>
</span><span id="line-948"></span><span>       </span><span class="hs-comment">-- Rename the bindings LHSs</span><span>
</span><span id="line-949"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059775"><span class="annot"><a href="#local-6989586621683059775"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsBind GhcPs)
 -&gt; [LocatedA (HsBindLR GhcRn GhcPs)]
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) [LocatedA (HsBindLR GhcRn GhcPs)])
-&gt; [LocatedA (HsBindLR GhcRn GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsBind GhcPs)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LocatedA (HsBindLR GhcRn GhcPs)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; b -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldrM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
-&gt; Name
-&gt; LHsBindLR GhcPs GhcPs
-&gt; LHsBindsLR GhcRn GhcPs
-&gt; RnM (LHsBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnMethodBindLHS"><span class="hs-identifier hs-var">rnMethodBindLHS</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059769"><span class="hs-identifier hs-var">is_cls_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059770"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcPs GhcPs
[GenLocated SrcSpanAnnA (HsBind GhcPs)]
</span><a href="#local-6989586621683059772"><span class="hs-identifier hs-var">binds</span></a></span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span>       </span><span class="hs-comment">-- Rename the pragmas and signatures</span><span>
</span><span id="line-952"></span><span>       </span><span class="hs-comment">-- Annoyingly the type variables /are/ in scope for signatures, but</span><span>
</span><span id="line-953"></span><span>       </span><span class="hs-comment">-- /are not/ in scope in SPECIALISE and SPECIALISE instance pragmas.</span><span>
</span><span id="line-954"></span><span>       </span><span class="hs-comment">-- See Note [Type variable scoping in SPECIALISE pragmas].</span><span>
</span><span id="line-955"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059778"><span class="annot"><a href="#local-6989586621683059778"><span class="hs-identifier hs-var">spec_prags</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059779"><span class="annot"><a href="#local-6989586621683059779"><span class="hs-identifier hs-var">other_sigs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">partition</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#isSpecLSig"><span class="hs-identifier hs-type">isSpecLSig</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#%3C%7C%7C%3E"><span class="hs-operator hs-type">&lt;||&gt;</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#isSpecInstLSig"><span class="hs-identifier hs-type">isSpecInstLSig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059773"><span class="hs-identifier hs-type">sigs</span></a></span><span>
</span><span id="line-956"></span><span>             </span><span id="local-6989586621683059783"><span class="annot"><a href="#local-6989586621683059783"><span class="hs-identifier hs-var hs-var">bound_nms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CollectFlag GhcRn -&gt; LHsBindsLR GhcRn GhcPs -&gt; [IdP GhcRn]
forall p idR.
CollectPass p =&gt;
CollectFlag p -&gt; LHsBindsLR p idR -&gt; [IdP p]
</span><a href="GHC.Hs.Utils.html#collectHsBindsBinders"><span class="hs-identifier hs-var">collectHsBindsBinders</span></a></span><span> </span><span class="annot"><span class="annottext">CollectFlag GhcRn
forall p. CollectFlag p
</span><a href="GHC.Hs.Utils.html#CollNoDictBinders"><span class="hs-identifier hs-var">CollNoDictBinders</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
[LocatedA (HsBindLR GhcRn GhcPs)]
</span><a href="#local-6989586621683059775"><span class="hs-identifier hs-var">binds'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-957"></span><span>             </span><span id="local-6989586621683059784"><span class="annot"><a href="#local-6989586621683059784"><span class="hs-identifier hs-var hs-var">sig_ctxt</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059769"><span class="hs-identifier hs-var">is_cls_decl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#ClsDeclCtxt"><span class="hs-identifier hs-var">ClsDeclCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059770"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-958"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; HsSigCtxt
</span><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-var">InstDeclCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059783"><span class="hs-identifier hs-var">bound_nms</span></a></span><span>
</span><span id="line-959"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059787"><span class="annot"><a href="#local-6989586621683059787"><span class="hs-identifier hs-var">spec_prags'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059788"><span class="annot"><a href="#local-6989586621683059788"><span class="hs-identifier hs-var">spg_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-type">renameSigs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059784"><span class="hs-identifier hs-type">sig_ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059778"><span class="hs-identifier hs-type">spec_prags</span></a></span><span>
</span><span id="line-960"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059789"><span class="annot"><a href="#local-6989586621683059789"><span class="hs-identifier hs-var">other_sigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059790"><span class="annot"><a href="#local-6989586621683059790"><span class="hs-identifier hs-var">sig_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059771"><span class="hs-identifier hs-type">ktv_names</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-961"></span><span>                                      </span><span class="annot"><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-type">renameSigs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059784"><span class="hs-identifier hs-type">sig_ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059779"><span class="hs-identifier hs-type">other_sigs</span></a></span><span>
</span><span id="line-962"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059791"><span class="annot"><a href="#local-6989586621683059791"><span class="hs-identifier hs-var hs-var">localCompletePrags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn] -&gt; CompleteMatches
</span><a href="GHC.Rename.Bind.html#localCompletePragmas"><span class="hs-identifier hs-var">localCompletePragmas</span></a></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621683059787"><span class="hs-identifier hs-var">spec_prags'</span></a></span><span>
</span><span id="line-963"></span><span>
</span><span id="line-964"></span><span>       </span><span class="hs-comment">-- Update the TcGblEnv with renamed COMPLETE pragmas from the current</span><span>
</span><span id="line-965"></span><span>       </span><span class="hs-comment">-- module, for pattern irrefutability checking in do notation.</span><span>
</span><span id="line-966"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#updGblEnv"><span class="hs-identifier hs-type">updGblEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621683059792"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621683059792"><span class="hs-identifier hs-var">gblEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621683059792"><span class="hs-identifier hs-var">gblEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#tcg_complete_matches"><span class="hs-identifier hs-var">tcg_complete_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#tcg_complete_matches"><span class="hs-identifier hs-var">tcg_complete_matches</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059792"><span class="hs-identifier hs-type">gblEnv</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621683059791"><span class="hs-identifier hs-type">localCompletePrags</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-967"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-968"></span><span>       </span><span class="hs-comment">-- Rename the bindings RHSs.  Again there's an issue about whether the</span><span>
</span><span id="line-969"></span><span>       </span><span class="hs-comment">-- type variables from the class/instance head are in scope.</span><span>
</span><span id="line-970"></span><span>       </span><span class="hs-comment">-- Answer no in Haskell 2010, but yes if you have -XScopedTypeVariables</span><span>
</span><span id="line-971"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059793"><span class="annot"><a href="#local-6989586621683059793"><span class="hs-identifier hs-var">binds''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059794"><span class="annot"><a href="#local-6989586621683059794"><span class="hs-identifier hs-var">bind_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-type">bindSigTyVarsFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059771"><span class="hs-identifier hs-type">ktv_names</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-972"></span><span>              </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059795"><span class="annot"><a href="#local-6989586621683059795"><span class="hs-identifier hs-var">binds_w_dus</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#rnLBind"><span class="hs-identifier hs-type">rnLBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#mkScopedTvFn"><span class="hs-identifier hs-type">mkScopedTvFn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059789"><span class="hs-identifier hs-type">other_sigs'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059775"><span class="hs-identifier hs-type">binds'</span></a></span><span>
</span><span id="line-973"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059796"><span class="annot"><a href="#local-6989586621683059796"><span class="hs-identifier hs-var hs-var">bind_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)
 -&gt; NameSet -&gt; NameSet)
-&gt; NameSet
-&gt; [(GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name],
     NameSet)]
-&gt; NameSet
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621683059797"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059797"><span class="hs-identifier hs-var">fv1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059798"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059798"><span class="hs-identifier hs-var">fv2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059797"><span class="hs-identifier hs-var">fv1</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet -&gt; NameSet -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-var">`plusFV`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059798"><span class="hs-identifier hs-var">fv2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-974"></span><span>                                           </span><span class="annot"><span class="annottext">NameSet
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[(GenLocated SrcSpanAnnA (HsBindLR GhcRn GhcRn), [Name], NameSet)]
</span><a href="#local-6989586621683059795"><span class="hs-identifier hs-var">binds_w_dus</span></a></span><span>
</span><span id="line-975"></span><span>                 </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#fstOf3"><span class="hs-identifier hs-type">fstOf3</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059795"><span class="hs-identifier hs-type">binds_w_dus</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059796"><span class="hs-identifier hs-type">bind_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621683059793"><span class="hs-identifier hs-type">binds''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059787"><span class="hs-identifier hs-type">spec_prags'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621683059789"><span class="hs-identifier hs-type">other_sigs'</span></a></span><span>
</span><span id="line-978"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059790"><span class="hs-identifier hs-type">sig_fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059788"><span class="hs-identifier hs-type">spg_fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059794"><span class="hs-identifier hs-type">bind_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-979"></span><span>
</span><span id="line-980"></span><span class="hs-comment">{- Note [Type variable scoping in SPECIALISE pragmas]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When renaming the methods of a class or instance declaration, we must be careful
with the scoping of the type variables that occur in SPECIALISE and SPECIALISE instance
pragmas: the type variables from the class/instance header DO NOT scope over these,
unlike class/instance method type signatures.

Examples:

  1. SPECIALISE

    class C a where
      meth :: a
    instance C (Maybe a) where
      meth = Nothing
      {-# SPECIALISE INLINE meth :: Maybe [a] #-}

  2. SPECIALISE instance

    instance Eq a =&gt; Eq (T a) where
       (==) :: a -&gt; a -&gt; a
       {-# SPECIALISE instance Eq a =&gt; Eq (T [a]) #-}

  In both cases, the type variable `a` mentioned in the PRAGMA is NOT the same
  as the type variable `a` from the instance header.
  For example, the SPECIALISE instance pragma above is a shorthand for

      {-# SPECIALISE instance forall a. Eq a =&gt; Eq (T [a]) #-}

  which is alpha-equivalent to

      {-# SPECIALISE instance forall b. Eq b =&gt; Eq (T [b]) #-}

  This shows that the type variables are not bound in the header.

  Getting this scoping wrong can lead to out-of-scope type variable errors from
  Core Lint, see e.g. #22913.
-}</span><span>
</span><span id="line-1018"></span><span>
</span><span id="line-1019"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnMethodBindLHS"><span class="hs-identifier hs-type">rnMethodBindLHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1020"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBindLR"><span class="hs-identifier hs-type">LHsBindLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1021"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBindsLR"><span class="hs-identifier hs-type">LHsBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1022"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBindsLR"><span class="hs-identifier hs-type">LHsBindsLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1023"></span><span id="rnMethodBindLHS"><span class="annot"><span class="annottext">rnMethodBindLHS :: Bool
-&gt; Name
-&gt; LHsBindLR GhcPs GhcPs
-&gt; LHsBindsLR GhcRn GhcPs
-&gt; RnM (LHsBindsLR GhcRn GhcPs)
</span><a href="GHC.Rename.Bind.html#rnMethodBindLHS"><span class="hs-identifier hs-var hs-var">rnMethodBindLHS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059800"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059800"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059801"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059801"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683059802"><span class="annot"><span class="annottext">bind :: HsBind GhcPs
</span><a href="#local-6989586621683059802"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683059803"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059803"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059804"><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059804"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-1024"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; RnM (LHsBindsLR GhcRn GhcPs) -&gt; RnM (LHsBindsLR GhcRn GhcPs)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059801"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (LHsBindsLR GhcRn GhcPs) -&gt; RnM (LHsBindsLR GhcRn GhcPs))
-&gt; RnM (LHsBindsLR GhcRn GhcPs) -&gt; RnM (LHsBindsLR GhcRn GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1025"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059805"><span class="annot"><a href="#local-6989586621683059805"><span class="hs-identifier hs-var">sel_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; TcM Name)
-&gt; LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall a b ann.
(a -&gt; TcM b)
-&gt; GenLocated (EpAnn ann) a -&gt; TcRn (GenLocated (EpAnn ann) b)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocMA"><span class="hs-identifier hs-var">wrapLocMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc -&gt; RdrName -&gt; TcM Name
</span><a href="GHC.Rename.Env.html#lookupInstDeclBndr"><span class="hs-identifier hs-var">lookupInstDeclBndr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683059800"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;method&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059803"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1026"></span><span>                     </span><span class="hs-comment">-- We use the selector name as the binder</span><span>
</span><span id="line-1027"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059807"><span class="annot"><a href="#local-6989586621683059807"><span class="hs-identifier hs-var hs-var">bind'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621683059802"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683059805"><span class="hs-identifier hs-type">sel_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1028"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059801"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059807"><span class="hs-identifier hs-type">bind'</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621683059804"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1029"></span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- Report error for all other forms of bindings</span><span>
</span><span id="line-1031"></span><span class="hs-comment">-- This is why we use a fold rather than map</span><span>
</span><span id="line-1032"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnMethodBindLHS"><span class="hs-identifier hs-var">rnMethodBindLHS</span></a></span><span> </span><span id="local-6989586621683059808"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059808"><span class="hs-identifier hs-var">is_cls_decl</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059809"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059809"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683059810"><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621683059810"><span class="hs-identifier hs-var">bind</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059811"><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
</span><a href="#local-6989586621683059811"><span class="hs-identifier hs-var">rest</span></a></span></span><span>
</span><span id="line-1033"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683059809"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM ()) -&gt; TcRnMessage -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DeclSort -&gt; HsBind GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalClassBinding"><span class="hs-identifier hs-var">TcRnIllegalClassBinding</span></a></span><span> </span><span class="annot"><span class="annottext">DeclSort
</span><a href="#local-6989586621683059813"><span class="hs-identifier hs-var">decl_sort</span></a></span><span> </span><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621683059810"><span class="hs-identifier hs-var">bind</span></a></span><span>
</span><span id="line-1034"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsBindLR GhcRn GhcPs)]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LocatedA (HsBindLR GhcRn GhcPs)]
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LHsBindsLR GhcRn GhcPs
[LocatedA (HsBindLR GhcRn GhcPs)]
</span><a href="#local-6989586621683059811"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1036"></span><span>    </span><span id="local-6989586621683059813"><span class="annot"><span class="annottext">decl_sort :: DeclSort
</span><a href="#local-6989586621683059813"><span class="hs-identifier hs-var hs-var">decl_sort</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059808"><span class="hs-identifier hs-var">is_cls_decl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclSort
</span><a href="GHC.Tc.Errors.Types.html#ClassDeclSort"><span class="hs-identifier hs-var">ClassDeclSort</span></a></span><span>
</span><span id="line-1037"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclSort
</span><a href="GHC.Tc.Errors.Types.html#InstanceDeclSort"><span class="hs-identifier hs-var">InstanceDeclSort</span></a></span><span>
</span><span id="line-1038"></span><span>
</span><span id="line-1039"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsubsection[dep-Sigs]{Signatures (and user-pragmas for values)}
*                                                                      *
************************************************************************

@renameSigs@ checks for:
\begin{enumerate}
\item more than one sig for one thing;
\item signatures given for things not bound here;
\end{enumerate}

At the moment we don't gather free-var info from the types in
signatures.  We'd only need this if we wanted to report unused tyvars.
-}</span><span>
</span><span id="line-1055"></span><span>
</span><span id="line-1056"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-type">renameSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier hs-type">HsSigCtxt</span></a></span><span>
</span><span id="line-1057"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1058"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1059"></span><span class="hs-comment">-- Renames the signatures and performs error checks</span><span>
</span><span id="line-1060"></span><span id="renameSigs"><span class="annot"><span class="annottext">renameSigs :: HsSigCtxt
-&gt; [XRec GhcPs (Sig GhcPs)] -&gt; RnM ([LSig GhcRn], NameSet)
</span><a href="GHC.Rename.Bind.html#renameSigs"><span class="hs-identifier hs-var hs-var">renameSigs</span></a></span></span><span> </span><span id="local-6989586621683059816"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059816"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059817"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059817"><span class="hs-identifier hs-var">sigs</span></a></span></span><span>
</span><span id="line-1061"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">(NonEmpty (LocatedN RdrName, Sig GhcPs) -&gt; TcM ())
-&gt; [NonEmpty (LocatedN RdrName, Sig GhcPs)] -&gt; TcM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName, Sig GhcPs) -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#dupSigDeclErr"><span class="hs-identifier hs-var">dupSigDeclErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
-&gt; [NonEmpty (LocatedN RdrName, Sig GhcPs)]
</span><a href="GHC.Rename.Bind.html#findDupSigs"><span class="hs-identifier hs-var">findDupSigs</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059817"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1062"></span><span>
</span><span id="line-1063"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)] -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#checkDupMinimalSigs"><span class="hs-identifier hs-var">checkDupMinimalSigs</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059817"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1064"></span><span>
</span><span id="line-1065"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059821"><span class="annot"><a href="#local-6989586621683059821"><span class="hs-identifier hs-var">sigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059822"><span class="annot"><a href="#local-6989586621683059822"><span class="hs-identifier hs-var">sig_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Sig GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (Sig GhcRn), NameSet))
-&gt; [GenLocated SrcSpanAnnA (Sig GhcPs)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (Sig GhcRn)], NameSet)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, NameSet)) -&gt; f a -&gt; RnM (f b, NameSet)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Sig GhcPs -&gt; TcM (Sig GhcRn, NameSet))
-&gt; GenLocated SrcSpanAnnA (Sig GhcPs)
-&gt; RnM (GenLocated SrcSpanAnnA (Sig GhcRn), NameSet)
forall a b c ann.
(a -&gt; TcM (b, c))
-&gt; GenLocated (EpAnn ann) a -&gt; TcM (GenLocated (EpAnn ann) b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt -&gt; Sig GhcPs -&gt; TcM (Sig GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059816"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
[GenLocated SrcSpanAnnA (Sig GhcPs)]
</span><a href="#local-6989586621683059817"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1066"></span><span>
</span><span id="line-1067"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059824"><span class="annot"><a href="#local-6989586621683059824"><span class="hs-identifier hs-var">good_sigs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059825"><span class="annot"><a href="#local-6989586621683059825"><span class="hs-identifier hs-var">bad_sigs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">partition</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#okHsSig"><span class="hs-identifier hs-type">okHsSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059816"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059821"><span class="hs-identifier hs-type">sigs'</span></a></span><span>
</span><span id="line-1068"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM_</span></span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#misplacedSigErr"><span class="hs-identifier hs-type">misplacedSigErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059825"><span class="hs-identifier hs-type">bad_sigs</span></a></span><span>                 </span><span class="hs-comment">-- Misplaced</span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059824"><span class="hs-identifier hs-type">good_sigs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059822"><span class="hs-identifier hs-type">sig_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span class="hs-comment">----------------------</span><span>
</span><span id="line-1073"></span><span class="hs-comment">-- We use lookupSigOccRn in the signatures, which is a little bit unsatisfactory</span><span>
</span><span id="line-1074"></span><span class="hs-comment">-- because this won't work for:</span><span>
</span><span id="line-1075"></span><span class="hs-comment">--      instance Foo T where</span><span>
</span><span id="line-1076"></span><span class="hs-comment">--        {-# INLINE op #-}</span><span>
</span><span id="line-1077"></span><span class="hs-comment">--        Baz.op = ...</span><span>
</span><span id="line-1078"></span><span class="hs-comment">-- We'll just rename the INLINE prag to refer to whatever other 'op'</span><span>
</span><span id="line-1079"></span><span class="hs-comment">-- is in scope.  (I'm assuming that Baz.op isn't in scope unqualified.)</span><span>
</span><span id="line-1080"></span><span class="hs-comment">-- Doesn't seem worth much trouble to sort this.</span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-type">renameSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier hs-type">HsSigCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span id="renameSig"><span class="annot"><span class="annottext">renameSig :: HsSigCtxt -&gt; Sig GhcPs -&gt; TcM (Sig GhcRn, NameSet)
</span><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var hs-var">renameSig</span></a></span></span><span> </span><span id="local-6989586621683059828"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059828"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059829"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059829"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059830"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059830"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621683059831"><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><a href="#local-6989586621683059831"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059832"><span class="annot"><a href="#local-6989586621683059832"><span class="hs-identifier hs-var">new_vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name))
-&gt; [LocatedN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059828"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059829"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059830"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-1085"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683059834"><span class="annot"><a href="#local-6989586621683059834"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#TypeSigCtx"><span class="hs-identifier hs-var">TypeSigCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; SDoc
</span><a href="GHC.Rename.Bind.html#ppr_sig_bndrs"><span class="hs-identifier hs-var">ppr_sig_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059830"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059837"><span class="annot"><a href="#local-6989586621683059837"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059838"><span class="annot"><a href="#local-6989586621683059838"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier hs-type">rnHsSigWcType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059834"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059831"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1087"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059832"><span class="hs-identifier hs-type">new_vs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059837"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059838"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1088"></span><span>
</span><span id="line-1089"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059840"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059840"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059841"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059841"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059842"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059842"><span class="hs-identifier hs-var">is_deflt</span></a></span></span><span> </span><span id="local-6989586621683059843"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059843"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621683059844"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683059844"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1090"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059845"><span class="annot"><a href="#local-6989586621683059845"><span class="hs-identifier hs-var">defaultSigs_on</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DefaultSignatures</span></span><span>
</span><span id="line-1091"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059842"><span class="hs-identifier hs-type">is_deflt</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><a href="#local-6989586621683059845"><span class="hs-identifier hs-type">defaultSigs_on</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1092"></span><span>          </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUnexpectedDefaultSig"><span class="hs-identifier hs-type">TcRnUnexpectedDefaultSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059841"><span class="hs-identifier hs-type">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683059848"><span class="annot"><a href="#local-6989586621683059848"><span class="hs-identifier hs-var">new_v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-type">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059840"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059841"><span class="hs-identifier hs-type">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059843"><span class="hs-identifier hs-type">vs</span></a></span><span>
</span><span id="line-1094"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059849"><span class="annot"><a href="#local-6989586621683059849"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059850"><span class="annot"><a href="#local-6989586621683059850"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-type">rnHsSigType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059852"><span class="hs-identifier hs-type">ty_ctxt</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-type">TypeLevel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059844"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1095"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059842"><span class="hs-identifier hs-type">is_deflt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059848"><span class="hs-identifier hs-type">new_v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059849"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059850"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1096"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1097"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683059854"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059854"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059843"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-1098"></span><span>    </span><span id="local-6989586621683059852"><span class="annot"><span class="annottext">ty_ctxt :: HsDocContext
</span><a href="#local-6989586621683059852"><span class="hs-identifier hs-var hs-var">ty_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#GenericCtx"><span class="hs-identifier hs-var">GenericCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a class method signature for&quot;</span></span><span>
</span><span id="line-1099"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059854"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1100"></span><span>
</span><span id="line-1101"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecInstSig"><span class="hs-identifier hs-type">SpecInstSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;instance&quot;, EpToken &quot;#-}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059858"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621683059858"><span class="hs-identifier hs-var">src</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059859"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683059859"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1102"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsSigType GhcPs -&gt; TcM ()
</span><a href="GHC.Rename.Utils.html#checkInferredVars"><span class="hs-identifier hs-var">checkInferredVars</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683059860"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683059859"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1103"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059861"><span class="annot"><a href="#local-6989586621683059861"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059862"><span class="annot"><a href="#local-6989586621683059862"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, NameSet)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683059860"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683059859"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1104"></span><span>          </span><span class="hs-comment">-- Check if there are any nested `forall`s or contexts, which are</span><span>
</span><span id="line-1105"></span><span>          </span><span class="hs-comment">-- illegal in the type of an instance declaration (see</span><span>
</span><span id="line-1106"></span><span>          </span><span class="hs-comment">-- Note [No nested foralls or contexts in instance types] in</span><span>
</span><span id="line-1107"></span><span>          </span><span class="hs-comment">-- GHC.Hs.Type).</span><span>
</span><span id="line-1108"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#addNoNestedForallsContextsErr"><span class="hs-identifier hs-type">addNoNestedForallsContextsErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059860"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#NFC_Specialize"><span class="hs-identifier hs-type">NFC_Specialize</span></a></span><span>
</span><span id="line-1109"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#getLHsInstDeclHead"><span class="hs-identifier hs-type">getLHsInstDeclHead</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059861"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecInstSig"><span class="hs-identifier hs-type">SpecInstSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059858"><span class="hs-identifier hs-type">src</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059861"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621683059862"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1111"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1112"></span><span>    </span><span id="local-6989586621683059860"><span class="annot"><span class="annottext">doc :: HsDocContext
</span><a href="#local-6989586621683059860"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#SpecInstSigCtx"><span class="hs-identifier hs-var">SpecInstSigCtx</span></a></span><span>
</span><span id="line-1113"></span><span>
</span><span id="line-1114"></span><span class="hs-comment">-- {-# SPECIALISE #-} pragmas can refer to imported Ids</span><span>
</span><span id="line-1115"></span><span class="hs-comment">-- so, in the top-level case (when mb_names is Nothing)</span><span>
</span><span id="line-1116"></span><span class="hs-comment">-- we use lookupOccRn.  If there's both an imported and a local 'f'</span><span>
</span><span id="line-1117"></span><span class="hs-comment">-- then the SPECIALISE pragma is ambiguous, unlike all other signatures</span><span>
</span><span id="line-1118"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059866"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059866"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059867"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059867"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="annot"><span class="annottext">XSpecSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059869"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059869"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621683059870"><span class="annot"><span class="annottext">[LHsSigType GhcPs]
</span><a href="#local-6989586621683059870"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621683059871"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621683059871"><span class="hs-identifier hs-var">inl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059872"><span class="annot"><a href="#local-6989586621683059872"><span class="hs-identifier hs-var">new_v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059866"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1120"></span><span>                     </span><span class="annot"><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-type">TopSigCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall {ann}.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedOccRn"><span class="hs-identifier hs-var">lookupLocatedOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059869"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1121"></span><span>                     </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059866"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059867"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059869"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1122"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059875"><span class="annot"><a href="#local-6989586621683059875"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059876"><span class="annot"><a href="#local-6989586621683059876"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">foldM</span></span><span> </span><span class="annot"><a href="#local-6989586621683059878"><span class="hs-identifier hs-type">do_one</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059870"><span class="hs-identifier hs-type">tys</span></a></span><span>
</span><span id="line-1123"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059872"><span class="hs-identifier hs-type">new_v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059875"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059871"><span class="hs-identifier hs-type">inl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059876"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1124"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1125"></span><span>    </span><span id="local-6989586621683059879"><span class="annot"><span class="annottext">ty_ctxt :: HsDocContext
</span><a href="#local-6989586621683059879"><span class="hs-identifier hs-var hs-var">ty_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#GenericCtx"><span class="hs-identifier hs-var">GenericCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a SPECIALISE signature for&quot;</span></span><span>
</span><span id="line-1126"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059869"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>    </span><span id="local-6989586621683059878"><span class="annot"><span class="annottext">do_one :: ([GenLocated SrcSpanAnnA (HsSigType GhcRn)], NameSet)
-&gt; GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (HsSigType GhcRn)], NameSet)
</span><a href="#local-6989586621683059878"><span class="hs-identifier hs-var hs-var">do_one</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059880"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsSigType GhcRn)]
</span><a href="#local-6989586621683059880"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059881"><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621683059881"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059882"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621683059882"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1128"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059883"><span class="annot"><a href="#local-6989586621683059883"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059884"><span class="annot"><a href="#local-6989586621683059884"><span class="hs-identifier hs-var">fvs_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, NameSet)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var">rnHsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683059879"><span class="hs-identifier hs-var">ty_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621683059882"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1129"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621683059883"><span class="hs-identifier hs-type">new_ty</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621683059880"><span class="hs-identifier hs-type">tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059884"><span class="hs-identifier hs-type">fvs_ty</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059881"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1130"></span><span>
</span><span id="line-1131"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059885"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059885"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059886"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059886"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="annot"><span class="annottext">XInlineSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059888"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059888"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621683059889"><span class="annot"><span class="annottext">InlinePragma
</span><a href="#local-6989586621683059889"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059890"><span class="annot"><a href="#local-6989586621683059890"><span class="hs-identifier hs-var">new_v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059885"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059886"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059888"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1133"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059890"><span class="hs-identifier hs-type">new_v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059889"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1134"></span><span>
</span><span id="line-1135"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059891"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059891"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059892"><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621683059892"><span class="hs-identifier hs-var">fsig</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059893"><span class="annot"><a href="#local-6989586621683059893"><span class="hs-identifier hs-var">new_fsig</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt -&gt; FixitySig GhcPs -&gt; RnM (FixitySig GhcRn)
</span><a href="GHC.Rename.Bind.html#rnSrcFixityDecl"><span class="hs-identifier hs-var">rnSrcFixityDecl</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059891"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621683059892"><span class="hs-identifier hs-var">fsig</span></a></span><span>
</span><span id="line-1137"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059893"><span class="hs-identifier hs-type">new_fsig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1138"></span><span>
</span><span id="line-1139"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059894"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059894"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059895"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059895"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#MinimalSig"><span class="hs-identifier hs-type">MinimalSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059897"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621683059897"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683059898"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621683059898"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683059899"><span class="annot"><span class="annottext">BooleanFormula (LIdP GhcPs)
</span><a href="#local-6989586621683059899"><span class="hs-identifier hs-var">bf</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1140"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683059900"><span class="annot"><a href="#local-6989586621683059900"><span class="hs-identifier hs-var">new_bf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name))
-&gt; BooleanFormula (LocatedN RdrName)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (BooleanFormula (GenLocated SrcSpanAnnN Name))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; BooleanFormula a -&gt; f (BooleanFormula b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059894"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059895"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BooleanFormula (LIdP GhcPs)
BooleanFormula (LocatedN RdrName)
</span><a href="#local-6989586621683059899"><span class="hs-identifier hs-var">bf</span></a></span><span>
</span><span id="line-1141"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#MinimalSig"><span class="hs-identifier hs-type">MinimalSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059897"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059898"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059900"><span class="hs-identifier hs-type">new_bf</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059902"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059902"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059903"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059903"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059904"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059904"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621683059905"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683059905"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1144"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059906"><span class="annot"><a href="#local-6989586621683059906"><span class="hs-identifier hs-var">new_vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name))
-&gt; [LocatedN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059902"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059903"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059904"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-1145"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683059907"><span class="annot"><a href="#local-6989586621683059907"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059908"><span class="annot"><a href="#local-6989586621683059908"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-type">rnHsSigType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059909"><span class="hs-identifier hs-type">ty_ctxt</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-type">TypeLevel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059905"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-1146"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059906"><span class="hs-identifier hs-type">new_vs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059907"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059908"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1147"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1148"></span><span>    </span><span id="local-6989586621683059909"><span class="annot"><span class="annottext">ty_ctxt :: HsDocContext
</span><a href="#local-6989586621683059909"><span class="hs-identifier hs-var hs-var">ty_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; HsDocContext
</span><a href="GHC.Tc.Errors.Types.html#GenericCtx"><span class="hs-identifier hs-var">GenericCtx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;a pattern synonym signature for&quot;</span></span><span>
</span><span id="line-1149"></span><span>                          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName] -&gt; SDoc
</span><a href="GHC.Rename.Bind.html#ppr_sig_bndrs"><span class="hs-identifier hs-var">ppr_sig_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059904"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1150"></span><span>
</span><span id="line-1151"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059910"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059910"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683059911"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059911"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059913"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621683059913"><span class="hs-identifier hs-var">st</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059914"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059914"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621683059915"><span class="annot"><span class="annottext">Maybe (XRec GhcPs StringLiteral)
</span><a href="#local-6989586621683059915"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683059916"><span class="annot"><a href="#local-6989586621683059916"><span class="hs-identifier hs-var">new_v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; Sig GhcPs
-&gt; LocatedN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.Env.html#lookupSigOccRnN"><span class="hs-identifier hs-var">lookupSigOccRnN</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059910"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059911"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059914"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1153"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059913"><span class="hs-identifier hs-type">st</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059916"><span class="hs-identifier hs-type">new_v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059915"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1154"></span><span>
</span><span id="line-1155"></span><span class="hs-comment">-- COMPLETE Sigs can refer to imported IDs which is why we use</span><span>
</span><span id="line-1156"></span><span class="hs-comment">-- lookupLocatedOccRn rather than lookupSigOccRn</span><span>
</span><span id="line-1157"></span><span class="annot"><a href="GHC.Rename.Bind.html#renameSig"><span class="hs-identifier hs-var">renameSig</span></a></span><span> </span><span id="local-6989586621683059917"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059917"><span class="hs-identifier hs-var">_ctxt</span></a></span></span><span> </span><span id="local-6989586621683059918"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059918"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#CompleteMatchSig"><span class="hs-identifier hs-type">CompleteMatchSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpaLocation, Maybe TokDcolon, EpToken &quot;#-}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683059920"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621683059920"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059921"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059921"><span class="hs-identifier hs-var">bf</span></a></span></span><span> </span><span id="local-6989586621683059922"><span class="annot"><span class="annottext">Maybe (LIdP GhcPs)
</span><a href="#local-6989586621683059922"><span class="hs-identifier hs-var">mty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683059923"><span class="annot"><a href="#local-6989586621683059923"><span class="hs-identifier hs-var">new_bf</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name))
-&gt; [LocatedN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
forall {ann}.
GenLocated (EpAnn ann) RdrName
-&gt; TcRn (GenLocated (EpAnn ann) Name)
</span><a href="GHC.Rename.Env.html#lookupLocatedOccRn"><span class="hs-identifier hs-var">lookupLocatedOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059921"><span class="hs-identifier hs-var">bf</span></a></span><span>
</span><span id="line-1159"></span><span>       </span><span id="local-6989586621683059924"><span class="annot"><a href="#local-6989586621683059924"><span class="hs-identifier hs-var">new_mty</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#lookupLocatedOccRn"><span class="hs-identifier hs-type">lookupLocatedOccRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059922"><span class="hs-identifier hs-type">mty</span></a></span><span>
</span><span id="line-1160"></span><span>
</span><span id="line-1161"></span><span>       </span><span id="local-6989586621683059925"><span class="annot"><a href="#local-6989586621683059925"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#tcg_mod"><span class="hs-identifier hs-var">tcg_mod</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-type">getGblEnv</span></a></span><span>
</span><span id="line-1162"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-type">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059925"><span class="hs-identifier hs-type">this_mod</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059923"><span class="hs-identifier hs-type">new_bf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1163"></span><span>         </span><span class="hs-comment">-- Why 'any'? See Note [Orphan COMPLETE pragmas]</span><span>
</span><span id="line-1164"></span><span>         </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErrCtxt"><span class="hs-identifier hs-type">addErrCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;In&quot;</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059918"><span class="hs-identifier hs-type">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-type">failWithTc</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnOrphanCompletePragma"><span class="hs-identifier hs-type">TcRnOrphanCompletePragma</span></a></span><span>
</span><span id="line-1165"></span><span>
</span><span id="line-1166"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#CompleteMatchSig"><span class="hs-identifier hs-type">CompleteMatchSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683059920"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683059923"><span class="hs-identifier hs-type">new_bf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683059924"><span class="hs-identifier hs-type">new_mty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="hs-comment">{-
Note [Orphan COMPLETE pragmas]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We define a COMPLETE pragma to be a non-orphan if it includes at least
one conlike defined in the current module. Why is this sufficient?
Well if you have a pattern match

  case expr of
    P1 -&gt; ...
    P2 -&gt; ...
    P3 -&gt; ...

any COMPLETE pragma which mentions a conlike other than P1, P2 or P3
will not be of any use in verifying that the pattern match is
exhaustive. So as we have certainly read the interface files that
define P1, P2 and P3, we will have loaded all non-orphan COMPLETE
pragmas that could be relevant to this pattern match.

For now we simply disallow orphan COMPLETE pragmas, as the added
complexity of supporting them properly doesn't seem worthwhile.
-}</span><span>
</span><span id="line-1190"></span><span>
</span><span id="line-1191"></span><span class="annot"><a href="GHC.Rename.Bind.html#ppr_sig_bndrs"><span class="hs-identifier hs-type">ppr_sig_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-1192"></span><span id="ppr_sig_bndrs"><span class="annot"><span class="annottext">ppr_sig_bndrs :: [LocatedN RdrName] -&gt; SDoc
</span><a href="GHC.Rename.Bind.html#ppr_sig_bndrs"><span class="hs-identifier hs-var hs-var">ppr_sig_bndrs</span></a></span></span><span> </span><span id="local-6989586621683059931"><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683059931"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; SDoc) -&gt; [LocatedN RdrName] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621683059931"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span>
</span><span id="line-1194"></span><span id="local-6989586621683058796"><span class="annot"><a href="GHC.Rename.Bind.html#okHsSig"><span class="hs-identifier hs-type">okHsSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier hs-type">HsSigCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058796"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1195"></span><span id="okHsSig"><span class="annot"><span class="annottext">okHsSig :: forall (a :: Pass). HsSigCtxt -&gt; LSig (GhcPass a) -&gt; Bool
</span><a href="GHC.Rename.Bind.html#okHsSig"><span class="hs-identifier hs-var hs-var">okHsSig</span></a></span></span><span> </span><span id="local-6989586621683059932"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059932"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059933"><span class="annot"><span class="annottext">Sig (GhcPass a)
</span><a href="#local-6989586621683059933"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sig (GhcPass a)
</span><a href="#local-6989586621683059933"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683059932"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1197"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#ClsDeclCtxt"><span class="hs-identifier hs-type">ClsDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1198"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1199"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1200"></span><span>
</span><span id="line-1201"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#ClsDeclCtxt"><span class="hs-identifier hs-type">ClsDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1202"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1203"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1204"></span><span>
</span><span id="line-1205"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-type">TopSigCtxt</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1206"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1207"></span><span>
</span><span id="line-1208"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1209"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1210"></span><span>
</span><span id="line-1211"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsBootCtxt"><span class="hs-identifier hs-type">HsBootCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1212"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1213"></span><span>
</span><span id="line-1214"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-type">TopSigCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1215"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#LocalBindCtxt"><span class="hs-identifier hs-type">LocalBindCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1216"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1217"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecSig"><span class="hs-identifier hs-type">SpecSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1218"></span><span>
</span><span id="line-1219"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecInstSig"><span class="hs-identifier hs-type">SpecInstSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1220"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SpecInstSig"><span class="hs-identifier hs-type">SpecInstSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1221"></span><span>
</span><span id="line-1222"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#MinimalSig"><span class="hs-identifier hs-type">MinimalSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#ClsDeclCtxt"><span class="hs-identifier hs-type">ClsDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1223"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#MinimalSig"><span class="hs-identifier hs-type">MinimalSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsBootCtxt"><span class="hs-identifier hs-type">HsBootCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1226"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1227"></span><span>
</span><span id="line-1228"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#CompleteMatchSig"><span class="hs-identifier hs-type">CompleteMatchSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-type">TopSigCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1229"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#CompleteMatchSig"><span class="hs-identifier hs-type">CompleteMatchSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XSig"><span class="hs-identifier hs-type">XSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#TopSigCtxt"><span class="hs-identifier hs-type">TopSigCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1232"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XSig"><span class="hs-identifier hs-type">XSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#InstDeclCtxt"><span class="hs-identifier hs-type">InstDeclCtxt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1233"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#XSig"><span class="hs-identifier hs-type">XSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1234"></span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span class="hs-comment">-------------------</span><span>
</span><span id="line-1237"></span><span class="annot"><a href="GHC.Rename.Bind.html#findDupSigs"><span class="hs-identifier hs-type">findDupSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1238"></span><span class="hs-comment">-- Check for duplicates on RdrName version,</span><span>
</span><span id="line-1239"></span><span class="hs-comment">-- because renamed version has unboundName for</span><span>
</span><span id="line-1240"></span><span class="hs-comment">-- not-in-scope binders, which gives bogus dup-sig errors</span><span>
</span><span id="line-1241"></span><span class="hs-comment">-- NB: in a class decl, a 'generic' sig is not considered</span><span>
</span><span id="line-1242"></span><span class="hs-comment">--     equal to an ordinary sig, so we allow, say</span><span>
</span><span id="line-1243"></span><span class="hs-comment">--           class C a where</span><span>
</span><span id="line-1244"></span><span class="hs-comment">--             op :: a -&gt; a</span><span>
</span><span id="line-1245"></span><span class="hs-comment">--             default op :: Eq a =&gt; a -&gt; a</span><span>
</span><span id="line-1246"></span><span id="findDupSigs"><span class="annot"><span class="annottext">findDupSigs :: [XRec GhcPs (Sig GhcPs)]
-&gt; [NonEmpty (LocatedN RdrName, Sig GhcPs)]
</span><a href="GHC.Rename.Bind.html#findDupSigs"><span class="hs-identifier hs-var hs-var">findDupSigs</span></a></span></span><span> </span><span id="local-6989586621683059935"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059935"><span class="hs-identifier hs-var">sigs</span></a></span></span><span>
</span><span id="line-1247"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((LocatedN RdrName, Sig GhcPs)
 -&gt; (LocatedN RdrName, Sig GhcPs) -&gt; Bool)
-&gt; [(LocatedN RdrName, Sig GhcPs)]
-&gt; [NonEmpty (LocatedN RdrName, Sig GhcPs)]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [NonEmpty a]
</span><a href="GHC.Data.List.SetOps.html#findDupsEq"><span class="hs-identifier hs-var">findDupsEq</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName, Sig GhcPs)
-&gt; (LocatedN RdrName, Sig GhcPs) -&gt; Bool
</span><a href="#local-6989586621683059936"><span class="hs-identifier hs-var">matching_sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Sig GhcPs)
 -&gt; [(LocatedN RdrName, Sig GhcPs)])
-&gt; [GenLocated SrcSpanAnnA (Sig GhcPs)]
-&gt; [(LocatedN RdrName, Sig GhcPs)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sig GhcPs -&gt; [(LocatedN RdrName, Sig GhcPs)]
</span><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span class="annot"><span class="annottext">(Sig GhcPs -&gt; [(LocatedN RdrName, Sig GhcPs)])
-&gt; (GenLocated SrcSpanAnnA (Sig GhcPs) -&gt; Sig GhcPs)
-&gt; GenLocated SrcSpanAnnA (Sig GhcPs)
-&gt; [(LocatedN RdrName, Sig GhcPs)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcPs) -&gt; Sig GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
[GenLocated SrcSpanAnnA (Sig GhcPs)]
</span><a href="#local-6989586621683059935"><span class="hs-identifier hs-var">sigs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1248"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1249"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-type">expand_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- AZ</span><span>
</span><span id="line-1250"></span><span>    </span><span id="local-6989586621683059937"><span class="annot"><span class="annottext">expand_sig :: Sig GhcPs -&gt; [(LocatedN RdrName, Sig GhcPs)]
</span><a href="#local-6989586621683059937"><span class="hs-identifier hs-var hs-var">expand_sig</span></a></span></span><span> </span><span id="local-6989586621683059938"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059938"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><span class="annottext">XFixitySig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059939"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059939"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName]
-&gt; [Sig GhcPs] -&gt; [(LocatedN RdrName, Sig GhcPs)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059939"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sig GhcPs -&gt; [Sig GhcPs]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059938"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1251"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span id="local-6989586621683059941"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059941"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="annot"><span class="annottext">XInlineSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059942"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059942"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">InlinePragma
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059942"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059941"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1252"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span id="local-6989586621683059943"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059943"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059944"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059944"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059945"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059943"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683059945"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059945"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059944"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1253"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span id="local-6989586621683059946"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059946"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059947"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059947"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059948"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059946"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683059948"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059948"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059947"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1254"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span id="local-6989586621683059949"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059949"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059950"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683059950"><span class="hs-identifier hs-var">ns</span></a></span></span><span>  </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059951"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059949"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683059951"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621683059951"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683059950"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1255"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span id="local-6989586621683059952"><span class="annot"><span class="annottext">sig :: Sig GhcPs
</span><a href="#local-6989586621683059952"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683059953"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683059953"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs StringLiteral)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621683059953"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059952"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1256"></span><span>    </span><span class="annot"><a href="#local-6989586621683059937"><span class="hs-identifier hs-var">expand_sig</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1257"></span><span>
</span><span id="line-1258"></span><span>    </span><span class="annot"><a href="#local-6989586621683059936"><span class="hs-identifier hs-type">matching_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">--AZ</span><span>
</span><span id="line-1259"></span><span>    </span><span id="local-6989586621683059936"><span class="annot"><span class="annottext">matching_sig :: (LocatedN RdrName, Sig GhcPs)
-&gt; (LocatedN RdrName, Sig GhcPs) -&gt; Bool
</span><a href="#local-6989586621683059936"><span class="hs-identifier hs-var hs-var">matching_sig</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059954"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059954"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059955"><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059955"><span class="hs-identifier hs-var">sig1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059956"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059956"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621683059957"><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059957"><span class="hs-identifier hs-var">sig2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059954"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683059956"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs -&gt; Sig GhcPs -&gt; Bool
forall {pass} {pass}. Sig pass -&gt; Sig pass -&gt; Bool
</span><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059955"><span class="hs-identifier hs-var">sig1</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621683059957"><span class="hs-identifier hs-var">sig2</span></a></span><span>
</span><span id="line-1260"></span><span>    </span><span id="local-6989586621683059958"><span class="annot"><span class="annottext">mtch :: Sig pass -&gt; Sig pass -&gt; Bool
</span><a href="#local-6989586621683059958"><span class="hs-identifier hs-var hs-var">mtch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixSig"><span class="hs-identifier hs-type">FixSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1261"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#InlineSig"><span class="hs-identifier hs-type">InlineSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1262"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig pass
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059961"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059961"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LIdP pass]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsSigType pass
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig pass
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059962"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059962"><span class="hs-identifier hs-var">d2</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LIdP pass]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsSigType pass
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059961"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683059962"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-1264"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LIdP pass]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsSigType pass
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LIdP pass]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsSigType pass
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1265"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#SCCFunSig"><span class="hs-identifier hs-type">SCCFunSig</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1266"></span><span>    </span><span class="annot"><a href="#local-6989586621683059958"><span class="hs-identifier hs-var">mtch</span></a></span><span> </span><span class="annot"><span class="annottext">Sig pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Sig pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1267"></span><span>
</span><span id="line-1268"></span><span class="hs-comment">-- Warn about multiple MINIMAL signatures</span><span>
</span><span id="line-1269"></span><span class="annot"><a href="GHC.Rename.Bind.html#checkDupMinimalSigs"><span class="hs-identifier hs-type">checkDupMinimalSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span id="checkDupMinimalSigs"><span class="annot"><span class="annottext">checkDupMinimalSigs :: [XRec GhcPs (Sig GhcPs)] -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#checkDupMinimalSigs"><span class="hs-identifier hs-var hs-var">checkDupMinimalSigs</span></a></span></span><span> </span><span id="local-6989586621683059963"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059963"><span class="hs-identifier hs-var">sigs</span></a></span></span><span>
</span><span id="line-1271"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(XRec GhcPs (Sig GhcPs) -&gt; Bool)
-&gt; [XRec GhcPs (Sig GhcPs)] -&gt; [XRec GhcPs (Sig GhcPs)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs) -&gt; Bool
forall p. UnXRec p =&gt; LSig p -&gt; Bool
</span><a href="Language.Haskell.Syntax.Binds.html#isMinimalLSig"><span class="hs-identifier hs-var">isMinimalLSig</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059963"><span class="hs-identifier hs-var">sigs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1272"></span><span>      </span><span id="local-6989586621683059965"><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683059965"><span class="hs-identifier hs-var">sig1</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621683059966"><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683059966"><span class="hs-identifier hs-var">sig2</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621683059967"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059967"><span class="hs-identifier hs-var">otherSigs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
-&gt; XRec GhcPs (Sig GhcPs) -&gt; [XRec GhcPs (Sig GhcPs)] -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#dupMinimalSigErr"><span class="hs-identifier hs-var">dupMinimalSigErr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683059965"><span class="hs-identifier hs-var">sig1</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683059966"><span class="hs-identifier hs-var">sig2</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683059967"><span class="hs-identifier hs-var">otherSigs</span></a></span><span>
</span><span id="line-1273"></span><span>      </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcM ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1274"></span><span>
</span><span id="line-1275"></span><span class="annot"><a href="GHC.Rename.Bind.html#localCompletePragmas"><span class="hs-identifier hs-type">localCompletePragmas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.CompleteMatch.html#CompleteMatches"><span class="hs-identifier hs-type">CompleteMatches</span></a></span><span>
</span><span id="line-1276"></span><span id="localCompletePragmas"><span class="annot"><span class="annottext">localCompletePragmas :: [LSig GhcRn] -&gt; CompleteMatches
</span><a href="GHC.Rename.Bind.html#localCompletePragmas"><span class="hs-identifier hs-var hs-var">localCompletePragmas</span></a></span></span><span> </span><span id="local-6989586621683059969"><span class="annot"><span class="annottext">[LSig GhcRn]
</span><a href="#local-6989586621683059969"><span class="hs-identifier hs-var">sigs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Sig GhcRn) -&gt; Maybe CompleteMatch)
-&gt; [GenLocated SrcSpanAnnA (Sig GhcRn)] -&gt; CompleteMatches
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sig GhcRn -&gt; Maybe (CompleteMatchX (IdP GhcRn))
Sig GhcRn -&gt; Maybe CompleteMatch
</span><a href="#local-6989586621683059970"><span class="hs-identifier hs-var">getCompleteSig</span></a></span><span> </span><span class="annot"><span class="annottext">(Sig GhcRn -&gt; Maybe CompleteMatch)
-&gt; (GenLocated SrcSpanAnnA (Sig GhcRn) -&gt; Sig GhcRn)
-&gt; GenLocated SrcSpanAnnA (Sig GhcRn)
-&gt; Maybe CompleteMatch
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcRn) -&gt; Sig GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnA (Sig GhcRn)] -&gt; CompleteMatches)
-&gt; [GenLocated SrcSpanAnnA (Sig GhcRn)] -&gt; CompleteMatches
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Sig GhcRn)]
-&gt; [GenLocated SrcSpanAnnA (Sig GhcRn)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[LSig GhcRn]
[GenLocated SrcSpanAnnA (Sig GhcRn)]
</span><a href="#local-6989586621683059969"><span class="hs-identifier hs-var">sigs</span></a></span><span>
</span><span id="line-1277"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1278"></span><span>    </span><span id="local-6989586621683059970"><span class="annot"><span class="annottext">getCompleteSig :: Sig GhcRn -&gt; Maybe (CompleteMatchX (IdP GhcRn))
</span><a href="#local-6989586621683059970"><span class="hs-identifier hs-var hs-var">getCompleteSig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1279"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#CompleteMatchSig"><span class="hs-identifier hs-type">CompleteMatchSig</span></a></span><span> </span><span class="annot"><span class="annottext">XCompleteMatchSig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683059977"><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
</span><a href="#local-6989586621683059977"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span id="local-6989586621683059978"><span class="annot"><span class="annottext">Maybe (XRec GhcRn (IdP GhcRn))
</span><a href="#local-6989586621683059978"><span class="hs-identifier hs-var">mbTyCon</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1280"></span><span>        </span><span class="annot"><span class="annottext">CompleteMatchX (IdP GhcRn) -&gt; Maybe (CompleteMatchX (IdP GhcRn))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(CompleteMatchX (IdP GhcRn) -&gt; Maybe (CompleteMatchX (IdP GhcRn)))
-&gt; CompleteMatchX (IdP GhcRn) -&gt; Maybe (CompleteMatchX (IdP GhcRn))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UniqDSet (IdP GhcRn) -&gt; Maybe Name -&gt; CompleteMatchX (IdP GhcRn)
forall con. UniqDSet con -&gt; Maybe Name -&gt; CompleteMatchX con
</span><a href="GHC.Types.CompleteMatch.html#CompleteMatch"><span class="hs-identifier hs-var">CompleteMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IdP GhcRn] -&gt; UniqDSet (IdP GhcRn)
forall a. Uniquable a =&gt; [a] -&gt; UniqDSet a
</span><a href="GHC.Types.Unique.DSet.html#mkUniqDSet"><span class="hs-identifier hs-var">mkUniqDSet</span></a></span><span> </span><span class="annot"><span class="annottext">([IdP GhcRn] -&gt; UniqDSet (IdP GhcRn))
-&gt; [IdP GhcRn] -&gt; UniqDSet (IdP GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN (IdP GhcRn) -&gt; IdP GhcRn)
-&gt; [GenLocated SrcSpanAnnN (IdP GhcRn)] -&gt; [IdP GhcRn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN (IdP GhcRn) -&gt; IdP GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcRn (IdP GhcRn)]
[GenLocated SrcSpanAnnN (IdP GhcRn)]
</span><a href="#local-6989586621683059977"><span class="hs-identifier hs-var">cons</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Name -&gt; Name)
-&gt; Maybe (GenLocated SrcSpanAnnN Name) -&gt; Maybe Name
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcRn (IdP GhcRn))
Maybe (GenLocated SrcSpanAnnN Name)
</span><a href="#local-6989586621683059978"><span class="hs-identifier hs-var">mbTyCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1281"></span><span>      </span><span class="annot"><span class="annottext">Sig GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (CompleteMatchX (IdP GhcRn))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1282"></span><span>  </span><span class="hs-comment">-- SG: for some reason I haven't investigated further, the signatures come in</span><span>
</span><span id="line-1283"></span><span>  </span><span class="hs-comment">-- backwards wrt. declaration order. So we reverse them here, because it makes</span><span>
</span><span id="line-1284"></span><span>  </span><span class="hs-comment">-- a difference for incomplete match suggestions.</span><span>
</span><span id="line-1285"></span><span>
</span><span id="line-1286"></span><span>
</span><span id="line-1287"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Match}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span class="hs-keyword">type</span><span> </span><span id="AnnoBody"><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-var">AnnoBody</span></a></span></span><span> </span><span id="local-6989586621683059980"><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span></span><span>
</span><span id="line-1296"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnLW"><span class="hs-identifier hs-type">SrcSpanAnnLW</span></a></span><span>
</span><span id="line-1297"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnLW"><span class="hs-identifier hs-type">SrcSpanAnnLW</span></a></span><span>
</span><span id="line-1298"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1299"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1300"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-1302"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683059980"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1303"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1304"></span><span>
</span><span id="line-1305"></span><span class="hs-comment">-- Note [Empty MatchGroups]</span><span>
</span><span id="line-1306"></span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-1307"></span><span class="hs-comment">-- In some cases, MatchGroups are allowed to be empty. Firstly, the</span><span>
</span><span id="line-1308"></span><span class="hs-comment">-- prerequisite is that -XEmptyCase is enabled. Then you have an empty</span><span>
</span><span id="line-1309"></span><span class="hs-comment">-- MatchGroup resulting either from a case-expression:</span><span>
</span><span id="line-1310"></span><span class="hs-comment">--</span><span>
</span><span id="line-1311"></span><span class="hs-comment">--     case e of {}</span><span>
</span><span id="line-1312"></span><span class="hs-comment">--</span><span>
</span><span id="line-1313"></span><span class="hs-comment">-- or from a \case-expression:</span><span>
</span><span id="line-1314"></span><span class="hs-comment">--</span><span>
</span><span id="line-1315"></span><span class="hs-comment">--     \case {}</span><span>
</span><span id="line-1316"></span><span class="hs-comment">--</span><span>
</span><span id="line-1317"></span><span class="hs-comment">-- NB: \cases {} is not allowed, since it's not clear how many patterns this</span><span>
</span><span id="line-1318"></span><span class="hs-comment">-- should match on.</span><span>
</span><span id="line-1319"></span><span class="hs-comment">--</span><span>
</span><span id="line-1320"></span><span class="hs-comment">-- The same applies in arrow notation commands: With -XEmptyCases, it is</span><span>
</span><span id="line-1321"></span><span class="hs-comment">-- allowed in case- and \case-commands, but not \cases.</span><span>
</span><span id="line-1322"></span><span class="hs-comment">--</span><span>
</span><span id="line-1323"></span><span class="hs-comment">-- Since the lambda expressions and empty function definitions are already</span><span>
</span><span id="line-1324"></span><span class="hs-comment">-- disallowed elsewhere, here, we only need to make sure we don't accept empty</span><span>
</span><span id="line-1325"></span><span class="hs-comment">-- \cases expressions or commands. In that case, or if we encounter an empty</span><span>
</span><span id="line-1326"></span><span class="hs-comment">-- MatchGroup but -XEmptyCases is disabled, we add an error.</span><span>
</span><span id="line-1327"></span><span>
</span><span id="line-1328"></span><span id="local-6989586621683058677"><span class="annot"><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-type">rnMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1329"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1331"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058677"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1332"></span><span id="rnMatchGroup"><span class="annot"><span class="annottext">rnMatchGroup :: forall (body :: * -&gt; *).
(Outputable (body GhcPs), AnnoBody body) =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; MatchGroup GhcPs (LocatedA (body GhcPs))
-&gt; RnM (MatchGroup GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatchGroup"><span class="hs-identifier hs-var hs-var">rnMatchGroup</span></a></span></span><span> </span><span id="local-6989586621683060012"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060012"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060013"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060013"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060016"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621683060016"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span id="local-6989586621683060017"><span class="annot"><span class="annottext">[LocatedA (Match GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621683060017"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: forall p body. MatchGroup p body -&gt; XMG p body
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683060019"><span class="annot"><span class="annottext">XMG GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621683060019"><span class="hs-identifier hs-var">origin</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1333"></span><span>         </span><span class="hs-comment">-- see Note [Empty MatchGroups]</span><span>
</span><span id="line-1334"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TcRnIf TcGblEnv TcLclEnv Bool -&gt; TcM () -&gt; TcM ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="GHC.Utils.Monad.html#whenM"><span class="hs-identifier hs-var">whenM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (Match GhcPs (LocatedA (body GhcPs)))] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (Match GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621683060017"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; TcRnIf TcGblEnv TcLclEnv Bool -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TcRnIf TcGblEnv TcLclEnv Bool
</span><a href="#local-6989586621683060022"><span class="hs-identifier hs-var">mustn't_be_empty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnEmptyCase"><span class="hs-identifier hs-var">TcRnEmptyCase</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060012"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683060024"><span class="annot"><a href="#local-6989586621683060024"><span class="hs-identifier hs-var">new_ms</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060025"><span class="annot"><a href="#local-6989586621683060025"><span class="hs-identifier hs-var">ms_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (Match GhcPs (LocatedA (body GhcPs)))
 -&gt; RnM (LocatedA (Match GhcRn (LocatedA (body GhcRn))), NameSet))
-&gt; [LocatedA (Match GhcPs (LocatedA (body GhcPs)))]
-&gt; RnM ([LocatedA (Match GhcRn (LocatedA (body GhcRn)))], NameSet)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, NameSet)) -&gt; f a -&gt; RnM (f b, NameSet)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LMatch GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LMatch GhcRn (LocatedA (body GhcRn)), NameSet)
forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LMatch GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LMatch GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatch"><span class="hs-identifier hs-var">rnMatch</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060012"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060013"><span class="hs-identifier hs-var">rnBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA (Match GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621683060017"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1336"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-type">mkMatchGroup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060019"><span class="hs-identifier hs-type">origin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060016"><span class="hs-identifier hs-type">lm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060024"><span class="hs-identifier hs-type">new_ms</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683060025"><span class="hs-identifier hs-type">ms_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1337"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1338"></span><span>    </span><span id="local-6989586621683060022"><span class="annot"><span class="annottext">mustn't_be_empty :: TcRnIf TcGblEnv TcLclEnv Bool
</span><a href="#local-6989586621683060022"><span class="hs-identifier hs-var hs-var">mustn't_be_empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060012"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1339"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LamAlt"><span class="hs-identifier hs-type">LamAlt</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamCases"><span class="hs-identifier hs-var">LamCases</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1340"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArrowMatchCtxt"><span class="hs-identifier hs-type">ArrowMatchCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ArrowLamAlt"><span class="hs-identifier hs-type">ArrowLamAlt</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamCases"><span class="hs-identifier hs-var">LamCases</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1341"></span><span>      </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; TcRnIf TcGblEnv TcLclEnv Bool -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.EmptyCase</span></span><span>
</span><span id="line-1342"></span><span>
</span><span id="line-1343"></span><span id="local-6989586621683058857"><span class="annot"><a href="GHC.Rename.Bind.html#rnMatch"><span class="hs-identifier hs-type">rnMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058857"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1344"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1345"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058857"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058857"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058857"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1347"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058857"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1348"></span><span id="rnMatch"><span class="annot"><span class="annottext">rnMatch :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LMatch GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LMatch GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatch"><span class="hs-identifier hs-var hs-var">rnMatch</span></a></span></span><span> </span><span id="local-6989586621683060048"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060048"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060049"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060049"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Match GhcPs (LocatedA (body GhcPs))
 -&gt; TcM (Match GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; LocatedA (Match GhcPs (LocatedA (body GhcPs)))
-&gt; TcM (LocatedA (Match GhcRn (LocatedA (body GhcRn))), NameSet)
forall a b c ann.
(a -&gt; TcM (b, c))
-&gt; GenLocated (EpAnn ann) a -&gt; TcM (GenLocated (EpAnn ann) b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; Match GhcPs (LocatedA (body GhcPs))
-&gt; TcM (Match GhcRn (LocatedA (body GhcRn)), NameSet)
forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; Match GhcPs (LocatedA (body GhcPs))
-&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatch%27"><span class="hs-identifier hs-var">rnMatch'</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060048"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060049"><span class="hs-identifier hs-var">rnBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span id="local-6989586621683058864"><span class="annot"><a href="GHC.Rename.Bind.html#rnMatch%27"><span class="hs-identifier hs-type">rnMatch'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058864"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1352"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058864"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058864"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058864"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058864"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1355"></span><span id="rnMatch%27"><span class="annot"><span class="annottext">rnMatch' :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; Match GhcPs (LocatedA (body GhcPs))
-&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnMatch%27"><span class="hs-identifier hs-var hs-var">rnMatch'</span></a></span></span><span> </span><span id="local-6989586621683060068"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060068"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060069"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060069"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_ctxt :: forall p body. Match p body -&gt; HsMatchContext (LIdP (NoGhcTc p))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683060072"><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcPs))
</span><a href="#local-6989586621683060072"><span class="hs-identifier hs-var">mf</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; XRec p [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060074"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621683060074"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683060075"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621683060075"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: forall p body. Match p body -&gt; GRHSs p body
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683060077"><span class="annot"><span class="annottext">GRHSs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621683060077"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; [LPat GhcPs]
-&gt; ([LPat GhcRn]
    -&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet)
forall a.
HsMatchContextRn
-&gt; [LPat GhcPs]
-&gt; ([LPat GhcRn] -&gt; RnM (a, NameSet))
-&gt; RnM (a, NameSet)
</span><a href="GHC.Rename.Pat.html#rnPats"><span class="hs-identifier hs-var">rnPats</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060068"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621683060075"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">(([LPat GhcRn]
  -&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet))
 -&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; ([LPat GhcRn]
    -&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; RnM (Match GhcRn (LocatedA (body GhcRn)), NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683060079"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621683060079"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1357"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683060080"><span class="annot"><a href="#local-6989586621683060080"><span class="hs-identifier hs-var">grhss'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060081"><span class="annot"><a href="#local-6989586621683060081"><span class="hs-identifier hs-var">grhss_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHSs GhcPs (LocatedA (body GhcPs))
-&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet)
forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHSs GhcPs (LocatedA (body GhcPs))
-&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHSs"><span class="hs-identifier hs-var">rnGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060068"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060069"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcPs (LocatedA (body GhcPs))
</span><a href="#local-6989586621683060077"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-1358"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683060082"><span class="annot"><a href="#local-6989586621683060082"><span class="hs-identifier hs-var hs-var">mf'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn
HsMatchContext (GenLocated SrcSpanAnnN Name)
</span><a href="#local-6989586621683060068"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcPs))
HsMatchContext (LocatedN RdrName)
</span><a href="#local-6989586621683060072"><span class="hs-identifier hs-var">mf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1359"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mc_fun :: forall fn. HsMatchContext fn -&gt; fn
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683060085"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683060085"><span class="hs-identifier hs-var">funid</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mc_fun :: forall fn. HsMatchContext fn -&gt; fn
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060086"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683060086"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>                                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcPs))
</span><a href="#local-6989586621683060072"><span class="hs-identifier hs-var">mf</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060086"><span class="hs-identifier hs-type">lf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060085"><span class="hs-identifier hs-type">funid</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1361"></span><span>                      </span><span class="annot"><span class="annottext">(HsMatchContext (GenLocated SrcSpanAnnN Name),
 HsMatchContext (LocatedN RdrName))
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
HsMatchContext (GenLocated SrcSpanAnnN Name)
</span><a href="#local-6989586621683060068"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1362"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683060082"><span class="hs-identifier hs-type">mf'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060074"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060079"><span class="hs-identifier hs-type">pats'</span></a></span><span>
</span><span id="line-1363"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683060080"><span class="hs-identifier hs-type">grhss'</span></a></span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683060081"><span class="hs-identifier hs-type">grhss_fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsubsection{Guarded right-hand sides (GRHSs)}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1373"></span><span>
</span><span id="line-1374"></span><span id="local-6989586621683058662"><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHSs"><span class="hs-identifier hs-type">rnGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058662"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1375"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1376"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058662"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058662"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1377"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058662"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058662"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1379"></span><span id="rnGRHSs"><span class="annot"><span class="annottext">rnGRHSs :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHSs GhcPs (LocatedA (body GhcPs))
-&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHSs"><span class="hs-identifier hs-var hs-var">rnGRHSs</span></a></span></span><span> </span><span id="local-6989586621683060106"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060106"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060107"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060107"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683060109"><span class="annot"><span class="annottext">[LGRHS GhcPs (LocatedA (body GhcPs))]
</span><a href="#local-6989586621683060109"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span id="local-6989586621683060110"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621683060110"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1380"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn
    -&gt; NameSet -&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet)
forall result.
HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcRn -&gt; NameSet -&gt; RnM (result, NameSet))
-&gt; RnM (result, NameSet)
</span><a href="GHC.Rename.Bind.html#rnLocalBindsAndThen"><span class="hs-identifier hs-var">rnLocalBindsAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621683060110"><span class="hs-identifier hs-var">binds</span></a></span><span>   </span><span class="annot"><span class="annottext">((HsLocalBinds GhcRn
  -&gt; NameSet -&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet))
 -&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; (HsLocalBinds GhcRn
    -&gt; NameSet -&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; RnM (GRHSs GhcRn (LocatedA (body GhcRn)), NameSet)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683060111"><span class="annot"><span class="annottext">HsLocalBinds GhcRn
</span><a href="#local-6989586621683060111"><span class="hs-identifier hs-var">binds'</span></a></span></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1381"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683060112"><span class="annot"><a href="#local-6989586621683060112"><span class="hs-identifier hs-var">grhss'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060113"><span class="annot"><a href="#local-6989586621683060113"><span class="hs-identifier hs-var">fvGRHSs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (GRHS GhcPs (LocatedA (body GhcPs)))
 -&gt; RnM
      (GenLocated EpAnnCO (GRHS GhcRn (LocatedA (body GhcRn))), NameSet))
-&gt; [GenLocated EpAnnCO (GRHS GhcPs (LocatedA (body GhcPs)))]
-&gt; RnM
     ([GenLocated EpAnnCO (GRHS GhcRn (LocatedA (body GhcRn)))],
      NameSet)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, NameSet)) -&gt; f a -&gt; RnM (f b, NameSet)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LGRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LGRHS GhcRn (LocatedA (body GhcRn)), NameSet)
forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LGRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LGRHS GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier hs-var">rnGRHS</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060106"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060107"><span class="hs-identifier hs-var">rnBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcPs (LocatedA (body GhcPs))]
[GenLocated EpAnnCO (GRHS GhcPs (LocatedA (body GhcPs)))]
</span><a href="#local-6989586621683060109"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-1382"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-type">emptyComments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060112"><span class="hs-identifier hs-type">grhss'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060111"><span class="hs-identifier hs-type">binds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683060113"><span class="hs-identifier hs-type">fvGRHSs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>
</span><span id="line-1384"></span><span id="local-6989586621683058878"><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier hs-type">rnGRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Bind.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058878"><span class="hs-identifier hs-type">body</span></a></span><span>
</span><span id="line-1385"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1386"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058878"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058878"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LGRHS"><span class="hs-identifier hs-type">LGRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058878"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LGRHS"><span class="hs-identifier hs-type">LGRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058878"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1389"></span><span id="rnGRHS"><span class="annot"><span class="annottext">rnGRHS :: forall (body :: * -&gt; *).
AnnoBody body =&gt;
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; LGRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (LGRHS GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHS"><span class="hs-identifier hs-var hs-var">rnGRHS</span></a></span></span><span> </span><span id="local-6989586621683060120"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060120"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060121"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060121"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GRHS GhcPs (LocatedA (body GhcPs))
 -&gt; TcM (GRHS GhcRn (LocatedA (body GhcRn)), NameSet))
-&gt; GenLocated EpAnnCO (GRHS GhcPs (LocatedA (body GhcPs)))
-&gt; TcM
     (GenLocated EpAnnCO (GRHS GhcRn (LocatedA (body GhcRn))), NameSet)
forall a b c ann.
(a -&gt; TcM (b, c))
-&gt; GenLocated (EpAnn ann) a -&gt; TcM (GenLocated (EpAnn ann) b, c)
</span><a href="GHC.Tc.Utils.Monad.html#wrapLocFstMA"><span class="hs-identifier hs-var">wrapLocFstMA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHS GhcPs (LocatedA (body GhcPs))
-&gt; TcM (GRHS GhcRn (LocatedA (body GhcRn)), NameSet)
forall (body :: * -&gt; *).
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (GRHS GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHS%27"><span class="hs-identifier hs-var">rnGRHS'</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060120"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060121"><span class="hs-identifier hs-var">rnBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span id="local-6989586621683058883"><span class="annot"><a href="GHC.Rename.Bind.html#rnGRHS%27"><span class="hs-identifier hs-type">rnGRHS'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#HsMatchContextRn"><span class="hs-identifier hs-type">HsMatchContextRn</span></a></span><span>
</span><span id="line-1392"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058883"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058883"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058883"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1394"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683058883"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1395"></span><span id="rnGRHS%27"><span class="annot"><span class="annottext">rnGRHS' :: forall (body :: * -&gt; *).
HsMatchContextRn
-&gt; (LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet))
-&gt; GRHS GhcPs (LocatedA (body GhcPs))
-&gt; RnM (GRHS GhcRn (LocatedA (body GhcRn)), NameSet)
</span><a href="GHC.Rename.Bind.html#rnGRHS%27"><span class="hs-identifier hs-var hs-var">rnGRHS'</span></a></span></span><span> </span><span id="local-6989586621683060139"><span class="annot"><span class="annottext">HsMatchContextRn
</span><a href="#local-6989586621683060139"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683060140"><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060140"><span class="hs-identifier hs-var">rnBody</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHS GhcPs (LocatedA (body GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683060142"><span class="annot"><span class="annottext">[GuardLStmt GhcPs]
</span><a href="#local-6989586621683060142"><span class="hs-identifier hs-var">guards</span></a></span></span><span> </span><span id="local-6989586621683060143"><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621683060143"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1396"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683060144"><span class="annot"><a href="#local-6989586621683060144"><span class="hs-identifier hs-var">pattern_guards_allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PatternGuards</span></span><span>
</span><span id="line-1397"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621683060146"><span class="annot"><a href="#local-6989586621683060146"><span class="hs-identifier hs-var">guards'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060147"><span class="annot"><a href="#local-6989586621683060147"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060148"><span class="annot"><a href="#local-6989586621683060148"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnStmts"><span class="hs-identifier hs-type">rnStmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#PatGuard"><span class="hs-identifier hs-type">PatGuard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060139"><span class="hs-identifier hs-type">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Rename.Expr.html#rnExpr"><span class="hs-identifier hs-type">rnExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060142"><span class="hs-identifier hs-type">guards</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1398"></span><span>                                    </span><span class="annot"><span class="annottext">LocatedA (body GhcPs) -&gt; RnM (LocatedA (body GhcRn), NameSet)
</span><a href="#local-6989586621683060140"><span class="hs-identifier hs-var">rnBody</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (body GhcPs)
</span><a href="#local-6989586621683060143"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1399"></span><span>
</span><span id="line-1400"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683060144"><span class="hs-identifier hs-type">pattern_guards_allowed</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="annot"><a href="#local-6989586621683060151"><span class="hs-identifier hs-type">is_standard_guard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060146"><span class="hs-identifier hs-type">guards'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1401"></span><span>            </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Bind.html#nonStdGuardErr"><span class="hs-identifier hs-type">nonStdGuardErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060146"><span class="hs-identifier hs-type">guards'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1402"></span><span>
</span><span id="line-1403"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060146"><span class="hs-identifier hs-type">guards'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060147"><span class="hs-identifier hs-type">rhs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683060148"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1404"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-comment">-- Standard Haskell 1.4 guards are just a single boolean</span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-comment">-- expression, rather than a list of qualifiers as in the</span><span>
</span><span id="line-1407"></span><span>        </span><span class="hs-comment">-- Glasgow extension</span><span>
</span><span id="line-1408"></span><span>    </span><span id="local-6989586621683060151"><span class="annot"><span class="annottext">is_standard_guard :: [GenLocated l (StmtLR idL idR body)] -&gt; Bool
</span><a href="#local-6989586621683060151"><span class="hs-identifier hs-var hs-var">is_standard_guard</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1409"></span><span>    </span><span class="annot"><a href="#local-6989586621683060151"><span class="hs-identifier hs-var">is_standard_guard</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#BodyStmt"><span class="hs-identifier hs-type">BodyStmt</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1410"></span><span>    </span><span class="annot"><a href="#local-6989586621683060151"><span class="hs-identifier hs-var">is_standard_guard</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated l (StmtLR idL idR body)]
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
        Source-code fixity declarations
*                                                       *
*********************************************************
-}</span><span>
</span><span id="line-1419"></span><span>
</span><span id="line-1420"></span><span class="annot"><a href="GHC.Rename.Bind.html#rnSrcFixityDecl"><span class="hs-identifier hs-type">rnSrcFixityDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html#HsSigCtxt"><span class="hs-identifier hs-type">HsSigCtxt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1421"></span><span class="hs-comment">-- Rename a fixity decl, so we can put</span><span>
</span><span id="line-1422"></span><span class="hs-comment">-- the renamed decl in the renamed syntax tree</span><span>
</span><span id="line-1423"></span><span class="hs-comment">-- Errors if the thing being fixed is not defined locally.</span><span>
</span><span id="line-1424"></span><span id="rnSrcFixityDecl"><span class="annot"><span class="annottext">rnSrcFixityDecl :: HsSigCtxt -&gt; FixitySig GhcPs -&gt; RnM (FixitySig GhcRn)
</span><a href="GHC.Rename.Bind.html#rnSrcFixityDecl"><span class="hs-identifier hs-var hs-var">rnSrcFixityDecl</span></a></span></span><span> </span><span id="local-6989586621683060155"><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683060155"><span class="hs-identifier hs-var">sig_ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs -&gt; RnM (FixitySig GhcRn)
</span><a href="#local-6989586621683060156"><span class="hs-identifier hs-var">rn_decl</span></a></span><span>
</span><span id="line-1425"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1426"></span><span>    </span><span class="annot"><a href="#local-6989586621683060156"><span class="hs-identifier hs-type">rn_decl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1427"></span><span>        </span><span class="hs-comment">-- GHC extension: look up both the tycon and data con</span><span>
</span><span id="line-1428"></span><span>        </span><span class="hs-comment">-- for con-like things; hence returning a list</span><span>
</span><span id="line-1429"></span><span>        </span><span class="hs-comment">-- If neither are in scope, report an error; otherwise</span><span>
</span><span id="line-1430"></span><span>        </span><span class="hs-comment">-- return a fixity sig for each (slightly odd)</span><span>
</span><span id="line-1431"></span><span>    </span><span id="local-6989586621683060156"><span class="annot"><span class="annottext">rn_decl :: FixitySig GhcPs -&gt; RnM (FixitySig GhcRn)
</span><a href="#local-6989586621683060156"><span class="hs-identifier hs-var hs-var">rn_decl</span></a></span></span><span> </span><span id="local-6989586621683060157"><span class="annot"><span class="annottext">sig :: FixitySig GhcPs
</span><a href="#local-6989586621683060157"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span id="local-6989586621683060158"><span class="annot"><span class="annottext">XFixitySig GhcPs
</span><a href="#local-6989586621683060158"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span> </span><span id="local-6989586621683060159"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621683060159"><span class="hs-identifier hs-var">fnames</span></a></span></span><span> </span><span id="local-6989586621683060160"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683060160"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcM () -&gt; TcM ()
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ExplicitNamespaces</span></span><span> </span><span class="annot"><span class="annottext">(TcM () -&gt; TcM ()) -&gt; TcM () -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1433"></span><span>             </span><span class="annot"><span class="annottext">Bool -&gt; TcM () -&gt; TcM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XFixitySig GhcPs
NamespaceSpecifier
</span><a href="#local-6989586621683060158"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier -&gt; NamespaceSpecifier -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="GHC.Hs.Binds.html#NoNamespaceSpecifier"><span class="hs-identifier hs-var">NoNamespaceSpecifier</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM () -&gt; TcM ()) -&gt; TcM () -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1434"></span><span>             </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FixitySig GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnNamespacedFixitySigWithoutFlag"><span class="hs-identifier hs-var">TcRnNamespacedFixitySigWithoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">FixitySig GhcPs
</span><a href="#local-6989586621683060157"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>           </span><span id="local-6989586621683060165"><span class="annot"><a href="#local-6989586621683060165"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name])
-&gt; [LocatedN RdrName]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall (m :: * -&gt; *) (f :: * -&gt; *) a b.
(Monad m, Traversable f) =&gt;
(a -&gt; m [b]) -&gt; f a -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#concatMapM"><span class="hs-identifier hs-var">concatMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamespaceSpecifier
-&gt; LocatedN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683060167"><span class="hs-identifier hs-var">lookup_one</span></a></span><span> </span><span class="annot"><span class="annottext">XFixitySig GhcPs
NamespaceSpecifier
</span><a href="#local-6989586621683060158"><span class="hs-identifier hs-var">ns_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621683060159"><span class="hs-identifier hs-var">fnames</span></a></span><span>
</span><span id="line-1436"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FixitySig"><span class="hs-identifier hs-type">FixitySig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060158"><span class="hs-identifier hs-type">ns_spec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060165"><span class="hs-identifier hs-type">names</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060160"><span class="hs-identifier hs-type">fixity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1437"></span><span>
</span><span id="line-1438"></span><span>    </span><span class="annot"><a href="#local-6989586621683060167"><span class="hs-identifier hs-type">lookup_one</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Binds.html#NamespaceSpecifier"><span class="hs-identifier hs-type">NamespaceSpecifier</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1439"></span><span>    </span><span id="local-6989586621683060167"><span class="annot"><span class="annottext">lookup_one :: NamespaceSpecifier
-&gt; LocatedN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683060167"><span class="hs-identifier hs-var hs-var">lookup_one</span></a></span></span><span> </span><span id="local-6989586621683060168"><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683060168"><span class="hs-identifier hs-var">ns_spec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060169"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683060169"><span class="hs-identifier hs-var">name_loc</span></a></span></span><span> </span><span id="local-6989586621683060170"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683060170"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1440"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683060169"><span class="hs-identifier hs-var">name_loc</span></a></span><span> </span><span class="annot"><span class="annottext">(IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name])
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [GenLocated SrcSpanAnnN Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1441"></span><span>                    </span><span class="hs-comment">-- This lookup will fail if the name is not defined in the</span><span>
</span><span id="line-1442"></span><span>                    </span><span class="hs-comment">-- same binding group as this fixity declaration.</span><span>
</span><span id="line-1443"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683060171"><span class="annot"><a href="#local-6989586621683060171"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
-&gt; SDoc -&gt; NamespaceSpecifier -&gt; RdrName -&gt; RnM [(RdrName, Name)]
</span><a href="GHC.Rename.Env.html#lookupLocalTcNames"><span class="hs-identifier hs-var">lookupLocalTcNames</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigCtxt
</span><a href="#local-6989586621683060155"><span class="hs-identifier hs-var">sig_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621683060173"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">NamespaceSpecifier
</span><a href="#local-6989586621683060168"><span class="hs-identifier hs-var">ns_spec</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683060170"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-1444"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060169"><span class="hs-identifier hs-type">name_loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683060174"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683060174"><span class="annot"><a href="#local-6989586621683060174"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683060171"><span class="hs-identifier hs-type">names</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1445"></span><span>    </span><span id="local-6989586621683060173"><span class="annot"><span class="annottext">what :: SDoc
</span><a href="#local-6989586621683060173"><span class="hs-identifier hs-var hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fixity signature&quot;</span></span><span>
</span><span id="line-1446"></span><span>
</span><span id="line-1447"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Error messages}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1454"></span><span>
</span><span id="line-1455"></span><span class="annot"><a href="GHC.Rename.Bind.html#dupSigDeclErr"><span class="hs-identifier hs-type">dupSigDeclErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#Sig"><span class="hs-identifier hs-type">Sig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1456"></span><span id="dupSigDeclErr"><span class="annot"><span class="annottext">dupSigDeclErr :: NonEmpty (LocatedN RdrName, Sig GhcPs) -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#dupSigDeclErr"><span class="hs-identifier hs-var hs-var">dupSigDeclErr</span></a></span></span><span> </span><span id="local-6989586621683060178"><span class="annot"><span class="annottext">pairs :: NonEmpty (LocatedN RdrName, Sig GhcPs)
</span><a href="#local-6989586621683060178"><span class="hs-identifier hs-var">pairs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060179"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683060179"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span class="annot"><span class="annottext">[(LocatedN RdrName, Sig GhcPs)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683060179"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM ()) -&gt; TcRnMessage -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName, Sig GhcPs) -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnDuplicateSigDecl"><span class="hs-identifier hs-var">TcRnDuplicateSigDecl</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName, Sig GhcPs)
</span><a href="#local-6989586621683060178"><span class="hs-identifier hs-var">pairs</span></a></span><span>
</span><span id="line-1458"></span><span>
</span><span id="line-1459"></span><span class="annot"><a href="GHC.Rename.Bind.html#misplacedSigErr"><span class="hs-identifier hs-type">misplacedSigErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1460"></span><span id="misplacedSigErr"><span class="annot"><span class="annottext">misplacedSigErr :: LSig GhcRn -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#misplacedSigErr"><span class="hs-identifier hs-var hs-var">misplacedSigErr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683060181"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683060181"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683060182"><span class="annot"><span class="annottext">Sig GhcRn
</span><a href="#local-6989586621683060182"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683060181"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM ()) -&gt; TcRnMessage -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sig GhcRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnMisplacedSigDecl"><span class="hs-identifier hs-var">TcRnMisplacedSigDecl</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcRn
</span><a href="#local-6989586621683060182"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-1462"></span><span>
</span><span id="line-1463"></span><span id="local-6989586621683058903"><span class="annot"><a href="GHC.Rename.Bind.html#nonStdGuardErr"><span class="hs-identifier hs-type">nonStdGuardErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058903"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1464"></span><span>                   </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Stmt"><span class="hs-identifier hs-type">Stmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058903"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1465"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmtLR"><span class="hs-identifier hs-type">LStmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683058903"><span class="hs-identifier hs-type">body</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span></span><span>
</span><span id="line-1466"></span><span id="nonStdGuardErr"><span class="annot"><span class="annottext">nonStdGuardErr :: forall body.
(Outputable body, Anno (Stmt GhcRn body) ~ SrcSpanAnnA) =&gt;
[LStmtLR GhcRn GhcRn body] -&gt; TcRnMessage
</span><a href="GHC.Rename.Bind.html#nonStdGuardErr"><span class="hs-identifier hs-var hs-var">nonStdGuardErr</span></a></span></span><span> </span><span id="local-6989586621683060189"><span class="annot"><span class="annottext">[LStmtLR GhcRn GhcRn body]
</span><a href="#local-6989586621683060189"><span class="hs-identifier hs-var">guards</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonStandardGuards -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnNonStdGuards"><span class="hs-identifier hs-var">TcRnNonStdGuards</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LStmtLR GhcRn GhcRn body] -&gt; NonStandardGuards
forall body.
(Outputable body, Anno (Stmt GhcRn body) ~ SrcSpanAnnA) =&gt;
[LStmtLR GhcRn GhcRn body] -&gt; NonStandardGuards
</span><a href="GHC.Tc.Errors.Types.html#NonStandardGuards"><span class="hs-identifier hs-var">NonStandardGuards</span></a></span><span> </span><span class="annot"><span class="annottext">[LStmtLR GhcRn GhcRn body]
</span><a href="#local-6989586621683060189"><span class="hs-identifier hs-var">guards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span class="annot"><a href="GHC.Rename.Bind.html#dupMinimalSigErr"><span class="hs-identifier hs-type">dupMinimalSigErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span id="dupMinimalSigErr"><span class="annot"><span class="annottext">dupMinimalSigErr :: XRec GhcPs (Sig GhcPs)
-&gt; XRec GhcPs (Sig GhcPs) -&gt; [XRec GhcPs (Sig GhcPs)] -&gt; TcM ()
</span><a href="GHC.Rename.Bind.html#dupMinimalSigErr"><span class="hs-identifier hs-var hs-var">dupMinimalSigErr</span></a></span></span><span> </span><span id="local-6989586621683060192"><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683060192"><span class="hs-identifier hs-var">sig1</span></a></span></span><span> </span><span id="local-6989586621683060193"><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683060193"><span class="hs-identifier hs-var">sig2</span></a></span></span><span> </span><span id="local-6989586621683060194"><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683060194"><span class="hs-identifier hs-var">otherSigs</span></a></span></span><span>
</span><span id="line-1470"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcM ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Sig GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
GenLocated SrcSpanAnnA (Sig GhcPs)
</span><a href="#local-6989586621683060192"><span class="hs-identifier hs-var">sig1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM ()) -&gt; TcRnMessage -&gt; TcM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
-&gt; XRec GhcPs (Sig GhcPs)
-&gt; [XRec GhcPs (Sig GhcPs)]
-&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnDuplicateMinimalSig"><span class="hs-identifier hs-var">TcRnDuplicateMinimalSig</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683060192"><span class="hs-identifier hs-var">sig1</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (Sig GhcPs)
</span><a href="#local-6989586621683060193"><span class="hs-identifier hs-var">sig2</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (Sig GhcPs)]
</span><a href="#local-6989586621683060194"><span class="hs-identifier hs-var">otherSigs</span></a></span><span>
</span><span id="line-1471"></span></pre></body></html>