<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds           #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts    #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies        #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-comment">{-
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html"><span class="hs-identifier">GHC.Rename.HsType</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>        </span><span class="hs-comment">-- Type related stuff</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsType"><span class="hs-identifier">rnHsType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier">rnLHsType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypes"><span class="hs-identifier">rnLHsTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier">rnContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnMaybeContext"><span class="hs-identifier">rnMaybeContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier">rnLHsKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypeArgs"><span class="hs-identifier">rnLHsTypeArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier">rnHsSigType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsWcType"><span class="hs-identifier">rnHsWcType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier">rnHsTyLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier">rnHsArrowWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#HsPatSigTypeScoping"><span class="hs-identifier">HsPatSigTypeScoping</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier">rnHsSigWcType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigType"><span class="hs-identifier">rnHsPatSigType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigKind"><span class="hs-identifier">rnHsPatSigKind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#newTyVarNameRn"><span class="hs-identifier">newTyVarNameRn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnConDeclFields"><span class="hs-identifier">rnConDeclFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#lookupField"><span class="hs-identifier">lookupField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier">mkHsOpTyRn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier">rnLTyVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier">rnScaledLHsType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>        </span><span class="hs-comment">-- Precence related stuff</span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#NegationHandling"><span class="hs-identifier">NegationHandling</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier">mkOpAppRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkNegAppRn"><span class="hs-identifier">mkNegAppRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier">mkConOpPatRn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#checkPrecMatch"><span class="hs-identifier">checkPrecMatch</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#checkSectionPrec"><span class="hs-identifier">checkSectionPrec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="hs-comment">-- Binding related stuff</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier">bindHsOuterTyVarBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier">bindHsForAllTelescope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#bindLHsTyVarBndr"><span class="hs-identifier">bindLHsTyVarBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier">bindLHsTyVarBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier">WarnUnusedForalls</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier">rnImplicitTvOccs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier">bindSigTyVarsFV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier">bindHsQTyVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier">FreeKiTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier">filterInScopeM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier">extractHsTyRdrTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier">extractHsTyRdrTyVarsKindVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTysRdrTyVars"><span class="hs-identifier">extractHsTysRdrTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#extractRdrKindSigVars"><span class="hs-identifier">extractRdrKindSigVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#extractConDeclGADTDetailsTyVars"><span class="hs-identifier">extractConDeclGADTDetailsTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#extractDataDefnKindVars"><span class="hs-identifier">extractDataDefnKindVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsOuterTvBndrs"><span class="hs-identifier">extractHsOuterTvBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyArgRdrKiTyVars"><span class="hs-identifier">extractHsTyArgRdrKiTyVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#nubL"><span class="hs-identifier">nubL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#nubN"><span class="hs-identifier">nubN</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>        </span><span class="hs-comment">-- Error helpers</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier">badKindSigErr</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html"><span class="hs-identifier">GHC.Rename.Splice</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#rnSpliceType"><span class="hs-identifier">rnSpliceType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Splice.html#checkThLocalTyName"><span class="hs-identifier">checkThLocalTyName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.FVs.html"><span class="hs-identifier">GHC.Core.TyCo.FVs</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypeList"><span class="hs-identifier">tyCoVarsOfTypeList</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#isKindName"><span class="hs-identifier">isKindName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Doc.html"><span class="hs-identifier">GHC.Rename.Doc</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier">mapFvRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier">bindLocalNamesFV</span></a></span><span>
</span><span id="line-56"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier">typeAppErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier">newLocalBndrRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier">checkDupRdrNames</span></a></span><span>
</span><span id="line-57"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier">checkShadowedRdrNames</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html"><span class="hs-identifier">GHC.Rename.Fixity</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupFieldFixityRn"><span class="hs-identifier">lookupFieldFixityRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier">lookupFixityRn</span></a></span><span>
</span><span id="line-59"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupTyFixityRn"><span class="hs-identifier">lookupTyFixityRn</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html"><span class="hs-identifier">GHC.Rename.Unbound</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier">notInScopeErr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhereLooking"><span class="hs-identifier">WhereLooking</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier">WL_LocalOnly</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Ppr.html"><span class="hs-identifier">GHC.Tc.Errors.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Ppr.html#pprHsDocContext"><span class="hs-identifier">pprHsDocContext</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier">getModule</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html"><span class="hs-identifier">GHC.Types.Hint</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#UntickedPromotedThing"><span class="hs-identifier">UntickedPromotedThing</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html"><span class="hs-identifier">GHC.Types.Fixity</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier">compareFixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier">negateFixity</span></a></span><span>
</span><span id="line-76"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier">Fixity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FixityDirection"><span class="hs-identifier">FixityDirection</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#LexicalFixity"><span class="hs-identifier">LexicalFixity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier">TypeOrKind</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.LanguageExtensions.html"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html"><span class="hs-identifier">Language.Haskell.Syntax.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier">FieldLabelString</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">nubBy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">partition</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-comment">{-
These type renamers are in a separate module, rather than in (say) GHC.Rename.Module,
to break several loops.

*********************************************************
*                                                       *
    HsSigWcType and HsPatSigType (i.e with wildcards)
*                                                       *
*********************************************************
-}</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-keyword">data</span><span> </span><span id="HsPatSigTypeScoping"><span class="annot"><a href="GHC.Rename.HsType.html#HsPatSigTypeScoping"><span class="hs-identifier hs-var">HsPatSigTypeScoping</span></a></span></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="AlwaysBind"><span class="annot"><a href="GHC.Rename.HsType.html#AlwaysBind"><span class="hs-identifier hs-var">AlwaysBind</span></a></span></span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-comment">-- ^ Always bind any free tyvars of the given type, regardless of whether we</span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-comment">-- have a forall at the top.</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">-- For pattern type sigs, we /do/ want to bring those type</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- variables into scope, even if there's a forall at the top which usually</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-comment">-- stops that happening, e.g:</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-comment">-- &gt; \ (x :: forall a. a -&gt; b) -&gt; e</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-comment">-- Here we do bring 'b' into scope.</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- RULES can also use 'AlwaysBind', such as in the following example:</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">-- &gt; {-# RULES \&quot;f\&quot; forall (x :: forall a. a -&gt; b). f x = ... b ... #-}</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-comment">-- This only applies to RULES that do not explicitly bind their type</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">-- variables. If a RULE explicitly quantifies its type variables, then</span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">-- 'NeverBind' is used instead. See also</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- @Note [Pattern signature binders and scoping]@ in &quot;GHC.Hs.Type&quot;.</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NeverBind"><span class="annot"><a href="GHC.Rename.HsType.html#NeverBind"><span class="hs-identifier hs-var">NeverBind</span></a></span></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-comment">-- ^ Never bind any free tyvars. This is used for RULES that have both</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-comment">-- explicit type and term variable binders, e.g.:</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-comment">-- &gt; {-# RULES \&quot;const\&quot; forall a. forall (x :: a) y. const x y = x #-}</span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-comment">-- The presence of the type variable binder @forall a.@ implies that the</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-comment">-- free variables in the types of the term variable binders @x@ and @y@</span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-comment">-- are /not/ bound. In the example above, there are no such free variables,</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">-- but if the user had written @(y :: b)@ instead of @y@ in the term</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-comment">-- variable binders, then @b@ would be rejected for being out of scope.</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-comment">-- See also @Note [Pattern signature binders and scoping]@ in</span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-comment">-- &quot;GHC.Hs.Type&quot;.</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier hs-type">rnHsSigWcType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-135"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigWcType"><span class="hs-identifier hs-type">LHsSigWcType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-136"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigWcType"><span class="hs-identifier hs-type">LHsSigWcType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span id="rnHsSigWcType"><span class="annot"><span class="annottext">rnHsSigWcType :: HsDocContext
-&gt; LHsSigWcType GhcPs -&gt; RnM (LHsSigWcType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigWcType"><span class="hs-identifier hs-var hs-var">rnHsSigWcType</span></a></span></span><span> </span><span id="local-6989586621683054891"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054891"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-type">HsWC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hswc_body :: forall pass thing. HsWildCardBndrs pass thing -&gt; thing
</span><a href="Language.Haskell.Syntax.Type.html#hswc_body"><span class="hs-identifier hs-var">hswc_body</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621683054894"><span class="annot"><span class="annottext">sig_ty :: LHsSigType GhcPs
</span><a href="#local-6989586621683054894"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683054896"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683054896"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683054899"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683054899"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sig_body :: forall pass. HsSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683054901"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054901"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683054902"><span class="annot"><a href="#local-6989586621683054902"><span class="hs-identifier hs-var">free_vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-var">filterInScopeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsSigType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lhs_sig_ty"><span class="hs-identifier hs-var">extract_lhs_sig_ty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621683054894"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054904"><span class="annot"><a href="#local-6989586621683054904"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054905"><span class="annot"><a href="#local-6989586621683054905"><span class="hs-identifier hs-var">imp_tv_nms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#partition_nwcs"><span class="hs-identifier hs-type">partition_nwcs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054902"><span class="hs-identifier hs-type">free_vars</span></a></span><span>
</span><span id="line-141"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054907"><span class="annot"><a href="#local-6989586621683054907"><span class="hs-identifier hs-var hs-var">nwc_rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars
forall a l. Eq a =&gt; [GenLocated l a] -&gt; [GenLocated l a]
</span><a href="GHC.Rename.HsType.html#nubL"><span class="hs-identifier hs-var">nubL</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054904"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span><span>
</span><span id="line-142"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-type">bindHsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054891"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621683054905"><span class="hs-identifier hs-type">imp_tv_nms</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054899"><span class="hs-identifier hs-type">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683054908"><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621683054908"><span class="hs-identifier hs-var">outer_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054909"><span class="annot"><a href="#local-6989586621683054909"><span class="hs-identifier hs-var">wcs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054910"><span class="annot"><a href="#local-6989586621683054910"><span class="hs-identifier hs-var">body_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054911"><span class="annot"><a href="#local-6989586621683054911"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; FreeKiTyVars
-&gt; LHsType GhcPs
-&gt; RnM ([Name], LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnWcBodyType"><span class="hs-identifier hs-var">rnWcBodyType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054891"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054907"><span class="hs-identifier hs-var">nwc_rdrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054901"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-144"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-type">HsWC</span></a></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hswc_ext"><span class="hs-identifier hs-var">hswc_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683054909"><span class="hs-identifier hs-type">wcs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hswc_body"><span class="hs-identifier hs-var">hswc_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054896"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-145"></span><span>                </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_ext"><span class="hs-identifier hs-var">sig_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-146"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683054908"><span class="hs-identifier hs-type">outer_bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683054910"><span class="hs-identifier hs-type">body_ty'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">}</span><span>
</span><span id="line-147"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054911"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span id="local-6989586621683054067"><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigType"><span class="hs-identifier hs-type">rnHsPatSigType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#HsPatSigTypeScoping"><span class="hs-identifier hs-type">HsPatSigTypeScoping</span></a></span><span>
</span><span id="line-150"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-151"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-152"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054067"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054067"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-154"></span><span id="rnHsPatSigType"><span class="annot"><span class="annottext">rnHsPatSigType :: forall a.
HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigType"><span class="hs-identifier hs-var hs-var">rnHsPatSigType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
-&gt; HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a.
TypeOrKind
-&gt; HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigTyKi"><span class="hs-identifier hs-var">rnHsPatSigTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span id="local-6989586621683054918"><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigKind"><span class="hs-identifier hs-type">rnHsPatSigKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#HsPatSigTypeScoping"><span class="hs-identifier hs-type">HsPatSigTypeScoping</span></a></span><span>
</span><span id="line-157"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-158"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-159"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054918"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054918"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-161"></span><span id="rnHsPatSigKind"><span class="annot"><span class="annottext">rnHsPatSigKind :: forall a.
HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigKind"><span class="hs-identifier hs-var hs-var">rnHsPatSigKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
-&gt; HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a.
TypeOrKind
-&gt; HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigTyKi"><span class="hs-identifier hs-var">rnHsPatSigTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span id="local-6989586621683054070"><span class="annot"><a href="GHC.Rename.HsType.html#rnHsPatSigTyKi"><span class="hs-identifier hs-type">rnHsPatSigTyKi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span>
</span><span id="line-164"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#HsPatSigTypeScoping"><span class="hs-identifier hs-type">HsPatSigTypeScoping</span></a></span><span>
</span><span id="line-165"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-166"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-167"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054070"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054070"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- Used for</span><span>
</span><span id="line-170"></span><span class="hs-comment">--   - Pattern type signatures, which are only allowed with ScopedTypeVariables</span><span>
</span><span id="line-171"></span><span class="hs-comment">--   - Signatures on binders in a RULE, which are allowed even if</span><span>
</span><span id="line-172"></span><span class="hs-comment">--     ScopedTypeVariables isn't enabled</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- Wildcards are allowed</span><span>
</span><span id="line-174"></span><span class="hs-comment">--</span><span>
</span><span id="line-175"></span><span class="hs-comment">-- See Note [Pattern signature binders and scoping] in GHC.Hs.Type</span><span>
</span><span id="line-176"></span><span id="rnHsPatSigTyKi"><span class="annot"><span class="annottext">rnHsPatSigTyKi :: forall a.
TypeOrKind
-&gt; HsPatSigTypeScoping
-&gt; HsDocContext
-&gt; HsPatSigType GhcPs
-&gt; (HsPatSigType GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsPatSigTyKi"><span class="hs-identifier hs-var hs-var">rnHsPatSigTyKi</span></a></span></span><span> </span><span id="local-6989586621683054928"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683054928"><span class="hs-identifier hs-var">level</span></a></span></span><span> </span><span id="local-6989586621683054929"><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="#local-6989586621683054929"><span class="hs-identifier hs-var">scoping</span></a></span></span><span> </span><span id="local-6989586621683054930"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054930"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621683054931"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621683054931"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span> </span><span id="local-6989586621683054932"><span class="annot"><span class="annottext">HsPatSigType GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683054932"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683054933"><span class="annot"><a href="#local-6989586621683054933"><span class="hs-identifier hs-var">ty_sig_okay</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ScopedTypeVariables</span></span><span>
</span><span id="line-178"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#checkErr"><span class="hs-identifier hs-type">checkErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054933"><span class="hs-identifier hs-type">ty_sig_okay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#unexpectedPatSigTypeErr"><span class="hs-identifier hs-type">unexpectedPatSigTypeErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054931"><span class="hs-identifier hs-type">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683054938"><span class="annot"><a href="#local-6989586621683054938"><span class="hs-identifier hs-var">free_vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-type">filterInScopeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-type">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054939"><span class="hs-identifier hs-type">pat_sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054940"><span class="annot"><a href="#local-6989586621683054940"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054941"><span class="annot"><a href="#local-6989586621683054941"><span class="hs-identifier hs-var">tv_rdrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#partition_nwcs"><span class="hs-identifier hs-type">partition_nwcs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054938"><span class="hs-identifier hs-type">free_vars</span></a></span><span>
</span><span id="line-181"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054942"><span class="annot"><a href="#local-6989586621683054942"><span class="hs-identifier hs-var hs-var">nwc_rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars
forall a. Eq a =&gt; [LocatedN a] -&gt; [LocatedN a]
</span><a href="GHC.Rename.HsType.html#nubN"><span class="hs-identifier hs-var">nubN</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054940"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span><span>
</span><span id="line-182"></span><span>             </span><span id="local-6989586621683054943"><span class="annot"><a href="#local-6989586621683054943"><span class="hs-identifier hs-var hs-var">implicit_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="#local-6989586621683054929"><span class="hs-identifier hs-var">scoping</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-183"></span><span>               </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="GHC.Rename.HsType.html#AlwaysBind"><span class="hs-identifier hs-var">AlwaysBind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054941"><span class="hs-identifier hs-var">tv_rdrs</span></a></span><span>
</span><span id="line-184"></span><span>               </span><span class="annot"><span class="annottext">HsPatSigTypeScoping
</span><a href="GHC.Rename.HsType.html#NeverBind"><span class="hs-identifier hs-var">NeverBind</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-185"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier hs-type">rnImplicitTvOccs</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621683054943"><span class="hs-identifier hs-type">implicit_bndrs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683054944"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683054944"><span class="hs-identifier hs-var">imp_tvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054945"><span class="annot"><a href="#local-6989586621683054945"><span class="hs-identifier hs-var">nwcs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054946"><span class="annot"><a href="#local-6989586621683054946"><span class="hs-identifier hs-var">pat_sig_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054947"><span class="annot"><a href="#local-6989586621683054947"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
-&gt; HsDocContext
-&gt; FreeKiTyVars
-&gt; LHsType GhcPs
-&gt; RnM ([Name], LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnWcBodyTyKi"><span class="hs-identifier hs-var">rnWcBodyTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683054928"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054930"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054942"><span class="hs-identifier hs-var">nwc_rdrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054939"><span class="hs-identifier hs-var">pat_sig_ty</span></a></span><span>
</span><span id="line-187"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054949"><span class="annot"><a href="#local-6989586621683054949"><span class="hs-identifier hs-var hs-var">sig_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#HsPSRn"><span class="hs-identifier hs-type">HsPSRn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsps_nwcs :: [Name]
</span><a href="GHC.Hs.Type.html#hsps_nwcs"><span class="hs-identifier hs-var">hsps_nwcs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683054945"><span class="hs-identifier hs-var">nwcs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsps_imp_tvs :: [Name]
</span><a href="GHC.Hs.Type.html#hsps_imp_tvs"><span class="hs-identifier hs-var">hsps_imp_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683054944"><span class="hs-identifier hs-var">imp_tvs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-188"></span><span>             </span><span id="local-6989586621683054953"><span class="annot"><a href="#local-6989586621683054953"><span class="hs-identifier hs-var hs-var">sig_ty'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPS"><span class="hs-identifier hs-type">HsPS</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsps_ext :: XHsPS GhcRn
</span><a href="Language.Haskell.Syntax.Type.html#hsps_ext"><span class="hs-identifier hs-var">hsps_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XHsPS GhcRn
HsPSRn
</span><a href="#local-6989586621683054949"><span class="hs-identifier hs-var">sig_names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hsps_body :: LHsType GhcRn
</span><a href="Language.Haskell.Syntax.Type.html#hsps_body"><span class="hs-identifier hs-var">hsps_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683054946"><span class="hs-identifier hs-var">pat_sig_ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-189"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054957"><span class="annot"><a href="#local-6989586621683054957"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054958"><span class="annot"><a href="#local-6989586621683054958"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621683054932"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054953"><span class="hs-identifier hs-type">sig_ty'</span></a></span><span>
</span><span id="line-190"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054957"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054947"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054958"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>    </span><span id="local-6989586621683054939"><span class="annot"><span class="annottext">pat_sig_ty :: LHsType GhcPs
</span><a href="#local-6989586621683054939"><span class="hs-identifier hs-var hs-var">pat_sig_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs -&gt; LHsType GhcPs
forall pass. HsPatSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hsPatSigType"><span class="hs-identifier hs-var">hsPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621683054931"><span class="hs-identifier hs-var">sig_ty</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsWcType"><span class="hs-identifier hs-type">rnHsWcType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsWcType"><span class="hs-identifier hs-type">LHsWcType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsWcType"><span class="hs-identifier hs-type">LHsWcType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span id="rnHsWcType"><span class="annot"><span class="annottext">rnHsWcType :: HsDocContext -&gt; LHsWcType GhcPs -&gt; RnM (LHsWcType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsWcType"><span class="hs-identifier hs-var hs-var">rnHsWcType</span></a></span></span><span> </span><span id="local-6989586621683054961"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054961"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-type">HsWC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hswc_body :: forall pass thing. HsWildCardBndrs pass thing -&gt; thing
</span><a href="Language.Haskell.Syntax.Type.html#hswc_body"><span class="hs-identifier hs-var">hswc_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683054962"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054962"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683054963"><span class="annot"><a href="#local-6989586621683054963"><span class="hs-identifier hs-var">free_vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-var">filterInScopeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054962"><span class="hs-identifier hs-var">hs_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054964"><span class="annot"><a href="#local-6989586621683054964"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#partition_nwcs"><span class="hs-identifier hs-type">partition_nwcs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054963"><span class="hs-identifier hs-type">free_vars</span></a></span><span>
</span><span id="line-198"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054965"><span class="annot"><a href="#local-6989586621683054965"><span class="hs-identifier hs-var hs-var">nwc_rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars
forall a l. Eq a =&gt; [GenLocated l a] -&gt; [GenLocated l a]
</span><a href="GHC.Rename.HsType.html#nubL"><span class="hs-identifier hs-var">nubL</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054964"><span class="hs-identifier hs-var">nwc_rdrs'</span></a></span><span>
</span><span id="line-199"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054966"><span class="annot"><a href="#local-6989586621683054966"><span class="hs-identifier hs-var">wcs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054967"><span class="annot"><a href="#local-6989586621683054967"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054968"><span class="annot"><a href="#local-6989586621683054968"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnWcBodyType"><span class="hs-identifier hs-type">rnWcBodyType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054961"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054965"><span class="hs-identifier hs-type">nwc_rdrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054962"><span class="hs-identifier hs-type">hs_ty</span></a></span><span>
</span><span id="line-200"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054969"><span class="annot"><a href="#local-6989586621683054969"><span class="hs-identifier hs-var hs-var">sig_ty'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-type">HsWC</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hswc_ext :: XHsWC GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="Language.Haskell.Syntax.Type.html#hswc_ext"><span class="hs-identifier hs-var">hswc_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
XHsWC GhcRn (GenLocated SrcSpanAnnA (HsType GhcRn))
</span><a href="#local-6989586621683054966"><span class="hs-identifier hs-var">wcs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hswc_body :: GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="Language.Haskell.Syntax.Type.html#hswc_body"><span class="hs-identifier hs-var">hswc_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683054967"><span class="hs-identifier hs-var">hs_ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-201"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054969"><span class="hs-identifier hs-type">sig_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054968"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnWcBodyType"><span class="hs-identifier hs-type">rnWcBodyType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span id="rnWcBodyType"><span class="annot"><span class="annottext">rnWcBodyType :: HsDocContext
-&gt; FreeKiTyVars
-&gt; LHsType GhcPs
-&gt; RnM ([Name], LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnWcBodyType"><span class="hs-identifier hs-var hs-var">rnWcBodyType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
-&gt; HsDocContext
-&gt; FreeKiTyVars
-&gt; LHsType GhcPs
-&gt; RnM ([Name], LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnWcBodyTyKi"><span class="hs-identifier hs-var">rnWcBodyTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnWcBodyTyKi"><span class="hs-identifier hs-type">rnWcBodyTyKi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-209"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span id="rnWcBodyTyKi"><span class="annot"><span class="annottext">rnWcBodyTyKi :: TypeOrKind
-&gt; HsDocContext
-&gt; FreeKiTyVars
-&gt; LHsType GhcPs
-&gt; RnM ([Name], LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnWcBodyTyKi"><span class="hs-identifier hs-var hs-var">rnWcBodyTyKi</span></a></span></span><span> </span><span id="local-6989586621683054970"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683054970"><span class="hs-identifier hs-var">level</span></a></span></span><span> </span><span id="local-6989586621683054971"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054971"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683054972"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054972"><span class="hs-identifier hs-var">nwc_rdrs</span></a></span></span><span> </span><span id="local-6989586621683054973"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683054973"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683054974"><span class="annot"><a href="#local-6989586621683054974"><span class="hs-identifier hs-var">nwcs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; FreeKiTyVars -&gt; IOEnv (Env TcGblEnv TcLclEnv) [Name]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683054972"><span class="hs-identifier hs-var">nwc_rdrs</span></a></span><span>
</span><span id="line-212"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683054976"><span class="annot"><a href="#local-6989586621683054976"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RTKE"><span class="hs-identifier hs-type">RTKE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtke_level :: TypeOrKind
</span><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683054970"><span class="hs-identifier hs-var">level</span></a></span><span>
</span><span id="line-213"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_what :: RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>
</span><span id="line-214"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_nwcs :: FreeVars
</span><a href="GHC.Rename.HsType.html#rtke_nwcs"><span class="hs-identifier hs-var">rtke_nwcs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683054974"><span class="hs-identifier hs-var">nwcs</span></a></span><span>
</span><span id="line-215"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_ctxt :: HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683054971"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-216"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054984"><span class="annot"><a href="#local-6989586621683054984"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054985"><span class="annot"><a href="#local-6989586621683054985"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054974"><span class="hs-identifier hs-type">nwcs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-217"></span><span>                          </span><span class="annot"><a href="#local-6989586621683054986"><span class="hs-identifier hs-type">rn_lty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054976"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054973"><span class="hs-identifier hs-type">hs_ty</span></a></span><span>
</span><span id="line-218"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054974"><span class="hs-identifier hs-type">nwcs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054984"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054985"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>    </span><span id="local-6989586621683054986"><span class="annot"><span class="annottext">rn_lty :: RnTyKiEnv
-&gt; GenLocated (EpAnn ann) (HsType GhcPs)
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
</span><a href="#local-6989586621683054986"><span class="hs-identifier hs-var hs-var">rn_lty</span></a></span></span><span> </span><span id="local-6989586621683054989"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683054989"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683054990"><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683054990"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683054991"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683054991"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnn ann
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn ann
</span><a href="#local-6989586621683054990"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
 -&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars))
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-222"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683054993"><span class="annot"><a href="#local-6989586621683054993"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683054994"><span class="annot"><a href="#local-6989586621683054994"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="#local-6989586621683054995"><span class="hs-identifier hs-var">rn_ty</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683054989"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683054991"><span class="hs-identifier hs-var">hs_ty</span></a></span><span>
</span><span id="line-223"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054990"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054993"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683054994"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><a href="#local-6989586621683054995"><span class="hs-identifier hs-type">rn_ty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-comment">-- A lot of faff just to allow the extra-constraints wildcard to appear</span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621683054995"><span class="annot"><span class="annottext">rn_ty :: RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="#local-6989586621683054995"><span class="hs-identifier hs-var hs-var">rn_ty</span></a></span></span><span> </span><span id="local-6989586621683054996"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683054996"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_tele :: forall pass. HsType pass -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683054999"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683054999"><span class="hs-identifier hs-var">tele</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055001"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055001"><span class="hs-identifier hs-var">hs_body</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; RnM (HsType GhcRn, FreeVars)
forall a.
HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier hs-var">bindHsForAllTelescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683054996"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683054999"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">((HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
 -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; RnM (HsType GhcRn, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055002"><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621683055002"><span class="hs-identifier hs-var">tele'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-229"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055003"><span class="annot"><a href="#local-6989586621683055003"><span class="hs-identifier hs-var">hs_body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055004"><span class="annot"><a href="#local-6989586621683055004"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars)
forall {ann}.
RnTyKiEnv
-&gt; GenLocated (EpAnn ann) (HsType GhcPs)
-&gt; TcRn (GenLocated (EpAnn ann) (HsType GhcRn), FreeVars)
</span><a href="#local-6989586621683054986"><span class="hs-identifier hs-var">rn_lty</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683054996"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621683055001"><span class="hs-identifier hs-var">hs_body</span></a></span><span>
</span><span id="line-230"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_xforall"><span class="hs-identifier hs-var">hst_xforall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-231"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055002"><span class="hs-identifier hs-type">tele'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055003"><span class="hs-identifier hs-type">hs_body'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-232"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055004"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><a href="#local-6989586621683054995"><span class="hs-identifier hs-var">rn_ty</span></a></span><span> </span><span id="local-6989586621683055006"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055006"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_ctxt :: forall pass. HsType pass -&gt; LHsContext pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055009"><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621683055009"><span class="hs-identifier hs-var">cx</span></a></span></span><span> </span><span id="local-6989586621683055010"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055010"><span class="hs-identifier hs-var">hs_ctxt</span></a></span></span><span>
</span><span id="line-235"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055011"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055011"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055012"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055012"><span class="hs-identifier hs-var">hs_ctxt1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055013"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621683055013"><span class="hs-identifier hs-var">hs_ctxt_last</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; Maybe
     ([GenLocated SrcSpanAnnA (HsType GhcPs)],
      GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. [a] -&gt; Maybe ([a], a)
</span><a href="GHC.Utils.Misc.html#snocView"><span class="hs-identifier hs-var">snocView</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055010"><span class="hs-identifier hs-var">hs_ctxt</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055015"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055015"><span class="hs-identifier hs-var">lx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; LHsType GhcPs
forall (p :: Pass). LHsType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#ignoreParens"><span class="hs-identifier hs-var">ignoreParens</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621683055013"><span class="hs-identifier hs-var">hs_ctxt_last</span></a></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055018"><span class="annot"><a href="#local-6989586621683055018"><span class="hs-identifier hs-var">hs_ctxt1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055019"><span class="annot"><a href="#local-6989586621683055019"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars)
</span><a href="#local-6989586621683055020"><span class="hs-identifier hs-var">rn_top_constraint</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055006"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055012"><span class="hs-identifier hs-var">hs_ctxt1</span></a></span><span>
</span><span id="line-239"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-type">setSrcSpanA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055015"><span class="hs-identifier hs-type">lx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#checkExtraConstraintWildCard"><span class="hs-identifier hs-type">checkExtraConstraintWildCard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055006"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055012"><span class="hs-identifier hs-type">hs_ctxt1</span></a></span><span>
</span><span id="line-240"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055022"><span class="annot"><a href="#local-6989586621683055022"><span class="hs-identifier hs-var hs-var">hs_ctxt'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcRn)]
</span><a href="#local-6989586621683055018"><span class="hs-identifier hs-var">hs_ctxt1'</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcRn)]
-&gt; [GenLocated SrcSpanAnnA (HsType GhcRn)]
-&gt; [GenLocated SrcSpanAnnA (HsType GhcRn)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcRn -&gt; GenLocated SrcSpanAnnA (HsType GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055015"><span class="hs-identifier hs-var">lx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildCardTy GhcRn -&gt; HsType GhcRn
forall pass. XWildCardTy pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-var">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-241"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055023"><span class="annot"><a href="#local-6989586621683055023"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055024"><span class="annot"><a href="#local-6989586621683055024"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055006"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055011"><span class="hs-identifier hs-type">hs_ty</span></a></span><span>
</span><span id="line-242"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_xqual"><span class="hs-identifier hs-var">hst_xqual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-243"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055009"><span class="hs-identifier hs-type">cx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055022"><span class="hs-identifier hs-type">hs_ctxt'</span></a></span><span>
</span><span id="line-244"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055023"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-245"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055019"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055024"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-248"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055027"><span class="annot"><a href="#local-6989586621683055027"><span class="hs-identifier hs-var">hs_ctxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055028"><span class="annot"><a href="#local-6989586621683055028"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars)
</span><a href="#local-6989586621683055020"><span class="hs-identifier hs-var">rn_top_constraint</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055006"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055010"><span class="hs-identifier hs-var">hs_ctxt</span></a></span><span>
</span><span id="line-249"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055029"><span class="annot"><a href="#local-6989586621683055029"><span class="hs-identifier hs-var">hs_ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055030"><span class="annot"><a href="#local-6989586621683055030"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055006"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055011"><span class="hs-identifier hs-type">hs_ty</span></a></span><span>
</span><span id="line-250"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_xqual"><span class="hs-identifier hs-var">hst_xqual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-251"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055009"><span class="hs-identifier hs-type">cx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055027"><span class="hs-identifier hs-type">hs_ctxt'</span></a></span><span>
</span><span id="line-252"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055029"><span class="hs-identifier hs-type">hs_ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-253"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055028"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055030"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><a href="#local-6989586621683054995"><span class="hs-identifier hs-var">rn_ty</span></a></span><span> </span><span id="local-6989586621683055031"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055031"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055032"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055032"><span class="hs-identifier hs-var">hs_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055031"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055032"><span class="hs-identifier hs-var">hs_ty</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621683055020"><span class="annot"><span class="annottext">rn_top_constraint :: RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="#local-6989586621683055020"><span class="hs-identifier hs-var hs-var">rn_top_constraint</span></a></span></span><span> </span><span id="local-6989586621683055034"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055034"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055034"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTopConstraint"><span class="hs-identifier hs-type">RnTopConstraint</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkExtraConstraintWildCard"><span class="hs-identifier hs-type">checkExtraConstraintWildCard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsContext"><span class="hs-identifier hs-type">HsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span class="hs-comment">-- Rename the extra-constraint spot in a type signature</span><span>
</span><span id="line-263"></span><span class="hs-comment">--    (blah, _) =&gt; type</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- Check that extra-constraints are allowed at all, and</span><span>
</span><span id="line-265"></span><span class="hs-comment">-- if so that it's an anonymous wildcard</span><span>
</span><span id="line-266"></span><span id="checkExtraConstraintWildCard"><span class="annot"><span class="annottext">checkExtraConstraintWildCard :: RnTyKiEnv -&gt; HsContext GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkExtraConstraintWildCard"><span class="hs-identifier hs-var hs-var">checkExtraConstraintWildCard</span></a></span></span><span> </span><span id="local-6989586621683055036"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055036"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055037"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055037"><span class="hs-identifier hs-var">hs_ctxt</span></a></span></span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Maybe Name -&gt; Maybe BadAnonWildcardContext -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-var">checkWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055036"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055039"><span class="hs-identifier hs-var">mb_bad</span></a></span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621683055039"><span class="annot"><span class="annottext">mb_bad :: Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055039"><span class="hs-identifier hs-var hs-var">mb_bad</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#extraConstraintWildCardsAllowed"><span class="hs-identifier hs-var">extraConstraintWildCardsAllowed</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055036"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext)
-&gt; BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SoleExtraConstraintWildcardAllowed -&gt; BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#ExtraConstraintWildcardNotAllowed"><span class="hs-identifier hs-var">ExtraConstraintWildcardNotAllowed</span></a></span><span>
</span><span id="line-271"></span><span>                      </span><span class="annot"><span class="annottext">SoleExtraConstraintWildcardAllowed
</span><a href="GHC.Tc.Errors.Types.html#SoleExtraConstraintWildcardNotAllowed"><span class="hs-identifier hs-var">SoleExtraConstraintWildcardNotAllowed</span></a></span><span>
</span><span id="line-272"></span><span>             </span><span class="hs-comment">-- Currently, we do not allow wildcards in their full glory in</span><span>
</span><span id="line-273"></span><span>             </span><span class="hs-comment">-- standalone deriving declarations. We only allow a single</span><span>
</span><span id="line-274"></span><span>             </span><span class="hs-comment">-- extra-constraints wildcard &#224; la:</span><span>
</span><span id="line-275"></span><span>             </span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span>             </span><span class="hs-comment">--   deriving instance _ =&gt; Eq (Foo a)</span><span>
</span><span id="line-277"></span><span>             </span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span>             </span><span class="hs-comment">-- i.e., we don't support things like</span><span>
</span><span id="line-279"></span><span>             </span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span>             </span><span class="hs-comment">--   deriving instance (Eq a, _) =&gt; Eq (Foo a)</span><span>
</span><span id="line-281"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#DerivDeclCtx"><span class="hs-identifier hs-type">DerivDeclCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055036"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-282"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055037"><span class="hs-identifier hs-var">hs_ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext)
-&gt; BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SoleExtraConstraintWildcardAllowed -&gt; BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#ExtraConstraintWildcardNotAllowed"><span class="hs-identifier hs-var">ExtraConstraintWildcardNotAllowed</span></a></span><span>
</span><span id="line-284"></span><span>                      </span><span class="annot"><span class="annottext">SoleExtraConstraintWildcardAllowed
</span><a href="GHC.Tc.Errors.Types.html#SoleExtraConstraintWildcardAllowed"><span class="hs-identifier hs-var">SoleExtraConstraintWildcardAllowed</span></a></span><span>
</span><span id="line-285"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-286"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><a href="GHC.Rename.HsType.html#extraConstraintWildCardsAllowed"><span class="hs-identifier hs-type">extraConstraintWildCardsAllowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-289"></span><span id="extraConstraintWildCardsAllowed"><span class="annot"><span class="annottext">extraConstraintWildCardsAllowed :: RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#extraConstraintWildCardsAllowed"><span class="hs-identifier hs-var hs-var">extraConstraintWildCardsAllowed</span></a></span></span><span> </span><span id="local-6989586621683055047"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055047"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055047"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-291"></span><span>      </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TypeSigCtx"><span class="hs-identifier hs-type">TypeSigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-292"></span><span>      </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ExprWithTySigCtx"><span class="hs-identifier hs-type">ExprWithTySigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-293"></span><span>      </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#DerivDeclCtx"><span class="hs-identifier hs-type">DerivDeclCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-294"></span><span>      </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#StandaloneKindSigCtx"><span class="hs-identifier hs-type">StandaloneKindSigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>  </span><span class="hs-comment">-- See Note [Wildcards in standalone kind signatures] in &quot;GHC.Hs.Decls&quot;</span><span>
</span><span id="line-295"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="hs-comment">-- | When the NamedWildCards extension is enabled, partition_nwcs</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- removes type variables that start with an underscore from the</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- FreeKiTyVars in the argument and returns them in a separate list.</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- When the extension is disabled, the function returns the argument</span><span>
</span><span id="line-301"></span><span class="hs-comment">-- and empty list.  See Note [Renaming named wild cards]</span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.Rename.HsType.html#partition_nwcs"><span class="hs-identifier hs-type">partition_nwcs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span id="partition_nwcs"><span class="annot"><span class="annottext">partition_nwcs :: FreeKiTyVars -&gt; RnM (FreeKiTyVars, FreeKiTyVars)
</span><a href="GHC.Rename.HsType.html#partition_nwcs"><span class="hs-identifier hs-var hs-var">partition_nwcs</span></a></span></span><span> </span><span id="local-6989586621683055051"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055051"><span class="hs-identifier hs-var">free_vars</span></a></span></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055052"><span class="annot"><a href="#local-6989586621683055052"><span class="hs-identifier hs-var">wildcards_enabled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.NamedWildCards</span></span><span>
</span><span id="line-305"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-306"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621683055052"><span class="hs-identifier hs-type">wildcards_enabled</span></a></span><span>
</span><span id="line-307"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">partition</span></span><span> </span><span class="annot"><a href="#local-6989586621683055054"><span class="hs-identifier hs-type">is_wildcard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055051"><span class="hs-identifier hs-type">free_vars</span></a></span><span>
</span><span id="line-308"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055051"><span class="hs-identifier hs-type">free_vars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>     </span><span class="annot"><a href="#local-6989586621683055054"><span class="hs-identifier hs-type">is_wildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-311"></span><span>     </span><span id="local-6989586621683055054"><span class="annot"><span class="annottext">is_wildcard :: GenLocated SrcSpanAnnN RdrName -&gt; Bool
</span><a href="#local-6989586621683055054"><span class="hs-identifier hs-var hs-var">is_wildcard</span></a></span></span><span> </span><span id="local-6989586621683055055"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055055"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#startsWithUnderscore"><span class="hs-identifier hs-var">startsWithUnderscore</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055055"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-comment">{- Note [Renaming named wild cards]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Identifiers starting with an underscore are always parsed as type variables.
It is only here in the renamer that we give the special treatment.
See Note [The wildcard story for types] in GHC.Hs.Type.

It's easy!  When we collect the implicitly bound type variables, ready
to bring them into scope, and NamedWildCards is on, we partition the
variables into the ones that start with an underscore (the named
wildcards) and the rest. Then we just add them to the hswc_wcs field
of the HsWildCardBndrs structure, and we are done.


*********************************************************
*                                                       *
           HsSigType (i.e. no wildcards)
*                                                       *
****************************************************** -}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-type">rnHsSigType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-333"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span>
</span><span id="line-334"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span class="hs-comment">-- Used for source-language type signatures</span><span>
</span><span id="line-337"></span><span class="hs-comment">-- that cannot have wildcards</span><span>
</span><span id="line-338"></span><span id="rnHsSigType"><span class="annot"><span class="annottext">rnHsSigType :: HsDocContext
-&gt; TypeOrKind
-&gt; LHsSigType GhcPs
-&gt; RnM (LHsSigType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsSigType"><span class="hs-identifier hs-var hs-var">rnHsSigType</span></a></span></span><span> </span><span id="local-6989586621683055059"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055059"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621683055060"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055060"><span class="hs-identifier hs-var">level</span></a></span></span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055061"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055061"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055062"><span class="annot"><span class="annottext">sig_ty :: HsSigType GhcPs
</span><a href="#local-6989586621683055062"><span class="hs-identifier hs-var">sig_ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055063"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683055063"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sig_body :: forall pass. HsSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055064"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055064"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; RnM (LHsSigType GhcRn, FreeVars)
-&gt; RnM (LHsSigType GhcRn, FreeVars)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055061"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (LHsSigType GhcRn, FreeVars)
 -&gt; RnM (LHsSigType GhcRn, FreeVars))
-&gt; RnM (LHsSigType GhcRn, FreeVars)
-&gt; RnM (LHsSigType GhcRn, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnHsSigType&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigType GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigType GhcPs
</span><a href="#local-6989586621683055062"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683055063"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-343"></span><span>           </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsTypeOrSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPolyKinds"><span class="hs-identifier hs-var">checkPolyKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055069"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsSigType GhcPs -&gt; HsTypeOrSigType GhcPs
forall p. HsSigType p -&gt; HsTypeOrSigType p
</span><a href="GHC.Tc.Errors.Types.html#HsSigType"><span class="hs-identifier hs-var">HsSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsSigType GhcPs
</span><a href="#local-6989586621683055062"><span class="hs-identifier hs-var">sig_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>           </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055072"><span class="annot"><a href="#local-6989586621683055072"><span class="hs-identifier hs-var">imp_vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-var">filterInScopeM</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; RnM FreeKiTyVars)
-&gt; FreeKiTyVars -&gt; RnM FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055064"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-346"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-type">bindHsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055059"><span class="hs-identifier hs-type">ctx</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621683055072"><span class="hs-identifier hs-type">imp_vars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055063"><span class="hs-identifier hs-type">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055073"><span class="annot"><span class="annottext">HsOuterTyVarBndrs Specificity GhcRn
</span><a href="#local-6989586621683055073"><span class="hs-identifier hs-var">outer_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055074"><span class="annot"><a href="#local-6989586621683055074"><span class="hs-identifier hs-var">body'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055075"><span class="annot"><a href="#local-6989586621683055075"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055069"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055064"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055061"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_ext"><span class="hs-identifier hs-var">sig_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-350"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055073"><span class="hs-identifier hs-type">outer_bndrs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055074"><span class="hs-identifier hs-type">body'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-351"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055075"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621683055069"><span class="annot"><span class="annottext">env :: RnTyKiEnv
</span><a href="#local-6989586621683055069"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055059"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055060"><span class="hs-identifier hs-var">level</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">-- | Create new renamed type variables corresponding to source-level ones.</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- Duplicates are permitted, but will be removed. This is intended especially for</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- the case of handling the implicitly bound free variables of a type signature.</span><span>
</span><span id="line-358"></span><span id="local-6989586621683054081"><span id="local-6989586621683054082"><span class="annot"><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier hs-type">rnImplicitTvOccs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054081"><span class="hs-identifier hs-type">assoc</span></a></span><span>
</span><span id="line-359"></span><span>                 </span><span class="annot"><span class="hs-comment">-- ^ @'Just' _@ =&gt; an associated type decl</span></span><span>
</span><span id="line-360"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-361"></span><span>                 </span><span class="hs-comment">-- ^ Surface-syntax free vars that we will implicitly bind.</span><span>
</span><span id="line-362"></span><span>                 </span><span class="hs-comment">-- May have duplicates, which are removed here.</span><span>
</span><span id="line-363"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054082"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054082"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-365"></span><span id="rnImplicitTvOccs"><span class="annot"><span class="annottext">rnImplicitTvOccs :: forall assoc a.
Maybe assoc
-&gt; FreeKiTyVars
-&gt; ([Name] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier hs-var hs-var">rnImplicitTvOccs</span></a></span></span><span> </span><span id="local-6989586621683055089"><span class="annot"><span class="annottext">Maybe assoc
</span><a href="#local-6989586621683055089"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span id="local-6989586621683055090"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055090"><span class="hs-identifier hs-var">implicit_vs_with_dups</span></a></span></span><span> </span><span id="local-6989586621683055091"><span class="annot"><span class="annottext">[Name] -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055091"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055092"><span class="annot"><span class="annottext">implicit_vs :: FreeKiTyVars
</span><a href="#local-6989586621683055092"><span class="hs-identifier hs-var hs-var hs-var">implicit_vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars
forall a. Eq a =&gt; [LocatedN a] -&gt; [LocatedN a]
</span><a href="GHC.Rename.HsType.html#nubN"><span class="hs-identifier hs-var">nubN</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055090"><span class="hs-identifier hs-var">implicit_vs_with_dups</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rnImplicitTvOccs&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-369"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055090"><span class="hs-identifier hs-var">implicit_vs_with_dups</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055092"><span class="hs-identifier hs-var">implicit_vs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span>         </span><span class="hs-comment">-- Use the currently set SrcSpan as the new source location for each Name.</span><span>
</span><span id="line-372"></span><span>         </span><span class="hs-comment">-- See Note [Source locations for implicitly bound type variables].</span><span>
</span><span id="line-373"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055094"><span class="annot"><a href="#local-6989586621683055094"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn SrcSpan
</span><a href="GHC.Tc.Utils.Monad.html#getSrcSpanM"><span class="hs-identifier hs-var">getSrcSpanM</span></a></span><span>
</span><span id="line-374"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055096"><span class="annot"><a href="#local-6989586621683055096"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnN
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055094"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-375"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055098"><span class="annot"><a href="#local-6989586621683055098"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#newTyVarNameRnImplicit"><span class="hs-identifier hs-type">newTyVarNameRnImplicit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055089"><span class="hs-identifier hs-type">mb_assoc</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055096"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055092"><span class="hs-identifier hs-type">implicit_vs</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055098"><span class="hs-identifier hs-type">vars</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-378"></span><span>         </span><span class="annot"><a href="#local-6989586621683055091"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055098"><span class="hs-identifier hs-type">vars</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">{-
Note [Source locations for implicitly bound type variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When bringing implicitly bound type variables into scope (in rnImplicitTvOccs),
we do something peculiar: we drop the original SrcSpan attached to each
variable and replace it with the currently set SrcSpan. Moreover, this new
SrcSpan is usually /less/ precise than the original one, and that's OK. To see
why this is done, consider the following example:

  f :: a -&gt; b -&gt; a

Suppose that a warning or error message needs to point to the SrcSpans of the
binding sites for `a` and `b`. But where /are/ they bound, anyway? Technically,
they're bound by an unwritten `forall` at the front of the type signature, but
there is no SrcSpan for that. We could point to the first occurrence of `a` as
the binding site for `a`, but that would make the first occurrence of `a`
special. Moreover, we don't want IDEs to confuse binding sites and occurrences.

As a result, we make the `SrcSpan`s for `a` and `b` span the entirety of the
type signature, since the type signature implicitly carries their binding
sites. This is less precise, but more accurate.
-}</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="annot"><span class="hs-comment">{- ******************************************************
*                                                       *
           LHsType and HsType
*                                                       *
****************************************************** -}</span></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-comment">{-
rnHsType is here because we call it from loadInstDecl, and I didn't
want a gratuitous knot.
-}</span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-keyword">data</span><span> </span><span id="RnTyKiEnv"><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-var">RnTyKiEnv</span></a></span></span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RTKE"><span class="annot"><a href="GHC.Rename.HsType.html#RTKE"><span class="hs-identifier hs-var">RTKE</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="rtke_ctxt"><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var hs-var">rtke_ctxt</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-416"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="rtke_level"><span class="annot"><span class="annottext">RnTyKiEnv -&gt; TypeOrKind
</span><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var hs-var">rtke_level</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span>  </span><span class="hs-comment">-- Am I renaming a type or a kind?</span><span>
</span><span id="line-417"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="rtke_what"><span class="annot"><span class="annottext">RnTyKiEnv -&gt; RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var hs-var">rtke_what</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiWhat"><span class="hs-identifier hs-type">RnTyKiWhat</span></a></span><span>  </span><span class="hs-comment">-- And within that what am I renaming?</span><span>
</span><span id="line-418"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="rtke_nwcs"><span class="annot"><span class="annottext">RnTyKiEnv -&gt; FreeVars
</span><a href="GHC.Rename.HsType.html#rtke_nwcs"><span class="hs-identifier hs-var hs-var">rtke_nwcs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#NameSet"><span class="hs-identifier hs-type">NameSet</span></a></span><span>     </span><span class="hs-comment">-- These are the in-scope named wildcards</span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span class="hs-keyword">data</span><span> </span><span id="RnTyKiWhat"><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiWhat"><span class="hs-identifier hs-var">RnTyKiWhat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RnTypeBody"><span class="annot"><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span></span><span>
</span><span id="line-422"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="RnTopConstraint"><span class="annot"><a href="GHC.Rename.HsType.html#RnTopConstraint"><span class="hs-identifier hs-var">RnTopConstraint</span></a></span></span><span>   </span><span class="hs-comment">-- Top-level context of HsSigWcTypes</span><span>
</span><span id="line-423"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span id="RnConstraint"><span class="annot"><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-var">RnConstraint</span></a></span></span><span>      </span><span class="hs-comment">-- All other constraints</span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-426"></span><span>  </span><span id="local-6989586621683055116"><span class="annot"><span class="annottext">ppr :: RnTyKiEnv -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#RTKE"><span class="hs-identifier hs-type">RTKE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtke_level :: RnTyKiEnv -&gt; TypeOrKind
</span><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055117"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055117"><span class="hs-identifier hs-var">lev</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_what :: RnTyKiEnv -&gt; RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055118"><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="#local-6989586621683055118"><span class="hs-identifier hs-var">what</span></a></span></span><span>
</span><span id="line-427"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_nwcs :: RnTyKiEnv -&gt; FreeVars
</span><a href="GHC.Rename.HsType.html#rtke_nwcs"><span class="hs-identifier hs-var">rtke_nwcs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055119"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055119"><span class="hs-identifier hs-var">wcs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_ctxt :: RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055120"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055120"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RTKE&quot;</span></span><span>
</span><span id="line-429"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TypeOrKind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055117"><span class="hs-identifier hs-var">lev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="#local-6989586621683055118"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055119"><span class="hs-identifier hs-var">wcs</span></a></span><span>
</span><span id="line-430"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; SDoc
</span><a href="GHC.Tc.Errors.Ppr.html#pprHsDocContext"><span class="hs-identifier hs-var">pprHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055120"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiWhat"><span class="hs-identifier hs-type">RnTyKiWhat</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-433"></span><span>  </span><span id="local-6989586621683055129"><span class="annot"><span class="annottext">ppr :: RnTyKiWhat -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RnTypeBody&quot;</span></span><span>
</span><span id="line-434"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTopConstraint"><span class="hs-identifier hs-var">RnTopConstraint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RnTopConstraint&quot;</span></span><span>
</span><span id="line-435"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-var">RnConstraint</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RnConstraint&quot;</span></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-type">mkTyKiEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrKind"><span class="hs-identifier hs-type">TypeOrKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiWhat"><span class="hs-identifier hs-type">RnTyKiWhat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span>
</span><span id="line-438"></span><span id="mkTyKiEnv"><span class="annot"><span class="annottext">mkTyKiEnv :: HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var hs-var">mkTyKiEnv</span></a></span></span><span> </span><span id="local-6989586621683055130"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055130"><span class="hs-identifier hs-var">cxt</span></a></span></span><span> </span><span id="local-6989586621683055131"><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055131"><span class="hs-identifier hs-var">level</span></a></span></span><span> </span><span id="local-6989586621683055132"><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="#local-6989586621683055132"><span class="hs-identifier hs-var">what</span></a></span></span><span>
</span><span id="line-439"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RTKE"><span class="hs-identifier hs-type">RTKE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtke_level :: TypeOrKind
</span><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="#local-6989586621683055131"><span class="hs-identifier hs-var">level</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_nwcs :: FreeVars
</span><a href="GHC.Rename.HsType.html#rtke_nwcs"><span class="hs-identifier hs-var">rtke_nwcs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span>
</span><span id="line-440"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_what :: RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="#local-6989586621683055132"><span class="hs-identifier hs-var">what</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rtke_ctxt :: HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055130"><span class="hs-identifier hs-var">cxt</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="annot"><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-type">isRnKindLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-443"></span><span id="isRnKindLevel"><span class="annot"><span class="annottext">isRnKindLevel :: RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var hs-var">isRnKindLevel</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#RTKE"><span class="hs-identifier hs-type">RTKE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rtke_level :: RnTyKiEnv -&gt; TypeOrKind
</span><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-444"></span><span class="annot"><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span>                                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-447"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-type">rnLHsType</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span id="rnLHsType"><span class="annot"><span class="annottext">rnLHsType :: HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var hs-var">rnLHsType</span></a></span></span><span> </span><span id="local-6989586621683055135"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055135"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683055136"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055136"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055135"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055136"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypes"><span class="hs-identifier hs-type">rnLHsTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span id="rnLHsTypes"><span class="annot"><span class="annottext">rnLHsTypes :: HsDocContext -&gt; HsContext GhcPs -&gt; RnM ([LHsType GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypes"><span class="hs-identifier hs-var hs-var">rnLHsTypes</span></a></span></span><span> </span><span id="local-6989586621683055137"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055137"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055138"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055138"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var">rnLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055137"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055138"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-type">rnScaledLHsType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span id="rnScaledLHsType"><span class="annot"><span class="annottext">rnScaledLHsType :: HsDocContext
-&gt; HsScaled GhcPs (LHsType GhcPs)
-&gt; RnM (HsScaled GhcRn (LHsType GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnScaledLHsType"><span class="hs-identifier hs-var hs-var">rnScaledLHsType</span></a></span></span><span> </span><span id="local-6989586621683055139"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055139"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span id="local-6989586621683055141"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683055141"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621683055142"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055142"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621683055143"><span class="annot"><a href="#local-6989586621683055143"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055144"><span class="annot"><a href="#local-6989586621683055144"><span class="hs-identifier hs-var">fvs_w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsArrow GhcPs -&gt; RnM (HsArrow GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsArrow"><span class="hs-identifier hs-var">rnHsArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055139"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683055141"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621683055146"><span class="annot"><a href="#local-6989586621683055146"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055147"><span class="annot"><a href="#local-6989586621683055147"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-type">rnLHsType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055139"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055142"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055143"><span class="hs-identifier hs-type">w'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055146"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055147"><span class="hs-identifier hs-type">fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055144"><span class="hs-identifier hs-type">fvs_w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsType"><span class="hs-identifier hs-type">rnHsType</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span id="rnHsType"><span class="annot"><span class="annottext">rnHsType :: HsDocContext -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsType"><span class="hs-identifier hs-var hs-var">rnHsType</span></a></span></span><span> </span><span id="local-6989586621683055148"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055148"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683055149"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055149"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055148"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055149"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-type">rnLHsKind</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span id="rnLHsKind"><span class="annot"><span class="annottext">rnLHsKind :: HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-var hs-var">rnLHsKind</span></a></span></span><span> </span><span id="local-6989586621683055150"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055150"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683055151"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055151"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055150"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055151"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- renaming a type only, not a kind</span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypeArg"><span class="hs-identifier hs-type">rnLHsTypeArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-469"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span id="rnLHsTypeArg"><span class="annot"><span class="annottext">rnLHsTypeArg :: HsDocContext
-&gt; LHsTypeArg GhcPs -&gt; RnM (LHsTypeArg GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypeArg"><span class="hs-identifier hs-var hs-var">rnLHsTypeArg</span></a></span></span><span> </span><span id="local-6989586621683055153"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055153"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-type">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">XValArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055155"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055155"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055156"><span class="annot"><a href="#local-6989586621683055156"><span class="hs-identifier hs-var">tys_rn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055157"><span class="annot"><a href="#local-6989586621683055157"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsType"><span class="hs-identifier hs-var">rnLHsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055153"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055155"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-type">HsValArg</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055156"><span class="hs-identifier hs-type">tys_rn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055157"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-473"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypeArg"><span class="hs-identifier hs-var">rnLHsTypeArg</span></a></span><span> </span><span id="local-6989586621683055158"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055158"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTypeArg"><span class="hs-identifier hs-type">HsTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055160"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055160"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055161"><span class="annot"><a href="#local-6989586621683055161"><span class="hs-identifier hs-var">kis_rn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055162"><span class="annot"><a href="#local-6989586621683055162"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-var">rnLHsKind</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055158"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055160"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-475"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTypeArg"><span class="hs-identifier hs-type">HsTypeArg</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055161"><span class="hs-identifier hs-type">kis_rn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055162"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypeArg"><span class="hs-identifier hs-var">rnLHsTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArgPar"><span class="hs-identifier hs-type">HsArgPar</span></a></span><span> </span><span id="local-6989586621683055164"><span class="annot"><span class="annottext">XArgPar GhcPs
</span><a href="#local-6989586621683055164"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsArg
   GhcRn
   (GenLocated SrcSpanAnnA (HsType GhcRn))
   (GenLocated SrcSpanAnnA (HsType GhcRn)),
 FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (HsArg
        GhcRn
        (GenLocated SrcSpanAnnA (HsType GhcRn))
        (GenLocated SrcSpanAnnA (HsType GhcRn)),
      FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XArgPar GhcRn
-&gt; HsArg
     GhcRn
     (GenLocated SrcSpanAnnA (HsType GhcRn))
     (GenLocated SrcSpanAnnA (HsType GhcRn))
forall p tm ty. XArgPar p -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsArgPar"><span class="hs-identifier hs-var">HsArgPar</span></a></span><span> </span><span class="annot"><span class="annottext">XArgPar GhcPs
XArgPar GhcRn
</span><a href="#local-6989586621683055164"><span class="hs-identifier hs-var">sp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTypeArgs"><span class="hs-identifier hs-type">rnLHsTypeArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-480"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span id="rnLHsTypeArgs"><span class="annot"><span class="annottext">rnLHsTypeArgs :: HsDocContext
-&gt; [LHsTypeArg GhcPs] -&gt; RnM ([LHsTypeArg GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypeArgs"><span class="hs-identifier hs-var hs-var">rnLHsTypeArgs</span></a></span></span><span> </span><span id="local-6989586621683055166"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055166"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055167"><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621683055167"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv)
      (HsArg
         GhcRn
         (GenLocated SrcSpanAnnA (HsType GhcRn))
         (GenLocated SrcSpanAnnA (HsType GhcRn)),
       FreeVars))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; RnM
     ([HsArg
         GhcRn
         (GenLocated SrcSpanAnnA (HsType GhcRn))
         (GenLocated SrcSpanAnnA (HsType GhcRn))],
      FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext
-&gt; LHsTypeArg GhcPs -&gt; RnM (LHsTypeArg GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTypeArg"><span class="hs-identifier hs-var">rnLHsTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055166"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621683055167"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-484"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnTyKiContext"><span class="hs-identifier hs-type">rnTyKiContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-485"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span id="rnTyKiContext"><span class="annot"><span class="annottext">rnTyKiContext :: RnTyKiEnv -&gt; LHsContext GhcPs -&gt; RnM (LHsContext GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnTyKiContext"><span class="hs-identifier hs-var hs-var">rnTyKiContext</span></a></span></span><span> </span><span id="local-6989586621683055169"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055169"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055170"><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621683055170"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055171"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055171"><span class="hs-identifier hs-var">cxt</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-var">traceRn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rncontext&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055171"><span class="hs-identifier hs-var">cxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055172"><span class="annot"><span class="annottext">env' :: RnTyKiEnv
</span><a href="#local-6989586621683055172"><span class="hs-identifier hs-var hs-var hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055169"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-type">RnConstraint</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-489"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055173"><span class="annot"><a href="#local-6989586621683055173"><span class="hs-identifier hs-var">cxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055174"><span class="annot"><a href="#local-6989586621683055174"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055172"><span class="hs-identifier hs-var">env'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055171"><span class="hs-identifier hs-var">cxt</span></a></span><span>
</span><span id="line-490"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055170"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055173"><span class="hs-identifier hs-type">cxt'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055174"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-type">rnContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-493"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span id="rnContext"><span class="annot"><span class="annottext">rnContext :: HsDocContext
-&gt; LHsContext GhcPs -&gt; RnM (LHsContext GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-var hs-var">rnContext</span></a></span></span><span> </span><span id="local-6989586621683055175"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055175"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055176"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055176"><span class="hs-identifier hs-var">theta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsContext GhcPs -&gt; RnM (LHsContext GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnTyKiContext"><span class="hs-identifier hs-var">rnTyKiContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055175"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-var">RnConstraint</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055176"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnMaybeContext"><span class="hs-identifier hs-type">rnMaybeContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span id="rnMaybeContext"><span class="annot"><span class="annottext">rnMaybeContext :: HsDocContext
-&gt; Maybe (LHsContext GhcPs)
-&gt; RnM (Maybe (LHsContext GhcRn), FreeVars)
</span><a href="GHC.Rename.HsType.html#rnMaybeContext"><span class="hs-identifier hs-var hs-var">rnMaybeContext</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe
   (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)]),
 FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (Maybe
        (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)]),
      FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcRn)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnMaybeContext"><span class="hs-identifier hs-var">rnMaybeContext</span></a></span><span> </span><span id="local-6989586621683055177"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055177"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683055178"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055178"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055179"><span class="annot"><a href="#local-6989586621683055179"><span class="hs-identifier hs-var">theta'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055180"><span class="annot"><a href="#local-6989586621683055180"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; LHsContext GhcPs -&gt; RnM (LHsContext GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnContext"><span class="hs-identifier hs-var">rnContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055177"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055178"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-501"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621683055179"><span class="hs-identifier hs-type">theta'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055180"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>       </span><span class="hs-special">}</span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-506"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span id="rnLHsTyKi"><span class="annot"><span class="annottext">rnLHsTyKi :: RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var hs-var">rnLHsTyKi</span></a></span></span><span> </span><span id="local-6989586621683055181"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055181"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055182"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055182"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055183"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055183"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; RnM (LHsType GhcRn, FreeVars) -&gt; RnM (LHsType GhcRn, FreeVars)
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055182"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(RnM (LHsType GhcRn, FreeVars) -&gt; RnM (LHsType GhcRn, FreeVars))
-&gt; RnM (LHsType GhcRn, FreeVars) -&gt; RnM (LHsType GhcRn, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055184"><span class="annot"><a href="#local-6989586621683055184"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055185"><span class="annot"><a href="#local-6989586621683055185"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055181"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055183"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-510"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055182"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055184"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055185"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-type">rnHsTyKi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span id="rnHsTyKi"><span class="annot"><span class="annottext">rnHsTyKi :: RnTyKiEnv -&gt; HsType GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var hs-var">rnHsTyKi</span></a></span></span><span> </span><span id="local-6989586621683055186"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055186"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055187"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621683055187"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_tele :: forall pass. HsType pass -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055188"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683055188"><span class="hs-identifier hs-var">tele</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055189"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055189"><span class="hs-identifier hs-var">tau</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsTypeOrSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPolyKinds"><span class="hs-identifier hs-var">checkPolyKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055186"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; HsTypeOrSigType GhcPs
forall p. HsType p -&gt; HsTypeOrSigType p
</span><a href="GHC.Tc.Errors.Types.html#HsType"><span class="hs-identifier hs-var">HsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055187"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; RnM (HsType GhcRn, FreeVars)
forall a.
HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier hs-var">bindHsForAllTelescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055186"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683055188"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">((HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
 -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; RnM (HsType GhcRn, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055191"><span class="annot"><span class="annottext">HsForAllTelescope GhcRn
</span><a href="#local-6989586621683055191"><span class="hs-identifier hs-var">tele'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055192"><span class="annot"><a href="#local-6989586621683055192"><span class="hs-identifier hs-var">tau'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621683055193"><span class="annot"><a href="#local-6989586621683055193"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055186"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055189"><span class="hs-identifier hs-var">tau</span></a></span><span>
</span><span id="line-518"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_xforall"><span class="hs-identifier hs-var">hst_xforall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-519"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055191"><span class="hs-identifier hs-type">tele'</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><a href="#local-6989586621683055192"><span class="hs-identifier hs-type">tau'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-520"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055193"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055194"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055194"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_ctxt :: forall pass. HsType pass -&gt; LHsContext pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055195"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055195"><span class="hs-identifier hs-var">lctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055196"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055196"><span class="hs-identifier hs-var">tau</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- no need to check type vs kind level here; this is</span><span>
</span><span id="line-524"></span><span>         </span><span class="hs-comment">-- checked in the type checker. See</span><span>
</span><span id="line-525"></span><span>         </span><span class="hs-comment">-- Note [No constraints in kinds] in GHC.Tc.Validity</span><span>
</span><span id="line-526"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621683055197"><span class="annot"><a href="#local-6989586621683055197"><span class="hs-identifier hs-var">ctxt'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055198"><span class="annot"><a href="#local-6989586621683055198"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsContext GhcPs -&gt; RnM (LHsContext GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnTyKiContext"><span class="hs-identifier hs-var">rnTyKiContext</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055194"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683055195"><span class="hs-identifier hs-var">lctxt</span></a></span><span>
</span><span id="line-527"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055199"><span class="annot"><a href="#local-6989586621683055199"><span class="hs-identifier hs-var">tau'</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621683055200"><span class="annot"><a href="#local-6989586621683055200"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055194"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055196"><span class="hs-identifier hs-type">tau</span></a></span><span>
</span><span id="line-528"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_xqual"><span class="hs-identifier hs-var">hst_xqual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055197"><span class="hs-identifier hs-type">ctxt'</span></a></span><span>
</span><span id="line-529"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><a href="#local-6989586621683055199"><span class="hs-identifier hs-type">tau'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-530"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055198"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055200"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055201"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055201"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055202"><span class="annot"><span class="annottext">tv :: HsType GhcPs
</span><a href="#local-6989586621683055202"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055204"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055204"><span class="hs-identifier hs-var">ip</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055205"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055205"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055206"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055206"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055201"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-var">isRdrTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055206"><span class="hs-identifier hs-var">rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-534"></span><span>         </span><span class="annot"><span class="annottext">Extension -&gt; TcRn () -&gt; TcRn ()
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PolyKinds</span></span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-535"></span><span>         </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055201"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-536"></span><span>         </span><span class="annot"><span class="annottext">RdrName -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUnexpectedKindVar"><span class="hs-identifier hs-var">TcRnUnexpectedKindVar</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055206"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-537"></span><span>           </span><span class="hs-comment">-- Any type variable at the kind level is illegal without the use</span><span>
</span><span id="line-538"></span><span>           </span><span class="hs-comment">-- of PolyKinds (see #14710)</span><span>
</span><span id="line-539"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055215"><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#rnTyVar"><span class="hs-identifier hs-var">rnTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055201"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055206"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-540"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055217"><span class="annot"><a href="#local-6989586621683055217"><span class="hs-identifier hs-var">this_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-type">getModule</span></a></span><span>
</span><span id="line-541"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#nameIsLocalOrFrom"><span class="hs-identifier hs-type">nameIsLocalOrFrom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055217"><span class="hs-identifier hs-type">this_mod</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-542"></span><span>         </span><span class="annot"><a href="GHC.Rename.Splice.html#checkThLocalTyName"><span class="hs-identifier hs-type">checkThLocalTyName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-543"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#isDataConName"><span class="hs-identifier hs-type">isDataConName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#isKindName"><span class="hs-identifier hs-type">isKindName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-544"></span><span>           </span><span class="hs-comment">-- Any use of a promoted data constructor name (that is not</span><span>
</span><span id="line-545"></span><span>           </span><span class="hs-comment">-- specifically exempted by isKindName) is illegal without the use</span><span>
</span><span id="line-546"></span><span>           </span><span class="hs-comment">-- of DataKinds. See Note [Checking for DataKinds] in</span><span>
</span><span id="line-547"></span><span>           </span><span class="hs-comment">-- GHC.Tc.Validity.</span><span>
</span><span id="line-548"></span><span>           </span><span class="annot"><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-type">checkDataKinds</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055201"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055202"><span class="hs-identifier hs-type">tv</span></a></span><span>
</span><span id="line-549"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#isDataConName"><span class="hs-identifier hs-type">isDataConName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#isPromoted"><span class="hs-identifier hs-type">isPromoted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055204"><span class="hs-identifier hs-type">ip</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-550"></span><span>         </span><span class="hs-comment">-- NB: a prefix symbolic operator such as (:) is represented as HsTyVar.</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUntickedPromotedThing"><span class="hs-identifier hs-type">TcRnUntickedPromotedThing</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#UntickedConstructor"><span class="hs-identifier hs-type">UntickedConstructor</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055204"><span class="hs-identifier hs-type">ip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055205"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-type">unitFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055215"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-553"></span><span>
</span><span id="line-554"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055228"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055228"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055229"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621683055229"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055231"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055231"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621683055232"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055232"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683055233"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683055233"><span class="hs-identifier hs-var">l_op</span></a></span></span><span> </span><span id="local-6989586621683055234"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055234"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; RnM (HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars)
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055233"><span class="hs-identifier hs-var">l_op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM (HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars))
-&gt; RnM (HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-556"></span><span>    </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055237"><span class="annot"><a href="#local-6989586621683055237"><span class="hs-identifier hs-var">l_op'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055238"><span class="annot"><a href="#local-6989586621683055238"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
-&gt; SDoc
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyOp"><span class="hs-identifier hs-var">rnHsTyOp</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055228"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055229"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055233"><span class="hs-identifier hs-var">l_op</span></a></span><span>
</span><span id="line-557"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055240"><span class="annot"><a href="#local-6989586621683055240"><span class="hs-identifier hs-var hs-var">op_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055237"><span class="hs-identifier hs-var">l_op'</span></a></span><span>
</span><span id="line-558"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055241"><span class="annot"><a href="#local-6989586621683055241"><span class="hs-identifier hs-var">fix</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupTyFixityRn"><span class="hs-identifier hs-type">lookupTyFixityRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055237"><span class="hs-identifier hs-type">l_op'</span></a></span><span>
</span><span id="line-559"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055242"><span class="annot"><a href="#local-6989586621683055242"><span class="hs-identifier hs-var">ty1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055243"><span class="annot"><a href="#local-6989586621683055243"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055228"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055232"><span class="hs-identifier hs-type">ty1</span></a></span><span>
</span><span id="line-560"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055244"><span class="annot"><a href="#local-6989586621683055244"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055245"><span class="annot"><a href="#local-6989586621683055245"><span class="hs-identifier hs-var">fvs3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055228"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055234"><span class="hs-identifier hs-type">ty2</span></a></span><span>
</span><span id="line-561"></span><span>        </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055246"><span class="annot"><a href="#local-6989586621683055246"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-type">mkHsOpTyRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055231"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055237"><span class="hs-identifier hs-type">l_op'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055241"><span class="hs-identifier hs-type">fix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055242"><span class="hs-identifier hs-type">ty1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055244"><span class="hs-identifier hs-type">ty2'</span></a></span><span>
</span><span id="line-562"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.html#isDataConName"><span class="hs-identifier hs-type">isDataConName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055240"><span class="hs-identifier hs-type">op_name</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#isPromoted"><span class="hs-identifier hs-type">isPromoted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055231"><span class="hs-identifier hs-type">prom</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-563"></span><span>            </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUntickedPromotedThing"><span class="hs-identifier hs-type">TcRnUntickedPromotedThing</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#UntickedConstructor"><span class="hs-identifier hs-type">UntickedConstructor</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-type">Infix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055240"><span class="hs-identifier hs-type">op_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055246"><span class="hs-identifier hs-type">res_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-type">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683055238"><span class="hs-identifier hs-type">fvs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055243"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055245"><span class="hs-identifier hs-type">fvs3</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-565"></span><span>
</span><span id="line-566"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055249"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055249"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><span class="annottext">XParTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055251"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055251"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055252"><span class="annot"><a href="#local-6989586621683055252"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055253"><span class="annot"><a href="#local-6989586621683055253"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055249"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055251"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-568"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055252"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055253"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055254"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055254"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span id="local-6989586621683055256"><span class="annot"><span class="annottext">XBangTy GhcPs
</span><a href="#local-6989586621683055256"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055257"><span class="annot"><span class="annottext">HsBang
</span><a href="#local-6989586621683055257"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621683055258"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055258"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055259"><span class="annot"><a href="#local-6989586621683055259"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055260"><span class="annot"><a href="#local-6989586621683055260"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055254"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055258"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-572"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055256"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055257"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055259"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055260"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-573"></span><span>
</span><span id="line-574"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055261"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055261"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055262"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621683055262"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span> </span><span class="annot"><span class="annottext">XRecTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055264"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621683055264"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055265"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621683055265"><span class="hs-identifier hs-var hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055261"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-576"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055266"><span class="annot"><a href="#local-6989586621683055266"><span class="hs-identifier hs-var">fls</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
</span><a href="#local-6989586621683055267"><span class="hs-identifier hs-var">get_fields</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055265"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-577"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055268"><span class="annot"><a href="#local-6989586621683055268"><span class="hs-identifier hs-var">flds'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055269"><span class="annot"><a href="#local-6989586621683055269"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnConDeclFields"><span class="hs-identifier hs-type">rnConDeclFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055265"><span class="hs-identifier hs-type">ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055266"><span class="hs-identifier hs-type">fls</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055264"><span class="hs-identifier hs-type">flds</span></a></span><span>
</span><span id="line-578"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055268"><span class="hs-identifier hs-type">flds'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055269"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-580"></span><span>    </span><span id="local-6989586621683055267"><span class="annot"><span class="annottext">get_fields :: HsDocContext -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
</span><a href="#local-6989586621683055267"><span class="hs-identifier hs-var hs-var">get_fields</span></a></span></span><span> </span><span id="local-6989586621683055270"><span class="annot"><span class="annottext">ctxt :: HsDocContext
</span><a href="#local-6989586621683055270"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ConDeclCtx"><span class="hs-identifier hs-type">ConDeclCtx</span></a></span><span> </span><span id="local-6989586621683055272"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683055272"><span class="hs-identifier hs-var">names</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683055273"><span class="annot"><a href="#local-6989586621683055273"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN Name
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel])
-&gt; [GenLocated SrcSpanAnnN Name]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
forall (m :: * -&gt; *) (f :: * -&gt; *) a b.
(Monad m, Traversable f) =&gt;
(a -&gt; m [b]) -&gt; f a -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#concatMapM"><span class="hs-identifier hs-var">concatMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt;
Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
</span><a href="GHC.Rename.Env.html#lookupConstructorFields"><span class="hs-identifier hs-var">lookupConstructorFields</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel])
-&gt; (GenLocated SrcSpanAnnN Name -&gt; Name)
-&gt; GenLocated SrcSpanAnnN Name
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnN Name]
</span><a href="#local-6989586621683055272"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-582"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-identifier hs-type">equalLength</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055273"><span class="hs-identifier hs-type">res</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055272"><span class="hs-identifier hs-type">names</span></a></span><span>
</span><span id="line-583"></span><span>           </span><span class="hs-comment">-- Lookup can fail when the record syntax is incorrect, e.g.</span><span>
</span><span id="line-584"></span><span>           </span><span class="hs-comment">-- data D = D Int { fld :: Bool }. See T7943.</span><span>
</span><span id="line-585"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683055273"><span class="hs-identifier hs-type">res</span></a></span><span>
</span><span id="line-586"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621683055277"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055270"><span class="hs-identifier hs-type">ctxt</span></a></span><span>
</span><span id="line-587"></span><span>    </span><span class="annot"><a href="#local-6989586621683055267"><span class="hs-identifier hs-var">get_fields</span></a></span><span> </span><span id="local-6989586621683055278"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055278"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
</span><a href="#local-6989586621683055277"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055278"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span>    </span><span id="local-6989586621683055277"><span class="annot"><span class="annottext">err :: HsDocContext -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
</span><a href="#local-6989586621683055277"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span id="local-6989586621683055279"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055279"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-590"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-591"></span><span>            </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055279"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-592"></span><span>            </span><span class="annot"><span class="annottext">Either (HsType GhcPs) (HsType GhcRn) -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalRecordSyntax"><span class="hs-identifier hs-var">TcRnIllegalRecordSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; Either (HsType GhcPs) (HsType GhcRn)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055262"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[FieldLabel] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [FieldLabel]
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055281"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055281"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span id="local-6989586621683055283"><span class="annot"><span class="annottext">XFunTy GhcPs
</span><a href="#local-6989586621683055283"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621683055284"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683055284"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621683055285"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055285"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683055286"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055286"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055287"><span class="annot"><a href="#local-6989586621683055287"><span class="hs-identifier hs-var">ty1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055288"><span class="annot"><a href="#local-6989586621683055288"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055281"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055285"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-597"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055289"><span class="annot"><a href="#local-6989586621683055289"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055290"><span class="annot"><a href="#local-6989586621683055290"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055281"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055286"><span class="hs-identifier hs-type">ty2</span></a></span><span>
</span><span id="line-598"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055291"><span class="annot"><a href="#local-6989586621683055291"><span class="hs-identifier hs-var">mult'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055292"><span class="annot"><a href="#local-6989586621683055292"><span class="hs-identifier hs-var">w_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrow"><span class="hs-identifier hs-type">rnHsArrow</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055281"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055284"><span class="hs-identifier hs-type">mult</span></a></span><span>
</span><span id="line-599"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055283"><span class="hs-identifier hs-type">u</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055291"><span class="hs-identifier hs-type">mult'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055287"><span class="hs-identifier hs-type">ty1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055289"><span class="hs-identifier hs-type">ty2'</span></a></span><span>
</span><span id="line-600"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFVs"><span class="hs-identifier hs-type">plusFVs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683055288"><span class="hs-identifier hs-type">fvs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055290"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055292"><span class="hs-identifier hs-type">w_fvs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055293"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055293"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055294"><span class="annot"><span class="annottext">listTy :: HsType GhcPs
</span><a href="#local-6989586621683055294"><span class="hs-identifier hs-var">listTy</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-type">HsListTy</span></a></span><span> </span><span id="local-6989586621683055296"><span class="annot"><span class="annottext">XListTy GhcPs
</span><a href="#local-6989586621683055296"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055297"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055297"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055293"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-604"></span><span>           </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055293"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055294"><span class="hs-identifier hs-var">listTy</span></a></span><span>
</span><span id="line-605"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055298"><span class="annot"><a href="#local-6989586621683055298"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055299"><span class="annot"><a href="#local-6989586621683055299"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055293"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055297"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-606"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-type">HsListTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055296"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055298"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055299"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055300"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055300"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span id="local-6989586621683055302"><span class="annot"><span class="annottext">XKindSig GhcPs
</span><a href="#local-6989586621683055302"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055303"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055303"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683055304"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055304"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055305"><span class="annot"><a href="#local-6989586621683055305"><span class="hs-identifier hs-var">kind_sigs_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.KindSignatures</span></span><span>
</span><span id="line-610"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055305"><span class="hs-identifier hs-type">kind_sigs_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier hs-type">badKindSigErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055300"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055304"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055308"><span class="annot"><a href="#local-6989586621683055308"><span class="hs-identifier hs-var">k'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055309"><span class="annot"><a href="#local-6989586621683055309"><span class="hs-identifier hs-var">sig_fvs</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055300"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-type">KindLevel</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055304"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-612"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055310"><span class="annot"><a href="#local-6989586621683055310"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055311"><span class="annot"><a href="#local-6989586621683055311"><span class="hs-identifier hs-var">lhs_fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-type">bindSigTyVarsFV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#hsScopedKvs"><span class="hs-identifier hs-type">hsScopedKvs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055308"><span class="hs-identifier hs-type">k'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-613"></span><span>                           </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055300"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055303"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-614"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055302"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055310"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055308"><span class="hs-identifier hs-type">k'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055311"><span class="hs-identifier hs-type">lhs_fvs</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055309"><span class="hs-identifier hs-type">sig_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-615"></span><span>
</span><span id="line-616"></span><span class="hs-comment">-- Unboxed tuples are allowed to have poly-typed arguments.  These</span><span>
</span><span id="line-617"></span><span class="hs-comment">-- sometimes crop up as a result of CPR worker-wrappering dictionaries.</span><span>
</span><span id="line-618"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055313"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055313"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055314"><span class="annot"><span class="annottext">tupleTy :: HsType GhcPs
</span><a href="#local-6989586621683055314"><span class="hs-identifier hs-var">tupleTy</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span id="local-6989586621683055316"><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><a href="#local-6989586621683055316"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055317"><span class="annot"><span class="annottext">HsTupleSort
</span><a href="#local-6989586621683055317"><span class="hs-identifier hs-var">tup_con</span></a></span></span><span> </span><span id="local-6989586621683055318"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055318"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055313"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-620"></span><span>           </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055313"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055314"><span class="hs-identifier hs-var">tupleTy</span></a></span><span>
</span><span id="line-621"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055319"><span class="annot"><a href="#local-6989586621683055319"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055320"><span class="annot"><a href="#local-6989586621683055320"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055313"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055318"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-622"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055316"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055317"><span class="hs-identifier hs-type">tup_con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055319"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055320"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055321"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055321"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055322"><span class="annot"><span class="annottext">sumTy :: HsType GhcPs
</span><a href="#local-6989586621683055322"><span class="hs-identifier hs-var">sumTy</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSumTy"><span class="hs-identifier hs-type">HsSumTy</span></a></span><span> </span><span id="local-6989586621683055324"><span class="annot"><span class="annottext">XSumTy GhcPs
</span><a href="#local-6989586621683055324"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055325"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055325"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055321"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-626"></span><span>           </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055321"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055322"><span class="hs-identifier hs-var">sumTy</span></a></span><span>
</span><span id="line-627"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055326"><span class="annot"><a href="#local-6989586621683055326"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055327"><span class="annot"><a href="#local-6989586621683055327"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055321"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055325"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-628"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSumTy"><span class="hs-identifier hs-type">HsSumTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055324"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055326"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055327"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span class="hs-comment">-- Ensure that a type-level integer is nonnegative (#8306, #8412)</span><span>
</span><span id="line-631"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055328"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055328"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055329"><span class="annot"><span class="annottext">tyLit :: HsType GhcPs
</span><a href="#local-6989586621683055329"><span class="hs-identifier hs-var">tyLit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span id="local-6989586621683055331"><span class="annot"><span class="annottext">XTyLit GhcPs
</span><a href="#local-6989586621683055331"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621683055332"><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><a href="#local-6989586621683055332"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055328"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055329"><span class="hs-identifier hs-var">tyLit</span></a></span><span>
</span><span id="line-633"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055333"><span class="annot"><a href="#local-6989586621683055333"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs -&gt; RnM (HsTyLit GhcRn)
</span><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-var">rnHsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><a href="#local-6989586621683055332"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-634"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055331"><span class="hs-identifier hs-type">src</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055333"><span class="hs-identifier hs-type">t'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-type">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-635"></span><span>
</span><span id="line-636"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055334"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055334"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055336"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055336"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683055337"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055337"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055338"><span class="annot"><a href="#local-6989586621683055338"><span class="hs-identifier hs-var">ty1'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055339"><span class="annot"><a href="#local-6989586621683055339"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055334"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055336"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-638"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055340"><span class="annot"><a href="#local-6989586621683055340"><span class="hs-identifier hs-var">ty2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055341"><span class="annot"><a href="#local-6989586621683055341"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055334"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055337"><span class="hs-identifier hs-type">ty2</span></a></span><span>
</span><span id="line-639"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055338"><span class="hs-identifier hs-type">ty1'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055340"><span class="hs-identifier hs-type">ty2'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055339"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055341"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055342"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055342"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppKindTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055344"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055344"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683055345"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055345"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055346"><span class="annot"><a href="#local-6989586621683055346"><span class="hs-identifier hs-var">kind_app</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeApplications</span></span><span>
</span><span id="line-643"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055346"><span class="hs-identifier hs-type">kind_app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Utils.html#typeAppErr"><span class="hs-identifier hs-type">typeAppErr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-type">KindLevel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055345"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055348"><span class="annot"><a href="#local-6989586621683055348"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055349"><span class="annot"><a href="#local-6989586621683055349"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055342"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055344"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-645"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055350"><span class="annot"><a href="#local-6989586621683055350"><span class="hs-identifier hs-var">k'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055351"><span class="annot"><a href="#local-6989586621683055351"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-type">rnLHsTyKi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055342"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_level"><span class="hs-identifier hs-var">rtke_level</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-type">KindLevel</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055345"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-646"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055348"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055350"><span class="hs-identifier hs-type">k'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055349"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055351"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-647"></span><span>
</span><span id="line-648"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055352"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055352"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055353"><span class="annot"><span class="annottext">t :: HsType GhcPs
</span><a href="#local-6989586621683055353"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIParamTy"><span class="hs-identifier hs-type">HsIParamTy</span></a></span><span> </span><span id="local-6989586621683055355"><span class="annot"><span class="annottext">XIParamTy GhcPs
</span><a href="#local-6989586621683055355"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055356"><span class="annot"><span class="annottext">XRec GhcPs HsIPName
</span><a href="#local-6989586621683055356"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621683055357"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055357"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#notInKinds"><span class="hs-identifier hs-var">notInKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055352"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055353"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-650"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055359"><span class="annot"><a href="#local-6989586621683055359"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055360"><span class="annot"><a href="#local-6989586621683055360"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055352"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055357"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-651"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIParamTy"><span class="hs-identifier hs-type">HsIParamTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055355"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055356"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055359"><span class="hs-identifier hs-type">ty'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055360"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-652"></span><span>
</span><span id="line-653"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-type">HsStarTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStarTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055362"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055362"><span class="hs-identifier hs-var">isUni</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XStarTy GhcRn -&gt; Bool -&gt; HsType GhcRn
forall pass. XStarTy pass -&gt; Bool -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-var">HsStarTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStarTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055362"><span class="hs-identifier hs-var">isUni</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-655"></span><span>
</span><span id="line-656"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSpliceTy"><span class="hs-identifier hs-type">HsSpliceTy</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055364"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621683055364"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs -&gt; RnM (HsType GhcRn, FreeVars)
</span><a href="GHC.Rename.Splice.html#rnSpliceType"><span class="hs-identifier hs-var">rnSpliceType</span></a></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621683055364"><span class="hs-identifier hs-var">sp</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055365"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055365"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span> </span><span id="local-6989586621683055367"><span class="annot"><span class="annottext">XDocTy GhcPs
</span><a href="#local-6989586621683055367"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055368"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055368"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683055369"><span class="annot"><span class="annottext">LHsDoc GhcPs
</span><a href="#local-6989586621683055369"><span class="hs-identifier hs-var">haddock_doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055370"><span class="annot"><a href="#local-6989586621683055370"><span class="hs-identifier hs-var">ty'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055371"><span class="annot"><a href="#local-6989586621683055371"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055365"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055368"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-661"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055372"><span class="annot"><a href="#local-6989586621683055372"><span class="hs-identifier hs-var">haddock_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Doc.html#rnLHsDoc"><span class="hs-identifier hs-type">rnLHsDoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055369"><span class="hs-identifier hs-type">haddock_doc</span></a></span><span>
</span><span id="line-662"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055367"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055370"><span class="hs-identifier hs-type">ty'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055372"><span class="hs-identifier hs-type">haddock_doc'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055371"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span class="hs-comment">-- See Note [Renaming HsCoreTys]</span><span>
</span><span id="line-665"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055374"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055374"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#XHsType"><span class="hs-identifier hs-type">XHsType</span></a></span><span> </span><span id="local-6989586621683055376"><span class="annot"><span class="annottext">XXType GhcPs
</span><a href="#local-6989586621683055376"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; TcRn ()) -&gt; [Name] -&gt; TcRn ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; TcRn ()
</span><a href="#local-6989586621683055378"><span class="hs-identifier hs-var">check_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; TcRn ()) -&gt; (Name -&gt; RdrName) -&gt; Name -&gt; TcRn ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055380"><span class="hs-identifier hs-var">fvs_list</span></a></span><span>
</span><span id="line-667"></span><span>       </span><span class="annot"><span class="annottext">(HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XXType GhcRn -&gt; HsType GhcRn
forall pass. XXType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#XHsType"><span class="hs-identifier hs-var">XHsType</span></a></span><span> </span><span class="annot"><span class="annottext">XXType GhcPs
XXType GhcRn
</span><a href="#local-6989586621683055376"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055381"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621683055380"><span class="annot"><span class="annottext">fvs_list :: [Name]
</span><a href="#local-6989586621683055380"><span class="hs-identifier hs-var hs-var">fvs_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyCoVar -&gt; Name) -&gt; [TyCoVar] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TyCoVar -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">([TyCoVar] -&gt; [Name]) -&gt; [TyCoVar] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [TyCoVar]
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypeList"><span class="hs-identifier hs-var">tyCoVarsOfTypeList</span></a></span><span> </span><span class="annot"><span class="annottext">XXType GhcPs
Type
</span><a href="#local-6989586621683055376"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span id="local-6989586621683055381"><span class="annot"><span class="annottext">fvs :: FreeVars
</span><a href="#local-6989586621683055381"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeVars
</span><a href="GHC.Types.Name.Set.html#mkFVs"><span class="hs-identifier hs-var">mkFVs</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055380"><span class="hs-identifier hs-var">fvs_list</span></a></span><span>
</span><span id="line-671"></span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><a href="#local-6989586621683055378"><span class="hs-identifier hs-type">check_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>    </span><span id="local-6989586621683055378"><span class="annot"><span class="annottext">check_in_scope :: RdrName -&gt; TcRn ()
</span><a href="#local-6989586621683055378"><span class="hs-identifier hs-var hs-var">check_in_scope</span></a></span></span><span> </span><span id="local-6989586621683055384"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055384"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-674"></span><span>      </span><span id="local-6989586621683055385"><span class="annot"><a href="#local-6989586621683055385"><span class="hs-identifier hs-var">mb_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RnM (Maybe Name)
</span><a href="GHC.Rename.Env.html#lookupLocalOccRn_maybe"><span class="hs-identifier hs-var">lookupLocalOccRn_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055384"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-675"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">isNothing</span></span><span> </span><span class="annot"><a href="#local-6989586621683055385"><span class="hs-identifier hs-type">mb_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-676"></span><span>        </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-677"></span><span>          </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-type">TcRnWithHsDocContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055374"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-678"></span><span>            </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnNotInScope"><span class="hs-identifier hs-type">TcRnNotInScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier hs-type">notInScopeErr</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier hs-type">WL_LocalOnly</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055384"><span class="hs-identifier hs-type">rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055384"><span class="hs-identifier hs-type">rdr_name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-679"></span><span>
</span><span id="line-680"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055389"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055389"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055390"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621683055390"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-type">HsExplicitListTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitListTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055392"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055392"><span class="hs-identifier hs-var">ip</span></a></span></span><span> </span><span id="local-6989586621683055393"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055393"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055389"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055390"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-682"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055394"><span class="annot"><a href="#local-6989586621683055394"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055395"><span class="annot"><a href="#local-6989586621683055395"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055389"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055393"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-683"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#isPromoted"><span class="hs-identifier hs-type">isPromoted</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055392"><span class="hs-identifier hs-type">ip</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-684"></span><span>           </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnUntickedPromotedThing"><span class="hs-identifier hs-type">TcRnUntickedPromotedThing</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#UntickedExplicitList"><span class="hs-identifier hs-type">UntickedExplicitList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-685"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-type">HsExplicitListTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055392"><span class="hs-identifier hs-type">ip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055394"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055395"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055397"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055397"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055398"><span class="annot"><span class="annottext">ty :: HsType GhcPs
</span><a href="#local-6989586621683055398"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055400"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055400"><span class="hs-identifier hs-var">ip</span></a></span></span><span> </span><span id="local-6989586621683055401"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683055401"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var">checkDataKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055397"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055398"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-689"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055402"><span class="annot"><a href="#local-6989586621683055402"><span class="hs-identifier hs-var">tys'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055403"><span class="annot"><a href="#local-6989586621683055403"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; RnM ([GenLocated SrcSpanAnnA (HsType GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055397"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683055401"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-690"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055400"><span class="hs-identifier hs-type">ip</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055402"><span class="hs-identifier hs-type">tys'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055403"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyKi"><span class="hs-identifier hs-var">rnHsTyKi</span></a></span><span> </span><span id="local-6989586621683055404"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055404"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkAnonWildCard"><span class="hs-identifier hs-var">checkAnonWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055404"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-694"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(HsType GhcRn, FreeVars) -&gt; RnM (HsType GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildCardTy GhcRn -&gt; HsType GhcRn
forall pass. XWildCardTy pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-var">HsWildCardTy</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-695"></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-type">rnHsTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span id="rnHsTyLit"><span class="annot"><span class="annottext">rnHsTyLit :: HsTyLit GhcPs -&gt; RnM (HsTyLit GhcRn)
</span><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-var hs-var">rnHsTyLit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsStrTy"><span class="hs-identifier hs-type">HsStrTy</span></a></span><span> </span><span id="local-6989586621683055407"><span class="annot"><span class="annottext">XStrTy GhcPs
</span><a href="#local-6989586621683055407"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055408"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683055408"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcRn -&gt; RnM (HsTyLit GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XStrTy GhcRn -&gt; FastString -&gt; HsTyLit GhcRn
forall pass. XStrTy pass -&gt; FastString -&gt; HsTyLit pass
</span><a href="Language.Haskell.Syntax.Type.html#HsStrTy"><span class="hs-identifier hs-var">HsStrTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStrTy GhcPs
XStrTy GhcRn
</span><a href="#local-6989586621683055407"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683055408"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-var">rnHsTyLit</span></a></span><span> </span><span id="local-6989586621683055409"><span class="annot"><span class="annottext">tyLit :: HsTyLit GhcPs
</span><a href="#local-6989586621683055409"><span class="hs-identifier hs-var">tyLit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsNumTy"><span class="hs-identifier hs-type">HsNumTy</span></a></span><span> </span><span id="local-6989586621683055411"><span class="annot"><span class="annottext">XNumTy GhcPs
</span><a href="#local-6989586621683055411"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055412"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621683055412"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-700"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621683055412"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnNegativeNumTypeLiteral"><span class="hs-identifier hs-var">TcRnNegativeNumTypeLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><a href="#local-6989586621683055409"><span class="hs-identifier hs-var">tyLit</span></a></span><span>
</span><span id="line-702"></span><span>  </span><span class="annot"><span class="annottext">HsTyLit GhcRn -&gt; RnM (HsTyLit GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XNumTy GhcRn -&gt; Integer -&gt; HsTyLit GhcRn
forall pass. XNumTy pass -&gt; Integer -&gt; HsTyLit pass
</span><a href="Language.Haskell.Syntax.Type.html#HsNumTy"><span class="hs-identifier hs-var">HsNumTy</span></a></span><span> </span><span class="annot"><span class="annottext">XNumTy GhcPs
XNumTy GhcRn
</span><a href="#local-6989586621683055411"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621683055412"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyLit"><span class="hs-identifier hs-var">rnHsTyLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsCharTy"><span class="hs-identifier hs-type">HsCharTy</span></a></span><span> </span><span id="local-6989586621683055416"><span class="annot"><span class="annottext">XCharTy GhcPs
</span><a href="#local-6989586621683055416"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055417"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621683055417"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcRn -&gt; RnM (HsTyLit GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCharTy GhcRn -&gt; Char -&gt; HsTyLit GhcRn
forall pass. XCharTy pass -&gt; Char -&gt; HsTyLit pass
</span><a href="Language.Haskell.Syntax.Type.html#HsCharTy"><span class="hs-identifier hs-var">HsCharTy</span></a></span><span> </span><span class="annot"><span class="annottext">XCharTy GhcPs
XCharTy GhcRn
</span><a href="#local-6989586621683055416"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621683055417"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrow"><span class="hs-identifier hs-type">rnHsArrow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span id="rnHsArrow"><span class="annot"><span class="annottext">rnHsArrow :: RnTyKiEnv -&gt; HsArrow GhcPs -&gt; RnM (HsArrow GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsArrow"><span class="hs-identifier hs-var hs-var">rnHsArrow</span></a></span></span><span> </span><span id="local-6989586621683055418"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055418"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (HsType GhcRn), FreeVars))
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsType GhcPs)) GhcPs
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (HsArrowOf (GenLocated SrcSpanAnnA (HsType GhcRn)) GhcRn, FreeVars)
forall (mult :: * -&gt; *).
(LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars))
-&gt; HsArrowOf (LocatedA (mult GhcPs)) GhcPs
-&gt; RnM (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier hs-var">rnHsArrowWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055418"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span id="local-6989586621683054225"><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier hs-type">rnHsArrowWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054225"><span class="hs-identifier hs-type">mult</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054225"><span class="hs-identifier hs-type">mult</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrowOf"><span class="hs-identifier hs-type">HsArrowOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054225"><span class="hs-identifier hs-type">mult</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-711"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrowOf"><span class="hs-identifier hs-type">HsArrowOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054225"><span class="hs-identifier hs-type">mult</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-712"></span><span id="rnHsArrowWith"><span class="annot"><span class="annottext">rnHsArrowWith :: forall (mult :: * -&gt; *).
(LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars))
-&gt; HsArrowOf (LocatedA (mult GhcPs)) GhcPs
-&gt; RnM (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier hs-var hs-var">rnHsArrowWith</span></a></span></span><span> </span><span id="local-6989586621683055423"><span class="annot"><span class="annottext">LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars)
</span><a href="#local-6989586621683055423"><span class="hs-identifier hs-var">_rn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-type">HsUnrestrictedArrow</span></a></span><span> </span><span class="annot"><span class="annottext">XUnrestrictedArrow (LocatedA (mult GhcPs)) GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XUnrestrictedArrow (LocatedA (mult GhcRn)) GhcRn
-&gt; HsArrowOf (LocatedA (mult GhcRn)) GhcRn
forall mult pass.
XUnrestrictedArrow mult pass -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-var">HsUnrestrictedArrow</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XUnrestrictedArrow (LocatedA (mult GhcRn)) GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier hs-var">rnHsArrowWith</span></a></span><span> </span><span id="local-6989586621683055425"><span class="annot"><span class="annottext">LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars)
</span><a href="#local-6989586621683055425"><span class="hs-identifier hs-var">_rn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-type">HsLinearArrow</span></a></span><span> </span><span class="annot"><span class="annottext">XLinearArrow (LocatedA (mult GhcPs)) GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XLinearArrow (LocatedA (mult GhcRn)) GhcRn
-&gt; HsArrowOf (LocatedA (mult GhcRn)) GhcRn
forall mult pass. XLinearArrow mult pass -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-var">HsLinearArrow</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XLinearArrow (LocatedA (mult GhcRn)) GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsArrowWith"><span class="hs-identifier hs-var">rnHsArrowWith</span></a></span><span> </span><span id="local-6989586621683055427"><span class="annot"><span class="annottext">LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars)
</span><a href="#local-6989586621683055427"><span class="hs-identifier hs-var">rn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-type">HsExplicitMult</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitMult (LocatedA (mult GhcPs)) GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055429"><span class="annot"><span class="annottext">LocatedA (mult GhcPs)
</span><a href="#local-6989586621683055429"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621683055430"><span class="annot"><span class="annottext">LocatedA (mult GhcRn)
</span><a href="#local-6989586621683055430"><span class="hs-identifier hs-var">mult</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055431"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055431"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XExplicitMult (LocatedA (mult GhcRn)) GhcRn
-&gt; LocatedA (mult GhcRn) -&gt; HsArrowOf (LocatedA (mult GhcRn)) GhcRn
forall mult pass.
XExplicitMult mult pass -&gt; mult -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-var">HsExplicitMult</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XExplicitMult (LocatedA (mult GhcRn)) GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (mult GhcRn)
</span><a href="#local-6989586621683055430"><span class="hs-identifier hs-var">mult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055431"><span class="hs-identifier hs-var">fvs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((LocatedA (mult GhcRn), FreeVars)
 -&gt; (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars))
-&gt; RnM (LocatedA (mult GhcRn), FreeVars)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (HsArrowOf (LocatedA (mult GhcRn)) GhcRn, FreeVars)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (mult GhcPs) -&gt; RnM (LocatedA (mult GhcRn), FreeVars)
</span><a href="#local-6989586621683055427"><span class="hs-identifier hs-var">rn</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (mult GhcPs)
</span><a href="#local-6989586621683055429"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-comment">{-
Note [Renaming HsCoreTys]
~~~~~~~~~~~~~~~~~~~~~~~~~
HsCoreTy is an escape hatch that allows embedding Core Types in HsTypes.
As such, there's not much to be done in order to rename an HsCoreTy,
since it's already been renamed to some extent. However, in an attempt to
detect ill-formed HsCoreTys, the renamer checks to see if all free type
variables in an HsCoreTy are in scope. To see why this can matter, consider
this example from #18914:

  type T f = forall a. f a

  class C f where
    m :: T f

  newtype N f a = MkN (f a)
    deriving C

Because of #18914, a previous GHC would generate the following code:

  instance C f =&gt; C (N f) where
    m :: T (N f)
    m = coerce @(f a)   -- The type within @(...) is an HsCoreTy
               @(N f a) -- So is this
               (m @f)

There are two HsCoreTys in play&#8212;(f a) and (N f a)&#8212;both of which have
`f` and `a` as free type variables. The `f` is in scope from the instance head,
but `a` is completely unbound, which is what led to #18914. To avoid this sort
of mistake going forward, the renamer will now detect that `a` is unbound and
throw an error accordingly.
-}</span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-751"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnTyVar"><span class="hs-identifier hs-type">rnTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-752"></span><span id="rnTyVar"><span class="annot"><span class="annottext">rnTyVar :: RnTyKiEnv -&gt; RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#rnTyVar"><span class="hs-identifier hs-var hs-var">rnTyVar</span></a></span></span><span> </span><span id="local-6989586621683055433"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055433"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055434"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055434"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-753"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055435"><span class="annot"><a href="#local-6989586621683055435"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#lookupTypeOccRn"><span class="hs-identifier hs-var">lookupTypeOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055434"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-754"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#checkNamedWildCard"><span class="hs-identifier hs-type">checkNamedWildCard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055433"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055435"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-755"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683055435"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-756"></span><span>
</span><span id="line-757"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-type">rnLTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- Called externally; does not deal with wildcards</span><span>
</span><span id="line-759"></span><span id="rnLTyVar"><span class="annot"><span class="annottext">rnLTyVar :: GenLocated SrcSpanAnnN RdrName -&gt; RnM (GenLocated SrcSpanAnnN Name)
</span><a href="GHC.Rename.HsType.html#rnLTyVar"><span class="hs-identifier hs-var hs-var">rnLTyVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055438"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055438"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055439"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055439"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055440"><span class="annot"><a href="#local-6989586621683055440"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Env.html#lookupTypeOccRn"><span class="hs-identifier hs-var">lookupTypeOccRn</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055439"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-761"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055438"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055440"><span class="hs-identifier hs-type">tyvar</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-762"></span><span>
</span><span id="line-763"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-764"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsTyOp"><span class="hs-identifier hs-type">rnHsTyOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-765"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span id="rnHsTyOp"><span class="annot"><span class="annottext">rnHsTyOp :: RnTyKiEnv
-&gt; SDoc
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; RnM (GenLocated SrcSpanAnnN Name, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsTyOp"><span class="hs-identifier hs-var hs-var">rnHsTyOp</span></a></span></span><span> </span><span id="local-6989586621683055441"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055441"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055442"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621683055442"><span class="hs-identifier hs-var">overall_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055443"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055443"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055444"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055444"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055445"><span class="annot"><a href="#local-6989586621683055445"><span class="hs-identifier hs-var">op'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; RdrName -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#rnTyVar"><span class="hs-identifier hs-var">rnTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055441"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055444"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-768"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-type">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LangExt.TypeOperators</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-769"></span><span>           </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055445"><span class="hs-identifier hs-type">op'</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-type">`hasKey`</span></a></span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#eqTyConKey"><span class="hs-identifier hs-type">eqTyConKey</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- See [eqTyCon (~) compatibility fallback] in GHC.Rename.Env</span><span>
</span><span id="line-770"></span><span>           </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addDiagnostic"><span class="hs-identifier hs-type">addDiagnostic</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnTypeEqualityRequiresOperators"><span class="hs-identifier hs-type">TcRnTypeEqualityRequiresOperators</span></a></span><span>
</span><span id="line-771"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalTypeOperator"><span class="hs-identifier hs-type">TcRnIllegalTypeOperator</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055442"><span class="hs-identifier hs-type">overall_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055444"><span class="hs-identifier hs-type">op</span></a></span><span>
</span><span id="line-772"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055443"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055445"><span class="hs-identifier hs-type">op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#unitFV"><span class="hs-identifier hs-type">unitFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055445"><span class="hs-identifier hs-type">op'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-773"></span><span>
</span><span id="line-774"></span><span class="hs-comment">--------------</span><span>
</span><span id="line-775"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-type">checkWildCard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span>
</span><span id="line-776"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-comment">-- ^ name of the wildcard,</span><span>
</span><span id="line-777"></span><span>                            </span><span class="hs-comment">-- or 'Nothing' for an anonymous wildcard</span><span>
</span><span id="line-778"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#BadAnonWildcardContext"><span class="hs-identifier hs-type">BadAnonWildcardContext</span></a></span><span>
</span><span id="line-779"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span id="checkWildCard"><span class="annot"><span class="annottext">checkWildCard :: RnTyKiEnv -&gt; Maybe Name -&gt; Maybe BadAnonWildcardContext -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-var hs-var">checkWildCard</span></a></span></span><span> </span><span id="local-6989586621683055451"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055451"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055452"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621683055452"><span class="hs-identifier hs-var">mb_name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683055453"><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="#local-6989586621683055453"><span class="hs-identifier hs-var">bad</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055451"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-782"></span><span>             </span><span class="annot"><span class="annottext">Maybe Name -&gt; BadAnonWildcardContext -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalWildcardInType"><span class="hs-identifier hs-var">TcRnIllegalWildcardInType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621683055452"><span class="hs-identifier hs-var">mb_name</span></a></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="#local-6989586621683055453"><span class="hs-identifier hs-var">bad</span></a></span><span>
</span><span id="line-783"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-var">checkWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-784"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkAnonWildCard"><span class="hs-identifier hs-type">checkAnonWildCard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span class="hs-comment">-- Report an error if an anonymous wildcard is illegal here</span><span>
</span><span id="line-788"></span><span id="checkAnonWildCard"><span class="annot"><span class="annottext">checkAnonWildCard :: RnTyKiEnv -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkAnonWildCard"><span class="hs-identifier hs-var hs-var">checkAnonWildCard</span></a></span></span><span> </span><span id="local-6989586621683055455"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055455"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-789"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Maybe Name -&gt; Maybe BadAnonWildcardContext -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-var">checkWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055455"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055456"><span class="hs-identifier hs-var">mb_bad</span></a></span><span>
</span><span id="line-790"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-791"></span><span>    </span><span class="annot"><a href="#local-6989586621683055456"><span class="hs-identifier hs-type">mb_bad</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#BadAnonWildcardContext"><span class="hs-identifier hs-type">BadAnonWildcardContext</span></a></span><span>
</span><span id="line-792"></span><span>    </span><span id="local-6989586621683055456"><span class="annot"><span class="annottext">mb_bad :: Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055456"><span class="hs-identifier hs-var hs-var">mb_bad</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#wildCardsAllowed"><span class="hs-identifier hs-var">wildCardsAllowed</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055455"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardsNotAllowedAtAll"><span class="hs-identifier hs-var">WildcardsNotAllowedAtAll</span></a></span><span>
</span><span id="line-794"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-795"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055455"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-796"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-797"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTopConstraint"><span class="hs-identifier hs-var">RnTopConstraint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardNotLastInConstraint"><span class="hs-identifier hs-var">WildcardNotLastInConstraint</span></a></span><span>
</span><span id="line-798"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-var">RnConstraint</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardNotLastInConstraint"><span class="hs-identifier hs-var">WildcardNotLastInConstraint</span></a></span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkNamedWildCard"><span class="hs-identifier hs-type">checkNamedWildCard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span class="hs-comment">-- Report an error if a named wildcard is illegal here</span><span>
</span><span id="line-802"></span><span id="checkNamedWildCard"><span class="annot"><span class="annottext">checkNamedWildCard :: RnTyKiEnv -&gt; Name -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkNamedWildCard"><span class="hs-identifier hs-var hs-var">checkNamedWildCard</span></a></span></span><span> </span><span id="local-6989586621683055460"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055460"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055461"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055461"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-803"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Maybe Name -&gt; Maybe BadAnonWildcardContext -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkWildCard"><span class="hs-identifier hs-var">checkWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055460"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055461"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055462"><span class="hs-identifier hs-var">mb_bad</span></a></span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-805"></span><span>    </span><span id="local-6989586621683055462"><span class="annot"><span class="annottext">mb_bad :: Maybe BadAnonWildcardContext
</span><a href="#local-6989586621683055462"><span class="hs-identifier hs-var hs-var">mb_bad</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055461"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; FreeVars
</span><a href="GHC.Rename.HsType.html#rtke_nwcs"><span class="hs-identifier hs-var">rtke_nwcs</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055460"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-comment">-- Not a wildcard</span><span>
</span><span id="line-807"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#wildCardsAllowed"><span class="hs-identifier hs-var">wildCardsAllowed</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055460"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardsNotAllowedAtAll"><span class="hs-identifier hs-var">WildcardsNotAllowedAtAll</span></a></span><span>
</span><span id="line-809"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-810"></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#rtke_what"><span class="hs-identifier hs-var">rtke_what</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055460"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-811"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-comment">-- Allowed</span><span>
</span><span id="line-812"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTopConstraint"><span class="hs-identifier hs-var">RnTopConstraint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe BadAnonWildcardContext
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-comment">-- Allowed; e.g.</span><span>
</span><span id="line-813"></span><span>                  </span><span class="hs-comment">-- f :: (Eq _a) =&gt; _a -&gt; Int</span><span>
</span><span id="line-814"></span><span>                  </span><span class="hs-comment">-- g :: (_a, _b) =&gt; T _a _b -&gt; Int</span><span>
</span><span id="line-815"></span><span>                  </span><span class="hs-comment">-- The named tyvars get filled in from elsewhere</span><span>
</span><span id="line-816"></span><span>               </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnConstraint"><span class="hs-identifier hs-var">RnConstraint</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext -&gt; Maybe BadAnonWildcardContext
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardNotLastInConstraint"><span class="hs-identifier hs-var">WildcardNotLastInConstraint</span></a></span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span class="annot"><a href="GHC.Rename.HsType.html#wildCardsAllowed"><span class="hs-identifier hs-type">wildCardsAllowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-819"></span><span class="annot"><span class="hs-comment">-- ^ In what contexts are wildcards permitted</span></span><span>
</span><span id="line-820"></span><span id="wildCardsAllowed"><span class="annot"><span class="annottext">wildCardsAllowed :: RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#wildCardsAllowed"><span class="hs-identifier hs-var hs-var">wildCardsAllowed</span></a></span></span><span> </span><span id="local-6989586621683055464"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055464"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-821"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; HsDocContext
</span><a href="GHC.Rename.HsType.html#rtke_ctxt"><span class="hs-identifier hs-var">rtke_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055464"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-822"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TypeSigCtx"><span class="hs-identifier hs-type">TypeSigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-823"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TypBrCtx"><span class="hs-identifier hs-type">TypBrCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-comment">-- Template Haskell quoted type</span><span>
</span><span id="line-824"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#SpliceTypeCtx"><span class="hs-identifier hs-type">SpliceTypeCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-comment">-- Result of a Template Haskell splice</span><span>
</span><span id="line-825"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ExprWithTySigCtx"><span class="hs-identifier hs-type">ExprWithTySigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-826"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#PatCtx"><span class="hs-identifier hs-type">PatCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-827"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#RuleCtx"><span class="hs-identifier hs-type">RuleCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-828"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#FamPatCtx"><span class="hs-identifier hs-type">FamPatCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-comment">-- Not named wildcards though</span><span>
</span><span id="line-829"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#GHCiCtx"><span class="hs-identifier hs-type">GHCiCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-830"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsTypeCtx"><span class="hs-identifier hs-type">HsTypeCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-831"></span><span>       </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#StandaloneKindSigCtx"><span class="hs-identifier hs-type">StandaloneKindSigCtx</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>  </span><span class="hs-comment">-- See Note [Wildcards in standalone kind signatures] in &quot;GHC.Hs.Decls&quot;</span><span>
</span><span id="line-832"></span><span>       </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-837"></span><span class="annot"><span class="hs-comment">-- | Ensures either that we're in a type or that -XPolyKinds is set</span></span><span>
</span><span id="line-838"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkPolyKinds"><span class="hs-identifier hs-type">checkPolyKinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span>
</span><span id="line-839"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsTypeOrSigType"><span class="hs-identifier hs-type">HsTypeOrSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-840"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-841"></span><span id="checkPolyKinds"><span class="annot"><span class="annottext">checkPolyKinds :: RnTyKiEnv -&gt; HsTypeOrSigType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPolyKinds"><span class="hs-identifier hs-var hs-var">checkPolyKinds</span></a></span></span><span> </span><span id="local-6989586621683055472"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055472"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055473"><span class="annot"><span class="annottext">HsTypeOrSigType GhcPs
</span><a href="#local-6989586621683055473"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055472"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-843"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055474"><span class="annot"><a href="#local-6989586621683055474"><span class="hs-identifier hs-var">polykinds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.PolyKinds</span></span><span>
</span><span id="line-844"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055474"><span class="hs-identifier hs-type">polykinds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-845"></span><span>         </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnIllegalKind"><span class="hs-identifier hs-type">TcRnIllegalKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055473"><span class="hs-identifier hs-type">ty</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-846"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkPolyKinds"><span class="hs-identifier hs-var">checkPolyKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTypeOrSigType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span class="annot"><a href="GHC.Rename.HsType.html#notInKinds"><span class="hs-identifier hs-type">notInKinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span>
</span><span id="line-849"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-850"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-851"></span><span id="notInKinds"><span class="annot"><span class="annottext">notInKinds :: RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#notInKinds"><span class="hs-identifier hs-var hs-var">notInKinds</span></a></span></span><span> </span><span id="local-6989586621683055476"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055476"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055477"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055477"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-852"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055476"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsTypeOrSigType GhcPs -&gt; Bool -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalKind"><span class="hs-identifier hs-var">TcRnIllegalKind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; HsTypeOrSigType GhcPs
forall p. HsType p -&gt; HsTypeOrSigType p
</span><a href="GHC.Tc.Errors.Types.html#HsType"><span class="hs-identifier hs-var">HsType</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055477"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-854"></span><span class="annot"><a href="GHC.Rename.HsType.html#notInKinds"><span class="hs-identifier hs-var">notInKinds</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span class="annot"><span class="hs-comment">{- *****************************************************
*                                                      *
          Binding type variables
*                                                      *
***************************************************** -}</span></span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span id="local-6989586621683055478"><span class="annot"><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-type">bindSigTyVarsFV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-863"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055478"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055478"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-865"></span><span class="hs-comment">-- Used just before renaming the defn of a function</span><span>
</span><span id="line-866"></span><span class="hs-comment">-- with a separate type signature, to bring its tyvars into scope</span><span>
</span><span id="line-867"></span><span class="hs-comment">-- With no -XScopedTypeVariables, this is a no-op</span><span>
</span><span id="line-868"></span><span id="bindSigTyVarsFV"><span class="annot"><span class="annottext">bindSigTyVarsFV :: forall a. [Name] -&gt; RnM (a, FreeVars) -&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindSigTyVarsFV"><span class="hs-identifier hs-var hs-var">bindSigTyVarsFV</span></a></span></span><span> </span><span id="local-6989586621683055480"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055480"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span id="local-6989586621683055481"><span class="annot"><span class="annottext">RnM (a, FreeVars)
</span><a href="#local-6989586621683055481"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-869"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055482"><span class="annot"><a href="#local-6989586621683055482"><span class="hs-identifier hs-var">scoped_tyvars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.ScopedTypeVariables</span></span><span>
</span><span id="line-870"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><a href="#local-6989586621683055482"><span class="hs-identifier hs-type">scoped_tyvars</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-871"></span><span>                </span><span class="annot"><a href="#local-6989586621683055481"><span class="hs-identifier hs-type">thing_inside</span></a></span><span>
</span><span id="line-872"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-873"></span><span>                </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055480"><span class="hs-identifier hs-type">tvs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055481"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-876"></span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-type">bindHsQTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621683054240"><span class="annot"><a href="#local-6989586621683054240"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621683054242"><span class="annot"><a href="#local-6989586621683054242"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-877"></span><span>                 </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-878"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054240"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Just _  =&gt; an associated type decl</span><span>
</span><span id="line-879"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>       </span><span class="hs-comment">-- Kind variables from scope</span><span>
</span><span id="line-880"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsQTyVars"><span class="hs-identifier hs-type">LHsQTyVars</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-881"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsQTyVars"><span class="hs-identifier hs-type">LHsQTyVars</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054242"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span>                  </span><span class="hs-comment">-- The FreeKiTyVars is null &lt;=&gt; all kind variables used in the</span><span>
</span><span id="line-883"></span><span>                  </span><span class="hs-comment">-- kind signature are bound on the left.  Reason:</span><span>
</span><span id="line-884"></span><span>                  </span><span class="hs-comment">-- the last clause of Note [CUSKs: complete user-supplied kind signatures]</span><span>
</span><span id="line-885"></span><span>                  </span><span class="hs-comment">-- in GHC.Hs.Decls</span><span>
</span><span id="line-886"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054242"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>
</span><span id="line-888"></span><span class="hs-comment">-- See Note [bindHsQTyVars examples]</span><span>
</span><span id="line-889"></span><span class="hs-comment">-- (a) Bring kind variables into scope</span><span>
</span><span id="line-890"></span><span class="hs-comment">--     both (i)  passed in body_kv_occs</span><span>
</span><span id="line-891"></span><span class="hs-comment">--     and  (ii) mentioned in the kinds of hsq_bndrs</span><span>
</span><span id="line-892"></span><span class="hs-comment">-- (b) Bring type variables into scope</span><span>
</span><span id="line-893"></span><span class="hs-comment">--</span><span>
</span><span id="line-894"></span><span id="bindHsQTyVars"><span class="annot"><span class="annottext">bindHsQTyVars :: forall a b.
HsDocContext
-&gt; Maybe (a, [Name])
-&gt; FreeKiTyVars
-&gt; LHsQTyVars GhcPs
-&gt; (LHsQTyVars GhcRn -&gt; FreeKiTyVars -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsQTyVars"><span class="hs-identifier hs-var hs-var">bindHsQTyVars</span></a></span></span><span> </span><span id="local-6989586621683055529"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055529"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055530"><span class="annot"><span class="annottext">Maybe (a, [Name])
</span><a href="#local-6989586621683055530"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span id="local-6989586621683055531"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055531"><span class="hs-identifier hs-var">body_kv_occs</span></a></span></span><span> </span><span id="local-6989586621683055532"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621683055532"><span class="hs-identifier hs-var">hsq_bndrs</span></a></span></span><span> </span><span id="local-6989586621683055533"><span class="annot"><span class="annottext">LHsQTyVars GhcRn -&gt; FreeKiTyVars -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055533"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-895"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055534"><span class="annot"><span class="annottext">bndr_kv_occs :: FreeKiTyVars
</span><a href="#local-6989586621683055534"><span class="hs-identifier hs-var hs-var hs-var">bndr_kv_occs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcPs] -&gt; FreeKiTyVars
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyVarBndrsKVs"><span class="hs-identifier hs-var">extractHsTyVarBndrsKVs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
</span><a href="#local-6989586621683055536"><span class="hs-identifier hs-var">hs_tv_bndrs</span></a></span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- See Note [bindHsQTyVars examples] for what</span><span>
</span><span id="line-898"></span><span>             </span><span class="hs-comment">-- all these various things are doing</span><span>
</span><span id="line-899"></span><span>             </span><span class="annot"><a href="#local-6989586621683055537"><span class="hs-identifier hs-type">bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055538"><span class="hs-identifier hs-type">all_implicit_kvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-900"></span><span>             </span><span id="local-6989586621683055537"><span class="annot"><span class="annottext">bndrs :: FreeKiTyVars
</span><a href="#local-6989586621683055537"><span class="hs-identifier hs-var hs-var hs-var">bndrs</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
 -&gt; Maybe (GenLocated SrcSpanAnnN RdrName))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcPs) GhcPs
-&gt; Maybe (LocatedN (IdP GhcPs))
GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
-&gt; Maybe (GenLocated SrcSpanAnnN RdrName)
forall (p :: Pass) flag.
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
LHsTyVarBndr flag (GhcPass p) -&gt; Maybe (LocatedN (IdP (GhcPass p)))
</span><a href="GHC.Hs.Type.html#hsLTyVarLocName"><span class="hs-identifier hs-var">hsLTyVarLocName</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)]
</span><a href="#local-6989586621683055536"><span class="hs-identifier hs-var">hs_tv_bndrs</span></a></span><span>
</span><span id="line-901"></span><span>             </span><span id="local-6989586621683055538"><span class="annot"><span class="annottext">all_implicit_kvs :: FreeKiTyVars
</span><a href="#local-6989586621683055538"><span class="hs-identifier hs-var hs-var hs-var">all_implicit_kvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-var">filterFreeVarsToBind</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055537"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-902"></span><span>               </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055534"><span class="hs-identifier hs-var">bndr_kv_occs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055531"><span class="hs-identifier hs-var">body_kv_occs</span></a></span><span>
</span><span id="line-903"></span><span>             </span><span id="local-6989586621683055542"><span class="annot"><span class="annottext">body_remaining :: FreeKiTyVars
</span><a href="#local-6989586621683055542"><span class="hs-identifier hs-var hs-var hs-var">body_remaining</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-var">filterFreeVarsToBind</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055534"><span class="hs-identifier hs-var">bndr_kv_occs</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-904"></span><span>              </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-var">filterFreeVarsToBind</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055537"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055531"><span class="hs-identifier hs-var">body_kv_occs</span></a></span><span>
</span><span id="line-905"></span><span>
</span><span id="line-906"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055543"><span class="annot"><a href="#local-6989586621683055543"><span class="hs-identifier hs-var">implicit_kvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-907"></span><span>           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (a, [Name])
</span><a href="#local-6989586621683055530"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-908"></span><span>             </span><span class="annot"><span class="annottext">Maybe (a, [Name])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-var">filterInScopeM</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055538"><span class="hs-identifier hs-var">all_implicit_kvs</span></a></span><span>
</span><span id="line-909"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055544"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055544"><span class="hs-identifier hs-var">cls_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeNonClassM"><span class="hs-identifier hs-var">filterInScopeNonClassM</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055544"><span class="hs-identifier hs-var">cls_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055538"><span class="hs-identifier hs-var">all_implicit_kvs</span></a></span><span>
</span><span id="line-910"></span><span>                 </span><span class="hs-comment">-- See Note [Class variables and filterInScope]</span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-type">traceRn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;checkMixedVars3&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-913"></span><span>           </span><span class="annot"><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-type">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;bndrs&quot;</span></span><span>   </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055536"><span class="hs-identifier hs-type">hs_tv_bndrs</span></a></span><span>
</span><span id="line-914"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;bndr_kv_occs&quot;</span></span><span>   </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055534"><span class="hs-identifier hs-type">bndr_kv_occs</span></a></span><span>
</span><span id="line-915"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;body_kv_occs&quot;</span></span><span>   </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055531"><span class="hs-identifier hs-type">body_kv_occs</span></a></span><span>
</span><span id="line-916"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;implicit_kvs&quot;</span></span><span>   </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055543"><span class="hs-identifier hs-type">implicit_kvs</span></a></span><span>
</span><span id="line-917"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;body_remaining&quot;</span></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-type">&lt;+&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055542"><span class="hs-identifier hs-type">body_remaining</span></a></span><span>
</span><span id="line-918"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-919"></span><span>
</span><span id="line-920"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier hs-type">rnImplicitTvOccs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055530"><span class="hs-identifier hs-type">mb_assoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055543"><span class="hs-identifier hs-type">implicit_kvs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055546"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055546"><span class="hs-identifier hs-var">implicit_kv_nms'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-921"></span><span>         </span><span class="annot"><span class="annottext">HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe (a, [Name])
-&gt; [LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
-&gt; ([LHsTyVarBndr (HsBndrVis GhcPs) GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055529"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#NoWarnUnusedForalls"><span class="hs-identifier hs-var">NoWarnUnusedForalls</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (a, [Name])
</span><a href="#local-6989586621683055530"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
</span><a href="#local-6989586621683055536"><span class="hs-identifier hs-var">hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(([LHsTyVarBndr (HsBndrVis GhcPs) GhcRn] -&gt; RnM (b, FreeVars))
 -&gt; RnM (b, FreeVars))
-&gt; ([LHsTyVarBndr (HsBndrVis GhcPs) GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055548"><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcRn]
</span><a href="#local-6989586621683055548"><span class="hs-identifier hs-var">rn_bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-922"></span><span>           </span><span class="hs-comment">-- This is the only call site for bindLHsTyVarBndrs where we pass</span><span>
</span><span id="line-923"></span><span>           </span><span class="hs-comment">-- NoWarnUnusedForalls, which suppresses -Wunused-foralls warnings.</span><span>
</span><span id="line-924"></span><span>           </span><span class="hs-comment">-- See Note [Suppress -Wunused-foralls when binding LHsQTyVars].</span><span>
</span><span id="line-925"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055549"><span class="annot"><a href="#local-6989586621683055549"><span class="hs-identifier hs-var">rn_bndrs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcRn)
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv)
      (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcRn)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     [GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcPs) GhcRn
-&gt; RnM (LHsTyVarBndr (HsBndrVis GhcRn) GhcRn)
GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcRn)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn))
</span><a href="GHC.Rename.HsType.html#rnLHsTyVarBndrVisFlag"><span class="hs-identifier hs-var">rnLHsTyVarBndrVisFlag</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcRn]
[GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcRn)]
</span><a href="#local-6989586621683055548"><span class="hs-identifier hs-var">rn_bndrs</span></a></span><span>
</span><span id="line-926"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- The SrcSpan that rnImplicitTvOccs will attach to each Name will</span><span>
</span><span id="line-927"></span><span>             </span><span class="hs-comment">-- span the entire declaration to which the LHsQTyVars belongs,</span><span>
</span><span id="line-928"></span><span>             </span><span class="hs-comment">-- which will be reflected in warning and error messages. We can</span><span>
</span><span id="line-929"></span><span>             </span><span class="hs-comment">-- be a little more precise than that by pointing to the location</span><span>
</span><span id="line-930"></span><span>             </span><span class="hs-comment">-- of the LHsQTyVars instead, which is what bndrs_loc</span><span>
</span><span id="line-931"></span><span>             </span><span class="hs-comment">-- corresponds to.</span><span>
</span><span id="line-932"></span><span>             </span><span id="local-6989586621683055552"><span class="annot"><a href="#local-6989586621683055552"><span class="hs-identifier hs-var hs-var">implicit_kv_nms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; [Name] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#setNameLoc"><span class="hs-operator hs-var">`setNameLoc`</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055554"><span class="hs-identifier hs-var">bndrs_loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055546"><span class="hs-identifier hs-var">implicit_kv_nms'</span></a></span><span>
</span><span id="line-933"></span><span>
</span><span id="line-934"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#traceRn"><span class="hs-identifier hs-type">traceRn</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;bindHsQTyVars&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055532"><span class="hs-identifier hs-type">hsq_bndrs</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-type">$$</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055552"><span class="hs-identifier hs-type">implicit_kv_nms</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-type">$$</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055549"><span class="hs-identifier hs-type">rn_bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683055533"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQTvs"><span class="hs-identifier hs-type">HsQTvs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hsq_ext"><span class="hs-identifier hs-var">hsq_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055552"><span class="hs-identifier hs-type">implicit_kv_nms</span></a></span><span>
</span><span id="line-936"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#hsq_explicit"><span class="hs-identifier hs-var">hsq_explicit</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055549"><span class="hs-identifier hs-type">rn_bndrs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>                      </span><span class="annot"><a href="#local-6989586621683055542"><span class="hs-identifier hs-type">body_remaining</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-938"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-939"></span><span>    </span><span id="local-6989586621683055536"><span class="annot"><span class="annottext">hs_tv_bndrs :: [LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
</span><a href="#local-6989586621683055536"><span class="hs-identifier hs-var hs-var">hs_tv_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs -&gt; [LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
forall pass.
LHsQTyVars pass -&gt; [LHsTyVarBndr (HsBndrVis pass) pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsQTvExplicit"><span class="hs-identifier hs-var">hsQTvExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
</span><a href="#local-6989586621683055532"><span class="hs-identifier hs-var">hsq_bndrs</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span>    </span><span class="hs-comment">-- The SrcSpan of the LHsQTyVars. For example, bndrs_loc would be the</span><span>
</span><span id="line-942"></span><span>    </span><span class="hs-comment">-- highlighted part in the class below:</span><span>
</span><span id="line-943"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-944"></span><span>    </span><span class="hs-comment">--   class C (a :: j) (b :: k) where</span><span>
</span><span id="line-945"></span><span>    </span><span class="hs-comment">--            ^^^^^^^^^^^^^^^</span><span>
</span><span id="line-946"></span><span>    </span><span id="local-6989586621683055554"><span class="annot"><span class="annottext">bndrs_loc :: SrcSpan
</span><a href="#local-6989586621683055554"><span class="hs-identifier hs-var hs-var">bndrs_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
 -&gt; SrcSpan)
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)]
-&gt; [SrcSpan]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcPs) GhcPs -&gt; SrcSpan
GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
-&gt; SrcSpan
forall flag. LHsTyVarBndr flag GhcPs -&gt; SrcSpan
</span><a href="#local-6989586621683055560"><span class="hs-identifier hs-var">get_bndr_loc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr (HsBndrVis GhcPs) GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)]
</span><a href="#local-6989586621683055536"><span class="hs-identifier hs-var">hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[SrcSpan] -&gt; [SrcSpan] -&gt; [SrcSpan]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; SrcSpan)
-&gt; FreeKiTyVars -&gt; [SrcSpan]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055531"><span class="hs-identifier hs-var">body_kv_occs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-947"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SrcSpan
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bindHsQTyVars.bndrs_loc&quot;</span></span><span>
</span><span id="line-948"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621683055562"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055562"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055562"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-949"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621683055563"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055563"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621683055564"><span class="annot"><span class="annottext">[SrcSpan]
</span><a href="#local-6989586621683055564"><span class="hs-identifier hs-var">locs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055563"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">[SrcSpan] -&gt; SrcSpan
forall a. HasCallStack =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">last</span></span><span> </span><span class="annot"><span class="annottext">[SrcSpan]
</span><a href="#local-6989586621683055564"><span class="hs-identifier hs-var">locs</span></a></span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span>    </span><span class="hs-comment">-- The in-tree API annotations extend the LHsTyVarBndr location to</span><span>
</span><span id="line-952"></span><span>    </span><span class="hs-comment">-- include surrounding parens. for error messages to be</span><span>
</span><span id="line-953"></span><span>    </span><span class="hs-comment">-- compatible, we recreate the location from the contents</span><span>
</span><span id="line-954"></span><span>    </span><span id="local-6989586621683054271"><span class="annot"><a href="#local-6989586621683055560"><span class="hs-identifier hs-type">get_bndr_loc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054271"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span></span><span>
</span><span id="line-955"></span><span>    </span><span id="local-6989586621683055560"><span class="annot"><span class="annottext">get_bndr_loc :: forall flag. LHsTyVarBndr flag GhcPs -&gt; SrcSpan
</span><a href="#local-6989586621683055560"><span class="hs-identifier hs-var hs-var">get_bndr_loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055572"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055572"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621683055573"><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621683055573"><span class="hs-identifier hs-var">tvb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-956"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span>
</span><span id="line-957"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs -&gt; HsBndrVar GhcPs
forall flag (pass :: Pass).
HsTyVarBndr flag (GhcPass pass) -&gt; HsBndrVar (GhcPass pass)
</span><a href="GHC.Hs.Type.html#hsBndrVar"><span class="hs-identifier hs-var">hsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621683055573"><span class="hs-identifier hs-var">tvb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-958"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-type">HsBndrWildCard</span></a></span><span> </span><span id="local-6989586621683055576"><span class="annot"><span class="annottext">XBndrWildCard GhcPs
</span><a href="#local-6989586621683055576"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-959"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcPs
</span><a href="#local-6989586621683055576"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-960"></span><span>              </span><span class="annot"><span class="annottext">EpToken &quot;_&quot;
XBndrWildCard GhcPs
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055572"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-961"></span><span>              </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span id="local-6989586621683055580"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621683055580"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621683055580"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-962"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055582"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683055582"><span class="hs-identifier hs-var">ln</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055582"><span class="hs-identifier hs-var">ln</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-963"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs -&gt; HsBndrKind GhcPs
forall flag (pass :: Pass).
HsTyVarBndr flag (GhcPass pass) -&gt; HsBndrKind (GhcPass pass)
</span><a href="GHC.Hs.Type.html#hsBndrKind"><span class="hs-identifier hs-var">hsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621683055573"><span class="hs-identifier hs-var">tvb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-964"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrNoKind"><span class="hs-identifier hs-type">HsBndrNoKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrNoKind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span>
</span><span id="line-965"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrKind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055587"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055587"><span class="hs-identifier hs-var">lk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621683055587"><span class="hs-identifier hs-var">lk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-966"></span><span>
</span><span id="line-967"></span><span class="hs-comment">{- Note [bindHsQTyVars examples]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we have
   data T k (a::k1) (b::k) :: k2 -&gt; k1 -&gt; *

Then:
  hs_tv_bndrs = [k, a::k1, b::k], the explicitly-bound variables
  bndrs       = [k,a,b]

  bndr_kv_occs = [k,k1], kind variables free in kind signatures
                         of hs_tv_bndrs

  body_kv_occs = [k2,k1], kind variables free in the
                          result kind signature

  implicit_kvs = [k1,k2,k1], kind variables free in kind signatures
                             of hs_tv_bndrs, and not bound by bndrs

* We want to quantify add implicit bindings for implicit_kvs

* If body_kv_occs is non-empty, then there is a kind variable
  mentioned in the kind signature that is not bound &quot;on the left&quot;.
  That's one of the rules for a CUSK, so we pass that info on
  as the second argument to thing_inside.

* Order is important in these lists. Consider
    data T (a::k1) (b::k2)
  We want implicit_kvs to be [k1,k2], not [k2,k1], so that the inferred kind for
  T quantifies over kind variables in the user-specified order
    T :: forall k1 k2. k1 -&gt; k2 -&gt; Type  -- OK
    T :: forall k2 k1. k1 -&gt; k2 -&gt; Type  -- Bad
  This matters with TypeApplications

* bndr_kv_occs, body_kv_occs, and implicit_kvs can contain duplicates. All
  duplicate occurrences are removed when we bind them with rnImplicitTvOccs.

Finally, you may wonder why filterFreeVarsToBind removes in-scope variables
from bndr/body_kv_occs.  How can anything be in scope?  Answer:
HsQTyVars is /also/ used (slightly oddly) for Haskell-98 syntax
ConDecls
   data T a = forall (b::k). MkT a b
The ConDecl has a LHsQTyVars in it; but 'a' scopes over the entire
ConDecl.  Hence the local RdrEnv may be non-empty and we must filter
out 'a' from the free vars.  (Mind you, in this situation all the
implicit kind variables are bound at the data type level, so there
are none to bind in the ConDecl, so there are no implicitly bound
variables at all.

Note [Kind variable scoping]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If we have
  data T (a :: k) k = ...
we report &quot;k is out of scope&quot; for (a::k).  Reason: k is not brought
into scope until the explicit k-binding that follows.  It would be
terribly confusing to bring into scope an /implicit/ k for a's kind
and a distinct, shadowing explicit k that follows, something like
  data T {k1} (a :: k1) k = ...

So the rule is:

   the implicit binders never include any
   of the explicit binders in the group

Note that in the denerate case
  data T (a :: a) = blah
we get a complaint the second 'a' is not in scope.

That applies to foralls too: e.g.
   forall (a :: k) k . blah

But if the foralls are split, we treat the two groups separately:
   forall (a :: k). forall k. blah
Here we bring into scope an implicit k, which is later shadowed
by the explicit k.

In implementation terms

* In bindHsQTyVars 'k' is free in bndr_kv_occs; then we delete
  the binders {a,k}, and so end with no implicit binders.  Then we
  rename the binders left-to-right, and hence see that 'k' is out of
  scope in the kind of 'a'.

* Similarly in extract_hs_tv_bndrs

Note [Variables used as both types and kinds]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We bind the type variables tvs, and kvs is the set of free variables of the
kinds in the scope of the binding. Here is one typical example:

   forall a b. a -&gt; (b::k) -&gt; (c::a)

Here, tvs will be {a,b}, and kvs {k,a}.

We must make sure that kvs includes all of variables in the kinds of type
variable bindings. For instance:

   forall k (a :: k). Proxy a

If we only look in the body of the `forall` type, we will mistakenly conclude
that kvs is {}. But in fact, the type variable `k` is also used as a kind
variable in (a :: k), later in the binding. (This mistake lead to #14710.)
So tvs is {k,a} and kvs is {k}.

NB: we do this only at the binding site of 'tvs'.

Note [Suppress -Wunused-foralls when binding LHsQTyVars]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The WarnUnusedForalls flag controls whether bindLHsTyVarBndrs should warn about
explicit type variable binders that go unused (e.g., the `a` in
`forall a. Int`). We almost always want to warn about these, since unused type
variables can usually be deleted without any repercussions. There is one
exception to this rule, however: binding LHsQTyVars. Consider this example:

  data Proxy a = Proxy

The `a` in `Proxy a` is bound by an LHsQTyVars, and the code which brings it
into scope, bindHsQTyVars, will invoke bindLHsTyVarBndrs in turn. As such, it
has a choice to make about whether to emit -Wunused-foralls warnings or not.
If it /did/ emit warnings, then the `a` would be flagged as unused. However,
this is not what we want! Removing the `a` in `Proxy a` would change its kind
entirely, which is a huge price to pay for fixing a warning.

Unlike other forms of type variable binders, dropping &quot;unused&quot; variables in
an LHsQTyVars can be semantically significant. As a result, we suppress
-Wunused-foralls warnings in exactly one place: in bindHsQTyVars.
-}</span><span>
</span><span id="line-1093"></span><span>
</span><span id="line-1094"></span><span id="local-6989586621683054051"><span id="local-6989586621683054052"><span id="local-6989586621683054053"><span class="annot"><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-type">bindHsOuterTyVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#OutputableBndrFlag"><span class="hs-identifier hs-type">OutputableBndrFlag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054051"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Hs.Extension.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span>
</span><span id="line-1095"></span><span>                      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1096"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054052"><span class="hs-identifier hs-type">assoc</span></a></span><span>
</span><span id="line-1097"></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ @'Just' _@ =&gt; an associated type decl</span></span><span>
</span><span id="line-1098"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1099"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterTyVarBndrs"><span class="hs-identifier hs-type">HsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054051"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1100"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterTyVarBndrs"><span class="hs-identifier hs-type">HsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054051"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054053"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054053"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1102"></span><span id="bindHsOuterTyVarBndrs"><span class="annot"><span class="annottext">bindHsOuterTyVarBndrs :: forall flag assoc a.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; Maybe assoc
-&gt; FreeKiTyVars
-&gt; HsOuterTyVarBndrs flag GhcPs
-&gt; (HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsOuterTyVarBndrs"><span class="hs-identifier hs-var hs-var">bindHsOuterTyVarBndrs</span></a></span></span><span> </span><span id="local-6989586621683055591"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055591"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055592"><span class="annot"><span class="annottext">Maybe assoc
</span><a href="#local-6989586621683055592"><span class="hs-identifier hs-var">mb_cls</span></a></span></span><span> </span><span id="local-6989586621683055593"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055593"><span class="hs-identifier hs-var">implicit_vars</span></a></span></span><span> </span><span id="local-6989586621683055594"><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcPs
</span><a href="#local-6989586621683055594"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span> </span><span id="local-6989586621683055595"><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055595"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1103"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcPs
</span><a href="#local-6989586621683055594"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1104"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1105"></span><span>      </span><span class="annot"><span class="annottext">Maybe assoc
-&gt; FreeKiTyVars
-&gt; ([Name] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall assoc a.
Maybe assoc
-&gt; FreeKiTyVars
-&gt; ([Name] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnImplicitTvOccs"><span class="hs-identifier hs-var">rnImplicitTvOccs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe assoc
</span><a href="#local-6989586621683055592"><span class="hs-identifier hs-var">mb_cls</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055593"><span class="hs-identifier hs-var">implicit_vars</span></a></span><span> </span><span class="annot"><span class="annottext">(([Name] -&gt; RnM (a, FreeVars)) -&gt; RnM (a, FreeVars))
-&gt; ([Name] -&gt; RnM (a, FreeVars)) -&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055596"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683055596"><span class="hs-identifier hs-var">implicit_vars'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1106"></span><span>        </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055595"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">(HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars))
-&gt; HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hso_ximplicit :: XHsOuterImplicit GhcRn
</span><a href="Language.Haskell.Syntax.Type.html#hso_ximplicit"><span class="hs-identifier hs-var">hso_ximplicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name]
XHsOuterImplicit GhcRn
</span><a href="#local-6989586621683055596"><span class="hs-identifier hs-var">implicit_vars'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1107"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">hso_bndrs :: forall flag pass.
HsOuterTyVarBndrs flag pass -&gt; [LHsTyVarBndr flag (NoGhcTc pass)]
</span><a href="Language.Haskell.Syntax.Type.html#hso_bndrs"><span class="hs-identifier hs-var">hso_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055599"><span class="annot"><span class="annottext">[LHsTyVarBndr flag (NoGhcTc GhcPs)]
</span><a href="#local-6989586621683055599"><span class="hs-identifier hs-var">exp_bndrs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1108"></span><span>      </span><span class="hs-comment">-- Note: If we pass mb_cls instead of Nothing below, bindLHsTyVarBndrs</span><span>
</span><span id="line-1109"></span><span>      </span><span class="hs-comment">-- will use class variables for any names the user meant to bring in</span><span>
</span><span id="line-1110"></span><span>      </span><span class="hs-comment">-- scope here. This is an explicit forall, so we want fresh names, not</span><span>
</span><span id="line-1111"></span><span>      </span><span class="hs-comment">-- class variables. Thus: always pass Nothing.</span><span>
</span><span id="line-1112"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe (ZonkAny 2)
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055591"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ZonkAny 2)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag (NoGhcTc GhcPs)]
[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683055599"><span class="hs-identifier hs-var">exp_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(([LHsTyVarBndr flag GhcRn] -&gt; RnM (a, FreeVars))
 -&gt; RnM (a, FreeVars))
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055601"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcRn]
</span><a href="#local-6989586621683055601"><span class="hs-identifier hs-var">exp_bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1113"></span><span>        </span><span class="annot"><span class="annottext">HsDocContext -&gt; [LHsTyVarBndr flag GhcRn] -&gt; TcRn ()
forall flag (p :: Pass).
HsDocContext -&gt; [LHsTyVarBndr flag (GhcPass p)] -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkForAllTelescopeWildcardBndrs"><span class="hs-identifier hs-var">checkForAllTelescopeWildcardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055591"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcRn]
</span><a href="#local-6989586621683055601"><span class="hs-identifier hs-var">exp_bndrs'</span></a></span><span>
</span><span id="line-1114"></span><span>        </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055595"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">(HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars))
-&gt; HsOuterTyVarBndrs flag GhcRn -&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hso_xexplicit :: XHsOuterExplicit GhcRn flag
</span><a href="Language.Haskell.Syntax.Type.html#hso_xexplicit"><span class="hs-identifier hs-var">hso_xexplicit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XHsOuterExplicit GhcRn flag
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1115"></span><span>                                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hso_bndrs :: [LHsTyVarBndr flag (NoGhcTc GhcRn)]
</span><a href="Language.Haskell.Syntax.Type.html#hso_bndrs"><span class="hs-identifier hs-var">hso_bndrs</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag (NoGhcTc GhcRn)]
[LHsTyVarBndr flag GhcRn]
</span><a href="#local-6989586621683055601"><span class="hs-identifier hs-var">exp_bndrs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1116"></span><span>
</span><span id="line-1117"></span><span class="hs-comment">-- See Note [Term variable capture and implicit quantification]</span><span>
</span><span id="line-1118"></span><span class="annot"><a href="GHC.Rename.HsType.html#warn_term_var_capture"><span class="hs-identifier hs-type">warn_term_var_capture</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span id="warn_term_var_capture"><span class="annot"><span class="annottext">warn_term_var_capture :: GenLocated SrcSpanAnnN RdrName -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warn_term_var_capture"><span class="hs-identifier hs-var hs-var">warn_term_var_capture</span></a></span></span><span> </span><span id="local-6989586621683055605"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055605"><span class="hs-identifier hs-var">lVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1120"></span><span>    </span><span id="local-6989586621683055606"><span class="annot"><a href="#local-6989586621683055606"><span class="hs-identifier hs-var">gbl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcRn GlobalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-var">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-1121"></span><span>    </span><span id="local-6989586621683055608"><span class="annot"><a href="#local-6989586621683055608"><span class="hs-identifier hs-var">local_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getLocalRdrEnv"><span class="hs-identifier hs-type">getLocalRdrEnv</span></a></span><span>
</span><span id="line-1122"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-type">demoteRdrNameTv</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055605"><span class="hs-identifier hs-type">lVar</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1123"></span><span>      </span><span class="annot"><span class="annottext">Maybe RdrName
</span><span class="hs-identifier hs-var">Nothing</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683055611"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055611"><span class="hs-identifier hs-var">demoted_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1125"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055612"><span class="annot"><span class="annottext">global_vars :: [GlobalRdrEltX GREInfo]
</span><a href="#local-6989586621683055612"><span class="hs-identifier hs-var hs-var hs-var">global_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; LookupGRE GREInfo -&gt; [GlobalRdrEltX GREInfo]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683055606"><span class="hs-identifier hs-var">gbl_env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall info. RdrName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-var">LookupRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055611"><span class="hs-identifier hs-var">demoted_name</span></a></span><span> </span><span class="annot"><span class="annottext">WhichGREs GREInfo
forall info. WhichGREs info
</span><a href="GHC.Types.Name.Reader.html#SameNameSpace"><span class="hs-identifier hs-var">SameNameSpace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1126"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055616"><span class="annot"><span class="annottext">mlocal_var :: Maybe Name
</span><a href="#local-6989586621683055616"><span class="hs-identifier hs-var hs-var">mlocal_var</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#lookupLocalRdrEnv"><span class="hs-identifier hs-var">lookupLocalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621683055608"><span class="hs-identifier hs-var">local_env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055611"><span class="hs-identifier hs-var">demoted_name</span></a></span><span>
</span><span id="line-1127"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621683055616"><span class="hs-identifier hs-var">mlocal_var</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1128"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683055618"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055618"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; Either [GlobalRdrEltX GREInfo] Name -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warnCapturedTerm"><span class="hs-identifier hs-var">warnCapturedTerm</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055605"><span class="hs-identifier hs-var">lVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Either [GlobalRdrEltX GREInfo] Name
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055618"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1129"></span><span>          </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GlobalRdrEltX GREInfo] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX GREInfo]
</span><a href="#local-6989586621683055612"><span class="hs-identifier hs-var">global_vars</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1130"></span><span>                         </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; Either [GlobalRdrEltX GREInfo] Name -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warnCapturedTerm"><span class="hs-identifier hs-var">warnCapturedTerm</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055605"><span class="hs-identifier hs-var">lVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GlobalRdrEltX GREInfo] -&gt; Either [GlobalRdrEltX GREInfo] Name
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX GREInfo]
</span><a href="#local-6989586621683055612"><span class="hs-identifier hs-var">global_vars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span id="local-6989586621683054102"><span class="annot"><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier hs-type">bindHsForAllTelescope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1133"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1134"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1135"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054102"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1136"></span><span id="bindHsForAllTelescope"><span class="annot"><span class="annottext">bindHsForAllTelescope :: forall a.
HsDocContext
-&gt; HsForAllTelescope GhcPs
-&gt; (HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsForAllTelescope"><span class="hs-identifier hs-var hs-var">bindHsForAllTelescope</span></a></span></span><span> </span><span id="local-6989586621683055633"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055633"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055634"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683055634"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621683055635"><span class="annot"><span class="annottext">HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055635"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1137"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683055634"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1138"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-type">HsForAllVis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsf_vis_bndrs :: forall pass. HsForAllTelescope pass -&gt; [LHsTyVarBndr () pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsf_vis_bndrs"><span class="hs-identifier hs-var">hsf_vis_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055638"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621683055638"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1139"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe (ZonkAny 0)
-&gt; [LHsTyVarBndr () GhcPs]
-&gt; ([LHsTyVarBndr () GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055633"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ZonkAny 0)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621683055638"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(([LHsTyVarBndr () GhcRn] -&gt; RnM (a, FreeVars))
 -&gt; RnM (a, FreeVars))
-&gt; ([LHsTyVarBndr () GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055639"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621683055639"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1140"></span><span>        </span><span class="annot"><span class="annottext">HsDocContext -&gt; [LHsTyVarBndr () GhcRn] -&gt; TcRn ()
forall flag (p :: Pass).
HsDocContext -&gt; [LHsTyVarBndr flag (GhcPass p)] -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkForAllTelescopeWildcardBndrs"><span class="hs-identifier hs-var">checkForAllTelescopeWildcardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055633"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621683055639"><span class="hs-identifier hs-var">bndrs'</span></a></span><span>
</span><span id="line-1141"></span><span>        </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055635"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">(HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnnForallVis
-&gt; [LHsTyVarBndr () GhcRn] -&gt; HsForAllTelescope GhcRn
forall (p :: Pass).
EpAnnForallVis
-&gt; [LHsTyVarBndr () (GhcPass p)] -&gt; HsForAllTelescope (GhcPass p)
</span><a href="GHC.Hs.Type.html#mkHsForAllVisTele"><span class="hs-identifier hs-var">mkHsForAllVisTele</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnForallVis
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcRn]
</span><a href="#local-6989586621683055639"><span class="hs-identifier hs-var">bndrs'</span></a></span><span>
</span><span id="line-1142"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsf_invis_bndrs :: forall pass.
HsForAllTelescope pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsf_invis_bndrs"><span class="hs-identifier hs-var">hsf_invis_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683055643"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683055643"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1143"></span><span>      </span><span class="annot"><span class="annottext">HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe (ZonkAny 1)
-&gt; [LHsTyVarBndr Specificity GhcPs]
-&gt; ([LHsTyVarBndr Specificity GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var">bindLHsTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055633"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ZonkAny 1)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683055643"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(([LHsTyVarBndr Specificity GhcRn] -&gt; RnM (a, FreeVars))
 -&gt; RnM (a, FreeVars))
-&gt; ([LHsTyVarBndr Specificity GhcRn] -&gt; RnM (a, FreeVars))
-&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055644"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621683055644"><span class="hs-identifier hs-var">bndrs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1144"></span><span>        </span><span class="annot"><span class="annottext">HsDocContext -&gt; [LHsTyVarBndr Specificity GhcRn] -&gt; TcRn ()
forall flag (p :: Pass).
HsDocContext -&gt; [LHsTyVarBndr flag (GhcPass p)] -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkForAllTelescopeWildcardBndrs"><span class="hs-identifier hs-var">checkForAllTelescopeWildcardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055633"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621683055644"><span class="hs-identifier hs-var">bndrs'</span></a></span><span>
</span><span id="line-1145"></span><span>        </span><span class="annot"><span class="annottext">HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars)
</span><a href="#local-6989586621683055635"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="annot"><span class="annottext">(HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars))
-&gt; HsForAllTelescope GhcRn -&gt; RnM (a, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnnForallInvis
-&gt; [LHsTyVarBndr Specificity GhcRn] -&gt; HsForAllTelescope GhcRn
forall (p :: Pass).
EpAnnForallInvis
-&gt; [LHsTyVarBndr Specificity (GhcPass p)]
-&gt; HsForAllTelescope (GhcPass p)
</span><a href="GHC.Hs.Type.html#mkHsForAllInvisTele"><span class="hs-identifier hs-var">mkHsForAllInvisTele</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnForallInvis
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcRn]
</span><a href="#local-6989586621683055644"><span class="hs-identifier hs-var">bndrs'</span></a></span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span class="hs-comment">-- See Note [Wildcard binders in disallowed contexts] in GHC.Hs.Type</span><span>
</span><span id="line-1148"></span><span id="local-6989586621683054294"><span id="local-6989586621683054295"><span class="annot"><a href="GHC.Rename.HsType.html#checkForAllTelescopeWildcardBndrs"><span class="hs-identifier hs-type">checkForAllTelescopeWildcardBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1149"></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054294"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054295"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1150"></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1151"></span><span id="checkForAllTelescopeWildcardBndrs"><span class="annot"><span class="annottext">checkForAllTelescopeWildcardBndrs :: forall flag (p :: Pass).
HsDocContext -&gt; [LHsTyVarBndr flag (GhcPass p)] -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkForAllTelescopeWildcardBndrs"><span class="hs-identifier hs-var hs-var">checkForAllTelescopeWildcardBndrs</span></a></span></span><span> </span><span id="local-6989586621683055649"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055649"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055650"><span class="annot"><span class="annottext">[LHsTyVarBndr flag (GhcPass p)]
</span><a href="#local-6989586621683055650"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; TcRn ()) -&gt; [SrcSpan] -&gt; TcRn ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRn ()
</span><a href="#local-6989586621683055651"><span class="hs-identifier hs-var">report_err</span></a></span><span> </span><span class="annot"><span class="annottext">[SrcSpan]
</span><a href="#local-6989586621683055652"><span class="hs-identifier hs-var">wc_bndr_locs</span></a></span><span>
</span><span id="line-1152"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1153"></span><span>    </span><span class="annot"><a href="#local-6989586621683055651"><span class="hs-identifier hs-type">report_err</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span>    </span><span id="local-6989586621683055651"><span class="annot"><span class="annottext">report_err :: SrcSpan -&gt; TcRn ()
</span><a href="#local-6989586621683055651"><span class="hs-identifier hs-var hs-var">report_err</span></a></span></span><span> </span><span id="local-6989586621683055653"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055653"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1155"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErrAt"><span class="hs-identifier hs-var">addErrAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621683055653"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055649"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1156"></span><span>        </span><span class="annot"><span class="annottext">Maybe Name -&gt; BadAnonWildcardContext -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalWildcardInType"><span class="hs-identifier hs-var">TcRnIllegalWildcardInType</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">BadAnonWildcardContext
</span><a href="GHC.Tc.Errors.Types.html#WildcardBndrInForallTelescope"><span class="hs-identifier hs-var">WildcardBndrInForallTelescope</span></a></span><span>
</span><span id="line-1157"></span><span>
</span><span id="line-1158"></span><span>    </span><span class="annot"><a href="#local-6989586621683055652"><span class="hs-identifier hs-type">wc_bndr_locs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1159"></span><span>    </span><span id="local-6989586621683055652"><span class="annot"><span class="annottext">wc_bndr_locs :: [SrcSpan]
</span><a href="#local-6989586621683055652"><span class="hs-identifier hs-var hs-var">wc_bndr_locs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055656"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055656"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055656"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-type">HsTvb</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarBndr (GhcPass p)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">flag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-type">HsBndrWildCard</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">HsBndrKind (GhcPass p)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag (GhcPass p)]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag (GhcPass p))]
</span><a href="#local-6989586621683055650"><span class="hs-identifier hs-var">tvbs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1160"></span><span>
</span><span id="line-1161"></span><span class="hs-comment">-- | Should GHC warn if a quantified type variable goes unused? Usually, the</span><span>
</span><span id="line-1162"></span><span class="hs-comment">-- answer is \&quot;yes\&quot;, but in the particular case of binding 'LHsQTyVars', we</span><span>
</span><span id="line-1163"></span><span class="hs-comment">-- avoid emitting warnings.</span><span>
</span><span id="line-1164"></span><span class="hs-comment">-- See @Note [Suppress -Wunused-foralls when binding LHsQTyVars]@.</span><span>
</span><span id="line-1165"></span><span class="hs-keyword">data</span><span> </span><span id="WarnUnusedForalls"><span class="annot"><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span></span><span>
</span><span id="line-1166"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="WarnUnusedForalls"><span class="annot"><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span></span><span>
</span><span id="line-1167"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NoWarnUnusedForalls"><span class="annot"><a href="GHC.Rename.HsType.html#NoWarnUnusedForalls"><span class="hs-identifier hs-var">NoWarnUnusedForalls</span></a></span></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-type">WarnUnusedForalls</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1170"></span><span>  </span><span id="local-6989586621683055661"><span class="annot"><span class="annottext">ppr :: WarnUnusedForalls -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621683055662"><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="#local-6989586621683055662"><span class="hs-identifier hs-var">wuf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; String -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="#local-6989586621683055662"><span class="hs-identifier hs-var">wuf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1171"></span><span>    </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WarnUnusedForalls&quot;</span></span><span>
</span><span id="line-1172"></span><span>    </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#NoWarnUnusedForalls"><span class="hs-identifier hs-var">NoWarnUnusedForalls</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NoWarnUnusedForalls&quot;</span></span><span>
</span><span id="line-1173"></span><span>
</span><span id="line-1174"></span><span id="local-6989586621683054263"><span id="local-6989586621683054264"><span id="local-6989586621683054265"><span class="annot"><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-type">bindLHsTyVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#OutputableBndrFlag"><span class="hs-identifier hs-type">OutputableBndrFlag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054263"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Hs.Extension.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>                  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1176"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-type">WarnUnusedForalls</span></a></span><span>
</span><span id="line-1177"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054264"><span class="hs-identifier hs-type">a</span></a></span><span>               </span><span class="hs-comment">-- Just _  =&gt; an associated type decl</span><span>
</span><span id="line-1178"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054263"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- User-written tyvars</span><span>
</span><span id="line-1179"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054263"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054265"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1180"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054265"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1181"></span><span id="bindLHsTyVarBndrs"><span class="annot"><span class="annottext">bindLHsTyVarBndrs :: forall flag a b.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext
-&gt; WarnUnusedForalls
-&gt; Maybe a
-&gt; [LHsTyVarBndr flag GhcPs]
-&gt; ([LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndrs"><span class="hs-identifier hs-var hs-var">bindLHsTyVarBndrs</span></a></span></span><span> </span><span id="local-6989586621683055673"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055673"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055674"><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="#local-6989586621683055674"><span class="hs-identifier hs-var">wuf</span></a></span></span><span> </span><span id="local-6989586621683055675"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055675"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span id="local-6989586621683055676"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683055676"><span class="hs-identifier hs-var">tv_bndrs</span></a></span></span><span> </span><span id="local-6989586621683055677"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055677"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1182"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isNothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055675"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkShadowedRdrNames"><span class="hs-identifier hs-var">checkShadowedRdrNames</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055678"><span class="hs-identifier hs-var">tv_names_w_loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1183"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; TcRn ()
</span><a href="GHC.Rename.Utils.html#checkDupRdrNames"><span class="hs-identifier hs-var">checkDupRdrNames</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683055678"><span class="hs-identifier hs-var">tv_names_w_loc</span></a></span><span>
</span><span id="line-1184"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; ([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
    -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055679"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683055676"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcRn] -&gt; RnM (b, FreeVars)
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055677"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1185"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1186"></span><span>    </span><span id="local-6989586621683055678"><span class="annot"><span class="annottext">tv_names_w_loc :: FreeKiTyVars
</span><a href="#local-6989586621683055678"><span class="hs-identifier hs-var hs-var">tv_names_w_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
 -&gt; Maybe (GenLocated SrcSpanAnnN RdrName))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcPs -&gt; Maybe (LocatedN (IdP GhcPs))
GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
-&gt; Maybe (GenLocated SrcSpanAnnN RdrName)
forall (p :: Pass) flag.
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
LHsTyVarBndr flag (GhcPass p) -&gt; Maybe (LocatedN (IdP (GhcPass p)))
</span><a href="GHC.Hs.Type.html#hsLTyVarLocName"><span class="hs-identifier hs-var">hsLTyVarLocName</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683055676"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span>
</span><span id="line-1187"></span><span>
</span><span id="line-1188"></span><span>    </span><span id="local-6989586621683055679"><span class="annot"><span class="annottext">go :: [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; ([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
    -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055679"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span id="local-6989586621683055680"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055680"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055680"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1189"></span><span>    </span><span class="annot"><a href="#local-6989586621683055679"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055681"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
</span><a href="#local-6989586621683055681"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621683055682"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683055682"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055683"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055683"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; Maybe a
-&gt; LHsTyVarBndr flag GhcPs
-&gt; (LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
forall a flag b.
HsDocContext
-&gt; Maybe a
-&gt; LHsTyVarBndr flag GhcPs
-&gt; (LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndr"><span class="hs-identifier hs-var">bindLHsTyVarBndr</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055673"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055675"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcPs
GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
</span><a href="#local-6989586621683055681"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">((LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
 -&gt; RnM (b, FreeVars))
-&gt; (LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055684"><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcRn
</span><a href="#local-6989586621683055684"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1190"></span><span>                             </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055685"><span class="annot"><a href="#local-6989586621683055685"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055686"><span class="annot"><a href="#local-6989586621683055686"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; ([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
    -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055679"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683055682"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">(([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
  -&gt; RnM (b, FreeVars))
 -&gt; RnM (b, FreeVars))
-&gt; ([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
    -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621683055687"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
</span><a href="#local-6989586621683055687"><span class="hs-identifier hs-var">bs'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1191"></span><span>                                                </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055683"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcRn
GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
</span><a href="#local-6989586621683055684"><span class="hs-identifier hs-var">b'</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)]
</span><a href="#local-6989586621683055687"><span class="hs-identifier hs-var">bs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1192"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="#local-6989586621683055688"><span class="hs-identifier hs-type">warn_unused</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055684"><span class="hs-identifier hs-type">b'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055686"><span class="hs-identifier hs-type">fvs</span></a></span><span>
</span><span id="line-1193"></span><span>                                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055685"><span class="hs-identifier hs-type">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055686"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1194"></span><span>
</span><span id="line-1195"></span><span>    </span><span id="local-6989586621683055688"><span class="annot"><span class="annottext">warn_unused :: GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
-&gt; FreeVars -&gt; TcRn ()
</span><a href="#local-6989586621683055688"><span class="hs-identifier hs-var hs-var">warn_unused</span></a></span></span><span> </span><span id="local-6989586621683055689"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
</span><a href="#local-6989586621683055689"><span class="hs-identifier hs-var">tv_bndr</span></a></span></span><span> </span><span id="local-6989586621683055690"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055690"><span class="hs-identifier hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="#local-6989586621683055674"><span class="hs-identifier hs-var">wuf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1196"></span><span>      </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#WarnUnusedForalls"><span class="hs-identifier hs-var">WarnUnusedForalls</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; LHsTyVarBndr flag GhcRn -&gt; FreeVars -&gt; TcRn ()
forall flag.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext -&gt; LHsTyVarBndr flag GhcRn -&gt; FreeVars -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warnUnusedForAll"><span class="hs-identifier hs-var">warnUnusedForAll</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055673"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcRn
GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
</span><a href="#local-6989586621683055689"><span class="hs-identifier hs-var">tv_bndr</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055690"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-1197"></span><span>      </span><span class="annot"><span class="annottext">WarnUnusedForalls
</span><a href="GHC.Rename.HsType.html#NoWarnUnusedForalls"><span class="hs-identifier hs-var">NoWarnUnusedForalls</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span id="local-6989586621683054324"><span id="local-6989586621683054325"><span id="local-6989586621683054326"><span class="annot"><a href="GHC.Rename.HsType.html#bindLHsTyVarBndr"><span class="hs-identifier hs-type">bindLHsTyVarBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span>
</span><span id="line-1200"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054324"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="hs-comment">-- associated class</span><span>
</span><span id="line-1201"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054325"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1202"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054325"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054326"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054326"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1204"></span><span id="bindLHsTyVarBndr"><span class="annot"><span class="annottext">bindLHsTyVarBndr :: forall a flag b.
HsDocContext
-&gt; Maybe a
-&gt; LHsTyVarBndr flag GhcPs
-&gt; (LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindLHsTyVarBndr"><span class="hs-identifier hs-var hs-var">bindLHsTyVarBndr</span></a></span></span><span> </span><span id="local-6989586621683055695"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055695"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621683055696"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055696"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055697"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055697"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-type">HsTvb</span></a></span><span> </span><span id="local-6989586621683055698"><span class="annot"><span class="annottext">XTyVarBndr GhcPs
</span><a href="#local-6989586621683055698"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621683055699"><span class="annot"><span class="annottext">flag
</span><a href="#local-6989586621683055699"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span id="local-6989586621683055700"><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621683055700"><span class="hs-identifier hs-var">bvar</span></a></span></span><span> </span><span id="local-6989586621683055701"><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621683055701"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055702"><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055702"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1205"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055703"><span class="annot"><a href="#local-6989586621683055703"><span class="hs-identifier hs-var">kind'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055704"><span class="annot"><a href="#local-6989586621683055704"><span class="hs-identifier hs-var">fvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDocContext
-&gt; HsBndrKind GhcPs -&gt; RnM (HsBndrKind GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsBndrKind"><span class="hs-identifier hs-var">rnHsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055695"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621683055701"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-1206"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055706"><span class="annot"><a href="#local-6989586621683055706"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055707"><span class="annot"><a href="#local-6989586621683055707"><span class="hs-identifier hs-var">fvs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsBndrVar"><span class="hs-identifier hs-type">bindHsBndrVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055696"><span class="hs-identifier hs-type">mb_assoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055700"><span class="hs-identifier hs-type">bvar</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055709"><span class="annot"><span class="annottext">HsBndrVar GhcRn
</span><a href="#local-6989586621683055709"><span class="hs-identifier hs-var">bvar'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1207"></span><span>            </span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcRn -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055702"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr flag GhcRn
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055697"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVarBndr GhcRn
-&gt; flag
-&gt; HsBndrVar GhcRn
-&gt; HsBndrKind GhcRn
-&gt; HsTyVarBndr flag GhcRn
forall flag pass.
XTyVarBndr pass
-&gt; flag
-&gt; HsBndrVar pass
-&gt; HsBndrKind pass
-&gt; HsTyVarBndr flag pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-var">HsTvb</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
XTyVarBndr GhcRn
</span><a href="#local-6989586621683055698"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">flag
</span><a href="#local-6989586621683055699"><span class="hs-identifier hs-var">fl</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVar GhcRn
</span><a href="#local-6989586621683055709"><span class="hs-identifier hs-var">bvar'</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrKind GhcRn
</span><a href="#local-6989586621683055703"><span class="hs-identifier hs-var">kind'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1208"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055706"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055704"><span class="hs-identifier hs-type">fvs1</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#plusFV"><span class="hs-operator hs-type">`plusFV`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055707"><span class="hs-identifier hs-type">fvs2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1209"></span><span>
</span><span id="line-1210"></span><span id="local-6989586621683054331"><span id="local-6989586621683054332"><span class="annot"><a href="GHC.Rename.HsType.html#bindHsBndrVar"><span class="hs-identifier hs-type">bindHsBndrVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054331"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="hs-comment">-- associated class</span><span>
</span><span id="line-1211"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1212"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054332"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1213"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683054332"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1214"></span><span id="bindHsBndrVar"><span class="annot"><span class="annottext">bindHsBndrVar :: forall a b.
Maybe a
-&gt; HsBndrVar GhcPs
-&gt; (HsBndrVar GhcRn -&gt; RnM (b, FreeVars))
-&gt; RnM (b, FreeVars)
</span><a href="GHC.Rename.HsType.html#bindHsBndrVar"><span class="hs-identifier hs-var hs-var">bindHsBndrVar</span></a></span></span><span> </span><span id="local-6989586621683055711"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055711"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055712"><span class="annot"><span class="annottext">lrdr :: LIdP GhcPs
</span><a href="#local-6989586621683055712"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055713"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055713"><span class="hs-identifier hs-var">lv</span></a></span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055714"><span class="annot"><span class="annottext">HsBndrVar GhcRn -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055714"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1215"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055715"><span class="annot"><a href="#local-6989586621683055715"><span class="hs-identifier hs-var">tv_nm</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe a
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
forall a.
Maybe a
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#newTyVarNameRn"><span class="hs-identifier hs-var">newTyVarNameRn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055711"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055712"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1216"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html#bindLocalNamesFV"><span class="hs-identifier hs-type">bindLocalNamesFV</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621683055715"><span class="hs-identifier hs-type">tv_nm</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1217"></span><span>         </span><span class="annot"><a href="#local-6989586621683055714"><span class="hs-identifier hs-type">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055713"><span class="hs-identifier hs-type">lv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055715"><span class="hs-identifier hs-type">tv_nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1218"></span><span class="annot"><a href="GHC.Rename.HsType.html#bindHsBndrVar"><span class="hs-identifier hs-var">bindHsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-type">HsBndrWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055716"><span class="annot"><span class="annottext">HsBndrVar GhcRn -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055716"><span class="hs-identifier hs-var">thing_inside</span></a></span></span><span>
</span><span id="line-1219"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBndrVar GhcRn -&gt; RnM (b, FreeVars)
</span><a href="#local-6989586621683055716"><span class="hs-identifier hs-var">thing_inside</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBndrWildCard GhcRn -&gt; HsBndrVar GhcRn
forall pass. XBndrWildCard pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-var">HsBndrWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrWildCard GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1220"></span><span>
</span><span id="line-1221"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsBndrKind"><span class="hs-identifier hs-type">rnHsBndrKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1222"></span><span id="rnHsBndrKind"><span class="annot"><span class="annottext">rnHsBndrKind :: HsDocContext
-&gt; HsBndrKind GhcPs -&gt; RnM (HsBndrKind GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnHsBndrKind"><span class="hs-identifier hs-var hs-var">rnHsBndrKind</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrNoKind"><span class="hs-identifier hs-type">HsBndrNoKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrNoKind GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsBndrKind GhcRn, FreeVars) -&gt; RnM (HsBndrKind GhcRn, FreeVars)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBndrNoKind GhcRn -&gt; HsBndrKind GhcRn
forall pass. XBndrNoKind pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrNoKind"><span class="hs-identifier hs-var">HsBndrNoKind</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrNoKind GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="GHC.Types.Name.Set.html#emptyFVs"><span class="hs-identifier hs-var">emptyFVs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1223"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsBndrKind"><span class="hs-identifier hs-var">rnHsBndrKind</span></a></span><span> </span><span id="local-6989586621683055717"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055717"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrKind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055718"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055718"><span class="hs-identifier hs-var">kind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1224"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055719"><span class="annot"><a href="#local-6989586621683055719"><span class="hs-identifier hs-var">sig_ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.KindSignatures</span></span><span>
</span><span id="line-1225"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055719"><span class="hs-identifier hs-type">sig_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier hs-type">badKindSigErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055717"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055718"><span class="hs-identifier hs-type">kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055720"><span class="annot"><a href="#local-6989586621683055720"><span class="hs-identifier hs-var">kind'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055721"><span class="annot"><a href="#local-6989586621683055721"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsKind"><span class="hs-identifier hs-type">rnLHsKind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055717"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055718"><span class="hs-identifier hs-type">kind</span></a></span><span>
</span><span id="line-1227"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055720"><span class="hs-identifier hs-type">kind'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055721"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1228"></span><span>
</span><span id="line-1229"></span><span class="hs-comment">-- Check for TypeAbstractions and update the type parameter of HsBndrVis.</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- The binder itself is already renamed and is returned unmodified.</span><span>
</span><span id="line-1231"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnLHsTyVarBndrVisFlag"><span class="hs-identifier hs-type">rnLHsTyVarBndrVisFlag</span></a></span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1234"></span><span id="rnLHsTyVarBndrVisFlag"><span class="annot"><span class="annottext">rnLHsTyVarBndrVisFlag :: LHsTyVarBndr (HsBndrVis GhcPs) GhcRn
-&gt; RnM (LHsTyVarBndr (HsBndrVis GhcRn) GhcRn)
</span><a href="GHC.Rename.HsType.html#rnLHsTyVarBndrVisFlag"><span class="hs-identifier hs-var hs-var">rnLHsTyVarBndrVisFlag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055722"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055722"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055723"><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn
</span><a href="#local-6989586621683055723"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1235"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055724"><span class="annot"><span class="annottext">lbndr :: GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
</span><a href="#local-6989586621683055724"><span class="hs-identifier hs-var hs-var hs-var">lbndr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr (HsBndrVis GhcRn) GhcRn
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055722"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HsBndrVis GhcPs -&gt; HsBndrVis GhcRn)
-&gt; HsTyVarBndr (HsBndrVis GhcPs) GhcRn
-&gt; HsTyVarBndr (HsBndrVis GhcRn) GhcRn
forall flag flag' (pass :: Pass).
(flag -&gt; flag')
-&gt; HsTyVarBndr flag (GhcPass pass)
-&gt; HsTyVarBndr flag' (GhcPass pass)
</span><a href="GHC.Hs.Type.html#updateHsTyVarBndrFlag"><span class="hs-identifier hs-var">updateHsTyVarBndrFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs -&gt; HsBndrVis GhcRn
</span><a href="GHC.Rename.HsType.html#rnHsBndrVis"><span class="hs-identifier hs-var">rnHsBndrVis</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn
</span><a href="#local-6989586621683055723"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>  </span><span class="annot"><span class="annottext">Extension -&gt; TcRn () -&gt; TcRn ()
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl () -&gt; TcRnIf gbl lcl ()
</span><a href="GHC.Tc.Utils.Monad.html#unlessXOptM"><span class="hs-identifier hs-var">unlessXOptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.TypeAbstractions</span></span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1237"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBndrVis GhcPs -&gt; Bool
forall pass. HsBndrVis pass -&gt; Bool
</span><a href="Language.Haskell.Syntax.Type.html#isHsBndrInvisible"><span class="hs-identifier hs-var">isHsBndrInvisible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn -&gt; HsBndrVis GhcPs
forall flag (pass :: Pass). HsTyVarBndr flag (GhcPass pass) -&gt; flag
</span><a href="GHC.Hs.Type.html#hsTyVarBndrFlag"><span class="hs-identifier hs-var">hsTyVarBndrFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn
</span><a href="#local-6989586621683055723"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1238"></span><span>      </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcRn) GhcRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalInvisTyVarBndr"><span class="hs-identifier hs-var">TcRnIllegalInvisTyVarBndr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcRn) GhcRn
GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
</span><a href="#local-6989586621683055724"><span class="hs-identifier hs-var">lbndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1239"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBndrVar GhcRn -&gt; Bool
forall pass. HsBndrVar pass -&gt; Bool
</span><a href="Language.Haskell.Syntax.Type.html#isHsBndrWildCard"><span class="hs-identifier hs-var">isHsBndrWildCard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn -&gt; HsBndrVar GhcRn
forall flag (pass :: Pass).
HsTyVarBndr flag (GhcPass pass) -&gt; HsBndrVar (GhcPass pass)
</span><a href="GHC.Hs.Type.html#hsBndrVar"><span class="hs-identifier hs-var">hsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr (HsBndrVis GhcPs) GhcRn
</span><a href="#local-6989586621683055723"><span class="hs-identifier hs-var">bndr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1240"></span><span>      </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcRn) GhcRn -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnIllegalWildcardTyVarBndr"><span class="hs-identifier hs-var">TcRnIllegalWildcardTyVarBndr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr (HsBndrVis GhcRn) GhcRn
GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
</span><a href="#local-6989586621683055724"><span class="hs-identifier hs-var">lbndr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1241"></span><span>  </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcRn) GhcRn)
</span><a href="#local-6989586621683055724"><span class="hs-identifier hs-var">lbndr</span></a></span><span>
</span><span id="line-1242"></span><span>
</span><span id="line-1243"></span><span class="hs-comment">-- rnHsBndrVis is almost a no-op, it simply discards the token for &quot;@&quot;.</span><span>
</span><span id="line-1244"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsBndrVis"><span class="hs-identifier hs-type">rnHsBndrVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1245"></span><span id="rnHsBndrVis"><span class="annot"><span class="annottext">rnHsBndrVis :: HsBndrVis GhcPs -&gt; HsBndrVis GhcRn
</span><a href="GHC.Rename.HsType.html#rnHsBndrVis"><span class="hs-identifier hs-var hs-var">rnHsBndrVis</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrRequired"><span class="hs-identifier hs-type">HsBndrRequired</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrRequired GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrRequired GhcRn -&gt; HsBndrVis GhcRn
forall pass. XBndrRequired pass -&gt; HsBndrVis pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrRequired"><span class="hs-identifier hs-var">HsBndrRequired</span></a></span><span>  </span><span class="annot"><span class="annottext">NoExtField
XBndrRequired GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1246"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnHsBndrVis"><span class="hs-identifier hs-var">rnHsBndrVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrInvisible"><span class="hs-identifier hs-type">HsBndrInvisible</span></a></span><span> </span><span id="local-6989586621683055735"><span class="annot"><span class="annottext">XBndrInvisible GhcPs
</span><a href="#local-6989586621683055735"><span class="hs-identifier hs-var">_at</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrInvisible GhcRn -&gt; HsBndrVis GhcRn
forall pass. XBndrInvisible pass -&gt; HsBndrVis pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrInvisible"><span class="hs-identifier hs-var">HsBndrInvisible</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrInvisible GhcRn
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span id="local-6989586621683054133"><span class="annot"><a href="GHC.Rename.HsType.html#newTyVarNameRn"><span class="hs-identifier hs-type">newTyVarNameRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#newTyVarNameRnImplicit"><span class="hs-identifier hs-type">newTyVarNameRnImplicit</span></a></span><span>
</span><span id="line-1249"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054133"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- associated class</span><span>
</span><span id="line-1250"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span></span><span>
</span><span id="line-1251"></span><span id="newTyVarNameRn"><span class="annot"><span class="annottext">newTyVarNameRn :: forall a.
Maybe a
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#newTyVarNameRn"><span class="hs-identifier hs-var hs-var">newTyVarNameRn</span></a></span></span><span>         </span><span id="local-6989586621683055736"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055736"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
forall a.
Maybe a
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#new_tv_name_rn"><span class="hs-identifier hs-var">new_tv_name_rn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055736"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span>
</span><span id="line-1252"></span><span id="newTyVarNameRnImplicit"><span class="annot"><span class="annottext">newTyVarNameRnImplicit :: forall a.
Maybe a
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#newTyVarNameRnImplicit"><span class="hs-identifier hs-var hs-var">newTyVarNameRnImplicit</span></a></span></span><span> </span><span id="local-6989586621683055739"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055739"><span class="hs-identifier hs-var">mb_assoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
forall a.
Maybe a
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#new_tv_name_rn"><span class="hs-identifier hs-var">new_tv_name_rn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621683055739"><span class="hs-identifier hs-var">mb_assoc</span></a></span><span> </span><span class="annot"><span class="annottext">((GenLocated SrcSpanAnnN RdrName
  -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
 -&gt; GenLocated SrcSpanAnnN RdrName
 -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621683055740"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055740"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warn_term_var_capture"><span class="hs-identifier hs-var">warn_term_var_capture</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055740"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1254"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.Utils.html#newLocalBndrRn"><span class="hs-identifier hs-var">newLocalBndrRn</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055740"><span class="hs-identifier hs-var">lrdr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1255"></span><span>
</span><span id="line-1256"></span><span id="local-6989586621683054351"><span class="annot"><a href="GHC.Rename.HsType.html#new_tv_name_rn"><span class="hs-identifier hs-type">new_tv_name_rn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621683054351"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- associated class</span><span>
</span><span id="line-1257"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- how to create a new name</span><span>
</span><span id="line-1258"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1259"></span><span id="new_tv_name_rn"><span class="annot"><span class="annottext">new_tv_name_rn :: forall a.
Maybe a
-&gt; (GenLocated SrcSpanAnnN RdrName
    -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="GHC.Rename.HsType.html#new_tv_name_rn"><span class="hs-identifier hs-var hs-var">new_tv_name_rn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span id="local-6989586621683055743"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621683055743"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span id="local-6989586621683055744"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055744"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621683055743"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055744"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1260"></span><span class="annot"><a href="GHC.Rename.HsType.html#new_tv_name_rn"><span class="hs-identifier hs-var">new_tv_name_rn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055745"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621683055745"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span id="local-6989586621683055746"><span class="annot"><span class="annottext">lrdr :: GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055746"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055747"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055747"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1261"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055748"><span class="annot"><a href="#local-6989586621683055748"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM LocalRdrEnv
</span><a href="GHC.Tc.Utils.Monad.html#getLocalRdrEnv"><span class="hs-identifier hs-var">getLocalRdrEnv</span></a></span><span>
</span><span id="line-1262"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#lookupLocalRdrEnv"><span class="hs-identifier hs-type">lookupLocalRdrEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055748"><span class="hs-identifier hs-type">rdr_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055747"><span class="hs-identifier hs-type">rdr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1263"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621683055749"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055749"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055749"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- Use the same Name as the parent class decl</span><span>
</span><span id="line-1264"></span><span>           </span><span class="annot"><span class="annottext">Maybe Name
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; IOEnv (Env TcGblEnv TcLclEnv) Name
</span><a href="#local-6989586621683055745"><span class="hs-identifier hs-var">cont</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683055746"><span class="hs-identifier hs-var">lrdr</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1265"></span><span>
</span><span id="line-1266"></span><span class="hs-comment">{- Note [Term variable capture and implicit quantification]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-Wterm-variable-capture is a warning introduced in GHC Proposal #281 &quot;Visible forall in types of terms&quot;,
Section 7.3: https://github.com/ghc-proposals/ghc-proposals/blob/master/proposals/0281-visible-forall.rst#73implicit-quantification

Its purpose is to notify users when implicit quantification occurs that would
stop working under RequiredTypeArguments. Example:

   a = 42
   id :: a -&gt; a

As it stands, the `a` in the signature `id :: a -&gt; a` is considered free and
leads to implicit quantification, as if the user wrote `id :: forall a. a -&gt; a`.
Under RequiredTypeArguments it captures the term-level variable `a` (bound by `a = 42`),
leading to a type error.

`warn_term_var_capture` detects this by demoting the namespace of the
implicitly quantified type variable (`TvName` becomes `VarName`) and looking it up
in the environment. But when do we call `warn_term_var_capture`? It's tempting
to do so at the start of `rnImplicitTvOccs`, as soon as we know our implicit
variables:

  rnImplicitTvOccs mb_assoc implicit_vs_with_dups thing_inside
    = do { let implicit_vs = nubN implicit_vs_with_dups
         ; mapM_ warn_term_var_capture implicit_vs
         ... }

This approach generates false positives (#23434) because it misses a corner
case: class variables in associated types. Consider the following example:

  k = 12
  class C k a where
    type AT a :: k -&gt; Type

If we look at the signature for `AT` in isolation, the `k` looks like a free
variable, so it's passed to `rnImplicitTvOccs`. And if we passed it to
`warn_term_var_capture`, we would find the `k` bound by `k = 12` and report a warning.
But we don't want that: `k` is actually bound in the declaration header of the
parent class.

The solution is to check if it's a class variable (this is done in `new_tv_name_rn`)
before we check for term variable capture.
-}</span><span>
</span><span id="line-1309"></span><span>
</span><span id="line-1310"></span><span class="hs-comment">{-
*********************************************************
*                                                       *
        ConDeclField
*                                                       *
*********************************************************

When renaming a ConDeclField, we have to find the FieldLabel
associated with each field.  But we already have all the FieldLabels
available (since they were brought into scope by
GHC.Rename.Names.getLocalNonValBinders), so we just take the list as an
argument, build a map and look them up.
-}</span><span>
</span><span id="line-1323"></span><span>
</span><span id="line-1324"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnConDeclFields"><span class="hs-identifier hs-type">rnConDeclFields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1325"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1326"></span><span class="hs-comment">-- Also called from GHC.Rename.Module</span><span>
</span><span id="line-1327"></span><span class="hs-comment">-- No wildcards can appear in record fields</span><span>
</span><span id="line-1328"></span><span id="rnConDeclFields"><span class="annot"><span class="annottext">rnConDeclFields :: HsDocContext
-&gt; [FieldLabel]
-&gt; [LConDeclField GhcPs]
-&gt; RnM ([LConDeclField GhcRn], FreeVars)
</span><a href="GHC.Rename.HsType.html#rnConDeclFields"><span class="hs-identifier hs-var hs-var">rnConDeclFields</span></a></span></span><span> </span><span id="local-6989586621683055750"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055750"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621683055751"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621683055751"><span class="hs-identifier hs-var">fls</span></a></span></span><span> </span><span id="local-6989586621683055752"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621683055752"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-1329"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs)
 -&gt; RnM (GenLocated SrcSpanAnnA (ConDeclField GhcRn), FreeVars))
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     ([GenLocated SrcSpanAnnA (ConDeclField GhcRn)], FreeVars)
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
(a -&gt; RnM (b, FreeVars)) -&gt; f a -&gt; RnM (f b, FreeVars)
</span><a href="GHC.Rename.Utils.html#mapFvRn"><span class="hs-identifier hs-var">mapFvRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastStringEnv FieldLabel
-&gt; RnTyKiEnv
-&gt; LConDeclField GhcPs
-&gt; RnM (LConDeclField GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnField"><span class="hs-identifier hs-var">rnField</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683055754"><span class="hs-identifier hs-var">fl_env</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055755"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LConDeclField GhcPs]
[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621683055752"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-1330"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1331"></span><span>    </span><span id="local-6989586621683055755"><span class="annot"><span class="annottext">env :: RnTyKiEnv
</span><a href="#local-6989586621683055755"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; TypeOrKind -&gt; RnTyKiWhat -&gt; RnTyKiEnv
</span><a href="GHC.Rename.HsType.html#mkTyKiEnv"><span class="hs-identifier hs-var">mkTyKiEnv</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055750"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiWhat
</span><a href="GHC.Rename.HsType.html#RnTypeBody"><span class="hs-identifier hs-var">RnTypeBody</span></a></span><span>
</span><span id="line-1332"></span><span>    </span><span id="local-6989586621683055754"><span class="annot"><span class="annottext">fl_env :: FastStringEnv FieldLabel
</span><a href="#local-6989586621683055754"><span class="hs-identifier hs-var hs-var">fl_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(FastString, FieldLabel)] -&gt; FastStringEnv FieldLabel
forall a. [(FastString, a)] -&gt; FastStringEnv a
</span><a href="GHC.Data.FastString.Env.html#mkFsEnv"><span class="hs-identifier hs-var">mkFsEnv</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabelString -&gt; FastString
</span><a href="Language.Haskell.Syntax.Basic.html#field_label"><span class="hs-identifier hs-var">field_label</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldLabelString -&gt; FastString) -&gt; FieldLabelString -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldLabelString
</span><a href="GHC.Types.FieldLabel.html#flLabel"><span class="hs-identifier hs-var">flLabel</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683055759"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683055759"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621683055759"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621683055759"><span class="hs-identifier hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621683055751"><span class="hs-identifier hs-var">fls</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1333"></span><span>
</span><span id="line-1334"></span><span class="annot"><a href="GHC.Rename.HsType.html#rnField"><span class="hs-identifier hs-type">rnField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.Env.html#FastStringEnv"><span class="hs-identifier hs-type">FastStringEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1335"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1336"></span><span id="rnField"><span class="annot"><span class="annottext">rnField :: FastStringEnv FieldLabel
-&gt; RnTyKiEnv
-&gt; LConDeclField GhcPs
-&gt; RnM (LConDeclField GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnField"><span class="hs-identifier hs-var hs-var">rnField</span></a></span></span><span> </span><span id="local-6989586621683055760"><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683055760"><span class="hs-identifier hs-var">fl_env</span></a></span></span><span> </span><span id="local-6989586621683055761"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055761"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055762"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055762"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#ConDeclField"><span class="hs-identifier hs-type">ConDeclField</span></a></span><span> </span><span class="annot"><span class="annottext">XConDeclField GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055764"><span class="annot"><span class="annottext">[LFieldOcc GhcPs]
</span><a href="#local-6989586621683055764"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621683055765"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055765"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683055766"><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621683055766"><span class="hs-identifier hs-var">haddock_doc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1337"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055767"><span class="annot"><span class="annottext">new_names :: [GenLocated SrcSpanAnnA (FieldOcc GhcRn)]
</span><a href="#local-6989586621683055767"><span class="hs-identifier hs-var hs-var hs-var">new_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (FieldOcc GhcPs)
 -&gt; GenLocated SrcSpanAnnA (FieldOcc GhcRn))
-&gt; [GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (FieldOcc GhcRn)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FieldOcc GhcPs -&gt; FieldOcc GhcRn)
-&gt; GenLocated SrcSpanAnnA (FieldOcc GhcPs)
-&gt; GenLocated SrcSpanAnnA (FieldOcc GhcRn)
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastStringEnv FieldLabel -&gt; FieldOcc GhcPs -&gt; FieldOcc GhcRn
</span><a href="GHC.Rename.HsType.html#lookupField"><span class="hs-identifier hs-var">lookupField</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683055760"><span class="hs-identifier hs-var">fl_env</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LFieldOcc GhcPs]
[GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
</span><a href="#local-6989586621683055764"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-1338"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055768"><span class="annot"><a href="#local-6989586621683055768"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055769"><span class="annot"><a href="#local-6989586621683055769"><span class="hs-identifier hs-var">fvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; LHsType GhcPs -&gt; RnM (LHsType GhcRn, FreeVars)
</span><a href="GHC.Rename.HsType.html#rnLHsTyKi"><span class="hs-identifier hs-var">rnLHsTyKi</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055761"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683055765"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1339"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683055770"><span class="annot"><a href="#local-6989586621683055770"><span class="hs-identifier hs-var">haddock_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="GHC.Rename.Doc.html#rnLHsDoc"><span class="hs-identifier hs-type">rnLHsDoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055766"><span class="hs-identifier hs-type">haddock_doc</span></a></span><span>
</span><span id="line-1340"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055762"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#ConDeclField"><span class="hs-identifier hs-type">ConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055767"><span class="hs-identifier hs-type">new_names</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055768"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055770"><span class="hs-identifier hs-type">haddock_doc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1341"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055769"><span class="hs-identifier hs-type">fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1342"></span><span>
</span><span id="line-1343"></span><span class="annot"><a href="GHC.Rename.HsType.html#lookupField"><span class="hs-identifier hs-type">lookupField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.Env.html#FastStringEnv"><span class="hs-identifier hs-type">FastStringEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1344"></span><span id="lookupField"><span class="annot"><span class="annottext">lookupField :: FastStringEnv FieldLabel -&gt; FieldOcc GhcPs -&gt; FieldOcc GhcRn
</span><a href="GHC.Rename.HsType.html#lookupField"><span class="hs-identifier hs-var hs-var">lookupField</span></a></span></span><span> </span><span id="local-6989586621683055771"><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683055771"><span class="hs-identifier hs-var">fl_env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055773"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055773"><span class="hs-identifier hs-var">lr</span></a></span></span><span> </span><span id="local-6989586621683055774"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055774"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1345"></span><span>    </span><span class="annot"><span class="annottext">XCFieldOcc GhcRn -&gt; LIdP GhcRn -&gt; FieldOcc GhcRn
forall pass. XCFieldOcc pass -&gt; LIdP pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-var">FieldOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName) -&gt; OccName -&gt; RdrName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055777"><span class="hs-identifier hs-var">sel</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; GenLocated SrcSpanAnnN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683055773"><span class="hs-identifier hs-var">lr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055777"><span class="hs-identifier hs-var">sel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1347"></span><span>    </span><span id="local-6989586621683055778"><span class="annot"><span class="annottext">lbl :: FastString
</span><a href="#local-6989586621683055778"><span class="hs-identifier hs-var hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; FastString) -&gt; OccName -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055774"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-1348"></span><span>    </span><span id="local-6989586621683055777"><span class="annot"><span class="annottext">sel :: Name
</span><a href="#local-6989586621683055777"><span class="hs-identifier hs-var hs-var">sel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; Name
</span><a href="GHC.Types.FieldLabel.html#flSelector"><span class="hs-identifier hs-var">flSelector</span></a></span><span>
</span><span id="line-1349"></span><span>        </span><span class="annot"><span class="annottext">(FieldLabel -&gt; Name) -&gt; FieldLabel -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe FieldLabel -&gt; FieldLabel
forall a. HasDebugCallStack =&gt; String -&gt; Maybe a -&gt; a
</span><a href="GHC.Data.Maybe.html#expectJust"><span class="hs-identifier hs-var">expectJust</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lookupField&quot;</span></span><span>
</span><span id="line-1350"></span><span>        </span><span class="annot"><span class="annottext">(Maybe FieldLabel -&gt; FieldLabel) -&gt; Maybe FieldLabel -&gt; FieldLabel
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel -&gt; FastString -&gt; Maybe FieldLabel
forall a. FastStringEnv a -&gt; FastString -&gt; Maybe a
</span><a href="GHC.Data.FastString.Env.html#lookupFsEnv"><span class="hs-identifier hs-var">lookupFsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">FastStringEnv FieldLabel
</span><a href="#local-6989586621683055771"><span class="hs-identifier hs-var">fl_env</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621683055778"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-1351"></span><span>
</span><span id="line-1352"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
        Fixities and precedence parsing
*                                                                      *
************************************************************************

@mkOpAppRn@ deals with operator fixities.  The argument expressions
are assumed to be already correctly arranged.  It needs the fixities
recorded in the OpApp nodes, because fixity info applies to the things
the programmer actually wrote, so you can't find it out from the Name.

Furthermore, the second argument is guaranteed not to be another
operator application.  Why? Because the parser parses all
operator applications left-associatively, EXCEPT negation, which
we need to handle specially.
Infix types are read in a *right-associative* way, so that
        a `op` b `op` c
is always read in as
        a `op` (b `op` c)

mkHsOpTyRn rearranges where necessary.  The two arguments
have already been renamed and rearranged.

In the past, mkHsOpTyRn used to handle (-&gt;), but this was unnecessary. In the
syntax tree produced by the parser, the arrow already has the least possible
precedence and does not require rearrangement.
-}</span><span>
</span><span id="line-1380"></span><span>
</span><span id="line-1381"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-1382"></span><span class="hs-comment">-- Building (ty1 `op1` (ty2a `op2` ty2b))</span><span>
</span><span id="line-1383"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-type">mkHsOpTyRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span>
</span><span id="line-1384"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1385"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>
</span><span id="line-1387"></span><span id="mkHsOpTyRn"><span class="annot"><span class="annottext">mkHsOpTyRn :: PromotionFlag
-&gt; GenLocated SrcSpanAnnN Name
-&gt; Fixity
-&gt; LHsType GhcRn
-&gt; LHsType GhcRn
-&gt; RnM (HsType GhcRn)
</span><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-var hs-var">mkHsOpTyRn</span></a></span></span><span> </span><span id="local-6989586621683055783"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055783"><span class="hs-identifier hs-var">prom1</span></a></span></span><span> </span><span id="local-6989586621683055784"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055784"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621683055785"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055785"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span id="local-6989586621683055786"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055786"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055787"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055787"><span class="hs-identifier hs-var">loc2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055788"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055788"><span class="hs-identifier hs-var">prom2</span></a></span></span><span> </span><span id="local-6989586621683055789"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055789"><span class="hs-identifier hs-var">ty2a</span></a></span></span><span> </span><span id="local-6989586621683055790"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621683055790"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621683055791"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055791"><span class="hs-identifier hs-var">ty2b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055792"><span class="annot"><a href="#local-6989586621683055792"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupTyFixityRn"><span class="hs-identifier hs-var">lookupTyFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055790"><span class="hs-identifier hs-var">op2</span></a></span><span>
</span><span id="line-1389"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mk_hs_op_ty"><span class="hs-identifier hs-type">mk_hs_op_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055783"><span class="hs-identifier hs-type">prom1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055784"><span class="hs-identifier hs-type">op1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055785"><span class="hs-identifier hs-type">fix1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055786"><span class="hs-identifier hs-type">ty1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055788"><span class="hs-identifier hs-type">prom2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055790"><span class="hs-identifier hs-type">op2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055792"><span class="hs-identifier hs-type">fix2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055789"><span class="hs-identifier hs-type">ty2a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055791"><span class="hs-identifier hs-type">ty2b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055787"><span class="hs-identifier hs-type">loc2</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-var">mkHsOpTyRn</span></a></span><span> </span><span id="local-6989586621683055794"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055794"><span class="hs-identifier hs-var">prom1</span></a></span></span><span> </span><span id="local-6989586621683055795"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055795"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055796"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055796"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683055797"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055797"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>              </span><span class="hs-comment">-- Default case, no rearrangement</span><span>
</span><span id="line-1392"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; RnM (HsType GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpTy GhcRn
-&gt; PromotionFlag
-&gt; LHsType GhcRn
-&gt; LIdP GhcRn
-&gt; LHsType GhcRn
-&gt; HsType GhcRn
forall pass.
XOpTy pass
-&gt; PromotionFlag
-&gt; LHsType pass
-&gt; LIdP pass
-&gt; LHsType pass
-&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-var">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055794"><span class="hs-identifier hs-var">prom1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055796"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055795"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055797"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-1395"></span><span class="annot"><a href="GHC.Rename.HsType.html#mk_hs_op_ty"><span class="hs-identifier hs-type">mk_hs_op_ty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1396"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1397"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1398"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1399"></span><span id="mk_hs_op_ty"><span class="annot"><span class="annottext">mk_hs_op_ty :: PromotionFlag
-&gt; GenLocated SrcSpanAnnN Name
-&gt; Fixity
-&gt; LHsType GhcRn
-&gt; PromotionFlag
-&gt; GenLocated SrcSpanAnnN Name
-&gt; Fixity
-&gt; LHsType GhcRn
-&gt; LHsType GhcRn
-&gt; SrcSpanAnnA
-&gt; RnM (HsType GhcRn)
</span><a href="GHC.Rename.HsType.html#mk_hs_op_ty"><span class="hs-identifier hs-var hs-var">mk_hs_op_ty</span></a></span></span><span> </span><span id="local-6989586621683055798"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055798"><span class="hs-identifier hs-var">prom1</span></a></span></span><span> </span><span id="local-6989586621683055799"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055799"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621683055800"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055800"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span id="local-6989586621683055801"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055801"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683055802"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055802"><span class="hs-identifier hs-var">prom2</span></a></span></span><span> </span><span id="local-6989586621683055803"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055803"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621683055804"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055804"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span id="local-6989586621683055805"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055805"><span class="hs-identifier hs-var">ty2a</span></a></span></span><span> </span><span id="local-6989586621683055806"><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055806"><span class="hs-identifier hs-var">ty2b</span></a></span></span><span> </span><span id="local-6989586621683055807"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055807"><span class="hs-identifier hs-var">loc2</span></a></span></span><span>
</span><span id="line-1400"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055808"><span class="hs-identifier hs-var">nofix_error</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-var">precParseErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OpName
</span><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-var">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055799"><span class="hs-identifier hs-var">op1</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055800"><span class="hs-identifier hs-var">fix1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>                                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OpName
</span><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-var">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055803"><span class="hs-identifier hs-var">op2</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055804"><span class="hs-identifier hs-var">fix2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1402"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; RnM (HsType GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055801"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055811"><span class="hs-operator hs-var">`op1ty`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcRn -&gt; GenLocated SrcSpanAnnA (HsType GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055807"><span class="hs-identifier hs-var">loc2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055805"><span class="hs-identifier hs-var">ty2a</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055812"><span class="hs-operator hs-var">`op2ty`</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055806"><span class="hs-identifier hs-var">ty2b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1403"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055813"><span class="hs-identifier hs-var">associate_right</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsType GhcRn -&gt; RnM (HsType GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055801"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055811"><span class="hs-operator hs-var">`op1ty`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcRn -&gt; GenLocated SrcSpanAnnA (HsType GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055807"><span class="hs-identifier hs-var">loc2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055805"><span class="hs-identifier hs-var">ty2a</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055812"><span class="hs-operator hs-var">`op2ty`</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055806"><span class="hs-identifier hs-var">ty2b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1404"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Rearrange to ((ty1 `op1` ty2a) `op2` ty2b)</span><span>
</span><span id="line-1405"></span><span>                           </span><span id="local-6989586621683055814"><span class="annot"><a href="#local-6989586621683055814"><span class="hs-identifier hs-var">new_ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PromotionFlag
-&gt; GenLocated SrcSpanAnnN Name
-&gt; Fixity
-&gt; LHsType GhcRn
-&gt; LHsType GhcRn
-&gt; RnM (HsType GhcRn)
</span><a href="GHC.Rename.HsType.html#mkHsOpTyRn"><span class="hs-identifier hs-var">mkHsOpTyRn</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055798"><span class="hs-identifier hs-var">prom1</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055799"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055800"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055801"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
</span><a href="#local-6989586621683055805"><span class="hs-identifier hs-var">ty2a</span></a></span><span>
</span><span id="line-1406"></span><span>                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-type">noLocA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055814"><span class="hs-identifier hs-type">new_ty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055812"><span class="hs-operator hs-type">`op2ty`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055806"><span class="hs-identifier hs-type">ty2b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1407"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1408"></span><span>    </span><span id="local-6989586621683055816"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055816"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621683055811"><span class="annot"><span class="annottext">op1ty :: GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055811"><span class="hs-operator hs-var hs-var">`op1ty`</span></a></span></span><span> </span><span id="local-6989586621683055817"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055817"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
-&gt; PromotionFlag
-&gt; LHsType GhcRn
-&gt; LIdP GhcRn
-&gt; LHsType GhcRn
-&gt; HsType GhcRn
forall pass.
XOpTy pass
-&gt; PromotionFlag
-&gt; LHsType pass
-&gt; LIdP pass
-&gt; LHsType pass
-&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-var">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055798"><span class="hs-identifier hs-var">prom1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055816"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055799"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055817"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1409"></span><span>    </span><span id="local-6989586621683055818"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055818"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621683055812"><span class="annot"><span class="annottext">op2ty :: GenLocated SrcSpanAnnA (HsType GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsType GhcRn) -&gt; HsType GhcRn
</span><a href="#local-6989586621683055812"><span class="hs-operator hs-var hs-var">`op2ty`</span></a></span></span><span> </span><span id="local-6989586621683055819"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055819"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
-&gt; PromotionFlag
-&gt; LHsType GhcRn
-&gt; LIdP GhcRn
-&gt; LHsType GhcRn
-&gt; HsType GhcRn
forall pass.
XOpTy pass
-&gt; PromotionFlag
-&gt; LHsType pass
-&gt; LIdP pass
-&gt; LHsType pass
-&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-var">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621683055802"><span class="hs-identifier hs-var">prom2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055818"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055803"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcRn
GenLocated SrcSpanAnnA (HsType GhcRn)
</span><a href="#local-6989586621683055819"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1410"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683055808"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055808"><span class="hs-identifier hs-var">nofix_error</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055813"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055813"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; Fixity -&gt; (Bool, Bool)
</span><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055800"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055804"><span class="hs-identifier hs-var">fix2</span></a></span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span>
</span><span id="line-1413"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1414"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-type">mkOpAppRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#NegationHandling"><span class="hs-identifier hs-type">NegationHandling</span></a></span><span>
</span><span id="line-1415"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>             </span><span class="hs-comment">-- Left operand; already rearranged</span><span>
</span><span id="line-1416"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>   </span><span class="hs-comment">-- Operator and fixity</span><span>
</span><span id="line-1417"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>             </span><span class="hs-comment">-- Right operand (not an OpApp, but might</span><span>
</span><span id="line-1418"></span><span>                                       </span><span class="hs-comment">-- be a NegApp)</span><span>
</span><span id="line-1419"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="hs-comment">-- (e1a `op1` e1b) `op2` e2</span><span>
</span><span id="line-1422"></span><span id="mkOpAppRn"><span class="annot"><span class="annottext">mkOpAppRn :: NegationHandling
-&gt; LHsExpr GhcRn
-&gt; LHsExpr GhcRn
-&gt; Fixity
-&gt; LHsExpr GhcRn
-&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var hs-var">mkOpAppRn</span></a></span></span><span> </span><span id="local-6989586621683055820"><span class="annot"><span class="annottext">NegationHandling
</span><a href="#local-6989586621683055820"><span class="hs-identifier hs-var">negation_handling</span></a></span></span><span> </span><span id="local-6989586621683055821"><span class="annot"><span class="annottext">e1 :: LHsExpr GhcRn
</span><a href="#local-6989586621683055821"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621683055823"><span class="annot"><span class="annottext">XOpApp GhcRn
</span><a href="#local-6989586621683055823"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span id="local-6989586621683055824"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055824"><span class="hs-identifier hs-var">e1a</span></a></span></span><span> </span><span id="local-6989586621683055825"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055825"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621683055826"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055826"><span class="hs-identifier hs-var">e1b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055827"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055827"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621683055828"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055828"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span id="local-6989586621683055829"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055829"><span class="hs-identifier hs-var">e2</span></a></span></span><span>
</span><span id="line-1423"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055830"><span class="hs-identifier hs-var">nofix_error</span></a></span><span>
</span><span id="line-1424"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-var">precParseErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055825"><span class="hs-identifier hs-var">op1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055823"><span class="hs-identifier hs-var">fix1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055827"><span class="hs-identifier hs-var">op2</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055828"><span class="hs-identifier hs-var">fix2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; RnM (HsExpr GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpApp GhcRn
-&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055828"><span class="hs-identifier hs-var">fix2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055821"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055827"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055829"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>
</span><span id="line-1427"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055832"><span class="hs-identifier hs-var">associate_right</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1428"></span><span>    </span><span id="local-6989586621683055833"><span class="annot"><a href="#local-6989586621683055833"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NegationHandling
-&gt; LHsExpr GhcRn
-&gt; LHsExpr GhcRn
-&gt; Fixity
-&gt; LHsExpr GhcRn
-&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="#local-6989586621683055820"><span class="hs-identifier hs-var">negation_handling</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055826"><span class="hs-identifier hs-var">e1b</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055827"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055828"><span class="hs-identifier hs-var">fix2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055829"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1429"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055823"><span class="hs-identifier hs-type">fix1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055824"><span class="hs-identifier hs-type">e1a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055825"><span class="hs-identifier hs-type">op1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055834"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055833"><span class="hs-identifier hs-type">new_e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1430"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1431"></span><span>    </span><span id="local-6989586621683055834"><span class="annot"><span class="annottext">loc' :: SrcSpanAnnA
</span><a href="#local-6989586621683055834"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SrcSpanAnnA
forall a e1 e2.
Semigroup a =&gt;
GenLocated (EpAnn a) e1 -&gt; GenLocated (EpAnn a) e2 -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineLocsA"><span class="hs-identifier hs-var">combineLocsA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055826"><span class="hs-identifier hs-var">e1b</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055829"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1432"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683055830"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055830"><span class="hs-identifier hs-var">nofix_error</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055832"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055832"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; Fixity -&gt; (Bool, Bool)
</span><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055823"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055828"><span class="hs-identifier hs-var">fix2</span></a></span><span>
</span><span id="line-1433"></span><span>
</span><span id="line-1434"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1435"></span><span class="hs-comment">--      (- neg_arg) `op` e2</span><span>
</span><span id="line-1436"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="GHC.Rename.HsType.html#ReassociateNegation"><span class="hs-identifier hs-var">ReassociateNegation</span></a></span><span> </span><span id="local-6989586621683055837"><span class="annot"><span class="annottext">e1 :: LHsExpr GhcRn
</span><a href="#local-6989586621683055837"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055839"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055839"><span class="hs-identifier hs-var">neg_arg</span></a></span></span><span> </span><span id="local-6989586621683055840"><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621683055840"><span class="hs-identifier hs-var">neg_name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055841"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055841"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621683055842"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055842"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span id="local-6989586621683055843"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055843"><span class="hs-identifier hs-var">e2</span></a></span></span><span>
</span><span id="line-1437"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055844"><span class="hs-identifier hs-var">nofix_error</span></a></span><span>
</span><span id="line-1438"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-var">precParseErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpName
</span><a href="GHC.Hs.Type.html#NegateOp"><span class="hs-identifier hs-var">NegateOp</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055841"><span class="hs-identifier hs-var">op2</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055842"><span class="hs-identifier hs-var">fix2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; RnM (HsExpr GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpApp GhcRn
-&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055842"><span class="hs-identifier hs-var">fix2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055837"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055841"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055843"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055846"><span class="hs-identifier hs-var">associate_right</span></a></span><span>
</span><span id="line-1442"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683055847"><span class="annot"><a href="#local-6989586621683055847"><span class="hs-identifier hs-var">new_e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NegationHandling
-&gt; LHsExpr GhcRn
-&gt; LHsExpr GhcRn
-&gt; Fixity
-&gt; LHsExpr GhcRn
-&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="GHC.Rename.HsType.html#ReassociateNegation"><span class="hs-identifier hs-var">ReassociateNegation</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055839"><span class="hs-identifier hs-var">neg_arg</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055841"><span class="hs-identifier hs-var">op2</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055842"><span class="hs-identifier hs-var">fix2</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055843"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1443"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055848"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055847"><span class="hs-identifier hs-type">new_e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055840"><span class="hs-identifier hs-type">neg_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1445"></span><span>    </span><span id="local-6989586621683055848"><span class="annot"><span class="annottext">loc' :: SrcSpanAnnA
</span><a href="#local-6989586621683055848"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SrcSpanAnnA
forall a e1 e2.
Semigroup a =&gt;
GenLocated (EpAnn a) e1 -&gt; GenLocated (EpAnn a) e2 -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineLocsA"><span class="hs-identifier hs-var">combineLocsA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055839"><span class="hs-identifier hs-var">neg_arg</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055843"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1446"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683055844"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055844"><span class="hs-identifier hs-var">nofix_error</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055846"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055846"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; Fixity -&gt; (Bool, Bool)
</span><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055842"><span class="hs-identifier hs-var">fix2</span></a></span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1449"></span><span class="hs-comment">--      e1 `op` - neg_arg</span><span>
</span><span id="line-1450"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><a href="GHC.Rename.HsType.html#ReassociateNegation"><span class="hs-identifier hs-var">ReassociateNegation</span></a></span><span> </span><span id="local-6989586621683055849"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055849"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683055850"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055850"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span id="local-6989586621683055851"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055851"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span id="local-6989586621683055852"><span class="annot"><span class="annottext">e2 :: LHsExpr GhcRn
</span><a href="#local-6989586621683055852"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- NegApp can occur on the right</span><span>
</span><span id="line-1451"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055853"><span class="hs-identifier hs-var">associate_right</span></a></span><span>                        </span><span class="hs-comment">-- We *want* right association</span><span>
</span><span id="line-1452"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-var">precParseErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055850"><span class="hs-identifier hs-var">op1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055851"><span class="hs-identifier hs-var">fix1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OpName
</span><a href="GHC.Hs.Type.html#NegateOp"><span class="hs-identifier hs-var">NegateOp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1453"></span><span>       </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; RnM (HsExpr GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpApp GhcRn
-&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055851"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055849"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055850"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055852"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1455"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055853"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055853"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; Fixity -&gt; (Bool, Bool)
</span><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055851"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a></span><span>
</span><span id="line-1456"></span><span>
</span><span id="line-1457"></span><span class="hs-comment">---------------------------</span><span>
</span><span id="line-1458"></span><span class="hs-comment">--      Default case</span><span>
</span><span id="line-1459"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkOpAppRn"><span class="hs-identifier hs-var">mkOpAppRn</span></a></span><span> </span><span class="annot"><span class="annottext">NegationHandling
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055854"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055854"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621683055855"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055855"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621683055856"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055856"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span id="local-6989586621683055857"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055857"><span class="hs-identifier hs-var">e2</span></a></span></span><span>                  </span><span class="hs-comment">-- Default case, no rearrangement</span><span>
</span><span id="line-1460"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn)
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Fixity -&gt; HsExpr GhcRn -&gt; Bool
</span><a href="GHC.Rename.HsType.html#right_op_ok"><span class="hs-identifier hs-var">right_op_ok</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055856"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055857"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055854"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;---&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055855"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;---&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055856"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;---&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055857"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn))
-&gt; RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1462"></span><span>    </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; RnM (HsExpr GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOpApp GhcRn
-&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p.
XOpApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-var">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055856"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055854"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055855"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055857"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>
</span><span id="line-1464"></span><span class="hs-keyword">data</span><span> </span><span id="NegationHandling"><span class="annot"><a href="GHC.Rename.HsType.html#NegationHandling"><span class="hs-identifier hs-var">NegationHandling</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ReassociateNegation"><span class="annot"><a href="GHC.Rename.HsType.html#ReassociateNegation"><span class="hs-identifier hs-var">ReassociateNegation</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="KeepNegationIntact"><span class="annot"><a href="GHC.Rename.HsType.html#KeepNegationIntact"><span class="hs-identifier hs-var">KeepNegationIntact</span></a></span></span><span>
</span><span id="line-1465"></span><span>
</span><span id="line-1466"></span><span class="hs-comment">----------------------------</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span class="annot"><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-type">get_op</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span>
</span><span id="line-1469"></span><span class="hs-comment">-- An unbound name could be either HsVar or HsUnboundVar</span><span>
</span><span id="line-1470"></span><span class="hs-comment">-- See GHC.Rename.Expr.rnUnboundVar</span><span>
</span><span id="line-1471"></span><span id="get_op"><span class="annot"><span class="annottext">get_op :: LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var hs-var">get_op</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055862"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621683055862"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OpName
</span><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-var">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055862"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span class="annot"><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-type">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055864"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055864"><span class="hs-identifier hs-var">uv</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OpName
</span><a href="GHC.Hs.Type.html#UnboundOp"><span class="hs-identifier hs-var">UnboundOp</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055864"><span class="hs-identifier hs-var">uv</span></a></span><span>
</span><span id="line-1473"></span><span class="annot"><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#XExpr"><span class="hs-identifier hs-type">XExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsRecSelRn"><span class="hs-identifier hs-type">HsRecSelRn</span></a></span><span> </span><span id="local-6989586621683055868"><span class="annot"><span class="annottext">FieldOcc GhcRn
</span><a href="#local-6989586621683055868"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcRn -&gt; OpName
</span><a href="GHC.Hs.Type.html#RecFldOp"><span class="hs-identifier hs-var">RecFldOp</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcRn
</span><a href="#local-6989586621683055868"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-1474"></span><span class="annot"><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span id="local-6989586621683055870"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055870"><span class="hs-identifier hs-var">other</span></a></span></span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; OpName
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;get_op&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055870"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span class="hs-comment">-- Parser left-associates everything, but</span><span>
</span><span id="line-1477"></span><span class="hs-comment">-- derived instances may have correctly-associated things to</span><span>
</span><span id="line-1478"></span><span class="hs-comment">-- in the right operand.  So we just check that the right operand is OK</span><span>
</span><span id="line-1479"></span><span class="annot"><a href="GHC.Rename.HsType.html#right_op_ok"><span class="hs-identifier hs-type">right_op_ok</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1480"></span><span id="right_op_ok"><span class="annot"><span class="annottext">right_op_ok :: Fixity -&gt; HsExpr GhcRn -&gt; Bool
</span><a href="GHC.Rename.HsType.html#right_op_ok"><span class="hs-identifier hs-var hs-var">right_op_ok</span></a></span></span><span> </span><span id="local-6989586621683055872"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055872"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621683055873"><span class="annot"><span class="annottext">XOpApp GhcRn
</span><a href="#local-6989586621683055873"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1481"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055874"><span class="hs-identifier hs-var">error_please</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055875"><span class="hs-identifier hs-var">associate_right</span></a></span><span>
</span><span id="line-1482"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1483"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621683055874"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055874"><span class="hs-identifier hs-var">error_please</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055875"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055875"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fixity -&gt; Fixity -&gt; (Bool, Bool)
</span><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-var">compareFixity</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055872"><span class="hs-identifier hs-var">fix1</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055873"><span class="hs-identifier hs-var">fix2</span></a></span><span>
</span><span id="line-1484"></span><span class="annot"><a href="GHC.Rename.HsType.html#right_op_ok"><span class="hs-identifier hs-var">right_op_ok</span></a></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1485"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span class="hs-comment">-- Parser initially makes negation bind more tightly than any other operator</span><span>
</span><span id="line-1488"></span><span class="hs-comment">-- And &quot;deriving&quot; code should respect this (use HsPar if not)</span><span>
</span><span id="line-1489"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkNegAppRn"><span class="hs-identifier hs-type">mkNegAppRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SyntaxExpr"><span class="hs-identifier hs-type">SyntaxExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span id="mkNegAppRn"><span class="annot"><span class="annottext">mkNegAppRn :: LHsExpr GhcRn -&gt; SyntaxExpr GhcRn -&gt; RnM (HsExpr GhcRn)
</span><a href="GHC.Rename.HsType.html#mkNegAppRn"><span class="hs-identifier hs-var hs-var">mkNegAppRn</span></a></span></span><span> </span><span id="local-6989586621683055876"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055876"><span class="hs-identifier hs-var">neg_arg</span></a></span></span><span> </span><span id="local-6989586621683055877"><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621683055877"><span class="hs-identifier hs-var">neg_name</span></a></span></span><span>
</span><span id="line-1491"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn)
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Bool
forall id. HsExpr id -&gt; Bool
</span><a href="GHC.Rename.HsType.html#not_op_app"><span class="hs-identifier hs-var">not_op_app</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055876"><span class="hs-identifier hs-var">neg_arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn))
-&gt; RnM (HsExpr GhcRn) -&gt; RnM (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1492"></span><span>    </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; RnM (HsExpr GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XNegApp GhcRn -&gt; LHsExpr GhcRn -&gt; SyntaxExpr GhcRn -&gt; HsExpr GhcRn
forall p. XNegApp p -&gt; LHsExpr p -&gt; SyntaxExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-var">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055876"><span class="hs-identifier hs-var">neg_arg</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><a href="#local-6989586621683055877"><span class="hs-identifier hs-var">neg_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span>
</span><span id="line-1494"></span><span id="local-6989586621683054389"><span class="annot"><a href="GHC.Rename.HsType.html#not_op_app"><span class="hs-identifier hs-type">not_op_app</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054389"><span class="hs-identifier hs-type">id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1495"></span><span id="not_op_app"><span class="annot"><span class="annottext">not_op_app :: forall id. HsExpr id -&gt; Bool
</span><a href="GHC.Rename.HsType.html#not_op_app"><span class="hs-identifier hs-var hs-var">not_op_app</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1496"></span><span class="annot"><a href="GHC.Rename.HsType.html#not_op_app"><span class="hs-identifier hs-var">not_op_app</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr id
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1497"></span><span>
</span><span id="line-1498"></span><span class="hs-comment">--------------------------------------</span><span>
</span><span id="line-1499"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier hs-type">mkConOpPatRn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1500"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1501"></span><span>
</span><span id="line-1502"></span><span id="mkConOpPatRn"><span class="annot"><span class="annottext">mkConOpPatRn :: GenLocated SrcSpanAnnN Name
-&gt; Fixity -&gt; LPat GhcRn -&gt; LPat GhcRn -&gt; RnM (Pat GhcRn)
</span><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier hs-var hs-var">mkConOpPatRn</span></a></span></span><span> </span><span id="local-6989586621683055880"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055880"><span class="hs-identifier hs-var">op2</span></a></span></span><span> </span><span id="local-6989586621683055881"><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055881"><span class="hs-identifier hs-var">fix2</span></a></span></span><span> </span><span id="local-6989586621683055882"><span class="annot"><span class="annottext">p1 :: LPat GhcRn
</span><a href="#local-6989586621683055882"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055883"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055883"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span> </span><span id="local-6989586621683055886"><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
</span><a href="#local-6989586621683055886"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621683055888"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683055888"><span class="hs-identifier hs-var">p1a</span></a></span></span><span> </span><span id="local-6989586621683055889"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683055889"><span class="hs-identifier hs-var">p1b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055890"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683055890"><span class="hs-identifier hs-var">p2</span></a></span></span><span>
</span><span id="line-1503"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055891"><span class="annot"><a href="#local-6989586621683055891"><span class="hs-identifier hs-var">fix1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055886"><span class="hs-identifier hs-var">op1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621683055892"><span class="annot"><a href="#local-6989586621683055892"><span class="hs-identifier hs-var">nofix_error</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055893"><span class="annot"><a href="#local-6989586621683055893"><span class="hs-identifier hs-var">associate_right</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html#compareFixity"><span class="hs-identifier hs-type">compareFixity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055891"><span class="hs-identifier hs-type">fix1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055881"><span class="hs-identifier hs-type">fix2</span></a></span><span>
</span><span id="line-1505"></span><span>
</span><span id="line-1506"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621683055892"><span class="hs-identifier hs-type">nofix_error</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1507"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-type">precParseErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-type">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055886"><span class="hs-identifier hs-type">op1</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621683055891"><span class="hs-identifier hs-type">fix1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1508"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-type">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055880"><span class="hs-identifier hs-type">op2</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621683055881"><span class="hs-identifier hs-type">fix2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1509"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1510"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-1511"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055880"><span class="hs-identifier hs-type">op2</span></a></span><span>
</span><span id="line-1512"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055882"><span class="hs-identifier hs-type">p1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055890"><span class="hs-identifier hs-type">p2</span></a></span><span>
</span><span id="line-1513"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1514"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621683055893"><span class="hs-identifier hs-type">associate_right</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1517"></span><span>                </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683055897"><span class="annot"><a href="#local-6989586621683055897"><span class="hs-identifier hs-var">new_p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier hs-type">mkConOpPatRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055880"><span class="hs-identifier hs-type">op2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055881"><span class="hs-identifier hs-type">fix2</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055889"><span class="hs-identifier hs-type">p1b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055890"><span class="hs-identifier hs-type">p2</span></a></span><span>
</span><span id="line-1518"></span><span>                </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1519"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-1520"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055886"><span class="hs-identifier hs-type">op1</span></a></span><span>
</span><span id="line-1521"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055888"><span class="hs-identifier hs-type">p1a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055883"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055897"><span class="hs-identifier hs-type">new_p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1523"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1524"></span><span>                </span><span class="hs-comment">-- XXX loc right?</span><span>
</span><span id="line-1525"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1526"></span><span>                 </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-1527"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621683055880"><span class="hs-identifier hs-type">op2</span></a></span><span>
</span><span id="line-1528"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055882"><span class="hs-identifier hs-type">p1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055890"><span class="hs-identifier hs-type">p2</span></a></span><span>
</span><span id="line-1529"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1530"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1531"></span><span>
</span><span id="line-1532"></span><span class="annot"><a href="GHC.Rename.HsType.html#mkConOpPatRn"><span class="hs-identifier hs-var">mkConOpPatRn</span></a></span><span> </span><span id="local-6989586621683055898"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055898"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055899"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683055899"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621683055900"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621683055900"><span class="hs-identifier hs-var">p2</span></a></span></span><span>                         </span><span class="hs-comment">-- Default case, no rearrangement</span><span>
</span><span id="line-1533"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; RnM (Pat GhcRn) -&gt; RnM (Pat GhcRn)
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Bool
</span><a href="GHC.Rename.HsType.html#not_op_pat"><span class="hs-identifier hs-var">not_op_pat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Pat GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621683055900"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(RnM (Pat GhcRn) -&gt; RnM (Pat GhcRn))
-&gt; RnM (Pat GhcRn) -&gt; RnM (Pat GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1534"></span><span>    </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; RnM (Pat GhcRn)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat GhcRn -&gt; RnM (Pat GhcRn)) -&gt; Pat GhcRn -&gt; RnM (Pat GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1535"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: XConPat GhcRn
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1536"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con :: XRec GhcRn (ConLikeP GhcRn)
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055898"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1537"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_args :: HsConDetails
  (HsConPatTyArg (NoGhcTc GhcRn))
  (LPat GhcRn)
  (HsRecFields GhcRn (LPat GhcRn))
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; HsConDetails
     (HsConPatTyArg GhcRn)
     (GenLocated SrcSpanAnnA (Pat GhcRn))
     (HsRecFields GhcRn (GenLocated SrcSpanAnnA (Pat GhcRn)))
forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621683055899"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621683055900"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-1538"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span class="annot"><a href="GHC.Rename.HsType.html#not_op_pat"><span class="hs-identifier hs-type">not_op_pat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1541"></span><span id="not_op_pat"><span class="annot"><span class="annottext">not_op_pat :: Pat GhcRn -&gt; Bool
</span><a href="GHC.Rename.HsType.html#not_op_pat"><span class="hs-identifier hs-var hs-var">not_op_pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1542"></span><span class="annot"><a href="GHC.Rename.HsType.html#not_op_pat"><span class="hs-identifier hs-var">not_op_pat</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><span class="hs-identifier">_</span></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1543"></span><span>
</span><span id="line-1544"></span><span class="hs-comment">--------------------------------------</span><span>
</span><span id="line-1545"></span><span id="local-6989586621683054401"><span class="annot"><a href="GHC.Rename.HsType.html#checkPrecMatch"><span class="hs-identifier hs-type">checkPrecMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054401"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1546"></span><span>  </span><span class="hs-comment">-- Check precedence of a function binding written infix</span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-comment">--   eg  a `op` b `C` c = ...</span><span>
</span><span id="line-1548"></span><span>  </span><span class="hs-comment">-- See comments with rnExpr (OpApp ...) about &quot;deriving&quot;</span><span>
</span><span id="line-1549"></span><span>
</span><span id="line-1550"></span><span id="checkPrecMatch"><span class="annot"><span class="annottext">checkPrecMatch :: forall body. Name -&gt; MatchGroup GhcRn body -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPrecMatch"><span class="hs-identifier hs-var hs-var">checkPrecMatch</span></a></span></span><span> </span><span id="local-6989586621683055908"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055908"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno [GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055911"><span class="annot"><span class="annottext">[GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)]
</span><a href="#local-6989586621683055911"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)
 -&gt; TcRn ())
-&gt; [GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)]
-&gt; TcRn ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">GenLocated (Anno (Match GhcRn body)) (Match GhcRn body) -&gt; TcRn ()
</span><a href="#local-6989586621683055912"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)]
</span><a href="#local-6989586621683055911"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-1552"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1553"></span><span>    </span><span id="local-6989586621683055912"><span class="annot"><span class="annottext">check :: GenLocated (Anno (Match GhcRn body)) (Match GhcRn body) -&gt; TcRn ()
</span><a href="#local-6989586621683055912"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">Anno (Match GhcRn body)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; XRec p [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055915"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055915"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621683055916"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683055916"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1554"></span><span>                                     </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055917"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055917"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span id="local-6989586621683055918"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683055918"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span>                                     </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1556"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRn () -&gt; TcRn ()
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpanAnnA -&gt; SrcSpan) -&gt; SrcSpanAnnA -&gt; SrcSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; SrcSpanAnnA
forall a. Semigroup a =&gt; EpAnn a -&gt; EpAnn a -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineSrcSpansA"><span class="hs-identifier hs-var">combineSrcSpansA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055915"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055917"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1557"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Pat GhcRn -&gt; Bool -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPrec"><span class="hs-identifier hs-var">checkPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055908"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683055916"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1558"></span><span>           </span><span class="annot"><span class="annottext">Name -&gt; Pat GhcRn -&gt; Bool -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPrec"><span class="hs-identifier hs-var">checkPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055908"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621683055918"><span class="hs-identifier hs-var">p2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1559"></span><span>
</span><span id="line-1560"></span><span>    </span><span class="annot"><a href="#local-6989586621683055912"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated (Anno (Match GhcRn body)) (Match GhcRn body)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1561"></span><span>        </span><span class="hs-comment">-- This can happen.  Consider</span><span>
</span><span id="line-1562"></span><span>        </span><span class="hs-comment">--      a `op` True = ...</span><span>
</span><span id="line-1563"></span><span>        </span><span class="hs-comment">--      op          = ...</span><span>
</span><span id="line-1564"></span><span>        </span><span class="hs-comment">-- The infix flag comes from the first binding of the group</span><span>
</span><span id="line-1565"></span><span>        </span><span class="hs-comment">-- but the second eqn has no args (an error, but not discovered</span><span>
</span><span id="line-1566"></span><span>        </span><span class="hs-comment">-- until the type checker).  So we don't want to crash on the</span><span>
</span><span id="line-1567"></span><span>        </span><span class="hs-comment">-- second eqn.</span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkPrec"><span class="hs-identifier hs-type">checkPrec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.IOEnv.html#IOEnv"><span class="hs-identifier hs-type">IOEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Tc.Types.LclEnv.html#TcLclEnv"><span class="hs-identifier hs-type">TcLclEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1570"></span><span id="checkPrec"><span class="annot"><span class="annottext">checkPrec :: Name -&gt; Pat GhcRn -&gt; Bool -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkPrec"><span class="hs-identifier hs-var hs-var">checkPrec</span></a></span></span><span> </span><span id="local-6989586621683055921"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055921"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span> </span><span id="local-6989586621683055922"><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
</span><a href="#local-6989586621683055922"><span class="hs-identifier hs-var">op1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055923"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055923"><span class="hs-identifier hs-var">right</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1571"></span><span>    </span><span id="local-6989586621683055924"><span class="annot"><a href="#local-6989586621683055924"><span class="hs-identifier hs-var">op_fix</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span id="local-6989586621683055926"><span class="annot"><a href="#local-6989586621683055926"><span class="hs-identifier hs-var">op_prec</span></a></span></span><span>  </span><span id="local-6989586621683055927"><span class="annot"><a href="#local-6989586621683055927"><span class="hs-identifier hs-var">op_dir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055921"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1572"></span><span>    </span><span id="local-6989586621683055928"><span class="annot"><a href="#local-6989586621683055928"><span class="hs-identifier hs-var">op1_fix</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span id="local-6989586621683055929"><span class="annot"><a href="#local-6989586621683055929"><span class="hs-identifier hs-var">op1_prec</span></a></span></span><span> </span><span id="local-6989586621683055930"><span class="annot"><a href="#local-6989586621683055930"><span class="hs-identifier hs-var">op1_dir</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-type">lookupFixityRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055922"><span class="hs-identifier hs-type">op1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1573"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-1574"></span><span>        </span><span id="local-6989586621683055931"><span class="annot"><a href="#local-6989586621683055931"><span class="hs-identifier hs-var hs-var">inf_ok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683055929"><span class="hs-identifier hs-var">op1_prec</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683055926"><span class="hs-identifier hs-var">op_prec</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1575"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683055929"><span class="hs-identifier hs-var">op1_prec</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683055926"><span class="hs-identifier hs-var">op_prec</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1576"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055930"><span class="hs-identifier hs-var">op1_dir</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection -&gt; FixityDirection -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="Language.Haskell.Syntax.Basic.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055927"><span class="hs-identifier hs-var">op_dir</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection -&gt; FixityDirection -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="Language.Haskell.Syntax.Basic.html#InfixR"><span class="hs-identifier hs-var">InfixR</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055923"><span class="hs-identifier hs-var">right</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-1577"></span><span>                   </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055930"><span class="hs-identifier hs-var">op1_dir</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection -&gt; FixityDirection -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="Language.Haskell.Syntax.Basic.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055927"><span class="hs-identifier hs-var">op_dir</span></a></span><span> </span><span class="annot"><span class="annottext">FixityDirection -&gt; FixityDirection -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FixityDirection
</span><a href="Language.Haskell.Syntax.Basic.html#InfixL"><span class="hs-identifier hs-var">InfixL</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683055923"><span class="hs-identifier hs-var">right</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1578"></span><span>
</span><span id="line-1579"></span><span>        </span><span id="local-6989586621683055936"><span class="annot"><a href="#local-6989586621683055936"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OpName
</span><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-var">NormalOp</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055921"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span>          </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055924"><span class="hs-identifier hs-var">op_fix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1580"></span><span>        </span><span id="local-6989586621683055937"><span class="annot"><a href="#local-6989586621683055937"><span class="hs-identifier hs-var hs-var">info1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OpName
</span><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-var">NormalOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
GenLocated SrcSpanAnnN Name
</span><a href="#local-6989586621683055922"><span class="hs-identifier hs-var">op1</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Fixity
</span><a href="#local-6989586621683055928"><span class="hs-identifier hs-var">op1_fix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1581"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621683055938"><span class="annot"><a href="#local-6989586621683055938"><span class="hs-identifier hs-var">infol</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683055939"><span class="annot"><a href="#local-6989586621683055939"><span class="hs-identifier hs-var">infor</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621683055923"><span class="hs-identifier hs-type">right</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055936"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055937"><span class="hs-identifier hs-type">info1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055937"><span class="hs-identifier hs-type">info1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055936"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1582"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055931"><span class="hs-identifier hs-type">inf_ok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-type">precParseErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055938"><span class="hs-identifier hs-type">infol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055939"><span class="hs-identifier hs-type">infor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1583"></span><span>
</span><span id="line-1584"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkPrec"><span class="hs-identifier hs-var">checkPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1585"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1586"></span><span>
</span><span id="line-1587"></span><span class="hs-comment">-- Check precedence of (arg op) or (op arg) respectively</span><span>
</span><span id="line-1588"></span><span class="hs-comment">-- If arg is itself an operator application, then either</span><span>
</span><span id="line-1589"></span><span class="hs-comment">--   (a) its precedence must be higher than that of op</span><span>
</span><span id="line-1590"></span><span class="hs-comment">--   (b) its precedency &amp; associativity must be the same as that of op</span><span>
</span><span id="line-1591"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkSectionPrec"><span class="hs-identifier hs-type">checkSectionPrec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FixityDirection"><span class="hs-identifier hs-type">FixityDirection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1592"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1593"></span><span id="checkSectionPrec"><span class="annot"><span class="annottext">checkSectionPrec :: FixityDirection
-&gt; HsExpr GhcPs -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkSectionPrec"><span class="hs-identifier hs-var hs-var">checkSectionPrec</span></a></span></span><span> </span><span id="local-6989586621683055940"><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055940"><span class="hs-identifier hs-var">direction</span></a></span></span><span> </span><span id="local-6989586621683055941"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621683055941"><span class="hs-identifier hs-var">section</span></a></span></span><span> </span><span id="local-6989586621683055942"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055942"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621683055943"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055943"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-1594"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621683055943"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1595"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span id="local-6989586621683055944"><span class="annot"><span class="annottext">XOpApp GhcRn
</span><a href="#local-6989586621683055944"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055945"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055945"><span class="hs-identifier hs-var">op'</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Fixity -&gt; TcRn ()
</span><a href="#local-6989586621683055946"><span class="hs-identifier hs-var">go_for_it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055945"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Fixity
XOpApp GhcRn
</span><a href="#local-6989586621683055944"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1596"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><span class="annottext">XNegApp GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Fixity -&gt; TcRn ()
</span><a href="#local-6989586621683055946"><span class="hs-identifier hs-var">go_for_it</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="GHC.Hs.Type.html#NegateOp"><span class="hs-identifier hs-var">NegateOp</span></a></span><span>     </span><span class="annot"><span class="annottext">Fixity
</span><a href="GHC.Types.Fixity.html#negateFixity"><span class="hs-identifier hs-var">negateFixity</span></a></span><span>
</span><span id="line-1597"></span><span>        </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1598"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1599"></span><span>    </span><span id="local-6989586621683055947"><span class="annot"><span class="annottext">op_name :: OpName
</span><a href="#local-6989586621683055947"><span class="hs-identifier hs-var hs-var">op_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; OpName
</span><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-var">get_op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621683055942"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-1600"></span><span>    </span><span id="local-6989586621683055946"><span class="annot"><span class="annottext">go_for_it :: OpName -&gt; Fixity -&gt; TcRn ()
</span><a href="#local-6989586621683055946"><span class="hs-identifier hs-var hs-var">go_for_it</span></a></span></span><span> </span><span id="local-6989586621683055948"><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055948"><span class="hs-identifier hs-var">arg_op</span></a></span></span><span> </span><span id="local-6989586621683055949"><span class="annot"><span class="annottext">arg_fix :: Fixity
</span><a href="#local-6989586621683055949"><span class="hs-identifier hs-var">arg_fix</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span id="local-6989586621683055950"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621683055950"><span class="hs-identifier hs-var">arg_prec</span></a></span></span><span> </span><span id="local-6989586621683055951"><span class="annot"><span class="annottext">FixityDirection
</span><a href="#local-6989586621683055951"><span class="hs-identifier hs-var">assoc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1601"></span><span>          </span><span id="local-6989586621683055952"><span class="annot"><a href="#local-6989586621683055952"><span class="hs-identifier hs-var">op_fix</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span> </span><span id="local-6989586621683055953"><span class="annot"><a href="#local-6989586621683055953"><span class="hs-identifier hs-var">op_prec</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OpName -&gt; RnM Fixity
</span><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-var">lookupFixityOp</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055947"><span class="hs-identifier hs-var">op_name</span></a></span><span>
</span><span id="line-1602"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055953"><span class="hs-identifier hs-type">op_prec</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;</span></span><span> </span><span class="annot"><a href="#local-6989586621683055950"><span class="hs-identifier hs-type">arg_prec</span></a></span><span>
</span><span id="line-1603"></span><span>                  </span><span class="annot"><span class="hs-operator hs-type">||</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055953"><span class="hs-identifier hs-type">op_prec</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="#local-6989586621683055950"><span class="hs-identifier hs-type">arg_prec</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="#local-6989586621683055940"><span class="hs-identifier hs-type">direction</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="#local-6989586621683055951"><span class="hs-identifier hs-type">assoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1604"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#sectionPrecErr"><span class="hs-identifier hs-type">sectionPrecErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#get_op"><span class="hs-identifier hs-type">get_op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055942"><span class="hs-identifier hs-type">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055952"><span class="hs-identifier hs-type">op_fix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1605"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621683055948"><span class="hs-identifier hs-type">arg_op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683055949"><span class="hs-identifier hs-type">arg_fix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621683055941"><span class="hs-identifier hs-type">section</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1606"></span><span>
</span><span id="line-1607"></span><span class="annot"><span class="hs-comment">-- | Look up the fixity for an operator name.</span></span><span>
</span><span id="line-1608"></span><span class="annot"><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-type">lookupFixityOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span>
</span><span id="line-1609"></span><span id="lookupFixityOp"><span class="annot"><span class="annottext">lookupFixityOp :: OpName -&gt; RnM Fixity
</span><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-var hs-var">lookupFixityOp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-type">NormalOp</span></a></span><span> </span><span id="local-6989586621683055956"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055956"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055956"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1610"></span><span class="annot"><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-var">lookupFixityOp</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="GHC.Hs.Type.html#NegateOp"><span class="hs-identifier hs-var">NegateOp</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#negateName"><span class="hs-identifier hs-var">negateName</span></a></span><span>
</span><span id="line-1611"></span><span class="annot"><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-var">lookupFixityOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#UnboundOp"><span class="hs-identifier hs-type">UnboundOp</span></a></span><span> </span><span id="local-6989586621683055958"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055958"><span class="hs-identifier hs-var">u</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFixityRn"><span class="hs-identifier hs-var">lookupFixityRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; Name
</span><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier hs-var">mkUnboundName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683055958"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span class="annot"><a href="GHC.Rename.HsType.html#lookupFixityOp"><span class="hs-identifier hs-var">lookupFixityOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#RecFldOp"><span class="hs-identifier hs-type">RecFldOp</span></a></span><span> </span><span id="local-6989586621683055960"><span class="annot"><span class="annottext">FieldOcc GhcRn
</span><a href="#local-6989586621683055960"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcRn -&gt; RnM Fixity
</span><a href="GHC.Rename.Fixity.html#lookupFieldFixityRn"><span class="hs-identifier hs-var">lookupFieldFixityRn</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcRn
</span><a href="#local-6989586621683055960"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-1613"></span><span>
</span><span id="line-1614"></span><span class="hs-comment">-- Precedence-related error messages</span><span>
</span><span id="line-1615"></span><span>
</span><span id="line-1616"></span><span class="annot"><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-type">precParseErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span id="precParseErr"><span class="annot"><span class="annottext">precParseErr :: (OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#precParseErr"><span class="hs-identifier hs-var hs-var">precParseErr</span></a></span></span><span> </span><span id="local-6989586621683055961"><span class="annot"><span class="annottext">op1 :: (OpName, Fixity)
</span><a href="#local-6989586621683055961"><span class="hs-identifier hs-var">op1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621683055962"><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055962"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055963"><span class="annot"><span class="annottext">op2 :: (OpName, Fixity)
</span><a href="#local-6989586621683055963"><span class="hs-identifier hs-var">op2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621683055964"><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055964"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1618"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055962"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055964"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1619"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- Avoid error cascade</span><span>
</span><span id="line-1620"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1621"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnPrecedenceParsingError"><span class="hs-identifier hs-var">TcRnPrecedenceParsingError</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity)
</span><a href="#local-6989586621683055961"><span class="hs-identifier hs-var">op1</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity)
</span><a href="#local-6989586621683055963"><span class="hs-identifier hs-var">op2</span></a></span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span class="annot"><a href="GHC.Rename.HsType.html#sectionPrecErr"><span class="hs-identifier hs-type">sectionPrecErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Fixity"><span class="hs-identifier hs-type">Fixity</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1624"></span><span id="sectionPrecErr"><span class="annot"><span class="annottext">sectionPrecErr :: (OpName, Fixity) -&gt; (OpName, Fixity) -&gt; HsExpr GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#sectionPrecErr"><span class="hs-identifier hs-var hs-var">sectionPrecErr</span></a></span></span><span> </span><span id="local-6989586621683055967"><span class="annot"><span class="annottext">op :: (OpName, Fixity)
</span><a href="#local-6989586621683055967"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621683055968"><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055968"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055969"><span class="annot"><span class="annottext">arg_op :: (OpName, Fixity)
</span><a href="#local-6989586621683055969"><span class="hs-identifier hs-var">arg_op</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621683055970"><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055970"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Fixity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055971"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621683055971"><span class="hs-identifier hs-var">section</span></a></span></span><span>
</span><span id="line-1625"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055968"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">OpName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><a href="#local-6989586621683055970"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- Avoid error cascade</span><span>
</span><span id="line-1627"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-1628"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity) -&gt; (OpName, Fixity) -&gt; HsExpr GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnSectionPrecedenceError"><span class="hs-identifier hs-var">TcRnSectionPrecedenceError</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity)
</span><a href="#local-6989586621683055967"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">(OpName, Fixity)
</span><a href="#local-6989586621683055969"><span class="hs-identifier hs-var">arg_op</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621683055971"><span class="hs-identifier hs-var">section</span></a></span><span>
</span><span id="line-1629"></span><span>
</span><span id="line-1630"></span><span class="annot"><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-type">is_unbound</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#OpName"><span class="hs-identifier hs-type">OpName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1631"></span><span id="is_unbound"><span class="annot"><span class="annottext">is_unbound :: OpName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var hs-var">is_unbound</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#NormalOp"><span class="hs-identifier hs-type">NormalOp</span></a></span><span> </span><span id="local-6989586621683055973"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055973"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Builtin.Names.html#isUnboundName"><span class="hs-identifier hs-var">isUnboundName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055973"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1632"></span><span class="annot"><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#UnboundOp"><span class="hs-identifier hs-type">UnboundOp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1633"></span><span class="annot"><a href="GHC.Rename.HsType.html#is_unbound"><span class="hs-identifier hs-var">is_unbound</span></a></span><span> </span><span class="annot"><span class="annottext">OpName
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1634"></span><span>
</span><span id="line-1635"></span><span>
</span><span id="line-1636"></span><span class="annot"><span class="hs-comment">{- *****************************************************
*                                                      *
                 Errors
*                                                      *
***************************************************** -}</span></span><span>
</span><span id="line-1641"></span><span>
</span><span id="line-1642"></span><span class="annot"><a href="GHC.Rename.HsType.html#unexpectedPatSigTypeErr"><span class="hs-identifier hs-type">unexpectedPatSigTypeErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnMessage"><span class="hs-identifier hs-type">TcRnMessage</span></a></span><span>
</span><span id="line-1643"></span><span id="unexpectedPatSigTypeErr"><span class="annot"><span class="annottext">unexpectedPatSigTypeErr :: HsPatSigType GhcPs -&gt; TcRnMessage
</span><a href="GHC.Rename.HsType.html#unexpectedPatSigTypeErr"><span class="hs-identifier hs-var hs-var">unexpectedPatSigTypeErr</span></a></span></span><span> </span><span id="local-6989586621683055975"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621683055975"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1644"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUnexpectedPatSigType"><span class="hs-identifier hs-var">TcRnUnexpectedPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621683055975"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1645"></span><span>
</span><span id="line-1646"></span><span class="annot"><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier hs-type">badKindSigErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1647"></span><span id="badKindSigErr"><span class="annot"><span class="annottext">badKindSigErr :: HsDocContext -&gt; LHsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#badKindSigErr"><span class="hs-identifier hs-var hs-var">badKindSigErr</span></a></span></span><span> </span><span id="local-6989586621683055978"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055978"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055979"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055979"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055980"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055980"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; TcRn () -&gt; TcRn ()
forall ann a. EpAnn ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055979"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-var">addErr</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1649"></span><span>    </span><span class="annot"><span class="annottext">HsDocContext -&gt; TcRnMessage -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnWithHsDocContext"><span class="hs-identifier hs-var">TcRnWithHsDocContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055978"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRnMessage) -&gt; TcRnMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1650"></span><span>    </span><span class="annot"><span class="annottext">Either (HsType GhcPs) (Name, HsType GhcRn) -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnKindSignaturesDisabled"><span class="hs-identifier hs-var">TcRnKindSignaturesDisabled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; Either (HsType GhcPs) (Name, HsType GhcRn)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055980"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span class="hs-comment">-- | Check for DataKinds violations in a type context, as well as \&quot;obvious\&quot;</span><span>
</span><span id="line-1653"></span><span class="hs-comment">-- violations in kind contexts.</span><span>
</span><span id="line-1654"></span><span class="hs-comment">-- See @Note [Checking for DataKinds]@ in &quot;GHC.Tc.Validity&quot; for more on this.</span><span>
</span><span id="line-1655"></span><span class="annot"><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-type">checkDataKinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#RnTyKiEnv"><span class="hs-identifier hs-type">RnTyKiEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1656"></span><span id="checkDataKinds"><span class="annot"><span class="annottext">checkDataKinds :: RnTyKiEnv -&gt; HsType GhcPs -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#checkDataKinds"><span class="hs-identifier hs-var hs-var">checkDataKinds</span></a></span></span><span> </span><span id="local-6989586621683055982"><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055982"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621683055983"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683055983"><span class="hs-identifier hs-var">thing</span></a></span></span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621683055984"><span class="annot"><a href="#local-6989586621683055984"><span class="hs-identifier hs-var">data_kinds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DataKinds</span></span><span>
</span><span id="line-1658"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621683055984"><span class="hs-identifier hs-type">data_kinds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1659"></span><span>         </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#TcRnDataKindsError"><span class="hs-identifier hs-type">TcRnDataKindsError</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683055987"><span class="hs-identifier hs-type">type_or_kind</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="#local-6989586621683055983"><span class="hs-identifier hs-type">thing</span></a></span><span>
</span><span id="line-1660"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1661"></span><span>    </span><span id="local-6989586621683055987"><span class="annot"><span class="annottext">type_or_kind :: TypeOrKind
</span><a href="#local-6989586621683055987"><span class="hs-identifier hs-var hs-var">type_or_kind</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv -&gt; Bool
</span><a href="GHC.Rename.HsType.html#isRnKindLevel"><span class="hs-identifier hs-var">isRnKindLevel</span></a></span><span> </span><span class="annot"><span class="annottext">RnTyKiEnv
</span><a href="#local-6989586621683055982"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#KindLevel"><span class="hs-identifier hs-var">KindLevel</span></a></span><span>
</span><span id="line-1662"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrKind
</span><a href="GHC.Types.Basic.html#TypeLevel"><span class="hs-identifier hs-var">TypeLevel</span></a></span><span>
</span><span id="line-1663"></span><span>
</span><span id="line-1664"></span><span id="local-6989586621683054327"><span class="annot"><a href="GHC.Rename.HsType.html#warnUnusedForAll"><span class="hs-identifier hs-type">warnUnusedForAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#OutputableBndrFlag"><span class="hs-identifier hs-type">OutputableBndrFlag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054327"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Hs.Extension.html#Renamed"><span class="hs-identifier hs-type">Renamed</span></a></span><span>
</span><span id="line-1665"></span><span>                 </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#HsDocContext"><span class="hs-identifier hs-type">HsDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054327"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1666"></span><span id="warnUnusedForAll"><span class="annot"><span class="annottext">warnUnusedForAll :: forall flag.
OutputableBndrFlag flag 'Renamed =&gt;
HsDocContext -&gt; LHsTyVarBndr flag GhcRn -&gt; FreeVars -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warnUnusedForAll"><span class="hs-identifier hs-var hs-var">warnUnusedForAll</span></a></span></span><span> </span><span id="local-6989586621683055993"><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055993"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683055994"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055994"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683055995"><span class="annot"><span class="annottext">HsTyVarBndr flag GhcRn
</span><a href="#local-6989586621683055995"><span class="hs-identifier hs-var">tvb</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683055996"><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055996"><span class="hs-identifier hs-var">used_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1667"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcRn -&gt; HsBndrVar GhcRn
forall flag (pass :: Pass).
HsTyVarBndr flag (GhcPass pass) -&gt; HsBndrVar (GhcPass pass)
</span><a href="GHC.Hs.Type.html#hsBndrVar"><span class="hs-identifier hs-var">hsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcRn
</span><a href="#local-6989586621683055995"><span class="hs-identifier hs-var">tvb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1668"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-type">HsBndrWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; TcRn ()
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1669"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683055997"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055997"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1670"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; TcRn () -&gt; TcRn ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621683055997"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; FreeVars -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">FreeVars
</span><a href="#local-6989586621683055996"><span class="hs-identifier hs-var">used_names</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRn () -&gt; TcRn ()) -&gt; TcRn () -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1671"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683055998"><span class="annot"><span class="annottext">msg :: TcRnMessage
</span><a href="#local-6989586621683055998"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDocContext -&gt; HsTyVarBndrExistentialFlag -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnUnusedQuantifiedTypeVar"><span class="hs-identifier hs-var">TcRnUnusedQuantifiedTypeVar</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocContext
</span><a href="#local-6989586621683055993"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcRn -&gt; HsTyVarBndrExistentialFlag
forall flag.
OutputableBndrFlag flag 'Renamed =&gt;
HsTyVarBndr flag GhcRn -&gt; HsTyVarBndrExistentialFlag
</span><a href="GHC.Tc.Errors.Types.html#HsTyVarBndrExistentialFlag"><span class="hs-identifier hs-var">HsTyVarBndrExistentialFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcRn
</span><a href="#local-6989586621683055995"><span class="hs-identifier hs-var">tvb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1672"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnosticAt"><span class="hs-identifier hs-var">addDiagnosticAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621683055994"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683055998"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1673"></span><span>
</span><span id="line-1674"></span><span class="annot"><a href="GHC.Rename.HsType.html#warnCapturedTerm"><span class="hs-identifier hs-type">warnCapturedTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1675"></span><span id="warnCapturedTerm"><span class="annot"><span class="annottext">warnCapturedTerm :: GenLocated SrcSpanAnnN RdrName
-&gt; Either [GlobalRdrEltX GREInfo] Name -&gt; TcRn ()
</span><a href="GHC.Rename.HsType.html#warnCapturedTerm"><span class="hs-identifier hs-var hs-var">warnCapturedTerm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621683056003"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683056003"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621683056004"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056004"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056005"><span class="annot"><span class="annottext">Either [GlobalRdrEltX GREInfo] Name
</span><a href="#local-6989586621683056005"><span class="hs-identifier hs-var">shadowed_term_names</span></a></span></span><span>
</span><span id="line-1676"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683056006"><span class="annot"><span class="annottext">msg :: TcRnMessage
</span><a href="#local-6989586621683056006"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Either [GlobalRdrEltX GREInfo] Name -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnCapturedTermName"><span class="hs-identifier hs-var">TcRnCapturedTermName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056004"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Either [GlobalRdrEltX GREInfo] Name
</span><a href="#local-6989586621683056005"><span class="hs-identifier hs-var">shadowed_term_names</span></a></span><span>
</span><span id="line-1677"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#addDiagnosticAt"><span class="hs-identifier hs-var">addDiagnosticAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621683056003"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TcRnMessage
</span><a href="#local-6989586621683056006"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1678"></span><span>
</span><span id="line-1679"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
      Finding the free type variables of a (HsType RdrName)
*                                                                      *
************************************************************************


Note [Kind and type-variable binders]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In a type signature we may implicitly bind type/kind variables. For example:
  *   f :: a -&gt; a
      f = ...
    Here we need to find the free type variables of (a -&gt; a),
    so that we know what to quantify

  *   class C (a :: k) where ...
    This binds 'k' in ..., as well as 'a'

  *   f (x :: a -&gt; [a]) = ....
    Here we bind 'a' in ....

  *   f (x :: T a -&gt; T (b :: k)) = ...
    Here we bind both 'a' and the kind variable 'k'

  *   type instance F (T (a :: Maybe k)) = ...a...k...
    Here we want to constrain the kind of 'a', and bind 'k'.

To do that, we need to walk over a type and find its free type/kind variables.
We preserve the left-to-right order of each variable occurrence.
See Note [Ordering of implicit variables].

It is common for lists of free type variables to contain duplicates. For
example, in `f :: a -&gt; a`, the free type variable list is [a, a]. When these
implicitly bound variables are brought into scope (with rnImplicitTvOccs),
duplicates are removed with nubL.

Note [Ordering of implicit variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Since the advent of -XTypeApplications, GHC makes promises about the ordering
of implicit variable quantification. Specifically, we offer that implicitly
quantified variables (such as those in const :: a -&gt; b -&gt; a, without a `forall`)
will occur in left-to-right order of first occurrence. Here are a few examples:

  const :: a -&gt; b -&gt; a       -- forall a b. ...
  f :: Eq a =&gt; b -&gt; a -&gt; a   -- forall a b. ...  contexts are included

  type a &lt;-&lt; b = b -&gt; a
  g :: a &lt;-&lt; b               -- forall a b. ...  type synonyms matter

  class Functor f where
    fmap :: (a -&gt; b) -&gt; f a -&gt; f b   -- forall f a b. ...
    -- The f is quantified by the class, so only a and b are considered in fmap

This simple story is complicated by the possibility of dependency: all variables
must come after any variables mentioned in their kinds.

  typeRep :: Typeable a =&gt; TypeRep (a :: k)   -- forall k a. ...

The k comes first because a depends on k, even though the k appears later than
the a in the code. Thus, GHC does ScopedSort on the variables.
See Note [ScopedSort] in GHC.Core.Type.

Implicitly bound variables are collected by any function which returns a
FreeKiTyVars, which notably includes the `extract-` family of functions
(extractHsTysRdrTyVars, extractHsTyVarBndrsKVs, etc.).
These functions thus promise to keep left-to-right ordering.

Note that for 'HsFunTy m ty1 ty2', we quantify in the order ty1, m, ty2,
since this type is written ty1 %m -&gt; ty2 in the source syntax.

Note [Implicit quantification in type synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We typically bind type/kind variables implicitly when they are in a kind
annotation on the LHS, for example:

  data Proxy (a :: k) = Proxy
  type KindOf (a :: k) = k

Here 'k' is in the kind annotation of a type variable binding, HsBndrKind, and
we want to implicitly quantify over it.  This is easy: just extract all free
variables from the kind signature. That's what we do in extract_hs_tv_bndrs_kvs

By contrast, on the RHS we can't simply collect *all* free variables. Which of
the following are allowed?

  type TySyn1 = a :: Type
  type TySyn2 = 'Nothing :: Maybe a
  type TySyn3 = 'Just ('Nothing :: Maybe a)
  type TySyn4 = 'Left a :: Either Type a

After some design deliberations (see non-taken alternatives below), the answer
is to reject TySyn1 and TySyn3, but allow TySyn2 and TySyn4, at least for now.
We implicitly quantify over free variables of the outermost kind signature, if
one exists:

  * In TySyn1, the outermost kind signature is (:: Type), and it does not have
    any free variables.
  * In TySyn2, the outermost kind signature is (:: Maybe a), it contains a
    free variable 'a', which we implicitly quantify over.
  * In TySyn3, there is no outermost kind signature. The (:: Maybe a) signature
    is hidden inside 'Just.
  * In TySyn4, the outermost kind signature is (:: Either Type a), it contains
    a free variable 'a', which we implicitly quantify over. That is why we can
    also use it to the left of the double colon: 'Left a

The logic resides in extractHsTyRdrTyVarsKindVars.

This was a stopgap solution until we could explicitly bind invisible
type/kind variables:

  type TySyn3 :: forall a. Maybe a
  type TySyn3 @a = 'Just ('Nothing :: Maybe a)

Now that the new syntax was proposed in #425 and implemented in 9.8, we issue a warning
-Wimplicit-rhs-quantification for TySyn2 and TySyn4 and will eventually disallow them.

Note [Implicit quantification in type synonyms: non-taken alternatives]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Alternative I: No quantification
--------------------------------
We could offer no implicit quantification on the RHS, accepting none of the
TySyn&lt;N&gt; examples. The user would have to bind the variables explicitly:

  type TySyn1 a = a :: Type
  type TySyn2 a = 'Nothing :: Maybe a
  type TySyn3 a = 'Just ('Nothing :: Maybe a)
  type TySyn4 a = 'Left a :: Either Type a

However, this would mean that one would have to specify 'a' at call sites every
time, which could be undesired.

Alternative II: Indiscriminate quantification
---------------------------------------------
We could implicitly quantify over all free variables on the RHS just like we do
on the LHS. Then we would infer the following kinds:

  TySyn1 :: forall {a}. Type
  TySyn2 :: forall {a}. Maybe a
  TySyn3 :: forall {a}. Maybe (Maybe a)
  TySyn4 :: forall {a}. Either Type a

This would work fine for TySyn&lt;2,3,4&gt;, but TySyn1 is clearly bogus: the variable
is free-floating, not fixed by anything.

Alternative III: reportFloatingKvs
----------------------------------
We could augment Alternative II by hunting down free-floating variables during
type checking. While viable, this would mean we'd end up accepting this:

  data Prox k (a :: k)
  type T = Prox k

-}</span><span>
</span><span id="line-1834"></span><span>
</span><span id="line-1835"></span><span class="hs-comment">-- A list of free type/kind variables, which can contain duplicates.</span><span>
</span><span id="line-1836"></span><span class="hs-comment">-- See Note [Kind and type-variable binders]</span><span>
</span><span id="line-1837"></span><span class="hs-comment">-- These lists are guaranteed to preserve left-to-right ordering of</span><span>
</span><span id="line-1838"></span><span class="hs-comment">-- the types the variables were extracted from. See also</span><span>
</span><span id="line-1839"></span><span class="hs-comment">-- Note [Ordering of implicit variables].</span><span>
</span><span id="line-1840"></span><span class="hs-keyword">type</span><span> </span><span id="FreeKiTyVars"><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-var">FreeKiTyVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1841"></span><span>
</span><span id="line-1842"></span><span class="hs-comment">-- When renaming a type, do we want to capture or ignore term variables?</span><span>
</span><span id="line-1843"></span><span class="hs-comment">-- Suppose we have a variable binding `a` and we are renaming a type signature</span><span>
</span><span id="line-1844"></span><span class="hs-comment">-- that mentions `a`:</span><span>
</span><span id="line-1845"></span><span class="hs-comment">--</span><span>
</span><span id="line-1846"></span><span class="hs-comment">--    f :: forall t -&gt; ...</span><span>
</span><span id="line-1847"></span><span class="hs-comment">--    f a = ...</span><span>
</span><span id="line-1848"></span><span class="hs-comment">--      where g :: a -&gt; Bool</span><span>
</span><span id="line-1849"></span><span class="hs-comment">--</span><span>
</span><span id="line-1850"></span><span class="hs-comment">-- Does the `a` in the signature for `g` refer to the term variable or is it</span><span>
</span><span id="line-1851"></span><span class="hs-comment">-- implicitly quantified, as if the user wrote `g :: forall a. a -&gt; Bool`?</span><span>
</span><span id="line-1852"></span><span class="hs-comment">-- `CaptureTermVars` selects the former behavior, `DontCaptureTermVars` the latter.</span><span>
</span><span id="line-1853"></span><span class="hs-keyword">data</span><span> </span><span id="TermVariableCapture"><span class="annot"><a href="GHC.Rename.HsType.html#TermVariableCapture"><span class="hs-identifier hs-var">TermVariableCapture</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1854"></span><span>    </span><span id="CaptureTermVars"><span class="annot"><a href="GHC.Rename.HsType.html#CaptureTermVars"><span class="hs-identifier hs-var">CaptureTermVars</span></a></span></span><span>
</span><span id="line-1855"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DontCaptureTermVars"><span class="annot"><a href="GHC.Rename.HsType.html#DontCaptureTermVars"><span class="hs-identifier hs-var">DontCaptureTermVars</span></a></span></span><span>
</span><span id="line-1856"></span><span>
</span><span id="line-1857"></span><span class="annot"><a href="GHC.Rename.HsType.html#getTermVariableCapture"><span class="hs-identifier hs-type">getTermVariableCapture</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#TermVariableCapture"><span class="hs-identifier hs-type">TermVariableCapture</span></a></span><span>
</span><span id="line-1858"></span><span id="getTermVariableCapture"><span class="annot"><span class="annottext">getTermVariableCapture :: RnM TermVariableCapture
</span><a href="GHC.Rename.HsType.html#getTermVariableCapture"><span class="hs-identifier hs-var hs-var">getTermVariableCapture</span></a></span></span><span>
</span><span id="line-1859"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683056011"><span class="annot"><a href="#local-6989586621683056011"><span class="hs-identifier hs-var">required_type_arguments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; TcRnIf TcGblEnv TcLclEnv Bool
forall gbl lcl. Extension -&gt; TcRnIf gbl lcl Bool
</span><a href="GHC.Tc.Utils.Monad.html#xoptM"><span class="hs-identifier hs-var">xoptM</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RequiredTypeArguments</span></span><span>
</span><span id="line-1860"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621683056013"><span class="annot"><a href="#local-6989586621683056013"><span class="hs-identifier hs-var hs-var">tvc</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683056011"><span class="hs-identifier hs-var">required_type_arguments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="GHC.Rename.HsType.html#CaptureTermVars"><span class="hs-identifier hs-var">CaptureTermVars</span></a></span><span>
</span><span id="line-1861"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="GHC.Rename.HsType.html#DontCaptureTermVars"><span class="hs-identifier hs-var">DontCaptureTermVars</span></a></span><span>
</span><span id="line-1862"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621683056013"><span class="hs-identifier hs-type">tvc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1863"></span><span>
</span><span id="line-1864"></span><span class="hs-comment">-- | Filter out any type and kind variables that are already in scope in the</span><span>
</span><span id="line-1865"></span><span class="hs-comment">-- the supplied LocalRdrEnv. Note that this includes named wildcards, which</span><span>
</span><span id="line-1866"></span><span class="hs-comment">-- look like perfectly ordinary type variables at this point.</span><span>
</span><span id="line-1867"></span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScope"><span class="hs-identifier hs-type">filterInScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#TermVariableCapture"><span class="hs-identifier hs-type">TermVariableCapture</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1868"></span><span id="filterInScope"><span class="annot"><span class="annottext">filterInScope :: TermVariableCapture
-&gt; (GlobalRdrEnv, LocalRdrEnv) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScope"><span class="hs-identifier hs-var hs-var">filterInScope</span></a></span></span><span> </span><span id="local-6989586621683056015"><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056015"><span class="hs-identifier hs-var">tvc</span></a></span></span><span> </span><span id="local-6989586621683056016"><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683056016"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; Bool)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TermVariableCapture
-&gt; (GlobalRdrEnv, LocalRdrEnv) -&gt; RdrName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#inScope"><span class="hs-identifier hs-var">inScope</span></a></span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056015"><span class="hs-identifier hs-var">tvc</span></a></span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683056016"><span class="hs-identifier hs-var">envs</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; Bool)
-&gt; (GenLocated SrcSpanAnnN RdrName -&gt; RdrName)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1869"></span><span>
</span><span id="line-1870"></span><span class="hs-comment">-- | Like 'filterInScope', but keep parent class variables intact.</span><span>
</span><span id="line-1871"></span><span class="hs-comment">-- Used with associated types. See Note [Class variables and filterInScope]</span><span>
</span><span id="line-1872"></span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeNonClass"><span class="hs-identifier hs-type">filterInScopeNonClass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#TermVariableCapture"><span class="hs-identifier hs-type">TermVariableCapture</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1873"></span><span id="filterInScopeNonClass"><span class="annot"><span class="annottext">filterInScopeNonClass :: [Name]
-&gt; TermVariableCapture
-&gt; (GlobalRdrEnv, LocalRdrEnv)
-&gt; FreeKiTyVars
-&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeNonClass"><span class="hs-identifier hs-var hs-var">filterInScopeNonClass</span></a></span></span><span> </span><span id="local-6989586621683056020"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683056020"><span class="hs-identifier hs-var">cls_tvs</span></a></span></span><span> </span><span id="local-6989586621683056021"><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056021"><span class="hs-identifier hs-var">tvc</span></a></span></span><span> </span><span id="local-6989586621683056022"><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683056022"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; Bool)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="#local-6989586621683056023"><span class="hs-identifier hs-var">in_scope_non_class</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; Bool)
-&gt; (GenLocated SrcSpanAnnN RdrName -&gt; RdrName)
-&gt; GenLocated SrcSpanAnnN RdrName
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1874"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1875"></span><span>    </span><span class="annot"><a href="#local-6989586621683056023"><span class="hs-identifier hs-type">in_scope_non_class</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1876"></span><span>    </span><span id="local-6989586621683056023"><span class="annot"><span class="annottext">in_scope_non_class :: RdrName -&gt; Bool
</span><a href="#local-6989586621683056023"><span class="hs-identifier hs-var hs-var">in_scope_non_class</span></a></span></span><span> </span><span id="local-6989586621683056024"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056024"><span class="hs-identifier hs-var">rdr</span></a></span></span><span>
</span><span id="line-1877"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
forall name. HasOccName name =&gt; name -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#occName"><span class="hs-identifier hs-var">occName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056024"><span class="hs-identifier hs-var">rdr</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccSet -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#elemOccSet"><span class="hs-operator hs-var">`elemOccSet`</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621683056026"><span class="hs-identifier hs-var">cls_tvs_set</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1878"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
-&gt; (GlobalRdrEnv, LocalRdrEnv) -&gt; RdrName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#inScope"><span class="hs-identifier hs-var">inScope</span></a></span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056021"><span class="hs-identifier hs-var">tvc</span></a></span><span> </span><span class="annot"><span class="annottext">(GlobalRdrEnv, LocalRdrEnv)
</span><a href="#local-6989586621683056022"><span class="hs-identifier hs-var">envs</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056024"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-1879"></span><span>
</span><span id="line-1880"></span><span>    </span><span class="annot"><a href="#local-6989586621683056026"><span class="hs-identifier hs-type">cls_tvs_set</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span>
</span><span id="line-1881"></span><span>    </span><span id="local-6989586621683056026"><span class="annot"><span class="annottext">cls_tvs_set :: OccSet
</span><a href="#local-6989586621683056026"><span class="hs-identifier hs-var hs-var">cls_tvs_set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[OccName] -&gt; OccSet
</span><a href="GHC.Types.Name.Occurrence.html#mkOccSet"><span class="hs-identifier hs-var">mkOccSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683056020"><span class="hs-identifier hs-var">cls_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1882"></span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- | Filter out any type and kind variables that are already in scope in the</span><span>
</span><span id="line-1884"></span><span class="hs-comment">-- the environment's LocalRdrEnv. Note that this includes named wildcards,</span><span>
</span><span id="line-1885"></span><span class="hs-comment">-- which look like perfectly ordinary type variables at this point.</span><span>
</span><span id="line-1886"></span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-type">filterInScopeM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1887"></span><span id="filterInScopeM"><span class="annot"><span class="annottext">filterInScopeM :: FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeM"><span class="hs-identifier hs-var hs-var">filterInScopeM</span></a></span></span><span> </span><span id="local-6989586621683056029"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056029"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-1888"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683056030"><span class="annot"><a href="#local-6989586621683056030"><span class="hs-identifier hs-var">tvc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM TermVariableCapture
</span><a href="GHC.Rename.HsType.html#getTermVariableCapture"><span class="hs-identifier hs-var">getTermVariableCapture</span></a></span><span>
</span><span id="line-1889"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683056031"><span class="annot"><a href="#local-6989586621683056031"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-type">getRdrEnvs</span></a></span><span>
</span><span id="line-1890"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScope"><span class="hs-identifier hs-type">filterInScope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056030"><span class="hs-identifier hs-type">tvc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056031"><span class="hs-identifier hs-type">envs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056029"><span class="hs-identifier hs-type">vars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span class="hs-comment">-- | Like 'filterInScopeM', but keep parent class variables intact.</span><span>
</span><span id="line-1893"></span><span class="hs-comment">-- Used with associated types. See Note [Class variables and filterInScope]</span><span>
</span><span id="line-1894"></span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeNonClassM"><span class="hs-identifier hs-type">filterInScopeNonClassM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1895"></span><span id="filterInScopeNonClassM"><span class="annot"><span class="annottext">filterInScopeNonClassM :: [Name] -&gt; FreeKiTyVars -&gt; RnM FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterInScopeNonClassM"><span class="hs-identifier hs-var hs-var">filterInScopeNonClassM</span></a></span></span><span> </span><span id="local-6989586621683056033"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621683056033"><span class="hs-identifier hs-var">cls_tvs</span></a></span></span><span> </span><span id="local-6989586621683056034"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056034"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-1896"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621683056035"><span class="annot"><a href="#local-6989586621683056035"><span class="hs-identifier hs-var">tvc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RnM TermVariableCapture
</span><a href="GHC.Rename.HsType.html#getTermVariableCapture"><span class="hs-identifier hs-var">getTermVariableCapture</span></a></span><span>
</span><span id="line-1897"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621683056036"><span class="annot"><a href="#local-6989586621683056036"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getRdrEnvs"><span class="hs-identifier hs-type">getRdrEnvs</span></a></span><span>
</span><span id="line-1898"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.HsType.html#filterInScopeNonClass"><span class="hs-identifier hs-type">filterInScopeNonClass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056033"><span class="hs-identifier hs-type">cls_tvs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056035"><span class="hs-identifier hs-type">tvc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056036"><span class="hs-identifier hs-type">envs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056034"><span class="hs-identifier hs-type">vars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1899"></span><span>
</span><span id="line-1900"></span><span class="annot"><a href="GHC.Rename.HsType.html#inScope"><span class="hs-identifier hs-type">inScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#TermVariableCapture"><span class="hs-identifier hs-type">TermVariableCapture</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1901"></span><span id="inScope"><span class="annot"><span class="annottext">inScope :: TermVariableCapture
-&gt; (GlobalRdrEnv, LocalRdrEnv) -&gt; RdrName -&gt; Bool
</span><a href="GHC.Rename.HsType.html#inScope"><span class="hs-identifier hs-var hs-var">inScope</span></a></span></span><span> </span><span id="local-6989586621683056037"><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056037"><span class="hs-identifier hs-var">tvc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621683056038"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683056038"><span class="hs-identifier hs-var">gbl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621683056039"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621683056039"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056040"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056040"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1902"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="#local-6989586621683056037"><span class="hs-identifier hs-var">tvc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1903"></span><span>    </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="GHC.Rename.HsType.html#DontCaptureTermVars"><span class="hs-identifier hs-var">DontCaptureTermVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683056041"><span class="hs-identifier hs-var">rdr_in_scope</span></a></span><span>
</span><span id="line-1904"></span><span>    </span><span class="annot"><span class="annottext">TermVariableCapture
</span><a href="GHC.Rename.HsType.html#CaptureTermVars"><span class="hs-identifier hs-var">CaptureTermVars</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683056041"><span class="hs-identifier hs-var">rdr_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621683056042"><span class="hs-identifier hs-var">demoted_rdr_in_scope</span></a></span><span>
</span><span id="line-1905"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1906"></span><span>    </span><span class="annot"><a href="#local-6989586621683056041"><span class="hs-identifier hs-type">rdr_in_scope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683056042"><span class="hs-identifier hs-type">demoted_rdr_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1907"></span><span>    </span><span id="local-6989586621683056041"><span class="annot"><span class="annottext">rdr_in_scope :: Bool
</span><a href="#local-6989586621683056041"><span class="hs-identifier hs-var hs-var">rdr_in_scope</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="#local-6989586621683056043"><span class="hs-identifier hs-var">elem_lcl</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056040"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-1908"></span><span>    </span><span id="local-6989586621683056042"><span class="annot"><span class="annottext">demoted_rdr_in_scope :: Bool
</span><a href="#local-6989586621683056042"><span class="hs-identifier hs-var hs-var">demoted_rdr_in_scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (RdrName -&gt; Bool) -&gt; Maybe RdrName -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="#local-6989586621683056043"><span class="hs-identifier hs-var">elem_lcl</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; Bool) -&gt; (RdrName -&gt; Bool) -&gt; RdrName -&gt; Bool
forall (f :: * -&gt; *). Applicative f =&gt; f Bool -&gt; f Bool -&gt; f Bool
</span><a href="GHC.Utils.Misc.html#%3C%7C%7C%3E"><span class="hs-operator hs-var">&lt;||&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="#local-6989586621683056046"><span class="hs-identifier hs-var">elem_gbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Maybe RdrName
</span><a href="GHC.Types.Name.Reader.html#demoteRdrNameTv"><span class="hs-identifier hs-var">demoteRdrNameTv</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056040"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1909"></span><span>
</span><span id="line-1910"></span><span>    </span><span class="annot"><a href="#local-6989586621683056043"><span class="hs-identifier hs-type">elem_lcl</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621683056046"><span class="hs-identifier hs-type">elem_gbl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1911"></span><span>    </span><span id="local-6989586621683056043"><span class="annot"><span class="annottext">elem_lcl :: RdrName -&gt; Bool
</span><a href="#local-6989586621683056043"><span class="hs-identifier hs-var hs-var">elem_lcl</span></a></span></span><span> </span><span id="local-6989586621683056047"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056047"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LocalRdrEnv -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#elemLocalRdrEnv"><span class="hs-identifier hs-var">elemLocalRdrEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056047"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621683056039"><span class="hs-identifier hs-var">lcl</span></a></span><span>
</span><span id="line-1912"></span><span>    </span><span id="local-6989586621683056046"><span class="annot"><span class="annottext">elem_gbl :: RdrName -&gt; Bool
</span><a href="#local-6989586621683056046"><span class="hs-identifier hs-var hs-var">elem_gbl</span></a></span></span><span> </span><span id="local-6989586621683056049"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056049"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; ([GlobalRdrEltX GREInfo] -&gt; Bool)
-&gt; [GlobalRdrEltX GREInfo]
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrEltX GREInfo] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; LookupGRE GREInfo -&gt; [GlobalRdrEltX GREInfo]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621683056038"><span class="hs-identifier hs-var">gbl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall info. RdrName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-var">LookupRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621683056049"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-var">RelevantGREsFOS</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantBoth"><span class="hs-identifier hs-var">WantBoth</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1913"></span><span>
</span><span id="line-1914"></span><span class="hs-comment">{- Note [Class variables and filterInScope]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In `bindHsQTyVars` free variables are collected and bound implicitly. Example:
  type ElemKind (a :: Maybe k) = k
Both occurrences of `k` are usages, so GHC creates an implicit binding for `k`.
We can also bind it explicitly with the help of TypeAbstractions:
  type ElemKind @k (a :: Maybe k) = k

This is similar to implicit quantification that happens in type signatures
  const :: a -&gt; b -&gt; a               -- `a` and `b` bound implicitly
  const :: forall a b. a -&gt; b -&gt; a   -- `a` and `b` bound explicitly

In both cases we need to compute the list of free variables to implicitly
quantify over (NB: list, not set, because order matters with TypeApplications)
  * implicitly bound variables in ElemKind:  [k]
  * implicitly bound variables in const:     [a, b]

However, variables that are already in scope are captured. Example:
  {-# LANGUAGE ScopedTypeVariables #-}
  f (x :: a) = ...
    where g :: a -&gt; a
          g _ = x
When we look at `g` in isolation, `a` is a free variable:
  g :: a -&gt; a
But due to ScopedTypeVariables, `a` is actually bound in the surrounding
context, namely the (x :: a) pattern.
It is important that we do /not/ insert an implicit forall in the type of `g`
  g :: forall a. a -&gt; a   -- No! That would mean a different thing
The solution is to use `filterInScopeM` to remove variables already in scope
from candidates for implicit quantification.

Using `filterInScopeM` is additionally important when RequiredTypeArguments is
in effect. Consider
  import Prelude (id)
  data T (a :: id) = MkT    -- Test case T23740e

With RequiredTypeArguments, variables in the term namespace can be referred to
at the type level, so `id` in the `:: id` kind signature ought to refer to `id`
from Prelude. Of course it is not a valid program, but we want a proper error
message rather than implicit quantification:
  T23740e.hs:5:14: error: [GHC-45510]
      &#8226; Term variable &#8216;id&#8217; cannot be used here
          (term variables cannot be promoted)

This leads us to use `filterInScopeM` in `bindHsQTyVars`.
Unfortunately, associated types make matters more complex. Consider
  class C (a::k1) (b::k2) (c::k3) where
    type T (a::k1) b
When renaming `T`, we have to implicitly quantify over the class variable `k1`,
despite the fact that `k1` is in scope from the class header. The type checker
expects to find `k1` in `HsQTvsRn` (the `hsq_ext` field of `LHsQTyVars`). But it
won't find it there if it is filtered out by `filterInScopeM`.

To account for that, we introduce another helper, `filterInScopeNonClassM`,
which acts much like `filterInScopeM` but leaves class variables intact. -}</span><span>
</span><span id="line-1969"></span><span>
</span><span id="line-1970"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_tyarg"><span class="hs-identifier hs-type">extract_tyarg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1971"></span><span id="extract_tyarg"><span class="annot"><span class="annottext">extract_tyarg :: LHsTypeArg GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tyarg"><span class="hs-identifier hs-var hs-var">extract_tyarg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-type">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">XValArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056053"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056053"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056054"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056054"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056053"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056054"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-1972"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_tyarg"><span class="hs-identifier hs-var">extract_tyarg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTypeArg"><span class="hs-identifier hs-type">HsTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056056"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056056"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056057"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056057"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056056"><span class="hs-identifier hs-var">ki</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056057"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-1973"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_tyarg"><span class="hs-identifier hs-var">extract_tyarg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArgPar"><span class="hs-identifier hs-type">HsArgPar</span></a></span><span> </span><span class="annot"><span class="annottext">XArgPar GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056058"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056058"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056058"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-1974"></span><span>
</span><span id="line-1975"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_tyargs"><span class="hs-identifier hs-type">extract_tyargs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1976"></span><span id="extract_tyargs"><span class="annot"><span class="annottext">extract_tyargs :: [LHsTypeArg GhcPs] -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tyargs"><span class="hs-identifier hs-var hs-var">extract_tyargs</span></a></span></span><span> </span><span id="local-6989586621683056060"><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621683056060"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621683056061"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056061"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; FreeKiTyVars
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; FreeKiTyVars
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">LHsTypeArg GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tyarg"><span class="hs-identifier hs-var">extract_tyarg</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056061"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621683056060"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1977"></span><span>
</span><span id="line-1978"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyArgRdrKiTyVars"><span class="hs-identifier hs-type">extractHsTyArgRdrKiTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1979"></span><span id="extractHsTyArgRdrKiTyVars"><span class="annot"><span class="annottext">extractHsTyArgRdrKiTyVars :: [LHsTypeArg GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyArgRdrKiTyVars"><span class="hs-identifier hs-var hs-var">extractHsTyArgRdrKiTyVars</span></a></span></span><span> </span><span id="local-6989586621683056063"><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621683056063"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1980"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs] -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tyargs"><span class="hs-identifier hs-var">extract_tyargs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621683056063"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1981"></span><span>
</span><span id="line-1982"></span><span class="hs-comment">-- | 'extractHsTyRdrTyVars' finds the type/kind variables</span><span>
</span><span id="line-1983"></span><span class="hs-comment">--                          of a HsType/HsKind.</span><span>
</span><span id="line-1984"></span><span class="hs-comment">-- It's used when making the @forall@s explicit.</span><span>
</span><span id="line-1985"></span><span class="hs-comment">-- See Note [Kind and type-variable binders]</span><span>
</span><span id="line-1986"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-type">extractHsTyRdrTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1987"></span><span id="extractHsTyRdrTyVars"><span class="annot"><span class="annottext">extractHsTyRdrTyVars :: LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var hs-var">extractHsTyRdrTyVars</span></a></span></span><span> </span><span id="local-6989586621683056064"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056064"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056064"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1988"></span><span>
</span><span id="line-1989"></span><span class="hs-comment">-- | Extracts the free type/kind variables from the kind signature of a HsType.</span><span>
</span><span id="line-1990"></span><span class="hs-comment">--   This is used to implicitly quantify over @k@ in @type T = Nothing :: Maybe k@.</span><span>
</span><span id="line-1991"></span><span class="hs-comment">-- The left-to-right order of variables is preserved.</span><span>
</span><span id="line-1992"></span><span class="hs-comment">-- See Note [Kind and type-variable binders] and</span><span>
</span><span id="line-1993"></span><span class="hs-comment">--     Note [Ordering of implicit variables] and</span><span>
</span><span id="line-1994"></span><span class="hs-comment">--     Note [Implicit quantification in type synonyms].</span><span>
</span><span id="line-1995"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier hs-type">extractHsTyRdrTyVarsKindVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-1996"></span><span id="extractHsTyRdrTyVarsKindVars"><span class="annot"><span class="annottext">extractHsTyRdrTyVarsKindVars :: LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier hs-var hs-var">extractHsTyRdrTyVarsKindVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056065"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683056065"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1997"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683056065"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1998"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><span class="annottext">XParTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056066"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056066"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVarsKindVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVarsKindVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056066"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1999"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span class="annot"><span class="annottext">XKindSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056067"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056067"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056067"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-2000"></span><span>    </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2001"></span><span>
</span><span id="line-2002"></span><span class="hs-comment">-- | Extracts free type and kind variables from types in a list.</span><span>
</span><span id="line-2003"></span><span class="hs-comment">-- When the same name occurs multiple times in the types, all occurrences</span><span>
</span><span id="line-2004"></span><span class="hs-comment">-- are returned.</span><span>
</span><span id="line-2005"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTysRdrTyVars"><span class="hs-identifier hs-type">extractHsTysRdrTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2006"></span><span id="extractHsTysRdrTyVars"><span class="annot"><span class="annottext">extractHsTysRdrTyVars :: HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTysRdrTyVars"><span class="hs-identifier hs-var hs-var">extractHsTysRdrTyVars</span></a></span></span><span> </span><span id="local-6989586621683056068"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056068"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056068"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span class="hs-comment">-- Returns the free kind variables of any explicitly-kinded binders, returning</span><span>
</span><span id="line-2009"></span><span class="hs-comment">-- variable occurrences in left-to-right order.</span><span>
</span><span id="line-2010"></span><span class="hs-comment">-- See Note [Ordering of implicit variables].</span><span>
</span><span id="line-2011"></span><span class="hs-comment">-- NB: Does /not/ delete the binders themselves.</span><span>
</span><span id="line-2012"></span><span class="hs-comment">--     E.g. given  [k1, a:k1, b:k2]</span><span>
</span><span id="line-2013"></span><span class="hs-comment">--          the function returns [k1,k2], even though k1 is bound here</span><span>
</span><span id="line-2014"></span><span id="local-6989586621683054256"><span class="annot"><a href="GHC.Rename.HsType.html#extractHsTyVarBndrsKVs"><span class="hs-identifier hs-type">extractHsTyVarBndrsKVs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054256"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span></span><span>
</span><span id="line-2015"></span><span id="extractHsTyVarBndrsKVs"><span class="annot"><span class="annottext">extractHsTyVarBndrsKVs :: forall flag. [LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyVarBndrsKVs"><span class="hs-identifier hs-var hs-var">extractHsTyVarBndrsKVs</span></a></span></span><span> </span><span id="local-6989586621683056070"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056070"><span class="hs-identifier hs-var">tv_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs_kvs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056070"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span>
</span><span id="line-2016"></span><span>
</span><span id="line-2017"></span><span class="hs-comment">-- Returns the free kind variables in a type family result signature, returning</span><span>
</span><span id="line-2018"></span><span class="hs-comment">-- variable occurrences in left-to-right order.</span><span>
</span><span id="line-2019"></span><span class="hs-comment">-- See Note [Ordering of implicit variables].</span><span>
</span><span id="line-2020"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractRdrKindSigVars"><span class="hs-identifier hs-type">extractRdrKindSigVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyResultSig"><span class="hs-identifier hs-type">LFamilyResultSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2021"></span><span id="extractRdrKindSigVars"><span class="annot"><span class="annottext">extractRdrKindSigVars :: LFamilyResultSig GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractRdrKindSigVars"><span class="hs-identifier hs-var hs-var">extractRdrKindSigVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056072"><span class="annot"><span class="annottext">FamilyResultSig GhcPs
</span><a href="#local-6989586621683056072"><span class="hs-identifier hs-var">resultSig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FamilyResultSig GhcPs
</span><a href="#local-6989586621683056072"><span class="hs-identifier hs-var">resultSig</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2022"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#KindSig"><span class="hs-identifier hs-type">KindSig</span></a></span><span> </span><span class="annot"><span class="annottext">XCKindSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056074"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056074"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056074"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-2023"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyVarSig"><span class="hs-identifier hs-type">TyVarSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056076"><span class="annot"><span class="annottext">HsTyVarBndr () GhcPs
</span><a href="#local-6989586621683056076"><span class="hs-identifier hs-var">tvb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-type">HsTvb</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tvb_kind :: forall flag pass. HsTyVarBndr flag pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#tvb_kind"><span class="hs-identifier hs-var">tvb_kind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrKind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056078"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056078"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr () GhcPs
</span><a href="#local-6989586621683056076"><span class="hs-identifier hs-var">tvb</span></a></span><span>
</span><span id="line-2024"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056078"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-2025"></span><span>  </span><span class="annot"><span class="annottext">FamilyResultSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span class="hs-comment">-- | Extracts free type and kind variables from an argument in a GADT</span><span>
</span><span id="line-2028"></span><span class="hs-comment">-- constructor, returning variable occurrences in left-to-right order.</span><span>
</span><span id="line-2029"></span><span class="hs-comment">-- See @Note [Ordering of implicit variables]@.</span><span>
</span><span id="line-2030"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractConDeclGADTDetailsTyVars"><span class="hs-identifier hs-type">extractConDeclGADTDetailsTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2031"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclGADTDetails"><span class="hs-identifier hs-type">HsConDeclGADTDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2032"></span><span id="extractConDeclGADTDetailsTyVars"><span class="annot"><span class="annottext">extractConDeclGADTDetailsTyVars :: HsConDeclGADTDetails GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractConDeclGADTDetailsTyVars"><span class="hs-identifier hs-var hs-var">extractConDeclGADTDetailsTyVars</span></a></span></span><span> </span><span id="local-6989586621683056079"><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621683056079"><span class="hs-identifier hs-var">con_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621683056079"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2033"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-type">PrefixConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">XPrefixConGADT GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056081"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621683056081"><span class="hs-identifier hs-var">args</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)] -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_scaled_ltys"><span class="hs-identifier hs-var">extract_scaled_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621683056081"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-2034"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-type">RecConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">XRecConGADT GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056084"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621683056084"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">(HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs) -&gt; LHsType GhcPs)
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)] -&gt; HsContext GhcPs
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDeclField GhcPs -&gt; LHsType GhcPs
ConDeclField GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall pass. ConDeclField pass -&gt; LBangType pass
</span><a href="Language.Haskell.Syntax.Type.html#cd_fld_type"><span class="hs-identifier hs-var">cd_fld_type</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDeclField GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; (GenLocated SrcSpanAnnA (ConDeclField GhcPs)
    -&gt; ConDeclField GhcPs)
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ConDeclField GhcPs) -&gt; ConDeclField GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnA (ConDeclField GhcPs)] -&gt; HsContext GhcPs)
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)] -&gt; HsContext GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621683056084"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-2035"></span><span>
</span><span id="line-2036"></span><span class="hs-comment">-- | Get type/kind variables mentioned in the kind signature, preserving</span><span>
</span><span id="line-2037"></span><span class="hs-comment">-- left-to-right order:</span><span>
</span><span id="line-2038"></span><span class="hs-comment">--</span><span>
</span><span id="line-2039"></span><span class="hs-comment">--  * data T a (b :: k1) :: k2 -&gt; k1 -&gt; k2 -&gt; Type   -- result: [k2,k1]</span><span>
</span><span id="line-2040"></span><span class="hs-comment">--  * data T a (b :: k1)                             -- result: []</span><span>
</span><span id="line-2041"></span><span class="hs-comment">--</span><span>
</span><span id="line-2042"></span><span class="hs-comment">-- See Note [Ordering of implicit variables].</span><span>
</span><span id="line-2043"></span><span class="annot"><a href="GHC.Rename.HsType.html#extractDataDefnKindVars"><span class="hs-identifier hs-type">extractDataDefnKindVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2044"></span><span id="extractDataDefnKindVars"><span class="annot"><span class="annottext">extractDataDefnKindVars :: HsDataDefn GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractDataDefnKindVars"><span class="hs-identifier hs-var hs-var">extractDataDefnKindVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dd_kindSig :: forall pass. HsDataDefn pass -&gt; Maybe (LHsKind pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056088"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621683056088"><span class="hs-identifier hs-var">ksig</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2045"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
-&gt; (GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; FreeKiTyVars)
-&gt; Maybe (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; FreeKiTyVars
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars
GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsTyRdrTyVars"><span class="hs-identifier hs-var">extractHsTyRdrTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
Maybe (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621683056088"><span class="hs-identifier hs-var">ksig</span></a></span><span>
</span><span id="line-2046"></span><span>
</span><span id="line-2047"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_lctxt"><span class="hs-identifier hs-type">extract_lctxt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2048"></span><span id="extract_lctxt"><span class="annot"><span class="annottext">extract_lctxt :: LHsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lctxt"><span class="hs-identifier hs-var hs-var">extract_lctxt</span></a></span></span><span> </span><span id="local-6989586621683056090"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683056090"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683056090"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2049"></span><span>
</span><span id="line-2050"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_scaled_ltys"><span class="hs-identifier hs-type">extract_scaled_ltys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-2051"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2052"></span><span id="extract_scaled_ltys"><span class="annot"><span class="annottext">extract_scaled_ltys :: [HsScaled GhcPs (LHsType GhcPs)] -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_scaled_ltys"><span class="hs-identifier hs-var hs-var">extract_scaled_ltys</span></a></span></span><span> </span><span id="local-6989586621683056091"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621683056091"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621683056092"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056092"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; FreeKiTyVars
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; FreeKiTyVars
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_scaled_lty"><span class="hs-identifier hs-var">extract_scaled_lty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056092"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621683056091"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-2053"></span><span>
</span><span id="line-2054"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_scaled_lty"><span class="hs-identifier hs-type">extract_scaled_lty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2055"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2056"></span><span id="extract_scaled_lty"><span class="annot"><span class="annottext">extract_scaled_lty :: HsScaled GhcPs (LHsType GhcPs) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_scaled_lty"><span class="hs-identifier hs-var hs-var">extract_scaled_lty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span id="local-6989586621683056094"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683056094"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621683056095"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056095"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056096"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056096"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056095"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_arrow"><span class="hs-identifier hs-var">extract_hs_arrow</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683056094"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056096"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2057"></span><span>
</span><span id="line-2058"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-type">extract_ltys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2059"></span><span id="extract_ltys"><span class="annot"><span class="annottext">extract_ltys :: HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var hs-var">extract_ltys</span></a></span></span><span> </span><span id="local-6989586621683056098"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056098"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621683056099"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056099"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; FreeKiTyVars
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056099"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621683056098"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-2060"></span><span>
</span><span id="line-2061"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-type">extract_lty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2062"></span><span id="extract_lty"><span class="annot"><span class="annottext">extract_lty :: LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var hs-var">extract_lty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056100"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683056100"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056101"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span></span><span>
</span><span id="line-2063"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621683056100"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2064"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span>  </span><span id="local-6989586621683056102"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683056102"><span class="hs-identifier hs-var">ltv</span></a></span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tv"><span class="hs-identifier hs-var">extract_tv</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056102"><span class="hs-identifier hs-var">ltv</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2065"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span class="annot"><span class="annottext">XBangTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsBang
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056104"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056104"><span class="hs-identifier hs-var">ty</span></a></span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056104"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2066"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span> </span><span class="annot"><span class="annottext">XRecTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056105"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621683056105"><span class="hs-identifier hs-var">flds</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs)
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; FreeKiTyVars
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span>
</span><span id="line-2067"></span><span>                                            </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; (GenLocated SrcSpanAnnA (ConDeclField GhcPs)
    -&gt; GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; FreeKiTyVars
-&gt; FreeKiTyVars
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ConDeclField GhcPs -&gt; LHsType GhcPs
ConDeclField GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall pass. ConDeclField pass -&gt; LBangType pass
</span><a href="Language.Haskell.Syntax.Type.html#cd_fld_type"><span class="hs-identifier hs-var">cd_fld_type</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDeclField GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; (GenLocated SrcSpanAnnA (ConDeclField GhcPs)
    -&gt; ConDeclField GhcPs)
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ConDeclField GhcPs) -&gt; ConDeclField GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2068"></span><span>                                           </span><span class="annot"><span class="annottext">[LConDeclField GhcPs]
[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621683056105"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-2069"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056106"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056106"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683056107"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056107"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056106"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2070"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056107"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2071"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppKindTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056108"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056108"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683056109"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056109"><span class="hs-identifier hs-var">k</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056108"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2072"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056109"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2073"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-type">HsListTy</span></a></span><span> </span><span class="annot"><span class="annottext">XListTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056110"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056110"><span class="hs-identifier hs-var">ty</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056110"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2074"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056111"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056111"><span class="hs-identifier hs-var">tys</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056111"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2075"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSumTy"><span class="hs-identifier hs-type">HsSumTy</span></a></span><span> </span><span class="annot"><span class="annottext">XSumTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056112"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056112"><span class="hs-identifier hs-var">tys</span></a></span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056112"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2076"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">XFunTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056113"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683056113"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621683056114"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056114"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683056115"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056115"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056114"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2077"></span><span>                                     </span><span class="annot"><span class="annottext">HsArrow GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_arrow"><span class="hs-identifier hs-var">extract_hs_arrow</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621683056113"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-comment">-- See Note [Ordering of implicit variables]</span><span>
</span><span id="line-2078"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056115"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2079"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsIParamTy"><span class="hs-identifier hs-type">HsIParamTy</span></a></span><span> </span><span class="annot"><span class="annottext">XIParamTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs HsIPName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056116"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056116"><span class="hs-identifier hs-var">ty</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056116"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2080"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056117"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056117"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621683056118"><span class="annot"><span class="annottext">LIdP GhcPs
</span><a href="#local-6989586621683056118"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621683056119"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056119"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056117"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2081"></span><span>                                     </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tv"><span class="hs-identifier hs-var">extract_tv</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056118"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2082"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056119"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2083"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><span class="annottext">XParTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056120"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056120"><span class="hs-identifier hs-var">ty</span></a></span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056120"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2084"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSpliceTy"><span class="hs-identifier hs-type">HsSpliceTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>  </span><span class="hs-comment">-- Type splices mention no tvs</span><span>
</span><span id="line-2085"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span> </span><span class="annot"><span class="annottext">XDocTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056121"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056121"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsDoc GhcPs
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056121"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2086"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-type">HsExplicitListTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitListTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056122"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056122"><span class="hs-identifier hs-var">tys</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056122"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2087"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056123"><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056123"><span class="hs-identifier hs-var">tys</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_ltys"><span class="hs-identifier hs-var">extract_ltys</span></a></span><span> </span><span class="annot"><span class="annottext">HsContext GhcPs
</span><a href="#local-6989586621683056123"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2088"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">XTyLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTyLit GhcPs
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2089"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-type">HsStarTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStarTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2090"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span class="annot"><span class="annottext">XKindSig GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056124"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056124"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683056125"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056125"><span class="hs-identifier hs-var">ki</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_kind_sig"><span class="hs-identifier hs-var">extract_kind_sig</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056124"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056125"><span class="hs-identifier hs-var">ki</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2091"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_tele :: forall pass. HsType pass -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056127"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683056127"><span class="hs-identifier hs-var">tele</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056128"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056128"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2092"></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_for_all_telescope"><span class="hs-identifier hs-var">extract_hs_for_all_telescope</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683056127"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2093"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056128"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2094"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_ctxt :: forall pass. HsType pass -&gt; LHsContext pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_ctxt"><span class="hs-identifier hs-var">hst_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056130"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683056130"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056131"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056131"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2095"></span><span>                                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lctxt"><span class="hs-identifier hs-var">extract_lctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621683056130"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2096"></span><span>                                     </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056131"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2097"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#XHsType"><span class="hs-identifier hs-type">XHsType</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2098"></span><span>      </span><span class="hs-comment">-- We deal with these separately in rnLHsTypeWithWildCards</span><span>
</span><span id="line-2099"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056101"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2100"></span><span>
</span><span id="line-2101"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_kind_sig"><span class="hs-identifier hs-type">extract_kind_sig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-comment">-- type</span><span>
</span><span id="line-2102"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-comment">-- kind</span><span>
</span><span id="line-2103"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2104"></span><span id="extract_kind_sig"><span class="annot"><span class="annottext">extract_kind_sig :: LHsType GhcPs -&gt; LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_kind_sig"><span class="hs-identifier hs-var hs-var">extract_kind_sig</span></a></span></span><span> </span><span id="local-6989586621683056132"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056132"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683056133"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056133"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span id="local-6989586621683056134"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056134"><span class="hs-identifier hs-var">acc</span></a></span></span><span>
</span><span id="line-2105"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hst_tele :: forall pass. HsType pass -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_tele"><span class="hs-identifier hs-var">hst_tele</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsf_invis_bndrs :: forall pass.
HsForAllTelescope pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsf_invis_bndrs"><span class="hs-identifier hs-var">hsf_invis_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056135"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683056135"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2106"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hst_body :: forall pass. HsType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hst_body"><span class="hs-identifier hs-var">hst_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056136"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056136"><span class="hs-identifier hs-var">ki_body</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056133"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-2107"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall flag.
[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683056135"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056134"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2108"></span><span>    </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056132"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2109"></span><span>    </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056136"><span class="hs-identifier hs-var">ki_body</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2110"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_kind_sig"><span class="hs-identifier hs-var">extract_kind_sig</span></a></span><span> </span><span id="local-6989586621683056138"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056138"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621683056139"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056139"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span id="local-6989586621683056140"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056140"><span class="hs-identifier hs-var">acc</span></a></span></span><span>
</span><span id="line-2111"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056138"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2112"></span><span>    </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056139"><span class="hs-identifier hs-var">ki</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056140"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2113"></span><span>
</span><span id="line-2114"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_lhs_sig_ty"><span class="hs-identifier hs-type">extract_lhs_sig_ty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2115"></span><span id="extract_lhs_sig_ty"><span class="annot"><span class="annottext">extract_lhs_sig_ty :: LHsSigType GhcPs -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lhs_sig_ty"><span class="hs-identifier hs-var hs-var">extract_lhs_sig_ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056141"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683056141"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sig_body :: forall pass. HsSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056142"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056142"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2116"></span><span>  </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall flag.
HsOuterTyVarBndrs flag GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsOuterTvBndrs"><span class="hs-identifier hs-var">extractHsOuterTvBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621683056141"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056142"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2117"></span><span>
</span><span id="line-2118"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_hs_arrow"><span class="hs-identifier hs-type">extract_hs_arrow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2119"></span><span>                   </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2120"></span><span id="extract_hs_arrow"><span class="annot"><span class="annottext">extract_hs_arrow :: HsArrow GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_arrow"><span class="hs-identifier hs-var hs-var">extract_hs_arrow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-type">HsExplicitMult</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitMult (LHsType GhcPs) GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056143"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056143"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621683056144"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056144"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056143"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056144"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2121"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_hs_arrow"><span class="hs-identifier hs-var">extract_hs_arrow</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056145"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056145"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056145"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2122"></span><span>
</span><span id="line-2123"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_hs_for_all_telescope"><span class="hs-identifier hs-type">extract_hs_for_all_telescope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2124"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-comment">-- Accumulator</span><span>
</span><span id="line-2125"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-comment">-- Free in body</span><span>
</span><span id="line-2126"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2127"></span><span id="extract_hs_for_all_telescope"><span class="annot"><span class="annottext">extract_hs_for_all_telescope :: HsForAllTelescope GhcPs
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_for_all_telescope"><span class="hs-identifier hs-var hs-var">extract_hs_for_all_telescope</span></a></span></span><span> </span><span id="local-6989586621683056146"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683056146"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621683056147"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056147"><span class="hs-identifier hs-var">acc_vars</span></a></span></span><span> </span><span id="local-6989586621683056148"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056148"><span class="hs-identifier hs-var">body_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2128"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621683056146"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2129"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-type">HsForAllVis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsf_vis_bndrs :: forall pass. HsForAllTelescope pass -&gt; [LHsTyVarBndr () pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsf_vis_bndrs"><span class="hs-identifier hs-var">hsf_vis_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056149"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621683056149"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2130"></span><span>      </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall flag.
[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621683056149"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056147"><span class="hs-identifier hs-var">acc_vars</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056148"><span class="hs-identifier hs-var">body_fvs</span></a></span><span>
</span><span id="line-2131"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hsf_invis_bndrs :: forall pass.
HsForAllTelescope pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="Language.Haskell.Syntax.Type.html#hsf_invis_bndrs"><span class="hs-identifier hs-var">hsf_invis_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056150"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683056150"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2132"></span><span>      </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall flag.
[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621683056150"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056147"><span class="hs-identifier hs-var">acc_vars</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056148"><span class="hs-identifier hs-var">body_fvs</span></a></span><span>
</span><span id="line-2133"></span><span>
</span><span id="line-2134"></span><span id="local-6989586621683054440"><span class="annot"><a href="GHC.Rename.HsType.html#extractHsOuterTvBndrs"><span class="hs-identifier hs-type">extractHsOuterTvBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterTyVarBndrs"><span class="hs-identifier hs-type">HsOuterTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054440"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2135"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-comment">-- Free in body</span><span>
</span><span id="line-2136"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span></span><span> </span><span class="hs-comment">-- Free in result</span><span>
</span><span id="line-2137"></span><span id="extractHsOuterTvBndrs"><span class="annot"><span class="annottext">extractHsOuterTvBndrs :: forall flag.
HsOuterTyVarBndrs flag GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extractHsOuterTvBndrs"><span class="hs-identifier hs-var hs-var">extractHsOuterTvBndrs</span></a></span></span><span> </span><span id="local-6989586621683056151"><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcPs
</span><a href="#local-6989586621683056151"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span> </span><span id="local-6989586621683056152"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056152"><span class="hs-identifier hs-var">body_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2138"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOuterTyVarBndrs flag GhcPs
</span><a href="#local-6989586621683056151"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2139"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056152"><span class="hs-identifier hs-var">body_fvs</span></a></span><span>
</span><span id="line-2140"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">hso_bndrs :: forall flag pass.
HsOuterTyVarBndrs flag pass -&gt; [LHsTyVarBndr flag (NoGhcTc pass)]
</span><a href="Language.Haskell.Syntax.Type.html#hso_bndrs"><span class="hs-identifier hs-var">hso_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621683056153"><span class="annot"><span class="annottext">[LHsTyVarBndr flag (NoGhcTc GhcPs)]
</span><a href="#local-6989586621683056153"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall flag.
[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag (NoGhcTc GhcPs)]
[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056153"><span class="hs-identifier hs-var">bndrs</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056152"><span class="hs-identifier hs-var">body_fvs</span></a></span><span>
</span><span id="line-2141"></span><span>
</span><span id="line-2142"></span><span id="local-6989586621683054439"><span class="annot"><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-type">extract_hs_tv_bndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054439"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2143"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>  </span><span class="hs-comment">-- Accumulator</span><span>
</span><span id="line-2144"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>  </span><span class="hs-comment">-- Free in body</span><span>
</span><span id="line-2145"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span></span><span>
</span><span id="line-2146"></span><span class="hs-comment">-- In (forall (a :: Maybe e). a -&gt; b) we have</span><span>
</span><span id="line-2147"></span><span class="hs-comment">--     'a' is bound by the forall</span><span>
</span><span id="line-2148"></span><span class="hs-comment">--     'b' is a free type variable</span><span>
</span><span id="line-2149"></span><span class="hs-comment">--     'e' is a free kind variable</span><span>
</span><span id="line-2150"></span><span id="extract_hs_tv_bndrs"><span class="annot"><span class="annottext">extract_hs_tv_bndrs :: forall flag.
[LHsTyVarBndr flag GhcPs]
-&gt; FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs"><span class="hs-identifier hs-var hs-var">extract_hs_tv_bndrs</span></a></span></span><span> </span><span id="local-6989586621683056156"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056156"><span class="hs-identifier hs-var">tv_bndrs</span></a></span></span><span> </span><span id="local-6989586621683056157"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056157"><span class="hs-identifier hs-var">acc_vars</span></a></span></span><span> </span><span id="local-6989586621683056158"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056158"><span class="hs-identifier hs-var">body_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056159"><span class="hs-identifier hs-var">new_vars</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056157"><span class="hs-identifier hs-var">acc_vars</span></a></span><span>
</span><span id="line-2151"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2152"></span><span>    </span><span id="local-6989586621683056159"><span class="annot"><span class="annottext">new_vars :: FreeKiTyVars
</span><a href="#local-6989586621683056159"><span class="hs-identifier hs-var hs-var">new_vars</span></a></span></span><span>
</span><span id="line-2153"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683056156"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056158"><span class="hs-identifier hs-var">body_vars</span></a></span><span>
</span><span id="line-2154"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-var">filterFreeVarsToBind</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056160"><span class="hs-identifier hs-var">tv_bndr_rdrs</span></a></span><span> </span><span class="annot"><span class="annottext">(FreeKiTyVars -&gt; FreeKiTyVars) -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056161"><span class="hs-identifier hs-var">bndr_vars</span></a></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056158"><span class="hs-identifier hs-var">body_vars</span></a></span><span>
</span><span id="line-2155"></span><span>    </span><span class="hs-comment">-- NB: delete all tv_bndr_rdrs from bndr_vars as well as body_vars.</span><span>
</span><span id="line-2156"></span><span>    </span><span class="hs-comment">-- See Note [Kind variable scoping]</span><span>
</span><span id="line-2157"></span><span>    </span><span id="local-6989586621683056161"><span class="annot"><span class="annottext">bndr_vars :: FreeKiTyVars
</span><a href="#local-6989586621683056161"><span class="hs-identifier hs-var hs-var">bndr_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs_kvs"><span class="hs-identifier hs-var">extract_hs_tv_bndrs_kvs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056156"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span>
</span><span id="line-2158"></span><span>    </span><span id="local-6989586621683056160"><span class="annot"><span class="annottext">tv_bndr_rdrs :: FreeKiTyVars
</span><a href="#local-6989586621683056160"><span class="hs-identifier hs-var hs-var">tv_bndr_rdrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
 -&gt; Maybe (GenLocated SrcSpanAnnN RdrName))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr flag GhcPs -&gt; Maybe (LocatedN (IdP GhcPs))
GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
-&gt; Maybe (GenLocated SrcSpanAnnN RdrName)
forall (p :: Pass) flag.
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
LHsTyVarBndr flag (GhcPass p) -&gt; Maybe (LocatedN (IdP (GhcPass p)))
</span><a href="GHC.Hs.Type.html#hsLTyVarLocName"><span class="hs-identifier hs-var">hsLTyVarLocName</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683056156"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span>
</span><span id="line-2159"></span><span>
</span><span id="line-2160"></span><span id="local-6989586621683056162"><span class="annot"><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs_kvs"><span class="hs-identifier hs-type">extract_hs_tv_bndrs_kvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683056162"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span></span><span>
</span><span id="line-2161"></span><span class="hs-comment">-- Returns the free kind variables of any explicitly-kinded binders, returning</span><span>
</span><span id="line-2162"></span><span class="hs-comment">-- variable occurrences in left-to-right order.</span><span>
</span><span id="line-2163"></span><span class="hs-comment">-- See Note [Ordering of implicit variables].</span><span>
</span><span id="line-2164"></span><span class="hs-comment">-- NB: Does /not/ delete the binders themselves.</span><span>
</span><span id="line-2165"></span><span class="hs-comment">--     E.g. given  [k1, a:k1, b:k2]</span><span>
</span><span id="line-2166"></span><span class="hs-comment">--          the function returns [k1,k2], even though k1 is bound here</span><span>
</span><span id="line-2167"></span><span id="extract_hs_tv_bndrs_kvs"><span class="annot"><span class="annottext">extract_hs_tv_bndrs_kvs :: forall flag. [LHsTyVarBndr flag GhcPs] -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_hs_tv_bndrs_kvs"><span class="hs-identifier hs-var hs-var">extract_hs_tv_bndrs_kvs</span></a></span></span><span> </span><span id="local-6989586621683056164"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621683056164"><span class="hs-identifier hs-var">tv_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2168"></span><span>    </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; FreeKiTyVars -&gt; FreeKiTyVars)
-&gt; FreeKiTyVars
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; FreeKiTyVars
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; FreeKiTyVars -&gt; FreeKiTyVars
GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_lty"><span class="hs-identifier hs-var">extract_lty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2169"></span><span>          </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621683056165"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-type">HsTvb</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tvb_kind :: forall flag pass. HsTyVarBndr flag pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#tvb_kind"><span class="hs-identifier hs-var">tvb_kind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-type">HsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrKind GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621683056165"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621683056165"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621683056164"><span class="hs-identifier hs-var">tv_bndrs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2170"></span><span>
</span><span id="line-2171"></span><span class="annot"><a href="GHC.Rename.HsType.html#extract_tv"><span class="hs-identifier hs-type">extract_tv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2172"></span><span id="extract_tv"><span class="annot"><span class="annottext">extract_tv :: GenLocated SrcSpanAnnN RdrName -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#extract_tv"><span class="hs-identifier hs-var hs-var">extract_tv</span></a></span></span><span> </span><span id="local-6989586621683056166"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056166"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621683056167"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056167"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2173"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-var">isRdrTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056166"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (RdrName -&gt; Bool) -&gt; RdrName -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056166"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056166"><span class="hs-identifier hs-var">tv</span></a></span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056167"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056167"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-2174"></span><span>
</span><span id="line-2175"></span><span class="hs-comment">-- Deletes duplicates in a list of Located things. This is used to:</span><span>
</span><span id="line-2176"></span><span class="hs-comment">--</span><span>
</span><span id="line-2177"></span><span class="annot"><span class="hs-comment">-- * Delete duplicate occurrences of implicitly bound type/kind variables when</span></span><span>
</span><span id="line-2178"></span><span class="hs-comment">--   bringing them into scope (in rnImplicitTvOccs).</span><span>
</span><span id="line-2179"></span><span class="hs-comment">--</span><span>
</span><span id="line-2180"></span><span class="annot"><span class="hs-comment">-- * Delete duplicate occurrences of named wildcards (in rn_hs_sig_wc_type and</span></span><span>
</span><span id="line-2181"></span><span class="hs-comment">--   rnHsWcType).</span><span>
</span><span id="line-2182"></span><span class="hs-comment">--</span><span>
</span><span id="line-2183"></span><span class="hs-comment">-- Importantly, this function is stable with respect to the original ordering</span><span>
</span><span id="line-2184"></span><span class="hs-comment">-- of things in the list. This is important, as it is a property that GHC</span><span>
</span><span id="line-2185"></span><span class="hs-comment">-- relies on to maintain the left-to-right ordering of implicitly quantified</span><span>
</span><span id="line-2186"></span><span class="hs-comment">-- type variables.</span><span>
</span><span id="line-2187"></span><span class="hs-comment">-- See Note [Ordering of implicit variables].</span><span>
</span><span id="line-2188"></span><span id="local-6989586621683054048"><span id="local-6989586621683054049"><span class="annot"><a href="GHC.Rename.HsType.html#nubL"><span class="hs-identifier hs-type">nubL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621683054048"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054049"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054048"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054049"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054048"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-2189"></span><span id="nubL"><span class="annot"><span class="annottext">nubL :: forall a l. Eq a =&gt; [GenLocated l a] -&gt; [GenLocated l a]
</span><a href="GHC.Rename.HsType.html#nubL"><span class="hs-identifier hs-var hs-var">nubL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated l a -&gt; GenLocated l a -&gt; Bool)
-&gt; [GenLocated l a] -&gt; [GenLocated l a]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nubBy</span></span><span> </span><span class="annot"><span class="annottext">GenLocated l a -&gt; GenLocated l a -&gt; Bool
forall a l. Eq a =&gt; GenLocated l a -&gt; GenLocated l a -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#eqLocated"><span class="hs-identifier hs-var">eqLocated</span></a></span><span>
</span><span id="line-2190"></span><span>
</span><span id="line-2191"></span><span id="local-6989586621683054079"><span class="annot"><a href="GHC.Rename.HsType.html#nubN"><span class="hs-identifier hs-type">nubN</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621683054079"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054079"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621683054079"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2192"></span><span id="nubN"><span class="annot"><span class="annottext">nubN :: forall a. Eq a =&gt; [LocatedN a] -&gt; [LocatedN a]
</span><a href="GHC.Rename.HsType.html#nubN"><span class="hs-identifier hs-var hs-var">nubN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN a -&gt; LocatedN a -&gt; Bool) -&gt; [LocatedN a] -&gt; [LocatedN a]
forall a. (a -&gt; a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nubBy</span></span><span> </span><span class="annot"><span class="annottext">LocatedN a -&gt; LocatedN a -&gt; Bool
forall a l. Eq a =&gt; GenLocated l a -&gt; GenLocated l a -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#eqLocated"><span class="hs-identifier hs-var">eqLocated</span></a></span><span>
</span><span id="line-2193"></span><span>
</span><span id="line-2194"></span><span class="hs-comment">-- | Filter out any potential implicit binders that are either</span><span>
</span><span id="line-2195"></span><span class="hs-comment">-- already in scope, or are explicitly bound in the binder.</span><span>
</span><span id="line-2196"></span><span class="annot"><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-type">filterFreeVarsToBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2197"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ Explicitly bound here</span></span><span>
</span><span id="line-2198"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2199"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ Potential implicit binders</span></span><span>
</span><span id="line-2200"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.HsType.html#FreeKiTyVars"><span class="hs-identifier hs-type">FreeKiTyVars</span></a></span><span>
</span><span id="line-2201"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ Final implicit binders</span></span><span>
</span><span id="line-2202"></span><span id="filterFreeVarsToBind"><span class="annot"><span class="annottext">filterFreeVarsToBind :: FreeKiTyVars -&gt; FreeKiTyVars -&gt; FreeKiTyVars
</span><a href="GHC.Rename.HsType.html#filterFreeVarsToBind"><span class="hs-identifier hs-var hs-var">filterFreeVarsToBind</span></a></span></span><span> </span><span id="local-6989586621683056174"><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056174"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; Bool)
-&gt; FreeKiTyVars -&gt; FreeKiTyVars
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName -&gt; Bool
</span><a href="#local-6989586621683056175"><span class="hs-identifier hs-var">is_in_scope</span></a></span><span>
</span><span id="line-2203"></span><span>    </span><span class="hs-comment">-- Make sure to list the binder kvs before the body kvs, as mandated by</span><span>
</span><span id="line-2204"></span><span>    </span><span class="hs-comment">-- Note [Ordering of implicit variables]</span><span>
</span><span id="line-2205"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2206"></span><span>    </span><span id="local-6989586621683056175"><span class="annot"><span class="annottext">is_in_scope :: GenLocated SrcSpanAnnN RdrName -&gt; Bool
</span><a href="#local-6989586621683056175"><span class="hs-identifier hs-var hs-var">is_in_scope</span></a></span></span><span> </span><span id="local-6989586621683056176"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056176"><span class="hs-identifier hs-var">locc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnN RdrName -&gt; Bool) -&gt; FreeKiTyVars -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
-&gt; GenLocated SrcSpanAnnN RdrName -&gt; Bool
forall a l. Eq a =&gt; GenLocated l a -&gt; GenLocated l a -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#eqLocated"><span class="hs-identifier hs-var">eqLocated</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN RdrName
</span><a href="#local-6989586621683056176"><span class="hs-identifier hs-var">locc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreeKiTyVars
</span><a href="#local-6989586621683056174"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-2207"></span></pre></body></html>