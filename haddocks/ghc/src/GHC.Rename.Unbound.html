<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{-

This module contains helper functions for reporting and creating
unbound variables.

-}</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html"><span class="hs-identifier">GHC.Rename.Unbound</span></a></span><span>
</span><span id="line-10"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier">mkUnboundName</span></a></span><span>
</span><span id="line-11"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundNameRdr"><span class="hs-identifier">mkUnboundNameRdr</span></a></span><span>
</span><span id="line-12"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundGRE"><span class="hs-identifier">mkUnboundGRE</span></a></span><span>
</span><span id="line-13"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundGRERdr"><span class="hs-identifier">mkUnboundGRERdr</span></a></span><span>
</span><span id="line-14"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#isUnboundName"><span class="hs-identifier">isUnboundName</span></a></span><span>
</span><span id="line-15"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#reportUnboundName"><span class="hs-identifier">reportUnboundName</span></a></span><span>
</span><span id="line-16"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#reportUnboundName%27"><span class="hs-identifier">reportUnboundName'</span></a></span><span>
</span><span id="line-17"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions"><span class="hs-identifier">unknownNameSuggestions</span></a></span><span>
</span><span id="line-18"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#similarNameSuggestions"><span class="hs-identifier">similarNameSuggestions</span></a></span><span>
</span><span id="line-19"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#fieldSelectorSuggestions"><span class="hs-identifier">fieldSelectorSuggestions</span></a></span><span>
</span><span id="line-20"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier">WhatLooking</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhereLooking"><span class="hs-identifier">WhereLooking</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier">LookingFor</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundName"><span class="hs-identifier">unboundName</span></a></span><span>
</span><span id="line-24"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundNameX"><span class="hs-identifier">unboundNameX</span></a></span><span>
</span><span id="line-25"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundTermNameInTypes"><span class="hs-identifier">unboundTermNameInTypes</span></a></span><span>
</span><span id="line-26"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#IsTermInTypes"><span class="hs-identifier">IsTermInTypes</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier">notInScopeErr</span></a></span><span>
</span><span id="line-28"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#nameSpacesRelated"><span class="hs-identifier">nameSpacesRelated</span></a></span><span>
</span><span id="line-29"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#termNameInType"><span class="hs-identifier">termNameInType</span></a></span><span>
</span><span id="line-30"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html"><span class="hs-identifier">GHC.Driver.DynFlags</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Ppr.html"><span class="hs-identifier">GHC.Driver.Ppr</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier">mkUnboundName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#isUnboundName"><span class="hs-identifier">isUnboundName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier">getUnique</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier">panic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../ghc-boot-9.12.2-1a37/src/GHC.LanguageExtensions.html"><span class="hs-identifier">GHC.LanguageExtensions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LangExt</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html"><span class="hs-identifier">GHC.Types.Hint</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier">GhcHint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Hint.html#SuggestExtension"><span class="hs-identifier">SuggestExtension</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#RemindFieldSelectorSuppressed"><span class="hs-identifier">RemindFieldSelectorSuppressed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#ImportSuggestion"><span class="hs-identifier">ImportSuggestion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#SuggestSimilarNames"><span class="hs-identifier">SuggestSimilarNames</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#LanguageExtensionHint"><span class="hs-identifier">LanguageExtensionHint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Hint.html#SuggestSingleExtension"><span class="hs-identifier">SuggestSingleExtension</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#ImportSuggestion"><span class="hs-identifier">ImportSuggestion</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#SimilarName"><span class="hs-identifier">SimilarName</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#HowInScope"><span class="hs-identifier">HowInScope</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.DFM.html"><span class="hs-identifier">GHC.Types.Unique.DFM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Unique.DFM.html#udfmToList"><span class="hs-identifier">udfmToList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Imported.html"><span class="hs-identifier">GHC.Unit.Module.Imported</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html"><span class="hs-identifier">GHC.Unit.Home.ModInfo</span></a></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier">empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">sortBy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">partition</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">nub</span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-operator">(:|)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Function.html"><span class="hs-identifier">Data.Function</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">on</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.7-5a8f/src/Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
               What to do when a lookup fails
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">-- What kind of suggestion are we looking for? #19843</span><span>
</span><span id="line-80"></span><span class="hs-keyword">data</span><span> </span><span id="WhatLooking"><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier hs-var">WhatLooking</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WL_Anything"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_Anything"><span class="hs-identifier hs-var">WL_Anything</span></a></span></span><span>    </span><span class="hs-comment">-- Any binding</span><span>
</span><span id="line-81"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="WL_Constructor"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_Constructor"><span class="hs-identifier hs-var">WL_Constructor</span></a></span></span><span> </span><span class="hs-comment">-- Constructors and pattern synonyms</span><span>
</span><span id="line-82"></span><span>                        </span><span class="hs-comment">-- E.g. in K { f1 = True }, if K is not in scope,</span><span>
</span><span id="line-83"></span><span>                        </span><span class="hs-comment">-- suggest only constructors</span><span>
</span><span id="line-84"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="WL_RecField"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_RecField"><span class="hs-identifier hs-var">WL_RecField</span></a></span></span><span>    </span><span class="hs-comment">-- Record fields</span><span>
</span><span id="line-85"></span><span>                        </span><span class="hs-comment">-- E.g. in K { f1 = True, f2 = False }, if f2 is not in</span><span>
</span><span id="line-86"></span><span>                        </span><span class="hs-comment">-- scope, suggest only constructor fields</span><span>
</span><span id="line-87"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="WL_None"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_None"><span class="hs-identifier hs-var">WL_None</span></a></span></span><span>        </span><span class="hs-comment">-- No suggestions</span><span>
</span><span id="line-88"></span><span>                        </span><span class="hs-comment">-- WS_None is used for rebindable syntax, where there</span><span>
</span><span id="line-89"></span><span>                        </span><span class="hs-comment">-- is no point in suggesting alternative spellings</span><span>
</span><span id="line-90"></span><span>                 </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621682986294"><span id="local-6989586621682986299"><span class="annot"><span class="annottext">WhatLooking -&gt; WhatLooking -&gt; Bool
(WhatLooking -&gt; WhatLooking -&gt; Bool)
-&gt; (WhatLooking -&gt; WhatLooking -&gt; Bool) -&gt; Eq WhatLooking
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: WhatLooking -&gt; WhatLooking -&gt; Bool
== :: WhatLooking -&gt; WhatLooking -&gt; Bool
$c/= :: WhatLooking -&gt; WhatLooking -&gt; Bool
/= :: WhatLooking -&gt; WhatLooking -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">data</span><span> </span><span id="WhereLooking"><span class="annot"><a href="GHC.Rename.Unbound.html#WhereLooking"><span class="hs-identifier hs-var">WhereLooking</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WL_Anywhere"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_Anywhere"><span class="hs-identifier hs-var">WL_Anywhere</span></a></span></span><span>   </span><span class="hs-comment">-- Any binding</span><span>
</span><span id="line-93"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="WL_Global"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_Global"><span class="hs-identifier hs-var">WL_Global</span></a></span></span><span>     </span><span class="hs-comment">-- Any top-level binding (local or imported)</span><span>
</span><span id="line-94"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="WL_LocalTop"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_LocalTop"><span class="hs-identifier hs-var">WL_LocalTop</span></a></span></span><span>   </span><span class="hs-comment">-- Any top-level binding in this module</span><span>
</span><span id="line-95"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="WL_LocalOnly"><span class="annot"><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a></span></span><span>
</span><span id="line-96"></span><span>                        </span><span class="hs-comment">-- Only local bindings</span><span>
</span><span id="line-97"></span><span>                        </span><span class="hs-comment">-- (pattern synonyms declarations,</span><span>
</span><span id="line-98"></span><span>                        </span><span class="hs-comment">-- see Note [Renaming pattern synonym variables]</span><span>
</span><span id="line-99"></span><span>                        </span><span class="hs-comment">-- in GHC.Rename.Bind)</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">data</span><span> </span><span id="LookingFor"><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-var">LookingFor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LF"><span class="annot"><a href="GHC.Rename.Unbound.html#LF"><span class="hs-identifier hs-var">LF</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="lf_which"><span class="annot"><span class="annottext">LookingFor -&gt; WhatLooking
</span><a href="GHC.Rename.Unbound.html#lf_which"><span class="hs-identifier hs-var hs-var">lf_which</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier hs-type">WhatLooking</span></a></span><span>
</span><span id="line-102"></span><span>                     </span><span class="hs-special">,</span><span> </span><span id="lf_where"><span class="annot"><span class="annottext">LookingFor -&gt; WhereLooking
</span><a href="GHC.Rename.Unbound.html#lf_where"><span class="hs-identifier hs-var hs-var">lf_where</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a></span><span>
</span><span id="line-103"></span><span>                     </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">data</span><span> </span><span id="IsTermInTypes"><span class="annot"><a href="GHC.Rename.Unbound.html#IsTermInTypes"><span class="hs-identifier hs-var">IsTermInTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnknownTermInTypes"><span class="annot"><a href="GHC.Rename.Unbound.html#UnknownTermInTypes"><span class="hs-identifier hs-var">UnknownTermInTypes</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="TermInTypes"><span class="annot"><a href="GHC.Rename.Unbound.html#TermInTypes"><span class="hs-identifier hs-var">TermInTypes</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NoTermInTypes"><span class="annot"><a href="GHC.Rename.Unbound.html#NoTermInTypes"><span class="hs-identifier hs-var">NoTermInTypes</span></a></span></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-type">mkUnboundNameRdr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-108"></span><span id="mkUnboundNameRdr"><span class="annot"><span class="annottext">mkUnboundNameRdr :: RdrName -&gt; Name
</span><a href="GHC.Rename.Unbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-var hs-var">mkUnboundNameRdr</span></a></span></span><span> </span><span id="local-6989586621682986312"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986312"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Name
</span><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier hs-var">mkUnboundName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986312"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundGRE"><span class="hs-identifier hs-type">mkUnboundGRE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-111"></span><span id="mkUnboundGRE"><span class="annot"><span class="annottext">mkUnboundGRE :: OccName -&gt; GlobalRdrElt
</span><a href="GHC.Rename.Unbound.html#mkUnboundGRE"><span class="hs-identifier hs-var hs-var">mkUnboundGRE</span></a></span></span><span> </span><span id="local-6989586621682986314"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986314"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="GHC.Types.GREInfo.html#UnboundGRE"><span class="hs-identifier hs-var">UnboundGRE</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; GlobalRdrElt) -&gt; Name -&gt; GlobalRdrElt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Name
</span><a href="GHC.Builtin.Names.html#mkUnboundName"><span class="hs-identifier hs-var">mkUnboundName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986314"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundGRERdr"><span class="hs-identifier hs-type">mkUnboundGRERdr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span>
</span><span id="line-114"></span><span id="mkUnboundGRERdr"><span class="annot"><span class="annottext">mkUnboundGRERdr :: RdrName -&gt; GlobalRdrElt
</span><a href="GHC.Rename.Unbound.html#mkUnboundGRERdr"><span class="hs-identifier hs-var hs-var">mkUnboundGRERdr</span></a></span></span><span> </span><span id="local-6989586621682986318"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986318"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GREInfo -&gt; Parent -&gt; Name -&gt; GlobalRdrElt
</span><a href="GHC.Types.Name.Reader.html#mkLocalGRE"><span class="hs-identifier hs-var">mkLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GREInfo
</span><a href="GHC.Types.GREInfo.html#UnboundGRE"><span class="hs-identifier hs-var">UnboundGRE</span></a></span><span> </span><span class="annot"><span class="annottext">Parent
</span><a href="GHC.Types.Name.Reader.html#NoParent"><span class="hs-identifier hs-var">NoParent</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; GlobalRdrElt) -&gt; Name -&gt; GlobalRdrElt
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Name
</span><a href="GHC.Rename.Unbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-var">mkUnboundNameRdr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986318"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="annot"><a href="GHC.Rename.Unbound.html#reportUnboundName%27"><span class="hs-identifier hs-type">reportUnboundName'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier hs-type">WhatLooking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-117"></span><span id="reportUnboundName%27"><span class="annot"><span class="annottext">reportUnboundName' :: WhatLooking -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#reportUnboundName%27"><span class="hs-identifier hs-var hs-var">reportUnboundName'</span></a></span></span><span> </span><span id="local-6989586621682986319"><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986319"><span class="hs-identifier hs-var">what_look</span></a></span></span><span> </span><span id="local-6989586621682986320"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986320"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundName"><span class="hs-identifier hs-var">unboundName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WhatLooking -&gt; WhereLooking -&gt; LookingFor
</span><a href="GHC.Rename.Unbound.html#LF"><span class="hs-identifier hs-var">LF</span></a></span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986319"><span class="hs-identifier hs-var">what_look</span></a></span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_Anywhere"><span class="hs-identifier hs-var">WL_Anywhere</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986320"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><a href="GHC.Rename.Unbound.html#reportUnboundName"><span class="hs-identifier hs-type">reportUnboundName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-120"></span><span id="reportUnboundName"><span class="annot"><span class="annottext">reportUnboundName :: RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#reportUnboundName"><span class="hs-identifier hs-var hs-var">reportUnboundName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WhatLooking -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#reportUnboundName%27"><span class="hs-identifier hs-var">reportUnboundName'</span></a></span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_Anything"><span class="hs-identifier hs-var">WL_Anything</span></a></span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundName"><span class="hs-identifier hs-type">unboundName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-123"></span><span id="unboundName"><span class="annot"><span class="annottext">unboundName :: LookingFor -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundName"><span class="hs-identifier hs-var hs-var">unboundName</span></a></span></span><span> </span><span id="local-6989586621682986321"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986321"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span id="local-6989586621682986322"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986322"><span class="hs-identifier hs-var">rdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameX"><span class="hs-identifier hs-var">unboundNameX</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986321"><span class="hs-identifier hs-var">lf</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986322"><span class="hs-identifier hs-var">rdr</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundNameX"><span class="hs-identifier hs-type">unboundNameX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-126"></span><span id="unboundNameX"><span class="annot"><span class="annottext">unboundNameX :: LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameX"><span class="hs-identifier hs-var hs-var">unboundNameX</span></a></span></span><span> </span><span id="local-6989586621682986323"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986323"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986324"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986324"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621682986325"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986325"><span class="hs-identifier hs-var">hints</span></a></span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsTermInTypes -&gt; LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameOrTermInType"><span class="hs-identifier hs-var">unboundNameOrTermInType</span></a></span><span> </span><span class="annot"><span class="annottext">IsTermInTypes
</span><a href="GHC.Rename.Unbound.html#NoTermInTypes"><span class="hs-identifier hs-var">NoTermInTypes</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986323"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986324"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986325"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundTermNameInTypes"><span class="hs-identifier hs-type">unboundTermNameInTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-130"></span><span id="unboundTermNameInTypes"><span class="annot"><span class="annottext">unboundTermNameInTypes :: LookingFor -&gt; RdrName -&gt; RdrName -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundTermNameInTypes"><span class="hs-identifier hs-var hs-var">unboundTermNameInTypes</span></a></span></span><span> </span><span id="local-6989586621682986327"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986327"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986328"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986328"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621682986329"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986329"><span class="hs-identifier hs-var">demoted_rdr_name</span></a></span></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsTermInTypes -&gt; LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameOrTermInType"><span class="hs-identifier hs-var">unboundNameOrTermInType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; IsTermInTypes
</span><a href="GHC.Rename.Unbound.html#UnknownTermInTypes"><span class="hs-identifier hs-var">UnknownTermInTypes</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986329"><span class="hs-identifier hs-var">demoted_rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986327"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986328"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- Catches imported qualified terms in type signatures</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- with proper error message and suggestions</span><span>
</span><span id="line-135"></span><span class="annot"><a href="GHC.Rename.Unbound.html#termNameInType"><span class="hs-identifier hs-type">termNameInType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-136"></span><span id="termNameInType"><span class="annot"><span class="annottext">termNameInType :: LookingFor -&gt; RdrName -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#termNameInType"><span class="hs-identifier hs-var hs-var">termNameInType</span></a></span></span><span> </span><span id="local-6989586621682986330"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986330"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986331"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986331"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621682986332"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986332"><span class="hs-identifier hs-var">demoted_rdr_name</span></a></span></span><span> </span><span id="local-6989586621682986333"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986333"><span class="hs-identifier hs-var">external_hints</span></a></span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsTermInTypes -&gt; LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameOrTermInType"><span class="hs-identifier hs-var">unboundNameOrTermInType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; IsTermInTypes
</span><a href="GHC.Rename.Unbound.html#TermInTypes"><span class="hs-identifier hs-var">TermInTypes</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986332"><span class="hs-identifier hs-var">demoted_rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986330"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986331"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986333"><span class="hs-identifier hs-var">external_hints</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unboundNameOrTermInType"><span class="hs-identifier hs-type">unboundNameOrTermInType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#IsTermInTypes"><span class="hs-identifier hs-type">IsTermInTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-140"></span><span id="unboundNameOrTermInType"><span class="annot"><span class="annottext">unboundNameOrTermInType :: IsTermInTypes -&gt; LookingFor -&gt; RdrName -&gt; [GhcHint] -&gt; RnM Name
</span><a href="GHC.Rename.Unbound.html#unboundNameOrTermInType"><span class="hs-identifier hs-var hs-var">unboundNameOrTermInType</span></a></span></span><span> </span><span id="local-6989586621682986334"><span class="annot"><span class="annottext">IsTermInTypes
</span><a href="#local-6989586621682986334"><span class="hs-identifier hs-var">if_term_in_type</span></a></span></span><span> </span><span id="local-6989586621682986335"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986335"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986336"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986336"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span> </span><span id="local-6989586621682986337"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986337"><span class="hs-identifier hs-var">hints</span></a></span></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682986338"><span class="annot"><a href="#local-6989586621682986338"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-142"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986340"><span class="annot"><a href="#local-6989586621682986340"><span class="hs-identifier hs-var hs-var">show_helpful_errors</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GeneralFlag -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#gopt"><span class="hs-identifier hs-var">gopt</span></a></span><span> </span><span class="annot"><span class="annottext">GeneralFlag
</span><a href="GHC.Driver.Flags.html#Opt_HelpfulErrors"><span class="hs-identifier hs-var">Opt_HelpfulErrors</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986338"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-143"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="hs-identifier hs-type">not</span></span><span> </span><span class="annot"><a href="#local-6989586621682986340"><span class="hs-identifier hs-type">show_helpful_errors</span></a></span><span>
</span><span id="line-144"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621682986345"><span class="hs-identifier hs-type">make_error</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682986337"><span class="hs-identifier hs-type">hints</span></a></span><span>
</span><span id="line-145"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682986346"><span class="annot"><a href="#local-6989586621682986346"><span class="hs-identifier hs-var">local_env</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getLocalRdrEnv"><span class="hs-identifier hs-type">getLocalRdrEnv</span></a></span><span>
</span><span id="line-146"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986348"><span class="annot"><a href="#local-6989586621682986348"><span class="hs-identifier hs-var">global_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-type">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-147"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986350"><span class="annot"><a href="#local-6989586621682986350"><span class="hs-identifier hs-var">impInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getImports"><span class="hs-identifier hs-type">getImports</span></a></span><span>
</span><span id="line-148"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986352"><span class="annot"><a href="#local-6989586621682986352"><span class="hs-identifier hs-var">currmod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-type">getModule</span></a></span><span>
</span><span id="line-149"></span><span>                  </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986354"><span class="annot"><a href="#local-6989586621682986354"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getHpt"><span class="hs-identifier hs-type">getHpt</span></a></span><span>
</span><span id="line-150"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986356"><span class="annot"><a href="#local-6989586621682986356"><span class="hs-identifier hs-var">imp_errs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986357"><span class="annot"><a href="#local-6989586621682986357"><span class="hs-identifier hs-var">suggs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-151"></span><span>                          </span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-type">unknownNameSuggestions_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986335"><span class="hs-identifier hs-type">looking_for</span></a></span><span>
</span><span id="line-152"></span><span>                            </span><span class="annot"><a href="#local-6989586621682986338"><span class="hs-identifier hs-type">dflags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986354"><span class="hs-identifier hs-type">hpt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986352"><span class="hs-identifier hs-type">currmod</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986348"><span class="hs-identifier hs-type">global_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986346"><span class="hs-identifier hs-type">local_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986350"><span class="hs-identifier hs-type">impInfo</span></a></span><span>
</span><span id="line-153"></span><span>                            </span><span class="annot"><a href="#local-6989586621682986336"><span class="hs-identifier hs-type">rdr_name</span></a></span><span>
</span><span id="line-154"></span><span>                  </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#addErr"><span class="hs-identifier hs-type">addErr</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-155"></span><span>                      </span><span class="annot"><a href="#local-6989586621682986345"><span class="hs-identifier hs-type">make_error</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986356"><span class="hs-identifier hs-type">imp_errs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682986337"><span class="hs-identifier hs-type">hints</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">++</span></span><span> </span><span class="annot"><a href="#local-6989586621682986357"><span class="hs-identifier hs-type">suggs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#mkUnboundNameRdr"><span class="hs-identifier hs-type">mkUnboundNameRdr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986336"><span class="hs-identifier hs-type">rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>      </span><span id="local-6989586621682986359"><span class="annot"><span class="annottext">name_to_search :: RdrName
</span><a href="#local-6989586621682986359"><span class="hs-identifier hs-var hs-var">name_to_search</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IsTermInTypes
</span><a href="#local-6989586621682986334"><span class="hs-identifier hs-var">if_term_in_type</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="annottext">IsTermInTypes
</span><a href="GHC.Rename.Unbound.html#NoTermInTypes"><span class="hs-identifier hs-var">NoTermInTypes</span></a></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986336"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><a href="GHC.Rename.Unbound.html#UnknownTermInTypes"><span class="hs-identifier hs-type">UnknownTermInTypes</span></a></span><span> </span><span id="local-6989586621682986360"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986360"><span class="hs-identifier hs-var">demoted_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986360"><span class="hs-identifier hs-var">demoted_name</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><a href="GHC.Rename.Unbound.html#TermInTypes"><span class="hs-identifier hs-type">TermInTypes</span></a></span><span> </span><span id="local-6989586621682986361"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986361"><span class="hs-identifier hs-var">demoted_name</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986361"><span class="hs-identifier hs-var">demoted_name</span></a></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span>      </span><span id="local-6989586621682986362"><span class="annot"><span class="annottext">err :: NotInScopeError
</span><a href="#local-6989586621682986362"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WhereLooking -&gt; RdrName -&gt; NotInScopeError
</span><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier hs-var">notInScopeErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LookingFor -&gt; WhereLooking
</span><a href="GHC.Rename.Unbound.html#lf_where"><span class="hs-identifier hs-var">lf_where</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986335"><span class="hs-identifier hs-var">looking_for</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986359"><span class="hs-identifier hs-var">name_to_search</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>      </span><span id="local-6989586621682986345"><span class="annot"><span class="annottext">make_error :: [ImportError] -&gt; [GhcHint] -&gt; TcRnMessage
</span><a href="#local-6989586621682986345"><span class="hs-identifier hs-var hs-var">make_error</span></a></span></span><span> </span><span id="local-6989586621682986363"><span class="annot"><span class="annottext">[ImportError]
</span><a href="#local-6989586621682986363"><span class="hs-identifier hs-var">imp_errs</span></a></span></span><span> </span><span id="local-6989586621682986364"><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986364"><span class="hs-identifier hs-var">hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IsTermInTypes
</span><a href="#local-6989586621682986334"><span class="hs-identifier hs-var">if_term_in_type</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-166"></span><span>        </span><span class="annot"><a href="GHC.Rename.Unbound.html#TermInTypes"><span class="hs-identifier hs-type">TermInTypes</span></a></span><span> </span><span id="local-6989586621682986365"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986365"><span class="hs-identifier hs-var">demoted_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; [GhcHint] -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnTermNameInType"><span class="hs-identifier hs-var">TcRnTermNameInType</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986365"><span class="hs-identifier hs-var">demoted_name</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986364"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="annot"><span class="annottext">IsTermInTypes
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NotInScopeError
-&gt; RdrName -&gt; [ImportError] -&gt; [GhcHint] -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnNotInScope"><span class="hs-identifier hs-var">TcRnNotInScope</span></a></span><span> </span><span class="annot"><span class="annottext">NotInScopeError
</span><a href="#local-6989586621682986362"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986359"><span class="hs-identifier hs-var">name_to_search</span></a></span><span> </span><span class="annot"><span class="annottext">[ImportError]
</span><a href="#local-6989586621682986363"><span class="hs-identifier hs-var">imp_errs</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986364"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="annot"><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier hs-type">notInScopeErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhereLooking"><span class="hs-identifier hs-type">WhereLooking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html#NotInScopeError"><span class="hs-identifier hs-type">NotInScopeError</span></a></span><span>
</span><span id="line-170"></span><span id="notInScopeErr"><span class="annot"><span class="annottext">notInScopeErr :: WhereLooking -&gt; RdrName -&gt; NotInScopeError
</span><a href="GHC.Rename.Unbound.html#notInScopeErr"><span class="hs-identifier hs-var hs-var">notInScopeErr</span></a></span></span><span> </span><span id="local-6989586621682986368"><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986368"><span class="hs-identifier hs-var">where_look</span></a></span></span><span> </span><span id="local-6989586621682986369"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986369"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682986370"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986370"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe Name
</span><a href="GHC.Types.Name.Reader.html#isExact_maybe"><span class="hs-identifier hs-var">isExact_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986369"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; NotInScopeError
</span><a href="GHC.Tc.Errors.Types.html#NoExactName"><span class="hs-identifier hs-var">NoExactName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986370"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalTop"><span class="hs-identifier hs-var">WL_LocalTop</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986368"><span class="hs-identifier hs-var">where_look</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NotInScopeError
</span><a href="GHC.Tc.Errors.Types.html#NoTopLevelBinding"><span class="hs-identifier hs-var">NoTopLevelBinding</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NotInScopeError
</span><a href="GHC.Tc.Errors.Types.html#NotInScope"><span class="hs-identifier hs-var">NotInScope</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="annot"><span class="hs-comment">-- | Called from the typechecker (&quot;GHC.Tc.Errors&quot;) when we find an unbound variable</span></span><span>
</span><span id="line-179"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions"><span class="hs-identifier hs-type">unknownNameSuggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier hs-type">WhatLooking</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#RnM"><span class="hs-identifier hs-type">RnM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ImportError"><span class="hs-identifier hs-type">ImportError</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span id="unknownNameSuggestions"><span class="annot"><span class="annottext">unknownNameSuggestions :: LocalRdrEnv
-&gt; WhatLooking -&gt; RdrName -&gt; RnM ([ImportError], [GhcHint])
</span><a href="GHC.Rename.Unbound.html#unknownNameSuggestions"><span class="hs-identifier hs-var hs-var">unknownNameSuggestions</span></a></span></span><span> </span><span id="local-6989586621682986375"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986375"><span class="hs-identifier hs-var">lcl_env</span></a></span></span><span> </span><span id="local-6989586621682986376"><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986376"><span class="hs-identifier hs-var">what_look</span></a></span></span><span> </span><span id="local-6989586621682986377"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986377"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682986378"><span class="annot"><a href="#local-6989586621682986378"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.DynFlags.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-182"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986379"><span class="annot"><a href="#local-6989586621682986379"><span class="hs-identifier hs-var">hpt</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getHpt"><span class="hs-identifier hs-type">getHpt</span></a></span><span>
</span><span id="line-183"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986380"><span class="annot"><a href="#local-6989586621682986380"><span class="hs-identifier hs-var">rdr_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getGlobalRdrEnv"><span class="hs-identifier hs-type">getGlobalRdrEnv</span></a></span><span>
</span><span id="line-184"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986381"><span class="annot"><a href="#local-6989586621682986381"><span class="hs-identifier hs-var">imp_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#getImports"><span class="hs-identifier hs-type">getImports</span></a></span><span>
</span><span id="line-185"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682986382"><span class="annot"><a href="#local-6989586621682986382"><span class="hs-identifier hs-var">curr_mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#getModule"><span class="hs-identifier hs-type">getModule</span></a></span><span>
</span><span id="line-186"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-187"></span><span>        </span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-type">unknownNameSuggestions_</span></a></span><span>
</span><span id="line-188"></span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#LF"><span class="hs-identifier hs-type">LF</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986376"><span class="hs-identifier hs-type">what_look</span></a></span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WL_Anywhere"><span class="hs-identifier hs-type">WL_Anywhere</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>          </span><span class="annot"><a href="#local-6989586621682986378"><span class="hs-identifier hs-type">dflags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986379"><span class="hs-identifier hs-type">hpt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986382"><span class="hs-identifier hs-type">curr_mod</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986380"><span class="hs-identifier hs-type">rdr_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986375"><span class="hs-identifier hs-type">lcl_env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986381"><span class="hs-identifier hs-type">imp_info</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682986377"><span class="hs-identifier hs-type">tried_rdr_name</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="annot"><a href="GHC.Rename.Unbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-type">unknownNameSuggestions_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-192"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-193"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier hs-type">ImportAvails</span></a></span><span>
</span><span id="line-194"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ImportError"><span class="hs-identifier hs-type">ImportError</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span id="unknownNameSuggestions_"><span class="annot"><span class="annottext">unknownNameSuggestions_ :: LookingFor
-&gt; DynFlags
-&gt; HomePackageTable
-&gt; Module
-&gt; GlobalRdrEnv
-&gt; LocalRdrEnv
-&gt; ImportAvails
-&gt; RdrName
-&gt; ([ImportError], [GhcHint])
</span><a href="GHC.Rename.Unbound.html#unknownNameSuggestions_"><span class="hs-identifier hs-var hs-var">unknownNameSuggestions_</span></a></span></span><span> </span><span id="local-6989586621682986383"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986383"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986384"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986384"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682986385"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682986385"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621682986386"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986386"><span class="hs-identifier hs-var">curr_mod</span></a></span></span><span> </span><span id="local-6989586621682986387"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986387"><span class="hs-identifier hs-var">global_env</span></a></span></span><span> </span><span id="local-6989586621682986388"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986388"><span class="hs-identifier hs-var">local_env</span></a></span></span><span>
</span><span id="line-196"></span><span>                          </span><span id="local-6989586621682986389"><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621682986389"><span class="hs-identifier hs-var">imports</span></a></span></span><span> </span><span id="local-6989586621682986390"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ImportError]
</span><a href="#local-6989586621682986391"><span class="hs-identifier hs-var">imp_errs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="#local-6989586621682986392"><span class="hs-identifier hs-var">suggs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>    </span><span id="local-6989586621682986392"><span class="annot"><span class="annottext">suggs :: [GhcHint]
</span><a href="#local-6989586621682986392"><span class="hs-identifier hs-var hs-var">suggs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[GhcHint]] -&gt; [GhcHint]
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-199"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(NonEmpty SimilarName -&gt; GhcHint) -&gt; [SimilarName] -&gt; [GhcHint]
forall a b. (NonEmpty a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="#local-6989586621682986393"><span class="hs-identifier hs-var">if_ne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NonEmpty SimilarName -&gt; GhcHint
</span><a href="GHC.Types.Hint.html#SuggestSimilarNames"><span class="hs-identifier hs-var">SuggestSimilarNames</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([SimilarName] -&gt; [GhcHint]) -&gt; [SimilarName] -&gt; [GhcHint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-200"></span><span>          </span><span class="annot"><span class="annottext">LookingFor
-&gt; DynFlags
-&gt; GlobalRdrEnv
-&gt; LocalRdrEnv
-&gt; RdrName
-&gt; [SimilarName]
</span><a href="GHC.Rename.Unbound.html#similarNameSuggestions"><span class="hs-identifier hs-var">similarNameSuggestions</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986383"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986384"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986387"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986388"><span class="hs-identifier hs-var">local_env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span>
</span><span id="line-201"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(ImportSuggestion -&gt; GhcHint) -&gt; [ImportSuggestion] -&gt; [GhcHint]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; ImportSuggestion -&gt; GhcHint
</span><a href="GHC.Types.Hint.html#ImportSuggestion"><span class="hs-identifier hs-var">ImportSuggestion</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; ImportSuggestion -&gt; GhcHint)
-&gt; OccName -&gt; ImportSuggestion -&gt; GhcHint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ImportSuggestion]
</span><a href="#local-6989586621682986394"><span class="hs-identifier hs-var">imp_suggs</span></a></span><span>
</span><span id="line-202"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; [GhcHint]
</span><a href="GHC.Rename.Unbound.html#extensionSuggestions"><span class="hs-identifier hs-var">extensionSuggestions</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span>
</span><span id="line-203"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; RdrName -&gt; [GhcHint]
</span><a href="GHC.Rename.Unbound.html#fieldSelectorSuggestions"><span class="hs-identifier hs-var">fieldSelectorSuggestions</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986387"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682986391"><span class="annot"><span class="annottext">[ImportError]
</span><a href="#local-6989586621682986391"><span class="hs-identifier hs-var">imp_errs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986394"><span class="annot"><span class="annottext">[ImportSuggestion]
</span><a href="#local-6989586621682986394"><span class="hs-identifier hs-var">imp_suggs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LookingFor
-&gt; GlobalRdrEnv
-&gt; HomePackageTable
-&gt; Module
-&gt; ImportAvails
-&gt; RdrName
-&gt; ([ImportError], [ImportSuggestion])
</span><a href="GHC.Rename.Unbound.html#importSuggestions"><span class="hs-identifier hs-var">importSuggestions</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986383"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986387"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682986385"><span class="hs-identifier hs-var">hpt</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986386"><span class="hs-identifier hs-var">curr_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621682986389"><span class="hs-identifier hs-var">imports</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986390"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621682986120"><span id="local-6989586621682986121"><span class="annot"><a href="#local-6989586621682986393"><span class="hs-identifier hs-type">if_ne</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621682986120"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682986121"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682986120"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682986121"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-207"></span><span>    </span><span id="local-6989586621682986393"><span class="annot"><span class="annottext">if_ne :: forall a b. (NonEmpty a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="#local-6989586621682986393"><span class="hs-identifier hs-var hs-var">if_ne</span></a></span></span><span> </span><span class="annot"><span class="annottext">NonEmpty a -&gt; b
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>    </span><span class="annot"><a href="#local-6989586621682986393"><span class="hs-identifier hs-var">if_ne</span></a></span><span> </span><span id="local-6989586621682986397"><span class="annot"><span class="annottext">NonEmpty a -&gt; b
</span><a href="#local-6989586621682986397"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986398"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682986398"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682986399"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682986399"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NonEmpty a -&gt; b
</span><a href="#local-6989586621682986397"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682986398"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; NonEmpty a
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682986399"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- | When the name is in scope as field whose selector has been suppressed by</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- NoFieldSelectors, display a helpful message explaining this.</span><span>
</span><span id="line-212"></span><span class="annot"><a href="GHC.Rename.Unbound.html#fieldSelectorSuggestions"><span class="hs-identifier hs-type">fieldSelectorSuggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-213"></span><span id="fieldSelectorSuggestions"><span class="annot"><span class="annottext">fieldSelectorSuggestions :: GlobalRdrEnv -&gt; RdrName -&gt; [GhcHint]
</span><a href="GHC.Rename.Unbound.html#fieldSelectorSuggestions"><span class="hs-identifier hs-var hs-var">fieldSelectorSuggestions</span></a></span></span><span> </span><span id="local-6989586621682986400"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986400"><span class="hs-identifier hs-var">global_env</span></a></span></span><span> </span><span id="local-6989586621682986401"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986401"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682986403"><span class="hs-identifier hs-var">gres</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">RdrName -&gt; [Name] -&gt; GhcHint
</span><a href="GHC.Types.Hint.html#RemindFieldSelectorSuppressed"><span class="hs-identifier hs-var">RemindFieldSelectorSuppressed</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986401"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682986404"><span class="hs-identifier hs-var">parents</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-216"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-217"></span><span>    </span><span id="local-6989586621682986403"><span class="annot"><span class="annottext">gres :: [GlobalRdrElt]
</span><a href="#local-6989586621682986403"><span class="hs-identifier hs-var hs-var">gres</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier hs-var">isNoFieldSelectorGRE</span></a></span><span>
</span><span id="line-218"></span><span>         </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; [GlobalRdrElt])
-&gt; [GlobalRdrElt] -&gt; [GlobalRdrElt]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; LookupGRE GREInfo -&gt; [GlobalRdrElt]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986400"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall info. RdrName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupRdrName"><span class="hs-identifier hs-var">LookupRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986401"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#AllRelevantGREs"><span class="hs-identifier hs-var">AllRelevantGREs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621682986404"><span class="annot"><span class="annottext">parents :: [Name]
</span><a href="#local-6989586621682986404"><span class="hs-identifier hs-var hs-var">parents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986409"><span class="hs-identifier hs-var">parent</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#ParentIs"><span class="hs-identifier hs-type">ParentIs</span></a></span><span> </span><span id="local-6989586621682986409"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986409"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Parent) -&gt; [GlobalRdrElt] -&gt; [Parent]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Parent
forall info. GlobalRdrEltX info -&gt; Parent
</span><a href="GHC.Types.Name.Reader.html#greParent"><span class="hs-identifier hs-var">greParent</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalRdrElt]
</span><a href="#local-6989586621682986403"><span class="hs-identifier hs-var">gres</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="annot"><a href="GHC.Rename.Unbound.html#similarNameSuggestions"><span class="hs-identifier hs-type">similarNameSuggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>
</span><span id="line-222"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span>
</span><span id="line-223"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#SimilarName"><span class="hs-identifier hs-type">SimilarName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-224"></span><span id="similarNameSuggestions"><span class="annot"><span class="annottext">similarNameSuggestions :: LookingFor
-&gt; DynFlags
-&gt; GlobalRdrEnv
-&gt; LocalRdrEnv
-&gt; RdrName
-&gt; [SimilarName]
</span><a href="GHC.Rename.Unbound.html#similarNameSuggestions"><span class="hs-identifier hs-var hs-var">similarNameSuggestions</span></a></span></span><span> </span><span id="local-6989586621682986412"><span class="annot"><span class="annottext">looking_for :: LookingFor
</span><a href="#local-6989586621682986412"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#LF"><span class="hs-identifier hs-type">LF</span></a></span><span> </span><span id="local-6989586621682986413"><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986413"><span class="hs-identifier hs-var">what_look</span></a></span></span><span> </span><span id="local-6989586621682986414"><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986414"><span class="hs-identifier hs-var">where_look</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682986415"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986415"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682986416"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986416"><span class="hs-identifier hs-var">global_env</span></a></span></span><span>
</span><span id="line-225"></span><span>                       </span><span id="local-6989586621682986417"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986417"><span class="hs-identifier hs-var">local_env</span></a></span></span><span> </span><span id="local-6989586621682986418"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986418"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [(String, SimilarName)] -&gt; [SimilarName]
forall a. String -&gt; [(String, a)] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#fuzzyLookup"><span class="hs-identifier hs-var">fuzzyLookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; RdrName -&gt; String
forall a. Outputable a =&gt; DynFlags -&gt; a -&gt; String
</span><a href="GHC.Driver.Ppr.html#showPpr"><span class="hs-identifier hs-var">showPpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986415"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986418"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(String, SimilarName)]
</span><a href="#local-6989586621682986421"><span class="hs-identifier hs-var">all_possibilities</span></a></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><a href="#local-6989586621682986421"><span class="hs-identifier hs-type">all_possibilities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#SimilarName"><span class="hs-identifier hs-type">SimilarName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621682986421"><span class="annot"><span class="annottext">all_possibilities :: [(String, SimilarName)]
</span><a href="#local-6989586621682986421"><span class="hs-identifier hs-var hs-var">all_possibilities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986413"><span class="hs-identifier hs-var">what_look</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-230"></span><span>      </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_None"><span class="hs-identifier hs-var">WL_None</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>      </span><span class="annot"><span class="annottext">WhatLooking
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; RdrName -&gt; String
forall a. Outputable a =&gt; DynFlags -&gt; a -&gt; String
</span><a href="GHC.Driver.Ppr.html#showPpr"><span class="hs-identifier hs-var">showPpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986415"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986422"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe HowInScope -&gt; SimilarName
</span><a href="GHC.Types.Hint.html#SimilarRdrName"><span class="hs-identifier hs-var">SimilarRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986422"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HowInScope -&gt; Maybe HowInScope
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(HowInScope -&gt; Maybe HowInScope) -&gt; HowInScope -&gt; Maybe HowInScope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#LocallyBoundAt"><span class="hs-identifier hs-var">LocallyBoundAt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682986425"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986422"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986422"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682986425"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682986425"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; [(RdrName, SrcSpan)]
</span><a href="#local-6989586621682986426"><span class="hs-identifier hs-var">local_possibilities</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986417"><span class="hs-identifier hs-var">local_env</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-233"></span><span>        </span><span class="annot"><span class="annottext">[(String, SimilarName)]
-&gt; [(String, SimilarName)] -&gt; [(String, SimilarName)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; RdrName -&gt; String
forall a. Outputable a =&gt; DynFlags -&gt; a -&gt; String
</span><a href="GHC.Driver.Ppr.html#showPpr"><span class="hs-identifier hs-var">showPpr</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986415"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986427"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986428"><span class="hs-identifier hs-var">rp</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986427"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986427"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986428"><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986428"><span class="hs-identifier hs-var">rp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [(RdrName, SimilarName)]
</span><a href="#local-6989586621682986429"><span class="hs-identifier hs-var">global_possibilities</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986416"><span class="hs-identifier hs-var">global_env</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621682986430"><span class="annot"><span class="annottext">tried_occ :: OccName
</span><a href="#local-6989586621682986430"><span class="hs-identifier hs-var hs-var">tried_occ</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986418"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621682986431"><span class="annot"><span class="annottext">tried_is_sym :: Bool
</span><a href="#local-6989586621682986431"><span class="hs-identifier hs-var hs-var">tried_is_sym</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isSymOcc"><span class="hs-identifier hs-var">isSymOcc</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986430"><span class="hs-identifier hs-var">tried_occ</span></a></span><span>
</span><span id="line-237"></span><span>    </span><span id="local-6989586621682986433"><span class="annot"><span class="annottext">tried_ns :: NameSpace
</span><a href="#local-6989586621682986433"><span class="hs-identifier hs-var hs-var">tried_ns</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986430"><span class="hs-identifier hs-var">tried_occ</span></a></span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621682986435"><span class="annot"><span class="annottext">tried_is_qual :: Bool
</span><a href="#local-6989586621682986435"><span class="hs-identifier hs-var hs-var">tried_is_qual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986418"><span class="hs-identifier hs-var">tried_rdr_name</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>    </span><span id="local-6989586621682986437"><span class="annot"><span class="annottext">correct_name_space :: OccName -&gt; Bool
</span><a href="#local-6989586621682986437"><span class="hs-identifier hs-var hs-var">correct_name_space</span></a></span></span><span> </span><span id="local-6989586621682986438"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986438"><span class="hs-identifier hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; WhatLooking -&gt; NameSpace -&gt; NameSpace -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#nameSpacesRelated"><span class="hs-identifier hs-var">nameSpacesRelated</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986415"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986413"><span class="hs-identifier hs-var">what_look</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986433"><span class="hs-identifier hs-var">tried_ns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#occNameSpace"><span class="hs-identifier hs-var">occNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986438"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isSymOcc"><span class="hs-identifier hs-var">isSymOcc</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986438"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986431"><span class="hs-identifier hs-var">tried_is_sym</span></a></span><span>
</span><span id="line-243"></span><span>        </span><span class="hs-comment">-- Treat operator and non-operators as non-matching</span><span>
</span><span id="line-244"></span><span>        </span><span class="hs-comment">-- This heuristic avoids things like</span><span>
</span><span id="line-245"></span><span>        </span><span class="hs-comment">--      Not in scope 'f'; perhaps you meant '+' (from Prelude)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span>    </span><span id="local-6989586621682986440"><span class="annot"><span class="annottext">local_ok :: Bool
</span><a href="#local-6989586621682986440"><span class="hs-identifier hs-var hs-var">local_ok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986414"><span class="hs-identifier hs-var">where_look</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_Anywhere"><span class="hs-identifier hs-var">WL_Anywhere</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-248"></span><span>                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-249"></span><span>                                  </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><a href="#local-6989586621682986426"><span class="hs-identifier hs-type">local_possibilities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#LocalRdrEnv"><span class="hs-identifier hs-type">LocalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621682986426"><span class="annot"><span class="annottext">local_possibilities :: LocalRdrEnv -&gt; [(RdrName, SrcSpan)]
</span><a href="#local-6989586621682986426"><span class="hs-identifier hs-var hs-var">local_possibilities</span></a></span></span><span> </span><span id="local-6989586621682986441"><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986441"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986435"><span class="hs-identifier hs-var">tried_is_qual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986440"><span class="hs-identifier hs-var">local_ok</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-255"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986443"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986445"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986445"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986445"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv -&gt; [Name]
</span><a href="GHC.Types.Name.Reader.html#localRdrEnvElts"><span class="hs-identifier hs-var">localRdrEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRdrEnv
</span><a href="#local-6989586621682986441"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-257"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986443"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682986443"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682986445"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-258"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="#local-6989586621682986437"><span class="hs-identifier hs-var">correct_name_space</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986443"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="#local-6989586621682986429"><span class="hs-identifier hs-type">global_possibilities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#SimilarName"><span class="hs-identifier hs-type">SimilarName</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-261"></span><span>    </span><span id="local-6989586621682986429"><span class="annot"><span class="annottext">global_possibilities :: GlobalRdrEnv -&gt; [(RdrName, SimilarName)]
</span><a href="#local-6989586621682986429"><span class="hs-identifier hs-var hs-var">global_possibilities</span></a></span></span><span> </span><span id="local-6989586621682986448"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986448"><span class="hs-identifier hs-var">global_env</span></a></span></span><span>
</span><span id="line-262"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986435"><span class="hs-identifier hs-var">tried_is_qual</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986449"><span class="hs-identifier hs-var">rdr_qual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe HowInScope -&gt; SimilarName
</span><a href="GHC.Types.Hint.html#SimilarRdrName"><span class="hs-identifier hs-var">SimilarRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986449"><span class="hs-identifier hs-var">rdr_qual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HowInScope -&gt; Maybe HowInScope
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">HowInScope
</span><a href="#local-6989586621682986450"><span class="hs-identifier hs-var">how</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986451"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986451"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [GlobalRdrElt]
forall info. GlobalRdrEnvX info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier hs-var">globalRdrEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986448"><span class="hs-identifier hs-var">global_env</span></a></span><span>
</span><span id="line-264"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986412"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986451"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-265"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986454"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682986454"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986451"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-266"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="#local-6989586621682986437"><span class="hs-identifier hs-var">correct_name_space</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986454"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-267"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986456"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986456"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986450"><span class="annot"><span class="annottext">HowInScope
</span><a href="#local-6989586621682986450"><span class="hs-identifier hs-var">how</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [(ModuleName, HowInScope)]
</span><a href="GHC.Rename.Unbound.html#qualsInScope"><span class="hs-identifier hs-var">qualsInScope</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986451"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-268"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986449"><span class="annot"><span class="annottext">rdr_qual :: RdrName
</span><a href="#local-6989586621682986449"><span class="hs-identifier hs-var hs-var">rdr_qual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier hs-var">mkRdrQual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986456"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986454"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986459"><span class="hs-identifier hs-var">rdr_unqual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986460"><span class="hs-identifier hs-var">sim</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986461"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986461"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [GlobalRdrElt]
forall info. GlobalRdrEnvX info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier hs-var">globalRdrEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986448"><span class="hs-identifier hs-var">global_env</span></a></span><span>
</span><span id="line-272"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986412"><span class="hs-identifier hs-var">looking_for</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986461"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-273"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986462"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682986462"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986461"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-274"></span><span>                          </span><span id="local-6989586621682986459"><span class="annot"><span class="annottext">rdr_unqual :: RdrName
</span><a href="#local-6989586621682986459"><span class="hs-identifier hs-var hs-var">rdr_unqual</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986462"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-275"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="#local-6989586621682986437"><span class="hs-identifier hs-var">correct_name_space</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986462"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-276"></span><span>                    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986460"><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986460"><span class="hs-identifier hs-var">sim</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [HowInScope]
</span><a href="#local-6989586621682986463"><span class="hs-identifier hs-var">unquals_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986461"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [SimilarName]
</span><a href="#local-6989586621682986464"><span class="hs-identifier hs-var">quals_only</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986461"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-277"></span><span>                                </span><span class="hs-special">(</span><span id="local-6989586621682986465"><span class="annot"><span class="annottext">HowInScope
</span><a href="#local-6989586621682986465"><span class="hs-identifier hs-var">how</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[HowInScope]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SimilarName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe HowInScope -&gt; SimilarName
</span><a href="GHC.Types.Hint.html#SimilarRdrName"><span class="hs-identifier hs-var">SimilarRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986459"><span class="hs-identifier hs-var">rdr_unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HowInScope -&gt; Maybe HowInScope
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">HowInScope
</span><a href="#local-6989586621682986465"><span class="hs-identifier hs-var">how</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-278"></span><span>                                </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span id="local-6989586621682986466"><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986466"><span class="hs-identifier hs-var">pr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[SimilarName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SimilarName
</span><a href="#local-6989586621682986466"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- See Note [Only-quals]</span><span>
</span><span id="line-279"></span><span>                                </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span>              </span><span class="hs-comment">-- Note [Only-quals]</span><span>
</span><span id="line-282"></span><span>              </span><span class="hs-comment">-- ~~~~~~~~~~~~~~~~~</span><span>
</span><span id="line-283"></span><span>              </span><span class="hs-comment">-- The second alternative returns those names with the same</span><span>
</span><span id="line-284"></span><span>              </span><span class="hs-comment">-- OccName as the one we tried, but live in *qualified* imports</span><span>
</span><span id="line-285"></span><span>              </span><span class="hs-comment">-- e.g. if you have:</span><span>
</span><span id="line-286"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-287"></span><span>              </span><span class="hs-comment">-- &gt; import qualified Data.Map as Map</span><span>
</span><span id="line-288"></span><span>              </span><span class="hs-comment">-- &gt; foo :: Map</span><span>
</span><span id="line-289"></span><span>              </span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span>              </span><span class="hs-comment">-- then we suggest @Map.Map@.</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">--------------------</span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><a href="#local-6989586621682986463"><span class="hs-identifier hs-type">unquals_in_scope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-294"></span><span>    </span><span id="local-6989586621682986463"><span class="annot"><span class="annottext">unquals_in_scope :: GlobalRdrElt -&gt; [HowInScope]
</span><a href="#local-6989586621682986463"><span class="hs-identifier hs-var hs-var">unquals_in_scope</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986467"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621682986467"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682986470"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986470"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682986472"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986472"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986470"><span class="hs-identifier hs-var">lcl</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#LocallyBoundAt"><span class="hs-identifier hs-var">LocallyBoundAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; SrcSpan
forall info. GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-var">greDefinitionSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986467"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#ImportedBy"><span class="hs-identifier hs-var">ImportedBy</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986475"><span class="hs-identifier hs-var">ispec</span></a></span><span>
</span><span id="line-297"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986476"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986476"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; [ImportSpec]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986472"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986475"><span class="annot"><span class="annottext">ispec :: ImpDeclSpec
</span><a href="#local-6989586621682986475"><span class="hs-identifier hs-var hs-var">ispec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986476"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-298"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986475"><span class="hs-identifier hs-var">ispec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">--------------------</span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><a href="#local-6989586621682986464"><span class="hs-identifier hs-type">quals_only</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#SimilarName"><span class="hs-identifier hs-type">SimilarName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">-- Ones for which *only* the qualified version is in scope</span><span>
</span><span id="line-304"></span><span>    </span><span id="local-6989586621682986464"><span class="annot"><span class="annottext">quals_only :: GlobalRdrElt -&gt; [SimilarName]
</span><a href="#local-6989586621682986464"><span class="hs-identifier hs-var hs-var">quals_only</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986480"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621682986480"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682986481"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986481"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Maybe HowInScope -&gt; SimilarName
</span><a href="GHC.Types.Hint.html#SimilarRdrName"><span class="hs-identifier hs-var">SimilarRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrQual"><span class="hs-identifier hs-var">mkRdrQual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986483"><span class="hs-identifier hs-var">ispec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; OccName
forall info. GlobalRdrEltX info -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#greOccName"><span class="hs-identifier hs-var">greOccName</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986480"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HowInScope -&gt; Maybe HowInScope
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(HowInScope -&gt; Maybe HowInScope) -&gt; HowInScope -&gt; Maybe HowInScope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#ImportedBy"><span class="hs-identifier hs-var">ImportedBy</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986483"><span class="hs-identifier hs-var">ispec</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986484"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986484"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; [ImportSpec]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986481"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986483"><span class="annot"><span class="annottext">ispec :: ImpDeclSpec
</span><a href="#local-6989586621682986483"><span class="hs-identifier hs-var hs-var">ispec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986484"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#is_qual"><span class="hs-identifier hs-var">is_qual</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986483"><span class="hs-identifier hs-var">ispec</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span class="annot"><span class="hs-comment">-- | Generate errors and helpful suggestions if a qualified name Mod.foo is not in scope.</span></span><span>
</span><span id="line-310"></span><span class="annot"><a href="GHC.Rename.Unbound.html#importSuggestions"><span class="hs-identifier hs-type">importSuggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span>
</span><span id="line-311"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrEnv"><span class="hs-identifier hs-type">GlobalRdrEnv</span></a></span><span>
</span><span id="line-312"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Home.ModInfo.html#HomePackageTable"><span class="hs-identifier hs-type">HomePackageTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span>
</span><span id="line-313"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier hs-type">ImportAvails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Errors.Types.html#ImportError"><span class="hs-identifier hs-type">ImportError</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#ImportSuggestion"><span class="hs-identifier hs-type">ImportSuggestion</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span id="importSuggestions"><span class="annot"><span class="annottext">importSuggestions :: LookingFor
-&gt; GlobalRdrEnv
-&gt; HomePackageTable
-&gt; Module
-&gt; ImportAvails
-&gt; RdrName
-&gt; ([ImportError], [ImportSuggestion])
</span><a href="GHC.Rename.Unbound.html#importSuggestions"><span class="hs-identifier hs-var hs-var">importSuggestions</span></a></span></span><span> </span><span id="local-6989586621682986485"><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986485"><span class="hs-identifier hs-var">looking_for</span></a></span></span><span> </span><span id="local-6989586621682986486"><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986486"><span class="hs-identifier hs-var">global_env</span></a></span></span><span> </span><span id="local-6989586621682986487"><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682986487"><span class="hs-identifier hs-var">hpt</span></a></span></span><span> </span><span id="local-6989586621682986488"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986488"><span class="hs-identifier hs-var">currMod</span></a></span></span><span> </span><span id="local-6989586621682986489"><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621682986489"><span class="hs-identifier hs-var">imports</span></a></span></span><span> </span><span id="local-6989586621682986490"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986490"><span class="hs-identifier hs-var">rdr_name</span></a></span></span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; WhereLooking
</span><a href="GHC.Rename.Unbound.html#lf_where"><span class="hs-identifier hs-var">lf_where</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986485"><span class="hs-identifier hs-var">looking_for</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalTop"><span class="hs-identifier hs-var">WL_LocalTop</span></a></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LookingFor -&gt; WhereLooking
</span><a href="GHC.Rename.Unbound.html#lf_where"><span class="hs-identifier hs-var">lf_where</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986485"><span class="hs-identifier hs-var">looking_for</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986490"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986490"><span class="hs-identifier hs-var">rdr_name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986493"><span class="hs-identifier hs-var">interesting_imports</span></a></span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682986494"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986494"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682986495"><span class="hs-identifier hs-var">mod_name</span></a></span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; Bool
</span><a href="#local-6989586621682986496"><span class="hs-identifier hs-var">show_not_imported_line</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986494"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ModuleName -&gt; ImportError
</span><a href="GHC.Tc.Errors.Types.html#MissingModule"><span class="hs-identifier hs-var">MissingModule</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986494"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986498"><span class="hs-identifier hs-var">is_qualified</span></a></span><span>
</span><span id="line-323"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986499"><span class="hs-identifier hs-var">helpful_imports</span></a></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986500"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986500"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682986501"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621682986501"><span class="hs-identifier hs-var">mods</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((Module, ImportedModsVal) -&gt; Module)
-&gt; [(Module, ImportedModsVal)] -&gt; [Module]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Module, ImportedModsVal) -&gt; Module
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986493"><span class="hs-identifier hs-var">interesting_imports</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">NonEmpty Module -&gt; OccName -&gt; ImportError
</span><a href="GHC.Tc.Errors.Types.html#ModulesDoNotExport"><span class="hs-identifier hs-var">ModulesDoNotExport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986500"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; [Module] -&gt; NonEmpty Module
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621682986501"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986504"><span class="hs-identifier hs-var">occ_name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986505"><span class="annot"><span class="annottext">(Module, ImportedModsVal)
</span><a href="#local-6989586621682986505"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682986506"><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986506"><span class="hs-identifier hs-var">mods</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986507"><span class="hs-identifier hs-var">helpful_imports_non_hiding</span></a></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NonEmpty (Module, ImportedModsVal) -&gt; ImportSuggestion
</span><a href="GHC.Types.Hint.html#CouldImportFrom"><span class="hs-identifier hs-var">CouldImportFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module, ImportedModsVal)
</span><a href="#local-6989586621682986505"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">(Module, ImportedModsVal)
-&gt; [(Module, ImportedModsVal)]
-&gt; NonEmpty (Module, ImportedModsVal)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986506"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986509"><span class="annot"><span class="annottext">(Module, ImportedModsVal)
</span><a href="#local-6989586621682986509"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682986510"><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986510"><span class="hs-identifier hs-var">mods</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986511"><span class="hs-identifier hs-var">helpful_imports_hiding</span></a></span><span>
</span><span id="line-329"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NonEmpty (Module, ImportedModsVal) -&gt; ImportSuggestion
</span><a href="GHC.Types.Hint.html#CouldUnhideFrom"><span class="hs-identifier hs-var">CouldUnhideFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module, ImportedModsVal)
</span><a href="#local-6989586621682986509"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">(Module, ImportedModsVal)
-&gt; [(Module, ImportedModsVal)]
-&gt; NonEmpty (Module, ImportedModsVal)
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986510"><span class="hs-identifier hs-var">mods</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-331"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-333"></span><span>  </span><span id="local-6989586621682986498"><span class="annot"><span class="annottext">is_qualified :: Bool
</span><a href="#local-6989586621682986498"><span class="hs-identifier hs-var hs-var">is_qualified</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986490"><span class="hs-identifier hs-var">rdr_name</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682986495"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682986495"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986504"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986504"><span class="hs-identifier hs-var">occ_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986490"><span class="hs-identifier hs-var">rdr_name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682986514"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986514"><span class="hs-identifier hs-var">occ_name</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ModuleName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986514"><span class="hs-identifier hs-var">occ_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682986516"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986516"><span class="hs-identifier hs-var">mod_name</span></a></span></span><span> </span><span id="local-6989586621682986517"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986517"><span class="hs-identifier hs-var">occ_name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; Maybe ModuleName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986516"><span class="hs-identifier hs-var">mod_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986517"><span class="hs-identifier hs-var">occ_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Maybe ModuleName, OccName)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;importSuggestions: dead code&quot;</span></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-comment">-- What import statements provide &quot;Mod&quot; at all</span><span>
</span><span id="line-341"></span><span>  </span><span class="hs-comment">-- or, if this is an unqualified name, are not qualified imports</span><span>
</span><span id="line-342"></span><span>  </span><span id="local-6989586621682986493"><span class="annot"><span class="annottext">interesting_imports :: [(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986493"><span class="hs-identifier hs-var hs-var">interesting_imports</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986518"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986519"><span class="hs-identifier hs-var">imp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986518"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986518"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986520"><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621682986520"><span class="hs-identifier hs-var">mod_imports</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map Module [ImportedBy] -&gt; [(Module, [ImportedBy])]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../../containers-0.7-5a8f/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">M.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportAvails -&gt; Map Module [ImportedBy]
</span><a href="GHC.Unit.Module.Deps.html#imp_mods"><span class="hs-identifier hs-var">imp_mods</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621682986489"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682986519"><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986519"><span class="hs-identifier hs-var">imp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe ImportedModsVal -&gt; [Maybe ImportedModsVal]
forall a. a -&gt; [a]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ImportedModsVal -&gt; [Maybe ImportedModsVal])
-&gt; Maybe ImportedModsVal -&gt; [Maybe ImportedModsVal]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ImportedModsVal] -&gt; Maybe ImportedModsVal
</span><a href="#local-6989586621682986523"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ImportedBy] -&gt; [ImportedModsVal]
</span><a href="GHC.Unit.Module.Imported.html#importedByUser"><span class="hs-identifier hs-var">importedByUser</span></a></span><span> </span><span class="annot"><span class="annottext">[ImportedBy]
</span><a href="#local-6989586621682986520"><span class="hs-identifier hs-var">mod_imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-comment">-- We want to keep only one for each original module; preferably one with an</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-comment">-- explicit import list (for no particularly good reason)</span><span>
</span><span id="line-349"></span><span>  </span><span class="annot"><a href="#local-6989586621682986523"><span class="hs-identifier hs-type">pick</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Module.Imported.html#ImportedModsVal"><span class="hs-identifier hs-type">ImportedModsVal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Imported.html#ImportedModsVal"><span class="hs-identifier hs-type">ImportedModsVal</span></a></span><span>
</span><span id="line-350"></span><span>  </span><span id="local-6989586621682986523"><span class="annot"><span class="annottext">pick :: [ImportedModsVal] -&gt; Maybe ImportedModsVal
</span><a href="#local-6989586621682986523"><span class="hs-identifier hs-var hs-var">pick</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ImportedModsVal] -&gt; Maybe ImportedModsVal
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">([ImportedModsVal] -&gt; Maybe ImportedModsVal)
-&gt; ([ImportedModsVal] -&gt; [ImportedModsVal])
-&gt; [ImportedModsVal]
-&gt; Maybe ImportedModsVal
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ImportedModsVal -&gt; ImportedModsVal -&gt; Ordering)
-&gt; [ImportedModsVal] -&gt; [ImportedModsVal]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">sortBy</span></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; ImportedModsVal -&gt; Ordering
</span><a href="#local-6989586621682986527"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">([ImportedModsVal] -&gt; [ImportedModsVal])
-&gt; ([ImportedModsVal] -&gt; [ImportedModsVal])
-&gt; [ImportedModsVal]
-&gt; [ImportedModsVal]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ImportedModsVal -&gt; Bool) -&gt; [ImportedModsVal] -&gt; [ImportedModsVal]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="#local-6989586621682986528"><span class="hs-identifier hs-var">select</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682986528"><span class="annot"><span class="annottext">select :: ImportedModsVal -&gt; Bool
</span><a href="#local-6989586621682986528"><span class="hs-identifier hs-var hs-var">select</span></a></span></span><span> </span><span id="local-6989586621682986529"><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986529"><span class="hs-identifier hs-var">imv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682986495"><span class="hs-identifier hs-var">mod_name</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682986530"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986530"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; ModuleName
</span><a href="GHC.Unit.Module.Imported.html#imv_name"><span class="hs-identifier hs-var">imv_name</span></a></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986529"><span class="hs-identifier hs-var">imv</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986530"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-352"></span><span>                                        </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Unit.Module.Imported.html#imv_qualified"><span class="hs-identifier hs-var">imv_qualified</span></a></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986529"><span class="hs-identifier hs-var">imv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>          </span><span id="local-6989586621682986527"><span class="annot"><span class="annottext">cmp :: ImportedModsVal -&gt; ImportedModsVal -&gt; Ordering
</span><a href="#local-6989586621682986527"><span class="hs-identifier hs-var hs-var">cmp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool -&gt; Ordering)
-&gt; (ImportedModsVal -&gt; Bool)
-&gt; ImportedModsVal
-&gt; ImportedModsVal
-&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">on</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Unit.Module.Imported.html#imv_is_hiding"><span class="hs-identifier hs-var">imv_is_hiding</span></a></span><span> </span><span class="annot"><span class="annottext">(ImportedModsVal -&gt; ImportedModsVal -&gt; Ordering)
-&gt; (ImportedModsVal -&gt; ImportedModsVal -&gt; Ordering)
-&gt; ImportedModsVal
-&gt; ImportedModsVal
-&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpan -&gt; Ordering)
-&gt; (ImportedModsVal -&gt; SrcSpan)
-&gt; ImportedModsVal
-&gt; ImportedModsVal
-&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">on</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal -&gt; SrcSpan
</span><a href="GHC.Unit.Module.Imported.html#imv_span"><span class="hs-identifier hs-var">imv_span</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-comment">-- Which of these would export a 'foo'</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-comment">-- (all of these are restricted imports, because if they were not, we</span><span>
</span><span id="line-357"></span><span>  </span><span class="hs-comment">-- wouldn't have an out-of-scope error in the first place)</span><span>
</span><span id="line-358"></span><span>  </span><span id="local-6989586621682986499"><span class="annot"><span class="annottext">helpful_imports :: [(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986499"><span class="hs-identifier hs-var hs-var">helpful_imports</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Module, ImportedModsVal) -&gt; Bool)
-&gt; [(Module, ImportedModsVal)] -&gt; [(Module, ImportedModsVal)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">(Module, ImportedModsVal) -&gt; Bool
</span><a href="#local-6989586621682986544"><span class="hs-identifier hs-var">helpful</span></a></span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986493"><span class="hs-identifier hs-var">interesting_imports</span></a></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682986544"><span class="annot"><span class="annottext">helpful :: (Module, ImportedModsVal) -&gt; Bool
</span><a href="#local-6989586621682986544"><span class="hs-identifier hs-var hs-var">helpful</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682986545"><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986545"><span class="hs-identifier hs-var">imv</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GlobalRdrElt -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LookingFor -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#isGreOk"><span class="hs-identifier hs-var">isGreOk</span></a></span><span> </span><span class="annot"><span class="annottext">LookingFor
</span><a href="#local-6989586621682986485"><span class="hs-identifier hs-var">looking_for</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([GlobalRdrElt] -&gt; Bool) -&gt; [GlobalRdrElt] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-361"></span><span>              </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; LookupGRE GREInfo -&gt; [GlobalRdrElt]
forall info.
GlobalRdrEnvX info -&gt; LookupGRE info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#lookupGRE"><span class="hs-identifier hs-var">lookupGRE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportedModsVal -&gt; GlobalRdrEnv
</span><a href="GHC.Unit.Module.Imported.html#imv_all_exports"><span class="hs-identifier hs-var">imv_all_exports</span></a></span><span> </span><span class="annot"><span class="annottext">ImportedModsVal
</span><a href="#local-6989586621682986545"><span class="hs-identifier hs-var">imv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall info. OccName -&gt; WhichGREs info -&gt; LookupGRE info
</span><a href="GHC.Types.Name.Reader.html#LookupOccName"><span class="hs-identifier hs-var">LookupOccName</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682986504"><span class="hs-identifier hs-var">occ_name</span></a></span><span> </span><span class="annot"><span class="annottext">(WhichGREs GREInfo -&gt; LookupGRE GREInfo)
-&gt; WhichGREs GREInfo -&gt; LookupGRE GREInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors -&gt; WhichGREs GREInfo
</span><a href="GHC.Types.Name.Reader.html#RelevantGREsFOS"><span class="hs-identifier hs-var">RelevantGREsFOS</span></a></span><span> </span><span class="annot"><span class="annottext">FieldsOrSelectors
</span><a href="GHC.Types.Name.Reader.html#WantNormal"><span class="hs-identifier hs-var">WantNormal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-comment">-- Which of these do that because of an explicit hiding list resp. an</span><span>
</span><span id="line-365"></span><span>  </span><span class="hs-comment">-- explicit import list</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682986511"><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986511"><span class="hs-identifier hs-var">helpful_imports_hiding</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986507"><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986507"><span class="hs-identifier hs-var">helpful_imports_non_hiding</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Module, ImportedModsVal) -&gt; Bool)
-&gt; [(Module, ImportedModsVal)]
-&gt; ([(Module, ImportedModsVal)], [(Module, ImportedModsVal)])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">partition</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportedModsVal -&gt; Bool
</span><a href="GHC.Unit.Module.Imported.html#imv_is_hiding"><span class="hs-identifier hs-var">imv_is_hiding</span></a></span><span> </span><span class="annot"><span class="annottext">(ImportedModsVal -&gt; Bool)
-&gt; ((Module, ImportedModsVal) -&gt; ImportedModsVal)
-&gt; (Module, ImportedModsVal)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Module, ImportedModsVal) -&gt; ImportedModsVal
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Module, ImportedModsVal)]
</span><a href="#local-6989586621682986499"><span class="hs-identifier hs-var">helpful_imports</span></a></span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-comment">-- See Note [When to show/hide the module-not-imported line]</span><span>
</span><span id="line-370"></span><span>  </span><span class="annot"><a href="#local-6989586621682986496"><span class="hs-identifier hs-type">show_not_imported_line</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                    </span><span class="hs-comment">-- #15611</span><span>
</span><span id="line-371"></span><span>  </span><span id="local-6989586621682986496"><span class="annot"><span class="annottext">show_not_imported_line :: ModuleName -&gt; Bool
</span><a href="#local-6989586621682986496"><span class="hs-identifier hs-var hs-var">show_not_imported_line</span></a></span></span><span> </span><span id="local-6989586621682986552"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986552"><span class="hs-identifier hs-var">modnam</span></a></span></span><span>
</span><span id="line-372"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986552"><span class="hs-identifier hs-var">modnam</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; [ModuleName] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621682986554"><span class="hs-identifier hs-var">glob_mods</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>    </span><span class="hs-comment">-- #14225     -- 1</span><span>
</span><span id="line-373"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986488"><span class="hs-identifier hs-var">currMod</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986552"><span class="hs-identifier hs-var">modnam</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>                  </span><span class="hs-comment">-- 2.1</span><span>
</span><span id="line-374"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; [Unique] -&gt; Bool
forall {a}. Uniquable a =&gt; a -&gt; [Unique] -&gt; Bool
</span><a href="#local-6989586621682986556"><span class="hs-identifier hs-var">is_last_loaded_mod</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986552"><span class="hs-identifier hs-var">modnam</span></a></span><span> </span><span class="annot"><span class="annottext">[Unique]
</span><a href="#local-6989586621682986557"><span class="hs-identifier hs-var">hpt_uniques</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>                  </span><span class="hs-comment">-- 2.2</span><span>
</span><span id="line-375"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-377"></span><span>      </span><span id="local-6989586621682986557"><span class="annot"><span class="annottext">hpt_uniques :: [Unique]
</span><a href="#local-6989586621682986557"><span class="hs-identifier hs-var hs-var">hpt_uniques</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Unique, HomeModInfo) -&gt; Unique)
-&gt; [(Unique, HomeModInfo)] -&gt; [Unique]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Unique, HomeModInfo) -&gt; Unique
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomePackageTable -&gt; [(Unique, HomeModInfo)]
forall {k} (key :: k) elt. UniqDFM key elt -&gt; [(Unique, elt)]
</span><a href="GHC.Types.Unique.DFM.html#udfmToList"><span class="hs-identifier hs-var">udfmToList</span></a></span><span> </span><span class="annot"><span class="annottext">HomePackageTable
</span><a href="#local-6989586621682986487"><span class="hs-identifier hs-var">hpt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>      </span><span id="local-6989586621682986556"><span class="annot"><span class="annottext">is_last_loaded_mod :: a -&gt; [Unique] -&gt; Bool
</span><a href="#local-6989586621682986556"><span class="hs-identifier hs-var hs-var">is_last_loaded_mod</span></a></span></span><span> </span><span id="local-6989586621682986564"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682986564"><span class="hs-identifier hs-var">modnam</span></a></span></span><span> </span><span id="local-6989586621682986565"><span class="annot"><span class="annottext">[Unique]
</span><a href="#local-6989586621682986565"><span class="hs-identifier hs-var">uniqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Unique] -&gt; Maybe Unique
forall a. [a] -&gt; Maybe a
</span><a href="GHC.Utils.Misc.html#lastMaybe"><span class="hs-identifier hs-var">lastMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">[Unique]
</span><a href="#local-6989586621682986565"><span class="hs-identifier hs-var">uniqs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Unique -&gt; Maybe Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Maybe Unique
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682986564"><span class="hs-identifier hs-var">modnam</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>      </span><span id="local-6989586621682986554"><span class="annot"><span class="annottext">glob_mods :: [ModuleName]
</span><a href="#local-6989586621682986554"><span class="hs-identifier hs-var hs-var">glob_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleName] -&gt; [ModuleName]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">nub</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986567"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-380"></span><span>                      </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986568"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986568"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv -&gt; [GlobalRdrElt]
forall info. GlobalRdrEnvX info -&gt; [GlobalRdrEltX info]
</span><a href="GHC.Types.Name.Reader.html#globalRdrEnvElts"><span class="hs-identifier hs-var">globalRdrEnvElts</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrEnv
</span><a href="#local-6989586621682986486"><span class="hs-identifier hs-var">global_env</span></a></span><span>
</span><span id="line-381"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986567"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682986567"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HowInScope
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; [(ModuleName, HowInScope)]
</span><a href="GHC.Rename.Unbound.html#qualsInScope"><span class="hs-identifier hs-var">qualsInScope</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986568"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-382"></span><span>                      </span><span class="hs-special">]</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="annot"><a href="GHC.Rename.Unbound.html#extensionSuggestions"><span class="hs-identifier hs-type">extensionSuggestions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Hint.html#GhcHint"><span class="hs-identifier hs-type">GhcHint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-385"></span><span id="extensionSuggestions"><span class="annot"><span class="annottext">extensionSuggestions :: RdrName -&gt; [GhcHint]
</span><a href="GHC.Rename.Unbound.html#extensionSuggestions"><span class="hs-identifier hs-var hs-var">extensionSuggestions</span></a></span></span><span> </span><span id="local-6989586621682986569"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986569"><span class="hs-identifier hs-var">rdrName</span></a></span></span><span>
</span><span id="line-386"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986569"><span class="hs-identifier hs-var">rdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mdo&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682986569"><span class="hs-identifier hs-var">rdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rec&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LanguageExtensionHint -&gt; GhcHint
</span><a href="GHC.Types.Hint.html#SuggestExtension"><span class="hs-identifier hs-var">SuggestExtension</span></a></span><span> </span><span class="annot"><span class="annottext">(LanguageExtensionHint -&gt; GhcHint)
-&gt; LanguageExtensionHint -&gt; GhcHint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Extension -&gt; LanguageExtensionHint
</span><a href="GHC.Types.Hint.html#SuggestSingleExtension"><span class="hs-identifier hs-var">SuggestSingleExtension</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.RecursiveDo</span></span><span class="hs-special">]</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><a href="GHC.Rename.Unbound.html#qualsInScope"><span class="hs-identifier hs-type">qualsInScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html#HowInScope"><span class="hs-identifier hs-type">HowInScope</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- Ones for which the qualified version is in scope</span><span>
</span><span id="line-394"></span><span id="qualsInScope"><span class="annot"><span class="annottext">qualsInScope :: GlobalRdrElt -&gt; [(ModuleName, HowInScope)]
</span><a href="GHC.Rename.Unbound.html#qualsInScope"><span class="hs-identifier hs-var hs-var">qualsInScope</span></a></span></span><span> </span><span id="local-6989586621682986574"><span class="annot"><span class="annottext">gre :: GlobalRdrElt
</span><a href="#local-6989586621682986574"><span class="hs-identifier hs-var">gre</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Name.Reader.html#GRE"><span class="hs-identifier hs-type">GRE</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">gre_lcl :: forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#gre_lcl"><span class="hs-identifier hs-var">gre_lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682986575"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986575"><span class="hs-identifier hs-var">lcl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gre_imp :: forall info. GlobalRdrEltX info -&gt; Bag ImportSpec
</span><a href="GHC.Types.Name.Reader.html#gre_imp"><span class="hs-identifier hs-var">gre_imp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682986576"><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986576"><span class="hs-identifier hs-var">is</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-395"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986575"><span class="hs-identifier hs-var">lcl</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Maybe Module
forall info. GlobalRdrEltX info -&gt; Maybe Module
</span><a href="GHC.Types.Name.Reader.html#greDefinitionModule"><span class="hs-identifier hs-var">greDefinitionModule</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986574"><span class="hs-identifier hs-var">gre</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-396"></span><span>                </span><span class="annot"><span class="annottext">Maybe Module
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682986578"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986578"><span class="hs-identifier hs-var">m</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682986578"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#LocallyBoundAt"><span class="hs-identifier hs-var">LocallyBoundAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; SrcSpan
forall info. GlobalRdrEltX info -&gt; SrcSpan
</span><a href="GHC.Types.Name.Reader.html#greDefinitionSrcSpan"><span class="hs-identifier hs-var">greDefinitionSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986574"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; ModuleName
</span><a href="GHC.Types.Name.Reader.html#is_as"><span class="hs-identifier hs-var">is_as</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986579"><span class="hs-identifier hs-var">ispec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec -&gt; HowInScope
</span><a href="GHC.Types.Hint.html#ImportedBy"><span class="hs-identifier hs-var">ImportedBy</span></a></span><span> </span><span class="annot"><span class="annottext">ImpDeclSpec
</span><a href="#local-6989586621682986579"><span class="hs-identifier hs-var">ispec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682986580"><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986580"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec -&gt; [ImportSpec]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag ImportSpec
</span><a href="#local-6989586621682986576"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682986579"><span class="annot"><span class="annottext">ispec :: ImpDeclSpec
</span><a href="#local-6989586621682986579"><span class="hs-identifier hs-var hs-var">ispec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportSpec -&gt; ImpDeclSpec
</span><a href="GHC.Types.Name.Reader.html#is_decl"><span class="hs-identifier hs-var">is_decl</span></a></span><span> </span><span class="annot"><span class="annottext">ImportSpec
</span><a href="#local-6989586621682986580"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span class="annot"><a href="GHC.Rename.Unbound.html#isGreOk"><span class="hs-identifier hs-type">isGreOk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#LookingFor"><span class="hs-identifier hs-type">LookingFor</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#GlobalRdrElt"><span class="hs-identifier hs-type">GlobalRdrElt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-402"></span><span id="isGreOk"><span class="annot"><span class="annottext">isGreOk :: LookingFor -&gt; GlobalRdrElt -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#isGreOk"><span class="hs-identifier hs-var hs-var">isGreOk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Unbound.html#LF"><span class="hs-identifier hs-type">LF</span></a></span><span> </span><span id="local-6989586621682986581"><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986581"><span class="hs-identifier hs-var">what_look</span></a></span></span><span> </span><span id="local-6989586621682986582"><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986582"><span class="hs-identifier hs-var">where_look</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682986583"><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986583"><span class="hs-identifier hs-var">gre</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986584"><span class="hs-identifier hs-var">what_ok</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986585"><span class="hs-identifier hs-var">where_ok</span></a></span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>    </span><span class="hs-comment">-- when looking for record fields, what_ok checks whether the GRE is a</span><span>
</span><span id="line-405"></span><span>    </span><span class="hs-comment">-- record field. Otherwise, it checks whether the GRE is a record field</span><span>
</span><span id="line-406"></span><span>    </span><span class="hs-comment">-- defined in a module with -XNoFieldSelectors - it wouldn't be a useful</span><span>
</span><span id="line-407"></span><span>    </span><span class="hs-comment">-- suggestion in that case.</span><span>
</span><span id="line-408"></span><span>    </span><span id="local-6989586621682986584"><span class="annot"><span class="annottext">what_ok :: Bool
</span><a href="#local-6989586621682986584"><span class="hs-identifier hs-var hs-var">what_ok</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986581"><span class="hs-identifier hs-var">what_look</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-409"></span><span>                 </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_RecField"><span class="hs-identifier hs-var">WL_RecField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRecFldGRE"><span class="hs-identifier hs-var">isRecFldGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986583"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-410"></span><span>                 </span><span class="annot"><span class="annottext">WhatLooking
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isNoFieldSelectorGRE"><span class="hs-identifier hs-var">isNoFieldSelectorGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986583"><span class="hs-identifier hs-var">gre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span>    </span><span id="local-6989586621682986585"><span class="annot"><span class="annottext">where_ok :: Bool
</span><a href="#local-6989586621682986585"><span class="hs-identifier hs-var hs-var">where_ok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="#local-6989586621682986582"><span class="hs-identifier hs-var">where_look</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-413"></span><span>                 </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalTop"><span class="hs-identifier hs-var">WL_LocalTop</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt -&gt; Bool
forall info. GlobalRdrEltX info -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isLocalGRE"><span class="hs-identifier hs-var">isLocalGRE</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalRdrElt
</span><a href="#local-6989586621682986583"><span class="hs-identifier hs-var">gre</span></a></span><span>
</span><span id="line-414"></span><span>                 </span><span class="annot"><span class="annottext">WhereLooking
</span><a href="GHC.Rename.Unbound.html#WL_LocalOnly"><span class="hs-identifier hs-var">WL_LocalOnly</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-415"></span><span>                 </span><span class="annot"><span class="annottext">WhereLooking
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- see Note [Related name spaces]</span><span>
</span><span id="line-418"></span><span class="annot"><a href="GHC.Rename.Unbound.html#nameSpacesRelated"><span class="hs-identifier hs-type">nameSpacesRelated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.DynFlags.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ to find out whether -XDataKinds is enabled</span></span><span>
</span><span id="line-419"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Rename.Unbound.html#WhatLooking"><span class="hs-identifier hs-type">WhatLooking</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ What kind of name are we looking for</span></span><span>
</span><span id="line-420"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Name space of the original name</span></span><span>
</span><span id="line-421"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ Name space of a name that might have been meant</span></span><span>
</span><span id="line-422"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-423"></span><span id="nameSpacesRelated"><span class="annot"><span class="annottext">nameSpacesRelated :: DynFlags -&gt; WhatLooking -&gt; NameSpace -&gt; NameSpace -&gt; Bool
</span><a href="GHC.Rename.Unbound.html#nameSpacesRelated"><span class="hs-identifier hs-var hs-var">nameSpacesRelated</span></a></span></span><span> </span><span id="local-6989586621682986588"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986588"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682986589"><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986589"><span class="hs-identifier hs-var">what_looking</span></a></span></span><span> </span><span id="local-6989586621682986590"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986590"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621682986591"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986591"><span class="hs-identifier hs-var">ns'</span></a></span></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986590"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NameSpace -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986591"><span class="hs-identifier hs-var">ns'</span></a></span><span>
</span><span id="line-425"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">or</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="#local-6989586621682986593"><span class="hs-identifier hs-var">other_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986591"><span class="hs-identifier hs-var">ns'</span></a></span><span>
</span><span id="line-428"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986594"><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="#local-6989586621682986594"><span class="hs-identifier hs-var">orig_ns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986595"><span class="annot"><span class="annottext">[(NameSpace -&gt; Bool, [WhatLooking])]
</span><a href="#local-6989586621682986595"><span class="hs-identifier hs-var">others</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(NameSpace -&gt; Bool, [(NameSpace -&gt; Bool, [WhatLooking])])]
</span><a href="#local-6989586621682986596"><span class="hs-identifier hs-var">other_namespaces</span></a></span><span>
</span><span id="line-429"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="#local-6989586621682986594"><span class="hs-identifier hs-var">orig_ns</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682986590"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-430"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682986593"><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="#local-6989586621682986593"><span class="hs-identifier hs-var">other_ns</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682986597"><span class="annot"><span class="annottext">[WhatLooking]
</span><a href="#local-6989586621682986597"><span class="hs-identifier hs-var">wls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(NameSpace -&gt; Bool, [WhatLooking])]
</span><a href="#local-6989586621682986595"><span class="hs-identifier hs-var">others</span></a></span><span>
</span><span id="line-431"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="#local-6989586621682986589"><span class="hs-identifier hs-var">what_looking</span></a></span><span> </span><span class="annot"><span class="annottext">WhatLooking -&gt; [WhatLooking] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_Anything"><span class="hs-identifier hs-var">WL_Anything</span></a></span><span> </span><span class="annot"><span class="annottext">WhatLooking -&gt; [WhatLooking] -&gt; [WhatLooking]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[WhatLooking]
</span><a href="#local-6989586621682986597"><span class="hs-identifier hs-var">wls</span></a></span><span>
</span><span id="line-432"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-434"></span><span>    </span><span class="hs-comment">-- explanation:</span><span>
</span><span id="line-435"></span><span>    </span><span class="hs-comment">-- [(orig_ns, [(other_ns, what_looking_possibilities)])]</span><span>
</span><span id="line-436"></span><span>    </span><span class="hs-comment">-- A particular other_ns is related if the original namespace is orig_ns</span><span>
</span><span id="line-437"></span><span>    </span><span class="hs-comment">-- and what_looking is either WL_Anything or is one of</span><span>
</span><span id="line-438"></span><span>    </span><span class="hs-comment">-- what_looking_possibilities</span><span>
</span><span id="line-439"></span><span>    </span><span id="local-6989586621682986596"><span class="annot"><span class="annottext">other_namespaces :: [(NameSpace -&gt; Bool, [(NameSpace -&gt; Bool, [WhatLooking])])]
</span><a href="#local-6989586621682986596"><span class="hs-identifier hs-var hs-var">other_namespaces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-440"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isVarNameSpace"><span class="hs-identifier hs-var">isVarNameSpace</span></a></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isFieldNameSpace"><span class="hs-identifier hs-var">isFieldNameSpace</span></a></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_RecField"><span class="hs-identifier hs-var">WL_RecField</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>                              </span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_Constructor"><span class="hs-identifier hs-var">WL_Constructor</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isVarNameSpace"><span class="hs-identifier hs-var">isVarNameSpace</span></a></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_RecField"><span class="hs-identifier hs-var">WL_RecField</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTvNameSpace"><span class="hs-identifier hs-var">isTvNameSpace</span></a></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcClsNameSpace"><span class="hs-identifier hs-var">isTcClsNameSpace</span></a></span><span>   </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_Constructor"><span class="hs-identifier hs-var">WL_Constructor</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>                              </span><span class="annot"><span class="annottext">(NameSpace -&gt; Bool, [WhatLooking])
-&gt; [(NameSpace -&gt; Bool, [WhatLooking])]
-&gt; [(NameSpace -&gt; Bool, [WhatLooking])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(NameSpace -&gt; Bool, [WhatLooking])]
</span><a href="#local-6989586621682986603"><span class="hs-identifier hs-var">promoted_datacons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcClsNameSpace"><span class="hs-identifier hs-var">isTcClsNameSpace</span></a></span><span>   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTvNameSpace"><span class="hs-identifier hs-var">isTvNameSpace</span></a></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>                              </span><span class="annot"><span class="annottext">(NameSpace -&gt; Bool, [WhatLooking])
-&gt; [(NameSpace -&gt; Bool, [WhatLooking])]
-&gt; [(NameSpace -&gt; Bool, [WhatLooking])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(NameSpace -&gt; Bool, [WhatLooking])]
</span><a href="#local-6989586621682986603"><span class="hs-identifier hs-var">promoted_datacons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- If -XDataKinds is enabled, the data constructor name space is also</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">-- related to the type-level name spaces</span><span>
</span><span id="line-450"></span><span>    </span><span id="local-6989586621682986604"><span class="annot"><span class="annottext">data_kinds :: Bool
</span><a href="#local-6989586621682986604"><span class="hs-identifier hs-var hs-var">data_kinds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Extension -&gt; DynFlags -&gt; Bool
</span><a href="GHC.Driver.DynFlags.html#xopt"><span class="hs-identifier hs-var">xopt</span></a></span><span> </span><span class="annot"><span class="annottext">Extension
</span><span class="hs-identifier hs-var">LangExt.DataKinds</span></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682986588"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-451"></span><span>    </span><span id="local-6989586621682986603"><span class="annot"><span class="annottext">promoted_datacons :: [(NameSpace -&gt; Bool, [WhatLooking])]
</span><a href="#local-6989586621682986603"><span class="hs-identifier hs-var hs-var">promoted_datacons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">WhatLooking
</span><a href="GHC.Rename.Unbound.html#WL_Constructor"><span class="hs-identifier hs-var">WL_Constructor</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682986604"><span class="hs-identifier hs-var">data_kinds</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">{- Note [Related name spaces]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Name spaces are related if there is a chance to mean the one when one writes
the other, i.e. variables &lt;-&gt; data constructors and type variables &lt;-&gt; type
constructors.

In most contexts, this mistake can happen in both directions. Not so in
patterns:

When a user writes
        foo (just a) = ...
It is possible that they meant to use `Just` instead. However, when they write
        foo (Map a) = ...
It is unlikely that they mean to use `map`, since variables cannot be used here.

Similarly, when we look for record fields, data constructors are not in a
related namespace.

Furthermore, with -XDataKinds, the data constructor name space is related to
the type variable and type constructor name spaces.

Note [When to show/hide the module-not-imported line]           -- #15611
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For the error message:
    Not in scope X.Y
    Module X does not export Y
    No module named &#8216;X&#8217; is imported:
there are 2 cases, where we hide the last &quot;no module is imported&quot; line:
1. If the module X has been imported.
2. If the module X is the current module. There are 2 subcases:
   2.1 If the unknown module name is in a input source file,
       then we can use the getModule function to get the current module name.
       (See test T15611a)
   2.2 If the unknown module name has been entered by the user in GHCi,
       then the getModule function returns something like &quot;interactive:Ghci1&quot;,
       and we have to check the current module in the last added entry of
       the HomePackageTable. (See test T15611b)
-}</span><span>
</span><span id="line-491"></span></pre></body></html>