<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiWayIf #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-comment">--</span><span>
</span><span id="line-10"></span><span class="hs-comment">--  (c) The University of Glasgow 2002-2006</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-comment">-- Functions over HsSyn specialised to RdrName.</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html"><span class="hs-identifier">GHC.Parser.PostProcess</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrGetField"><span class="hs-identifier">mkRdrGetField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrProjection"><span class="hs-identifier">mkRdrProjection</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier">Fbind</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- RecordDot</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsOpApp"><span class="hs-identifier">mkHsOpApp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsIntegral"><span class="hs-identifier">mkHsIntegral</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsFractional"><span class="hs-identifier">mkHsFractional</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsIsString"><span class="hs-identifier">mkHsIsString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsDo"><span class="hs-identifier">mkHsDo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMDo"><span class="hs-identifier">mkMDo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSpliceDecl"><span class="hs-identifier">mkSpliceDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRoleAnnotDecl"><span class="hs-identifier">mkRoleAnnotDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkClassDecl"><span class="hs-identifier">mkClassDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyData"><span class="hs-identifier">mkTyData</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkDataFamInst"><span class="hs-identifier">mkDataFamInst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTySynonym"><span class="hs-identifier">mkTySynonym</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyFamInstEqn"><span class="hs-identifier">mkTyFamInstEqn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkStandaloneKindSig"><span class="hs-identifier">mkStandaloneKindSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyFamInst"><span class="hs-identifier">mkTyFamInst</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkFamDecl"><span class="hs-identifier">mkFamDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkInlinePragma"><span class="hs-identifier">mkInlinePragma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkOpaquePragma"><span class="hs-identifier">mkOpaquePragma</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkPatSynMatchGroup"><span class="hs-identifier">mkPatSynMatchGroup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRecConstrOrUpdate"><span class="hs-identifier">mkRecConstrOrUpdate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyClD"><span class="hs-identifier">mkTyClD</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkInstD"><span class="hs-identifier">mkInstD</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrRecordCon"><span class="hs-identifier">mkRdrRecordCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrRecordUpd"><span class="hs-identifier">mkRdrRecordUpd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier">setRdrNameSpace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndr"><span class="hs-identifier">fromSpecTyVarBndr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndrs"><span class="hs-identifier">fromSpecTyVarBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#annBinds"><span class="hs-identifier">annBinds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsAnchor"><span class="hs-identifier">stmtsAnchor</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsLoc"><span class="hs-identifier">stmtsLoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvBindGroup"><span class="hs-identifier">cvBindGroup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvBindsAndSigs"><span class="hs-identifier">cvBindsAndSigs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvTopDecls"><span class="hs-identifier">cvTopDecls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#placeHolderPunRhs"><span class="hs-identifier">placeHolderPunRhs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span>        </span><span class="hs-comment">-- Stuff to do with Foreign declarations</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImport"><span class="hs-identifier">mkImport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#parseCImport"><span class="hs-identifier">parseCImport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkExport"><span class="hs-identifier">mkExport</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier">mkExtName</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- RdrName -&gt; CLabelString</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkGadtDecl"><span class="hs-identifier">mkGadtDecl</span></a></span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- [LocatedA RdrName] -&gt; LHsType RdrName -&gt; ConDecl RdrName</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkConDeclH98"><span class="hs-identifier">mkConDeclH98</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>        </span><span class="hs-comment">-- Bunch of functions in the parser monad for</span><span>
</span><span id="line-52"></span><span>        </span><span class="hs-comment">-- checking and constructing values</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkImportDecl"><span class="hs-identifier">checkImportDecl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier">checkExpBlockArguments</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkCmdBlockArguments"><span class="hs-identifier">checkCmdBlockArguments</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPrecP"><span class="hs-identifier">checkPrecP</span></a></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- Int -&gt; P Int</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkContext"><span class="hs-identifier">checkContext</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- HsType -&gt; P HsContext</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPattern"><span class="hs-identifier">checkPattern</span></a></span><span class="hs-special">,</span><span>         </span><span class="hs-comment">-- HsExp -&gt; P HsPat</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPattern_details"><span class="hs-identifier">checkPattern_details</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#incompleteDoBlock"><span class="hs-identifier">incompleteDoBlock</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier">ParseContext</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkMonadComp"><span class="hs-identifier">checkMonadComp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValDef"><span class="hs-identifier">checkValDef</span></a></span><span class="hs-special">,</span><span>          </span><span class="hs-comment">-- (SrcLoc, HsExp, HsRhs, [HsDecl]) -&gt; P HsDecl</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValSigLhs"><span class="hs-identifier">checkValSigLhs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#LRuleTyTmVar"><span class="hs-identifier">LRuleTyTmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier">RuleTyTmVar</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRuleBndrs"><span class="hs-identifier">mkRuleBndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRuleTyVarBndrs"><span class="hs-identifier">mkRuleTyVarBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRuleTyVarBndrNames"><span class="hs-identifier">checkRuleTyVarBndrNames</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRecordSyntax"><span class="hs-identifier">checkRecordSyntax</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkEmptyGADTs"><span class="hs-identifier">checkEmptyGADTs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier">addFatalError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#hintBangPat"><span class="hs-identifier">hintBangPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkBangTy"><span class="hs-identifier">mkBangTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier">UnpackednessPragma</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultTy"><span class="hs-identifier">mkMultTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultAnn"><span class="hs-identifier">mkMultAnn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>        </span><span class="hs-comment">-- Token location</span><span>
</span><span id="line-76"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTokenLocation"><span class="hs-identifier">mkTokenLocation</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span>        </span><span class="hs-comment">-- Help with processing exports</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpSubSpec"><span class="hs-identifier">ImpExpSubSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier">ImpExpQcSpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkModuleImpExp"><span class="hs-identifier">mkModuleImpExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTypeImpExp"><span class="hs-identifier">mkTypeImpExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImpExpSubSpec"><span class="hs-identifier">mkImpExpSubSpec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkImportSpec"><span class="hs-identifier">checkImportSpec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>        </span><span class="hs-comment">-- Token symbols</span><span>
</span><span id="line-87"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#starSym"><span class="hs-identifier">starSym</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-comment">-- Warnings and errors</span><span>
</span><span id="line-90"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#warnStarIsType"><span class="hs-identifier">warnStarIsType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#warnPrepositiveQualifiedModule"><span class="hs-identifier">warnPrepositiveQualifiedModule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#failOpFewArgs"><span class="hs-identifier">failOpFewArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#failNotEnabledImportQualifiedPost"><span class="hs-identifier">failNotEnabledImportQualifiedPost</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#failImportQualifiedTwice"><span class="hs-identifier">failImportQualifiedTwice</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>        </span><span class="annot"><a href="GHC.Parser.Types.html#SumOrTuple"><span class="hs-identifier">SumOrTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>        </span><span class="hs-comment">-- Expression/command/pattern ambiguity resolution</span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier">PV</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#runPV"><span class="hs-identifier">runPV</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier">ECP</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier">ECP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#unECP"><span class="hs-identifier">unECP</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambInfixOp"><span class="hs-identifier">DisambInfixOp</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier">DisambECP</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromExp"><span class="hs-identifier">ecpFromExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromCmd"><span class="hs-identifier">ecpFromCmd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromPat"><span class="hs-identifier">ecpFromPat</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier">ArrowParsingMode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#withArrowParsingMode"><span class="hs-identifier">withArrowParsingMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#withArrowParsingMode%27"><span class="hs-identifier">withArrowParsingMode'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#setTelescopeBndrsNameSpace"><span class="hs-identifier">setTelescopeBndrsNameSpace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier">PatBuilder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier">hsHoleExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>        </span><span class="hs-comment">-- Type/datacon ambiguity resolution</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambTD"><span class="hs-identifier">DisambTD</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#addUnpackednessP"><span class="hs-identifier">addUnpackednessP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderCon"><span class="hs-identifier">dataConBuilderCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderDetails"><span class="hs-identifier">dataConBuilderDetails</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkUnboxedSumCon"><span class="hs-identifier">mkUnboxedSumCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-comment">-- ListTuplePuns related parsers</span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTy"><span class="hs-identifier">mkTupleSyntaxTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTycon"><span class="hs-identifier">mkTupleSyntaxTycon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy0"><span class="hs-identifier">mkListSyntaxTy0</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy1"><span class="hs-identifier">mkListSyntaxTy1</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#withCombinedComments"><span class="hs-identifier">withCombinedComments</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#requireLTPuns"><span class="hs-identifier">requireLTPuns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>           </span><span class="hs-comment">-- Lots of it</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier">TyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#isTupleTyCon"><span class="hs-identifier">isTupleTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#tyConSingleDataCon_maybe"><span class="hs-identifier">tyConSingleDataCon_maybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html"><span class="hs-identifier">GHC.Core.DataCon</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier">dataConTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier">dataConName</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html#ConLike"><span class="hs-identifier">ConLike</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier">Role</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier">fsFromRole</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html"><span class="hs-identifier">GHC.Types.Name.Reader</span></a></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Fixity.html"><span class="hs-identifier">GHC.Types.Fixity</span></a></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Hint.html"><span class="hs-identifier">GHC.Types.Hint</span></a></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html"><span class="hs-identifier">GHC.Parser.Types</span></a></span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html"><span class="hs-identifier">GHC.Parser.Lexer</span></a></span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html"><span class="hs-identifier">GHC.Parser.Errors.Types</span></a></span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Lexeme.html"><span class="hs-identifier">GHC.Utils.Lexeme</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Utils.Lexeme.html#okConOcc"><span class="hs-identifier">okConOcc</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Specificity"><span class="hs-identifier">Specificity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#cTupleTyConName"><span class="hs-identifier">cTupleTyConName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#tupleTyCon"><span class="hs-identifier">tupleTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#tupleDataCon"><span class="hs-identifier">tupleDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>                          </span><span class="annot"><a href="GHC.Builtin.Types.html#nilDataConName"><span class="hs-identifier">nilDataConName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#nilDataConKey"><span class="hs-identifier">nilDataConKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>                          </span><span class="annot"><a href="GHC.Builtin.Types.html#listTyConName"><span class="hs-identifier">listTyConName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html#listTyConKey"><span class="hs-identifier">listTyConKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#sumDataCon"><span class="hs-identifier">sumDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>                          </span><span class="annot"><a href="GHC.Builtin.Types.html#unrestrictedFunTyCon"><span class="hs-identifier">unrestrictedFunTyCon</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#listTyCon_RDR"><span class="hs-identifier">listTyCon_RDR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html#unitDataCon"><span class="hs-identifier">unitDataCon</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html"><span class="hs-identifier">GHC.Types.ForeignCall</span></a></span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#hasKey"><span class="hs-identifier">hasKey</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Maybe.html"><span class="hs-identifier">GHC.Data.Maybe</span></a></span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html"><span class="hs-identifier">GHC.Utils.Error</span></a></span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html"><span class="hs-identifier">GHC.Utils.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.html#unlessM"><span class="hs-identifier">unlessM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Either.html"><span class="hs-identifier">Data.Either</span></a></span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">findIndex</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semi</span></span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Warnings.html"><span class="hs-identifier">GHC.Unit.Module.Warnings</span></a></span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Data.Strict.html"><span class="hs-identifier">GHC.Data.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict</span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html"><span class="hs-identifier">Language.Haskell.Syntax.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier">FieldLabelString</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Text.ParserCombinators.ReadP.html"><span class="hs-identifier">Text.ParserCombinators.ReadP</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ReadP</span></span><span>
</span><span id="line-174"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Char.html"><span class="hs-identifier">Data.Char</span></a></span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">dataTypeOf</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromConstr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">dataTypeConstrs</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Type</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><span class="hs-comment">{- **********************************************************************

  Construction functions for Rdr stuff

  ********************************************************************* -}</span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | mkClassDecl builds a RdrClassDecl, filling in the names for tycon and</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- datacon by deriving them from the name of the class.  We fill in the names</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- for the tycon and datacon corresponding to the class, by deriving them</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- from the name of the class itself.  This saves recording the names in the</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- interface file (which would be equally good).</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-comment">-- Similarly for mkConDecl, mkClassOpSig and default-method names.</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">--         *** See Note [The Naming story] in GHC.Hs.Decls ****</span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span id="local-6989586621682764255"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyClD"><span class="hs-identifier hs-type">mkTyClD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764255"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764255"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-196"></span><span id="mkTyClD"><span class="annot"><span class="annottext">mkTyClD :: forall (p :: Pass). LTyClDecl (GhcPass p) -&gt; LHsDecl (GhcPass p)
</span><a href="GHC.Parser.PostProcess.html#mkTyClD"><span class="hs-identifier hs-var hs-var">mkTyClD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682765860"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682765860"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682765861"><span class="annot"><span class="annottext">TyClDecl (GhcPass p)
</span><a href="#local-6989586621682765861"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl (GhcPass p)
-&gt; GenLocated SrcSpanAnnA (HsDecl (GhcPass p))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682765860"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyClD (GhcPass p) -&gt; TyClDecl (GhcPass p) -&gt; HsDecl (GhcPass p)
forall p. XTyClD p -&gt; TyClDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-var">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD (GhcPass p)
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">TyClDecl (GhcPass p)
</span><a href="#local-6989586621682765861"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span id="local-6989586621682764267"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkInstD"><span class="hs-identifier hs-type">mkInstD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764267"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764267"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-199"></span><span id="mkInstD"><span class="annot"><span class="annottext">mkInstD :: forall (p :: Pass). LInstDecl (GhcPass p) -&gt; LHsDecl (GhcPass p)
</span><a href="GHC.Parser.PostProcess.html#mkInstD"><span class="hs-identifier hs-var hs-var">mkInstD</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682765864"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682765864"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682765865"><span class="annot"><span class="annottext">InstDecl (GhcPass p)
</span><a href="#local-6989586621682765865"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl (GhcPass p)
-&gt; GenLocated SrcSpanAnnA (HsDecl (GhcPass p))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682765864"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XInstD (GhcPass p) -&gt; InstDecl (GhcPass p) -&gt; HsDecl (GhcPass p)
forall p. XInstD p -&gt; InstDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-var">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD (GhcPass p)
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">InstDecl (GhcPass p)
</span><a href="#local-6989586621682765865"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span id="local-6989586621682764275"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkClassDecl"><span class="hs-identifier hs-type">mkClassDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-202"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682764275"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsFunDep"><span class="hs-identifier hs-type">LHsFunDep</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpLayout"><span class="hs-identifier hs-type">EpLayout</span></a></span><span>
</span><span id="line-206"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnClassDecl"><span class="hs-identifier hs-type">AnnClassDecl</span></a></span><span>
</span><span id="line-207"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="mkClassDecl"><span class="annot"><span class="annottext">mkClassDecl :: forall a.
SrcSpan
-&gt; Located (Maybe (LHsContext GhcPs), LHsType GhcPs)
-&gt; Located (a, [LHsFunDep GhcPs])
-&gt; OrdList (LHsDecl GhcPs)
-&gt; EpLayout
-&gt; AnnClassDecl
-&gt; P (LTyClDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkClassDecl"><span class="hs-identifier hs-var hs-var">mkClassDecl</span></a></span></span><span> </span><span id="local-6989586621682765873"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765873"><span class="hs-identifier hs-var">loc'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765874"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682765874"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765875"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765875"><span class="hs-identifier hs-var">tycl_hdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682765876"><span class="annot"><span class="annottext">Located (a, [LHsFunDep GhcPs])
</span><a href="#local-6989586621682765876"><span class="hs-identifier hs-var">fds</span></a></span></span><span> </span><span id="local-6989586621682765877"><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682765877"><span class="hs-identifier hs-var">where_cls</span></a></span></span><span> </span><span id="local-6989586621682765878"><span class="annot"><span class="annottext">EpLayout
</span><a href="#local-6989586621682765878"><span class="hs-identifier hs-var">layout</span></a></span></span><span> </span><span id="local-6989586621682765879"><span class="annot"><span class="annottext">AnnClassDecl
</span><a href="#local-6989586621682765879"><span class="hs-identifier hs-var">annsIn</span></a></span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765880"><span class="annot"><a href="#local-6989586621682765880"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765881"><span class="annot"><a href="#local-6989586621682765881"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765882"><span class="annot"><a href="#local-6989586621682765882"><span class="hs-identifier hs-var">ats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765883"><span class="annot"><a href="#local-6989586621682765883"><span class="hs-identifier hs-var">at_defs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765884"><span class="annot"><a href="#local-6989586621682765884"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
-&gt; P (LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
      [LTyFamInstDecl GhcPs], [LDataFamInstDecl GhcPs], [LDocDecl GhcPs])
</span><a href="GHC.Parser.PostProcess.html#cvBindsAndSigs"><span class="hs-identifier hs-var">cvBindsAndSigs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682765877"><span class="hs-identifier hs-var">where_cls</span></a></span><span>
</span><span id="line-211"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765885"><span class="annot"><a href="#local-6989586621682765885"><span class="hs-identifier hs-var">cls</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765886"><span class="annot"><a href="#local-6989586621682765886"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765887"><span class="annot"><a href="#local-6989586621682765887"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765888"><span class="annot"><a href="#local-6989586621682765888"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765889"><span class="annot"><a href="#local-6989586621682765889"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765890"><span class="annot"><a href="#local-6989586621682765890"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-type">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span> </span><span class="annot"><a href="#local-6989586621682765875"><span class="hs-identifier hs-type">tycl_hdr</span></a></span><span>
</span><span id="line-212"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765892"><span class="annot"><a href="#local-6989586621682765892"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-type">checkTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;class&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#whereDots"><span class="hs-identifier hs-type">whereDots</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765885"><span class="hs-identifier hs-type">cls</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765886"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-213"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765896"><span class="annot"><a href="#local-6989586621682765896"><span class="hs-identifier hs-var hs-var">anns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnClassDecl
</span><a href="#local-6989586621682765879"><span class="hs-identifier hs-var">annsIn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#acd_openp"><span class="hs-identifier hs-var">acd_openp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765888"><span class="hs-identifier hs-type">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#acd_closep"><span class="hs-identifier hs-var">acd_closep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765889"><span class="hs-identifier hs-type">cps</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-214"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765899"><span class="annot"><a href="#local-6989586621682765899"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765873"><span class="hs-identifier hs-var">loc'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682765890"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-215"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765899"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClassDecl"><span class="hs-identifier hs-type">ClassDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdCExt"><span class="hs-identifier hs-var">tcdCExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682765896"><span class="hs-identifier hs-type">anns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682765878"><span class="hs-identifier hs-type">layout</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoAnnSortKey"><span class="hs-identifier hs-type">NoAnnSortKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdCtxt"><span class="hs-identifier hs-var">tcdCtxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765874"><span class="hs-identifier hs-type">mcxt</span></a></span><span>
</span><span id="line-217"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765885"><span class="hs-identifier hs-type">cls</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765892"><span class="hs-identifier hs-type">tyvars</span></a></span><span>
</span><span id="line-218"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765887"><span class="hs-identifier hs-type">fixity</span></a></span><span>
</span><span id="line-219"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdFDs"><span class="hs-identifier hs-var">tcdFDs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765876"><span class="hs-identifier hs-type">fds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdSigs"><span class="hs-identifier hs-var">tcdSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkClassOpSigs"><span class="hs-identifier hs-type">mkClassOpSigs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765881"><span class="hs-identifier hs-type">sigs</span></a></span><span>
</span><span id="line-221"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdMeths"><span class="hs-identifier hs-var">tcdMeths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765880"><span class="hs-identifier hs-type">binds</span></a></span><span>
</span><span id="line-222"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdATs"><span class="hs-identifier hs-var">tcdATs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765882"><span class="hs-identifier hs-type">ats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdATDefs"><span class="hs-identifier hs-var">tcdATDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765883"><span class="hs-identifier hs-type">at_defs</span></a></span><span>
</span><span id="line-223"></span><span>                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdDocs"><span class="hs-identifier hs-var">tcdDocs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765884"><span class="hs-identifier hs-type">docs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyData"><span class="hs-identifier hs-type">mkTyData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-226"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-227"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NewOrData"><span class="hs-identifier hs-type">NewOrData</span></a></span><span>
</span><span id="line-228"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedP"><span class="hs-identifier hs-type">LocatedP</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CType"><span class="hs-identifier hs-type">CType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-232"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDeriving"><span class="hs-identifier hs-type">HsDeriving</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnDataDefn"><span class="hs-identifier hs-type">AnnDataDefn</span></a></span><span>
</span><span id="line-234"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span id="mkTyData"><span class="annot"><span class="annottext">mkTyData :: SrcSpan
-&gt; Bool
-&gt; NewOrData
-&gt; Maybe (LocatedP CType)
-&gt; Located (Maybe (LHsContext GhcPs), LHsType GhcPs)
-&gt; Maybe (LHsType GhcPs)
-&gt; [LConDecl GhcPs]
-&gt; Located (HsDeriving GhcPs)
-&gt; AnnDataDefn
-&gt; P (LTyClDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkTyData"><span class="hs-identifier hs-var hs-var">mkTyData</span></a></span></span><span> </span><span id="local-6989586621682765919"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765919"><span class="hs-identifier hs-var">loc'</span></a></span></span><span> </span><span id="local-6989586621682765920"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682765920"><span class="hs-identifier hs-var">is_type_data</span></a></span></span><span> </span><span id="local-6989586621682765921"><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621682765921"><span class="hs-identifier hs-var">new_or_data</span></a></span></span><span> </span><span id="local-6989586621682765922"><span class="annot"><span class="annottext">Maybe (LocatedP CType)
</span><a href="#local-6989586621682765922"><span class="hs-identifier hs-var">cType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765923"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682765923"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765924"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765924"><span class="hs-identifier hs-var">tycl_hdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>         </span><span id="local-6989586621682765925"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682765925"><span class="hs-identifier hs-var">ksig</span></a></span></span><span> </span><span id="local-6989586621682765926"><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621682765926"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682765927"><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621682765927"><span class="hs-identifier hs-var">maybe_deriv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682765928"><span class="annot"><span class="annottext">AnnDataDefn
</span><a href="#local-6989586621682765928"><span class="hs-identifier hs-var">annsIn</span></a></span></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765929"><span class="annot"><a href="#local-6989586621682765929"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765930"><span class="annot"><a href="#local-6989586621682765930"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765931"><span class="annot"><a href="#local-6989586621682765931"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765932"><span class="annot"><a href="#local-6989586621682765932"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765933"><span class="annot"><a href="#local-6989586621682765933"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765934"><span class="annot"><a href="#local-6989586621682765934"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765924"><span class="hs-identifier hs-var">tycl_hdr</span></a></span><span>
</span><span id="line-238"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765935"><span class="annot"><a href="#local-6989586621682765935"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-type">checkTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765921"><span class="hs-identifier hs-type">new_or_data</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#equalsDots"><span class="hs-identifier hs-type">equalsDots</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765929"><span class="hs-identifier hs-type">tc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765930"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-239"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765938"><span class="annot"><a href="#local-6989586621682765938"><span class="hs-identifier hs-var hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnDataDefn
</span><a href="#local-6989586621682765928"><span class="hs-identifier hs-var">annsIn</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Hs.Decls.html#andd_openp"><span class="hs-identifier hs-var">andd_openp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765932"><span class="hs-identifier hs-type">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#andd_closep"><span class="hs-identifier hs-var">andd_closep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765933"><span class="hs-identifier hs-type">cps</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-240"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765941"><span class="annot"><a href="#local-6989586621682765941"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNewOrData"><span class="hs-identifier hs-type">checkNewOrData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765919"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765929"><span class="hs-identifier hs-type">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682765920"><span class="hs-identifier hs-type">is_type_data</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765921"><span class="hs-identifier hs-type">new_or_data</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765926"><span class="hs-identifier hs-type">data_cons</span></a></span><span>
</span><span id="line-241"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765943"><span class="annot"><a href="#local-6989586621682765943"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkDataDefn"><span class="hs-identifier hs-type">mkDataDefn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765922"><span class="hs-identifier hs-type">cType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765923"><span class="hs-identifier hs-type">mcxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765925"><span class="hs-identifier hs-type">ksig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765941"><span class="hs-identifier hs-type">data_cons</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765927"><span class="hs-identifier hs-type">maybe_deriv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765938"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-242"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682765945"><span class="annot"><a href="#local-6989586621682765945"><span class="hs-identifier hs-var">cs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765919"><span class="hs-identifier hs-type">loc'</span></a></span><span>
</span><span id="line-243"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765947"><span class="annot"><a href="#local-6989586621682765947"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765919"><span class="hs-identifier hs-var">loc'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682765945"><span class="hs-identifier hs-var">cs'</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682765934"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765947"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDecl"><span class="hs-identifier hs-type">DataDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdDExt"><span class="hs-identifier hs-var">tcdDExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-245"></span><span>                                   </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765929"><span class="hs-identifier hs-type">tc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765935"><span class="hs-identifier hs-type">tyvars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-246"></span><span>                                   </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765931"><span class="hs-identifier hs-type">fixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-247"></span><span>                                   </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdDataDefn"><span class="hs-identifier hs-var">tcdDataDefn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765943"><span class="hs-identifier hs-type">defn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkDataDefn"><span class="hs-identifier hs-type">mkDataDefn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedP"><span class="hs-identifier hs-type">LocatedP</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CType"><span class="hs-identifier hs-type">CType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDefnCons"><span class="hs-identifier hs-type">DataDefnCons</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDeriving"><span class="hs-identifier hs-type">HsDeriving</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-254"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnDataDefn"><span class="hs-identifier hs-type">AnnDataDefn</span></a></span><span>
</span><span id="line-255"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span id="mkDataDefn"><span class="annot"><span class="annottext">mkDataDefn :: Maybe (LocatedP CType)
-&gt; Maybe (LHsContext GhcPs)
-&gt; Maybe (LHsType GhcPs)
-&gt; DataDefnCons (LConDecl GhcPs)
-&gt; HsDeriving GhcPs
-&gt; AnnDataDefn
-&gt; P (HsDataDefn GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkDataDefn"><span class="hs-identifier hs-var hs-var">mkDataDefn</span></a></span></span><span> </span><span id="local-6989586621682765951"><span class="annot"><span class="annottext">Maybe (LocatedP CType)
</span><a href="#local-6989586621682765951"><span class="hs-identifier hs-var">cType</span></a></span></span><span> </span><span id="local-6989586621682765952"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682765952"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span> </span><span id="local-6989586621682765953"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682765953"><span class="hs-identifier hs-var">ksig</span></a></span></span><span> </span><span id="local-6989586621682765954"><span class="annot"><span class="annottext">DataDefnCons (LConDecl GhcPs)
</span><a href="#local-6989586621682765954"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span> </span><span id="local-6989586621682765955"><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621682765955"><span class="hs-identifier hs-var">maybe_deriv</span></a></span></span><span> </span><span id="local-6989586621682765956"><span class="annot"><span class="annottext">AnnDataDefn
</span><a href="#local-6989586621682765956"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-257"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs) -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#checkDatatypeContext"><span class="hs-identifier hs-var">checkDatatypeContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682765952"><span class="hs-identifier hs-var">mcxt</span></a></span><span>
</span><span id="line-258"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; P (HsDataDefn GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dd_ext :: XCHsDataDefn GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ext"><span class="hs-identifier hs-var">dd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCHsDataDefn GhcPs
AnnDataDefn
</span><a href="#local-6989586621682765956"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-259"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cType :: Maybe (XRec GhcPs CType)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cType"><span class="hs-identifier hs-var">dd_cType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs CType)
Maybe (LocatedP CType)
</span><a href="#local-6989586621682765951"><span class="hs-identifier hs-var">cType</span></a></span><span>
</span><span id="line-260"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_ctxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_ctxt"><span class="hs-identifier hs-var">dd_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682765952"><span class="hs-identifier hs-var">mcxt</span></a></span><span>
</span><span id="line-261"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_cons :: DataDefnCons (LConDecl GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cons"><span class="hs-identifier hs-var">dd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataDefnCons (LConDecl GhcPs)
</span><a href="#local-6989586621682765954"><span class="hs-identifier hs-var">data_cons</span></a></span><span>
</span><span id="line-262"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_kindSig :: Maybe (LHsType GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682765953"><span class="hs-identifier hs-var">ksig</span></a></span><span>
</span><span id="line-263"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dd_derivs :: HsDeriving GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#dd_derivs"><span class="hs-identifier hs-var">dd_derivs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621682765955"><span class="hs-identifier hs-var">maybe_deriv</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTySynonym"><span class="hs-identifier hs-type">mkTySynonym</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-266"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>  </span><span class="hs-comment">-- LHS</span><span>
</span><span id="line-267"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>  </span><span class="hs-comment">-- RHS</span><span>
</span><span id="line-268"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-269"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;=&quot;</span></span><span>
</span><span id="line-270"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span id="mkTySynonym"><span class="annot"><span class="annottext">mkTySynonym :: SrcSpan
-&gt; LHsType GhcPs
-&gt; LHsType GhcPs
-&gt; EpToken &quot;type&quot;
-&gt; EpToken &quot;=&quot;
-&gt; P (LTyClDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkTySynonym"><span class="hs-identifier hs-var hs-var">mkTySynonym</span></a></span></span><span> </span><span id="local-6989586621682765965"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765965"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682765966"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765966"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682765967"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765967"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621682765968"><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682765968"><span class="hs-identifier hs-var">antype</span></a></span></span><span> </span><span id="local-6989586621682765969"><span class="annot"><span class="annottext">EpToken &quot;=&quot;
</span><a href="#local-6989586621682765969"><span class="hs-identifier hs-var">aneq</span></a></span></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682765970"><span class="annot"><a href="#local-6989586621682765970"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765971"><span class="annot"><a href="#local-6989586621682765971"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765972"><span class="annot"><a href="#local-6989586621682765972"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765973"><span class="annot"><a href="#local-6989586621682765973"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765974"><span class="annot"><a href="#local-6989586621682765974"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682765975"><span class="annot"><a href="#local-6989586621682765975"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682765966"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-273"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765976"><span class="annot"><a href="#local-6989586621682765976"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-type">checkTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-type">text</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#equalsDots"><span class="hs-identifier hs-type">equalsDots</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765970"><span class="hs-identifier hs-type">tc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765971"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-274"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765977"><span class="annot"><a href="#local-6989586621682765977"><span class="hs-identifier hs-var hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;] -&gt; EpToken &quot;type&quot; -&gt; EpToken &quot;=&quot; -&gt; AnnSynDecl
</span><a href="GHC.Hs.Decls.html#AnnSynDecl"><span class="hs-identifier hs-var">AnnSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682765973"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682765974"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682765968"><span class="hs-identifier hs-var">antype</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;=&quot;
</span><a href="#local-6989586621682765969"><span class="hs-identifier hs-var">aneq</span></a></span><span>
</span><span id="line-275"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682765979"><span class="annot"><a href="#local-6989586621682765979"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765965"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682765975"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-276"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765979"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SynDecl"><span class="hs-identifier hs-type">SynDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdSExt"><span class="hs-identifier hs-var">tcdSExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765977"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-277"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var">tcdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765970"><span class="hs-identifier hs-type">tc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var">tcdTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765976"><span class="hs-identifier hs-type">tyvars</span></a></span><span>
</span><span id="line-278"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var">tcdFixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765972"><span class="hs-identifier hs-type">fixity</span></a></span><span>
</span><span id="line-279"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#tcdRhs"><span class="hs-identifier hs-var">tcdRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682765967"><span class="hs-identifier hs-type">rhs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkStandaloneKindSig"><span class="hs-identifier hs-type">mkStandaloneKindSig</span></a></span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- LHS</span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>             </span><span class="hs-comment">-- RHS</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LStandaloneKindSig"><span class="hs-identifier hs-type">LStandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span id="mkStandaloneKindSig"><span class="annot"><span class="annottext">mkStandaloneKindSig :: SrcSpan
-&gt; Located [LocatedN RdrName]
-&gt; LHsSigType GhcPs
-&gt; (EpToken &quot;type&quot;, TokDcolon)
-&gt; P (LStandaloneKindSig GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkStandaloneKindSig"><span class="hs-identifier hs-var hs-var">mkStandaloneKindSig</span></a></span></span><span> </span><span id="local-6989586621682765983"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682765983"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682765984"><span class="annot"><span class="annottext">Located [LocatedN RdrName]
</span><a href="#local-6989586621682765984"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682765985"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682765985"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621682765986"><span class="annot"><span class="annottext">(EpToken &quot;type&quot;, TokDcolon)
</span><a href="#local-6989586621682765986"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682765987"><span class="annot"><a href="#local-6989586621682765987"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; P (LocatedN RdrName))
-&gt; [LocatedN RdrName] -&gt; P [LocatedN RdrName]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; P (LocatedN RdrName)
forall {m :: * -&gt; *} {l}.
(MonadP m, HasLoc l) =&gt;
GenLocated l RdrName -&gt; m (GenLocated l RdrName)
</span><a href="#local-6989586621682765989"><span class="hs-identifier hs-var">check_lhs_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located [LocatedN RdrName] -&gt; [LocatedN RdrName]
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located [LocatedN RdrName]
</span><a href="#local-6989586621682765984"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682765990"><span class="annot"><a href="#local-6989586621682765990"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682765991"><span class="hs-identifier hs-type">check_singular_lhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">reverse</span></span><span> </span><span class="annot"><a href="#local-6989586621682765987"><span class="hs-identifier hs-type">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765983"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>       </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#StandaloneKindSig"><span class="hs-identifier hs-type">StandaloneKindSig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765986"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765990"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765985"><span class="hs-identifier hs-type">rhs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621682765989"><span class="annot"><span class="annottext">check_lhs_name :: GenLocated l RdrName -&gt; m (GenLocated l RdrName)
</span><a href="#local-6989586621682765989"><span class="hs-identifier hs-var hs-var">check_lhs_name</span></a></span></span><span> </span><span id="local-6989586621682766012"><span class="annot"><span class="annottext">v :: GenLocated l RdrName
</span><a href="#local-6989586621682766012"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated l RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-glyph">-&gt;</span><span id="local-6989586621682766013"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766013"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766013"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcOcc"><span class="hs-identifier hs-var">isTcOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766013"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName -&gt; m (GenLocated l RdrName)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName
</span><a href="#local-6989586621682766012"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; m (GenLocated l RdrName)
forall a. MsgEnvelope PsMessage -&gt; m a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; m (GenLocated l RdrName))
-&gt; MsgEnvelope PsMessage -&gt; m (GenLocated l RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated l RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName
</span><a href="#local-6989586621682766012"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-297"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnexpectedQualifiedConstructor"><span class="hs-identifier hs-var">PsErrUnexpectedQualifiedConstructor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated l RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName
</span><a href="#local-6989586621682766012"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>    </span><span id="local-6989586621682765991"><span class="annot"><span class="annottext">check_singular_lhs :: [LocatedN RdrName] -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682765991"><span class="hs-identifier hs-var hs-var">check_singular_lhs</span></a></span></span><span> </span><span id="local-6989586621682766021"><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621682766021"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-299"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><a href="#local-6989586621682766021"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; P (LocatedN RdrName)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkStandaloneKindSig: empty left-hand side&quot;</span></span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621682766023"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766023"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; P (LocatedN RdrName)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766023"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-302"></span><span>        </span><span class="annot"><span class="annottext">[LocatedN RdrName]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (LocatedN RdrName)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (LocatedN RdrName))
-&gt; MsgEnvelope PsMessage -&gt; P (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located [LocatedN RdrName] -&gt; SrcSpan
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located [LocatedN RdrName]
</span><a href="#local-6989586621682765984"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-303"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcPs (IdP GhcPs)] -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMultipleNamesInStandaloneKindSignature"><span class="hs-identifier hs-var">PsErrMultipleNamesInStandaloneKindSignature</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (IdP GhcPs)]
[LocatedN RdrName]
</span><a href="#local-6989586621682766021"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyFamInstEqn"><span class="hs-identifier hs-type">mkTyFamInstEqn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-306"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterFamEqnTyVarBndrs"><span class="hs-identifier hs-type">HsOuterFamEqnTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-307"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-308"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-309"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;=&quot;</span></span><span>
</span><span id="line-310"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyFamInstEqn"><span class="hs-identifier hs-type">LTyFamInstEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span id="mkTyFamInstEqn"><span class="annot"><span class="annottext">mkTyFamInstEqn :: SrcSpan
-&gt; HsOuterFamEqnTyVarBndrs GhcPs
-&gt; LHsType GhcPs
-&gt; LHsType GhcPs
-&gt; EpToken &quot;=&quot;
-&gt; P (LTyFamInstEqn GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkTyFamInstEqn"><span class="hs-identifier hs-var hs-var">mkTyFamInstEqn</span></a></span></span><span> </span><span id="local-6989586621682766026"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766026"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766027"><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
</span><a href="#local-6989586621682766027"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span id="local-6989586621682766028"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766028"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682766029"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766029"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span id="local-6989586621682766030"><span class="annot"><span class="annottext">EpToken &quot;=&quot;
</span><a href="#local-6989586621682766030"><span class="hs-identifier hs-var">annEq</span></a></span></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766031"><span class="annot"><a href="#local-6989586621682766031"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766032"><span class="annot"><a href="#local-6989586621682766032"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766033"><span class="annot"><a href="#local-6989586621682766033"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766034"><span class="annot"><a href="#local-6989586621682766034"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766035"><span class="annot"><a href="#local-6989586621682766035"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766036"><span class="annot"><a href="#local-6989586621682766036"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766028"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-313"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766037"><span class="annot"><a href="#local-6989586621682766037"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766026"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766036"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-314"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766037"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span>
</span><span id="line-315"></span><span>                        </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_ext"><span class="hs-identifier hs-var">feqn_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682766034"><span class="hs-identifier hs-type">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682766035"><span class="hs-identifier hs-type">cps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682766030"><span class="hs-identifier hs-type">annEq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766031"><span class="hs-identifier hs-type">tc</span></a></span><span>
</span><span id="line-317"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_bndrs"><span class="hs-identifier hs-var">feqn_bndrs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766027"><span class="hs-identifier hs-type">bndrs</span></a></span><span>
</span><span id="line-318"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_pats"><span class="hs-identifier hs-var">feqn_pats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766032"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-319"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_fixity"><span class="hs-identifier hs-var">feqn_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766033"><span class="hs-identifier hs-type">fixity</span></a></span><span>
</span><span id="line-320"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766029"><span class="hs-identifier hs-type">rhs</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkDataFamInst"><span class="hs-identifier hs-type">mkDataFamInst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-323"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NewOrData"><span class="hs-identifier hs-type">NewOrData</span></a></span><span>
</span><span id="line-324"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedP"><span class="hs-identifier hs-type">LocatedP</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CType"><span class="hs-identifier hs-type">CType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterFamEqnTyVarBndrs"><span class="hs-identifier hs-type">HsOuterFamEqnTyVarBndrs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-326"></span><span>                        </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsKind"><span class="hs-identifier hs-type">LHsKind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDeriving"><span class="hs-identifier hs-type">HsDeriving</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnDataDefn"><span class="hs-identifier hs-type">AnnDataDefn</span></a></span><span>
</span><span id="line-331"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span id="mkDataFamInst"><span class="annot"><span class="annottext">mkDataFamInst :: SrcSpan
-&gt; NewOrData
-&gt; Maybe (LocatedP CType)
-&gt; (Maybe (LHsContext GhcPs), HsOuterFamEqnTyVarBndrs GhcPs,
    LHsType GhcPs)
-&gt; Maybe (LHsType GhcPs)
-&gt; [LConDecl GhcPs]
-&gt; Located (HsDeriving GhcPs)
-&gt; AnnDataDefn
-&gt; P (LInstDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkDataFamInst"><span class="hs-identifier hs-var hs-var">mkDataFamInst</span></a></span></span><span> </span><span id="local-6989586621682766045"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766045"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766046"><span class="annot"><span class="annottext">NewOrData
</span><a href="#local-6989586621682766046"><span class="hs-identifier hs-var">new_or_data</span></a></span></span><span> </span><span id="local-6989586621682766047"><span class="annot"><span class="annottext">Maybe (LocatedP CType)
</span><a href="#local-6989586621682766047"><span class="hs-identifier hs-var">cType</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766048"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682766048"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766049"><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
</span><a href="#local-6989586621682766049"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766050"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766050"><span class="hs-identifier hs-var">tycl_hdr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>              </span><span id="local-6989586621682766051"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682766051"><span class="hs-identifier hs-var">ksig</span></a></span></span><span> </span><span id="local-6989586621682766052"><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621682766052"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766053"><span class="annot"><span class="annottext">HsDeriving GhcPs
</span><a href="#local-6989586621682766053"><span class="hs-identifier hs-var">maybe_deriv</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766054"><span class="annot"><span class="annottext">AnnDataDefn
</span><a href="#local-6989586621682766054"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766055"><span class="annot"><a href="#local-6989586621682766055"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766056"><span class="annot"><a href="#local-6989586621682766056"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766057"><span class="annot"><a href="#local-6989586621682766057"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766058"><span class="annot"><a href="#local-6989586621682766058"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766059"><span class="annot"><a href="#local-6989586621682766059"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766060"><span class="annot"><a href="#local-6989586621682766060"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766050"><span class="hs-identifier hs-var">tycl_hdr</span></a></span><span>
</span><span id="line-335"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682766061"><span class="annot"><a href="#local-6989586621682766061"><span class="hs-identifier hs-var">data_cons</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNewOrData"><span class="hs-identifier hs-type">checkNewOrData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766045"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766055"><span class="hs-identifier hs-type">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span> </span><span class="annot"><a href="#local-6989586621682766046"><span class="hs-identifier hs-type">new_or_data</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766052"><span class="hs-identifier hs-type">data_cons</span></a></span><span>
</span><span id="line-336"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766062"><span class="annot"><a href="#local-6989586621682766062"><span class="hs-identifier hs-var hs-var">anns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnDataDefn
</span><a href="#local-6989586621682766054"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Hs.Decls.html#andd_openp"><span class="hs-identifier hs-var">andd_openp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766058"><span class="hs-identifier hs-type">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#andd_closep"><span class="hs-identifier hs-var">andd_closep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766059"><span class="hs-identifier hs-type">cps</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-337"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682766063"><span class="annot"><a href="#local-6989586621682766063"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkDataDefn"><span class="hs-identifier hs-type">mkDataDefn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766047"><span class="hs-identifier hs-type">cType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766048"><span class="hs-identifier hs-type">mcxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766051"><span class="hs-identifier hs-type">ksig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766061"><span class="hs-identifier hs-type">data_cons</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766053"><span class="hs-identifier hs-type">maybe_deriv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766062"><span class="hs-identifier hs-type">anns'</span></a></span><span>
</span><span id="line-338"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766064"><span class="annot"><a href="#local-6989586621682766064"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766045"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766060"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-339"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766064"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-type">DataFamInstD</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span>
</span><span id="line-340"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_ext"><span class="hs-identifier hs-var">feqn_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-type">NoEpTok</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_tycon"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766055"><span class="hs-identifier hs-type">tc</span></a></span><span>
</span><span id="line-342"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_bndrs"><span class="hs-identifier hs-var">feqn_bndrs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766049"><span class="hs-identifier hs-type">bndrs</span></a></span><span>
</span><span id="line-343"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_pats"><span class="hs-identifier hs-var">feqn_pats</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766056"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-344"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_fixity"><span class="hs-identifier hs-var">feqn_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766057"><span class="hs-identifier hs-type">fixity</span></a></span><span>
</span><span id="line-345"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766063"><span class="hs-identifier hs-type">defn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-346"></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTyFamInst"><span class="hs-identifier hs-type">mkTyFamInst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-350"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyFamInstEqn"><span class="hs-identifier hs-type">TyFamInstEqn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-351"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-352"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;instance&quot;</span></span><span>
</span><span id="line-353"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInstDecl"><span class="hs-identifier hs-type">LInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span id="mkTyFamInst"><span class="annot"><span class="annottext">mkTyFamInst :: SrcSpan
-&gt; TyFamInstEqn GhcPs
-&gt; EpToken &quot;type&quot;
-&gt; EpToken &quot;instance&quot;
-&gt; P (LInstDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkTyFamInst"><span class="hs-identifier hs-var hs-var">mkTyFamInst</span></a></span></span><span> </span><span id="local-6989586621682766068"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766068"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766069"><span class="annot"><span class="annottext">TyFamInstEqn GhcPs
</span><a href="#local-6989586621682766069"><span class="hs-identifier hs-var">eqn</span></a></span></span><span> </span><span id="local-6989586621682766070"><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682766070"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682766071"><span class="annot"><span class="annottext">EpToken &quot;instance&quot;
</span><a href="#local-6989586621682766071"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (InstDecl GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (InstDecl GhcPs))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; InstDecl GhcPs -&gt; GenLocated SrcSpanAnnA (InstDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766068"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyFamInstD GhcPs -&gt; TyFamInstDecl GhcPs -&gt; InstDecl GhcPs
forall pass.
XTyFamInstD pass -&gt; TyFamInstDecl pass -&gt; InstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#TyFamInstD"><span class="hs-identifier hs-var">TyFamInstD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyFamInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-356"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCTyFamInstDecl GhcPs -&gt; TyFamInstEqn GhcPs -&gt; TyFamInstDecl GhcPs
forall pass.
XCTyFamInstDecl pass -&gt; TyFamInstEqn pass -&gt; TyFamInstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#TyFamInstDecl"><span class="hs-identifier hs-var">TyFamInstDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682766070"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;instance&quot;
</span><a href="#local-6989586621682766071"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyFamInstEqn GhcPs
</span><a href="#local-6989586621682766069"><span class="hs-identifier hs-var">eqn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkFamDecl"><span class="hs-identifier hs-type">mkFamDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-359"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyInfo"><span class="hs-identifier hs-type">FamilyInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-360"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TopLevelFlag"><span class="hs-identifier hs-type">TopLevelFlag</span></a></span><span>
</span><span id="line-361"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>                   </span><span class="hs-comment">-- LHS</span><span>
</span><span id="line-362"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyResultSig"><span class="hs-identifier hs-type">LFamilyResultSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>          </span><span class="hs-comment">-- Optional result signature</span><span>
</span><span id="line-363"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LInjectivityAnn"><span class="hs-identifier hs-type">LInjectivityAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- Injectivity annotation</span><span>
</span><span id="line-364"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnFamilyDecl"><span class="hs-identifier hs-type">AnnFamilyDecl</span></a></span><span>
</span><span id="line-365"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyClDecl"><span class="hs-identifier hs-type">LTyClDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-366"></span><span id="mkFamDecl"><span class="annot"><span class="annottext">mkFamDecl :: SrcSpan
-&gt; FamilyInfo GhcPs
-&gt; TopLevelFlag
-&gt; LHsType GhcPs
-&gt; LFamilyResultSig GhcPs
-&gt; Maybe (LInjectivityAnn GhcPs)
-&gt; AnnFamilyDecl
-&gt; P (LTyClDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkFamDecl"><span class="hs-identifier hs-var hs-var">mkFamDecl</span></a></span></span><span> </span><span id="local-6989586621682766074"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766074"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766075"><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="#local-6989586621682766075"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621682766076"><span class="annot"><span class="annottext">TopLevelFlag
</span><a href="#local-6989586621682766076"><span class="hs-identifier hs-var">topLevel</span></a></span></span><span> </span><span id="local-6989586621682766077"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766077"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682766078"><span class="annot"><span class="annottext">LFamilyResultSig GhcPs
</span><a href="#local-6989586621682766078"><span class="hs-identifier hs-var">ksig</span></a></span></span><span> </span><span id="local-6989586621682766079"><span class="annot"><span class="annottext">Maybe (LInjectivityAnn GhcPs)
</span><a href="#local-6989586621682766079"><span class="hs-identifier hs-var">injAnn</span></a></span></span><span> </span><span id="local-6989586621682766080"><span class="annot"><span class="annottext">AnnFamilyDecl
</span><a href="#local-6989586621682766080"><span class="hs-identifier hs-var">annsIn</span></a></span></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766081"><span class="annot"><a href="#local-6989586621682766081"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766082"><span class="annot"><a href="#local-6989586621682766082"><span class="hs-identifier hs-var">tparams</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766083"><span class="annot"><a href="#local-6989586621682766083"><span class="hs-identifier hs-var">fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766084"><span class="annot"><a href="#local-6989586621682766084"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766085"><span class="annot"><a href="#local-6989586621682766085"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766086"><span class="annot"><a href="#local-6989586621682766086"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var">checkTyClHdr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766077"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-368"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682766087"><span class="annot"><a href="#local-6989586621682766087"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-type">checkTyVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766075"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682766088"><span class="hs-identifier hs-type">equals_or_where</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766081"><span class="hs-identifier hs-type">tc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766082"><span class="hs-identifier hs-type">tparams</span></a></span><span>
</span><span id="line-369"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766089"><span class="annot"><a href="#local-6989586621682766089"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766074"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766086"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-370"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766090"><span class="annot"><a href="#local-6989586621682766090"><span class="hs-identifier hs-var hs-var">anns'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnnFamilyDecl
</span><a href="#local-6989586621682766080"><span class="hs-identifier hs-var">annsIn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#afd_openp"><span class="hs-identifier hs-var">afd_openp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766084"><span class="hs-identifier hs-type">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#afd_closep"><span class="hs-identifier hs-var">afd_closep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766085"><span class="hs-identifier hs-type">cps</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-371"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766089"><span class="hs-identifier hs-type">loc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamDecl"><span class="hs-identifier hs-type">FamDecl</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamilyDecl"><span class="hs-identifier hs-type">FamilyDecl</span></a></span><span>
</span><span id="line-372"></span><span>                                           </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdExt"><span class="hs-identifier hs-var">fdExt</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766090"><span class="hs-identifier hs-type">anns'</span></a></span><span>
</span><span id="line-373"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdTopLevel"><span class="hs-identifier hs-var">fdTopLevel</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766076"><span class="hs-identifier hs-type">topLevel</span></a></span><span>
</span><span id="line-374"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdInfo"><span class="hs-identifier hs-var">fdInfo</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766075"><span class="hs-identifier hs-type">info</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdLName"><span class="hs-identifier hs-var">fdLName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766081"><span class="hs-identifier hs-type">tc</span></a></span><span>
</span><span id="line-375"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdTyVars"><span class="hs-identifier hs-var">fdTyVars</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766087"><span class="hs-identifier hs-type">tyvars</span></a></span><span>
</span><span id="line-376"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdFixity"><span class="hs-identifier hs-var">fdFixity</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766083"><span class="hs-identifier hs-type">fixity</span></a></span><span>
</span><span id="line-377"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdResultSig"><span class="hs-identifier hs-var">fdResultSig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766078"><span class="hs-identifier hs-type">ksig</span></a></span><span>
</span><span id="line-378"></span><span>                                           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fdInjectivityAnn"><span class="hs-identifier hs-var">fdInjectivityAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766079"><span class="hs-identifier hs-type">injAnn</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621682766088"><span class="annot"><span class="annottext">equals_or_where :: SDoc
</span><a href="#local-6989586621682766088"><span class="hs-identifier hs-var hs-var">equals_or_where</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="#local-6989586621682766075"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-381"></span><span>                        </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#DataFamily"><span class="hs-identifier hs-var">DataFamily</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-382"></span><span>                        </span><span class="annot"><span class="annottext">FamilyInfo GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#OpenTypeFamily"><span class="hs-identifier hs-var">OpenTypeFamily</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-383"></span><span>                        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClosedTypeFamily"><span class="hs-identifier hs-type">ClosedTypeFamily</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Parser.PostProcess.html#whereDots"><span class="hs-identifier hs-var">whereDots</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSpliceDecl"><span class="hs-identifier hs-type">mkSpliceDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- If the user wrote</span><span>
</span><span id="line-387"></span><span class="hs-comment">--      [pads| ... ]   then return a QuasiQuoteD</span><span>
</span><span id="line-388"></span><span class="hs-comment">--      $(e)           then return a SpliceD</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- but if they wrote, say,</span><span>
</span><span id="line-390"></span><span class="hs-comment">--      f x            then behave as if they'd written $(f x)</span><span>
</span><span id="line-391"></span><span class="hs-comment">--                     ie a SpliceD</span><span>
</span><span id="line-392"></span><span class="hs-comment">--</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- Typed splices are not allowed at the top level, thus we do not represent them</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- as spliced declaration.  See #10945</span><span>
</span><span id="line-395"></span><span id="mkSpliceDecl"><span class="annot"><span class="annottext">mkSpliceDecl :: LHsExpr GhcPs -&gt; LHsDecl GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkSpliceDecl"><span class="hs-identifier hs-var hs-var">mkSpliceDecl</span></a></span></span><span> </span><span id="local-6989586621682766107"><span class="annot"><span class="annottext">lexpr :: LHsExpr GhcPs
</span><a href="#local-6989586621682766107"><span class="hs-identifier hs-var">lexpr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766108"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766109"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682766109"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSplice"><span class="hs-identifier hs-type">HsUntypedSplice</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedSplice GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766111"><span class="annot"><span class="annottext">splice :: HsUntypedSplice GhcPs
</span><a href="#local-6989586621682766111"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSpliceExpr"><span class="hs-identifier hs-type">HsUntypedSpliceExpr</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682766109"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs -&gt; SpliceDecl GhcPs -&gt; HsDecl GhcPs
forall p. XSpliceD p -&gt; SpliceDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-var">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
-&gt; XRec GhcPs (HsUntypedSplice GhcPs)
-&gt; SpliceDecoration
-&gt; SpliceDecl GhcPs
forall p.
XSpliceDecl p
-&gt; XRec p (HsUntypedSplice p) -&gt; SpliceDecoration -&gt; SpliceDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-var">SpliceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsUntypedSplice GhcPs
-&gt; GenLocated SrcSpanAnnA (HsUntypedSplice GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682766111"><span class="hs-identifier hs-var">splice</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SpliceDecoration
</span><a href="Language.Haskell.Syntax.Decls.html#DollarSplice"><span class="hs-identifier hs-var">DollarSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSplice"><span class="hs-identifier hs-type">HsUntypedSplice</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedSplice GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766117"><span class="annot"><span class="annottext">splice :: HsUntypedSplice GhcPs
</span><a href="#local-6989586621682766117"><span class="hs-identifier hs-var">splice</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsQuasiQuote"><span class="hs-identifier hs-type">HsQuasiQuote</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682766109"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-400"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs -&gt; SpliceDecl GhcPs -&gt; HsDecl GhcPs
forall p. XSpliceD p -&gt; SpliceDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-var">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
-&gt; XRec GhcPs (HsUntypedSplice GhcPs)
-&gt; SpliceDecoration
-&gt; SpliceDecl GhcPs
forall p.
XSpliceDecl p
-&gt; XRec p (HsUntypedSplice p) -&gt; SpliceDecoration -&gt; SpliceDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-var">SpliceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsUntypedSplice GhcPs
-&gt; GenLocated SrcSpanAnnA (HsUntypedSplice GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682766117"><span class="hs-identifier hs-var">splice</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SpliceDecoration
</span><a href="Language.Haskell.Syntax.Decls.html#DollarSplice"><span class="hs-identifier hs-var">DollarSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-403"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs -&gt; SpliceDecl GhcPs -&gt; HsDecl GhcPs
forall p. XSpliceD p -&gt; SpliceDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-var">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
-&gt; XRec GhcPs (HsUntypedSplice GhcPs)
-&gt; SpliceDecoration
-&gt; SpliceDecl GhcPs
forall p.
XSpliceDecl p
-&gt; XRec p (HsUntypedSplice p) -&gt; SpliceDecoration -&gt; SpliceDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SpliceDecl"><span class="hs-identifier hs-var">SpliceDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceDecl GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-404"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsUntypedSplice GhcPs
-&gt; GenLocated SrcSpanAnnA (HsUntypedSplice GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766108"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XUntypedSpliceExpr GhcPs -&gt; LHsExpr GhcPs -&gt; HsUntypedSplice GhcPs
forall id.
XUntypedSpliceExpr id -&gt; LHsExpr id -&gt; HsUntypedSplice id
</span><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSpliceExpr"><span class="hs-identifier hs-var">HsUntypedSpliceExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XUntypedSpliceExpr GhcPs
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l l2 a.
(HasLoc l, HasAnnotation l2) =&gt;
GenLocated l a -&gt; GenLocated l2 a
</span><a href="GHC.Parser.Annotation.html#la2la"><span class="hs-identifier hs-var">la2la</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766107"><span class="hs-identifier hs-var">lexpr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>                                       </span><span class="annot"><span class="annottext">SpliceDecoration
</span><a href="Language.Haskell.Syntax.Decls.html#BareSplice"><span class="hs-identifier hs-var">BareSplice</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRoleAnnotDecl"><span class="hs-identifier hs-type">mkRoleAnnotDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-408"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>                </span><span class="hs-comment">-- type being annotated</span><span>
</span><span id="line-409"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- roles</span><span>
</span><span id="line-410"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;role&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRoleAnnotDecl"><span class="hs-identifier hs-type">LRoleAnnotDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span id="mkRoleAnnotDecl"><span class="annot"><span class="annottext">mkRoleAnnotDecl :: SrcSpan
-&gt; LocatedN RdrName
-&gt; [Located (Maybe FastString)]
-&gt; (EpToken &quot;type&quot;, EpToken &quot;role&quot;)
-&gt; P (LRoleAnnotDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRoleAnnotDecl"><span class="hs-identifier hs-var hs-var">mkRoleAnnotDecl</span></a></span></span><span> </span><span id="local-6989586621682766121"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766121"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766122"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766122"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span id="local-6989586621682766123"><span class="annot"><span class="annottext">[Located (Maybe FastString)]
</span><a href="#local-6989586621682766123"><span class="hs-identifier hs-var">roles</span></a></span></span><span> </span><span id="local-6989586621682766124"><span class="annot"><span class="annottext">(EpToken &quot;type&quot;, EpToken &quot;role&quot;)
</span><a href="#local-6989586621682766124"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682766125"><span class="annot"><a href="#local-6989586621682766125"><span class="hs-identifier hs-var">roles'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Located (Maybe FastString) -&gt; P (GenLocated EpAnnCO (Maybe Role)))
-&gt; [Located (Maybe FastString)]
-&gt; P [GenLocated EpAnnCO (Maybe Role)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Located (Maybe FastString) -&gt; P (GenLocated EpAnnCO (Maybe Role))
</span><a href="#local-6989586621682766126"><span class="hs-identifier hs-var">parse_role</span></a></span><span> </span><span class="annot"><span class="annottext">[Located (Maybe FastString)]
</span><a href="#local-6989586621682766123"><span class="hs-identifier hs-var">roles</span></a></span><span>
</span><span id="line-414"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682766127"><span class="annot"><a href="#local-6989586621682766127"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766121"><span class="hs-identifier hs-type">loc</span></a></span><span>
</span><span id="line-415"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766121"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766127"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>         </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RoleAnnotDecl"><span class="hs-identifier hs-type">RoleAnnotDecl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766124"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766122"><span class="hs-identifier hs-type">tycon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766125"><span class="hs-identifier hs-type">roles'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-417"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-418"></span><span>    </span><span id="local-6989586621682766133"><span class="annot"><span class="annottext">role_data_type :: DataType
</span><a href="#local-6989586621682766133"><span class="hs-identifier hs-var hs-var">role_data_type</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Role -&gt; DataType
forall a. Data a =&gt; a -&gt; DataType
</span><span class="hs-identifier hs-var">dataTypeOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role
forall a. HasCallStack =&gt; a
</span><span class="hs-identifier hs-var">undefined</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>    </span><span id="local-6989586621682766137"><span class="annot"><span class="annottext">all_roles :: [Role]
</span><a href="#local-6989586621682766137"><span class="hs-identifier hs-var hs-var">all_roles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Constr -&gt; Role) -&gt; [Constr] -&gt; [Role]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Constr -&gt; Role
forall a. Data a =&gt; Constr -&gt; a
</span><span class="hs-identifier hs-var">fromConstr</span></span><span> </span><span class="annot"><span class="annottext">([Constr] -&gt; [Role]) -&gt; [Constr] -&gt; [Role]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DataType -&gt; [Constr]
</span><span class="hs-identifier hs-var">dataTypeConstrs</span></span><span> </span><span class="annot"><span class="annottext">DataType
</span><a href="#local-6989586621682766133"><span class="hs-identifier hs-var">role_data_type</span></a></span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621682766138"><span class="annot"><span class="annottext">possible_roles :: [(FastString, Role)]
</span><a href="#local-6989586621682766138"><span class="hs-identifier hs-var hs-var">possible_roles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; FastString
</span><a href="GHC.Core.Coercion.Axiom.html#fsFromRole"><span class="hs-identifier hs-var">fsFromRole</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621682766139"><span class="hs-keyword hs-var">role</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621682766139"><span class="hs-keyword hs-var">role</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682766139"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621682766139"><span class="hs-keyword hs-var">role</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621682766137"><span class="hs-identifier hs-var">all_roles</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621682766126"><span class="annot"><span class="annottext">parse_role :: Located (Maybe FastString) -&gt; P (GenLocated EpAnnCO (Maybe Role))
</span><a href="#local-6989586621682766126"><span class="hs-identifier hs-var hs-var">parse_role</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766140"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766140"><span class="hs-identifier hs-var">loc_role</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe FastString
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated EpAnnCO (Maybe Role)
-&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (Maybe Role)
 -&gt; P (GenLocated EpAnnCO (Maybe Role)))
-&gt; GenLocated EpAnnCO (Maybe Role)
-&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnnCO -&gt; Maybe Role -&gt; GenLocated EpAnnCO (Maybe Role)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnnCO
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766140"><span class="hs-identifier hs-var">loc_role</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Role
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-423"></span><span>    </span><span class="annot"><a href="#local-6989586621682766126"><span class="hs-identifier hs-var">parse_role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766141"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766141"><span class="hs-identifier hs-var">loc_role</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766142"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682766142"><span class="hs-keyword hs-var">role</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; [(FastString, Role)] -&gt; Maybe Role
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682766142"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="annot"><span class="annottext">[(FastString, Role)]
</span><a href="#local-6989586621682766138"><span class="hs-identifier hs-var">possible_roles</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-425"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766144"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621682766144"><span class="hs-identifier hs-var">found_role</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated EpAnnCO (Maybe Role)
-&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated EpAnnCO (Maybe Role)
 -&gt; P (GenLocated EpAnnCO (Maybe Role)))
-&gt; GenLocated EpAnnCO (Maybe Role)
-&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnnCO -&gt; Maybe Role -&gt; GenLocated EpAnnCO (Maybe Role)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnnCO
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766141"><span class="hs-identifier hs-var">loc_role</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Role -&gt; GenLocated EpAnnCO (Maybe Role))
-&gt; Maybe Role -&gt; GenLocated EpAnnCO (Maybe Role)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Role -&gt; Maybe Role
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621682766144"><span class="hs-identifier hs-var">found_role</span></a></span><span>
</span><span id="line-426"></span><span>          </span><span class="annot"><span class="annottext">Maybe Role
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-427"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766145"><span class="annot"><span class="annottext">nearby :: [Role]
</span><a href="#local-6989586621682766145"><span class="hs-identifier hs-var hs-var">nearby</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [(String, Role)] -&gt; [Role]
forall a. String -&gt; [(String, a)] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#fuzzyLookup"><span class="hs-identifier hs-var">fuzzyLookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682766142"><span class="hs-keyword hs-var">role</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FastString -&gt; String) -&gt; [(FastString, Role)] -&gt; [(String, Role)]
forall (f :: * -&gt; *) a c b.
Functor f =&gt;
(a -&gt; c) -&gt; f (a, b) -&gt; f (c, b)
</span><a href="GHC.Utils.Misc.html#mapFst"><span class="hs-identifier hs-var">mapFst</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="annot"><span class="annottext">[(FastString, Role)]
</span><a href="#local-6989586621682766138"><span class="hs-identifier hs-var">possible_roles</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-429"></span><span>            </span><span class="hs-keyword">in</span><span>
</span><span id="line-430"></span><span>            </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (GenLocated EpAnnCO (Maybe Role)))
-&gt; MsgEnvelope PsMessage -&gt; P (GenLocated EpAnnCO (Maybe Role))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766141"><span class="hs-identifier hs-var">loc_role</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-431"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; [Role] -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalRoleName"><span class="hs-identifier hs-var">PsErrIllegalRoleName</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682766142"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621682766145"><span class="hs-identifier hs-var">nearby</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMDo"><span class="hs-identifier hs-type">mkMDo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDoFlavour"><span class="hs-identifier hs-type">HsDoFlavour</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprLStmt"><span class="hs-identifier hs-type">ExprLStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-434"></span><span id="mkMDo"><span class="annot"><span class="annottext">mkMDo :: HsDoFlavour
-&gt; LocatedLW [ExprLStmt GhcPs]
-&gt; EpaLocation
-&gt; EpaLocation
-&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkMDo"><span class="hs-identifier hs-var hs-var">mkMDo</span></a></span></span><span> </span><span id="local-6989586621682766150"><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621682766150"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682766151"><span class="annot"><span class="annottext">LocatedLW [ExprLStmt GhcPs]
</span><a href="#local-6989586621682766151"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621682766152"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766152"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span id="local-6989586621682766153"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766153"><span class="hs-identifier hs-var">loc</span></a></span></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
-&gt; LocatedLW [ExprLStmt GhcPs]
-&gt; AnnList EpaLocation
-&gt; HsExpr GhcPs
</span><a href="GHC.Hs.Utils.html#mkHsDoAnns"><span class="hs-identifier hs-var">mkHsDoAnns</span></a></span><span> </span><span class="annot"><span class="annottext">HsDoFlavour
</span><a href="#local-6989586621682766150"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedLW [ExprLStmt GhcPs]
</span><a href="#local-6989586621682766151"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpaLocation
-&gt; AnnListBrackets
-&gt; [EpToken &quot;;&quot;]
-&gt; EpaLocation
-&gt; [TrailingAnn]
-&gt; AnnList EpaLocation
forall a.
Maybe EpaLocation
-&gt; AnnListBrackets
-&gt; [EpToken &quot;;&quot;]
-&gt; a
-&gt; [TrailingAnn]
-&gt; AnnList a
</span><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-var">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; Maybe EpaLocation
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766153"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListBrackets
</span><a href="GHC.Parser.Annotation.html#ListNone"><span class="hs-identifier hs-var">ListNone</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766152"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-comment">-- | Converts a list of 'LHsTyVarBndr's annotated with their 'Specificity' to</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- binders without annotations. Only accepts specified variables, and errors if</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- any of the provided binders has an 'InferredSpec' annotation.</span><span>
</span><span id="line-440"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndrs"><span class="hs-identifier hs-type">fromSpecTyVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Specificity"><span class="hs-identifier hs-type">Specificity</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-441"></span><span id="fromSpecTyVarBndrs"><span class="annot"><span class="annottext">fromSpecTyVarBndrs :: [LHsTyVarBndr Specificity GhcPs] -&gt; P [LHsTyVarBndr () GhcPs]
</span><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndrs"><span class="hs-identifier hs-var hs-var">fromSpecTyVarBndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)
 -&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
-&gt; P [GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsTyVarBndr Specificity GhcPs -&gt; P (LHsTyVarBndr () GhcPs)
GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
</span><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndr"><span class="hs-identifier hs-var">fromSpecTyVarBndr</span></a></span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-comment">-- | Converts 'LHsTyVarBndr' annotated with its 'Specificity' to one without</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- annotations. Only accepts specified variables, and errors if the provided</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- binder has an 'InferredSpec' annotation.</span><span>
</span><span id="line-446"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndr"><span class="hs-identifier hs-type">fromSpecTyVarBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Specificity"><span class="hs-identifier hs-type">Specificity</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span id="fromSpecTyVarBndr"><span class="annot"><span class="annottext">fromSpecTyVarBndr :: LHsTyVarBndr Specificity GhcPs -&gt; P (LHsTyVarBndr () GhcPs)
</span><a href="GHC.Parser.PostProcess.html#fromSpecTyVarBndr"><span class="hs-identifier hs-var hs-var">fromSpecTyVarBndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766158"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766158"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-type">HsTvb</span></a></span><span> </span><span id="local-6989586621682766160"><span class="annot"><span class="annottext">XTyVarBndr GhcPs
</span><a href="#local-6989586621682766160"><span class="hs-identifier hs-var">xtv</span></a></span></span><span> </span><span id="local-6989586621682766161"><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621682766161"><span class="hs-identifier hs-var">flag</span></a></span></span><span> </span><span id="local-6989586621682766162"><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766162"><span class="hs-identifier hs-var">idp</span></a></span></span><span> </span><span id="local-6989586621682766163"><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621682766163"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621682766161"><span class="hs-identifier hs-var">flag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-449"></span><span>    </span><span class="annot"><span class="annottext">Specificity
</span><a href="Language.Haskell.Syntax.Specificity.html#SpecifiedSpec"><span class="hs-identifier hs-var">SpecifiedSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; P ()
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>    </span><span class="annot"><span class="annottext">Specificity
</span><a href="Language.Haskell.Syntax.Specificity.html#InferredSpec"><span class="hs-identifier hs-var">InferredSpec</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766158"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-451"></span><span>                                     </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInferredTypeVarNotAllowed"><span class="hs-identifier hs-var">PsErrInferredTypeVarNotAllowed</span></a></span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
 -&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr () GhcPs
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766158"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
-&gt; ()
-&gt; HsBndrVar GhcPs
-&gt; HsBndrKind GhcPs
-&gt; HsTyVarBndr () GhcPs
forall flag pass.
XTyVarBndr pass
-&gt; flag
-&gt; HsBndrVar pass
-&gt; HsBndrKind pass
-&gt; HsTyVarBndr flag pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-var">HsTvb</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
</span><a href="#local-6989586621682766160"><span class="hs-identifier hs-var">xtv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766162"><span class="hs-identifier hs-var">idp</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621682766163"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="annot"><span class="hs-comment">-- | Add the annotation for a 'where' keyword to existing @HsLocalBinds@</span></span><span>
</span><span id="line-455"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#annBinds"><span class="hs-identifier hs-type">annBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span id="annBinds"><span class="annot"><span class="annottext">annBinds :: EpToken &quot;where&quot;
-&gt; EpAnnComments
-&gt; HsLocalBinds GhcPs
-&gt; (HsLocalBinds GhcPs, Maybe EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#annBinds"><span class="hs-identifier hs-var hs-var">annBinds</span></a></span></span><span> </span><span id="local-6989586621682766167"><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><a href="#local-6989586621682766167"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682766168"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766168"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span id="local-6989586621682766170"><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
</span><a href="#local-6989586621682766170"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682766171"><span class="annot"><span class="annottext">HsValBindsLR GhcPs GhcPs
</span><a href="#local-6989586621682766171"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
-&gt; HsValBindsLR GhcPs GhcPs -&gt; HsLocalBinds GhcPs
forall idL idR.
XHsValBinds idL idR
-&gt; HsValBindsLR idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-var">HsValBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;where&quot; -&gt; SrcSpanAnnLW -&gt; EpAnnComments -&gt; SrcSpanAnnLW
</span><a href="GHC.Parser.PostProcess.html#add_where"><span class="hs-identifier hs-var">add_where</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><a href="#local-6989586621682766167"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">XHsValBinds GhcPs GhcPs
SrcSpanAnnLW
</span><a href="#local-6989586621682766170"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766168"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsValBindsLR GhcPs GhcPs
</span><a href="#local-6989586621682766171"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnComments
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#annBinds"><span class="hs-identifier hs-var">annBinds</span></a></span><span> </span><span id="local-6989586621682766173"><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><a href="#local-6989586621682766173"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621682766174"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766174"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-type">HsIPBinds</span></a></span><span> </span><span id="local-6989586621682766176"><span class="annot"><span class="annottext">XHsIPBinds GhcPs GhcPs
</span><a href="#local-6989586621682766176"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682766177"><span class="annot"><span class="annottext">HsIPBinds GhcPs
</span><a href="#local-6989586621682766177"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XHsIPBinds GhcPs GhcPs -&gt; HsIPBinds GhcPs -&gt; HsLocalBinds GhcPs
forall idL idR.
XHsIPBinds idL idR -&gt; HsIPBinds idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#HsIPBinds"><span class="hs-identifier hs-var">HsIPBinds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;where&quot; -&gt; SrcSpanAnnLW -&gt; EpAnnComments -&gt; SrcSpanAnnLW
</span><a href="GHC.Parser.PostProcess.html#add_where"><span class="hs-identifier hs-var">add_where</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><a href="#local-6989586621682766173"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">XHsIPBinds GhcPs GhcPs
SrcSpanAnnLW
</span><a href="#local-6989586621682766176"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766174"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsIPBinds GhcPs
</span><a href="#local-6989586621682766177"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnComments
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#annBinds"><span class="hs-identifier hs-var">annBinds</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766178"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766178"><span class="hs-identifier hs-var">cs</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-type">EmptyLocalBinds</span></a></span><span> </span><span id="local-6989586621682766180"><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs
</span><a href="#local-6989586621682766180"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs -&gt; HsLocalBinds GhcPs
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcPs GhcPs
</span><a href="#local-6989586621682766180"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; Maybe EpAnnComments
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766178"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#add_where"><span class="hs-identifier hs-type">add_where</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-type">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-type">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span id="add_where"><span class="annot"><span class="annottext">add_where :: EpToken &quot;where&quot; -&gt; SrcSpanAnnLW -&gt; EpAnnComments -&gt; SrcSpanAnnLW
</span><a href="GHC.Parser.PostProcess.html#add_where"><span class="hs-identifier hs-var hs-var">add_where</span></a></span></span><span> </span><span id="local-6989586621682766181"><span class="annot"><span class="annottext">w :: EpToken &quot;where&quot;
</span><a href="#local-6989586621682766181"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766185"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766185"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766186"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766186"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682766187"><span class="annot"><span class="annottext">AnnList (EpToken &quot;where&quot;)
</span><a href="#local-6989586621682766187"><span class="hs-identifier hs-var">al</span></a></span></span><span> </span><span id="local-6989586621682766188"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766188"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766189"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766189"><span class="hs-identifier hs-var">cs2</span></a></span></span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#valid_anchor"><span class="hs-identifier hs-var">valid_anchor</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766186"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
-&gt; AnnList (EpToken &quot;where&quot;) -&gt; EpAnnComments -&gt; SrcSpanAnnLW
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;where&quot; -&gt; EpaLocation
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#widenAnchorT"><span class="hs-identifier hs-var">widenAnchorT</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766186"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><a href="#local-6989586621682766181"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnList (EpToken &quot;where&quot;)
</span><a href="#local-6989586621682766187"><span class="hs-identifier hs-var">al</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#al_rest"><span class="hs-identifier hs-var">al_rest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766181"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766188"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766189"><span class="hs-identifier hs-var">cs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
-&gt; AnnList (EpToken &quot;where&quot;) -&gt; EpAnnComments -&gt; SrcSpanAnnLW
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; EpaLocation -&gt; EpaLocation
</span><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-var">patch_anchor</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766185"><span class="hs-identifier hs-var">rs</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766186"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnnList (EpToken &quot;where&quot;)
</span><a href="#local-6989586621682766187"><span class="hs-identifier hs-var">al</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#al_anchor"><span class="hs-identifier hs-var">al_anchor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-type">patch_anchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766185"><span class="hs-identifier hs-type">rs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#al_anchor"><span class="hs-identifier hs-var">al_anchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766187"><span class="hs-identifier hs-type">al</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#al_rest"><span class="hs-identifier hs-var">al_rest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766181"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766188"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766189"><span class="hs-identifier hs-var">cs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#add_where"><span class="hs-identifier hs-var">add_where</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;where&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SrcSpanAnnLW
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;add_where&quot;</span></span><span>
</span><span id="line-471"></span><span> </span><span class="hs-comment">-- EpaDelta should only be used for transformations</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#valid_anchor"><span class="hs-identifier hs-type">valid_anchor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-474"></span><span id="valid_anchor"><span class="annot"><span class="annottext">valid_anchor :: EpaLocation -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#valid_anchor"><span class="hs-identifier hs-var hs-var">valid_anchor</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766195"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766195"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartLine"><span class="hs-identifier hs-var">srcSpanStartLine</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766195"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-475"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#valid_anchor"><span class="hs-identifier hs-var">valid_anchor</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="hs-comment">-- If the decl list for where binds is empty, the anchor ends up</span><span>
</span><span id="line-478"></span><span class="hs-comment">-- invalid. In this case, use the parent one</span><span>
</span><span id="line-479"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-type">patch_anchor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span>
</span><span id="line-480"></span><span id="patch_anchor"><span class="annot"><span class="annottext">patch_anchor :: RealSrcSpan -&gt; EpaLocation -&gt; EpaLocation
</span><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-var hs-var">patch_anchor</span></a></span></span><span> </span><span id="local-6989586621682766197"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766197"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaDelta"><span class="hs-identifier hs-type">EpaDelta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766197"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
forall a. Maybe a
</span><a href="GHC.Data.Strict.html#Nothing"><span class="hs-identifier hs-var">Strict.Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-var">patch_anchor</span></a></span><span> </span><span id="local-6989586621682766200"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766200"><span class="hs-identifier hs-var">r1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766201"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766201"><span class="hs-identifier hs-var">r0</span></a></span></span><span> </span><span id="local-6989586621682766202"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766202"><span class="hs-identifier hs-var">mb</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766203"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766202"><span class="hs-identifier hs-var">mb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>    </span><span id="local-6989586621682766203"><span class="annot"><span class="annottext">r :: RealSrcSpan
</span><a href="#local-6989586621682766203"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartLine"><span class="hs-identifier hs-var">srcSpanStartLine</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766201"><span class="hs-identifier hs-var">r0</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766200"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766201"><span class="hs-identifier hs-var">r0</span></a></span><span>
</span><span id="line-484"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#patch_anchor"><span class="hs-identifier hs-var">patch_anchor</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span id="local-6989586621682766205"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766205"><span class="hs-identifier hs-var">ss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766205"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-comment">-- | The anchor for a stmtlist is based on either the location or</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- the first semicolon annotion.</span><span>
</span><span id="line-488"></span><span id="local-6989586621682764444"><span id="local-6989586621682764445"><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsAnchor"><span class="hs-identifier hs-type">stmtsAnchor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764444"><span class="hs-identifier hs-type">tok</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621682764445"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span></span></span><span>
</span><span id="line-489"></span><span id="stmtsAnchor"><span class="annot"><span class="annottext">stmtsAnchor :: forall (tok :: Symbol) a.
Located (OrdList (EpToken tok), a) -&gt; Maybe EpaLocation
</span><a href="GHC.Parser.PostProcess.html#stmtsAnchor"><span class="hs-identifier hs-var hs-var">stmtsAnchor</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766206"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766206"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682766207"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766207"><span class="hs-identifier hs-var">mb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#ConsOL"><span class="hs-identifier hs-type">ConsOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766209"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766209"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682766210"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766210"><span class="hs-identifier hs-var">rb</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OrdList (EpToken tok)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; Maybe EpaLocation
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(EpaLocation -&gt; Maybe EpaLocation)
-&gt; EpaLocation -&gt; Maybe EpaLocation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; SrcSpan -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#widenAnchorS"><span class="hs-identifier hs-var">widenAnchorS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766206"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766207"><span class="hs-identifier hs-var">mb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766209"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766210"><span class="hs-identifier hs-var">rb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsAnchor"><span class="hs-identifier hs-var">stmtsAnchor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682766212"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766212"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682766213"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766213"><span class="hs-identifier hs-var">mb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(OrdList (EpToken tok), a)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; Maybe EpaLocation
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(EpaLocation -&gt; Maybe EpaLocation)
-&gt; EpaLocation -&gt; Maybe EpaLocation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682766212"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682766213"><span class="hs-identifier hs-var">mb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsAnchor"><span class="hs-identifier hs-var">stmtsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (OrdList (EpToken tok), a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EpaLocation
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span id="local-6989586621682764448"><span id="local-6989586621682764449"><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsLoc"><span class="hs-identifier hs-type">stmtsLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764448"><span class="hs-identifier hs-type">tok</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621682764449"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span></span></span><span>
</span><span id="line-495"></span><span id="stmtsLoc"><span class="annot"><span class="annottext">stmtsLoc :: forall (tok :: Symbol) a.
Located (OrdList (EpToken tok), a) -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.html#stmtsLoc"><span class="hs-identifier hs-var hs-var">stmtsLoc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766214"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766214"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#ConsOL"><span class="hs-identifier hs-type">ConsOL</span></a></span><span> </span><span id="local-6989586621682766215"><span class="annot"><span class="annottext">EpToken tok
</span><a href="#local-6989586621682766215"><span class="hs-identifier hs-var">aa</span></a></span></span><span> </span><span class="annot"><span class="annottext">OrdList (EpToken tok)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpToken tok -&gt; SrcSpan
forall (tok :: Symbol). SrcSpan -&gt; EpToken tok -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#widenSpanT"><span class="hs-identifier hs-var">widenSpanT</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766214"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken tok
</span><a href="#local-6989586621682766215"><span class="hs-identifier hs-var">aa</span></a></span><span>
</span><span id="line-497"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#stmtsLoc"><span class="hs-identifier hs-var">stmtsLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766217"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766217"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">(OrdList (EpToken tok), a)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766217"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span class="annot"><span class="hs-comment">{- **********************************************************************

  #cvBinds-etc# Converting to @HsBinds@, etc.

  ********************************************************************* -}</span></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="hs-comment">-- | Function definitions are restructured here. Each is assumed to be recursive</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- initially, and non recursive definitions are discovered by the dependency</span><span>
</span><span id="line-507"></span><span class="hs-comment">-- analyser.</span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span class="hs-comment">--  | Groups together bindings for a single function</span><span>
</span><span id="line-511"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvTopDecls"><span class="hs-identifier hs-type">cvTopDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-512"></span><span id="cvTopDecls"><span class="annot"><span class="annottext">cvTopDecls :: OrdList (LHsDecl GhcPs) -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.html#cvTopDecls"><span class="hs-identifier hs-var hs-var">cvTopDecls</span></a></span></span><span> </span><span id="local-6989586621682766218"><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682766218"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs] -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var">getMonoBindAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
</span><a href="#local-6989586621682766218"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span class="hs-comment">-- Declaration list may only contain value bindings and signatures.</span><span>
</span><span id="line-515"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvBindGroup"><span class="hs-identifier hs-type">cvBindGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsValBinds"><span class="hs-identifier hs-type">HsValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span id="cvBindGroup"><span class="annot"><span class="annottext">cvBindGroup :: OrdList (LHsDecl GhcPs) -&gt; P (HsValBindsLR GhcPs GhcPs)
</span><a href="GHC.Parser.PostProcess.html#cvBindGroup"><span class="hs-identifier hs-var hs-var">cvBindGroup</span></a></span></span><span> </span><span id="local-6989586621682766222"><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682766222"><span class="hs-identifier hs-var">binding</span></a></span></span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766223"><span class="annot"><a href="#local-6989586621682766223"><span class="hs-identifier hs-var">mbs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766224"><span class="annot"><a href="#local-6989586621682766224"><span class="hs-identifier hs-var">sigs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766225"><span class="annot"><a href="#local-6989586621682766225"><span class="hs-identifier hs-var">fam_ds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766226"><span class="annot"><a href="#local-6989586621682766226"><span class="hs-identifier hs-var">tfam_insts</span></a></span></span><span>
</span><span id="line-518"></span><span>         </span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766227"><span class="annot"><a href="#local-6989586621682766227"><span class="hs-identifier hs-var">dfam_insts</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
-&gt; P (LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
      [LTyFamInstDecl GhcPs], [LDataFamInstDecl GhcPs], [LDocDecl GhcPs])
</span><a href="GHC.Parser.PostProcess.html#cvBindsAndSigs"><span class="hs-identifier hs-var">cvBindsAndSigs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682766222"><span class="hs-identifier hs-var">binding</span></a></span><span>
</span><span id="line-519"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html#massert"><span class="hs-identifier hs-type">massert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621682766225"><span class="hs-identifier hs-type">fam_ds</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621682766226"><span class="hs-identifier hs-type">tfam_insts</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621682766227"><span class="hs-identifier hs-type">dfam_insts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-520"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ValBinds"><span class="hs-identifier hs-type">ValBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoAnnSortKey"><span class="hs-identifier hs-type">NoAnnSortKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766223"><span class="hs-identifier hs-type">mbs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766224"><span class="hs-identifier hs-type">sigs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#cvBindsAndSigs"><span class="hs-identifier hs-type">cvBindsAndSigs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyDecl"><span class="hs-identifier hs-type">LFamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-524"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyFamInstDecl"><span class="hs-identifier hs-type">LTyFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDataFamInstDecl"><span class="hs-identifier hs-type">LDataFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDocDecl"><span class="hs-identifier hs-type">LDocDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- Input decls contain just value bindings and signatures</span><span>
</span><span id="line-526"></span><span class="hs-comment">-- and in case of class or instance declarations also</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- associated type declarations. They might also contain Haddock comments.</span><span>
</span><span id="line-528"></span><span id="cvBindsAndSigs"><span class="annot"><span class="annottext">cvBindsAndSigs :: OrdList (LHsDecl GhcPs)
-&gt; P (LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
      [LTyFamInstDecl GhcPs], [LDataFamInstDecl GhcPs], [LDocDecl GhcPs])
</span><a href="GHC.Parser.PostProcess.html#cvBindsAndSigs"><span class="hs-identifier hs-var hs-var">cvBindsAndSigs</span></a></span></span><span> </span><span id="local-6989586621682766231"><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682766231"><span class="hs-identifier hs-var">fb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-529"></span><span>  </span><span id="local-6989586621682766232"><span class="annot"><a href="#local-6989586621682766232"><span class="hs-identifier hs-var">fb'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; P [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall {m :: * -&gt; *} {a}.
(MonadP m, HasLoc a) =&gt;
[GenLocated a (HsDecl GhcPs)] -&gt; m [GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766233"><span class="hs-identifier hs-var">drop_bad_decls</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
</span><a href="#local-6989586621682766231"><span class="hs-identifier hs-var">fb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Decls.html#partitionBindsAndSigs"><span class="hs-identifier hs-type">partitionBindsAndSigs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-type">getMonoBindAll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766232"><span class="hs-identifier hs-type">fb'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-532"></span><span>    </span><span class="hs-comment">-- cvBindsAndSigs is called in several places in the parser,</span><span>
</span><span id="line-533"></span><span>    </span><span class="hs-comment">-- and its items can be produced by various productions:</span><span>
</span><span id="line-534"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-535"></span><span>    </span><span class="hs-comment">--    * decl       (when parsing a where clause or a let-expression)</span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-comment">--    * decl_inst  (when parsing an instance declaration)</span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-comment">--    * decl_cls   (when parsing a class declaration)</span><span>
</span><span id="line-538"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-comment">-- partitionBindsAndSigs can handle almost all declaration forms produced</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-comment">-- by the aforementioned productions, except for SpliceD, which we filter</span><span>
</span><span id="line-541"></span><span>    </span><span class="hs-comment">-- out here (in drop_bad_decls).</span><span>
</span><span id="line-542"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-comment">-- We're not concerned with every declaration form possible, such as those</span><span>
</span><span id="line-544"></span><span>    </span><span class="hs-comment">-- produced by the topdecl parser production, because cvBindsAndSigs is not</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-comment">-- called on top-level declarations.</span><span>
</span><span id="line-546"></span><span>    </span><span id="local-6989586621682766233"><span class="annot"><span class="annottext">drop_bad_decls :: [GenLocated a (HsDecl GhcPs)] -&gt; m [GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766233"><span class="hs-identifier hs-var hs-var">drop_bad_decls</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)] -&gt; m [GenLocated a (HsDecl GhcPs)]
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-547"></span><span>    </span><span class="annot"><a href="#local-6989586621682766233"><span class="hs-identifier hs-var">drop_bad_decls</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766251"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766251"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SpliceD"><span class="hs-identifier hs-type">SpliceD</span></a></span><span> </span><span class="annot"><span class="annottext">XSpliceD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766252"><span class="annot"><span class="annottext">SpliceDecl GhcPs
</span><a href="#local-6989586621682766252"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682766253"><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766253"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-548"></span><span>      </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; m ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; m ()) -&gt; MsgEnvelope PsMessage -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766251"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SpliceDecl GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrDeclSpliceNotAtTopLevel"><span class="hs-identifier hs-var">PsErrDeclSpliceNotAtTopLevel</span></a></span><span> </span><span class="annot"><span class="annottext">SpliceDecl GhcPs
</span><a href="#local-6989586621682766252"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-549"></span><span>      </span><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)] -&gt; m [GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766233"><span class="hs-identifier hs-var">drop_bad_decls</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766253"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-550"></span><span>    </span><span class="annot"><a href="#local-6989586621682766233"><span class="hs-identifier hs-var">drop_bad_decls</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766256"><span class="annot"><span class="annottext">GenLocated a (HsDecl GhcPs)
</span><a href="#local-6989586621682766256"><span class="hs-identifier hs-var">d</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682766257"><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766257"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated a (HsDecl GhcPs)
</span><a href="#local-6989586621682766256"><span class="hs-identifier hs-var">d</span></a></span><span class="annot"><span class="annottext">GenLocated a (HsDecl GhcPs)
-&gt; [GenLocated a (HsDecl GhcPs)] -&gt; [GenLocated a (HsDecl GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([GenLocated a (HsDecl GhcPs)] -&gt; [GenLocated a (HsDecl GhcPs)])
-&gt; m [GenLocated a (HsDecl GhcPs)]
-&gt; m [GenLocated a (HsDecl GhcPs)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)] -&gt; m [GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766233"><span class="hs-identifier hs-var">drop_bad_decls</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated a (HsDecl GhcPs)]
</span><a href="#local-6989586621682766257"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-551"></span><span>
</span><span id="line-552"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- Group function bindings into equation groups</span><span>
</span><span id="line-554"></span><span>
</span><span id="line-555"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBind"><span class="hs-identifier hs-type">getMonoBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- Suppose      (b',ds') = getMonoBind b ds</span><span>
</span><span id="line-558"></span><span class="hs-comment">--      ds is a list of parsed bindings</span><span>
</span><span id="line-559"></span><span class="hs-comment">--      b is a MonoBinds that has just been read off the front</span><span>
</span><span id="line-560"></span><span>
</span><span id="line-561"></span><span class="hs-comment">-- Then b' is the result of grouping more equations from ds that</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- belong with b into a single MonoBinds, and ds' is the depleted</span><span>
</span><span id="line-563"></span><span class="hs-comment">-- list of parsed bindings.</span><span>
</span><span id="line-564"></span><span class="hs-comment">--</span><span>
</span><span id="line-565"></span><span class="hs-comment">-- All Haddock comments between equations inside the group are</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- discarded.</span><span>
</span><span id="line-567"></span><span class="hs-comment">--</span><span>
</span><span id="line-568"></span><span class="hs-comment">-- No AndMonoBinds or EmptyMonoBinds here; just single equations</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span id="getMonoBind"><span class="annot"><span class="annottext">getMonoBind :: LHsBind GhcPs
-&gt; [LHsDecl GhcPs] -&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="GHC.Parser.PostProcess.html#getMonoBind"><span class="hs-identifier hs-var hs-var">getMonoBind</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766260"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766260"><span class="hs-identifier hs-var">loc1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682766263"><span class="annot"><span class="annottext">fun_id1 :: XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682766263"><span class="hs-identifier hs-var">fun_id1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766264"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766264"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-572"></span><span>                               </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766268"><span class="annot"><span class="annottext">m1 :: [GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766268"><span class="hs-identifier hs-var">m1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766269"><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766269"><span class="hs-identifier hs-var">mtchs1</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>            </span><span id="local-6989586621682766270"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766270"><span class="hs-identifier hs-var">binds</span></a></span></span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)] -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#has_args"><span class="hs-identifier hs-var">has_args</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766268"><span class="hs-identifier hs-var">m1</span></a></span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
-&gt; SrcSpanAnnA
-&gt; [LHsDecl GhcPs]
-&gt; [LHsDecl GhcPs]
-&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="#local-6989586621682766272"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766260"><span class="hs-identifier hs-var">loc1</span></a></span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766269"><span class="hs-identifier hs-var">mtchs1</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpanAnnA) -&gt; SrcSpan -&gt; SrcSpanAnnA
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766260"><span class="hs-identifier hs-var">loc1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766270"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-comment">-- See Note [Exact Print Annotations for FunBind]</span><span>
</span><span id="line-578"></span><span>    </span><span class="annot"><a href="#local-6989586621682766272"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- accumulates matches for current fun</span><span>
</span><span id="line-579"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>                    </span><span class="hs-comment">-- current top level loc</span><span>
</span><span id="line-580"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>                </span><span class="hs-comment">-- Any docbinds seen</span><span>
</span><span id="line-581"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>                </span><span class="hs-comment">-- rest of decls to be processed</span><span>
</span><span id="line-582"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- FunBind, rest of decls</span><span>
</span><span id="line-583"></span><span>    </span><span id="local-6989586621682766272"><span class="annot"><span class="annottext">go :: [LMatch GhcPs (LHsExpr GhcPs)]
-&gt; SrcSpanAnnA
-&gt; [LHsDecl GhcPs]
-&gt; [LHsDecl GhcPs]
-&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="#local-6989586621682766272"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682766273"><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682766273"><span class="hs-identifier hs-var">mtchs</span></a></span></span><span> </span><span id="local-6989586621682766274"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766274"><span class="hs-identifier hs-var">loc</span></a></span></span><span>
</span><span id="line-584"></span><span>       </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766275"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766275"><span class="hs-identifier hs-var">loc2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-type">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: forall idL idR. HsBindLR idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766277"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766277"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: forall idL idR. HsBindLR idL idR -&gt; MatchGroup idR (LHsExpr idR)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-586"></span><span>                                    </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766278"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766278"><span class="hs-identifier hs-var">lm2</span></a></span></span><span> </span><span id="local-6989586621682766279"><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766279"><span class="hs-identifier hs-var">mtchs2</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>         </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682766280"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766280"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-588"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766264"><span class="hs-identifier hs-var">f1</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766277"><span class="hs-identifier hs-var">f2</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-589"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766281"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766281"><span class="hs-identifier hs-var">loc2'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766282"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766282"><span class="hs-identifier hs-var">lm2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
</span><a href="GHC.Parser.Annotation.html#transferAnnsA"><span class="hs-identifier hs-var">transferAnnsA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766275"><span class="hs-identifier hs-var">loc2</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766278"><span class="hs-identifier hs-var">lm2</span></a></span><span>
</span><span id="line-590"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
-&gt; SrcSpanAnnA
-&gt; [LHsDecl GhcPs]
-&gt; [LHsDecl GhcPs]
-&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="#local-6989586621682766272"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766282"><span class="hs-identifier hs-var">lm2'</span></a></span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766279"><span class="hs-identifier hs-var">mtchs2</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766273"><span class="hs-identifier hs-var">mtchs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; SrcSpanAnnA
forall a. Semigroup a =&gt; EpAnn a -&gt; EpAnn a -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineSrcSpansA"><span class="hs-identifier hs-var">combineSrcSpansA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766274"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766281"><span class="hs-identifier hs-var">loc2'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766280"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-592"></span><span>    </span><span class="annot"><a href="#local-6989586621682766272"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766285"><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682766285"><span class="hs-identifier hs-var">mtchs</span></a></span></span><span> </span><span id="local-6989586621682766286"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766286"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766287"><span class="annot"><span class="annottext">doc_decl :: LHsDecl GhcPs
</span><a href="#local-6989586621682766287"><span class="hs-identifier hs-var">doc_decl</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766288"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766288"><span class="hs-identifier hs-var">loc2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DocD"><span class="hs-identifier hs-type">DocD</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682766290"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766290"><span class="hs-identifier hs-var">binds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766291"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766291"><span class="hs-identifier hs-var">doc_decls</span></a></span></span><span>
</span><span id="line-593"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766292"><span class="annot"><span class="annottext">doc_decls' :: [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621682766292"><span class="hs-identifier hs-var hs-var">doc_decls'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsDecl GhcPs
GenLocated SrcSpanAnnA (HsDecl GhcPs)
</span><a href="#local-6989586621682766287"><span class="hs-identifier hs-var">doc_decl</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621682766291"><span class="hs-identifier hs-var">doc_decls</span></a></span><span>
</span><span id="line-594"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
-&gt; SrcSpanAnnA
-&gt; [LHsDecl GhcPs]
-&gt; [LHsDecl GhcPs]
-&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="#local-6989586621682766272"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682766285"><span class="hs-identifier hs-var">mtchs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; SrcSpanAnnA
forall a. Semigroup a =&gt; EpAnn a -&gt; EpAnn a -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineSrcSpansA"><span class="hs-identifier hs-var">combineSrcSpansA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766286"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766288"><span class="hs-identifier hs-var">loc2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766290"><span class="hs-identifier hs-var">binds</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621682766292"><span class="hs-identifier hs-var">doc_decls'</span></a></span><span>
</span><span id="line-595"></span><span>    </span><span class="annot"><a href="#local-6989586621682766272"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766293"><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682766293"><span class="hs-identifier hs-var">mtchs</span></a></span></span><span> </span><span id="local-6989586621682766294"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766294"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766295"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766295"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span id="local-6989586621682766296"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766296"><span class="hs-identifier hs-var">doc_decls</span></a></span></span><span>
</span><span id="line-596"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-597"></span><span>            </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766297"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766297"><span class="hs-identifier hs-var">llm</span></a></span></span><span> </span><span id="local-6989586621682766298"><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766298"><span class="hs-identifier hs-var">last_m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="GHC.Prelude.Basic.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766293"><span class="hs-identifier hs-var">mtchs</span></a></span><span> </span><span class="hs-comment">-- Guaranteed at least one</span><span>
</span><span id="line-598"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621682766300"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766300"><span class="hs-identifier hs-var">llm'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766301"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766301"><span class="hs-identifier hs-var">loc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
</span><a href="GHC.Parser.Annotation.html#transferAnnsOnlyA"><span class="hs-identifier hs-var">transferAnnsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766297"><span class="hs-identifier hs-var">llm</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766294"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-comment">-- Keep comments, transfer trailing</span><span>
</span><span id="line-599"></span><span>
</span><span id="line-600"></span><span>            </span><span id="local-6989586621682766303"><span class="annot"><span class="annottext">matches' :: [GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766303"><span class="hs-identifier hs-var hs-var">matches'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766300"><span class="hs-identifier hs-var">llm'</span></a></span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766298"><span class="hs-identifier hs-var">last_m</span></a></span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. HasCallStack =&gt; [a] -&gt; [a]
</span><a href="GHC.Prelude.Basic.html#tail"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766293"><span class="hs-identifier hs-var">mtchs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-601"></span><span>            </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766305"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766305"><span class="hs-identifier hs-var">lfm</span></a></span></span><span> </span><span id="local-6989586621682766306"><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766306"><span class="hs-identifier hs-var">first_m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="GHC.Prelude.Basic.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766303"><span class="hs-identifier hs-var">matches'</span></a></span><span>
</span><span id="line-602"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621682766307"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766307"><span class="hs-identifier hs-var">lfm'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766308"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766308"><span class="hs-identifier hs-var">loc''</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766305"><span class="hs-identifier hs-var">lfm</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766301"><span class="hs-identifier hs-var">loc'</span></a></span><span>
</span><span id="line-603"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-604"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsBindLR GhcPs GhcPs
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcPs GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766308"><span class="hs-identifier hs-var">loc''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; LocatedLW [LMatch GhcPs (LHsExpr GhcPs)] -&gt; HsBindLR GhcPs GhcPs
</span><a href="GHC.Parser.PostProcess.html#makeFunBind"><span class="hs-identifier hs-var">makeFunBind</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766263"><span class="hs-identifier hs-var">fun_id1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a an e2.
(Semigroup a, NoAnn an) =&gt;
[GenLocated (EpAnn a) e2] -&gt; LocatedAn an [GenLocated (EpAnn a) e2]
</span><a href="GHC.Hs.Utils.html#mkLocatedList"><span class="hs-identifier hs-var">mkLocatedList</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated
    SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
 -&gt; GenLocated
      SrcSpanAnnLW
      [GenLocated
         SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))])
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766307"><span class="hs-identifier hs-var">lfm'</span></a></span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766306"><span class="hs-identifier hs-var">first_m</span></a></span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a. HasCallStack =&gt; [a] -&gt; [a]
</span><a href="GHC.Prelude.Basic.html#tail"><span class="hs-identifier hs-var">tail</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682766303"><span class="hs-identifier hs-var">matches'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621682766296"><span class="hs-identifier hs-var">doc_decls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621682766295"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>        </span><span class="hs-comment">-- Reverse the final matches, to get it back in the right order</span><span>
</span><span id="line-607"></span><span>        </span><span class="hs-comment">-- Do the same thing with the trailing doc comments</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBind"><span class="hs-identifier hs-var">getMonoBind</span></a></span><span> </span><span id="local-6989586621682766312"><span class="annot"><span class="annottext">LHsBind GhcPs
</span><a href="#local-6989586621682766312"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span id="local-6989586621682766313"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766313"><span class="hs-identifier hs-var">binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBind GhcPs
</span><a href="#local-6989586621682766312"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766313"><span class="hs-identifier hs-var">binds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span class="hs-comment">{- Note [Exact Print Annotations for FunBind]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

An individual Match that ends up in a FunBind MatchGroup is initially
parsed as a LHsDecl. This takes the form

   L loc (ValD NoExtField (FunBind ... [L lm (Match ..)]))

The loc contains the annotations, in particular comments, which are to
precede the declaration when printed, and [TrailingAnn] which are to
follow it. The [TrailingAnn] captures semicolons that may appear after
it when using the braces and semis style of coding.

The match location (lm) has only a location in it at this point, no
annotations. Its location is the same as the top level location in
loc.

What getMonoBind does it to take a sequence of FunBind LHsDecls that
belong to the same function and group them into a single function with
the component declarations all combined into the single MatchGroup as
[LMatch GhcPs].

Given that when exact printing a FunBind the exact printer simply
iterates over all the matches and prints each in turn, the simplest
behaviour would be to simply take the top level annotations (loc) for
each declaration, and use them for the individual component matches
(lm).

The problem is the exact printer first has to deal with the top level
LHsDecl, which means annotations for the loc. This needs to be able to
be exact printed in the context of surrounding declarations, and if
some refactor decides to move the declaration elsewhere, the leading
comments and trailing semicolons need to be handled at that level.

So the solution is to combine all the matches into one, pushing the
annotations into the LMatch's, and then at the end extract the
comments from the first match and [TrailingAnn] from the last to go in
the top level LHsDecl.
-}</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="hs-comment">-- Group together adjacent FunBinds for every function.</span><span>
</span><span id="line-652"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-type">getMonoBindAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-653"></span><span id="getMonoBindAll"><span class="annot"><span class="annottext">getMonoBindAll :: [LHsDecl GhcPs] -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var hs-var">getMonoBindAll</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-654"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var">getMonoBindAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766314"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766314"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-type">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766315"><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621682766315"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682766316"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766316"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766317"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766317"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span id="local-6989586621682766318"><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621682766318"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766319"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766319"><span class="hs-identifier hs-var">ds'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsBind GhcPs
-&gt; [LHsDecl GhcPs] -&gt; (LHsBind GhcPs, [LHsDecl GhcPs])
</span><a href="GHC.Parser.PostProcess.html#getMonoBind"><span class="hs-identifier hs-var">getMonoBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsBindLR GhcPs GhcPs
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcPs GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766314"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621682766315"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766316"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-656"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsDecl GhcPs -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766317"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XValD GhcPs -&gt; HsBindLR GhcPs GhcPs -&gt; HsDecl GhcPs
forall p. XValD p -&gt; HsBind p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-var">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs
</span><a href="#local-6989586621682766318"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs] -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var">getMonoBindAll</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766319"><span class="hs-identifier hs-var">ds'</span></a></span><span>
</span><span id="line-657"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var">getMonoBindAll</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766320"><span class="annot"><span class="annottext">LHsDecl GhcPs
</span><a href="#local-6989586621682766320"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682766321"><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766321"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsDecl GhcPs
GenLocated SrcSpanAnnA (HsDecl GhcPs)
</span><a href="#local-6989586621682766320"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs] -&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.html#getMonoBindAll"><span class="hs-identifier hs-var">getMonoBindAll</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
</span><a href="#local-6989586621682766321"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#has_args"><span class="hs-identifier hs-type">has_args</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-660"></span><span id="has_args"><span class="annot"><span class="annottext">has_args :: [LMatch GhcPs (LHsExpr GhcPs)] -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#has_args"><span class="hs-identifier hs-var hs-var">has_args</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.Parser.PostProcess.has_args&quot;</span></span><span>
</span><span id="line-661"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#has_args"><span class="hs-identifier hs-var">has_args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; XRec p [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766324"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682766324"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (LHsExpr GhcPs)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682766324"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span>        </span><span class="hs-comment">-- Don't group together FunBinds if they have</span><span>
</span><span id="line-663"></span><span>        </span><span class="hs-comment">-- no arguments.  This is necessary now that variable bindings</span><span>
</span><span id="line-664"></span><span>        </span><span class="hs-comment">-- with no arguments are now treated as FunBinds rather</span><span>
</span><span id="line-665"></span><span>        </span><span class="hs-comment">-- than pattern bindings (tests/rename/should_fail/rnfail002).</span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span class="annot"><span class="hs-comment">{- **********************************************************************

  #PrefixToHS-utils# Utilities for conversion

  ********************************************************************* -}</span></span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span class="hs-comment">{- Note [Parsing data constructors is hard]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The problem with parsing data constructors is that they look a lot like types.
Compare:

  (s1)   data T = C t1 t2
  (s2)   type T = C t1 t2

Syntactically, there's little difference between these declarations, except in
(s1) 'C' is a data constructor, but in (s2) 'C' is a type constructor.

This similarity would pose no problem if we knew ahead of time if we are
parsing a type or a constructor declaration. Looking at (s1) and (s2), a simple
(but wrong!) rule comes to mind: in 'data' declarations assume we are parsing
data constructors, and in other contexts (e.g. 'type' declarations) assume we
are parsing type constructors.

This simple rule does not work because of two problematic cases:

  (p1)   data T = C t1 t2 :+ t3
  (p2)   data T = C t1 t2 =&gt; t3

In (p1) we encounter (:+) and it turns out we are parsing an infix data
declaration, so (C t1 t2) is a type and 'C' is a type constructor.
In (p2) we encounter (=&gt;) and it turns out we are parsing an existential
context, so (C t1 t2) is a constraint and 'C' is a type constructor.

As the result, in order to determine whether (C t1 t2) declares a data
constructor, a type, or a context, we would need unlimited lookahead which
'happy' is not so happy with.
-}</span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="hs-comment">-- | Reinterpret a type constructor, including type operators, as a data</span><span>
</span><span id="line-707"></span><span class="hs-comment">--   constructor.</span><span>
</span><span id="line-708"></span><span class="hs-comment">-- See Note [Parsing data constructors is hard]</span><span>
</span><span id="line-709"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#tyConToDataCon"><span class="hs-identifier hs-type">tyConToDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span id="tyConToDataCon"><span class="annot"><span class="annottext">tyConToDataCon :: LocatedN RdrName
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#tyConToDataCon"><span class="hs-identifier hs-var hs-var">tyConToDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766327"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682766327"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766328"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766328"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="GHC.Utils.Lexeme.html#okConOcc"><span class="hs-identifier hs-var">okConOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; String
</span><a href="GHC.Types.Name.Occurrence.html#occNameString"><span class="hs-identifier hs-var">occNameString</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766330"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
forall a. a -&gt; Either (MsgEnvelope PsMessage) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682766327"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var">setRdrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766328"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#srcDataName"><span class="hs-identifier hs-var">srcDataName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName))
-&gt; MsgEnvelope PsMessage
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682766327"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrNotADataCon"><span class="hs-identifier hs-var">PsErrNotADataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766328"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-717"></span><span>    </span><span id="local-6989586621682766330"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682766330"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766328"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkPatSynMatchGroup"><span class="hs-identifier hs-type">mkPatSynMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-720"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-721"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span id="mkPatSynMatchGroup"><span class="annot"><span class="annottext">mkPatSynMatchGroup :: LocatedN RdrName
-&gt; LocatedLW (OrdList (LHsDecl GhcPs))
-&gt; P (MatchGroup GhcPs (LHsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkPatSynMatchGroup"><span class="hs-identifier hs-var hs-var">mkPatSynMatchGroup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766333"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682766333"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766334"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766334"><span class="hs-identifier hs-var">patsyn_name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766335"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682766335"><span class="hs-identifier hs-var">ld</span></a></span></span><span> </span><span id="local-6989586621682766336"><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
</span><a href="#local-6989586621682766336"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-723"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682766337"><span class="annot"><a href="#local-6989586621682766337"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsDecl GhcPs)
 -&gt; P (GenLocated
         SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))))
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; P [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
</span><a href="#local-6989586621682766338"><span class="hs-identifier hs-var">fromDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsDecl GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsDecl GhcPs))
</span><a href="#local-6989586621682766336"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">null</span></span><span> </span><span class="annot"><a href="#local-6989586621682766337"><span class="hs-identifier hs-type">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682766340"><span class="hs-identifier hs-type">wrongNumberErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766333"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-type">mkMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-type">FromSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766335"><span class="hs-identifier hs-type">ld</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766337"><span class="hs-identifier hs-type">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-726"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-727"></span><span>    </span><span id="local-6989586621682766338"><span class="annot"><span class="annottext">fromDecl :: GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
</span><a href="#local-6989586621682766338"><span class="hs-identifier hs-var hs-var">fromDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766343"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766343"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766344"><span class="annot"><span class="annottext">decl :: HsDecl GhcPs
</span><a href="#local-6989586621682766344"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-type">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-type">PatBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatBind GhcPs GhcPs
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-728"></span><span>                         </span><span id="local-6989586621682766346"><span class="annot"><span class="annottext">pat :: LPat GhcPs
</span><a href="#local-6989586621682766346"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span id="local-6989586621682766348"><span class="annot"><span class="annottext">XConPat GhcPs
</span><a href="#local-6989586621682766348"><span class="hs-identifier hs-var">_conAnn</span></a></span></span><span> </span><span id="local-6989586621682766349"><span class="annot"><span class="annottext">ln :: XRec GhcPs (ConLikeP GhcPs)
</span><a href="#local-6989586621682766349"><span class="hs-identifier hs-var">ln</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766350"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766350"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766351"><span class="annot"><span class="annottext">HsConPatDetails GhcPs
</span><a href="#local-6989586621682766351"><span class="hs-identifier hs-var">details</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>                               </span><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766352"><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682766352"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-730"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; P () -&gt; P ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766350"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766334"><span class="hs-identifier hs-var">patsyn_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(P () -&gt; P ()) -&gt; P () -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-731"></span><span>               </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDecl GhcPs -&gt; P ()
</span><a href="#local-6989586621682766354"><span class="hs-identifier hs-var">wrongNameBindingErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766343"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766344"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-732"></span><span>           </span><span class="hs-comment">-- conAnn should only be AnnOpenP, AnnCloseP, so the rest should be empty</span><span>
</span><span id="line-733"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766355"><span class="annot"><span class="annottext">ann_fun :: AnnFunRhs
</span><a href="#local-6989586621682766355"><span class="hs-identifier hs-var hs-var hs-var">ann_fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnFunRhs
</span><a href="GHC.Parser.PostProcess.html#mk_ann_funrhs"><span class="hs-identifier hs-var">mk_ann_funrhs</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-734"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682766357"><span class="annot"><a href="#local-6989586621682766357"><span class="hs-identifier hs-var">match</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcPs
</span><a href="#local-6989586621682766351"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-735"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766359"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682766359"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
 -&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_ext :: XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-736"></span><span>                                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_ctxt :: HsMatchContext (LIdP (NoGhcTc GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcPs))
HsMatchContext (LocatedN RdrName)
</span><a href="#local-6989586621682766362"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_pats :: XRec GhcPs [LPat GhcPs]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
-&gt; [GenLocated SrcSpanAnnA (Pat GhcPs)]
-&gt; GenLocated EpaLocation [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766363"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682766359"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-737"></span><span>                                                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766352"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-738"></span><span>                   </span><span class="hs-keyword">where</span><span>
</span><span id="line-739"></span><span>                     </span><span id="local-6989586621682766363"><span class="annot"><span class="annottext">l :: EpaLocation
</span><a href="#local-6989586621682766363"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)] -&gt; EpaLocation
forall an a. [LocatedAn an a] -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#listLocation"><span class="hs-identifier hs-var">listLocation</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682766359"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-740"></span><span>                     </span><span id="local-6989586621682766362"><span class="annot"><span class="annottext">ctxt :: HsMatchContext (LocatedN RdrName)
</span><a href="#local-6989586621682766362"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mc_fun :: LocatedN RdrName
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766349"><span class="hs-identifier hs-var">ln</span></a></span><span>
</span><span id="line-741"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_fixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fixity"><span class="hs-identifier hs-var">mc_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a></span><span>
</span><span id="line-742"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_strictness :: SrcStrictness
</span><a href="Language.Haskell.Syntax.Expr.html#mc_strictness"><span class="hs-identifier hs-var">mc_strictness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span>
</span><span id="line-743"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_an :: XFunRhs
</span><a href="Language.Haskell.Syntax.Expr.html#mc_an"><span class="hs-identifier hs-var">mc_an</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunRhs
AnnFunRhs
</span><a href="#local-6989586621682766355"><span class="hs-identifier hs-var">ann_fun</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682766374"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682766374"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682766375"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682766375"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
 -&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_ext :: XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-746"></span><span>                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_ctxt :: HsMatchContext (LIdP (NoGhcTc GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext (LIdP (NoGhcTc GhcPs))
HsMatchContext (LocatedN RdrName)
</span><a href="#local-6989586621682766376"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-747"></span><span>                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_pats :: XRec GhcPs [LPat GhcPs]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
-&gt; [GenLocated SrcSpanAnnA (Pat GhcPs)]
-&gt; GenLocated EpaLocation [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766377"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682766374"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682766375"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-748"></span><span>                                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682766352"><span class="hs-identifier hs-var">rhs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-749"></span><span>                   </span><span class="hs-keyword">where</span><span>
</span><span id="line-750"></span><span>                     </span><span id="local-6989586621682766377"><span class="annot"><span class="annottext">l :: EpaLocation
</span><a href="#local-6989586621682766377"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)] -&gt; EpaLocation
forall an a. [LocatedAn an a] -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#listLocation"><span class="hs-identifier hs-var">listLocation</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682766374"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682766375"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-751"></span><span>                     </span><span id="local-6989586621682766376"><span class="annot"><span class="annottext">ctxt :: HsMatchContext (LocatedN RdrName)
</span><a href="#local-6989586621682766376"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mc_fun :: LocatedN RdrName
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766349"><span class="hs-identifier hs-var">ln</span></a></span><span>
</span><span id="line-752"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_fixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fixity"><span class="hs-identifier hs-var">mc_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span>
</span><span id="line-753"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_strictness :: SrcStrictness
</span><a href="Language.Haskell.Syntax.Expr.html#mc_strictness"><span class="hs-identifier hs-var">mc_strictness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span>
</span><span id="line-754"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_an :: XFunRhs
</span><a href="Language.Haskell.Syntax.Expr.html#mc_an"><span class="hs-identifier hs-var">mc_an</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunRhs
AnnFunRhs
</span><a href="#local-6989586621682766355"><span class="hs-identifier hs-var">ann_fun</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; LPat GhcPs
-&gt; P (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. SrcSpan -&gt; LPat GhcPs -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#recordPatSynErr"><span class="hs-identifier hs-var">recordPatSynErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766343"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682766346"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-757"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766343"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766357"><span class="hs-identifier hs-type">match</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-758"></span><span>    </span><span class="annot"><a href="#local-6989586621682766338"><span class="hs-identifier hs-var">fromDecl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766381"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766381"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766382"><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766382"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HsDecl GhcPs
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
</span><a href="#local-6989586621682766383"><span class="hs-identifier hs-var">extraDeclErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766381"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766382"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span>    </span><span id="local-6989586621682766383"><span class="annot"><span class="annottext">extraDeclErr :: SrcSpan
-&gt; HsDecl GhcPs
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
</span><a href="#local-6989586621682766383"><span class="hs-identifier hs-var hs-var">extraDeclErr</span></a></span></span><span> </span><span id="local-6989586621682766384"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766384"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766385"><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766385"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-761"></span><span>        </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; P (GenLocated
         SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))))
-&gt; MsgEnvelope PsMessage
-&gt; P (GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766384"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-762"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; HsDecl GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrNoSingleWhereBindInPatSynDecl"><span class="hs-identifier hs-var">PsErrNoSingleWhereBindInPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766334"><span class="hs-identifier hs-var">patsyn_name</span></a></span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766385"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span>    </span><span id="local-6989586621682766354"><span class="annot"><span class="annottext">wrongNameBindingErr :: SrcSpan -&gt; HsDecl GhcPs -&gt; P ()
</span><a href="#local-6989586621682766354"><span class="hs-identifier hs-var hs-var">wrongNameBindingErr</span></a></span></span><span> </span><span id="local-6989586621682766387"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766387"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766388"><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766388"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-765"></span><span>      </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766387"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-766"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; HsDecl GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidWhereBindInPatSynDecl"><span class="hs-identifier hs-var">PsErrInvalidWhereBindInPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766334"><span class="hs-identifier hs-var">patsyn_name</span></a></span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621682766388"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span>    </span><span id="local-6989586621682766340"><span class="annot"><span class="annottext">wrongNumberErr :: SrcSpan -&gt; P ()
</span><a href="#local-6989586621682766340"><span class="hs-identifier hs-var hs-var">wrongNumberErr</span></a></span></span><span> </span><span id="local-6989586621682766390"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766390"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-769"></span><span>      </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766390"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-770"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrEmptyWhereInPatSynDecl"><span class="hs-identifier hs-var">PsErrEmptyWhereInPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766334"><span class="hs-identifier hs-var">patsyn_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>
</span><span id="line-772"></span><span id="local-6989586621682764516"><span class="annot"><a href="GHC.Parser.PostProcess.html#recordPatSynErr"><span class="hs-identifier hs-type">recordPatSynErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764516"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-773"></span><span id="recordPatSynErr"><span class="annot"><span class="annottext">recordPatSynErr :: forall a. SrcSpan -&gt; LPat GhcPs -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#recordPatSynErr"><span class="hs-identifier hs-var hs-var">recordPatSynErr</span></a></span></span><span> </span><span id="local-6989586621682766394"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766394"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766395"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682766395"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-774"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P a
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P a) -&gt; MsgEnvelope PsMessage -&gt; P a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766394"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-775"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrRecordSyntaxInPatSynDecl"><span class="hs-identifier hs-var">PsErrRecordSyntaxInPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682766395"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkConDeclH98"><span class="hs-identifier hs-type">mkConDeclH98</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDarrow"><span class="hs-identifier hs-type">TokDarrow</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#TokForall"><span class="hs-identifier hs-type">TokForall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Specificity"><span class="hs-identifier hs-type">Specificity</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-778"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclH98Details"><span class="hs-identifier hs-type">HsConDeclH98Details</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-779"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDecl"><span class="hs-identifier hs-type">ConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span id="mkConDeclH98"><span class="annot"><span class="annottext">mkConDeclH98 :: (TokDarrow, (TokForall, EpToken &quot;.&quot;))
-&gt; LocatedN RdrName
-&gt; Maybe [LHsTyVarBndr Specificity GhcPs]
-&gt; Maybe (LHsContext GhcPs)
-&gt; HsConDeclH98Details GhcPs
-&gt; ConDecl GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkConDeclH98"><span class="hs-identifier hs-var hs-var">mkConDeclH98</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766397"><span class="annot"><span class="annottext">TokDarrow
</span><a href="#local-6989586621682766397"><span class="hs-identifier hs-var">tdarrow</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766398"><span class="annot"><span class="annottext">TokForall
</span><a href="#local-6989586621682766398"><span class="hs-identifier hs-var">tforall</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766399"><span class="annot"><span class="annottext">EpToken &quot;.&quot;
</span><a href="#local-6989586621682766399"><span class="hs-identifier hs-var">tdot</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766400"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766400"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682766401"><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621682766401"><span class="hs-identifier hs-var">mb_forall</span></a></span></span><span> </span><span id="local-6989586621682766402"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682766402"><span class="hs-identifier hs-var">mb_cxt</span></a></span></span><span> </span><span id="local-6989586621682766403"><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
</span><a href="#local-6989586621682766403"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_ext :: XConDeclH98 GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_ext"><span class="hs-identifier hs-var">con_ext</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TokForall -&gt; EpToken &quot;.&quot; -&gt; TokDarrow -&gt; AnnConDeclH98
</span><a href="GHC.Hs.Decls.html#AnnConDeclH98"><span class="hs-identifier hs-var">AnnConDeclH98</span></a></span><span> </span><span class="annot"><span class="annottext">TokForall
</span><a href="#local-6989586621682766398"><span class="hs-identifier hs-var">tforall</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;.&quot;
</span><a href="#local-6989586621682766399"><span class="hs-identifier hs-var">tdot</span></a></span><span> </span><span class="annot"><span class="annottext">TokDarrow
</span><a href="#local-6989586621682766397"><span class="hs-identifier hs-var">tdarrow</span></a></span><span>
</span><span id="line-783"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_name :: XRec GhcPs (IdP GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_name"><span class="hs-identifier hs-var">con_name</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766400"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-784"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_forall :: Bool
</span><a href="Language.Haskell.Syntax.Decls.html#con_forall"><span class="hs-identifier hs-var">con_forall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
-&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr Specificity GhcPs]
Maybe [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
</span><a href="#local-6989586621682766401"><span class="hs-identifier hs-var">mb_forall</span></a></span><span>
</span><span id="line-785"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#con_ex_tvs"><span class="hs-identifier hs-var">con_ex_tvs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [LHsTyVarBndr Specificity GhcPs]
Maybe [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
</span><a href="#local-6989586621682766401"><span class="hs-identifier hs-var">mb_forall</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr Specificity GhcPs)]
forall a. Maybe a -&gt; a -&gt; a
</span><a href="GHC.Data.Maybe.html#orElse"><span class="hs-operator hs-var">`orElse`</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-786"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682766402"><span class="hs-identifier hs-var">mb_cxt</span></a></span><span>
</span><span id="line-787"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_args :: HsConDeclH98Details GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
</span><a href="#local-6989586621682766403"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-788"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">con_doc :: Maybe (LHsDoc GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span class="hs-comment">-- | Construct a GADT-style data constructor from the constructor names and</span><span>
</span><span id="line-791"></span><span class="hs-comment">-- their type. Some interesting aspects of this function:</span><span>
</span><span id="line-792"></span><span class="hs-comment">--</span><span>
</span><span id="line-793"></span><span class="hs-comment">-- * This splits up the constructor type into its quantified type variables (if</span><span>
</span><span id="line-794"></span><span class="hs-comment">--   provided), context (if provided), argument types, and result type, and</span><span>
</span><span id="line-795"></span><span class="hs-comment">--   records whether this is a prefix or record GADT constructor. See</span><span>
</span><span id="line-796"></span><span class="hs-comment">--   Note [GADT abstract syntax] in &quot;GHC.Hs.Decls&quot; for more details.</span><span>
</span><span id="line-797"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkGadtDecl"><span class="hs-identifier hs-type">mkGadtDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-798"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span>
</span><span id="line-800"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-801"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span id="mkGadtDecl"><span class="annot"><span class="annottext">mkGadtDecl :: SrcSpan
-&gt; NonEmpty (LocatedN RdrName)
-&gt; TokDcolon
-&gt; LHsSigType GhcPs
-&gt; P (LConDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkGadtDecl"><span class="hs-identifier hs-var hs-var">mkGadtDecl</span></a></span></span><span> </span><span id="local-6989586621682766415"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766415"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766416"><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName)
</span><a href="#local-6989586621682766416"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621682766417"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682766417"><span class="hs-identifier hs-var">dcol</span></a></span></span><span> </span><span id="local-6989586621682766418"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682766418"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-803"></span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682766419"><span class="annot"><a href="#local-6989586621682766419"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766420"><span class="annot"><a href="#local-6989586621682766420"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766421"><span class="annot"><a href="#local-6989586621682766421"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766422"><span class="annot"><a href="#local-6989586621682766422"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766423"><span class="annot"><a href="#local-6989586621682766423"><span class="hs-identifier hs-var">csa</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-805"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766424"><span class="hs-identifier hs-var">body_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-806"></span><span>     </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766425"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766425"><span class="hs-identifier hs-var">ll</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">XFunTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766427"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621682766427"><span class="hs-identifier hs-var">hsArr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766428"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766428"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766429"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766429"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span> </span><span id="local-6989586621682766431"><span class="annot"><span class="annottext">XRecTy GhcPs
</span><a href="#local-6989586621682766431"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682766432"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621682766432"><span class="hs-identifier hs-var">rf</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766433"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766433"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-807"></span><span>       </span><span id="local-6989586621682766434"><span class="annot"><a href="#local-6989586621682766434"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621682766427"><span class="hs-identifier hs-var">hsArr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-808"></span><span>         </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-type">HsUnrestrictedArrow</span></a></span><span> </span><span id="local-6989586621682766436"><span class="annot"><span class="annottext">XUnrestrictedArrow (LHsType GhcPs) GhcPs
</span><a href="#local-6989586621682766436"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TokRarrow -&gt; P TokRarrow
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TokRarrow
XUnrestrictedArrow (LHsType GhcPs) GhcPs
</span><a href="#local-6989586621682766436"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-809"></span><span>         </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766424"><span class="hs-identifier hs-var">body_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-810"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsArrow GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalGadtRecordMultiplicity"><span class="hs-identifier hs-var">PsErrIllegalGadtRecordMultiplicity</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621682766427"><span class="hs-identifier hs-var">hsArr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>                 </span><span class="annot"><span class="annottext">TokRarrow -&gt; P TokRarrow
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TokRarrow
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-type">RecConGADT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766434"><span class="hs-identifier hs-type">arr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766428"><span class="hs-identifier hs-type">anc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766431"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766429"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682766432"><span class="hs-identifier hs-type">rf</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682766433"><span class="hs-identifier hs-type">res_ty</span></a></span><span>
</span><span id="line-814"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#epAnnComments"><span class="hs-identifier hs-type">epAnnComments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766425"><span class="hs-identifier hs-type">ll</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>     </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-816"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621682766440"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766440"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766441"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766441"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766442"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766442"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766443"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621682766443"><span class="hs-identifier hs-var">arg_types</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766444"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766444"><span class="hs-identifier hs-var">res_type</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
-&gt; (([EpToken &quot;(&quot;], [EpToken &quot;)&quot;]), EpAnnComments,
    [HsScaled GhcPs (LHsType GhcPs)], LHsType GhcPs)
forall (p :: Pass).
LHsType (GhcPass p)
-&gt; (([EpToken &quot;(&quot;], [EpToken &quot;)&quot;]), EpAnnComments,
    [HsScaled (GhcPass p) (LHsType (GhcPass p))], LHsType (GhcPass p))
</span><a href="GHC.Hs.Type.html#splitHsFunType"><span class="hs-identifier hs-var">splitHsFunType</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766424"><span class="hs-identifier hs-var">body_ty</span></a></span><span>
</span><span id="line-817"></span><span>       </span><span class="annot"><span class="annottext">(HsConDeclGADTDetails GhcPs, GenLocated SrcSpanAnnA (HsType GhcPs),
 ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;]), EpAnnComments)
-&gt; P (HsConDeclGADTDetails GhcPs,
      GenLocated SrcSpanAnnA (HsType GhcPs),
      ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;]), EpAnnComments)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPrefixConGADT GhcPs
-&gt; [HsScaled GhcPs (LHsType GhcPs)] -&gt; HsConDeclGADTDetails GhcPs
forall pass.
XPrefixConGADT pass
-&gt; [HsScaled pass (LBangType pass)] -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-var">PrefixConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XPrefixConGADT GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621682766443"><span class="hs-identifier hs-var">arg_types</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766444"><span class="hs-identifier hs-var">res_type</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766440"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766441"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766442"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>
</span><span id="line-819"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766447"><span class="annot"><a href="#local-6989586621682766447"><span class="hs-identifier hs-var hs-var">bndrs_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621682766448"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-820"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621682766418"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-821"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span> </span><span id="local-6989586621682766451"><span class="annot"><span class="annottext">XHsOuterExplicit GhcPs Specificity
</span><a href="#local-6989586621682766451"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity (NoGhcTc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn (TokForall, EpToken &quot;.&quot;) -&gt; EpaLocation
forall ann. EpAnn ann -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#entry"><span class="hs-identifier hs-var">entry</span></a></span><span> </span><span class="annot"><span class="annottext">XHsOuterExplicit GhcPs Specificity
EpAnn (TokForall, EpToken &quot;.&quot;)
</span><a href="#local-6989586621682766451"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766454"><span class="annot"><a href="#local-6989586621682766454"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766415"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766423"><span class="hs-identifier hs-var">csa</span></a></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766454"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span>
</span><span id="line-826"></span><span>                     </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_g_ext"><span class="hs-identifier hs-var">con_g_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Decls.html#AnnConDeclGADT"><span class="hs-identifier hs-type">AnnConDeclGADT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766421"><span class="hs-identifier hs-type">ops</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766422"><span class="hs-identifier hs-type">cps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766417"><span class="hs-identifier hs-type">dcol</span></a></span><span>
</span><span id="line-827"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_names"><span class="hs-identifier hs-var">con_names</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766416"><span class="hs-identifier hs-type">names</span></a></span><span>
</span><span id="line-828"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_bndrs"><span class="hs-identifier hs-var">con_bndrs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766447"><span class="hs-identifier hs-type">bndrs_loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766448"><span class="hs-identifier hs-type">outer_bndrs</span></a></span><span>
</span><span id="line-829"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var">con_mb_cxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766460"><span class="hs-identifier hs-type">mcxt</span></a></span><span>
</span><span id="line-830"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_g_args"><span class="hs-identifier hs-var">con_g_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766419"><span class="hs-identifier hs-type">args</span></a></span><span>
</span><span id="line-831"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_res_ty"><span class="hs-identifier hs-var">con_res_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682766420"><span class="hs-identifier hs-type">res_ty</span></a></span><span>
</span><span id="line-832"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-833"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-834"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682766448"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621682766448"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766460"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621682766460"><span class="hs-identifier hs-var">mcxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766424"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766424"><span class="hs-identifier hs-var">body_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
-&gt; (HsOuterSigTyVarBndrs GhcPs, Maybe (LHsContext GhcPs),
    LHsType GhcPs)
</span><a href="GHC.Hs.Type.html#splitLHsGadtTy"><span class="hs-identifier hs-var">splitLHsGadtTy</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682766418"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-type">setRdrNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-837"></span><span class="hs-comment">-- ^ This rather gruesome function is used mainly by the parser.</span><span>
</span><span id="line-838"></span><span class="hs-comment">--</span><span>
</span><span id="line-839"></span><span class="hs-comment">-- Case #1. When parsing:</span><span>
</span><span id="line-840"></span><span class="hs-comment">--</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- &gt; data T a = T | T1 Int</span><span>
</span><span id="line-842"></span><span class="hs-comment">--</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- we parse the data constructors as /types/ because of parser ambiguities,</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- so then we need to change the /type constr/ to a /data constr/</span><span>
</span><span id="line-845"></span><span class="hs-comment">--</span><span>
</span><span id="line-846"></span><span class="hs-comment">-- The exact-name case /can/ occur when parsing:</span><span>
</span><span id="line-847"></span><span class="hs-comment">--</span><span>
</span><span id="line-848"></span><span class="hs-comment">-- &gt; data [] a = [] | a : [a]</span><span>
</span><span id="line-849"></span><span class="hs-comment">--</span><span>
</span><span id="line-850"></span><span class="hs-comment">-- For the exact-name case we return an original name.</span><span>
</span><span id="line-851"></span><span class="hs-comment">--</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- Case #2. When parsing:</span><span>
</span><span id="line-853"></span><span class="hs-comment">--</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- &gt; x = fn (forall a. a)   -- RequiredTypeArguments</span><span>
</span><span id="line-855"></span><span class="hs-comment">--</span><span>
</span><span id="line-856"></span><span class="hs-comment">-- we use setRdrNameSpace to set the namespace of forall-bound variables.</span><span>
</span><span id="line-857"></span><span class="hs-comment">--</span><span>
</span><span id="line-858"></span><span id="setRdrNameSpace"><span class="annot"><span class="annottext">setRdrNameSpace :: RdrName -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var hs-var">setRdrNameSpace</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682766465"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766465"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766466"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766466"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766466"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766465"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var">setRdrNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-type">Qual</span></a></span><span> </span><span id="local-6989586621682766469"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682766469"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682766470"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766470"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766471"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766471"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Qual"><span class="hs-identifier hs-var">Qual</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682766469"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766471"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766470"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var">setRdrNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-type">Orig</span></a></span><span> </span><span id="local-6989586621682766473"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682766473"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682766474"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766474"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766475"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766475"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-var">Orig</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621682766473"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766475"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766474"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var">setRdrNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621682766477"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>    </span><span id="local-6989586621682766478"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766478"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-862"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766479"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682766479"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe TyThing
</span><a href="GHC.Types.Name.html#wiredInNameTyThing_maybe"><span class="hs-identifier hs-var">wiredInNameTyThing_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-863"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setWiredInNameSpace"><span class="hs-identifier hs-var">setWiredInNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682766479"><span class="hs-identifier hs-var">thing</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766478"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-864"></span><span>    </span><span class="hs-comment">-- Preserve Exact Names for wired-in things,</span><span>
</span><span id="line-865"></span><span>    </span><span class="hs-comment">-- notably tuples and lists</span><span>
</span><span id="line-866"></span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module -&gt; OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Orig"><span class="hs-identifier hs-var">Orig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Name -&gt; Module
Name -&gt; Module
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766484"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-869"></span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>   </span><span class="hs-comment">-- This can happen when quoting and then</span><span>
</span><span id="line-871"></span><span>                </span><span class="hs-comment">-- splicing a fixity declaration for a type</span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; OccName -&gt; SrcSpan -&gt; Name
</span><a href="GHC.Types.Name.html#mkSystemNameAt"><span class="hs-identifier hs-var">mkSystemNameAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Unique
</span><a href="GHC.Types.Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766484"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-874"></span><span>    </span><span id="local-6989586621682766484"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621682766484"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766478"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766477"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setWiredInNameSpace"><span class="hs-identifier hs-type">setWiredInNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-877"></span><span id="setWiredInNameSpace"><span class="annot"><span class="annottext">setWiredInNameSpace :: TyThing -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setWiredInNameSpace"><span class="hs-identifier hs-var hs-var">setWiredInNameSpace</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TyThing.html#ATyCon"><span class="hs-identifier hs-type">ATyCon</span></a></span><span> </span><span id="local-6989586621682766490"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766490"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766491"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766491"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766491"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-879"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#ty_con_data_con"><span class="hs-identifier hs-var">ty_con_data_con</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766490"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-880"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcClsNameSpace"><span class="hs-identifier hs-var">isTcClsNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766491"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766490"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- No-op</span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setWiredInNameSpace"><span class="hs-identifier hs-var">setWiredInNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-type">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.ConLike.html#RealDataCon"><span class="hs-identifier hs-type">RealDataCon</span></a></span><span> </span><span id="local-6989586621682766498"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766498"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766499"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766499"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isTcClsNameSpace"><span class="hs-identifier hs-var">isTcClsNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766499"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#data_con_ty_con"><span class="hs-identifier hs-var">data_con_ty_con</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766498"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-886"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataConNameSpace"><span class="hs-identifier hs-var">isDataConNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766499"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-887"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766498"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- No-op</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setWiredInNameSpace"><span class="hs-identifier hs-var">setWiredInNameSpace</span></a></span><span> </span><span id="local-6989586621682766501"><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682766501"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span id="local-6989586621682766502"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766502"><span class="hs-identifier hs-var">ns</span></a></span></span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; RdrName
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;setWiredinNameSpace&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; SDoc
</span><a href="GHC.Types.Name.Occurrence.html#pprNameSpace"><span class="hs-identifier hs-var">pprNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682766502"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682766501"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-891"></span><span>
</span><span id="line-892"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#ty_con_data_con"><span class="hs-identifier hs-type">ty_con_data_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-893"></span><span id="ty_con_data_con"><span class="annot"><span class="annottext">ty_con_data_con :: TyCon -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#ty_con_data_con"><span class="hs-identifier hs-var hs-var">ty_con_data_con</span></a></span></span><span> </span><span id="local-6989586621682766506"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766506"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-894"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTupleTyCon"><span class="hs-identifier hs-var">isTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766506"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-895"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766507"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766507"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe DataCon
</span><a href="GHC.Core.TyCon.html#tyConSingleDataCon_maybe"><span class="hs-identifier hs-var">tyConSingleDataCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766506"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-896"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766507"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766506"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#listTyConKey"><span class="hs-identifier hs-var">listTyConKey</span></a></span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Types.html#nilDataConName"><span class="hs-identifier hs-var">nilDataConName</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-comment">-- See Note [setRdrNameSpace for wired-in names]</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#srcDataName"><span class="hs-identifier hs-var">srcDataName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766506"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#data_con_ty_con"><span class="hs-identifier hs-type">data_con_ty_con</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-905"></span><span id="data_con_ty_con"><span class="annot"><span class="annottext">data_con_ty_con :: DataCon -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#data_con_ty_con"><span class="hs-identifier hs-var hs-var">data_con_ty_con</span></a></span></span><span> </span><span id="local-6989586621682766509"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766509"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-906"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766510"><span class="annot"><span class="annottext">tc :: TyCon
</span><a href="#local-6989586621682766510"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766509"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-907"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTupleTyCon"><span class="hs-identifier hs-var">isTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766510"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-908"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682766510"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766509"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#nilDataConKey"><span class="hs-identifier hs-var">nilDataConKey</span></a></span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Types.html#listTyConName"><span class="hs-identifier hs-var">listTyConName</span></a></span><span>
</span><span id="line-912"></span><span>
</span><span id="line-913"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-comment">-- See Note [setRdrNameSpace for wired-in names]</span><span>
</span><span id="line-914"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#setOccNameSpace"><span class="hs-identifier hs-var">setOccNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tcClsName"><span class="hs-identifier hs-var">tcClsName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621682766509"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span class="hs-comment">{- Note [setRdrNameSpace for wired-in names]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In GHC.Types, which declares (:), we have
  infixr 5 :
The ambiguity about which &quot;:&quot; is meant is resolved by parsing it as a
data constructor, but then using dataTcOccs to try the type constructor too;
and that in turn calls setRdrNameSpace to change the name-space of &quot;:&quot; to
tcClsName.  There isn't a corresponding &quot;:&quot; type constructor, but it's painful
to make setRdrNameSpace partial, so we just make an Unqual name instead. It
really doesn't matter!
-}</span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span id="local-6989586621682764555"><span id="local-6989586621682764556"><span class="annot"><a href="GHC.Parser.PostProcess.html#eitherToP"><span class="hs-identifier hs-type">eitherToP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764555"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682764556"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764555"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764556"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-931"></span><span class="hs-comment">-- Adapts the Either monad to the P monad</span><span>
</span><span id="line-932"></span><span id="eitherToP"><span class="annot"><span class="annottext">eitherToP :: forall (m :: * -&gt; *) a.
MonadP m =&gt;
Either (MsgEnvelope PsMessage) a -&gt; m a
</span><a href="GHC.Parser.PostProcess.html#eitherToP"><span class="hs-identifier hs-var hs-var">eitherToP</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682766517"><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682766517"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; m a
forall a. MsgEnvelope PsMessage -&gt; m a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682766517"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-933"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#eitherToP"><span class="hs-identifier hs-var">eitherToP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682766518"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766518"><span class="hs-identifier hs-var">thing</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766518"><span class="hs-identifier hs-var">thing</span></a></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-type">checkTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-936"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsQTyVars"><span class="hs-identifier hs-type">LHsQTyVars</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- the synthesized type variables</span><span>
</span><span id="line-937"></span><span class="hs-comment">-- ^ Check whether the given list of type parameters are all type variables</span><span>
</span><span id="line-938"></span><span class="hs-comment">-- (possibly with a kind signature).</span><span>
</span><span id="line-939"></span><span id="checkTyVars"><span class="annot"><span class="annottext">checkTyVars :: SDoc
-&gt; SDoc
-&gt; LocatedN RdrName
-&gt; [LHsTypeArg GhcPs]
-&gt; P (LHsQTyVars GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkTyVars"><span class="hs-identifier hs-var hs-var">checkTyVars</span></a></span></span><span> </span><span id="local-6989586621682766519"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682766519"><span class="hs-identifier hs-var">pp_what</span></a></span></span><span> </span><span id="local-6989586621682766520"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682766520"><span class="hs-identifier hs-var">equals_or_where</span></a></span></span><span> </span><span id="local-6989586621682766521"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766521"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621682766522"><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621682766522"><span class="hs-identifier hs-var">tparms</span></a></span></span><span>
</span><span id="line-940"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682766523"><span class="annot"><a href="#local-6989586621682766523"><span class="hs-identifier hs-var">tvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; P (GenLocated
         SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; P [GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs))
</span><a href="#local-6989586621682766524"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766522"><span class="hs-identifier hs-var">tparms</span></a></span><span>
</span><span id="line-941"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#mkHsQTvs"><span class="hs-identifier hs-type">mkHsQTvs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766523"><span class="hs-identifier hs-type">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-942"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-943"></span><span>    </span><span id="local-6989586621682766524"><span class="annot"><span class="annottext">check :: HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766524"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTypeArg"><span class="hs-identifier hs-type">HsTypeArg</span></a></span><span> </span><span id="local-6989586621682766527"><span class="annot"><span class="annottext">XTypeArg GhcPs
</span><a href="#local-6989586621682766527"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682766528"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766528"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766529"><span class="hs-identifier hs-var">chkParens</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBndrInvisible GhcPs -&gt; HsBndrVis GhcPs
forall pass. XBndrInvisible pass -&gt; HsBndrVis pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrInvisible"><span class="hs-identifier hs-var">HsBndrInvisible</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeArg GhcPs
XBndrInvisible GhcPs
</span><a href="#local-6989586621682766527"><span class="hs-identifier hs-var">at</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766528"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><a href="#local-6989586621682766524"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-type">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">XValArg GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766532"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766532"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766529"><span class="hs-identifier hs-var">chkParens</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBndrRequired GhcPs -&gt; HsBndrVis GhcPs
forall pass. XBndrRequired pass -&gt; HsBndrVis pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrRequired"><span class="hs-identifier hs-var">HsBndrRequired</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrRequired GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766532"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-945"></span><span>    </span><span class="annot"><a href="#local-6989586621682766524"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArgPar"><span class="hs-identifier hs-type">HsArgPar</span></a></span><span> </span><span id="local-6989586621682766535"><span class="annot"><span class="annottext">XArgPar GhcPs
</span><a href="#local-6989586621682766535"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs))
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; P (GenLocated
         SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)))
-&gt; MsgEnvelope PsMessage
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
XArgPar GhcPs
</span><a href="#local-6989586621682766535"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-946"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMalformedDecl"><span class="hs-identifier hs-var">PsErrMalformedDecl</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682766519"><span class="hs-identifier hs-var">pp_what</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766521"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>        </span><span class="hs-comment">-- Keep around an action for adjusting the annotations of extra parens</span><span>
</span><span id="line-948"></span><span>    </span><span class="annot"><a href="#local-6989586621682766529"><span class="hs-identifier hs-type">chkParens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-949"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-950"></span><span>    </span><span id="local-6989586621682766529"><span class="annot"><span class="annottext">chkParens :: [EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766529"><span class="hs-identifier hs-var hs-var">chkParens</span></a></span></span><span> </span><span id="local-6989586621682766537"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766537"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766538"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766538"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766539"><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766539"><span class="hs-identifier hs-var">bvis</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766540"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766540"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="annot"><span class="annottext">XParTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766542"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766542"><span class="hs-identifier hs-var">lt</span></a></span></span><span> </span><span id="local-6989586621682766543"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766543"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-951"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-952"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682766544"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766544"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766545"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766545"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; (EpaLocation, EpaLocation)
</span><a href="GHC.Parser.Lexer.html#mkParensLocs"><span class="hs-identifier hs-var">mkParensLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; RealSrcSpan
</span><a href="GHC.Parser.Annotation.html#realSrcSpan"><span class="hs-identifier hs-var">realSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; RealSrcSpan) -&gt; SrcSpan -&gt; RealSrcSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766540"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-953"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682766548"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766548"><span class="hs-identifier hs-var">lt'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766540"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766542"><span class="hs-identifier hs-var">lt</span></a></span><span>
</span><span id="line-954"></span><span>        </span><span class="hs-keyword">in</span><span>
</span><span id="line-955"></span><span>          </span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766529"><span class="hs-identifier hs-var">chkParens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766544"><span class="hs-identifier hs-var">o</span></a></span><span class="annot"><span class="annottext">EpaLocation -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766537"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766545"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">EpaLocation -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766538"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766539"><span class="hs-identifier hs-var">bvis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766548"><span class="hs-identifier hs-var">lt'</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766543"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-956"></span><span>    </span><span class="annot"><a href="#local-6989586621682766529"><span class="hs-identifier hs-var">chkParens</span></a></span><span> </span><span id="local-6989586621682766549"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766549"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766550"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766550"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766551"><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766551"><span class="hs-identifier hs-var">bvis</span></a></span></span><span> </span><span id="local-6989586621682766552"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766552"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766553"><span class="hs-identifier hs-var">chk</span></a></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766549"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766550"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766551"><span class="hs-identifier hs-var">bvis</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766552"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span>        </span><span class="hs-comment">-- Check that the name space is correct!</span><span>
</span><span id="line-959"></span><span>    </span><span class="annot"><a href="#local-6989586621682766553"><span class="hs-identifier hs-type">chk</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>    </span><span id="local-6989586621682766553"><span class="annot"><span class="annottext">chk :: [EpaLocation]
-&gt; [EpaLocation]
-&gt; HsBndrVis GhcPs
-&gt; LHsType GhcPs
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
</span><a href="#local-6989586621682766553"><span class="hs-identifier hs-var hs-var">chk</span></a></span></span><span> </span><span id="local-6989586621682766554"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766554"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766555"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766555"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766556"><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766556"><span class="hs-identifier hs-var">bvis</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766557"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766557"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsKindSig"><span class="hs-identifier hs-type">HsKindSig</span></a></span><span> </span><span id="local-6989586621682766559"><span class="annot"><span class="annottext">XKindSig GhcPs
</span><a href="#local-6989586621682766559"><span class="hs-identifier hs-var">tok_dc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766560"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766560"><span class="hs-identifier hs-var">annt</span></a></span></span><span> </span><span id="local-6989586621682766561"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766561"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766562"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766562"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766563"><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766563"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766564"><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766564"><span class="hs-identifier hs-var">bvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
</span><a href="#local-6989586621682766565"><span class="hs-identifier hs-var">match_bndr_var</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766561"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-962"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-963"></span><span>                </span><span id="local-6989586621682766566"><span class="annot"><span class="annottext">bkind :: HsBndrKind GhcPs
</span><a href="#local-6989586621682766566"><span class="hs-identifier hs-var hs-var">bkind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrKind GhcPs -&gt; LHsType GhcPs -&gt; HsBndrKind GhcPs
forall pass. XBndrKind pass -&gt; LHsKind pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-var">HsBndrKind</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrKind GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766562"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-964"></span><span>                </span><span id="local-6989586621682766568"><span class="annot"><span class="annottext">an :: [EpaLocation]
</span><a href="#local-6989586621682766568"><span class="hs-identifier hs-var hs-var">an</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766554"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766555"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-965"></span><span>              </span><span class="hs-keyword">in</span><span>
</span><span id="line-966"></span><span>                </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr (HsBndrVis GhcPs) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; [EpaLocation] -&gt; SrcSpanAnnA
forall an. EpAnn an -&gt; [EpaLocation] -&gt; EpAnn an
</span><a href="GHC.Parser.Annotation.html#widenLocatedAnL"><span class="hs-identifier hs-var">widenLocatedAnL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766557"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; SrcSpanAnnA
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766560"><span class="hs-identifier hs-var">annt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBndrVis GhcPs -&gt; EpaLocation
</span><a href="#local-6989586621682766570"><span class="hs-identifier hs-var">for_widening</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766556"><span class="hs-identifier hs-var">bvis</span></a></span><span class="annot"><span class="annottext">EpaLocation -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766568"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
-&gt; HsBndrVis GhcPs
-&gt; HsBndrVar GhcPs
-&gt; HsBndrKind GhcPs
-&gt; HsTyVarBndr (HsBndrVis GhcPs) GhcPs
forall flag pass.
XTyVarBndr pass
-&gt; flag
-&gt; HsBndrVar pass
-&gt; HsBndrKind pass
-&gt; HsTyVarBndr flag pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-var">HsTvb</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation] -&gt; EpToken &quot;'&quot; -&gt; TokDcolon -&gt; AnnTyVarBndr
</span><a href="GHC.Hs.Type.html#AnnTyVarBndr"><span class="hs-identifier hs-var">AnnTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766554"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766555"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766563"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">XKindSig GhcPs
TokDcolon
</span><a href="#local-6989586621682766559"><span class="hs-identifier hs-var">tok_dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766556"><span class="hs-identifier hs-var">bvis</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766564"><span class="hs-identifier hs-var">bvar</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621682766566"><span class="hs-identifier hs-var">bkind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-968"></span><span>    </span><span class="annot"><a href="#local-6989586621682766553"><span class="hs-identifier hs-var">chk</span></a></span><span> </span><span id="local-6989586621682766572"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766572"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766573"><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766573"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766574"><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766574"><span class="hs-identifier hs-var">bvis</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766575"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766575"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682766576"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766576"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766577"><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766577"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766578"><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766578"><span class="hs-identifier hs-var">bvar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
</span><a href="#local-6989586621682766565"><span class="hs-identifier hs-var">match_bndr_var</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766576"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-970"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-971"></span><span>                </span><span id="local-6989586621682766579"><span class="annot"><span class="annottext">bkind :: HsBndrKind GhcPs
</span><a href="#local-6989586621682766579"><span class="hs-identifier hs-var hs-var">bkind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrNoKind GhcPs -&gt; HsBndrKind GhcPs
forall pass. XBndrNoKind pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrNoKind"><span class="hs-identifier hs-var">HsBndrNoKind</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrNoKind GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-972"></span><span>                </span><span id="local-6989586621682766581"><span class="annot"><span class="annottext">an :: [EpaLocation]
</span><a href="#local-6989586621682766581"><span class="hs-identifier hs-var hs-var">an</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766572"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766573"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-973"></span><span>              </span><span class="hs-keyword">in</span><span>
</span><span id="line-974"></span><span>                </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr (HsBndrVis GhcPs) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr (HsBndrVis GhcPs) GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; [EpaLocation] -&gt; SrcSpanAnnA
forall an. EpAnn an -&gt; [EpaLocation] -&gt; EpAnn an
</span><a href="GHC.Parser.Annotation.html#widenLocatedAnL"><span class="hs-identifier hs-var">widenLocatedAnL</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766575"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBndrVis GhcPs -&gt; EpaLocation
</span><a href="#local-6989586621682766570"><span class="hs-identifier hs-var">for_widening</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766574"><span class="hs-identifier hs-var">bvis</span></a></span><span class="annot"><span class="annottext">EpaLocation -&gt; [EpaLocation] -&gt; [EpaLocation]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766581"><span class="hs-identifier hs-var">an</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-975"></span><span>                                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
-&gt; HsBndrVis GhcPs
-&gt; HsBndrVar GhcPs
-&gt; HsBndrKind GhcPs
-&gt; HsTyVarBndr (HsBndrVis GhcPs) GhcPs
forall flag pass.
XTyVarBndr pass
-&gt; flag
-&gt; HsBndrVar pass
-&gt; HsBndrKind pass
-&gt; HsTyVarBndr flag pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-var">HsTvb</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation]
-&gt; [EpaLocation] -&gt; EpToken &quot;'&quot; -&gt; TokDcolon -&gt; AnnTyVarBndr
</span><a href="GHC.Hs.Type.html#AnnTyVarBndr"><span class="hs-identifier hs-var">AnnTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpaLocation] -&gt; [EpaLocation]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766572"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><a href="#local-6989586621682766573"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766577"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">TokDcolon
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><a href="#local-6989586621682766574"><span class="hs-identifier hs-var">bvis</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrVar GhcPs
</span><a href="#local-6989586621682766578"><span class="hs-identifier hs-var">bvar</span></a></span><span> </span><span class="annot"><span class="annottext">HsBndrKind GhcPs
</span><a href="#local-6989586621682766579"><span class="hs-identifier hs-var">bkind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>    </span><span class="annot"><a href="#local-6989586621682766553"><span class="hs-identifier hs-var">chk</span></a></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[EpaLocation]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766582"><span class="annot"><span class="annottext">t :: LHsType GhcPs
</span><a href="#local-6989586621682766582"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766583"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766583"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-977"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs))
-&gt; MsgEnvelope PsMessage
-&gt; P (LHsTyVarBndr (HsBndrVis GhcPs) GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766583"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-978"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs
-&gt; SDoc -&gt; RdrName -&gt; [LHsTypeArg GhcPs] -&gt; SDoc -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnexpectedTypeInDecl"><span class="hs-identifier hs-var">PsErrUnexpectedTypeInDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766582"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682766519"><span class="hs-identifier hs-var">pp_what</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766521"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsTypeArg GhcPs]
</span><a href="#local-6989586621682766522"><span class="hs-identifier hs-var">tparms</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682766520"><span class="hs-identifier hs-var">equals_or_where</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-979"></span><span>
</span><span id="line-980"></span><span>    </span><span class="annot"><a href="#local-6989586621682766565"><span class="hs-identifier hs-type">match_bndr_var</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;'&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-981"></span><span>    </span><span id="local-6989586621682766565"><span class="annot"><span class="annottext">match_bndr_var :: HsType GhcPs -&gt; Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
</span><a href="#local-6989586621682766565"><span class="hs-identifier hs-var hs-var">match_bndr_var</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span id="local-6989586621682766586"><span class="annot"><span class="annottext">XTyVar GhcPs
</span><a href="#local-6989586621682766586"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766587"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682766587"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTyVar"><span class="hs-identifier hs-var">isRdrTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766587"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;'&quot;, HsBndrVar GhcPs)
-&gt; Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVar GhcPs
EpToken &quot;'&quot;
</span><a href="#local-6989586621682766586"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsBndrVar GhcPs
forall pass. XBndrVar pass -&gt; LIdP pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-var">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrVar GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682766587"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>    </span><span class="annot"><a href="#local-6989586621682766565"><span class="hs-identifier hs-var">match_bndr_var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardTy"><span class="hs-identifier hs-type">HsWildCardTy</span></a></span><span> </span><span id="local-6989586621682766591"><span class="annot"><span class="annottext">XWildCardTy GhcPs
</span><a href="#local-6989586621682766591"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;'&quot;, HsBndrVar GhcPs)
-&gt; Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcPs -&gt; HsBndrVar GhcPs
forall pass. XBndrWildCard pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-var">HsBndrWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">XWildCardTy GhcPs
XBndrWildCard GhcPs
</span><a href="#local-6989586621682766591"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>    </span><span class="annot"><a href="#local-6989586621682766565"><span class="hs-identifier hs-var">match_bndr_var</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;'&quot;, HsBndrVar GhcPs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span>    </span><span class="hs-comment">-- Return a EpaLocation for use in widenLocatedAnL.</span><span>
</span><span id="line-988"></span><span>    </span><span class="annot"><a href="#local-6989586621682766570"><span class="hs-identifier hs-type">for_widening</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVis"><span class="hs-identifier hs-type">HsBndrVis</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span>
</span><span id="line-989"></span><span>    </span><span id="local-6989586621682766570"><span class="annot"><span class="annottext">for_widening :: HsBndrVis GhcPs -&gt; EpaLocation
</span><a href="#local-6989586621682766570"><span class="hs-identifier hs-var hs-var">for_widening</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrInvisible"><span class="hs-identifier hs-type">HsBndrInvisible</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span id="local-6989586621682766593"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766593"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766593"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-990"></span><span>    </span><span class="annot"><a href="#local-6989586621682766570"><span class="hs-identifier hs-var">for_widening</span></a></span><span>  </span><span class="annot"><span class="annottext">HsBndrVis GhcPs
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>
</span><span id="line-993"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#whereDots"><span class="hs-identifier hs-type">whereDots</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#equalsDots"><span class="hs-identifier hs-type">equalsDots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-994"></span><span class="hs-comment">-- Second argument to checkTyVars</span><span>
</span><span id="line-995"></span><span id="whereDots"><span class="annot"><span class="annottext">whereDots :: SDoc
</span><a href="GHC.Parser.PostProcess.html#whereDots"><span class="hs-identifier hs-var hs-var">whereDots</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;where ...&quot;</span></span><span>
</span><span id="line-996"></span><span id="equalsDots"><span class="annot"><span class="annottext">equalsDots :: SDoc
</span><a href="GHC.Parser.PostProcess.html#equalsDots"><span class="hs-identifier hs-var hs-var">equalsDots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;= ...&quot;</span></span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkDatatypeContext"><span class="hs-identifier hs-type">checkDatatypeContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span id="checkDatatypeContext"><span class="annot"><span class="annottext">checkDatatypeContext :: Maybe (LHsContext GhcPs) -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#checkDatatypeContext"><span class="hs-identifier hs-var hs-var">checkDatatypeContext</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; P ()
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkDatatypeContext"><span class="hs-identifier hs-var">checkDatatypeContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766594"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621682766594"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682766595"><span class="annot"><a href="#local-6989586621682766595"><span class="hs-identifier hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; P Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#DatatypeContextsBit"><span class="hs-identifier hs-var">DatatypeContextsBit</span></a></span><span>
</span><span id="line-1002"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682766595"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-type">getLocA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766594"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1003"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalDataTypeContext"><span class="hs-identifier hs-type">PsErrIllegalDataTypeContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766594"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="hs-keyword">type</span><span> </span><span id="LRuleTyTmVar"><span class="annot"><a href="GHC.Parser.PostProcess.html#LRuleTyTmVar"><span class="hs-identifier hs-var">LRuleTyTmVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-type">RuleTyTmVar</span></a></span><span>
</span><span id="line-1006"></span><span class="hs-keyword">data</span><span> </span><span id="RuleTyTmVar"><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-var">RuleTyTmVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RuleTyTmVar"><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-var">RuleTyTmVar</span></a></span></span><span> </span><span class="annot"><a href="GHC.Hs.Type.html#AnnTyVarBndr"><span class="hs-identifier hs-type">AnnTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1007"></span><span class="annot"><span class="hs-comment">-- ^ Essentially a wrapper for a @RuleBndr GhcPs@</span></span><span>
</span><span id="line-1008"></span><span>
</span><span id="line-1009"></span><span class="hs-comment">-- turns RuleTyTmVars into RuleBnrs - this is straightforward</span><span>
</span><span id="line-1010"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRuleBndrs"><span class="hs-identifier hs-type">mkRuleBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#LRuleTyTmVar"><span class="hs-identifier hs-type">LRuleTyTmVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LRuleBndr"><span class="hs-identifier hs-type">LRuleBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1011"></span><span id="mkRuleBndrs"><span class="annot"><span class="annottext">mkRuleBndrs :: [LRuleTyTmVar] -&gt; [LRuleBndr GhcPs]
</span><a href="GHC.Parser.PostProcess.html#mkRuleBndrs"><span class="hs-identifier hs-var hs-var">mkRuleBndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LRuleTyTmVar -&gt; GenLocated EpAnnCO (RuleBndr GhcPs))
-&gt; [LRuleTyTmVar] -&gt; [GenLocated EpAnnCO (RuleBndr GhcPs)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RuleTyTmVar -&gt; RuleBndr GhcPs)
-&gt; LRuleTyTmVar -&gt; GenLocated EpAnnCO (RuleBndr GhcPs)
forall a b.
(a -&gt; b) -&gt; GenLocated EpAnnCO a -&gt; GenLocated EpAnnCO b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">RuleTyTmVar -&gt; RuleBndr GhcPs
</span><a href="#local-6989586621682766600"><span class="hs-identifier hs-var">cvt_one</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1012"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682766600"><span class="annot"><span class="annottext">cvt_one :: RuleTyTmVar -&gt; RuleBndr GhcPs
</span><a href="#local-6989586621682766600"><span class="hs-identifier hs-var hs-var">cvt_one</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-type">RuleTyTmVar</span></a></span><span> </span><span id="local-6989586621682766604"><span class="annot"><span class="annottext">AnnTyVarBndr
</span><a href="#local-6989586621682766604"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621682766605"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766605"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; RuleBndr GhcPs
forall pass. XCRuleBndr pass -&gt; LIdP pass -&gt; RuleBndr pass
</span><a href="Language.Haskell.Syntax.Decls.html#RuleBndr"><span class="hs-identifier hs-var">RuleBndr</span></a></span><span> </span><span class="annot"><span class="annottext">XCRuleBndr GhcPs
AnnTyVarBndr
</span><a href="#local-6989586621682766604"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766605"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1013"></span><span>        </span><span class="annot"><a href="#local-6989586621682766600"><span class="hs-identifier hs-var">cvt_one</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-type">RuleTyTmVar</span></a></span><span> </span><span id="local-6989586621682766607"><span class="annot"><span class="annottext">AnnTyVarBndr
</span><a href="#local-6989586621682766607"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621682766608"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766608"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766609"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766609"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1014"></span><span>          </span><span class="annot"><span class="annottext">XRuleBndrSig GhcPs
-&gt; XRec GhcPs (IdP GhcPs) -&gt; HsPatSigType GhcPs -&gt; RuleBndr GhcPs
forall pass.
XRuleBndrSig pass
-&gt; LIdP pass -&gt; HsPatSigType pass -&gt; RuleBndr pass
</span><a href="Language.Haskell.Syntax.Decls.html#RuleBndrSig"><span class="hs-identifier hs-var">RuleBndrSig</span></a></span><span> </span><span class="annot"><span class="annottext">XRuleBndrSig GhcPs
AnnTyVarBndr
</span><a href="#local-6989586621682766607"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766608"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnCO -&gt; LHsType GhcPs -&gt; HsPatSigType GhcPs
</span><a href="GHC.Hs.Type.html#mkHsPatSigType"><span class="hs-identifier hs-var">mkHsPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766609"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span class="hs-comment">-- turns RuleTyTmVars into HsTyVarBndrs - this is more interesting</span><span>
</span><span id="line-1017"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRuleTyVarBndrs"><span class="hs-identifier hs-type">mkRuleTyVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#LRuleTyTmVar"><span class="hs-identifier hs-type">LRuleTyTmVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1018"></span><span id="mkRuleTyVarBndrs"><span class="annot"><span class="annottext">mkRuleTyVarBndrs :: [LRuleTyTmVar] -&gt; [LHsTyVarBndr () GhcPs]
</span><a href="GHC.Parser.PostProcess.html#mkRuleTyVarBndrs"><span class="hs-identifier hs-var hs-var">mkRuleTyVarBndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LRuleTyTmVar -&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
-&gt; [LRuleTyTmVar]
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; LHsTyVarBndr () GhcPs -&gt; LHsTyVarBndr () GhcPs
forall flag.
NameSpace -&gt; LHsTyVarBndr flag GhcPs -&gt; LHsTyVarBndr flag GhcPs
</span><a href="GHC.Parser.PostProcess.html#setLHsTyVarBndrNameSpace"><span class="hs-identifier hs-var">setLHsTyVarBndrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tvName"><span class="hs-identifier hs-var">tvName</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
 -&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
-&gt; (LRuleTyTmVar -&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs))
-&gt; LRuleTyTmVar
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LRuleTyTmVar -&gt; GenLocated SrcSpanAnnA (HsTyVarBndr () GhcPs)
forall {a} {l}.
(HasLoc a, HasAnnotation l) =&gt;
GenLocated a RuleTyTmVar -&gt; GenLocated l (HsTyVarBndr () GhcPs)
</span><a href="#local-6989586621682766615"><span class="hs-identifier hs-var">cvt_one</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682766615"><span class="annot"><span class="annottext">cvt_one :: GenLocated a RuleTyTmVar -&gt; GenLocated l (HsTyVarBndr () GhcPs)
</span><a href="#local-6989586621682766615"><span class="hs-identifier hs-var hs-var">cvt_one</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766622"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766622"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#RuleTyTmVar"><span class="hs-identifier hs-type">RuleTyTmVar</span></a></span><span> </span><span id="local-6989586621682766623"><span class="annot"><span class="annottext">AnnTyVarBndr
</span><a href="#local-6989586621682766623"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621682766624"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682766624"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682766625"><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682766625"><span class="hs-identifier hs-var">msig</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1020"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">l -&gt; HsTyVarBndr () GhcPs -&gt; GenLocated l (HsTyVarBndr () GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; l
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766622"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
-&gt; ()
-&gt; HsBndrVar GhcPs
-&gt; HsBndrKind GhcPs
-&gt; HsTyVarBndr () GhcPs
forall flag pass.
XTyVarBndr pass
-&gt; flag
-&gt; HsBndrVar pass
-&gt; HsBndrKind pass
-&gt; HsTyVarBndr flag pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTvb"><span class="hs-identifier hs-var">HsTvb</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVarBndr GhcPs
AnnTyVarBndr
</span><a href="#local-6989586621682766623"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XBndrVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsBndrVar GhcPs
forall pass. XBndrVar pass -&gt; LIdP pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-var">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrVar GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766624"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs) -&gt; HsBndrKind GhcPs
forall {pass}.
(XBndrKind pass ~ NoExtField, XBndrNoKind pass ~ NoExtField) =&gt;
Maybe (XRec pass (HsKind pass)) -&gt; HsBndrKind pass
</span><a href="#local-6989586621682766626"><span class="hs-identifier hs-var">cvt_sig</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsType GhcPs)
</span><a href="#local-6989586621682766625"><span class="hs-identifier hs-var">msig</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1021"></span><span>        </span><span id="local-6989586621682766626"><span class="annot"><span class="annottext">cvt_sig :: Maybe (XRec pass (HsKind pass)) -&gt; HsBndrKind pass
</span><a href="#local-6989586621682766626"><span class="hs-identifier hs-var hs-var">cvt_sig</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec pass (HsKind pass))
</span><span class="hs-identifier hs-var">Nothing</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrNoKind pass -&gt; HsBndrKind pass
forall pass. XBndrNoKind pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrNoKind"><span class="hs-identifier hs-var">HsBndrNoKind</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XBndrNoKind pass
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1022"></span><span>        </span><span class="annot"><a href="#local-6989586621682766626"><span class="hs-identifier hs-var">cvt_sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766631"><span class="annot"><span class="annottext">XRec pass (HsKind pass)
</span><a href="#local-6989586621682766631"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrKind pass -&gt; XRec pass (HsKind pass) -&gt; HsBndrKind pass
forall pass. XBndrKind pass -&gt; LHsKind pass -&gt; HsBndrKind pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrKind"><span class="hs-identifier hs-var">HsBndrKind</span></a></span><span>   </span><span class="annot"><span class="annottext">NoExtField
XBndrKind pass
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec pass (HsKind pass)
</span><a href="#local-6989586621682766631"><span class="hs-identifier hs-var">sig</span></a></span><span>
</span><span id="line-1023"></span><span>
</span><span id="line-1024"></span><span class="hs-comment">-- See Note [Parsing explicit foralls in Rules] in Parser.y</span><span>
</span><span id="line-1025"></span><span id="local-6989586621682764599"><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRuleTyVarBndrNames"><span class="hs-identifier hs-type">checkRuleTyVarBndrNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764599"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1026"></span><span id="checkRuleTyVarBndrNames"><span class="annot"><span class="annottext">checkRuleTyVarBndrNames :: forall flag. [LHsTyVarBndr flag GhcPs] -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#checkRuleTyVarBndrNames"><span class="hs-identifier hs-var hs-var">checkRuleTyVarBndrNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; P ()) -&gt; [LocatedN RdrName] -&gt; P ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; P ()
forall {f :: * -&gt; *} {a}.
(MonadP f, HasLoc a) =&gt;
GenLocated a RdrName -&gt; f ()
</span><a href="#local-6989586621682766637"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">([LocatedN RdrName] -&gt; P ())
-&gt; ([GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
    -&gt; [LocatedN RdrName])
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; P ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
 -&gt; Maybe (LocatedN RdrName))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; [LocatedN RdrName]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs -&gt; Maybe (XRec GhcPs (IdP GhcPs))
HsTyVarBndr flag GhcPs -&gt; Maybe (LocatedN RdrName)
forall flag (p :: Pass).
HsTyVarBndr flag (GhcPass p) -&gt; Maybe (LIdP (GhcPass p))
</span><a href="GHC.Hs.Type.html#hsTyVarLName"><span class="hs-identifier hs-var">hsTyVarLName</span></a></span><span> </span><span class="annot"><span class="annottext">(HsTyVarBndr flag GhcPs -&gt; Maybe (LocatedN RdrName))
-&gt; (GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
    -&gt; HsTyVarBndr flag GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
-&gt; Maybe (LocatedN RdrName)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
-&gt; HsTyVarBndr flag GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1027"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682766637"><span class="annot"><span class="annottext">check :: GenLocated a RdrName -&gt; f ()
</span><a href="#local-6989586621682766637"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766657"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766657"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-type">Unqual</span></a></span><span> </span><span id="local-6989586621682766658"><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766658"><span class="hs-identifier hs-var">occ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1028"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; f () -&gt; f ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766658"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; [FastString] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;family&quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;role&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1029"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; f ()
forall a. MsgEnvelope PsMessage -&gt; f a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; f ()) -&gt; MsgEnvelope PsMessage -&gt; f ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766657"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1030"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrParseErrorOnInput"><span class="hs-identifier hs-var">PsErrParseErrorOnInput</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766658"><span class="hs-identifier hs-var">occ</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1031"></span><span>        </span><span class="annot"><a href="#local-6989586621682766637"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated a RdrName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; f ()
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checkRuleTyVarBndrNames&quot;</span></span><span>
</span><span id="line-1032"></span><span>
</span><span id="line-1033"></span><span id="local-6989586621682764612"><span id="local-6989586621682764613"><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRecordSyntax"><span class="hs-identifier hs-type">checkRecordSyntax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764612"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764613"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764613"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764612"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764613"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1034"></span><span id="checkRecordSyntax"><span class="annot"><span class="annottext">checkRecordSyntax :: forall (m :: * -&gt; *) a.
(MonadP m, Outputable a) =&gt;
LocatedA a -&gt; m (LocatedA a)
</span><a href="GHC.Parser.PostProcess.html#checkRecordSyntax"><span class="hs-identifier hs-var hs-var">checkRecordSyntax</span></a></span></span><span> </span><span id="local-6989586621682766676"><span class="annot"><span class="annottext">lr :: LocatedA a
</span><a href="#local-6989586621682766676"><span class="hs-identifier hs-var">lr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766677"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766677"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766678"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682766678"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682766679"><span class="annot"><a href="#local-6989586621682766679"><span class="hs-identifier hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; m Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#TraditionalRecordSyntaxBit"><span class="hs-identifier hs-var">TraditionalRecordSyntaxBit</span></a></span><span>
</span><span id="line-1036"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682766679"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766677"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1037"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalTraditionalRecordSyntax"><span class="hs-identifier hs-type">PsErrIllegalTraditionalRecordSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-type">ppr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766678"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682766676"><span class="hs-identifier hs-type">lr</span></a></span><span>
</span><span id="line-1039"></span><span>
</span><span id="line-1040"></span><span class="hs-comment">-- | Check if the gadt_constrlist is empty. Only raise parse error for</span><span>
</span><span id="line-1041"></span><span class="hs-comment">-- `data T where` to avoid affecting existing error message, see #8258.</span><span>
</span><span id="line-1042"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkEmptyGADTs"><span class="hs-identifier hs-type">checkEmptyGADTs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1044"></span><span id="checkEmptyGADTs"><span class="annot"><span class="annottext">checkEmptyGADTs :: Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;), [LConDecl GhcPs])
-&gt; P (Located
        ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;), [LConDecl GhcPs]))
</span><a href="GHC.Parser.PostProcess.html#checkEmptyGADTs"><span class="hs-identifier hs-var hs-var">checkEmptyGADTs</span></a></span></span><span> </span><span id="local-6989586621682766682"><span class="annot"><span class="annottext">gadts :: Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;), [LConDecl GhcPs])
</span><a href="#local-6989586621682766682"><span class="hs-identifier hs-var">gadts</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766683"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766683"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>           </span><span class="hs-comment">-- Empty GADT declaration.</span><span>
</span><span id="line-1045"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682766684"><span class="annot"><a href="#local-6989586621682766684"><span class="hs-identifier hs-var">gadtSyntax</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; P Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#GadtSyntaxBit"><span class="hs-identifier hs-var">GadtSyntaxBit</span></a></span><span>   </span><span class="hs-comment">-- GADTs implies GADTSyntax</span><span>
</span><span id="line-1046"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682766684"><span class="hs-identifier hs-type">gadtSyntax</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766683"><span class="hs-identifier hs-type">span</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1047"></span><span>                                          </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalWhereInDataDecl"><span class="hs-identifier hs-type">PsErrIllegalWhereInDataDecl</span></a></span><span>
</span><span id="line-1048"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682766682"><span class="hs-identifier hs-type">gadts</span></a></span><span>
</span><span id="line-1049"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkEmptyGADTs"><span class="hs-identifier hs-var">checkEmptyGADTs</span></a></span><span> </span><span id="local-6989586621682766687"><span class="annot"><span class="annottext">Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;), [LConDecl GhcPs])
</span><a href="#local-6989586621682766687"><span class="hs-identifier hs-var">gadts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;),
   [GenLocated SrcSpanAnnA (ConDecl GhcPs)])
-&gt; P (Located
        ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;),
         [GenLocated SrcSpanAnnA (ConDecl GhcPs)]))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;), [LConDecl GhcPs])
Located
  ((EpToken &quot;where&quot;, EpToken &quot;{&quot;, EpToken &quot;}&quot;),
   [GenLocated SrcSpanAnnA (ConDecl GhcPs)])
</span><a href="#local-6989586621682766687"><span class="hs-identifier hs-var">gadts</span></a></span><span>              </span><span class="hs-comment">-- Ordinary GADT declaration.</span><span>
</span><span id="line-1050"></span><span>
</span><span id="line-1051"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-type">checkTyClHdr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>               </span><span class="hs-comment">-- True  &lt;=&gt; class header</span><span>
</span><span id="line-1052"></span><span>                                   </span><span class="hs-comment">-- False &lt;=&gt; type header</span><span>
</span><span id="line-1053"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1054"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- the head symbol (type or class name)</span><span>
</span><span id="line-1055"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTypeArg"><span class="hs-identifier hs-type">LHsTypeArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- parameters of head symbol</span><span>
</span><span id="line-1056"></span><span>                   </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#LexicalFixity"><span class="hs-identifier hs-type">LexicalFixity</span></a></span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- the declaration is in infix format</span><span>
</span><span id="line-1057"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- API Annotation for HsParTy</span><span>
</span><span id="line-1058"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- when stripping parens</span><span>
</span><span id="line-1059"></span><span>                   </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- Accumulated comments from re-arranging</span><span>
</span><span id="line-1060"></span><span class="hs-comment">-- Well-formedness check and decomposition of type and class heads.</span><span>
</span><span id="line-1061"></span><span class="hs-comment">-- Decomposes   T ty1 .. tyn   into    (T, [ty1, ..., tyn])</span><span>
</span><span id="line-1062"></span><span class="hs-comment">--              Int :*: Bool   into    (:*:, [Int, Bool])</span><span>
</span><span id="line-1063"></span><span class="hs-comment">-- returning the pieces</span><span>
</span><span id="line-1064"></span><span id="checkTyClHdr"><span class="annot"><span class="annottext">checkTyClHdr :: Bool
-&gt; LHsType GhcPs
-&gt; P (LocatedN RdrName, [LHsTypeArg GhcPs], LexicalFixity,
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkTyClHdr"><span class="hs-identifier hs-var hs-var">checkTyClHdr</span></a></span></span><span> </span><span id="local-6989586621682766688"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682766688"><span class="hs-identifier hs-var">is_cls</span></a></span></span><span> </span><span id="local-6989586621682766689"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766689"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1065"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766690"><span class="hs-identifier hs-var">goL</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766689"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a></span><span>
</span><span id="line-1066"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1067"></span><span>    </span><span id="local-6989586621682766690"><span class="annot"><span class="annottext">goL :: EpAnnComments
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766690"><span class="hs-identifier hs-var hs-var">goL</span></a></span></span><span> </span><span id="local-6989586621682766691"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766691"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766692"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766692"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682766693"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766693"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766694"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766694"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766695"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766695"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766696"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766696"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766697"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766697"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
-&gt; SrcSpanAnnA
-&gt; HsType GhcPs
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766691"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766692"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766693"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766694"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766695"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766696"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766697"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1068"></span><span>
</span><span id="line-1069"></span><span>    </span><span class="hs-comment">-- workaround to define '*' despite StarIsType</span><span>
</span><span id="line-1070"></span><span>    </span><span id="local-6989586621682766698"><span class="annot"><span class="annottext">go :: EpAnnComments
-&gt; SrcSpanAnnA
-&gt; HsType GhcPs
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766698"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682766699"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766699"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766700"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766700"><span class="hs-identifier hs-var">ll</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span id="local-6989586621682766701"><span class="annot"><span class="annottext">XParTy GhcPs
</span><a href="#local-6989586621682766701"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766702"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766702"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsStarTy"><span class="hs-identifier hs-type">HsStarTy</span></a></span><span> </span><span class="annot"><span class="annottext">XStarTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766704"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682766704"><span class="hs-identifier hs-var">isUni</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766705"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766705"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766706"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766706"><span class="hs-identifier hs-var">ops'</span></a></span></span><span> </span><span id="local-6989586621682766707"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766707"><span class="hs-identifier hs-var">cps'</span></a></span></span><span> </span><span id="local-6989586621682766708"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766708"><span class="hs-identifier hs-var">fix</span></a></span></span><span>
</span><span id="line-1071"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-var">addPsMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766702"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsWarnStarBinder"><span class="hs-identifier hs-var">PsWarnStarBinder</span></a></span><span>
</span><span id="line-1072"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766711"><span class="annot"><span class="annottext">name :: OccName
</span><a href="#local-6989586621682766711"><span class="hs-identifier hs-var hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkOccNameFS"><span class="hs-identifier hs-var">mkOccNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tcClsName"><span class="hs-identifier hs-var">tcClsName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#starSym"><span class="hs-identifier hs-var">starSym</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682766704"><span class="hs-identifier hs-var">isUni</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766713"><span class="annot"><span class="annottext">a' :: SrcSpanAnnN
</span><a href="#local-6989586621682766713"><span class="hs-identifier hs-var hs-var">a'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; SrcSpanAnnA -&gt; (EpToken &quot;(&quot;, EpToken &quot;)&quot;) -&gt; SrcSpanAnnN
</span><a href="#local-6989586621682766714"><span class="hs-identifier hs-var">newAnns</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766700"><span class="hs-identifier hs-var">ll</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766702"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;(&quot;, EpToken &quot;)&quot;)
XParTy GhcPs
</span><a href="#local-6989586621682766701"><span class="hs-identifier hs-var">an</span></a></span><span>
</span><span id="line-1074"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName,
 [HsArg
    GhcPs
    (GenLocated SrcSpanAnnA (HsType GhcPs))
    (GenLocated SrcSpanAnnA (HsType GhcPs))],
 LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682766713"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#Unqual"><span class="hs-identifier hs-var">Unqual</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682766711"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766705"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766708"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1075"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766706"><span class="hs-identifier hs-var">ops'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766707"><span class="hs-identifier hs-var">cps'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766699"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1076"></span><span>
</span><span id="line-1077"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766715"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766715"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766716"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766716"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766717"><span class="annot"><span class="annottext">ltc :: XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682766717"><span class="hs-identifier hs-var">ltc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766718"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766718"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766719"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766719"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766720"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766720"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766721"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766721"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766722"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766722"><span class="hs-identifier hs-var">fix</span></a></span></span><span>
</span><span id="line-1078"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-var">isRdrTc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766718"><span class="hs-identifier hs-var">tc</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName,
 [HsArg
    GhcPs
    (GenLocated SrcSpanAnnA (HsType GhcPs))
    (GenLocated SrcSpanAnnA (HsType GhcPs))],
 LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766717"><span class="hs-identifier hs-var">ltc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766719"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766722"><span class="hs-identifier hs-var">fix</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766720"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766721"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766715"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766716"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766725"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766725"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766726"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766726"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">XOpTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766728"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766728"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682766729"><span class="annot"><span class="annottext">ltc :: XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682766729"><span class="hs-identifier hs-var">ltc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766730"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766730"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766731"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766731"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766732"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766732"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766733"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766733"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766734"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766734"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766735"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766735"><span class="hs-identifier hs-var">_fix</span></a></span></span><span>
</span><span id="line-1080"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-var">isRdrTc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766730"><span class="hs-identifier hs-var">tc</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName,
 [HsArg
    GhcPs
    (GenLocated SrcSpanAnnA (HsType GhcPs))
    (GenLocated SrcSpanAnnA (HsType GhcPs))],
 LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682766729"><span class="hs-identifier hs-var">ltc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682766736"><span class="hs-identifier hs-var">lhs</span></a></span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682766737"><span class="hs-identifier hs-var">rhs</span></a></span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766732"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766733"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766734"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766725"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766726"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1081"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682766736"><span class="annot"><span class="annottext">lhs :: HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682766736"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XValArg GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArg
     GhcPs
     (GenLocated SrcSpanAnnA (HsType GhcPs))
     (GenLocated SrcSpanAnnA (HsType GhcPs))
forall p tm ty. XValArg p -&gt; tm -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-var">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XValArg GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766728"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1082"></span><span>            </span><span id="local-6989586621682766737"><span class="annot"><span class="annottext">rhs :: HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682766737"><span class="hs-identifier hs-var hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XValArg GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArg
     GhcPs
     (GenLocated SrcSpanAnnA (HsType GhcPs))
     (GenLocated SrcSpanAnnA (HsType GhcPs))
forall p tm ty. XValArg p -&gt; tm -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-var">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XValArg GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766731"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1083"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766738"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766738"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766739"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766739"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766740"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766740"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766741"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766741"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766742"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766742"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>    </span><span id="local-6989586621682766743"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766743"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766744"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766744"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766745"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766745"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766746"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766746"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766690"><span class="hs-identifier hs-var">goL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766738"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766739"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766742"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766743"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766740"><span class="hs-identifier hs-var">o</span></a></span><span class="annot"><span class="annottext">EpToken &quot;(&quot; -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766744"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766741"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766745"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766746"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1084"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766747"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766747"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766748"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766748"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppTy"><span class="hs-identifier hs-type">HsAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766750"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766750"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682766751"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766751"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766752"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766752"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766753"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766753"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766754"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766754"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766755"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766755"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766690"><span class="hs-identifier hs-var">goL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766747"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766748"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766750"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XValArg GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArg
     GhcPs
     (GenLocated SrcSpanAnnA (HsType GhcPs))
     (GenLocated SrcSpanAnnA (HsType GhcPs))
forall p tm ty. XValArg p -&gt; tm -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-var">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XValArg GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766751"><span class="hs-identifier hs-var">t2</span></a></span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766752"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766753"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766754"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766755"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1085"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766756"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766756"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766757"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766757"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsAppKindTy"><span class="hs-identifier hs-type">HsAppKindTy</span></a></span><span> </span><span id="local-6989586621682766759"><span class="annot"><span class="annottext">XAppKindTy GhcPs
</span><a href="#local-6989586621682766759"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682766760"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766760"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621682766761"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766761"><span class="hs-identifier hs-var">ki</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766762"><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766762"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621682766763"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766763"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766764"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766764"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766765"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766765"><span class="hs-identifier hs-var">fix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; LexicalFixity
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><a href="#local-6989586621682766690"><span class="hs-identifier hs-var">goL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766756"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766757"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766760"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTypeArg GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArg
     GhcPs
     (GenLocated SrcSpanAnnA (HsType GhcPs))
     (GenLocated SrcSpanAnnA (HsType GhcPs))
forall p tm ty. XTypeArg p -&gt; ty -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsTypeArg"><span class="hs-identifier hs-var">HsTypeArg</span></a></span><span> </span><span class="annot"><span class="annottext">XAppKindTy GhcPs
XTypeArg GhcPs
</span><a href="#local-6989586621682766759"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766761"><span class="hs-identifier hs-var">ki</span></a></span><span class="annot"><span class="annottext">HsArg
  GhcPs
  (GenLocated SrcSpanAnnA (HsType GhcPs))
  (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621682766762"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766763"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766764"><span class="hs-identifier hs-var">cps</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766765"><span class="hs-identifier hs-var">fix</span></a></span><span>
</span><span id="line-1086"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682766766"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766766"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621682766767"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766767"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><a href="Language.Haskell.Syntax.Type.html#HsBoxedOrConstraintTuple"><span class="hs-identifier hs-var">HsBoxedOrConstraintTuple</span></a></span><span> </span><span id="local-6989586621682766770"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682766770"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621682766771"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766771"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682766772"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766772"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span id="local-6989586621682766773"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766773"><span class="hs-identifier hs-var">fix</span></a></span></span><span>
</span><span id="line-1087"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName,
 [HsArg
    GhcPs
    (GenLocated SrcSpanAnnA (HsType GhcPs))
    (GenLocated SrcSpanAnnA (HsType GhcPs))],
 LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766767"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682766775"><span class="hs-identifier hs-var">tup_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1088"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; [HsArg
      GhcPs
      (GenLocated SrcSpanAnnA (HsType GhcPs))
      (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XValArg GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArg
     GhcPs
     (GenLocated SrcSpanAnnA (HsType GhcPs))
     (GenLocated SrcSpanAnnA (HsType GhcPs))
forall p tm ty. XValArg p -&gt; tm -&gt; HsArg p tm ty
</span><a href="Language.Haskell.Syntax.Type.html#HsValArg"><span class="hs-identifier hs-var">HsValArg</span></a></span><span> </span><span class="annot"><span class="annottext">NoExtField
XValArg GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766770"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682766773"><span class="hs-identifier hs-var">fix</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766771"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766772"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766766"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766767"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1089"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1090"></span><span>        </span><span id="local-6989586621682766776"><span class="annot"><span class="annottext">arity :: Int
</span><a href="#local-6989586621682766776"><span class="hs-identifier hs-var hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766770"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1091"></span><span>        </span><span id="local-6989586621682766775"><span class="annot"><span class="annottext">tup_name :: Name
</span><a href="#local-6989586621682766775"><span class="hs-identifier hs-var hs-var">tup_name</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682766688"><span class="hs-identifier hs-var">is_cls</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Name
</span><a href="GHC.Builtin.Types.html#cTupleTyConName"><span class="hs-identifier hs-var">cTupleTyConName</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682766776"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1092"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Int -&gt; TyCon
</span><a href="GHC.Builtin.Types.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682766776"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1093"></span><span>          </span><span class="hs-comment">-- See Note [Unit tuples] in GHC.Hs.Type  (TODO: is this still relevant?)</span><span>
</span><span id="line-1094"></span><span>    </span><span class="annot"><a href="#local-6989586621682766698"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766779"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766779"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[HsArg
   GhcPs
   (GenLocated SrcSpanAnnA (HsType GhcPs))
   (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1095"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; P (LocatedN RdrName,
       [HsArg
          GhcPs
          (GenLocated SrcSpanAnnA (HsType GhcPs))
          (GenLocated SrcSpanAnnA (HsType GhcPs))],
       LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments))
-&gt; MsgEnvelope PsMessage
-&gt; P (LocatedN RdrName,
      [HsArg
         GhcPs
         (GenLocated SrcSpanAnnA (HsType GhcPs))
         (GenLocated SrcSpanAnnA (HsType GhcPs))],
      LexicalFixity, [EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766779"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1096"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMalformedTyOrClDecl"><span class="hs-identifier hs-var">PsErrMalformedTyOrClDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766689"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span>    </span><span class="hs-comment">-- Combine the annotations from the HsParTy and HsStarTy into a</span><span>
</span><span id="line-1099"></span><span>    </span><span class="hs-comment">-- new one for the LocatedN RdrName</span><span>
</span><span id="line-1100"></span><span>    </span><span class="annot"><a href="#local-6989586621682766714"><span class="hs-identifier hs-type">newAnns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnN"><span class="hs-identifier hs-type">SrcSpanAnnN</span></a></span><span>
</span><span id="line-1101"></span><span>    </span><span id="local-6989586621682766714"><span class="annot"><span class="annottext">newAnns :: SrcSpanAnnA
-&gt; SrcSpanAnnA -&gt; (EpToken &quot;(&quot;, EpToken &quot;)&quot;) -&gt; SrcSpanAnnN
</span><a href="#local-6989586621682766714"><span class="hs-identifier hs-var hs-var">newAnns</span></a></span></span><span> </span><span id="local-6989586621682766781"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682766781"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnListItem"><span class="hs-identifier hs-type">AnnListItem</span></a></span><span> </span><span class="annot"><span class="annottext">[TrailingAnn]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766783"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766783"><span class="hs-identifier hs-var">csp0</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766784"><span class="annot"><span class="annottext">l1 :: SrcSpanAnnA
</span><a href="#local-6989586621682766784"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766785"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766785"><span class="hs-identifier hs-var">ap</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnListItem"><span class="hs-identifier hs-type">AnnListItem</span></a></span><span> </span><span id="local-6989586621682766786"><span class="annot"><span class="annottext">[TrailingAnn]
</span><a href="#local-6989586621682766786"><span class="hs-identifier hs-var">ta</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766787"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766787"><span class="hs-identifier hs-var">csp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766788"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766788"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766789"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766789"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1102"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-1103"></span><span>        </span><span id="local-6989586621682766790"><span class="annot"><span class="annottext">lr :: SrcSpan
</span><a href="#local-6989586621682766790"><span class="hs-identifier hs-var hs-var">lr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766784"><span class="hs-identifier hs-var">l1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766781"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>      </span><span class="hs-keyword">in</span><span>
</span><span id="line-1105"></span><span>        </span><span class="annot"><span class="annottext">EpaLocation -&gt; NameAnn -&gt; EpAnnComments -&gt; SrcSpanAnnN
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682766790"><span class="hs-identifier hs-var">lr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameAdornment -&gt; EpaLocation -&gt; [TrailingAnn] -&gt; NameAnn
</span><a href="GHC.Parser.Annotation.html#NameAnn"><span class="hs-identifier hs-var">NameAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot; -&gt; EpToken &quot;)&quot; -&gt; NameAdornment
</span><a href="GHC.Parser.Annotation.html#NameParens"><span class="hs-identifier hs-var">NameParens</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766788"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766789"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766785"><span class="hs-identifier hs-var">ap</span></a></span><span> </span><span class="annot"><span class="annottext">[TrailingAnn]
</span><a href="#local-6989586621682766786"><span class="hs-identifier hs-var">ta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766783"><span class="hs-identifier hs-var">csp0</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766787"><span class="hs-identifier hs-var">csp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>
</span><span id="line-1107"></span><span class="hs-comment">-- | Yield a parse error if we have a function applied directly to a do block</span><span>
</span><span id="line-1108"></span><span class="hs-comment">-- etc. and BlockArguments is not enabled.</span><span>
</span><span id="line-1109"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-type">checkExpBlockArguments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkCmdBlockArguments"><span class="hs-identifier hs-type">checkCmdBlockArguments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span class="hs-special">(</span><span id="checkExpBlockArguments"><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-var">checkExpBlockArguments</span></a></span></span><span class="hs-special">,</span><span> </span><span id="checkCmdBlockArguments"><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PV ()
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkCmdBlockArguments"><span class="hs-identifier hs-var">checkCmdBlockArguments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
</span><a href="#local-6989586621682766820"><span class="hs-identifier hs-var">checkExpr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PV ()
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
</span><a href="#local-6989586621682766821"><span class="hs-identifier hs-var">checkCmd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1113"></span><span>    </span><span class="annot"><a href="#local-6989586621682766820"><span class="hs-identifier hs-type">checkExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1114"></span><span>    </span><span id="local-6989586621682766820"><span class="annot"><span class="annottext">checkExpr :: LHsExpr GhcPs -&gt; PV ()
</span><a href="#local-6989586621682766820"><span class="hs-identifier hs-var hs-var">checkExpr</span></a></span></span><span> </span><span id="local-6989586621682766822"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; HsExpr GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1115"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">XDo GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span> </span><span id="local-6989586621682766825"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682766825"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [ExprLStmt GhcPs]
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ModuleName -&gt; LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrDoInFunAppExpr"><span class="hs-identifier hs-var">PsErrDoInFunAppExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682766825"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>               </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1116"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span class="annot"><span class="annottext">XDo GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MDoExpr"><span class="hs-identifier hs-type">MDoExpr</span></a></span><span> </span><span id="local-6989586621682766829"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682766829"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [ExprLStmt GhcPs]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ModuleName -&gt; LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMDoInFunAppExpr"><span class="hs-identifier hs-var">PsErrMDoInFunAppExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682766829"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>              </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1117"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrCaseInFunAppExpr"><span class="hs-identifier hs-var">PsErrCaseInFunAppExpr</span></a></span><span>                 </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1118"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766834"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682766834"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLamVariant -&gt; LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLambdaInFunAppExpr"><span class="hs-identifier hs-var">PsErrLambdaInFunAppExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682766834"><span class="hs-identifier hs-var">lam_variant</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1119"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLetInFunAppExpr"><span class="hs-identifier hs-var">PsErrLetInFunAppExpr</span></a></span><span>                  </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1120"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsIf"><span class="hs-identifier hs-type">HsIf</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIfInFunAppExpr"><span class="hs-identifier hs-var">PsErrIfInFunAppExpr</span></a></span><span>                   </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1121"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProc"><span class="hs-identifier hs-type">HsProc</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrProcInFunAppExpr"><span class="hs-identifier hs-var">PsErrProcInFunAppExpr</span></a></span><span>                 </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766822"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1122"></span><span>      </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span>    </span><span class="annot"><a href="#local-6989586621682766821"><span class="hs-identifier hs-type">checkCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span>    </span><span id="local-6989586621682766821"><span class="annot"><span class="annottext">checkCmd :: LHsCmd GhcPs -&gt; PV ()
</span><a href="#local-6989586621682766821"><span class="hs-identifier hs-var hs-var">checkCmd</span></a></span></span><span> </span><span id="local-6989586621682766842"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; HsCmd GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1126"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdLamCase GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766844"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682766844"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsCmd GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLamVariant -&gt; LHsCmd GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLambdaCmdInFunAppCmd"><span class="hs-identifier hs-var">PsErrLambdaCmdInFunAppCmd</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682766844"><span class="hs-identifier hs-var">lam_variant</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1127"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrCaseCmdInFunAppCmd"><span class="hs-identifier hs-var">PsErrCaseCmdInFunAppCmd</span></a></span><span>                 </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1128"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdIf"><span class="hs-identifier hs-type">HsCmdIf</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIfCmdInFunAppCmd"><span class="hs-identifier hs-var">PsErrIfCmdInFunAppCmd</span></a></span><span>                   </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1129"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLetCmdInFunAppCmd"><span class="hs-identifier hs-var">PsErrLetCmdInFunAppCmd</span></a></span><span>                  </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1130"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
forall {m :: * -&gt; *} {a} {e}.
(MonadP m, HasLoc a) =&gt;
(GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PsMessage
GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrDoCmdInFunAppCmd"><span class="hs-identifier hs-var">PsErrDoCmdInFunAppCmd</span></a></span><span>                   </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682766842"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1131"></span><span>      </span><span class="annot"><span class="annottext">HsCmd GhcPs
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1132"></span><span>
</span><span id="line-1133"></span><span>    </span><span id="local-6989586621682766826"><span class="annot"><span class="annottext">check :: (GenLocated a e -&gt; PsMessage) -&gt; GenLocated a e -&gt; m ()
</span><a href="#local-6989586621682766826"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621682766871"><span class="annot"><span class="annottext">GenLocated a e -&gt; PsMessage
</span><a href="#local-6989586621682766871"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621682766872"><span class="annot"><span class="annottext">GenLocated a e
</span><a href="#local-6989586621682766872"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1134"></span><span>      </span><span id="local-6989586621682766873"><span class="annot"><a href="#local-6989586621682766873"><span class="hs-identifier hs-var">blockArguments</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; m Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#BlockArgumentsBit"><span class="hs-identifier hs-var">BlockArgumentsBit</span></a></span><span>
</span><span id="line-1135"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682766873"><span class="hs-identifier hs-type">blockArguments</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-1136"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-type">getLocA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682766871"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766872"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- | Validate the context constraints and break up a context into a list</span><span>
</span><span id="line-1139"></span><span class="hs-comment">-- of predicates.</span><span>
</span><span id="line-1140"></span><span class="hs-comment">--</span><span>
</span><span id="line-1141"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1142"></span><span class="hs-comment">--     (Eq a, Ord b)        --&gt;  [Eq a, Ord b]</span><span>
</span><span id="line-1143"></span><span class="hs-comment">--     Eq a                 --&gt;  [Eq a]</span><span>
</span><span id="line-1144"></span><span class="hs-comment">--     (Eq a)               --&gt;  [Eq a]</span><span>
</span><span id="line-1145"></span><span class="hs-comment">--     (((Eq a)))           --&gt;  [Eq a]</span><span>
</span><span id="line-1146"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1147"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkContext"><span class="hs-identifier hs-type">checkContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1148"></span><span id="checkContext"><span class="annot"><span class="annottext">checkContext :: LHsType GhcPs -&gt; P (LHsContext GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkContext"><span class="hs-identifier hs-var hs-var">checkContext</span></a></span></span><span> </span><span id="local-6989586621682766875"><span class="annot"><span class="annottext">orig_t :: LHsType GhcPs
</span><a href="#local-6989586621682766875"><span class="hs-identifier hs-var">orig_t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766876"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766876"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766877"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766877"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766878"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682766878"><span class="hs-identifier hs-var">_orig_t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1149"></span><span>  </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsType GhcPs -&gt; P (LHsContext GhcPs)
</span><a href="#local-6989586621682766879"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766877"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766875"><span class="hs-identifier hs-var">orig_t</span></a></span><span>
</span><span id="line-1150"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1151"></span><span>  </span><span class="annot"><a href="#local-6989586621682766879"><span class="hs-identifier hs-type">check</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsContext"><span class="hs-identifier hs-type">LHsContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>  </span><span id="local-6989586621682766879"><span class="annot"><span class="annottext">check :: ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsType GhcPs -&gt; P (LHsContext GhcPs)
</span><a href="#local-6989586621682766879"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766880"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766880"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766881"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766881"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766882"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766882"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766883"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766883"><span class="hs-identifier hs-var">_l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnParens"><span class="hs-identifier hs-type">AnnParens</span></a></span><span> </span><span id="local-6989586621682766885"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766885"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621682766886"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766886"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><a href="Language.Haskell.Syntax.Type.html#HsBoxedOrConstraintTuple"><span class="hs-identifier hs-var">HsBoxedOrConstraintTuple</span></a></span><span> </span><span id="local-6989586621682766887"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682766887"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span>    </span><span class="hs-comment">-- (Eq a, Ord b) shows up as a tuple type. Only boxed tuples can</span><span>
</span><span id="line-1155"></span><span>    </span><span class="hs-comment">-- be used as context constraints.</span><span>
</span><span id="line-1156"></span><span>    </span><span class="hs-comment">-- Ditto ()</span><span>
</span><span id="line-1157"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766888"><span class="hs-identifier hs-var">mkCTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766880"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766885"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766886"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766881"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766882"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766887"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span>  </span><span class="hs-comment">-- With NoListTuplePuns, contexts are parsed as data constructors, which causes failure</span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-comment">-- downstream.</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-comment">-- This converts them just like when they are parsed as types in the punned case.</span><span>
</span><span id="line-1162"></span><span>  </span><span class="annot"><a href="#local-6989586621682766879"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766889"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766889"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766890"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766890"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766891"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766891"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766892"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766892"><span class="hs-identifier hs-var">_l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-type">HsExplicitTupleTy</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766894"><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766894"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766895"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766895"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766896"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766896"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766897"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682766897"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1163"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">P Bool
</span><a href="GHC.Parser.PostProcess.html#punsAllowed"><span class="hs-identifier hs-var">punsAllowed</span></a></span><span> </span><span class="annot"><span class="annottext">P Bool
-&gt; (Bool
    -&gt; P (GenLocated
            SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]))
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
forall a b. P a -&gt; (a -&gt; P b) -&gt; P b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1164"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">P (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766899"><span class="hs-identifier hs-var">unprocessed</span></a></span><span>
</span><span id="line-1165"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1166"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-1167"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621682766900"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766900"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766901"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766901"><span class="hs-identifier hs-var">cp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><a href="#local-6989586621682766894"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1168"></span><span>            </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span id="local-6989586621682766902"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766902"><span class="hs-identifier hs-var">ql</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;(&quot;
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766902"><span class="hs-identifier hs-var">ql</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766896"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1169"></span><span>            </span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766895"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766896"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1170"></span><span>        </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766888"><span class="hs-identifier hs-var">mkCTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766889"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766900"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766901"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766890"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766891"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766897"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1171"></span><span>  </span><span class="annot"><a href="#local-6989586621682766879"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766903"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766903"><span class="hs-identifier hs-var">opi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766904"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766904"><span class="hs-identifier hs-var">cpi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766905"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766905"><span class="hs-identifier hs-var">csi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766906"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766906"><span class="hs-identifier hs-var">_lp1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsParTy"><span class="hs-identifier hs-type">HsParTy</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766907"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766907"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766908"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766908"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766909"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766909"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1172"></span><span>                                             </span><span class="hs-comment">-- to be sure HsParTy doesn't get into the way</span><span>
</span><span id="line-1173"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsType GhcPs -&gt; P (LHsContext GhcPs)
</span><a href="#local-6989586621682766879"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766907"><span class="hs-identifier hs-var">o</span></a></span><span class="annot"><span class="annottext">EpToken &quot;(&quot; -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766903"><span class="hs-identifier hs-var">opi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766908"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766904"><span class="hs-identifier hs-var">cpi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766905"><span class="hs-identifier hs-var">csi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766909"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1174"></span><span>
</span><span id="line-1175"></span><span>  </span><span class="hs-comment">-- No need for anns, returning original</span><span>
</span><span id="line-1176"></span><span>  </span><span class="annot"><a href="#local-6989586621682766879"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766910"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766910"><span class="hs-identifier hs-var">_opi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766911"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766911"><span class="hs-identifier hs-var">_cpi</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766912"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766912"><span class="hs-identifier hs-var">_csi</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766913"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682766913"><span class="hs-identifier hs-var">_t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">P (LHsContext GhcPs)
P (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766899"><span class="hs-identifier hs-var">unprocessed</span></a></span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span>  </span><span id="local-6989586621682766899"><span class="annot"><span class="annottext">unprocessed :: P (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766899"><span class="hs-identifier hs-var hs-var">unprocessed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1179"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnContext -&gt; EpAnnComments -&gt; SrcSpanAnnC
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766876"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TokDarrow -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnContext
</span><a href="GHC.Parser.Annotation.html#AnnContext"><span class="hs-identifier hs-var">AnnContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TokDarrow
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682766875"><span class="hs-identifier hs-var">orig_t</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span>
</span><span id="line-1182"></span><span>  </span><span id="local-6989586621682766888"><span class="annot"><span class="annottext">mkCTuple :: ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
</span><a href="#local-6989586621682766888"><span class="hs-identifier hs-var hs-var">mkCTuple</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766915"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766915"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766916"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766916"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766917"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766917"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766918"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766918"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1183"></span><span>    </span><span class="hs-comment">-- Append parens so that the original order in the source is maintained</span><span>
</span><span id="line-1184"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; P (GenLocated
        SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnContext -&gt; EpAnnComments -&gt; SrcSpanAnnC
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766876"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TokDarrow -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnContext
</span><a href="GHC.Parser.Annotation.html#AnnContext"><span class="hs-identifier hs-var">AnnContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TokDarrow
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766915"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766916"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766917"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682766918"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1185"></span><span>
</span><span id="line-1186"></span><span class="hs-comment">-- | The same as `checkContext`, but for expressions.</span><span>
</span><span id="line-1187"></span><span class="hs-comment">--</span><span>
</span><span id="line-1188"></span><span class="hs-comment">-- Validate the context constraints and break up a context into a list</span><span>
</span><span id="line-1189"></span><span class="hs-comment">-- of predicates.</span><span>
</span><span id="line-1190"></span><span class="hs-comment">--</span><span>
</span><span id="line-1191"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1192"></span><span class="hs-comment">--     (Eq a, Ord b)        --&gt;  [Eq a, Ord b]</span><span>
</span><span id="line-1193"></span><span class="hs-comment">--     Eq a                 --&gt;  [Eq a]</span><span>
</span><span id="line-1194"></span><span class="hs-comment">--     (Eq a)               --&gt;  [Eq a]</span><span>
</span><span id="line-1195"></span><span class="hs-comment">--     (((Eq a)))           --&gt;  [Eq a]</span><span>
</span><span id="line-1196"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1197"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkContextExpr"><span class="hs-identifier hs-type">checkContextExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedC"><span class="hs-identifier hs-type">LocatedC</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span id="checkContextExpr"><span class="annot"><span class="annottext">checkContextExpr :: LHsExpr GhcPs -&gt; PV (LocatedC [LHsExpr GhcPs])
</span><a href="GHC.Parser.PostProcess.html#checkContextExpr"><span class="hs-identifier hs-var hs-var">checkContextExpr</span></a></span></span><span> </span><span id="local-6989586621682766920"><span class="annot"><span class="annottext">orig_expr :: LHsExpr GhcPs
</span><a href="#local-6989586621682766920"><span class="hs-identifier hs-var">orig_expr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766921"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766921"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682766922"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766922"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1199"></span><span>  </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsExpr GhcPs -&gt; PV (LocatedC [LHsExpr GhcPs])
</span><a href="#local-6989586621682766923"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766922"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682766920"><span class="hs-identifier hs-var">orig_expr</span></a></span><span>
</span><span id="line-1200"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1201"></span><span>    </span><span class="annot"><a href="#local-6989586621682766923"><span class="hs-identifier hs-type">check</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1202"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedC"><span class="hs-identifier hs-type">LocatedC</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1203"></span><span>    </span><span id="local-6989586621682766923"><span class="annot"><span class="annottext">check :: ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsExpr GhcPs -&gt; PV (LocatedC [LHsExpr GhcPs])
</span><a href="#local-6989586621682766923"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766924"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766924"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766925"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766925"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766926"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766926"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766928"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766928"><span class="hs-identifier hs-var">ap_open</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766929"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766929"><span class="hs-identifier hs-var">ap_close</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766930"><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621682766930"><span class="hs-identifier hs-var">tup_args</span></a></span></span><span> </span><span id="local-6989586621682766931"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682766931"><span class="hs-identifier hs-var">boxity</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>             </span><span class="hs-comment">-- Neither unboxed tuples (#e1,e2#) nor tuple sections (e1,,e2,) can be a context</span><span>
</span><span id="line-1205"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Boxity -&gt; Bool
</span><a href="Language.Haskell.Syntax.Basic.html#isBoxed"><span class="hs-identifier hs-var">isBoxed</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682766931"><span class="hs-identifier hs-var">boxity</span></a></span><span>
</span><span id="line-1206"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682766933"><span class="annot"><span class="annottext">[LHsExpr GhcPs]
</span><a href="#local-6989586621682766933"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs] -&gt; Maybe [LHsExpr GhcPs]
forall (p :: Pass).
[HsTupArg (GhcPass p)] -&gt; Maybe [LHsExpr (GhcPass p)]
</span><a href="GHC.Hs.Expr.html#tupArgsPresent_maybe"><span class="hs-identifier hs-var">tupArgsPresent_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">[HsTupArg GhcPs]
</span><a href="#local-6989586621682766930"><span class="hs-identifier hs-var">tup_args</span></a></span><span>
</span><span id="line-1207"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="#local-6989586621682766935"><span class="hs-identifier hs-var">mkCTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766924"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;(&quot;
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766928"><span class="hs-identifier hs-var">ap_open</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;)&quot;
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766929"><span class="hs-identifier hs-var">ap_close</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766925"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766926"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcPs]
[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682766933"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-1208"></span><span>    </span><span class="annot"><a href="#local-6989586621682766923"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766936"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766936"><span class="hs-identifier hs-var">opi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766937"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766937"><span class="hs-identifier hs-var">cpi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766938"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766938"><span class="hs-identifier hs-var">csi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766940"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766940"><span class="hs-identifier hs-var">open_tok</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766941"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766941"><span class="hs-identifier hs-var">close_tok</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766942"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682766942"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1209"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; LHsExpr GhcPs -&gt; PV (LocatedC [LHsExpr GhcPs])
</span><a href="#local-6989586621682766923"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766936"><span class="hs-identifier hs-var">opi</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766940"><span class="hs-identifier hs-var">open_tok</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766941"><span class="hs-identifier hs-var">close_tok</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766937"><span class="hs-identifier hs-var">cpi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766938"><span class="hs-identifier hs-var">csi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682766942"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1210"></span><span>    </span><span class="annot"><a href="#local-6989586621682766923"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766943"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766943"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766944"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766944"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682766945"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766945"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#NameAnnOnly"><span class="hs-identifier hs-type">NameAnnOnly</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#NameParens"><span class="hs-identifier hs-type">NameParens</span></a></span><span> </span><span id="local-6989586621682766948"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766948"><span class="hs-identifier hs-var">open</span></a></span></span><span> </span><span id="local-6989586621682766949"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766949"><span class="hs-identifier hs-var">closed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766950"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766950"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1211"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682766950"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#nameRdrName"><span class="hs-identifier hs-var">nameRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#unitDataCon"><span class="hs-identifier hs-var">unitDataCon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="#local-6989586621682766935"><span class="hs-identifier hs-var">mkCTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766943"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682766948"><span class="hs-identifier hs-var">open</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682766949"><span class="hs-identifier hs-var">closed</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766944"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766945"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1213"></span><span>    </span><span class="annot"><a href="#local-6989586621682766923"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (LocatedC [LHsExpr GhcPs])
PV (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="#local-6989586621682766951"><span class="hs-identifier hs-var">unprocessed</span></a></span><span>
</span><span id="line-1214"></span><span>
</span><span id="line-1215"></span><span>    </span><span id="local-6989586621682766951"><span class="annot"><span class="annottext">unprocessed :: PV (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="#local-6989586621682766951"><span class="hs-identifier hs-var hs-var">unprocessed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1216"></span><span>      </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnContext -&gt; EpAnnComments -&gt; SrcSpanAnnC
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766921"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TokDarrow -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnContext
</span><a href="GHC.Parser.Annotation.html#AnnContext"><span class="hs-identifier hs-var">AnnContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TokDarrow
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682766920"><span class="hs-identifier hs-var">orig_expr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span>    </span><span id="local-6989586621682766935"><span class="annot"><span class="annottext">mkCTuple :: ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;], EpAnnComments)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="#local-6989586621682766935"><span class="hs-identifier hs-var hs-var">mkCTuple</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682766952"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766952"><span class="hs-identifier hs-var">oparens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766953"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766953"><span class="hs-identifier hs-var">cparens</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766954"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766954"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766955"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682766955"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1219"></span><span>      </span><span class="hs-comment">-- Append parens so that the original order in the source is maintained</span><span>
</span><span id="line-1220"></span><span>      </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnContext -&gt; EpAnnComments -&gt; SrcSpanAnnC
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766921"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe TokDarrow -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnContext
</span><a href="GHC.Parser.Annotation.html#AnnContext"><span class="hs-identifier hs-var">AnnContext</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TokDarrow
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682766952"><span class="hs-identifier hs-var">oparens</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682766953"><span class="hs-identifier hs-var">cparens</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766954"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682766955"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1221"></span><span>
</span><span id="line-1222"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkImportDecl"><span class="hs-identifier hs-type">checkImportDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;qualified&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1223"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;qualified&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1224"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1225"></span><span id="checkImportDecl"><span class="annot"><span class="annottext">checkImportDecl :: Maybe (EpToken &quot;qualified&quot;) -&gt; Maybe (EpToken &quot;qualified&quot;) -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#checkImportDecl"><span class="hs-identifier hs-var hs-var">checkImportDecl</span></a></span></span><span> </span><span id="local-6989586621682766956"><span class="annot"><span class="annottext">Maybe (EpToken &quot;qualified&quot;)
</span><a href="#local-6989586621682766956"><span class="hs-identifier hs-var">mPre</span></a></span></span><span> </span><span id="local-6989586621682766957"><span class="annot"><span class="annottext">Maybe (EpToken &quot;qualified&quot;)
</span><a href="#local-6989586621682766957"><span class="hs-identifier hs-var">mPost</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1226"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682766962"><span class="annot"><span class="annottext">whenJust :: Maybe a -&gt; (a -&gt; f ()) -&gt; f ()
</span><a href="#local-6989586621682766962"><span class="hs-identifier hs-var hs-var hs-var">whenJust</span></a></span></span><span> </span><span id="local-6989586621682766963"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621682766963"><span class="hs-identifier hs-var">mg</span></a></span></span><span> </span><span id="local-6989586621682766964"><span class="annot"><span class="annottext">a -&gt; f ()
</span><a href="#local-6989586621682766964"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f () -&gt; (a -&gt; f ()) -&gt; Maybe a -&gt; f ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; f ()
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; f ()
</span><a href="#local-6989586621682766964"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621682766963"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-1227"></span><span>      </span><span id="local-6989586621682766966"><span class="annot"><span class="annottext">tokenSpan :: EpToken tok -&gt; SrcSpan
</span><a href="#local-6989586621682766966"><span class="hs-identifier hs-var hs-var hs-var">tokenSpan</span></a></span></span><span> </span><span id="local-6989586621682766967"><span class="annot"><span class="annottext">EpToken tok
</span><a href="#local-6989586621682766967"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; RealSrcSpan
forall a. EpaLocation' a -&gt; RealSrcSpan
</span><a href="GHC.Parser.Annotation.html#epaLocationRealSrcSpan"><span class="hs-identifier hs-var">epaLocationRealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(EpaLocation -&gt; RealSrcSpan) -&gt; EpaLocation -&gt; RealSrcSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpToken tok -&gt; EpaLocation
forall (tok :: Symbol). EpToken tok -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#getEpTokenLoc"><span class="hs-identifier hs-var">getEpTokenLoc</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken tok
</span><a href="#local-6989586621682766967"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
forall a. Maybe a
</span><a href="GHC.Data.Strict.html#Nothing"><span class="hs-identifier hs-var">Strict.Nothing</span></a></span><span>
</span><span id="line-1228"></span><span>
</span><span id="line-1229"></span><span>  </span><span id="local-6989586621682766970"><span class="annot"><a href="#local-6989586621682766970"><span class="hs-identifier hs-var">importQualifiedPostEnabled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; P Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#ImportQualifiedPostBit"><span class="hs-identifier hs-var">ImportQualifiedPostBit</span></a></span><span>
</span><span id="line-1230"></span><span>
</span><span id="line-1231"></span><span>  </span><span class="hs-comment">-- Error if 'qualified' found in postpositive position and</span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-comment">-- 'ImportQualifiedPost' is not in effect.</span><span>
</span><span id="line-1233"></span><span>  </span><span class="annot"><a href="#local-6989586621682766962"><span class="hs-identifier hs-type">whenJust</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766957"><span class="hs-identifier hs-type">mPost</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682766972"><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766972"><span class="hs-identifier hs-var">post</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1234"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; P () -&gt; P ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682766970"><span class="hs-identifier hs-var">importQualifiedPostEnabled</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(P () -&gt; P ()) -&gt; P () -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1235"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#failNotEnabledImportQualifiedPost"><span class="hs-identifier hs-var">failNotEnabledImportQualifiedPost</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot; -&gt; SrcSpan
forall {tok :: Symbol}. EpToken tok -&gt; SrcSpan
</span><a href="#local-6989586621682766966"><span class="hs-identifier hs-var">tokenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766972"><span class="hs-identifier hs-var">post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1236"></span><span>
</span><span id="line-1237"></span><span>  </span><span class="hs-comment">-- Error if 'qualified' occurs in both pre and postpositive</span><span>
</span><span id="line-1238"></span><span>  </span><span class="hs-comment">-- positions.</span><span>
</span><span id="line-1239"></span><span>  </span><span class="annot"><a href="#local-6989586621682766962"><span class="hs-identifier hs-type">whenJust</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766957"><span class="hs-identifier hs-type">mPost</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682766973"><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766973"><span class="hs-identifier hs-var">post</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1240"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; P () -&gt; P ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (EpToken &quot;qualified&quot;) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;qualified&quot;)
</span><a href="#local-6989586621682766956"><span class="hs-identifier hs-var">mPre</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(P () -&gt; P ()) -&gt; P () -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1241"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#failImportQualifiedTwice"><span class="hs-identifier hs-var">failImportQualifiedTwice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot; -&gt; SrcSpan
forall {tok :: Symbol}. EpToken tok -&gt; SrcSpan
</span><a href="#local-6989586621682766966"><span class="hs-identifier hs-var">tokenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766973"><span class="hs-identifier hs-var">post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>
</span><span id="line-1243"></span><span>  </span><span class="hs-comment">-- Warn if 'qualified' found in prepositive position and</span><span>
</span><span id="line-1244"></span><span>  </span><span class="hs-comment">-- 'Opt_WarnPrepositiveQualifiedModule' is enabled.</span><span>
</span><span id="line-1245"></span><span>  </span><span class="annot"><a href="#local-6989586621682766962"><span class="hs-identifier hs-type">whenJust</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766956"><span class="hs-identifier hs-type">mPre</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682766974"><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766974"><span class="hs-identifier hs-var">pre</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1246"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#warnPrepositiveQualifiedModule"><span class="hs-identifier hs-var">warnPrepositiveQualifiedModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot; -&gt; SrcSpan
forall {tok :: Symbol}. EpToken tok -&gt; SrcSpan
</span><a href="#local-6989586621682766966"><span class="hs-identifier hs-var">tokenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;qualified&quot;
</span><a href="#local-6989586621682766974"><span class="hs-identifier hs-var">pre</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1247"></span><span>
</span><span id="line-1248"></span><span class="hs-comment">-- -------------------------------------------------------------------------</span><span>
</span><span id="line-1249"></span><span class="hs-comment">-- Checking Patterns.</span><span>
</span><span id="line-1250"></span><span>
</span><span id="line-1251"></span><span class="hs-comment">-- We parse patterns as expressions and check for valid patterns below,</span><span>
</span><span id="line-1252"></span><span class="hs-comment">-- converting the expression into a pattern at the same time.</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPattern"><span class="hs-identifier hs-type">checkPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1255"></span><span id="checkPattern"><span class="annot"><span class="annottext">checkPattern :: LocatedA (PatBuilder GhcPs) -&gt; P (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkPattern"><span class="hs-identifier hs-var hs-var">checkPattern</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (Pat GhcPs))
-&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a. PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV"><span class="hs-identifier hs-var">runPV</span></a></span><span> </span><span class="annot"><span class="annottext">(PV (GenLocated SrcSpanAnnA (Pat GhcPs))
 -&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; (LocatedA (PatBuilder GhcPs)
    -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
LocatedA (PatBuilder GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span>
</span><span id="line-1256"></span><span>
</span><span id="line-1257"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPattern_details"><span class="hs-identifier hs-type">checkPattern_details</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier hs-type">ParseContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1258"></span><span id="checkPattern_details"><span class="annot"><span class="annottext">checkPattern_details :: ParseContext -&gt; PV (LocatedA (PatBuilder GhcPs)) -&gt; P (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkPattern_details"><span class="hs-identifier hs-var hs-var">checkPattern_details</span></a></span></span><span> </span><span id="local-6989586621682766976"><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682766976"><span class="hs-identifier hs-var">extraDetails</span></a></span></span><span> </span><span id="local-6989586621682766977"><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682766977"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseContext
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
-&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a. ParseContext -&gt; PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV_details"><span class="hs-identifier hs-var">runPV_details</span></a></span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682766976"><span class="hs-identifier hs-var">extraDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682766977"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
-&gt; (LocatedA (PatBuilder GhcPs)
    -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a b. PV a -&gt; (a -&gt; PV b) -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
LocatedA (PatBuilder GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLArgPat"><span class="hs-identifier hs-type">checkLArgPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilder"><span class="hs-identifier hs-type">ArgPatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1261"></span><span id="checkLArgPat"><span class="annot"><span class="annottext">checkLArgPat :: LocatedA (ArgPatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLArgPat"><span class="hs-identifier hs-var hs-var">checkLArgPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766980"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766980"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderVisPat"><span class="hs-identifier hs-type">ArgPatBuilderVisPat</span></a></span><span> </span><span id="local-6989586621682766982"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682766982"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766980"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682766982"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLArgPat"><span class="hs-identifier hs-var">checkLArgPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766983"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766983"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderArgPat"><span class="hs-identifier hs-type">ArgPatBuilderArgPat</span></a></span><span> </span><span id="local-6989586621682766985"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682766985"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766983"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682766985"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1263"></span><span>
</span><span id="line-1264"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-type">checkLPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1265"></span><span id="checkLPat"><span class="annot"><span class="annottext">checkLPat :: LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var hs-var">checkLPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766986"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682766986"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682766987"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766987"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682766988"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682766988"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682766989"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682766989"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1266"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766990"><span class="annot"><a href="#local-6989586621682766990"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span id="local-6989586621682766991"><span class="annot"><a href="#local-6989586621682766991"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682766992"><span class="annot"><a href="#local-6989586621682766992"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; EpAnnComments
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; [HsConPatTyArg GhcPs]
-&gt; [LPat GhcPs]
-&gt; PV (LPat GhcPs, EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682766987"><span class="hs-identifier hs-var">anc</span></a></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682766988"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766986"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682766989"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1267"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#addCommentsToEpAnn"><span class="hs-identifier hs-type">addCommentsToEpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766990"><span class="hs-identifier hs-type">l'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766992"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682766991"><span class="hs-identifier hs-type">p'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-type">checkPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatTyArg"><span class="hs-identifier hs-type">HsConPatTyArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1270"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnComments"><span class="hs-identifier hs-type">EpAnnComments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1271"></span><span class="hs-comment">-- SG: I think this function checks what Haskell2010 calls the `pat` and `lpat`</span><span>
</span><span id="line-1272"></span><span class="hs-comment">-- productions</span><span>
</span><span id="line-1273"></span><span id="checkPat"><span class="annot"><span class="annottext">checkPat :: SrcSpanAnnA
-&gt; EpAnnComments
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; [HsConPatTyArg GhcPs]
-&gt; [LPat GhcPs]
-&gt; PV (LPat GhcPs, EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var hs-var">checkPat</span></a></span></span><span> </span><span id="local-6989586621682766995"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766995"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682766996"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766996"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682766997"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766997"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682766998"><span class="annot"><span class="annottext">e :: PatBuilder GhcPs
</span><a href="#local-6989586621682766998"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-type">PatBuilderVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767000"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767000"><span class="hs-identifier hs-var">ln</span></a></span></span><span> </span><span id="local-6989586621682767001"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767001"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767002"><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
</span><a href="#local-6989586621682767002"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621682767003"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682767003"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1274"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767001"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-var">isRdrTc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767001"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1275"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcPs), EpAnnComments)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs), EpAnnComments)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766995"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs))
-&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1276"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: XConPat GhcPs
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
XConPat GhcPs
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-comment">-- AZ: where should this come from?</span><span>
</span><span id="line-1277"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_con :: XRec GhcPs (ConLikeP GhcPs)
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767000"><span class="hs-identifier hs-var">ln</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767001"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1278"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pat_args :: HsConPatDetails GhcPs
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
-&gt; [GenLocated SrcSpanAnnA (Pat GhcPs)]
-&gt; HsConDetails
     (HsConPatTyArg GhcPs)
     (GenLocated SrcSpanAnnA (Pat GhcPs))
     (HsRecFields GhcPs (GenLocated SrcSpanAnnA (Pat GhcPs)))
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
</span><a href="#local-6989586621682767002"><span class="hs-identifier hs-var">tyargs</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682767003"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1279"></span><span>      </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682766997"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682766996"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1280"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
[GenLocated SrcSpanAnnA (Pat GhcPs)]
</span><a href="#local-6989586621682767003"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#patIsRec"><span class="hs-identifier hs-var">patIsRec</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767001"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1281"></span><span>      </span><span id="local-6989586621682767010"><span class="annot"><a href="#local-6989586621682767010"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PV ParseContext
</span><a href="GHC.Parser.PostProcess.html#askParseContext"><span class="hs-identifier hs-var">askParseContext</span></a></span><span>
</span><span id="line-1282"></span><span>      </span><span class="annot"><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-type">patFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766997"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrInPat"><span class="hs-identifier hs-type">PsErrInPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682766998"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PEIP_RecPattern"><span class="hs-identifier hs-type">PEIP_RecPattern</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767003"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#YesPatIsRecursive"><span class="hs-identifier hs-type">YesPatIsRecursive</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767010"><span class="hs-identifier hs-type">ctx</span></a></span><span>
</span><span id="line-1283"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span id="local-6989586621682767016"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767016"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767017"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767017"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767018"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767018"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderAppType"><span class="hs-identifier hs-type">PatBuilderAppType</span></a></span><span> </span><span id="local-6989586621682767020"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767020"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682767021"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682767021"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682767022"><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682767022"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767023"><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
</span><a href="#local-6989586621682767023"><span class="hs-identifier hs-var">tyargs</span></a></span></span><span> </span><span id="local-6989586621682767024"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682767024"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1284"></span><span>  </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; EpAnnComments
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; [HsConPatTyArg GhcPs]
-&gt; [LPat GhcPs]
-&gt; PV (LPat GhcPs, EpAnnComments)
</span><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767016"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767017"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnComments
forall an. EpAnn an -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767018"><span class="hs-identifier hs-var">la</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767020"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XConPatTyArg GhcPs -&gt; HsTyPat GhcPs -&gt; HsConPatTyArg GhcPs
forall p. XConPatTyArg p -&gt; HsTyPat p -&gt; HsConPatTyArg p
</span><a href="Language.Haskell.Syntax.Pat.html#HsConPatTyArg"><span class="hs-identifier hs-var">HsConPatTyArg</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
XConPatTyArg GhcPs
</span><a href="#local-6989586621682767021"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyPat GhcPs
</span><a href="#local-6989586621682767022"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">HsConPatTyArg GhcPs
-&gt; [HsConPatTyArg GhcPs] -&gt; [HsConPatTyArg GhcPs]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
</span><a href="#local-6989586621682767023"><span class="hs-identifier hs-var">tyargs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682767024"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1285"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span id="local-6989586621682767026"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767026"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767027"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767027"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767028"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767028"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderApp"><span class="hs-identifier hs-type">PatBuilderApp</span></a></span><span> </span><span id="local-6989586621682767030"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767030"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682767031"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767031"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621682767032"><span class="annot"><span class="annottext">[LPat GhcPs]
</span><a href="#local-6989586621682767032"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1286"></span><span>  </span><span id="local-6989586621682767033"><span class="annot"><a href="#local-6989586621682767033"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767031"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1287"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-type">checkPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767026"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767027"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#comments"><span class="hs-identifier hs-var">comments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767028"><span class="hs-identifier hs-type">la</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767030"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767033"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682767032"><span class="hs-identifier hs-type">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1288"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span id="local-6989586621682767034"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767034"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767035"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767035"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767036"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767036"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767037"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767037"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1289"></span><span>  </span><span id="local-6989586621682767038"><span class="annot"><a href="#local-6989586621682767038"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; PV (Pat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkAPat"><span class="hs-identifier hs-var">checkAPat</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767034"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767037"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1290"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767036"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767038"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682767035"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1291"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPat"><span class="hs-identifier hs-var">checkPat</span></a></span><span> </span><span id="local-6989586621682767040"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767040"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767041"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767041"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LPat GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1292"></span><span>  </span><span id="local-6989586621682767042"><span class="annot"><a href="#local-6989586621682767042"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParseContext -&gt; PsErrInPatDetails
</span><a href="GHC.Parser.Errors.Types.html#fromParseContext"><span class="hs-identifier hs-var">fromParseContext</span></a></span><span> </span><span class="annot"><span class="annottext">(ParseContext -&gt; PsErrInPatDetails)
-&gt; PV ParseContext -&gt; PV PsErrInPatDetails
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PV ParseContext
</span><a href="GHC.Parser.PostProcess.html#askParseContext"><span class="hs-identifier hs-var">askParseContext</span></a></span><span>
</span><span id="line-1293"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-type">patFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767040"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrInPat"><span class="hs-identifier hs-type">PsErrInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-type">unLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767041"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767042"><span class="hs-identifier hs-type">details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkAPat"><span class="hs-identifier hs-type">checkAPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span id="checkAPat"><span class="annot"><span class="annottext">checkAPat :: SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; PV (Pat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkAPat"><span class="hs-identifier hs-var hs-var">checkAPat</span></a></span></span><span> </span><span id="local-6989586621682767044"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767044"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767045"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767045"><span class="hs-identifier hs-var">e0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1297"></span><span> </span><span id="local-6989586621682767046"><span class="annot"><a href="#local-6989586621682767046"><span class="hs-identifier hs-var">nPlusKPatterns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; PV Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#NPlusKPatternsBit"><span class="hs-identifier hs-var">NPlusKPatternsBit</span></a></span><span>
</span><span id="line-1298"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682767045"><span class="hs-identifier hs-type">e0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1299"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span id="local-6989586621682767049"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767049"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PV (Pat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767049"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1300"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-type">PatBuilderVar</span></a></span><span> </span><span id="local-6989586621682767050"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767050"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PV (Pat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVarPat GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; Pat GhcPs
forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767050"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span>   </span><span class="hs-comment">-- Overloaded numeric patterns (e.g. f 0 x = x)</span><span>
</span><span id="line-1303"></span><span>   </span><span class="hs-comment">-- Negation is recorded separately, so that the literal is zero or +ve</span><span>
</span><span id="line-1304"></span><span>   </span><span class="hs-comment">-- NB. Negative *primitive* literals are already handled by the lexer</span><span>
</span><span id="line-1305"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOverLit"><span class="hs-identifier hs-type">PatBuilderOverLit</span></a></span><span> </span><span id="local-6989586621682767053"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682767053"><span class="hs-identifier hs-var">pos_lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PV (Pat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedAn NoEpAnns (HsOverLit GhcPs)
-&gt; Maybe (SyntaxExpr GhcPs) -&gt; EpToken &quot;-&quot; -&gt; Pat GhcPs
</span><a href="GHC.Hs.Utils.html#mkNPat"><span class="hs-identifier hs-var">mkNPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnCO -&gt; HsOverLit GhcPs -&gt; LocatedAn NoEpAnns (HsOverLit GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnCO
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767044"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682767053"><span class="hs-identifier hs-var">pos_lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe NoExtField
Maybe (SyntaxExpr GhcPs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;-&quot;
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1306"></span><span>
</span><span id="line-1307"></span><span>   </span><span class="hs-comment">-- n+k patterns</span><span>
</span><span id="line-1308"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-type">PatBuilderOpApp</span></a></span><span>
</span><span id="line-1309"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-type">PatBuilderVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767056"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767056"><span class="hs-identifier hs-var">nloc</span></a></span></span><span> </span><span id="local-6989586621682767057"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767057"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1310"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767058"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767058"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767059"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767059"><span class="hs-identifier hs-var">plus</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1311"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767060"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767060"><span class="hs-identifier hs-var">lloc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOverLit"><span class="hs-identifier hs-type">PatBuilderOverLit</span></a></span><span> </span><span id="local-6989586621682767061"><span class="annot"><span class="annottext">lit :: HsOverLit GhcPs
</span><a href="#local-6989586621682767061"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">ol_val :: forall p. HsOverLit p -&gt; OverLitVal
</span><a href="Language.Haskell.Syntax.Lit.html#ol_val"><span class="hs-identifier hs-var">ol_val</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1312"></span><span>           </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1313"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767046"><span class="hs-identifier hs-var">nPlusKPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767059"><span class="hs-identifier hs-var">plus</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="GHC.Parser.PostProcess.html#plus_RDR"><span class="hs-identifier hs-var">plus_RDR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1314"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PV (Pat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; LocatedAn NoEpAnns (HsOverLit GhcPs) -&gt; EpToken &quot;+&quot; -&gt; Pat GhcPs
</span><a href="GHC.Hs.Utils.html#mkNPlusKPat"><span class="hs-identifier hs-var">mkNPlusKPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767056"><span class="hs-identifier hs-var">nloc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767057"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnCO -&gt; HsOverLit GhcPs -&gt; LocatedAn NoEpAnns (HsOverLit GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnCO
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767060"><span class="hs-identifier hs-var">lloc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682767061"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;+&quot;
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="annot"><span class="annottext">(EpaLocation -&gt; EpToken &quot;+&quot;) -&gt; EpaLocation -&gt; EpToken &quot;+&quot;
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; EpaLocation
forall ann. EpAnn ann -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#entry"><span class="hs-identifier hs-var">entry</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767058"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span>   </span><span class="hs-comment">-- Improve error messages for the @-operator when the user meant an @-pattern</span><span>
</span><span id="line-1318"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-type">PatBuilderOpApp</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767067"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767067"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">([EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#opIsAt"><span class="hs-identifier hs-var">opIsAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767067"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1319"></span><span>     </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767067"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrAtInPatPos"><span class="hs-identifier hs-var">PsErrAtInPatPos</span></a></span><span>
</span><span id="line-1320"></span><span>     </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PV (Pat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildPat GhcPs -&gt; Pat GhcPs
forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-type">PatBuilderOpApp</span></a></span><span> </span><span id="local-6989586621682767071"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767071"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767072"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767072"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span id="local-6989586621682767073"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767073"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767074"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767074"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767075"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767075"><span class="hs-identifier hs-var">_os</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682767076"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767076"><span class="hs-identifier hs-var">_cs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767073"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrTc"><span class="hs-identifier hs-var">isRdrTc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767073"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1324"></span><span>         </span><span id="local-6989586621682767077"><span class="annot"><a href="#local-6989586621682767077"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767071"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1325"></span><span>         </span><span id="local-6989586621682767078"><span class="annot"><a href="#local-6989586621682767078"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-type">checkLPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767074"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-1326"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-1327"></span><span>           </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span>
</span><span id="line-1328"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767072"><span class="hs-identifier hs-type">cl</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767073"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-1329"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767077"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767078"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-1330"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-1331"></span><span>
</span><span id="line-1332"></span><span>   </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPar"><span class="hs-identifier hs-type">PatBuilderPar</span></a></span><span> </span><span id="local-6989586621682767080"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682767080"><span class="hs-identifier hs-var">lpar</span></a></span></span><span> </span><span id="local-6989586621682767081"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767081"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682767082"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682767082"><span class="hs-identifier hs-var">rpar</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1333"></span><span>     </span><span id="local-6989586621682767083"><span class="annot"><a href="#local-6989586621682767083"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767081"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1334"></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767080"><span class="hs-identifier hs-type">lpar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682767082"><span class="hs-identifier hs-type">rpar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767083"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>
</span><span id="line-1336"></span><span>   </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1337"></span><span>     </span><span id="local-6989586621682767085"><span class="annot"><a href="#local-6989586621682767085"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParseContext -&gt; PsErrInPatDetails
</span><a href="GHC.Parser.Errors.Types.html#fromParseContext"><span class="hs-identifier hs-var">fromParseContext</span></a></span><span> </span><span class="annot"><span class="annottext">(ParseContext -&gt; PsErrInPatDetails)
-&gt; PV ParseContext -&gt; PV PsErrInPatDetails
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PV ParseContext
</span><a href="GHC.Parser.PostProcess.html#askParseContext"><span class="hs-identifier hs-var">askParseContext</span></a></span><span>
</span><span id="line-1338"></span><span>     </span><span class="annot"><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-type">patFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767044"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrInPat"><span class="hs-identifier hs-type">PsErrInPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767045"><span class="hs-identifier hs-type">e0</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767085"><span class="hs-identifier hs-type">details</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>
</span><span id="line-1340"></span><span id="local-6989586621682764680"><span class="annot"><a href="GHC.Parser.PostProcess.html#placeHolderPunRhs"><span class="hs-identifier hs-type">placeHolderPunRhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764680"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764680"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1341"></span><span class="hs-comment">-- The RHS of a punned record field will be filled in by the renamer</span><span>
</span><span id="line-1342"></span><span class="hs-comment">-- It's better not to make it an error, in case we want to print it when</span><span>
</span><span id="line-1343"></span><span class="hs-comment">-- debugging</span><span>
</span><span id="line-1344"></span><span id="placeHolderPunRhs"><span class="annot"><span class="annottext">placeHolderPunRhs :: forall b. DisambECP b =&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#placeHolderPunRhs"><span class="hs-identifier hs-var hs-var">placeHolderPunRhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; PV (LocatedA b)
forall b. DisambECP b =&gt; LocatedN RdrName -&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#mkHsVarPV"><span class="hs-identifier hs-var">mkHsVarPV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; LocatedN RdrName
forall e a. HasAnnotation e =&gt; a -&gt; GenLocated e a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="GHC.Parser.PostProcess.html#pun_RDR"><span class="hs-identifier hs-var">pun_RDR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>
</span><span id="line-1346"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#plus_RDR"><span class="hs-identifier hs-type">plus_RDR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pun_RDR"><span class="hs-identifier hs-type">pun_RDR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-1347"></span><span id="plus_RDR"><span class="annot"><span class="annottext">plus_RDR :: RdrName
</span><a href="GHC.Parser.PostProcess.html#plus_RDR"><span class="hs-identifier hs-var hs-var">plus_RDR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Hack</span><span>
</span><span id="line-1348"></span><span id="pun_RDR"><span class="annot"><span class="annottext">pun_RDR :: RdrName
</span><a href="GHC.Parser.PostProcess.html#pun_RDR"><span class="hs-identifier hs-var hs-var">pun_RDR</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pun-right-hand-side&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatField"><span class="hs-identifier hs-type">checkPatField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1352"></span><span id="checkPatField"><span class="annot"><span class="annottext">checkPatField :: LHsRecField GhcPs (LocatedA (PatBuilder GhcPs))
-&gt; PV (LHsRecField GhcPs (LPat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkPatField"><span class="hs-identifier hs-var hs-var">checkPatField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767099"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767099"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767100"><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
  (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682767100"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682767101"><span class="annot"><a href="#local-6989586621682767101"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
  (LocatedA (PatBuilder GhcPs))
-&gt; LocatedA (PatBuilder GhcPs)
forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
  (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682767100"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>                             </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767099"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767100"><span class="hs-identifier hs-type">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682767101"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>
</span><span id="line-1355"></span><span id="local-6989586621682764666"><span class="annot"><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-type">patFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764666"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1356"></span><span id="patFail"><span class="annot"><span class="annottext">patFail :: forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var hs-var">patFail</span></a></span></span><span> </span><span id="local-6989586621682767105"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767105"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767106"><span class="annot"><span class="annottext">PsMessage
</span><a href="#local-6989586621682767106"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV a
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV a) -&gt; MsgEnvelope PsMessage -&gt; PV a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767105"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="#local-6989586621682767106"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1357"></span><span>
</span><span id="line-1358"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#patIsRec"><span class="hs-identifier hs-type">patIsRec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1359"></span><span id="patIsRec"><span class="annot"><span class="annottext">patIsRec :: RdrName -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#patIsRec"><span class="hs-identifier hs-var hs-var">patIsRec</span></a></span></span><span> </span><span id="local-6989586621682767107"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767107"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767107"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; FastString -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkUnqual"><span class="hs-identifier hs-var">mkUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rec&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>
</span><span id="line-1361"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-1362"></span><span class="hs-comment">-- Check Equation Syntax</span><span>
</span><span id="line-1363"></span><span>
</span><span id="line-1364"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValDef"><span class="hs-identifier hs-type">checkValDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1365"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1368"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span id="checkValDef"><span class="annot"><span class="annottext">checkValDef :: SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; (HsMultAnn GhcPs, Maybe (TokDcolon, LHsType GhcPs))
-&gt; Located (GRHSs GhcPs (LHsExpr GhcPs))
-&gt; P (HsBindLR GhcPs GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkValDef"><span class="hs-identifier hs-var hs-var">checkValDef</span></a></span></span><span> </span><span id="local-6989586621682767108"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767108"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767109"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767109"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767110"><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767110"><span class="hs-identifier hs-var">mult</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767111"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682767111"><span class="hs-identifier hs-var">sigAnn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767112"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767112"><span class="hs-identifier hs-var">sig</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767113"><span class="annot"><span class="annottext">Located (GRHSs GhcPs (LHsExpr GhcPs))
</span><a href="#local-6989586621682767113"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-1371"></span><span>        </span><span class="hs-comment">-- x :: ty = rhs  parses as a *pattern* binding</span><span>
</span><span id="line-1372"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682767114"><span class="annot"><a href="#local-6989586621682767114"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (Pat GhcPs))
-&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a. PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV"><span class="hs-identifier hs-var">runPV</span></a></span><span> </span><span class="annot"><span class="annottext">(PV (GenLocated SrcSpanAnnA (Pat GhcPs))
 -&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
-&gt; P (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; LHsType GhcPs
-&gt; TokDcolon
-&gt; PV (LocatedA (PatBuilder GhcPs))
forall b.
DisambECP b =&gt;
SrcSpanAnnA
-&gt; LocatedA b -&gt; LHsType GhcPs -&gt; TokDcolon -&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#mkHsTySigPV"><span class="hs-identifier hs-var">mkHsTySigPV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpanAnnA
forall a e1 e2.
Semigroup a =&gt;
GenLocated (EpAnn a) e1 -&gt; GenLocated (EpAnn a) e2 -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineLocsA"><span class="hs-identifier hs-var">combineLocsA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767109"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767112"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767109"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767112"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682767111"><span class="hs-identifier hs-var">sigAnn</span></a></span><span>
</span><span id="line-1373"></span><span>                        </span><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
-&gt; (LocatedA (PatBuilder GhcPs)
    -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
forall a b. PV a -&gt; (a -&gt; PV b) -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
LocatedA (PatBuilder GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span>
</span><span id="line-1374"></span><span>       </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-type">checkPatBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767108"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767114"><span class="hs-identifier hs-type">lhs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767113"><span class="hs-identifier hs-type">grhss</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767110"><span class="hs-identifier hs-type">mult</span></a></span><span>
</span><span id="line-1375"></span><span>
</span><span id="line-1376"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValDef"><span class="hs-identifier hs-var">checkValDef</span></a></span><span> </span><span id="local-6989586621682767118"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767118"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767119"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767119"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767120"><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767120"><span class="hs-identifier hs-var">mult_ann</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (TokDcolon, LHsType GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767121"><span class="annot"><span class="annottext">Located (GRHSs GhcPs (LHsExpr GhcPs))
</span><a href="#local-6989586621682767121"><span class="hs-identifier hs-var">grhss</span></a></span></span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-type">HsNoMultAnn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767120"><span class="hs-identifier hs-var">mult_ann</span></a></span><span>
</span><span id="line-1378"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682767123"><span class="annot"><a href="#local-6989586621682767123"><span class="hs-identifier hs-var">mb_fun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="GHC.Parser.PostProcess.html#isFunLhs"><span class="hs-identifier hs-var">isFunLhs</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767119"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1379"></span><span>        </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682767123"><span class="hs-identifier hs-type">mb_fun</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1380"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767125"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767125"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767126"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682767126"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767127"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767127"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767128"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767128"><span class="hs-identifier hs-var">ops</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767129"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767129"><span class="hs-identifier hs-var">cps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1381"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767130"><span class="annot"><span class="annottext">ann_fun :: AnnFunRhs
</span><a href="#local-6989586621682767130"><span class="hs-identifier hs-var hs-var hs-var">ann_fun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnFunRhs
</span><a href="GHC.Parser.PostProcess.html#mk_ann_funrhs"><span class="hs-identifier hs-var">mk_ann_funrhs</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767128"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767129"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1382"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767131"><span class="annot"><span class="annottext">l :: EpaLocation
</span><a href="#local-6989586621682767131"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)] -&gt; EpaLocation
forall an a. [LocatedAn an a] -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#listLocation"><span class="hs-identifier hs-var">listLocation</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767127"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1383"></span><span>              </span><span class="annot"><span class="annottext">SrcSpan
-&gt; AnnFunRhs
-&gt; LocatedN RdrName
-&gt; LexicalFixity
-&gt; LocatedE [LocatedA (ArgPatBuilder GhcPs)]
-&gt; Located (GRHSs GhcPs (LHsExpr GhcPs))
-&gt; P (HsBindLR GhcPs GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkFunBind"><span class="hs-identifier hs-var">checkFunBind</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767118"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">AnnFunRhs
</span><a href="#local-6989586621682767130"><span class="hs-identifier hs-var">ann_fun</span></a></span><span>
</span><span id="line-1384"></span><span>                           </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767125"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682767126"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; LocatedE [LocatedA (ArgPatBuilder GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767131"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767127"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Located (GRHSs GhcPs (LHsExpr GhcPs))
</span><a href="#local-6989586621682767121"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-1385"></span><span>            </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1386"></span><span>              </span><span id="local-6989586621682767133"><span class="annot"><a href="#local-6989586621682767133"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; P (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkPattern"><span class="hs-identifier hs-var">checkPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767119"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1387"></span><span>              </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-type">checkPatBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767118"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767133"><span class="hs-identifier hs-type">lhs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767121"><span class="hs-identifier hs-type">grhss</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767120"><span class="hs-identifier hs-type">mult_ann</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1388"></span><span>
</span><span id="line-1389"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValDef"><span class="hs-identifier hs-var">checkValDef</span></a></span><span> </span><span id="local-6989586621682767134"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767134"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767135"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767135"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767136"><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767136"><span class="hs-identifier hs-var">mult_ann</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (TokDcolon, LHsType GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767137"><span class="annot"><span class="annottext">Located (GRHSs GhcPs (LHsExpr GhcPs))
</span><a href="#local-6989586621682767137"><span class="hs-identifier hs-var">ghrss</span></a></span></span><span>
</span><span id="line-1390"></span><span>        </span><span class="hs-comment">-- %p x = rhs  parses as a *pattern* binding</span><span>
</span><span id="line-1391"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682767138"><span class="annot"><a href="#local-6989586621682767138"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; P (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkPattern"><span class="hs-identifier hs-var">checkPattern</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767135"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-1392"></span><span>       </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-type">checkPatBind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767134"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767138"><span class="hs-identifier hs-type">lhs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767137"><span class="hs-identifier hs-type">ghrss</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767136"><span class="hs-identifier hs-type">mult_ann</span></a></span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mk_ann_funrhs"><span class="hs-identifier hs-type">mk_ann_funrhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#AnnFunRhs"><span class="hs-identifier hs-type">AnnFunRhs</span></a></span><span>
</span><span id="line-1395"></span><span id="mk_ann_funrhs"><span class="annot"><span class="annottext">mk_ann_funrhs :: [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnFunRhs
</span><a href="GHC.Parser.PostProcess.html#mk_ann_funrhs"><span class="hs-identifier hs-var hs-var">mk_ann_funrhs</span></a></span></span><span> </span><span id="local-6989586621682767139"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767139"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767140"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767140"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;!&quot; -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnFunRhs
</span><a href="GHC.Hs.Expr.html#AnnFunRhs"><span class="hs-identifier hs-var">AnnFunRhs</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;!&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767139"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767140"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkFunBind"><span class="hs-identifier hs-type">checkFunBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1398"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#AnnFunRhs"><span class="hs-identifier hs-type">AnnFunRhs</span></a></span><span>
</span><span id="line-1399"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-1400"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#LexicalFixity"><span class="hs-identifier hs-type">LexicalFixity</span></a></span><span>
</span><span id="line-1401"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedE"><span class="hs-identifier hs-type">LocatedE</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilder"><span class="hs-identifier hs-type">ArgPatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1402"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1403"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1404"></span><span id="checkFunBind"><span class="annot"><span class="annottext">checkFunBind :: SrcSpan
-&gt; AnnFunRhs
-&gt; LocatedN RdrName
-&gt; LexicalFixity
-&gt; LocatedE [LocatedA (ArgPatBuilder GhcPs)]
-&gt; Located (GRHSs GhcPs (LHsExpr GhcPs))
-&gt; P (HsBindLR GhcPs GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkFunBind"><span class="hs-identifier hs-var hs-var">checkFunBind</span></a></span></span><span> </span><span id="local-6989586621682767142"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767142"><span class="hs-identifier hs-var">locF</span></a></span></span><span> </span><span id="local-6989586621682767143"><span class="annot"><span class="annottext">AnnFunRhs
</span><a href="#local-6989586621682767143"><span class="hs-identifier hs-var">ann_fun</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767144"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767144"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span id="local-6989586621682767145"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767145"><span class="hs-identifier hs-var">fun</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767146"><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682767146"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767147"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767147"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span id="local-6989586621682767148"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767148"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767149"><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682767149"><span class="hs-identifier hs-var">grhss</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>  </span><span id="local-6989586621682767150"><span class="annot"><a href="#local-6989586621682767150"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParseContext
-&gt; PV [GenLocated SrcSpanAnnA (Pat GhcPs)]
-&gt; P [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall a. ParseContext -&gt; PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV_details"><span class="hs-identifier hs-var">runPV_details</span></a></span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682767151"><span class="hs-identifier hs-var">extraDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA (ArgPatBuilder GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; PV [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs) -&gt; PV (LPat GhcPs)
LocatedA (ArgPatBuilder GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkLArgPat"><span class="hs-identifier hs-var">checkLArgPat</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767148"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767152"><span class="annot"><a href="#local-6989586621682767152"><span class="hs-identifier hs-var hs-var">match_span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpanAnnA) -&gt; SrcSpan -&gt; SrcSpanAnnA
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767142"><span class="hs-identifier hs-var">locF</span></a></span><span>
</span><span id="line-1407"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#makeFunBind"><span class="hs-identifier hs-type">makeFunBind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-type">l2l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767144"><span class="hs-identifier hs-type">lf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767145"><span class="hs-identifier hs-type">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-type">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767152"><span class="hs-identifier hs-type">match_span</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1408"></span><span>                 </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767152"><span class="hs-identifier hs-type">match_span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span>
</span><span id="line-1409"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span>
</span><span id="line-1410"></span><span>                                          </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767144"><span class="hs-identifier hs-type">lf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767145"><span class="hs-identifier hs-type">fun</span></a></span><span>
</span><span id="line-1411"></span><span>                                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mc_fixity"><span class="hs-identifier hs-var">mc_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682767146"><span class="hs-identifier hs-type">is_infix</span></a></span><span>
</span><span id="line-1412"></span><span>                                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mc_strictness"><span class="hs-identifier hs-var">mc_strictness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-type">NoSrcStrict</span></a></span><span>
</span><span id="line-1413"></span><span>                                          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mc_an"><span class="hs-identifier hs-var">mc_an</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682767143"><span class="hs-identifier hs-type">ann_fun</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1414"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767147"><span class="hs-identifier hs-type">lp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767150"><span class="hs-identifier hs-type">ps</span></a></span><span>
</span><span id="line-1415"></span><span>                                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682767149"><span class="hs-identifier hs-type">grhss</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>        </span><span class="hs-comment">-- The span of the match covers the entire equation.</span><span>
</span><span id="line-1417"></span><span>        </span><span class="hs-comment">-- That isn't quite right, but it'll do for now.</span><span>
</span><span id="line-1418"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1419"></span><span>    </span><span id="local-6989586621682767151"><span class="annot"><span class="annottext">extraDetails :: ParseContext
</span><a href="#local-6989586621682767151"><span class="hs-identifier hs-var hs-var">extraDetails</span></a></span></span><span>
</span><span id="line-1420"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="#local-6989586621682767146"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RdrName -&gt; PatIncompleteDoBlock -&gt; ParseContext
</span><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier hs-var">ParseContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Maybe RdrName
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767145"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatIncompleteDoBlock
</span><a href="GHC.Parser.Errors.Types.html#NoIncompleteDoBlock"><span class="hs-identifier hs-var">NoIncompleteDoBlock</span></a></span><span>
</span><span id="line-1421"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="GHC.Parser.Errors.Types.html#noParseContext"><span class="hs-identifier hs-var">noParseContext</span></a></span><span>
</span><span id="line-1422"></span><span>
</span><span id="line-1423"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#makeFunBind"><span class="hs-identifier hs-type">makeFunBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1424"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1425"></span><span class="hs-comment">-- Like GHC.Hs.Utils.mkFunBind, but we need to be able to set the fixity too</span><span>
</span><span id="line-1426"></span><span id="makeFunBind"><span class="annot"><span class="annottext">makeFunBind :: LocatedN RdrName
-&gt; LocatedLW [LMatch GhcPs (LHsExpr GhcPs)] -&gt; HsBindLR GhcPs GhcPs
</span><a href="GHC.Parser.PostProcess.html#makeFunBind"><span class="hs-identifier hs-var hs-var">makeFunBind</span></a></span></span><span> </span><span id="local-6989586621682767156"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767156"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span id="local-6989586621682767157"><span class="annot"><span class="annottext">LocatedLW [LMatch GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682767157"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-1427"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcPs GhcPs
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunBind GhcPs GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1428"></span><span>              </span><span class="annot"><span class="annottext">fun_id :: XRec GhcPs (IdP GhcPs)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767156"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1429"></span><span>              </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcPs (LHsExpr GhcPs)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; MatchGroup GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedLW [LMatch GhcPs (LHsExpr GhcPs)]
GenLocated
  SrcSpanAnnLW
  [GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682767157"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1430"></span><span>
</span><span id="line-1431"></span><span class="hs-comment">-- See Note [FunBind vs PatBind]</span><span>
</span><span id="line-1432"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-type">checkPatBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1433"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1434"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1436"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsBind"><span class="hs-identifier hs-type">HsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1437"></span><span id="checkPatBind"><span class="annot"><span class="annottext">checkPatBind :: SrcSpan
-&gt; LPat GhcPs
-&gt; Located (GRHSs GhcPs (LHsExpr GhcPs))
-&gt; HsMultAnn GhcPs
-&gt; P (HsBindLR GhcPs GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-var hs-var">checkPatBind</span></a></span></span><span> </span><span id="local-6989586621682767159"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767159"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span id="local-6989586621682767161"><span class="annot"><span class="annottext">XBangPat GhcPs
</span><a href="#local-6989586621682767161"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767162"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682767162"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767163"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767163"><span class="hs-identifier hs-var">_match_span</span></a></span></span><span> </span><span id="local-6989586621682767164"><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682767164"><span class="hs-identifier hs-var">grhss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsNoMultAnn"><span class="hs-identifier hs-type">HsNoMultAnn</span></a></span><span> </span><span class="annot"><span class="annottext">XNoMultAnn GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs -&gt; P (HsBindLR GhcPs GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; LocatedLW [LMatch GhcPs (LHsExpr GhcPs)] -&gt; HsBindLR GhcPs GhcPs
</span><a href="GHC.Parser.PostProcess.html#makeFunBind"><span class="hs-identifier hs-var">makeFunBind</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767162"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnLW
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnLW
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767159"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1440"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767159"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;!&quot;
-&gt; LocatedN RdrName
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682767165"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcPs
EpToken &quot;!&quot;
</span><a href="#local-6989586621682767161"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767162"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1441"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1442"></span><span>    </span><span id="local-6989586621682767165"><span class="annot"><span class="annottext">m :: EpToken &quot;!&quot;
-&gt; LocatedN RdrName
-&gt; Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682767165"><span class="hs-identifier hs-var hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682767166"><span class="annot"><span class="annottext">EpToken &quot;!&quot;
</span><a href="#local-6989586621682767166"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682767167"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767167"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_ext :: XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ext"><span class="hs-identifier hs-var">m_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1443"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_ctxt :: HsMatchContext (LIdP (NoGhcTc GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_ctxt"><span class="hs-identifier hs-var">m_ctxt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#FunRhs"><span class="hs-identifier hs-type">FunRhs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mc_fun :: LocatedN RdrName
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fun"><span class="hs-identifier hs-var">mc_fun</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767167"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1444"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_fixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Expr.html#mc_fixity"><span class="hs-identifier hs-var">mc_fixity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a></span><span>
</span><span id="line-1445"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_strictness :: SrcStrictness
</span><a href="Language.Haskell.Syntax.Expr.html#mc_strictness"><span class="hs-identifier hs-var">mc_strictness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcStrict"><span class="hs-identifier hs-var">SrcStrict</span></a></span><span>
</span><span id="line-1446"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mc_an :: XFunRhs
</span><a href="Language.Haskell.Syntax.Expr.html#mc_an"><span class="hs-identifier hs-var">mc_an</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;!&quot; -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; AnnFunRhs
</span><a href="GHC.Hs.Expr.html#AnnFunRhs"><span class="hs-identifier hs-var">AnnFunRhs</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;!&quot;
</span><a href="#local-6989586621682767166"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1447"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_pats :: XRec GhcPs [LPat GhcPs]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)]
-&gt; GenLocated EpaLocation [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall e a. HasAnnotation e =&gt; a -&gt; GenLocated e a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1448"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">m_grhss :: GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="Language.Haskell.Syntax.Expr.html#m_grhss"><span class="hs-identifier hs-var">m_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
GRHSs GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682767164"><span class="hs-identifier hs-var">grhss</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPatBind"><span class="hs-identifier hs-var">checkPatBind</span></a></span><span> </span><span id="local-6989586621682767169"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767169"><span class="hs-identifier hs-var">_loc</span></a></span></span><span> </span><span id="local-6989586621682767170"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682767170"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767171"><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682767171"><span class="hs-identifier hs-var">grhss</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767172"><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767172"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1451"></span><span>  </span><span class="annot"><span class="annottext">HsBindLR GhcPs GhcPs -&gt; P (HsBindLR GhcPs GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPatBind GhcPs GhcPs
-&gt; LPat GhcPs
-&gt; HsMultAnn GhcPs
-&gt; GRHSs GhcPs (LHsExpr GhcPs)
-&gt; HsBindLR GhcPs GhcPs
forall idL idR.
XPatBind idL idR
-&gt; LPat idL
-&gt; HsMultAnn idL
-&gt; GRHSs idR (LHsExpr idR)
-&gt; HsBindLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#PatBind"><span class="hs-identifier hs-var">PatBind</span></a></span><span> </span><span class="annot"><span class="annottext">XPatBind GhcPs GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682767170"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">HsMultAnn GhcPs
</span><a href="#local-6989586621682767172"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682767171"><span class="hs-identifier hs-var">grhss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1452"></span><span>
</span><span id="line-1453"></span><span>
</span><span id="line-1454"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkValSigLhs"><span class="hs-identifier hs-type">checkValSigLhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1455"></span><span id="checkValSigLhs"><span class="annot"><span class="annottext">checkValSigLhs :: LHsExpr GhcPs -&gt; P (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#checkValSigLhs"><span class="hs-identifier hs-var hs-var">checkValSigLhs</span></a></span></span><span> </span><span id="local-6989586621682767173"><span class="annot"><span class="annottext">lhs :: LHsExpr GhcPs
</span><a href="#local-6989586621682767173"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767174"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767174"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767175"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682767175"><span class="hs-identifier hs-var">lhs_expr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1456"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682767175"><span class="hs-identifier hs-var">lhs_expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1457"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767176"><span class="annot"><span class="annottext">lrdr :: XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682767176"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767177"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767177"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LocatedN RdrName -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767178"><span class="hs-identifier hs-var">check_var</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767177"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767176"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1458"></span><span>    </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767179"><span class="hs-identifier hs-var">make_err</span></a></span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidTypeSig_Other"><span class="hs-identifier hs-var">PsErrInvalidTypeSig_Other</span></a></span><span>
</span><span id="line-1459"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1460"></span><span>    </span><span id="local-6989586621682767178"><span class="annot"><span class="annottext">check_var :: RdrName -&gt; LocatedN RdrName -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767178"><span class="hs-identifier hs-var hs-var">check_var</span></a></span></span><span> </span><span id="local-6989586621682767181"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767181"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682767182"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767182"><span class="hs-identifier hs-var">lrdr</span></a></span></span><span>
</span><span id="line-1461"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isUnqual"><span class="hs-identifier hs-var">isUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767181"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767179"><span class="hs-identifier hs-var">make_err</span></a></span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidTypeSig_Qualified"><span class="hs-identifier hs-var">PsErrInvalidTypeSig_Qualified</span></a></span><span>
</span><span id="line-1462"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isDataOcc"><span class="hs-identifier hs-var">isDataOcc</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621682767185"><span class="hs-identifier hs-var">occ_n</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767179"><span class="hs-identifier hs-var">make_err</span></a></span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidTypeSig_DataCon"><span class="hs-identifier hs-var">PsErrInvalidTypeSig_DataCon</span></a></span><span>
</span><span id="line-1463"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; P (LocatedN RdrName)
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767182"><span class="hs-identifier hs-var">lrdr</span></a></span><span>
</span><span id="line-1464"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682767185"><span class="annot"><span class="annottext">occ_n :: OccName
</span><a href="#local-6989586621682767185"><span class="hs-identifier hs-var hs-var">occ_n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767181"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1465"></span><span>    </span><span id="local-6989586621682767179"><span class="annot"><span class="annottext">make_err :: PsInvalidTypeSignature -&gt; P (LocatedN RdrName)
</span><a href="#local-6989586621682767179"><span class="hs-identifier hs-var hs-var">make_err</span></a></span></span><span> </span><span id="local-6989586621682767187"><span class="annot"><span class="annottext">PsInvalidTypeSignature
</span><a href="#local-6989586621682767187"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (LocatedN RdrName)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (LocatedN RdrName))
-&gt; MsgEnvelope PsMessage -&gt; P (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1466"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767174"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsInvalidTypeSignature -&gt; LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidTypeSignature"><span class="hs-identifier hs-var">PsErrInvalidTypeSignature</span></a></span><span> </span><span class="annot"><span class="annottext">PsInvalidTypeSignature
</span><a href="#local-6989586621682767187"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682767173"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span id="local-6989586621682764703"><span id="local-6989586621682764704"><span id="local-6989586621682764705"><span class="annot"><a href="GHC.Parser.PostProcess.html#checkDoAndIfThenElse"><span class="hs-identifier hs-type">checkDoAndIfThenElse</span></a></span><span>
</span><span id="line-1470"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764703"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764704"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764705"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682764703"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764704"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764705"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764703"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764704"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764705"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1473"></span><span id="checkDoAndIfThenElse"><span class="annot"><span class="annottext">checkDoAndIfThenElse :: forall a b c.
(Outputable a, Outputable b, Outputable c) =&gt;
(a -&gt; Bool -&gt; b -&gt; Bool -&gt; c -&gt; PsMessage)
-&gt; LocatedA a -&gt; Bool -&gt; LocatedA b -&gt; Bool -&gt; LocatedA c -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkDoAndIfThenElse"><span class="hs-identifier hs-var hs-var">checkDoAndIfThenElse</span></a></span></span><span> </span><span id="local-6989586621682767204"><span class="annot"><span class="annottext">a -&gt; Bool -&gt; b -&gt; Bool -&gt; c -&gt; PsMessage
</span><a href="#local-6989586621682767204"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621682767205"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA a
</span><a href="#local-6989586621682767205"><span class="hs-identifier hs-var">guardExpr</span></a></span></span><span> </span><span id="local-6989586621682767206"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767206"><span class="hs-identifier hs-var">semiThen</span></a></span></span><span> </span><span id="local-6989586621682767207"><span class="annot"><span class="annottext">LocatedA b
</span><a href="#local-6989586621682767207"><span class="hs-identifier hs-var">thenExpr</span></a></span></span><span> </span><span id="local-6989586621682767208"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767208"><span class="hs-identifier hs-var">semiElse</span></a></span></span><span> </span><span id="local-6989586621682767209"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA c
</span><a href="#local-6989586621682767209"><span class="hs-identifier hs-var">elseExpr</span></a></span></span><span>
</span><span id="line-1474"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767206"><span class="hs-identifier hs-var">semiThen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767208"><span class="hs-identifier hs-var">semiElse</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1475"></span><span>      </span><span id="local-6989586621682767210"><span class="annot"><a href="#local-6989586621682767210"><span class="hs-identifier hs-var">doAndIfThenElse</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; PV Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#DoAndIfThenElseBit"><span class="hs-identifier hs-var">DoAndIfThenElseBit</span></a></span><span>
</span><span id="line-1476"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767212"><span class="annot"><a href="#local-6989586621682767212"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Bool -&gt; b -&gt; Bool -&gt; c -&gt; PsMessage
</span><a href="#local-6989586621682767204"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA a -&gt; a
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA a
</span><a href="#local-6989586621682767205"><span class="hs-identifier hs-var">guardExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767206"><span class="hs-identifier hs-var">semiThen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA b -&gt; b
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA b
</span><a href="#local-6989586621682767207"><span class="hs-identifier hs-var">thenExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767208"><span class="hs-identifier hs-var">semiElse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA c -&gt; c
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA c
</span><a href="#local-6989586621682767209"><span class="hs-identifier hs-var">elseExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1479"></span><span>          </span><span id="local-6989586621682767213"><span class="annot"><a href="#local-6989586621682767213"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located a -&gt; Located c -&gt; SrcSpan
forall a b. Located a -&gt; Located b -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineLocs"><span class="hs-identifier hs-var">combineLocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA a -&gt; Located a
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA a
</span><a href="#local-6989586621682767205"><span class="hs-identifier hs-var">guardExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA c -&gt; Located c
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA c
</span><a href="#local-6989586621682767209"><span class="hs-identifier hs-var">elseExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682767210"><span class="hs-identifier hs-type">doAndIfThenElse</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767213"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767212"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1483"></span><span>
</span><span id="line-1484"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#isFunLhs"><span class="hs-identifier hs-type">isFunLhs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#LexicalFixity"><span class="hs-identifier hs-type">LexicalFixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1486"></span><span>                   </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilder"><span class="hs-identifier hs-type">ArgPatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1487"></span><span class="hs-comment">-- A variable binding is parsed as a FunBind.</span><span>
</span><span id="line-1488"></span><span class="hs-comment">-- Just (fun, is_infix, arg_pats) if e is a function LHS</span><span>
</span><span id="line-1489"></span><span id="isFunLhs"><span class="annot"><span class="annottext">isFunLhs :: LocatedA (PatBuilder GhcPs)
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="GHC.Parser.PostProcess.html#isFunLhs"><span class="hs-identifier hs-var hs-var">isFunLhs</span></a></span></span><span> </span><span id="local-6989586621682767216"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767216"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767216"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1490"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1491"></span><span>   </span><span id="local-6989586621682767219"><span class="annot"><span class="annottext">mk :: GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
</span><a href="#local-6989586621682767219"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PatBuilder p -&gt; ArgPatBuilder p)
-&gt; GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PatBuilder p -&gt; ArgPatBuilder p
forall p. PatBuilder p -&gt; ArgPatBuilder p
</span><a href="GHC.Parser.PostProcess.html#ArgPatBuilderVisPat"><span class="hs-identifier hs-var">ArgPatBuilderVisPat</span></a></span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span>   </span><span id="local-6989586621682767217"><span class="annot"><span class="annottext">go :: LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767220"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767220"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-type">PatBuilderVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767221"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767221"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682767222"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767222"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767223"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767223"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621682767224"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767224"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767225"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767225"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1494"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767222"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1495"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767226"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767226"><span class="hs-identifier hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767227"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767227"><span class="hs-identifier hs-var">loc'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnN -&gt; (SrcSpanAnnA, SrcSpanAnnN)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767220"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767221"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-1496"></span><span>           </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
 [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; Maybe
     (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767227"><span class="hs-identifier hs-var">loc'</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767222"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767223"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767224"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767225"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1497"></span><span>   </span><span class="annot"><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767228"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767228"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderApp"><span class="hs-identifier hs-type">PatBuilderApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767229"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767229"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span id="local-6989586621682767230"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767230"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767231"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767231"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span id="local-6989586621682767232"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767232"><span class="hs-identifier hs-var">es</span></a></span></span><span>       </span><span id="local-6989586621682767233"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767233"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767234"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767234"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1498"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767235"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767235"><span class="hs-identifier hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767236"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767236"><span class="hs-identifier hs-var">lf'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767228"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767229"><span class="hs-identifier hs-var">lf</span></a></span><span>
</span><span id="line-1499"></span><span>     </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767236"><span class="hs-identifier hs-var">lf'</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767230"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs)
forall {p}.
GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
</span><a href="#local-6989586621682767219"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767231"><span class="hs-identifier hs-var">e</span></a></span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767232"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767233"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767234"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1500"></span><span>   </span><span class="annot"><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767237"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767237"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPar"><span class="hs-identifier hs-type">PatBuilderPar</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767238"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767238"><span class="hs-identifier hs-var">le</span></a></span></span><span> </span><span id="local-6989586621682767239"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767239"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767240"><span class="annot"><span class="annottext">es :: [LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767240"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767241"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767241"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767242"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767242"><span class="hs-identifier hs-var">cps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767243"><span class="hs-identifier hs-var">le'</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767239"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767240"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682767244"><span class="hs-identifier hs-var">o</span></a></span><span class="annot"><span class="annottext">EpToken &quot;(&quot; -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767241"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682767245"><span class="hs-identifier hs-var">c</span></a></span><span class="annot"><span class="annottext">EpToken &quot;)&quot; -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767242"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1501"></span><span>      </span><span class="hs-comment">-- NB: es@(_:_) means that there must be an arg after the parens for the</span><span>
</span><span id="line-1502"></span><span>      </span><span class="hs-comment">-- LHS to be a function LHS. This corresponds to the Haskell Report's definition</span><span>
</span><span id="line-1503"></span><span>      </span><span class="hs-comment">-- of funlhs.</span><span>
</span><span id="line-1504"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-1505"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621682767246"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767246"><span class="hs-identifier hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767243"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767243"><span class="hs-identifier hs-var">le'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767237"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767238"><span class="hs-identifier hs-var">le</span></a></span><span>
</span><span id="line-1506"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621682767244"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682767244"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682767245"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682767245"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; (EpToken &quot;(&quot;, EpToken &quot;)&quot;)
</span><a href="GHC.Parser.Lexer.html#mkParensEpToks"><span class="hs-identifier hs-var">mkParensEpToks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; RealSrcSpan
</span><a href="GHC.Parser.Annotation.html#realSrcSpan"><span class="hs-identifier hs-var">realSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; RealSrcSpan) -&gt; SrcSpan -&gt; RealSrcSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767237"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>   </span><span class="annot"><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767248"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767248"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-type">PatBuilderOpApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767249"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767249"><span class="hs-identifier hs-var">ll</span></a></span></span><span> </span><span id="local-6989586621682767250"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767250"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767251"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767251"><span class="hs-identifier hs-var">loc'</span></a></span></span><span> </span><span id="local-6989586621682767252"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767252"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767253"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767253"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767254"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767254"><span class="hs-identifier hs-var">os</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682767255"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767255"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767256"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767256"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621682767257"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767257"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767258"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767258"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1508"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767252"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- We have found the function!</span><span>
</span><span id="line-1509"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767259"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767259"><span class="hs-identifier hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767260"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767260"><span class="hs-identifier hs-var">ll'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767248"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767249"><span class="hs-identifier hs-var">ll</span></a></span><span>
</span><span id="line-1510"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
 [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; Maybe
     (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767251"><span class="hs-identifier hs-var">loc'</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767252"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs)
forall {p}.
GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
</span><a href="#local-6989586621682767219"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767260"><span class="hs-identifier hs-var">ll'</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767250"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs)
forall {p}.
GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
</span><a href="#local-6989586621682767219"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767253"><span class="hs-identifier hs-var">r</span></a></span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767256"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767254"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767257"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767255"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;] -&gt; [EpToken &quot;)&quot;]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767258"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1511"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                     </span><span class="hs-comment">-- Infix data con; keep going</span><span>
</span><span id="line-1512"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767261"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767261"><span class="hs-identifier hs-var hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767262"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767262"><span class="hs-identifier hs-var hs-var">ll'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767248"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767249"><span class="hs-identifier hs-var">ll</span></a></span><span>
</span><span id="line-1513"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682767263"><span class="annot"><a href="#local-6989586621682767263"><span class="hs-identifier hs-var">mb_l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767262"><span class="hs-identifier hs-var">ll'</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767250"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767256"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767257"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767258"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1514"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767264"><span class="hs-identifier hs-type">reassociate</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">=&lt;&lt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682767263"><span class="hs-identifier hs-type">mb_l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1515"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1516"></span><span>          </span><span id="local-6989586621682767264"><span class="annot"><span class="annottext">reassociate :: (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
 [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; Maybe
     (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
</span><a href="#local-6989586621682767264"><span class="hs-identifier hs-var hs-var">reassociate</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767266"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767266"><span class="hs-identifier hs-var">op'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767267"><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
</span><a href="#local-6989586621682767267"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767268"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767268"><span class="hs-identifier hs-var">k_loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderVisPat"><span class="hs-identifier hs-type">ArgPatBuilderVisPat</span></a></span><span> </span><span id="local-6989586621682767269"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767269"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621682767270"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767270"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767271"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767271"><span class="hs-identifier hs-var">ops'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767272"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767272"><span class="hs-identifier hs-var">cps'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
 [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; Maybe
     (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
      [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767266"><span class="hs-identifier hs-var">op'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
</span><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
</span><a href="#local-6989586621682767267"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
</span><a href="#local-6989586621682767273"><span class="hs-identifier hs-var">op_app</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767270"><span class="hs-identifier hs-var">es'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767271"><span class="hs-identifier hs-var">ops'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767272"><span class="hs-identifier hs-var">cps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1518"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-1519"></span><span>              </span><span id="local-6989586621682767273"><span class="annot"><span class="annottext">op_app :: LocatedA (ArgPatBuilder GhcPs)
</span><a href="#local-6989586621682767273"><span class="hs-identifier hs-var hs-var">op_app</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs)
forall {p}.
GenLocated SrcSpanAnnA (PatBuilder p)
-&gt; GenLocated SrcSpanAnnA (ArgPatBuilder p)
</span><a href="#local-6989586621682767219"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; LocatedA (ArgPatBuilder GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767248"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; LocatedN RdrName
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; PatBuilder GhcPs
forall p.
LocatedA (PatBuilder p)
-&gt; LocatedN RdrName
-&gt; LocatedA (PatBuilder p)
-&gt; ([EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-var">PatBuilderOpApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767268"><span class="hs-identifier hs-var">k_loc</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767269"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1520"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767251"><span class="hs-identifier hs-var">loc'</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767252"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682767253"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;] -&gt; [EpToken &quot;(&quot;]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767257"><span class="hs-identifier hs-var">ops</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767258"><span class="hs-identifier hs-var">cps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>          </span><span class="annot"><a href="#local-6989586621682767264"><span class="hs-identifier hs-var">reassociate</span></a></span><span> </span><span id="local-6989586621682767274"><span class="annot"><span class="annottext">(LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
 [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
</span><a href="#local-6989586621682767274"><span class="hs-identifier hs-var">_other</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1522"></span><span>   </span><span class="annot"><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767275"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767275"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderAppType"><span class="hs-identifier hs-type">PatBuilderAppType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767276"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767276"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span id="local-6989586621682767277"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767277"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767278"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682767278"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span id="local-6989586621682767279"><span class="annot"><span class="annottext">ty_pat :: HsTyPat GhcPs
</span><a href="#local-6989586621682767279"><span class="hs-identifier hs-var">ty_pat</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTP"><span class="hs-identifier hs-type">HsTP</span></a></span><span> </span><span class="annot"><span class="annottext">XHsTP GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682767281"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767281"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682767282"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682767282"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621682767283"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767283"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767284"><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767284"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621682767285"><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767285"><span class="hs-identifier hs-var">ops</span></a></span></span><span> </span><span id="local-6989586621682767286"><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767286"><span class="hs-identifier hs-var">cps</span></a></span></span><span>
</span><span id="line-1523"></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [EpToken &quot;(&quot;]
-&gt; [EpToken &quot;)&quot;]
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
</span><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767287"><span class="hs-identifier hs-var">lp'</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767277"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ArgPatBuilder GhcPs -&gt; LocatedA (ArgPatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767288"><span class="hs-identifier hs-var">anc'</span></a></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682767282"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682767283"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcPs -&gt; ArgPatBuilder GhcPs
forall p. Pat p -&gt; ArgPatBuilder p
</span><a href="GHC.Parser.PostProcess.html#ArgPatBuilderArgPat"><span class="hs-identifier hs-var">ArgPatBuilderArgPat</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767289"><span class="hs-identifier hs-var">invis_pat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA (ArgPatBuilder GhcPs)
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
-&gt; [LocatedA (ArgPatBuilder GhcPs)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><a href="#local-6989586621682767284"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><a href="#local-6989586621682767285"><span class="hs-identifier hs-var">ops</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><a href="#local-6989586621682767286"><span class="hs-identifier hs-var">cps</span></a></span><span>
</span><span id="line-1524"></span><span>             </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682767289"><span class="annot"><span class="annottext">invis_pat :: Pat GhcPs
</span><a href="#local-6989586621682767289"><span class="hs-identifier hs-var hs-var">invis_pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XInvisPat GhcPs -&gt; HsTyPat (NoGhcTc GhcPs) -&gt; Pat GhcPs
forall p. XInvisPat p -&gt; HsTyPat (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#InvisPat"><span class="hs-identifier hs-var">InvisPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682767278"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="Language.Haskell.Syntax.Specificity.html#SpecifiedSpec"><span class="hs-identifier hs-var">SpecifiedSpec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsTyPat (NoGhcTc GhcPs)
HsTyPat GhcPs
</span><a href="#local-6989586621682767279"><span class="hs-identifier hs-var">ty_pat</span></a></span><span>
</span><span id="line-1525"></span><span>                   </span><span id="local-6989586621682767288"><span class="annot"><span class="annottext">anc' :: EpaLocation
</span><a href="#local-6989586621682767288"><span class="hs-identifier hs-var hs-var">anc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken &quot;@&quot; -&gt; EpaLocation
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok -&gt; EpaLocation
</span><a href="GHC.Parser.Annotation.html#widenAnchorT"><span class="hs-identifier hs-var">widenAnchorT</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767281"><span class="hs-identifier hs-var">anc</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682767278"><span class="hs-identifier hs-var">tok</span></a></span><span>
</span><span id="line-1526"></span><span>                   </span><span class="hs-special">(</span><span id="local-6989586621682767291"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767291"><span class="hs-identifier hs-var">_l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767287"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767287"><span class="hs-identifier hs-var">lp'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnA -&gt; (SrcSpanAnnA, SrcSpanAnnA)
forall a b. EpAnn a -&gt; EpAnn b -&gt; (EpAnn a, EpAnn b)
</span><a href="GHC.Parser.Annotation.html#transferCommentsOnlyA"><span class="hs-identifier hs-var">transferCommentsOnlyA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767275"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767276"><span class="hs-identifier hs-var">lp</span></a></span><span>
</span><span id="line-1527"></span><span>   </span><span class="annot"><a href="#local-6989586621682767217"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (ArgPatBuilder GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;(&quot;]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;)&quot;]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
-&gt; P (Maybe
        (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
         [EpToken &quot;(&quot;], [EpToken &quot;)&quot;]))
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe
  (LocatedN RdrName, LexicalFixity, [LocatedA (ArgPatBuilder GhcPs)],
   [EpToken &quot;(&quot;], [EpToken &quot;)&quot;])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1528"></span><span>
</span><span id="line-1529"></span><span class="hs-keyword">data</span><span> </span><span id="ArgPatBuilder"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilder"><span class="hs-identifier hs-var">ArgPatBuilder</span></a></span></span><span> </span><span id="local-6989586621682764715"><span class="annot"><a href="#local-6989586621682764715"><span class="hs-identifier hs-type">p</span></a></span></span><span>
</span><span id="line-1530"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ArgPatBuilderVisPat"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderVisPat"><span class="hs-identifier hs-var">ArgPatBuilderVisPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764715"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ArgPatBuilderArgPat"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderArgPat"><span class="hs-identifier hs-var">ArgPatBuilderArgPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764715"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>
</span><span id="line-1533"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilder"><span class="hs-identifier hs-type">ArgPatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1534"></span><span>  </span><span id="local-6989586621682767311"><span class="annot"><span class="annottext">ppr :: ArgPatBuilder GhcPs -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderVisPat"><span class="hs-identifier hs-type">ArgPatBuilderVisPat</span></a></span><span> </span><span id="local-6989586621682767312"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767312"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682767312"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1535"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArgPatBuilderArgPat"><span class="hs-identifier hs-type">ArgPatBuilderArgPat</span></a></span><span> </span><span id="local-6989586621682767313"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767313"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767313"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1536"></span><span>
</span><span id="line-1537"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkBangTy"><span class="hs-identifier hs-type">mkBangTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier hs-type">SrcStrictness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1538"></span><span id="mkBangTy"><span class="annot"><span class="annottext">mkBangTy :: EpaLocation -&gt; SrcStrictness -&gt; LHsType GhcPs -&gt; HsType GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkBangTy"><span class="hs-identifier hs-var hs-var">mkBangTy</span></a></span></span><span> </span><span id="local-6989586621682767314"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767314"><span class="hs-identifier hs-var">tok_loc</span></a></span></span><span> </span><span id="local-6989586621682767315"><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621682767315"><span class="hs-identifier hs-var">strictness</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1539"></span><span>  </span><span class="annot"><span class="annottext">XBangTy GhcPs -&gt; HsBang -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass. XBangTy pass -&gt; HsBang -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-var">HsBangTy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767314"><span class="hs-identifier hs-var">tok_loc</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; SrcStrictness -&gt; HsBang
</span><a href="Language.Haskell.Syntax.Basic.html#HsBang"><span class="hs-identifier hs-var">HsBang</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcUnpack"><span class="hs-identifier hs-var">NoSrcUnpack</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621682767315"><span class="hs-identifier hs-var">strictness</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>
</span><span id="line-1541"></span><span class="annot"><span class="hs-comment">-- | Result of parsing @{-\# UNPACK \#-}@ or @{-\# NOUNPACK \#-}@.</span></span><span>
</span><span id="line-1542"></span><span class="hs-keyword">data</span><span> </span><span id="UnpackednessPragma"><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier hs-var">UnpackednessPragma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1543"></span><span>  </span><span id="UnpackednessPragma"><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier hs-var">UnpackednessPragma</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;#-}&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier hs-type">SrcUnpackedness</span></a></span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span class="annot"><span class="hs-comment">-- | Annotate a type with either an @{-\# UNPACK \#-}@ or a @{-\# NOUNPACK \#-}@ pragma.</span></span><span>
</span><span id="line-1546"></span><span id="local-6989586621682764734"><span class="annot"><a href="GHC.Parser.PostProcess.html#addUnpackednessP"><span class="hs-identifier hs-type">addUnpackednessP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764734"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier hs-type">UnpackednessPragma</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764734"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1547"></span><span id="addUnpackednessP"><span class="annot"><span class="annottext">addUnpackednessP :: forall (m :: * -&gt; *).
MonadP m =&gt;
Located UnpackednessPragma -&gt; LHsType GhcPs -&gt; m (LHsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#addUnpackednessP"><span class="hs-identifier hs-var hs-var">addUnpackednessP</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767327"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767327"><span class="hs-identifier hs-var">lprag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier hs-type">UnpackednessPragma</span></a></span><span> </span><span id="local-6989586621682767328"><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
</span><a href="#local-6989586621682767328"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span id="local-6989586621682767329"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682767329"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621682767330"><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621682767330"><span class="hs-identifier hs-var">unpk</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767331"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767331"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1548"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767332"><span class="annot"><span class="annottext">l' :: SrcSpan
</span><a href="#local-6989586621682767332"><span class="hs-identifier hs-var hs-var hs-var">l'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767327"><span class="hs-identifier hs-var">lprag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767331"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767333"><span class="annot"><span class="annottext">t' :: HsType GhcPs
</span><a href="#local-6989586621682767333"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
</span><a href="#local-6989586621682767334"><span class="hs-identifier hs-var">addUnpackedness</span></a></span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpToken &quot;#-}&quot;)
</span><a href="#local-6989586621682767328"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767331"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1550"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; m (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767332"><span class="hs-identifier hs-var">l'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682767333"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1552"></span><span>    </span><span class="hs-comment">-- If we have a HsBangTy that only has a strictness annotation,</span><span>
</span><span id="line-1553"></span><span>    </span><span class="hs-comment">-- such as ~T or !T, then add the pragma to the existing HsBangTy.</span><span>
</span><span id="line-1554"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1555"></span><span>    </span><span class="hs-comment">-- Otherwise, wrap the type in a new HsBangTy constructor.</span><span>
</span><span id="line-1556"></span><span>    </span><span id="local-6989586621682767334"><span class="annot"><span class="annottext">addUnpackedness :: (EpaLocation, EpToken &quot;#-}&quot;)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
</span><a href="#local-6989586621682767334"><span class="hs-identifier hs-var hs-var">addUnpackedness</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767335"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767335"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682767336"><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
</span><a href="#local-6989586621682767336"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682767337"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767337"><span class="hs-identifier hs-var">tl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-var">NoSourceText</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767338"><span class="annot"><span class="annottext">HsBang
</span><a href="#local-6989586621682767338"><span class="hs-identifier hs-var">bang</span></a></span></span><span> </span><span id="local-6989586621682767339"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767339"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#HsBang"><span class="hs-identifier hs-type">HsBang</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcUnpack"><span class="hs-identifier hs-var">NoSrcUnpack</span></a></span><span> </span><span id="local-6989586621682767340"><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621682767340"><span class="hs-identifier hs-var">strictness</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsBang
</span><a href="#local-6989586621682767338"><span class="hs-identifier hs-var">bang</span></a></span><span>
</span><span id="line-1558"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBangTy GhcPs -&gt; HsBang -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass. XBangTy pass -&gt; HsBang -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-var">HsBangTy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767335"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
</span><a href="#local-6989586621682767336"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767337"><span class="hs-identifier hs-var">tl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682767329"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; SrcStrictness -&gt; HsBang
</span><a href="Language.Haskell.Syntax.Basic.html#HsBang"><span class="hs-identifier hs-var">HsBang</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621682767330"><span class="hs-identifier hs-var">unpk</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621682767340"><span class="hs-identifier hs-var">strictness</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767339"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1559"></span><span>    </span><span class="annot"><a href="#local-6989586621682767334"><span class="hs-identifier hs-var">addUnpackedness</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767341"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767341"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682767342"><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
</span><a href="#local-6989586621682767342"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767343"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767343"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-1560"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBangTy GhcPs -&gt; HsBang -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass. XBangTy pass -&gt; HsBang -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-var">HsBangTy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767341"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;#-}&quot;
</span><a href="#local-6989586621682767342"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpaLocation
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682767329"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; SrcStrictness -&gt; HsBang
</span><a href="Language.Haskell.Syntax.Basic.html#HsBang"><span class="hs-identifier hs-var">HsBang</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621682767330"><span class="hs-identifier hs-var">unpk</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767343"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1561"></span><span>
</span><span id="line-1562"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-1563"></span><span class="hs-comment">-- | Check for monad comprehensions</span><span>
</span><span id="line-1564"></span><span class="hs-comment">--</span><span>
</span><span id="line-1565"></span><span class="hs-comment">-- If the flag MonadComprehensions is set, return a 'MonadComp' context,</span><span>
</span><span id="line-1566"></span><span class="hs-comment">-- otherwise use the usual 'ListComp' context</span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkMonadComp"><span class="hs-identifier hs-type">checkMonadComp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDoFlavour"><span class="hs-identifier hs-type">HsDoFlavour</span></a></span><span>
</span><span id="line-1569"></span><span id="checkMonadComp"><span class="annot"><span class="annottext">checkMonadComp :: PV HsDoFlavour
</span><a href="GHC.Parser.PostProcess.html#checkMonadComp"><span class="hs-identifier hs-var hs-var">checkMonadComp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1570"></span><span>    </span><span id="local-6989586621682767346"><span class="annot"><a href="#local-6989586621682767346"><span class="hs-identifier hs-var">monadComprehensions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; PV Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#MonadComprehensionsBit"><span class="hs-identifier hs-var">MonadComprehensionsBit</span></a></span><span>
</span><span id="line-1571"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682767346"><span class="hs-identifier hs-type">monadComprehensions</span></a></span><span>
</span><span id="line-1572"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MonadComp"><span class="hs-identifier hs-type">MonadComp</span></a></span><span>
</span><span id="line-1573"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ListComp"><span class="hs-identifier hs-type">ListComp</span></a></span><span>
</span><span id="line-1574"></span><span>
</span><span id="line-1575"></span><span class="hs-comment">-- -------------------------------------------------------------------------</span><span>
</span><span id="line-1576"></span><span class="hs-comment">-- Expression/command/pattern ambiguity.</span><span>
</span><span id="line-1577"></span><span class="hs-comment">-- See Note [Ambiguous syntactic categories]</span><span>
</span><span id="line-1578"></span><span class="hs-comment">--</span><span>
</span><span id="line-1579"></span><span>
</span><span id="line-1580"></span><span class="hs-comment">-- See Note [Ambiguous syntactic categories]</span><span>
</span><span id="line-1581"></span><span class="hs-comment">--</span><span>
</span><span id="line-1582"></span><span class="hs-comment">-- This newtype is required to avoid impredicative types in monadic</span><span>
</span><span id="line-1583"></span><span class="hs-comment">-- productions. That is, in a production that looks like</span><span>
</span><span id="line-1584"></span><span class="hs-comment">--</span><span>
</span><span id="line-1585"></span><span class="hs-comment">--    | ... {% return (ECP ...) }</span><span>
</span><span id="line-1586"></span><span class="hs-comment">--</span><span>
</span><span id="line-1587"></span><span class="hs-comment">-- we are dealing with</span><span>
</span><span id="line-1588"></span><span class="hs-comment">--    P ECP</span><span>
</span><span id="line-1589"></span><span class="hs-comment">-- whereas without a newtype we would be dealing with</span><span>
</span><span id="line-1590"></span><span class="hs-comment">--    P (forall b. DisambECP b =&gt; PV (Located b))</span><span>
</span><span id="line-1591"></span><span class="hs-comment">--</span><span>
</span><span id="line-1592"></span><span class="hs-keyword">newtype</span><span> </span><span id="ECP"><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-var">ECP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1593"></span><span>  </span><span id="ECP"><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-var">ECP</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unECP"><span class="annot"><span class="annottext">ECP -&gt; forall b. DisambECP b =&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#unECP"><span class="hs-identifier hs-var hs-var">unECP</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682767353"><span class="annot"><a href="#local-6989586621682767353"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767353"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767353"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1594"></span><span>
</span><span id="line-1595"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromExp"><span class="hs-identifier hs-type">ecpFromExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-type">ECP</span></a></span><span>
</span><span id="line-1596"></span><span id="ecpFromExp"><span class="annot"><span class="annottext">ecpFromExp :: LHsExpr GhcPs -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ecpFromExp"><span class="hs-identifier hs-var hs-var">ecpFromExp</span></a></span></span><span> </span><span id="local-6989586621682767354"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682767354"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. DisambECP b =&gt; PV (LocatedA b)) -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-var">ECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV (LocatedA b)
forall b. DisambECP b =&gt; LHsExpr GhcPs -&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#ecpFromExp%27"><span class="hs-identifier hs-var">ecpFromExp'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682767354"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1597"></span><span>
</span><span id="line-1598"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromCmd"><span class="hs-identifier hs-type">ecpFromCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-type">ECP</span></a></span><span>
</span><span id="line-1599"></span><span id="ecpFromCmd"><span class="annot"><span class="annottext">ecpFromCmd :: LHsCmd GhcPs -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ecpFromCmd"><span class="hs-identifier hs-var hs-var">ecpFromCmd</span></a></span></span><span> </span><span id="local-6989586621682767361"><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621682767361"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. DisambECP b =&gt; PV (LocatedA b)) -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-var">ECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PV (LocatedA b)
forall b. DisambECP b =&gt; LHsCmd GhcPs -&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#ecpFromCmd%27"><span class="hs-identifier hs-var">ecpFromCmd'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
</span><a href="#local-6989586621682767361"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1600"></span><span>
</span><span id="line-1601"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromPat"><span class="hs-identifier hs-type">ecpFromPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-type">ECP</span></a></span><span>
</span><span id="line-1602"></span><span id="ecpFromPat"><span class="annot"><span class="annottext">ecpFromPat :: LPat GhcPs -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ecpFromPat"><span class="hs-identifier hs-var hs-var">ecpFromPat</span></a></span></span><span> </span><span id="local-6989586621682767368"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682767368"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. DisambECP b =&gt; PV (LocatedA b)) -&gt; ECP
</span><a href="GHC.Parser.PostProcess.html#ECP"><span class="hs-identifier hs-var">ECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PV (LocatedA b)
forall b. DisambECP b =&gt; LPat GhcPs -&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#ecpFromPat%27"><span class="hs-identifier hs-var">ecpFromPat'</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682767368"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1603"></span><span>
</span><span id="line-1604"></span><span class="hs-comment">-- The 'fbinds' parser rule produces values of this type. See Note</span><span>
</span><span id="line-1605"></span><span class="hs-comment">-- [RecordDotSyntax field updates].</span><span>
</span><span id="line-1606"></span><span class="hs-keyword">type</span><span> </span><span id="Fbind"><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier hs-var">Fbind</span></a></span></span><span> </span><span id="local-6989586621682767375"><span class="annot"><a href="#local-6989586621682767375"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767375"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecProj"><span class="hs-identifier hs-type">LHsRecProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767375"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1607"></span><span>
</span><span id="line-1608"></span><span class="hs-comment">-- | Disambiguate infix operators.</span><span>
</span><span id="line-1609"></span><span class="hs-comment">-- See Note [Ambiguous syntactic categories]</span><span>
</span><span id="line-1610"></span><span class="hs-keyword">class</span><span> </span><span id="DisambInfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambInfixOp"><span class="hs-identifier hs-var">DisambInfixOp</span></a></span></span><span> </span><span id="local-6989586621682764743"><span class="annot"><a href="#local-6989586621682764743"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1611"></span><span>  </span><span id="mkHsVarOpPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsVarOpPV"><span class="hs-identifier hs-type">mkHsVarOpPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764743"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>  </span><span id="mkHsConOpPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsConOpPV"><span class="hs-identifier hs-type">mkHsConOpPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764743"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1613"></span><span>  </span><span id="mkHsInfixHolePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsInfixHolePV"><span class="hs-identifier hs-type">mkHsInfixHolePV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764743"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1614"></span><span>
</span><span id="line-1615"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambInfixOp"><span class="hs-identifier hs-type">DisambInfixOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1616"></span><span>  </span><span id="local-6989586621682767385"><span class="annot"><span class="annottext">mkHsVarOpPV :: LocatedN RdrName -&gt; PV (LocatedN (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsVarOpPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsVarOpPV</span></a></span></span><span> </span><span id="local-6989586621682767386"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767386"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs)))
-&gt; LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; HsExpr GhcPs -&gt; LocatedN (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpanAnnN
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767386"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsExpr GhcPs
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767386"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span>  </span><span id="local-6989586621682767388"><span class="annot"><span class="annottext">mkHsConOpPV :: LocatedN RdrName -&gt; PV (LocatedN (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsConOpPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsConOpPV</span></a></span></span><span> </span><span id="local-6989586621682767389"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767389"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs)))
-&gt; LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; HsExpr GhcPs -&gt; LocatedN (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpanAnnN
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682767389"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsExpr GhcPs
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682767389"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1618"></span><span>  </span><span id="local-6989586621682767391"><span class="annot"><span class="annottext">mkHsInfixHolePV :: LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsInfixHolePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsInfixHolePV</span></a></span></span><span> </span><span id="local-6989586621682767392"><span class="annot"><span class="annottext">LocatedN (HsExpr GhcPs)
</span><a href="#local-6989586621682767392"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LocatedN (HsExpr GhcPs)
</span><a href="#local-6989586621682767392"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-1619"></span><span>
</span><span id="line-1620"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambInfixOp"><span class="hs-identifier hs-type">DisambInfixOp</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1621"></span><span>  </span><span id="local-6989586621682767398"><span class="annot"><span class="annottext">mkHsConOpPV :: LocatedN RdrName -&gt; PV (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#mkHsConOpPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsConOpPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767399"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767399"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767400"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767400"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; PV (LocatedN RdrName)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; PV (LocatedN RdrName))
-&gt; LocatedN RdrName -&gt; PV (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767399"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767400"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1622"></span><span>  </span><span id="local-6989586621682767402"><span class="annot"><span class="annottext">mkHsVarOpPV :: LocatedN RdrName -&gt; PV (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#mkHsVarOpPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsVarOpPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767403"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767403"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767404"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767404"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; PV (LocatedN RdrName)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; PV (LocatedN RdrName))
-&gt; LocatedN RdrName -&gt; PV (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767403"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767404"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1623"></span><span>  </span><span id="local-6989586621682767408"><span class="annot"><span class="annottext">mkHsInfixHolePV :: LocatedN (HsExpr GhcPs) -&gt; PV (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#mkHsInfixHolePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsInfixHolePV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767409"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767409"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedN RdrName)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedN RdrName))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767409"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidInfixHole"><span class="hs-identifier hs-var">PsErrInvalidInfixHole</span></a></span><span>
</span><span id="line-1624"></span><span>
</span><span id="line-1625"></span><span class="hs-keyword">type</span><span> </span><span id="AnnoBody"><span class="annot"><a href="GHC.Parser.PostProcess.html#AnnoBody"><span class="hs-identifier hs-var">AnnoBody</span></a></span></span><span> </span><span id="local-6989586621682767412"><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1626"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHS"><span class="hs-identifier hs-type">GRHS</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnnCO"><span class="hs-identifier hs-type">EpAnnCO</span></a></span><span>
</span><span id="line-1627"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnLW"><span class="hs-identifier hs-type">SrcSpanAnnLW</span></a></span><span>
</span><span id="line-1628"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1629"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span>
</span><span id="line-1630"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#Anno"><span class="hs-identifier hs-type">Anno</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#StmtLR"><span class="hs-identifier hs-type">StmtLR</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1631"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767412"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnLW"><span class="hs-identifier hs-type">SrcSpanAnnLW</span></a></span><span>
</span><span id="line-1632"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1633"></span><span>
</span><span id="line-1634"></span><span class="hs-comment">-- | Disambiguate constructs that may appear when we do not know ahead of time whether we are</span><span>
</span><span id="line-1635"></span><span class="hs-comment">-- parsing an expression, a command, or a pattern.</span><span>
</span><span id="line-1636"></span><span class="hs-comment">-- See Note [Ambiguous syntactic categories]</span><span>
</span><span id="line-1637"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-type">Body</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#AnnoBody"><span class="hs-identifier hs-type">AnnoBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="DisambECP"><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-var">DisambECP</span></a></span></span><span> </span><span id="local-6989586621682764683"><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1638"></span><span>  </span><span class="hs-comment">-- | See Note [Body in DisambECP]</span><span>
</span><span id="line-1639"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Body"><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-var">Body</span></a></span></span><span> </span><span id="local-6989586621682764683"><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span>
</span><span id="line-1640"></span><span>  </span><span class="hs-comment">-- | Return a command without ambiguity, or fail in a non-command context.</span><span>
</span><span id="line-1641"></span><span>  </span><span id="ecpFromCmd%27"><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromCmd%27"><span class="hs-identifier hs-type">ecpFromCmd'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsCmd"><span class="hs-identifier hs-type">LHsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1642"></span><span>  </span><span class="hs-comment">-- | Return an expression without ambiguity, or fail in a non-expression context.</span><span>
</span><span id="line-1643"></span><span>  </span><span id="ecpFromExp%27"><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromExp%27"><span class="hs-identifier hs-type">ecpFromExp'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1644"></span><span>  </span><span class="hs-comment">-- | Return a pattern without ambiguity, or fail in a non-pattern context.</span><span>
</span><span id="line-1645"></span><span>  </span><span id="ecpFromPat%27"><span class="annot"><a href="GHC.Parser.PostProcess.html#ecpFromPat%27"><span class="hs-identifier hs-type">ecpFromPat'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1646"></span><span>  </span><span id="mkHsProjUpdatePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsProjUpdatePV"><span class="hs-identifier hs-type">mkHsProjUpdatePV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DotFieldOcc"><span class="hs-identifier hs-type">DotFieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1647"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;=&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecProj"><span class="hs-identifier hs-type">LHsRecProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1648"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;let ... in ...&quot;</span><span>
</span><span id="line-1649"></span><span>  </span><span id="mkHsLetPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsLetPV"><span class="hs-identifier hs-type">mkHsLetPV</span></a></span></span><span>
</span><span id="line-1650"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1651"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;let&quot;</span></span><span>
</span><span id="line-1652"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsLocalBinds"><span class="hs-identifier hs-type">HsLocalBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1653"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;in&quot;</span></span><span>
</span><span id="line-1654"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1655"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1656"></span><span>  </span><span class="hs-comment">-- | Infix operator representation</span><span>
</span><span id="line-1657"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="InfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-var">InfixOp</span></a></span></span><span> </span><span id="local-6989586621682764683"><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1658"></span><span>  </span><span class="hs-comment">-- | Bring superclass constraints on InfixOp into scope.</span><span>
</span><span id="line-1659"></span><span>  </span><span class="hs-comment">-- See Note [UndecidableSuperClasses for associated types]</span><span>
</span><span id="line-1660"></span><span>  </span><span id="superInfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#superInfixOp"><span class="hs-identifier hs-type">superInfixOp</span></a></span></span><span>
</span><span id="line-1661"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambInfixOp"><span class="hs-identifier hs-type">DisambInfixOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-type">InfixOp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1662"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;f # x&quot; (infix operator)</span><span>
</span><span id="line-1663"></span><span>  </span><span id="mkHsOpAppPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsOpAppPV"><span class="hs-identifier hs-type">mkHsOpAppPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-type">InfixOp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1664"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1665"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;case ... of ...&quot;</span><span>
</span><span id="line-1666"></span><span>  </span><span id="mkHsCasePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsCasePV"><span class="hs-identifier hs-type">mkHsCasePV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1667"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#EpAnnHsCase"><span class="hs-identifier hs-type">EpAnnHsCase</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1668"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;\... -&gt; ...&quot; (lambda), &quot;\case&quot; and &quot;\cases&quot;</span><span>
</span><span id="line-1669"></span><span>  </span><span id="mkHsLamPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsLamPV"><span class="hs-identifier hs-type">mkHsLamPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLamVariant"><span class="hs-identifier hs-type">HsLamVariant</span></a></span><span>
</span><span id="line-1670"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#EpAnnLam"><span class="hs-identifier hs-type">EpAnnLam</span></a></span><span>
</span><span id="line-1671"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1672"></span><span>  </span><span class="hs-comment">-- | Function argument representation</span><span>
</span><span id="line-1673"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FunArg"><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-var">FunArg</span></a></span></span><span> </span><span id="local-6989586621682764683"><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1674"></span><span>  </span><span class="hs-comment">-- | Bring superclass constraints on FunArg into scope.</span><span>
</span><span id="line-1675"></span><span>  </span><span class="hs-comment">-- See Note [UndecidableSuperClasses for associated types]</span><span>
</span><span id="line-1676"></span><span>  </span><span id="superFunArg"><span class="annot"><a href="GHC.Parser.PostProcess.html#superFunArg"><span class="hs-identifier hs-type">superFunArg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-type">FunArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1677"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;f x&quot; (function application)</span><span>
</span><span id="line-1678"></span><span>  </span><span id="mkHsAppPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppPV"><span class="hs-identifier hs-type">mkHsAppPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-type">FunArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1679"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;f @t&quot; (visible type application)</span><span>
</span><span id="line-1680"></span><span>  </span><span id="mkHsAppTypePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppTypePV"><span class="hs-identifier hs-type">mkHsAppTypePV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1681"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;if ... then ... else ...&quot;</span><span>
</span><span id="line-1682"></span><span>  </span><span id="mkHsIfPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsIfPV"><span class="hs-identifier hs-type">mkHsIfPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1683"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1684"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>  </span><span class="hs-comment">-- semicolon?</span><span>
</span><span id="line-1685"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1686"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>  </span><span class="hs-comment">-- semicolon?</span><span>
</span><span id="line-1687"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1688"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#AnnsIf"><span class="hs-identifier hs-type">AnnsIf</span></a></span><span>
</span><span id="line-1689"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1690"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;do { ... }&quot; (do notation)</span><span>
</span><span id="line-1691"></span><span>  </span><span id="mkHsDoPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsDoPV"><span class="hs-identifier hs-type">mkHsDoPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1692"></span><span>    </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1693"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1694"></span><span>    </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLW"><span class="hs-identifier hs-type">LocatedLW</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LStmt"><span class="hs-identifier hs-type">LStmt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1695"></span><span>    </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Token</span><span>
</span><span id="line-1696"></span><span>    </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Anchor</span><span>
</span><span id="line-1697"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1698"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;( ... )&quot; (parentheses)</span><span>
</span><span id="line-1699"></span><span>  </span><span id="mkHsParPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsParPV"><span class="hs-identifier hs-type">mkHsParPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1700"></span><span>  </span><span class="hs-comment">-- | Disambiguate a variable &quot;f&quot; or a data constructor &quot;MkF&quot;.</span><span>
</span><span id="line-1701"></span><span>  </span><span id="mkHsVarPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsVarPV"><span class="hs-identifier hs-type">mkHsVarPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1702"></span><span>  </span><span class="hs-comment">-- | Disambiguate a monomorphic literal</span><span>
</span><span id="line-1703"></span><span>  </span><span id="mkHsLitPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsLitPV"><span class="hs-identifier hs-type">mkHsLitPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1704"></span><span>  </span><span class="hs-comment">-- | Disambiguate an overloaded literal</span><span>
</span><span id="line-1705"></span><span>  </span><span id="mkHsOverLitPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsOverLitPV"><span class="hs-identifier hs-type">mkHsOverLitPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621682764756"><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764756"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764756"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1706"></span><span>  </span><span class="hs-comment">-- | Disambiguate a wildcard</span><span>
</span><span id="line-1707"></span><span>  </span><span id="mkHsWildCardPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsWildCardPV"><span class="hs-identifier hs-type">mkHsWildCardPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621682764757"><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#NoAnn"><span class="hs-identifier hs-type">NoAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764757"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764757"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1708"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;a :: t&quot; (type annotation)</span><span>
</span><span id="line-1709"></span><span>  </span><span id="mkHsTySigPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsTySigPV"><span class="hs-identifier hs-type">mkHsTySigPV</span></a></span></span><span>
</span><span id="line-1710"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1711"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;[a,b,c]&quot; (list syntax)</span><span>
</span><span id="line-1712"></span><span>  </span><span id="mkHsExplicitListPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsExplicitListPV"><span class="hs-identifier hs-type">mkHsExplicitListPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-type">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1713"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;$(...)&quot; and &quot;[quasi|...|]&quot; (TH splices)</span><span>
</span><span id="line-1714"></span><span>  </span><span id="mkHsSplicePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsSplicePV"><span class="hs-identifier hs-type">mkHsSplicePV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSplice"><span class="hs-identifier hs-type">HsUntypedSplice</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1715"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;f { a = b, ... }&quot; syntax (record construction and record updates)</span><span>
</span><span id="line-1716"></span><span>  </span><span id="mkHsRecordPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsRecordPV"><span class="hs-identifier hs-type">mkHsRecordPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1717"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- Is OverloadedRecordUpdate in effect?</span><span>
</span><span id="line-1718"></span><span>    </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1719"></span><span>    </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1720"></span><span>    </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1721"></span><span>    </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier hs-type">Fbind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1722"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1723"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1724"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;-a&quot; (negation)</span><span>
</span><span id="line-1725"></span><span>  </span><span id="mkHsNegAppPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsNegAppPV"><span class="hs-identifier hs-type">mkHsNegAppPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1726"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;(# a)&quot; (right operator section)</span><span>
</span><span id="line-1727"></span><span>  </span><span id="mkHsSectionR_PV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsSectionR_PV"><span class="hs-identifier hs-type">mkHsSectionR_PV</span></a></span></span><span>
</span><span id="line-1728"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-type">InfixOp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1729"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;(a -&gt; b)&quot; (view pattern or function type arrow)</span><span>
</span><span id="line-1730"></span><span>  </span><span id="mkHsArrowPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsArrowPV"><span class="hs-identifier hs-type">mkHsArrowPV</span></a></span></span><span>
</span><span id="line-1731"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span id="local-6989586621682764758"><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764758"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764758"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrowOf"><span class="hs-identifier hs-type">HsArrowOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1732"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;%m&quot; to the left of &quot;-&gt;&quot; (multiplicity)</span><span>
</span><span id="line-1733"></span><span>  </span><span id="mkHsMultPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsMultPV"><span class="hs-identifier hs-type">mkHsMultPV</span></a></span></span><span>
</span><span id="line-1734"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#TokRarrow"><span class="hs-identifier hs-type">TokRarrow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrowOf"><span class="hs-identifier hs-type">HsArrowOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1735"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;forall a. b&quot; and &quot;forall a -&gt; b&quot; (forall telescope)</span><span>
</span><span id="line-1736"></span><span>  </span><span id="mkHsForallPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsForallPV"><span class="hs-identifier hs-type">mkHsForallPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1737"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;(a,b,c)&quot; to the left of &quot;=&gt;&quot; (constraint list)</span><span>
</span><span id="line-1738"></span><span>  </span><span id="checkContextPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#checkContextPV"><span class="hs-identifier hs-type">checkContextPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedC"><span class="hs-identifier hs-type">LocatedC</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1739"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;a =&gt; b&quot; (constraint context)</span><span>
</span><span id="line-1740"></span><span>  </span><span id="mkQualPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkQualPV"><span class="hs-identifier hs-type">mkQualPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedC"><span class="hs-identifier hs-type">LocatedC</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1741"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;a@b&quot; (as-pattern)</span><span>
</span><span id="line-1742"></span><span>  </span><span id="mkHsAsPatPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAsPatPV"><span class="hs-identifier hs-type">mkHsAsPatPV</span></a></span></span><span>
</span><span id="line-1743"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;~a&quot; (lazy pattern)</span><span>
</span><span id="line-1745"></span><span>  </span><span id="mkHsLazyPatPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsLazyPatPV"><span class="hs-identifier hs-type">mkHsLazyPatPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;~&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1746"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;!a&quot; (bang pattern)</span><span>
</span><span id="line-1747"></span><span>  </span><span id="mkHsBangPatPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsBangPatPV"><span class="hs-identifier hs-type">mkHsBangPatPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1748"></span><span>  </span><span class="hs-comment">-- | Disambiguate tuple sections and unboxed sums</span><span>
</span><span id="line-1749"></span><span>  </span><span id="mkSumOrTuplePV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePV"><span class="hs-identifier hs-type">mkSumOrTuplePV</span></a></span></span><span>
</span><span id="line-1750"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#SumOrTuple"><span class="hs-identifier hs-type">SumOrTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1751"></span><span>  </span><span class="hs-comment">-- | Disambiguate &quot;type t&quot; (embedded type)</span><span>
</span><span id="line-1752"></span><span>  </span><span id="mkHsEmbTyPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsEmbTyPV"><span class="hs-identifier hs-type">mkHsEmbTyPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1753"></span><span>  </span><span class="hs-comment">-- | Validate infixexp LHS to reject unwanted {-# SCC ... #-} pragmas</span><span>
</span><span id="line-1754"></span><span>  </span><span id="rejectPragmaPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-type">rejectPragmaPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764683"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1755"></span><span>
</span><span id="line-1756"></span><span class="hs-comment">{- Note [UndecidableSuperClasses for associated types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(This Note is about the code in GHC, not about the user code that we are parsing)

Assume we have a class C with an associated type T:

  class C a where
    type T a
    ...

If we want to add 'C (T a)' as a superclass, we need -XUndecidableSuperClasses:

  {-# LANGUAGE UndecidableSuperClasses #-}
  class C (T a) =&gt; C a where
    type T a
    ...

Unfortunately, -XUndecidableSuperClasses don't work all that well, sometimes
making GHC loop. The workaround is to bring this constraint into scope
manually with a helper method:

  class C a where
    type T a
    superT :: (C (T a) =&gt; r) -&gt; r

In order to avoid ambiguous types, 'r' must mention 'a'.

For consistency, we use this approach for all constraints on associated types,
even when -XUndecidableSuperClasses are not required.
-}</span><span>
</span><span id="line-1786"></span><span>
</span><span id="line-1787"></span><span class="hs-comment">{- Note [Body in DisambECP]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
There are helper functions (mkBodyStmt, mkBindStmt, unguardedRHS, etc) that
require their argument to take a form of (body GhcPs) for some (body :: Type -&gt;
*). To satisfy this requirement, we say that (b ~ Body b GhcPs) in the
superclass constraints of DisambECP.

The alternative is to change mkBodyStmt, mkBindStmt, unguardedRHS, etc, to drop
this requirement. It is possible and would allow removing the type index of
PatBuilder, but leads to worse type inference, breaking some code in the
typechecker.
-}</span><span>
</span><span id="line-1799"></span><span>
</span><span id="line-1800"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1801"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Body"><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-var">Body</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span>
</span><span id="line-1802"></span><span>  </span><span id="local-6989586621682767497"><span class="annot"><span class="annottext">ecpFromCmd' :: LHsCmd GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromCmd%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromCmd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-1803"></span><span>  </span><span id="local-6989586621682767509"><span class="annot"><span class="annottext">ecpFromExp' :: LHsExpr GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromExp%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromExp'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767510"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767510"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767511"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682767511"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767510"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682767511"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1804"></span><span>  </span><span id="local-6989586621682767523"><span class="annot"><span class="annottext">ecpFromPat' :: LPat GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromPat%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromPat'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767524"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767524"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767525"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767525"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767524"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682767525"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1805"></span><span>  </span><span id="local-6989586621682767528"><span class="annot"><span class="annottext">mkHsProjUpdatePV :: SrcSpan
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; Bool
-&gt; Maybe (EpToken &quot;=&quot;)
-&gt; PV (LHsRecProj GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
</span><a href="GHC.Parser.PostProcess.html#mkHsProjUpdatePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsProjUpdatePV</span></a></span></span><span> </span><span id="local-6989586621682767529"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767529"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; PV (LHsRecProj GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; PV (LHsRecProj GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))))
-&gt; MsgEnvelope PsMessage
-&gt; PV (LHsRecProj GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767529"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1806"></span><span>                                                 </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordDotInvalid"><span class="hs-identifier hs-var">PsErrOverloadedRecordDotInvalid</span></a></span><span>
</span><span id="line-1807"></span><span>  </span><span id="local-6989586621682767536"><span class="annot"><span class="annottext">mkHsLamPV :: SrcSpan
-&gt; HsLamVariant
-&gt; LocatedLW [LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
-&gt; EpAnnLam
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLamPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLamPV</span></a></span></span><span> </span><span id="local-6989586621682767537"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767537"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767538"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682767538"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767539"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682767539"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span id="local-6989586621682767540"><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
</span><a href="#local-6989586621682767540"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767541"><span class="annot"><span class="annottext">EpAnnLam
</span><a href="#local-6989586621682767541"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1808"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767542"><span class="annot"><a href="#local-6989586621682767542"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767537"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1809"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767543"><span class="annot"><a href="#local-6989586621682767543"><span class="hs-identifier hs-var hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; HsLamVariant
-&gt; LocatedLW
     [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; MatchGroup GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; HsLamVariant
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkLamCaseMatchGroup"><span class="hs-identifier hs-var">mkLamCaseMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682767538"><span class="hs-identifier hs-var">lam_variant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnLW
-&gt; [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; LocatedLW
     [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682767539"><span class="hs-identifier hs-var">lm</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
[LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767540"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1810"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767537"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767542"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLam"><span class="hs-identifier hs-type">HsCmdLam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767541"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767538"><span class="hs-identifier hs-type">lam_variant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767543"><span class="hs-identifier hs-type">mg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1811"></span><span>
</span><span id="line-1812"></span><span>  </span><span id="local-6989586621682767549"><span class="annot"><span class="annottext">mkHsLetPV :: SrcSpan
-&gt; EpToken &quot;let&quot;
-&gt; HsLocalBinds GhcPs
-&gt; EpToken &quot;in&quot;
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLetPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLetPV</span></a></span></span><span> </span><span id="local-6989586621682767550"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767550"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767551"><span class="annot"><span class="annottext">EpToken &quot;let&quot;
</span><a href="#local-6989586621682767551"><span class="hs-identifier hs-var">tkLet</span></a></span></span><span> </span><span id="local-6989586621682767552"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621682767552"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682767553"><span class="annot"><span class="annottext">EpToken &quot;in&quot;
</span><a href="#local-6989586621682767553"><span class="hs-identifier hs-var">tkIn</span></a></span></span><span> </span><span id="local-6989586621682767554"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767554"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1813"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767555"><span class="annot"><a href="#local-6989586621682767555"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767550"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1814"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767550"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767555"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdLet"><span class="hs-identifier hs-type">HsCmdLet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767551"><span class="hs-identifier hs-type">tkLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682767553"><span class="hs-identifier hs-type">tkIn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767552"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767554"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1815"></span><span>
</span><span id="line-1816"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="InfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-var">InfixOp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span>  </span><span id="local-6989586621682767558"><span class="annot"><span class="annottext">superInfixOp :: (DisambInfixOp (InfixOp (HsCmd GhcPs)) =&gt;
 PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superInfixOp"><span class="hs-identifier hs-var hs-var hs-var">superInfixOp</span></a></span></span><span> </span><span id="local-6989586621682767559"><span class="annot"><span class="annottext">DisambInfixOp (InfixOp (HsCmd GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="#local-6989586621682767559"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
DisambInfixOp (InfixOp (HsCmd GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="#local-6989586621682767559"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1819"></span><span>
</span><span id="line-1820"></span><span>  </span><span id="local-6989586621682767581"><span class="annot"><span class="annottext">mkHsOpAppPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; LocatedN (InfixOp (HsCmd GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOpAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOpAppPV</span></a></span></span><span> </span><span id="local-6989586621682767582"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767582"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767583"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767583"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621682767584"><span class="annot"><span class="annottext">LocatedN (InfixOp (HsCmd GhcPs))
</span><a href="#local-6989586621682767584"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682767585"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767585"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1821"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767594"><span class="annot"><span class="annottext">cmdArg :: GenLocated a (HsCmd p) -&gt; GenLocated l (HsCmdTop p)
</span><a href="#local-6989586621682767594"><span class="hs-identifier hs-var hs-var hs-var">cmdArg</span></a></span></span><span> </span><span id="local-6989586621682767595"><span class="annot"><span class="annottext">GenLocated a (HsCmd p)
</span><a href="#local-6989586621682767595"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">l -&gt; HsCmdTop p -&gt; GenLocated l (HsCmdTop p)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; l
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; l) -&gt; a -&gt; l
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GenLocated a (HsCmd p) -&gt; a
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated a (HsCmd p)
</span><a href="#local-6989586621682767595"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsCmdTop p -&gt; GenLocated l (HsCmdTop p))
-&gt; HsCmdTop p -&gt; GenLocated l (HsCmdTop p)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XCmdTop p -&gt; XRec p (HsCmd p) -&gt; HsCmdTop p
forall p. XCmdTop p -&gt; LHsCmd p -&gt; HsCmdTop p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdTop"><span class="hs-identifier hs-var">HsCmdTop</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdTop p
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec p (HsCmd p)
GenLocated a (HsCmd p)
</span><a href="#local-6989586621682767595"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1822"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767597"><span class="annot"><a href="#local-6989586621682767597"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767582"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1823"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767582"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767597"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdArrForm"><span class="hs-identifier hs-type">HsCmdArrForm</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-type">reLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767584"><span class="hs-identifier hs-type">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Infix"><span class="hs-identifier hs-type">Infix</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621682767594"><span class="hs-identifier hs-type">cmdArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767583"><span class="hs-identifier hs-type">c1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682767594"><span class="hs-identifier hs-type">cmdArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767585"><span class="hs-identifier hs-type">c2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1824"></span><span>
</span><span id="line-1825"></span><span>  </span><span id="local-6989586621682767604"><span class="annot"><span class="annottext">mkHsCasePV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; LocatedLW [LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
-&gt; EpAnnHsCase
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsCasePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsCasePV</span></a></span></span><span> </span><span id="local-6989586621682767605"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767605"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767606"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682767606"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767607"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682767607"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span id="local-6989586621682767608"><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
</span><a href="#local-6989586621682767608"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682767609"><span class="annot"><span class="annottext">EpAnnHsCase
</span><a href="#local-6989586621682767609"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1826"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767610"><span class="annot"><a href="#local-6989586621682767610"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767605"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1827"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767611"><span class="annot"><a href="#local-6989586621682767611"><span class="hs-identifier hs-var hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; LocatedLW
     [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; MatchGroup GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnLW
-&gt; [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; LocatedLW
     [LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682767607"><span class="hs-identifier hs-var">lm</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
[LocatedA (Match GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767608"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1828"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767605"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767610"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdCase"><span class="hs-identifier hs-type">HsCmdCase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767609"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767606"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767611"><span class="hs-identifier hs-type">mg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1829"></span><span>
</span><span id="line-1830"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FunArg"><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-var">FunArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmd"><span class="hs-identifier hs-type">HsCmd</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1831"></span><span>  </span><span id="local-6989586621682767615"><span class="annot"><span class="annottext">superFunArg :: (DisambECP (FunArg (HsCmd GhcPs)) =&gt;
 PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superFunArg"><span class="hs-identifier hs-var hs-var hs-var">superFunArg</span></a></span></span><span> </span><span id="local-6989586621682767616"><span class="annot"><span class="annottext">DisambECP (FunArg (HsCmd GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="#local-6989586621682767616"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
DisambECP (FunArg (HsCmd GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="#local-6989586621682767616"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1832"></span><span>  </span><span id="local-6989586621682767620"><span class="annot"><span class="annottext">mkHsAppPV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; LocatedA (FunArg (HsCmd GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppPV</span></a></span></span><span> </span><span id="local-6989586621682767621"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767621"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767622"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767622"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682767623"><span class="annot"><span class="annottext">LocatedA (FunArg (HsCmd GhcPs))
</span><a href="#local-6989586621682767623"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1833"></span><span>    </span><span class="annot"><span class="annottext">LHsCmd GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkCmdBlockArguments"><span class="hs-identifier hs-var">checkCmdBlockArguments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767622"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1834"></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-var">checkExpBlockArguments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
LocatedA (FunArg (HsCmd GhcPs))
</span><a href="#local-6989586621682767623"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1835"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; HsCmd GhcPs -&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767621"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCmdApp GhcPs -&gt; LHsCmd GhcPs -&gt; LHsExpr GhcPs -&gt; HsCmd GhcPs
forall id. XCmdApp id -&gt; LHsCmd id -&gt; LHsExpr id -&gt; HsCmd id
</span><a href="Language.Haskell.Syntax.Expr.html#HsCmdApp"><span class="hs-identifier hs-var">HsCmdApp</span></a></span><span> </span><span class="annot"><span class="annottext">XCmdApp GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsCmd GhcPs
GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767622"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
LocatedA (FunArg (HsCmd GhcPs))
</span><a href="#local-6989586621682767623"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1836"></span><span>  </span><span id="local-6989586621682767646"><span class="annot"><span class="annottext">mkHsAppTypePV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; EpToken &quot;@&quot;
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTypePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTypePV</span></a></span></span><span> </span><span id="local-6989586621682767647"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767647"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767648"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767648"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767649"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767649"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767647"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767648"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767649"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1837"></span><span>  </span><span id="local-6989586621682767668"><span class="annot"><span class="annottext">mkHsIfPV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; AnnsIf
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsIfPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsIfPV</span></a></span></span><span> </span><span id="local-6989586621682767669"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767669"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767670"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682767670"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682767671"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767671"><span class="hs-identifier hs-var">semi1</span></a></span></span><span> </span><span id="local-6989586621682767672"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767672"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682767673"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767673"><span class="hs-identifier hs-var">semi2</span></a></span></span><span> </span><span id="local-6989586621682767674"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767674"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682767675"><span class="annot"><span class="annottext">AnnsIf
</span><a href="#local-6989586621682767675"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1838"></span><span>    </span><span class="annot"><span class="annottext">(HsExpr GhcPs
 -&gt; Bool -&gt; HsCmd GhcPs -&gt; Bool -&gt; HsCmd GhcPs -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV ()
forall a b c.
(Outputable a, Outputable b, Outputable c) =&gt;
(a -&gt; Bool -&gt; b -&gt; Bool -&gt; c -&gt; PsMessage)
-&gt; LocatedA a -&gt; Bool -&gt; LocatedA b -&gt; Bool -&gt; LocatedA c -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkDoAndIfThenElse"><span class="hs-identifier hs-var">checkDoAndIfThenElse</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
-&gt; Bool -&gt; HsCmd GhcPs -&gt; Bool -&gt; HsCmd GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrSemiColonsInCondCmd"><span class="hs-identifier hs-var">PsErrSemiColonsInCondCmd</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682767670"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767671"><span class="hs-identifier hs-var">semi1</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767672"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682767673"><span class="hs-identifier hs-var">semi2</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767674"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1839"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767677"><span class="annot"><a href="#local-6989586621682767677"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767669"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1840"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767669"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767677"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsCmdIf"><span class="hs-identifier hs-type">mkHsCmdIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767670"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767672"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767674"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767675"><span class="hs-identifier hs-type">anns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1841"></span><span>  </span><span id="local-6989586621682767685"><span class="annot"><span class="annottext">mkHsDoPV :: SrcSpan
-&gt; Maybe ModuleName
-&gt; LocatedLW [LStmt GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
-&gt; EpaLocation
-&gt; EpaLocation
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsDoPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsDoPV</span></a></span></span><span> </span><span id="local-6989586621682767686"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767686"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621682767687"><span class="annot"><span class="annottext">LocatedLW [LStmt GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
</span><a href="#local-6989586621682767687"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621682767688"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767688"><span class="hs-identifier hs-var">tok_loc</span></a></span></span><span> </span><span id="local-6989586621682767689"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682767689"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1842"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767690"><span class="annot"><a href="#local-6989586621682767690"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767686"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1843"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767686"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767690"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdDo"><span class="hs-identifier hs-type">HsCmdDo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-type">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682767689"><span class="hs-identifier hs-type">anc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#ListNone"><span class="hs-identifier hs-type">ListNone</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682767688"><span class="hs-identifier hs-type">tok_loc</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767687"><span class="hs-identifier hs-type">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1844"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsDoPV"><span class="hs-identifier hs-var">mkHsDoPV</span></a></span><span> </span><span id="local-6989586621682767691"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767691"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682767692"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682767692"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="annottext">LocatedLW [LStmt GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; MsgEnvelope PsMessage
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767691"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrQualifiedDoInCmd"><span class="hs-identifier hs-var">PsErrQualifiedDoInCmd</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621682767692"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1845"></span><span>  </span><span id="local-6989586621682767698"><span class="annot"><span class="annottext">mkHsParPV :: SrcSpan
-&gt; EpToken &quot;(&quot;
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; EpToken &quot;)&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsParPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsParPV</span></a></span></span><span> </span><span id="local-6989586621682767699"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767699"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767700"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682767700"><span class="hs-identifier hs-var">lpar</span></a></span></span><span> </span><span id="local-6989586621682767701"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767701"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682767702"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682767702"><span class="hs-identifier hs-var">rpar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1846"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682767703"><span class="annot"><a href="#local-6989586621682767703"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767699"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1847"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767699"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682767703"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCmdPar"><span class="hs-identifier hs-type">HsCmdPar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682767700"><span class="hs-identifier hs-type">lpar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682767702"><span class="hs-identifier hs-type">rpar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682767701"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1848"></span><span>  </span><span id="local-6989586621682767707"><span class="annot"><span class="annottext">mkHsVarPV :: LocatedN RdrName -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsVarPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsVarPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767708"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767708"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767709"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767709"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682767708"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682767709"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>  </span><span id="local-6989586621682767712"><span class="annot"><span class="annottext">mkHsLitPV :: Located (HsLit GhcPs) -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLitPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767713"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767713"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767714"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682767714"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767713"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682767714"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1850"></span><span>  </span><span id="local-6989586621682767726"><span class="annot"><span class="annottext">mkHsOverLitPV :: forall a.
LocatedAn a (HsOverLit GhcPs) -&gt; PV (LocatedAn a (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOverLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOverLitPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767727"><span class="annot"><span class="annottext">EpAnn a
</span><a href="#local-6989586621682767727"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767728"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682767728"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (LocatedAn a (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn a -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn a
</span><a href="#local-6989586621682767727"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsOverLit GhcPs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682767728"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1851"></span><span>  </span><span id="local-6989586621682767731"><span class="annot"><span class="annottext">mkHsWildCardPV :: forall a. NoAnn a =&gt; SrcSpan -&gt; PV (LocatedAn a (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsWildCardPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsWildCardPV</span></a></span></span><span> </span><span id="local-6989586621682767732"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767732"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (LocatedAn a (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767732"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1852"></span><span>  </span><span id="local-6989586621682767751"><span class="annot"><span class="annottext">mkHsTySigPV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; LHsType GhcPs
-&gt; TokDcolon
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsTySigPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsTySigPV</span></a></span></span><span> </span><span id="local-6989586621682767752"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767752"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767753"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767753"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682767754"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682767754"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span class="annot"><span class="annottext">TokDcolon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682767752"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767753"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;::&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682767754"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1853"></span><span>  </span><span id="local-6989586621682767767"><span class="annot"><span class="annottext">mkHsExplicitListPV :: SrcSpan
-&gt; [GenLocated SrcSpanAnnA (HsCmd GhcPs)]
-&gt; AnnList ()
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsExplicitListPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsExplicitListPV</span></a></span></span><span> </span><span id="local-6989586621682767768"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767768"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767769"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsCmd GhcPs)]
</span><a href="#local-6989586621682767769"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnList ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767768"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1854"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc)
-&gt; [GenLocated SrcSpanAnnA (HsCmd GhcPs)] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsCmd GhcPs)]
</span><a href="#local-6989586621682767769"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1855"></span><span>  </span><span id="local-6989586621682767780"><span class="annot"><span class="annottext">mkHsSplicePV :: Located (HsUntypedSplice GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSplicePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSplicePV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682767781"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767781"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767782"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682767782"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767781"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Maybe Name -&gt; HsUntypedSplice GhcPs -&gt; SDoc
forall (p :: Pass).
OutputableBndrId p =&gt;
Bool -&gt; Maybe Name -&gt; HsUntypedSplice (GhcPass p) -&gt; SDoc
</span><a href="GHC.Hs.Expr.html#pprUntypedSplice"><span class="hs-identifier hs-var">pprUntypedSplice</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682767782"><span class="hs-identifier hs-var">sp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1856"></span><span>  </span><span id="local-6989586621682767816"><span class="annot"><span class="annottext">mkHsRecordPV :: Bool
-&gt; SrcSpan
-&gt; SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; ([Fbind (HsCmd GhcPs)], Maybe SrcSpan)
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsRecordPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsRecordPV</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767817"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767817"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682767818"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767818"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767819"><span class="annot"><span class="annottext">[Fbind (HsCmd GhcPs)]
</span><a href="#local-6989586621682767819"><span class="hs-identifier hs-var">fbinds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767820"><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682767820"><span class="hs-identifier hs-var">ddLoc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1857"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682767821"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767821"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682767822"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767822"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsCmd GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsCmd GhcPs))))]
-&gt; ([GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
          (GenLocated SrcSpanAnnA (HsCmd GhcPs)))],
    [GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
          (GenLocated SrcSpanAnnA (HsCmd GhcPs)))])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">[Fbind (HsCmd GhcPs)]
[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsCmd GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsCmd GhcPs))))]
</span><a href="#local-6989586621682767819"><span class="hs-identifier hs-var">fbinds</span></a></span><span>
</span><span id="line-1858"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767822"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1859"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; MsgEnvelope PsMessage
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767817"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordDotInvalid"><span class="hs-identifier hs-var">PsErrOverloadedRecordDotInvalid</span></a></span><span>
</span><span id="line-1860"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767817"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767818"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecFields GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA
   (HsRecField GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
-&gt; Maybe SrcSpan
-&gt; HsRecFields GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall arg.
[LocatedA (HsRecField GhcPs arg)]
-&gt; Maybe SrcSpan -&gt; HsRecFields GhcPs arg
</span><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-var">mk_rec_fields</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA
   (HsRecField GhcPs (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsCmd GhcPs)))]
</span><a href="#local-6989586621682767821"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682767820"><span class="hs-identifier hs-var">ddLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1861"></span><span>  </span><span id="local-6989586621682767838"><span class="annot"><span class="annottext">mkHsNegAppPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; EpToken &quot;-&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsNegAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsNegAppPV</span></a></span></span><span> </span><span id="local-6989586621682767839"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767839"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767840"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767840"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;-&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767839"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767840"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1862"></span><span>  </span><span id="local-6989586621682767856"><span class="annot"><span class="annottext">mkHsSectionR_PV :: SrcSpan
-&gt; LocatedA (InfixOp (HsCmd GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSectionR_PV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSectionR_PV</span></a></span></span><span> </span><span id="local-6989586621682767857"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767857"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767858"><span class="annot"><span class="annottext">LocatedA (InfixOp (HsCmd GhcPs))
</span><a href="#local-6989586621682767858"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682767859"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767859"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767857"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1863"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682767860"><span class="annot"><span class="annottext">pp_op :: SDoc
</span><a href="#local-6989586621682767860"><span class="hs-identifier hs-var hs-var">pp_op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Maybe SDoc -&gt; SDoc
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cannot print infix operator&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1864"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; Maybe SDoc
forall (p :: Pass).
OutputableBndrId p =&gt;
HsExpr (GhcPass p) -&gt; Maybe SDoc
</span><a href="GHC.Hs.Expr.html#ppr_infix_expr"><span class="hs-identifier hs-var">ppr_infix_expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; HsExpr GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
LocatedA (InfixOp (HsCmd GhcPs))
</span><a href="#local-6989586621682767858"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1865"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682767860"><span class="hs-identifier hs-var">pp_op</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767859"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1866"></span><span>  </span><span id="local-6989586621682767863"><span class="annot"><span class="annottext">mkHsArrowPV :: forall lhs.
SrcSpan
-&gt; ArrowParsingMode lhs (HsCmd GhcPs)
-&gt; LocatedA lhs
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsArrowPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsArrowPV</span></a></span></span><span> </span><span id="local-6989586621682767864"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767864"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767865"><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsCmd GhcPs)
</span><a href="#local-6989586621682767865"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span id="local-6989586621682767866"><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682767866"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682767867"><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs
</span><a href="#local-6989586621682767867"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621682767868"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767868"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767864"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1867"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsCmd GhcPs)
</span><a href="#local-6989586621682767865"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- matching on the mode brings Outputable instances into scope</span><span>
</span><span id="line-1868"></span><span>      </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsCmd GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-var">ArrowIsViewPat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedA lhs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682767866"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs -&gt; SDoc
forall mult (pass :: Pass).
(Outputable mult, OutputableBndrId pass) =&gt;
HsArrowOf mult (GhcPass pass) -&gt; SDoc
</span><a href="GHC.Hs.Type.html#pprHsArrow"><span class="hs-identifier hs-var">pprHsArrow</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs
</span><a href="#local-6989586621682767867"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767868"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1869"></span><span>      </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsCmd GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsFunType"><span class="hs-identifier hs-var">ArrowIsFunType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedA lhs -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682767866"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs -&gt; SDoc
forall mult (pass :: Pass).
(Outputable mult, OutputableBndrId pass) =&gt;
HsArrowOf mult (GhcPass pass) -&gt; SDoc
</span><a href="GHC.Hs.Type.html#pprHsArrow"><span class="hs-identifier hs-var">pprHsArrow</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs
</span><a href="#local-6989586621682767867"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767868"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1870"></span><span>  </span><span id="local-6989586621682767929"><span class="annot"><span class="annottext">mkHsMultPV :: EpToken &quot;%&quot;
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV
     (TokRarrow
      -&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkHsMultPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsMultPV</span></a></span></span><span> </span><span id="local-6989586621682767930"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682767930"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682767931"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767931"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; SDoc
-&gt; PV
     (TokRarrow
      -&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs)
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767932"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc
 -&gt; PV
      (TokRarrow
       -&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs))
-&gt; SDoc
-&gt; PV
     (TokRarrow
      -&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsCmd GhcPs)) GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1871"></span><span>    </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682767930"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767931"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-1872"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682767932"><span class="annot"><span class="annottext">l :: SrcSpan
</span><a href="#local-6989586621682767932"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682767930"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767931"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-1873"></span><span>  </span><span id="local-6989586621682767946"><span class="annot"><span class="annottext">mkHsForallPV :: SrcSpan
-&gt; HsForAllTelescope GhcPs
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsForallPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsForallPV</span></a></span></span><span> </span><span id="local-6989586621682767947"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767947"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767948"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682767948"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621682767949"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767949"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767947"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1874"></span><span>    </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs -&gt; Maybe (LHsContext GhcPs) -&gt; SDoc
forall (p :: Pass).
OutputableBndrId p =&gt;
HsForAllTelescope (GhcPass p)
-&gt; Maybe (LHsContext (GhcPass p)) -&gt; SDoc
</span><a href="GHC.Hs.Type.html#pprHsForAll"><span class="hs-identifier hs-var">pprHsForAll</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682767948"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
Maybe
  (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767949"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1875"></span><span>  </span><span id="local-6989586621682767963"><span class="annot"><span class="annottext">checkContextPV :: GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)])
</span><a href="GHC.Parser.PostProcess.html#checkContextPV"><span class="hs-identifier hs-var hs-var hs-var">checkContextPV</span></a></span></span><span> </span><span id="local-6989586621682767964"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767964"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; SDoc -&gt; PV (LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)])
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767964"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)]))
-&gt; SDoc -&gt; PV (LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767964"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-1876"></span><span>  </span><span id="local-6989586621682767985"><span class="annot"><span class="annottext">mkQualPV :: SrcSpan
-&gt; LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)]
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkQualPV"><span class="hs-identifier hs-var hs-var hs-var">mkQualPV</span></a></span></span><span> </span><span id="local-6989586621682767986"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767986"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682767987"><span class="annot"><span class="annottext">LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)]
</span><a href="#local-6989586621682767987"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682767988"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767988"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682767986"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1877"></span><span>    </span><span class="annot"><span class="annottext">LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedC [GenLocated SrcSpanAnnA (HsCmd GhcPs)]
</span><a href="#local-6989586621682767987"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;=&gt;&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682767988"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-1878"></span><span>  </span><span id="local-6989586621682768002"><span class="annot"><span class="annottext">mkHsAsPatPV :: SrcSpan
-&gt; LocatedN RdrName
-&gt; EpToken &quot;@&quot;
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAsPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAsPatPV</span></a></span></span><span> </span><span id="local-6989586621682768003"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768003"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768004"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768004"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768005"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768005"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768003"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1879"></span><span>    </span><span class="annot"><span class="annottext">RdrName -&gt; SDoc
forall a. OutputableBndr a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprPrefixOcc"><span class="hs-identifier hs-var">pprPrefixOcc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768004"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768005"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1880"></span><span>  </span><span id="local-6989586621682768020"><span class="annot"><span class="annottext">mkHsLazyPatPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; EpToken &quot;~&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLazyPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLazyPatPV</span></a></span></span><span> </span><span id="local-6989586621682768021"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768021"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768022"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768022"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;~&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768021"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1881"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;~&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768022"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1882"></span><span>  </span><span id="local-6989586621682768036"><span class="annot"><span class="annottext">mkHsBangPatPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsCmd GhcPs)
-&gt; EpToken &quot;!&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsBangPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsBangPatPV</span></a></span></span><span> </span><span id="local-6989586621682768037"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768037"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768038"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768038"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;!&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768037"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs)))
-&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1883"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><a href="#local-6989586621682768038"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1884"></span><span>  </span><span id="local-6989586621682768049"><span class="annot"><span class="annottext">mkSumOrTuplePV :: SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (HsCmd GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePV"><span class="hs-identifier hs-var hs-var hs-var">mkSumOrTuplePV</span></a></span></span><span> </span><span id="local-6989586621682768050"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768050"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768051"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682768051"><span class="hs-identifier hs-var">boxity</span></a></span></span><span> </span><span id="local-6989586621682768052"><span class="annot"><span class="annottext">SumOrTuple (HsCmd GhcPs)
</span><a href="#local-6989586621682768052"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768050"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; SumOrTuple (HsCmd GhcPs) -&gt; SDoc
forall b. Outputable b =&gt; Boxity -&gt; SumOrTuple b -&gt; SDoc
</span><a href="GHC.Parser.Types.html#pprSumOrTuple"><span class="hs-identifier hs-var">pprSumOrTuple</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682768051"><span class="hs-identifier hs-var">boxity</span></a></span><span> </span><span class="annot"><span class="annottext">SumOrTuple (HsCmd GhcPs)
</span><a href="#local-6989586621682768052"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1885"></span><span>  </span><span id="local-6989586621682768067"><span class="annot"><span class="annottext">mkHsEmbTyPV :: SrcSpan
-&gt; EpToken &quot;type&quot;
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsEmbTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsEmbTyPV</span></a></span></span><span> </span><span id="local-6989586621682768068"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768068"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768069"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768069"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; PV (GenLocated SrcSpanAnnA (HsCmd GhcPs))
forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var">cmdFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768068"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768069"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1886"></span><span>  </span><span id="local-6989586621682768071"><span class="annot"><span class="annottext">rejectPragmaPV :: GenLocated SrcSpanAnnA (HsCmd GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var hs-var hs-var">rejectPragmaPV</span></a></span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsCmd GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1887"></span><span>
</span><span id="line-1888"></span><span id="local-6989586621682764764"><span class="annot"><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-type">cmdFail</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764764"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1889"></span><span id="cmdFail"><span class="annot"><span class="annottext">cmdFail :: forall a. SrcSpan -&gt; SDoc -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#cmdFail"><span class="hs-identifier hs-var hs-var">cmdFail</span></a></span></span><span> </span><span id="local-6989586621682768074"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768074"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682768075"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682768075"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV a
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV a) -&gt; MsgEnvelope PsMessage -&gt; PV a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768074"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrParseErrorInCmd"><span class="hs-identifier hs-var">PsErrParseErrorInCmd</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682768075"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1890"></span><span>
</span><span id="line-1891"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLamMatchGroup"><span class="hs-identifier hs-type">checkLamMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLamVariant"><span class="hs-identifier hs-type">HsLamVariant</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1892"></span><span id="checkLamMatchGroup"><span class="annot"><span class="annottext">checkLamMatchGroup :: SrcSpan
-&gt; HsLamVariant -&gt; MatchGroup GhcPs (LHsExpr GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkLamMatchGroup"><span class="hs-identifier hs-var hs-var">checkLamMatchGroup</span></a></span></span><span> </span><span id="local-6989586621682768078"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768078"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="Language.Haskell.Syntax.Expr.html#LamSingle"><span class="hs-identifier hs-var">LamSingle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682768080"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682768080"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1893"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; PV () -&gt; PV ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Pat GhcPs)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; [LPat GhcPs]
forall (id :: Pass) body.
LMatch (GhcPass id) body -&gt; [LPat (GhcPass id)]
</span><a href="GHC.Hs.Expr.html#hsLMatchPats"><span class="hs-identifier hs-var">hsLMatchPats</span></a></span><span> </span><span class="annot"><span class="annottext">LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
GenLocated
  SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682768080"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PV () -&gt; PV ()) -&gt; PV () -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768078"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrEmptyLambda"><span class="hs-identifier hs-var">PsErrEmptyLambda</span></a></span><span>
</span><span id="line-1894"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLamMatchGroup"><span class="hs-identifier hs-var">checkLamMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcPs (LHsExpr GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1895"></span><span>
</span><span id="line-1896"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1897"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Body"><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-var">Body</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span>
</span><span id="line-1898"></span><span>  </span><span id="local-6989586621682768136"><span class="annot"><span class="annottext">ecpFromCmd' :: LHsCmd GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromCmd%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromCmd'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768137"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768137"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768138"><span class="annot"><span class="annottext">HsCmd GhcPs
</span><a href="#local-6989586621682768138"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1899"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768137"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrArrowCmdInExpr"><span class="hs-identifier hs-var">PsErrArrowCmdInExpr</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs
</span><a href="#local-6989586621682768138"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1900"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768137"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1901"></span><span>  </span><span id="local-6989586621682768141"><span class="annot"><span class="annottext">ecpFromExp' :: LHsExpr GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromExp%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromExp'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-1902"></span><span>  </span><span id="local-6989586621682768148"><span class="annot"><span class="annottext">ecpFromPat' :: LPat GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromPat%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromPat'</span></a></span></span><span> </span><span id="local-6989586621682768149"><span class="annot"><span class="annottext">p :: LPat GhcPs
</span><a href="#local-6989586621682768149"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768150"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768150"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1903"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768150"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOrPatInExpr"><span class="hs-identifier hs-var">PsErrOrPatInExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768149"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1904"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768150"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1905"></span><span>  </span><span id="local-6989586621682768156"><span class="annot"><span class="annottext">mkHsProjUpdatePV :: SrcSpan
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; Maybe (EpToken &quot;=&quot;)
-&gt; PV (LHsRecProj GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="GHC.Parser.PostProcess.html#mkHsProjUpdatePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsProjUpdatePV</span></a></span></span><span> </span><span id="local-6989586621682768157"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768157"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768158"><span class="annot"><span class="annottext">Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
</span><a href="#local-6989586621682768158"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621682768159"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768159"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682768160"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768160"><span class="hs-identifier hs-var">isPun</span></a></span></span><span> </span><span id="local-6989586621682768161"><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
</span><a href="#local-6989586621682768161"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1906"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768162"><span class="annot"><a href="#local-6989586621682768162"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768157"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1907"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrProjUpdate"><span class="hs-identifier hs-type">mkRdrProjUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768157"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768162"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768158"><span class="hs-identifier hs-type">fields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768159"><span class="hs-identifier hs-type">arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768160"><span class="hs-identifier hs-type">isPun</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768161"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-1908"></span><span>  </span><span id="local-6989586621682768168"><span class="annot"><span class="annottext">mkHsLetPV :: SrcSpan
-&gt; EpToken &quot;let&quot;
-&gt; HsLocalBinds GhcPs
-&gt; EpToken &quot;in&quot;
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLetPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLetPV</span></a></span></span><span> </span><span id="local-6989586621682768169"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768169"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768170"><span class="annot"><span class="annottext">EpToken &quot;let&quot;
</span><a href="#local-6989586621682768170"><span class="hs-identifier hs-var">tkLet</span></a></span></span><span> </span><span id="local-6989586621682768171"><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><a href="#local-6989586621682768171"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621682768172"><span class="annot"><span class="annottext">EpToken &quot;in&quot;
</span><a href="#local-6989586621682768172"><span class="hs-identifier hs-var">tkIn</span></a></span></span><span> </span><span id="local-6989586621682768173"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768173"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1909"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768174"><span class="annot"><a href="#local-6989586621682768174"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768169"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1910"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768169"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768174"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLet"><span class="hs-identifier hs-type">HsLet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682768170"><span class="hs-identifier hs-type">tkLet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682768172"><span class="hs-identifier hs-type">tkIn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768171"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768173"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1911"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="InfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-var">InfixOp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1912"></span><span>  </span><span id="local-6989586621682768177"><span class="annot"><span class="annottext">superInfixOp :: (DisambInfixOp (InfixOp (HsExpr GhcPs)) =&gt;
 PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superInfixOp"><span class="hs-identifier hs-var hs-var hs-var">superInfixOp</span></a></span></span><span> </span><span id="local-6989586621682768178"><span class="annot"><span class="annottext">DisambInfixOp (InfixOp (HsExpr GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682768178"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
DisambInfixOp (InfixOp (HsExpr GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682768178"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1913"></span><span>  </span><span id="local-6989586621682768185"><span class="annot"><span class="annottext">mkHsOpAppPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; LocatedN (InfixOp (HsExpr GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOpAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOpAppPV</span></a></span></span><span> </span><span id="local-6989586621682768186"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768186"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768187"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768187"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621682768188"><span class="annot"><span class="annottext">LocatedN (InfixOp (HsExpr GhcPs))
</span><a href="#local-6989586621682768188"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682768189"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768189"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1914"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768190"><span class="annot"><a href="#local-6989586621682768190"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768186"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1915"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768186"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768190"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768187"><span class="hs-identifier hs-type">e1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-type">reLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768188"><span class="hs-identifier hs-type">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768189"><span class="hs-identifier hs-type">e2</span></a></span><span>
</span><span id="line-1916"></span><span>  </span><span id="local-6989586621682768197"><span class="annot"><span class="annottext">mkHsCasePV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; LocatedLW [LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
-&gt; EpAnnHsCase
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsCasePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsCasePV</span></a></span></span><span> </span><span id="local-6989586621682768198"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768198"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768199"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682768199"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768200"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682768200"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span id="local-6989586621682768201"><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621682768201"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768202"><span class="annot"><span class="annottext">EpAnnHsCase
</span><a href="#local-6989586621682768202"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1917"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768203"><span class="annot"><a href="#local-6989586621682768203"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768198"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1918"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768204"><span class="annot"><a href="#local-6989586621682768204"><span class="hs-identifier hs-var hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; MatchGroup GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnLW
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682768200"><span class="hs-identifier hs-var">lm</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682768201"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1919"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768198"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768203"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-type">HsCase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768202"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768199"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768204"><span class="hs-identifier hs-type">mg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1920"></span><span>  </span><span id="local-6989586621682768211"><span class="annot"><span class="annottext">mkHsLamPV :: SrcSpan
-&gt; HsLamVariant
-&gt; LocatedLW [LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
-&gt; EpAnnLam
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLamPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLamPV</span></a></span></span><span> </span><span id="local-6989586621682768212"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768212"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768213"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682768213"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768214"><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682768214"><span class="hs-identifier hs-var">lm</span></a></span></span><span> </span><span id="local-6989586621682768215"><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621682768215"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768216"><span class="annot"><span class="annottext">EpAnnLam
</span><a href="#local-6989586621682768216"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1921"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768217"><span class="annot"><a href="#local-6989586621682768217"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768212"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1922"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768218"><span class="annot"><a href="#local-6989586621682768218"><span class="hs-identifier hs-var hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; HsLamVariant
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; MatchGroup GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; HsLamVariant
-&gt; LocatedLW
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkLamCaseMatchGroup"><span class="hs-identifier hs-var">mkLamCaseMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#FromSource"><span class="hs-identifier hs-var">FromSource</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682768213"><span class="hs-identifier hs-var">lam_variant</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnLW
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; GenLocated
     SrcSpanAnnLW
     [GenLocated
        SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLW
</span><a href="#local-6989586621682768214"><span class="hs-identifier hs-var">lm</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
[GenLocated
   SrcSpanAnnA (Match GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682768215"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1923"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkLamMatchGroup"><span class="hs-identifier hs-type">checkLamMatchGroup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768212"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768213"><span class="hs-identifier hs-type">lam_variant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768218"><span class="hs-identifier hs-type">mg</span></a></span><span>
</span><span id="line-1924"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768212"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768217"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-type">HsLam</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768216"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768213"><span class="hs-identifier hs-type">lam_variant</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768218"><span class="hs-identifier hs-type">mg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1925"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FunArg"><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-var">FunArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1926"></span><span>  </span><span id="local-6989586621682768221"><span class="annot"><span class="annottext">superFunArg :: (DisambECP (FunArg (HsExpr GhcPs)) =&gt;
 PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superFunArg"><span class="hs-identifier hs-var hs-var hs-var">superFunArg</span></a></span></span><span> </span><span id="local-6989586621682768222"><span class="annot"><span class="annottext">DisambECP (FunArg (HsExpr GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682768222"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
DisambECP (FunArg (HsExpr GhcPs)) =&gt;
PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="#local-6989586621682768222"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1927"></span><span>  </span><span id="local-6989586621682768226"><span class="annot"><span class="annottext">mkHsAppPV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; LocatedA (FunArg (HsExpr GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppPV</span></a></span></span><span> </span><span id="local-6989586621682768227"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768227"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768228"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768228"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621682768229"><span class="annot"><span class="annottext">LocatedA (FunArg (HsExpr GhcPs))
</span><a href="#local-6989586621682768229"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1928"></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-var">checkExpBlockArguments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768228"><span class="hs-identifier hs-var">e1</span></a></span><span>
</span><span id="line-1929"></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-var">checkExpBlockArguments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
LocatedA (FunArg (HsExpr GhcPs))
</span><a href="#local-6989586621682768229"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-1930"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768227"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XApp GhcPs -&gt; LHsExpr GhcPs -&gt; LHsExpr GhcPs -&gt; HsExpr GhcPs
forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768228"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
LocatedA (FunArg (HsExpr GhcPs))
</span><a href="#local-6989586621682768229"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1931"></span><span>  </span><span id="local-6989586621682768233"><span class="annot"><span class="annottext">mkHsAppTypePV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; EpToken &quot;@&quot;
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTypePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTypePV</span></a></span></span><span> </span><span id="local-6989586621682768234"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768234"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768235"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768235"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682768236"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682768236"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682768237"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768237"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1932"></span><span>    </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkExpBlockArguments"><span class="hs-identifier hs-var">checkExpBlockArguments</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768235"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1933"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768234"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XAppTypeE GhcPs
-&gt; LHsExpr GhcPs -&gt; LHsWcType (NoGhcTc GhcPs) -&gt; HsExpr GhcPs
forall p.
XAppTypeE p -&gt; LHsExpr p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsAppType"><span class="hs-identifier hs-var">HsAppType</span></a></span><span> </span><span class="annot"><span class="annottext">XAppTypeE GhcPs
EpToken &quot;@&quot;
</span><a href="#local-6989586621682768236"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768235"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall thing. thing -&gt; HsWildCardBndrs GhcPs thing
</span><a href="GHC.Hs.Type.html#mkHsWildCardBndrs"><span class="hs-identifier hs-var">mkHsWildCardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768237"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1934"></span><span>  </span><span id="local-6989586621682768256"><span class="annot"><span class="annottext">mkHsIfPV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; AnnsIf
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsIfPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsIfPV</span></a></span></span><span> </span><span id="local-6989586621682768257"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768257"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768258"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682768258"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682768259"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768259"><span class="hs-identifier hs-var">semi1</span></a></span></span><span> </span><span id="local-6989586621682768260"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768260"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682768261"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768261"><span class="hs-identifier hs-var">semi2</span></a></span></span><span> </span><span id="local-6989586621682768262"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768262"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682768263"><span class="annot"><span class="annottext">AnnsIf
</span><a href="#local-6989586621682768263"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1935"></span><span>    </span><span class="annot"><span class="annottext">(HsExpr GhcPs
 -&gt; Bool -&gt; HsExpr GhcPs -&gt; Bool -&gt; HsExpr GhcPs -&gt; PsMessage)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV ()
forall a b c.
(Outputable a, Outputable b, Outputable c) =&gt;
(a -&gt; Bool -&gt; b -&gt; Bool -&gt; c -&gt; PsMessage)
-&gt; LocatedA a -&gt; Bool -&gt; LocatedA b -&gt; Bool -&gt; LocatedA c -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkDoAndIfThenElse"><span class="hs-identifier hs-var">checkDoAndIfThenElse</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
-&gt; Bool -&gt; HsExpr GhcPs -&gt; Bool -&gt; HsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrSemiColonsInCondExpr"><span class="hs-identifier hs-var">PsErrSemiColonsInCondExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768258"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768259"><span class="hs-identifier hs-var">semi1</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768260"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768261"><span class="hs-identifier hs-var">semi2</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768262"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1936"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768265"><span class="annot"><a href="#local-6989586621682768265"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768257"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1937"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768257"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768265"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkHsIf"><span class="hs-identifier hs-type">mkHsIf</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768258"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768260"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768262"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768263"><span class="hs-identifier hs-type">anns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1938"></span><span>  </span><span id="local-6989586621682768271"><span class="annot"><span class="annottext">mkHsDoPV :: SrcSpan
-&gt; Maybe ModuleName
-&gt; LocatedLW [LStmt GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
-&gt; EpaLocation
-&gt; EpaLocation
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsDoPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsDoPV</span></a></span></span><span> </span><span id="local-6989586621682768272"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768272"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768273"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621682768273"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621682768274"><span class="annot"><span class="annottext">LocatedLW [LStmt GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621682768274"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621682768275"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768275"><span class="hs-identifier hs-var">loc_tok</span></a></span></span><span> </span><span id="local-6989586621682768276"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768276"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1939"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768277"><span class="annot"><a href="#local-6989586621682768277"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768272"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1940"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768272"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768277"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsDo"><span class="hs-identifier hs-type">HsDo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#AnnList"><span class="hs-identifier hs-type">AnnList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682768276"><span class="hs-identifier hs-type">anc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#ListNone"><span class="hs-identifier hs-type">ListNone</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621682768275"><span class="hs-identifier hs-type">loc_tok</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DoExpr"><span class="hs-identifier hs-type">DoExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768273"><span class="hs-identifier hs-type">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768274"><span class="hs-identifier hs-type">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1941"></span><span>  </span><span id="local-6989586621682768282"><span class="annot"><span class="annottext">mkHsParPV :: SrcSpan
-&gt; EpToken &quot;(&quot;
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; EpToken &quot;)&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsParPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsParPV</span></a></span></span><span> </span><span id="local-6989586621682768283"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768283"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768284"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682768284"><span class="hs-identifier hs-var">lpar</span></a></span></span><span> </span><span id="local-6989586621682768285"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768285"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682768286"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682768286"><span class="hs-identifier hs-var">rpar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1942"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768287"><span class="annot"><a href="#local-6989586621682768287"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768283"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1943"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768283"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768287"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-type">HsPar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682768284"><span class="hs-identifier hs-type">lpar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682768286"><span class="hs-identifier hs-type">rpar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768285"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1944"></span><span>  </span><span id="local-6989586621682768293"><span class="annot"><span class="annottext">mkHsVarPV :: LocatedN RdrName -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsVarPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsVarPV</span></a></span></span><span> </span><span id="local-6989586621682768294"><span class="annot"><span class="annottext">v :: LocatedN RdrName
</span><a href="#local-6989586621682768294"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768295"><span class="annot"><span class="annottext">l :: SrcSpanAnnN
</span><a href="#local-6989586621682768295"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682768296"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768296"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1945"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768297"><span class="annot"><a href="#local-6989586621682768297"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682768295"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1946"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768296"><span class="hs-identifier hs-type">anc</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768297"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768294"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1947"></span><span>  </span><span id="local-6989586621682768302"><span class="annot"><span class="annottext">mkHsLitPV :: Located (HsLit GhcPs) -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLitPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768303"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768303"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768304"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768304"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1948"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768305"><span class="annot"><a href="#local-6989586621682768305"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768303"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1949"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768303"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768305"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768304"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1950"></span><span>  </span><span id="local-6989586621682768313"><span class="annot"><span class="annottext">mkHsOverLitPV :: forall a.
LocatedAn a (HsOverLit GhcPs) -&gt; PV (LocatedAn a (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOverLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOverLitPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682768314"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768314"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768315"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682768315"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682768316"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768316"><span class="hs-identifier hs-var">csIn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768317"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682768317"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1951"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768318"><span class="annot"><a href="#local-6989586621682768318"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768314"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span>  </span><span class="annot"><a href="#local-6989586621682768314"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768315"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682768318"><span class="hs-identifier hs-type">cs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682768316"><span class="hs-identifier hs-type">csIn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-type">NoExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768317"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1953"></span><span>  </span><span id="local-6989586621682768325"><span class="annot"><span class="annottext">mkHsWildCardPV :: forall a. NoAnn a =&gt; SrcSpan -&gt; PV (LocatedAn a (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsWildCardPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsWildCardPV</span></a></span></span><span> </span><span id="local-6989586621682768326"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768326"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedAn a (HsExpr GhcPs) -&gt; PV (LocatedAn a (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedAn a (HsExpr GhcPs) -&gt; PV (LocatedAn a (HsExpr GhcPs)))
-&gt; LocatedAn a (HsExpr GhcPs) -&gt; PV (LocatedAn a (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnn a -&gt; HsExpr GhcPs -&gt; LocatedAn a (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnn a
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768326"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1954"></span><span>  </span><span id="local-6989586621682768332"><span class="annot"><span class="annottext">mkHsTySigPV :: SrcSpanAnnA
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; LHsType GhcPs
-&gt; TokDcolon
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsTySigPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsTySigPV</span></a></span></span><span> </span><span id="local-6989586621682768333"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682768333"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682768334"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768334"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682768335"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682768335"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682768336"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768336"><span class="hs-identifier hs-var">csIn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768337"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768337"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682768338"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768338"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span id="local-6989586621682768339"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682768339"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1955"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768340"><span class="annot"><a href="#local-6989586621682768340"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768333"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1956"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768334"><span class="hs-identifier hs-type">anc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768335"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682768336"><span class="hs-identifier hs-type">csIn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682768340"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExprWithTySig"><span class="hs-identifier hs-type">ExprWithTySig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768339"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768337"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#hsTypeToHsSigWcType"><span class="hs-identifier hs-type">hsTypeToHsSigWcType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768338"><span class="hs-identifier hs-type">sig</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1957"></span><span>  </span><span id="local-6989586621682768347"><span class="annot"><span class="annottext">mkHsExplicitListPV :: SrcSpan
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; AnnList ()
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsExplicitListPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsExplicitListPV</span></a></span></span><span> </span><span id="local-6989586621682768348"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768348"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768349"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682768349"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621682768350"><span class="annot"><span class="annottext">AnnList ()
</span><a href="#local-6989586621682768350"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1958"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768351"><span class="annot"><a href="#local-6989586621682768351"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768348"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1959"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768348"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768351"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-type">ExplicitList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768350"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768349"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1960"></span><span>  </span><span id="local-6989586621682768358"><span class="annot"><span class="annottext">mkHsSplicePV :: Located (HsUntypedSplice GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSplicePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSplicePV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768359"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768359"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768360"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682768360"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1961"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768361"><span class="annot"><a href="#local-6989586621682768361"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768359"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1962"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsUntypedSplice"><span class="hs-identifier hs-type">HsUntypedSplice</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-type">NoExtField</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768359"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768361"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768360"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1963"></span><span>  </span><span id="local-6989586621682768376"><span class="annot"><span class="annottext">mkHsRecordPV :: Bool
-&gt; SrcSpan
-&gt; SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; ([Fbind (HsExpr GhcPs)], Maybe SrcSpan)
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsRecordPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsRecordPV</span></a></span></span><span> </span><span id="local-6989586621682768377"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682768377"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621682768378"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768378"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768379"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768379"><span class="hs-identifier hs-var">lrec</span></a></span></span><span> </span><span id="local-6989586621682768380"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768380"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682768381"><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682768381"><span class="hs-identifier hs-var">fbinds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682768382"><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682768382"><span class="hs-identifier hs-var">ddLoc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768383"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682768383"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1964"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768384"><span class="annot"><a href="#local-6989586621682768384"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768378"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1965"></span><span>    </span><span id="local-6989586621682768385"><span class="annot"><a href="#local-6989586621682768385"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRecConstrOrUpdate"><span class="hs-identifier hs-type">mkRecConstrOrUpdate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768377"><span class="hs-identifier hs-type">opts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768380"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768379"><span class="hs-identifier hs-type">lrec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682768381"><span class="hs-identifier hs-type">fbinds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621682768382"><span class="hs-identifier hs-type">ddLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768383"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-1966"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRecordSyntax"><span class="hs-identifier hs-type">checkRecordSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768378"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768384"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768385"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1967"></span><span>  </span><span id="local-6989586621682768391"><span class="annot"><span class="annottext">mkHsNegAppPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; EpToken &quot;-&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsNegAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsNegAppPV</span></a></span></span><span> </span><span id="local-6989586621682768392"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768392"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768393"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768393"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682768394"><span class="annot"><span class="annottext">EpToken &quot;-&quot;
</span><a href="#local-6989586621682768394"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1968"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768395"><span class="annot"><a href="#local-6989586621682768395"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768392"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1969"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768392"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768395"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#NegApp"><span class="hs-identifier hs-type">NegApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768394"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768393"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#noSyntaxExpr"><span class="hs-identifier hs-type">noSyntaxExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1970"></span><span>  </span><span id="local-6989586621682768402"><span class="annot"><span class="annottext">mkHsSectionR_PV :: SrcSpan
-&gt; LocatedA (InfixOp (HsExpr GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSectionR_PV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSectionR_PV</span></a></span></span><span> </span><span id="local-6989586621682768403"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768403"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768404"><span class="annot"><span class="annottext">LocatedA (InfixOp (HsExpr GhcPs))
</span><a href="#local-6989586621682768404"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682768405"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768405"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1971"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768406"><span class="annot"><a href="#local-6989586621682768406"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768403"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1972"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768403"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768406"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#SectionR"><span class="hs-identifier hs-type">SectionR</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768404"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768405"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1973"></span><span>  </span><span id="local-6989586621682768414"><span class="annot"><span class="annottext">mkHsAsPatPV :: SrcSpan
-&gt; LocatedN RdrName
-&gt; EpToken &quot;@&quot;
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAsPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAsPatPV</span></a></span></span><span> </span><span id="local-6989586621682768415"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768415"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768416"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768416"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768417"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768417"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768415"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTypeAppWithoutSpace"><span class="hs-identifier hs-var">PsErrTypeAppWithoutSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768416"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768417"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1974"></span><span>                          </span><span class="annot"><span class="annottext">PV ()
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. PV a -&gt; PV b -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768415"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1975"></span><span>  </span><span id="local-6989586621682768425"><span class="annot"><span class="annottext">mkHsLazyPatPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; EpToken &quot;~&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLazyPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLazyPatPV</span></a></span></span><span> </span><span id="local-6989586621682768426"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768426"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768427"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768427"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="annot"><span class="annottext">EpToken &quot;~&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768426"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLazyPatWithoutSpace"><span class="hs-identifier hs-var">PsErrLazyPatWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768427"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>                          </span><span class="annot"><span class="annottext">PV ()
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. PV a -&gt; PV b -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768426"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1977"></span><span>  </span><span id="local-6989586621682768435"><span class="annot"><span class="annottext">mkHsBangPatPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; EpToken &quot;!&quot;
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsBangPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsBangPatPV</span></a></span></span><span> </span><span id="local-6989586621682768436"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768436"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768437"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768437"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="annot"><span class="annottext">EpToken &quot;!&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768436"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrBangPatWithoutSpace"><span class="hs-identifier hs-var">PsErrBangPatWithoutSpace</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768437"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1978"></span><span>                          </span><span class="annot"><span class="annottext">PV ()
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. PV a -&gt; PV b -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768436"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var">hsHoleExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1979"></span><span>  </span><span id="local-6989586621682768439"><span class="annot"><span class="annottext">mkSumOrTuplePV :: SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (HsExpr GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePV"><span class="hs-identifier hs-var hs-var hs-var">mkSumOrTuplePV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (HsExpr GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (LHsExpr GhcPs)
SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (HsExpr GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTupleExpr"><span class="hs-identifier hs-var">mkSumOrTupleExpr</span></a></span><span>
</span><span id="line-1980"></span><span>  </span><span id="local-6989586621682768443"><span class="annot"><span class="annottext">mkHsEmbTyPV :: SrcSpan
-&gt; EpToken &quot;type&quot;
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsEmbTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsEmbTyPV</span></a></span></span><span> </span><span id="local-6989586621682768444"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768444"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768445"><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682768445"><span class="hs-identifier hs-var">toktype</span></a></span></span><span> </span><span id="local-6989586621682768446"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768446"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1981"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768444"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1982"></span><span>      </span><span class="annot"><span class="annottext">XEmbTy GhcPs -&gt; LHsWcType (NoGhcTc GhcPs) -&gt; HsExpr GhcPs
forall p. XEmbTy p -&gt; LHsWcType (NoGhcTc p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsEmbTy"><span class="hs-identifier hs-var">HsEmbTy</span></a></span><span> </span><span class="annot"><span class="annottext">XEmbTy GhcPs
EpToken &quot;type&quot;
</span><a href="#local-6989586621682768445"><span class="hs-identifier hs-var">toktype</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall thing. thing -&gt; HsWildCardBndrs GhcPs thing
</span><a href="GHC.Hs.Type.html#mkHsWildCardBndrs"><span class="hs-identifier hs-var">mkHsWildCardBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768446"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1983"></span><span>  </span><span id="local-6989586621682768448"><span class="annot"><span class="annottext">mkHsArrowPV :: forall lhs.
SrcSpan
-&gt; ArrowParsingMode lhs (HsExpr GhcPs)
-&gt; LocatedA lhs
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsArrowPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsArrowPV</span></a></span></span><span> </span><span id="local-6989586621682768449"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768449"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768450"><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsExpr GhcPs)
</span><a href="#local-6989586621682768450"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span id="local-6989586621682768451"><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682768451"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682768452"><span class="annot"><span class="annottext">HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
</span><a href="#local-6989586621682768452"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621682768453"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768453"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1984"></span><span>    </span><span class="hs-comment">-- In expressions, (e1 -&gt; e2) is always parsed as a function type,</span><span>
</span><span id="line-1985"></span><span>    </span><span class="hs-comment">-- even if ViewPatterns are enabled.</span><span>
</span><span id="line-1986"></span><span>    </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsExpr GhcPs)
-&gt; ((lhs ~ HsExpr GhcPs) =&gt;
    PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall lhs r.
ArrowParsingMode lhs (HsExpr GhcPs)
-&gt; ((lhs ~ HsExpr GhcPs) =&gt; r) -&gt; r
</span><a href="GHC.Parser.PostProcess.html#exprArrowParsingMode"><span class="hs-identifier hs-var">exprArrowParsingMode</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsExpr GhcPs)
</span><a href="#local-6989586621682768450"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">(((lhs ~ HsExpr GhcPs) =&gt;
  PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; ((lhs ~ HsExpr GhcPs) =&gt;
    PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1987"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768449"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1988"></span><span>      </span><span class="annot"><span class="annottext">XFunArr GhcPs
-&gt; HsArrowOf (LHsExpr GhcPs) GhcPs
-&gt; LHsExpr GhcPs
-&gt; LHsExpr GhcPs
-&gt; HsExpr GhcPs
forall p.
XFunArr p
-&gt; HsArrowOf (LHsExpr p) p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsFunArr"><span class="hs-identifier hs-var">HsFunArr</span></a></span><span> </span><span class="annot"><span class="annottext">XFunArr GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (LHsExpr GhcPs) GhcPs
HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
</span><a href="#local-6989586621682768452"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
LocatedA lhs
</span><a href="#local-6989586621682768451"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768453"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-1989"></span><span>  </span><span id="local-6989586621682768461"><span class="annot"><span class="annottext">mkHsMultPV :: EpToken &quot;%&quot;
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV
     (TokRarrow
      -&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkHsMultPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsMultPV</span></a></span></span><span> </span><span id="local-6989586621682768462"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682768462"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682768463"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768463"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1990"></span><span>    </span><span class="annot"><span class="annottext">(TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs)
-&gt; PV (TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs)
 -&gt; PV (TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs))
-&gt; (TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs)
-&gt; PV (TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
-&gt; LHsExpr GhcPs -&gt; TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkMultExpr"><span class="hs-identifier hs-var">mkMultExpr</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682768462"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768463"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1991"></span><span>  </span><span id="local-6989586621682768467"><span class="annot"><span class="annottext">mkHsForallPV :: SrcSpan
-&gt; HsForAllTelescope GhcPs
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsForallPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsForallPV</span></a></span></span><span> </span><span id="local-6989586621682768468"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768468"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768469"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768469"><span class="hs-identifier hs-var">telescope</span></a></span></span><span> </span><span id="local-6989586621682768470"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768470"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1992"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768468"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1993"></span><span>      </span><span class="annot"><span class="annottext">XForAll GhcPs
-&gt; HsForAllTelescope GhcPs -&gt; LHsExpr GhcPs -&gt; HsExpr GhcPs
forall p. XForAll p -&gt; HsForAllTelescope p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsForAll"><span class="hs-identifier hs-var">HsForAll</span></a></span><span> </span><span class="annot"><span class="annottext">XForAll GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace -&gt; HsForAllTelescope GhcPs -&gt; HsForAllTelescope GhcPs
</span><a href="GHC.Parser.PostProcess.html#setTelescopeBndrsNameSpace"><span class="hs-identifier hs-var">setTelescopeBndrsNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#varName"><span class="hs-identifier hs-var">varName</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768469"><span class="hs-identifier hs-var">telescope</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768470"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1994"></span><span>  </span><span id="local-6989586621682768472"><span class="annot"><span class="annottext">checkContextPV :: GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="GHC.Parser.PostProcess.html#checkContextPV"><span class="hs-identifier hs-var hs-var hs-var">checkContextPV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs -&gt; PV (LocatedC [LHsExpr GhcPs])
GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV
     (GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)])
</span><a href="GHC.Parser.PostProcess.html#checkContextExpr"><span class="hs-identifier hs-var">checkContextExpr</span></a></span><span>
</span><span id="line-1995"></span><span>  </span><span id="local-6989586621682768475"><span class="annot"><span class="annottext">mkQualPV :: SrcSpan
-&gt; GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkQualPV"><span class="hs-identifier hs-var hs-var hs-var">mkQualPV</span></a></span></span><span> </span><span id="local-6989586621682768476"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768476"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768477"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682768477"><span class="hs-identifier hs-var">qual</span></a></span></span><span> </span><span id="local-6989586621682768478"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768478"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1996"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768476"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1997"></span><span>      </span><span class="annot"><span class="annottext">XQual GhcPs
-&gt; XRec GhcPs [LHsExpr GhcPs] -&gt; LHsExpr GhcPs -&gt; HsExpr GhcPs
forall p. XQual p -&gt; XRec p [LHsExpr p] -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsQual"><span class="hs-identifier hs-var">HsQual</span></a></span><span> </span><span class="annot"><span class="annottext">XQual GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [LHsExpr GhcPs]
GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsExpr GhcPs)]
</span><a href="#local-6989586621682768477"><span class="hs-identifier hs-var">qual</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768478"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1998"></span><span>  </span><span id="local-6989586621682768485"><span class="annot"><span class="annottext">rejectPragmaPV :: GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var hs-var hs-var">rejectPragmaPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OpApp"><span class="hs-identifier hs-type">OpApp</span></a></span><span> </span><span class="annot"><span class="annottext">XOpApp GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768486"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682768486"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1999"></span><span>    </span><span class="hs-comment">-- assuming left-associative parsing of operators</span><span>
</span><span id="line-2000"></span><span>    </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; PV ()
forall b. DisambECP b =&gt; LocatedA b -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var">rejectPragmaPV</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682768486"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2001"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var">rejectPragmaPV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768487"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768487"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsPragE"><span class="hs-identifier hs-type">HsPragE</span></a></span><span> </span><span class="annot"><span class="annottext">XPragE GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768489"><span class="annot"><span class="annottext">HsPragE GhcPs
</span><a href="#local-6989586621682768489"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768487"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2002"></span><span>                                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPragE GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnallowedPragma"><span class="hs-identifier hs-var">PsErrUnallowedPragma</span></a></span><span> </span><span class="annot"><span class="annottext">HsPragE GhcPs
</span><a href="#local-6989586621682768489"><span class="hs-identifier hs-var">prag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2003"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var">rejectPragmaPV</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2004"></span><span>
</span><span id="line-2005"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-type">hsHoleExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#EpAnnUnboundVar"><span class="hs-identifier hs-type">EpAnnUnboundVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2006"></span><span id="hsHoleExpr"><span class="annot"><span class="annottext">hsHoleExpr :: Maybe EpAnnUnboundVar -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#hsHoleExpr"><span class="hs-identifier hs-var hs-var">hsHoleExpr</span></a></span></span><span> </span><span id="local-6989586621682768491"><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
</span><a href="#local-6989586621682768491"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XUnboundVar GhcPs -&gt; RdrName -&gt; HsExpr GhcPs
forall p. XUnboundVar p -&gt; RdrName -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsUnboundVar"><span class="hs-identifier hs-var">HsUnboundVar</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EpAnnUnboundVar
XUnboundVar GhcPs
</span><a href="#local-6989586621682768491"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>
</span><span id="line-2008"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2009"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Body"><span class="annot"><a href="GHC.Parser.PostProcess.html#Body"><span class="hs-identifier hs-var">Body</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span>
</span><span id="line-2010"></span><span>  </span><span id="local-6989586621682768545"><span class="annot"><span class="annottext">ecpFromCmd' :: LHsCmd GhcPs -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromCmd%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromCmd'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768546"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768546"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768547"><span class="annot"><span class="annottext">HsCmd GhcPs
</span><a href="#local-6989586621682768547"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768546"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrArrowCmdInPat"><span class="hs-identifier hs-var">PsErrArrowCmdInPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsCmd GhcPs
</span><a href="#local-6989586621682768547"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-2011"></span><span>  </span><span id="local-6989586621682768552"><span class="annot"><span class="annottext">ecpFromExp' :: LHsExpr GhcPs -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromExp%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromExp'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768553"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768553"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768554"><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682768554"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768553"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrArrowExprInPat"><span class="hs-identifier hs-var">PsErrArrowExprInPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><a href="#local-6989586621682768554"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2012"></span><span>  </span><span id="local-6989586621682768557"><span class="annot"><span class="annottext">ecpFromPat' :: LPat GhcPs -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#ecpFromPat%27"><span class="hs-identifier hs-var hs-var hs-var">ecpFromPat'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768558"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768558"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768559"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682768559"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768558"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PatBuilder GhcPs
forall p. Pat p -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-var">PatBuilderPat</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682768559"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2013"></span><span>  </span><span id="local-6989586621682768562"><span class="annot"><span class="annottext">mkHsLetPV :: SrcSpan
-&gt; EpToken &quot;let&quot;
-&gt; HsLocalBinds GhcPs
-&gt; EpToken &quot;in&quot;
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLetPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLetPV</span></a></span></span><span> </span><span id="local-6989586621682768563"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768563"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;let&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;in&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768563"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLetInPat"><span class="hs-identifier hs-var">PsErrLetInPat</span></a></span><span>
</span><span id="line-2014"></span><span>  </span><span id="local-6989586621682768567"><span class="annot"><span class="annottext">mkHsProjUpdatePV :: SrcSpan
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; Bool
-&gt; Maybe (EpToken &quot;=&quot;)
-&gt; PV (LHsRecProj GhcPs (LocatedA (PatBuilder GhcPs)))
</span><a href="GHC.Parser.PostProcess.html#mkHsProjUpdatePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsProjUpdatePV</span></a></span></span><span> </span><span id="local-6989586621682768568"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768568"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
-&gt; PV (LHsRecProj GhcPs (LocatedA (PatBuilder GhcPs)))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage
 -&gt; PV (LHsRecProj GhcPs (LocatedA (PatBuilder GhcPs))))
-&gt; MsgEnvelope PsMessage
-&gt; PV (LHsRecProj GhcPs (LocatedA (PatBuilder GhcPs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768568"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordDotInvalid"><span class="hs-identifier hs-var">PsErrOverloadedRecordDotInvalid</span></a></span><span>
</span><span id="line-2015"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="InfixOp"><span class="annot"><a href="GHC.Parser.PostProcess.html#InfixOp"><span class="hs-identifier hs-var">InfixOp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-2016"></span><span>  </span><span id="local-6989586621682768571"><span class="annot"><span class="annottext">superInfixOp :: (DisambInfixOp (InfixOp (PatBuilder GhcPs)) =&gt;
 PV (LocatedA (PatBuilder GhcPs)))
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superInfixOp"><span class="hs-identifier hs-var hs-var hs-var">superInfixOp</span></a></span></span><span> </span><span id="local-6989586621682768572"><span class="annot"><span class="annottext">DisambInfixOp (InfixOp (PatBuilder GhcPs)) =&gt;
PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682768572"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
DisambInfixOp (InfixOp (PatBuilder GhcPs)) =&gt;
PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682768572"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2017"></span><span>  </span><span id="local-6989586621682768577"><span class="annot"><span class="annottext">mkHsOpAppPV :: SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; LocatedN (InfixOp (PatBuilder GhcPs))
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOpAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOpAppPV</span></a></span></span><span> </span><span id="local-6989586621682768578"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768578"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768579"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768579"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682768580"><span class="annot"><span class="annottext">LocatedN (InfixOp (PatBuilder GhcPs))
</span><a href="#local-6989586621682768580"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682768581"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768581"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2018"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768582"><span class="annot"><a href="#local-6989586621682768582"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768578"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-2019"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768578"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768582"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOpApp"><span class="hs-identifier hs-type">PatBuilderOpApp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768579"><span class="hs-identifier hs-type">p1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768580"><span class="hs-identifier hs-type">op</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768581"><span class="hs-identifier hs-type">p2</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2020"></span><span>
</span><span id="line-2021"></span><span>  </span><span id="local-6989586621682768585"><span class="annot"><span class="annottext">mkHsLamPV :: SrcSpan
-&gt; HsLamVariant
-&gt; LocatedLW [LMatch GhcPs (LocatedA (PatBuilder GhcPs))]
-&gt; EpAnnLam
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLamPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLamPV</span></a></span></span><span> </span><span id="local-6989586621682768586"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768586"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768587"><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682768587"><span class="hs-identifier hs-var">lam_variant</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedLW [LMatch GhcPs (LocatedA (PatBuilder GhcPs))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpAnnLam
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768586"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLamVariant -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrLambdaInPat"><span class="hs-identifier hs-var">PsErrLambdaInPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsLamVariant
</span><a href="#local-6989586621682768587"><span class="hs-identifier hs-var">lam_variant</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2022"></span><span>
</span><span id="line-2023"></span><span>  </span><span id="local-6989586621682768591"><span class="annot"><span class="annottext">mkHsCasePV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; LocatedLW [LMatch GhcPs (LocatedA (PatBuilder GhcPs))]
-&gt; EpAnnHsCase
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsCasePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsCasePV</span></a></span></span><span> </span><span id="local-6989586621682768592"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768592"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedLW [LMatch GhcPs (LocatedA (PatBuilder GhcPs))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpAnnHsCase
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768592"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrCaseInPat"><span class="hs-identifier hs-var">PsErrCaseInPat</span></a></span><span>
</span><span id="line-2024"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="FunArg"><span class="annot"><a href="GHC.Parser.PostProcess.html#FunArg"><span class="hs-identifier hs-var">FunArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2025"></span><span>  </span><span id="local-6989586621682768595"><span class="annot"><span class="annottext">superFunArg :: (DisambECP (FunArg (PatBuilder GhcPs)) =&gt;
 PV (LocatedA (PatBuilder GhcPs)))
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#superFunArg"><span class="hs-identifier hs-var hs-var hs-var">superFunArg</span></a></span></span><span> </span><span id="local-6989586621682768596"><span class="annot"><span class="annottext">DisambECP (FunArg (PatBuilder GhcPs)) =&gt;
PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682768596"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (LocatedA (PatBuilder GhcPs))
DisambECP (FunArg (PatBuilder GhcPs)) =&gt;
PV (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682768596"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-2026"></span><span>  </span><span id="local-6989586621682768598"><span class="annot"><span class="annottext">mkHsAppPV :: SrcSpanAnnA
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; LocatedA (FunArg (PatBuilder GhcPs))
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppPV</span></a></span></span><span> </span><span id="local-6989586621682768599"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768599"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768600"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768600"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682768601"><span class="annot"><span class="annottext">LocatedA (FunArg (PatBuilder GhcPs))
</span><a href="#local-6989586621682768601"><span class="hs-identifier hs-var">p2</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768599"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PatBuilder GhcPs
forall p.
LocatedA (PatBuilder p) -&gt; LocatedA (PatBuilder p) -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderApp"><span class="hs-identifier hs-var">PatBuilderApp</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768600"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
LocatedA (FunArg (PatBuilder GhcPs))
</span><a href="#local-6989586621682768601"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2027"></span><span>  </span><span id="local-6989586621682768607"><span class="annot"><span class="annottext">mkHsAppTypePV :: SrcSpanAnnA
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; EpToken &quot;@&quot;
-&gt; LHsType GhcPs
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTypePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTypePV</span></a></span></span><span> </span><span id="local-6989586621682768608"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768608"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768609"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768609"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682768610"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682768610"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682768611"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768611"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2028"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768612"><span class="annot"><a href="#local-6989586621682768612"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768608"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2029"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#addCommentsToEpAnn"><span class="hs-identifier hs-type">addCommentsToEpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768608"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768612"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderAppType"><span class="hs-identifier hs-type">PatBuilderAppType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768609"><span class="hs-identifier hs-type">p</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768610"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Type.html#mkHsTyPat"><span class="hs-identifier hs-type">mkHsTyPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768611"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2030"></span><span>  </span><span id="local-6989586621682768616"><span class="annot"><span class="annottext">mkHsIfPV :: SrcSpan
-&gt; LHsExpr GhcPs
-&gt; Bool
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; Bool
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; AnnsIf
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsIfPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsIfPV</span></a></span></span><span> </span><span id="local-6989586621682768617"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768617"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnsIf
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768617"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIfThenElseInPat"><span class="hs-identifier hs-var">PsErrIfThenElseInPat</span></a></span><span>
</span><span id="line-2031"></span><span>  </span><span id="local-6989586621682768621"><span class="annot"><span class="annottext">mkHsDoPV :: SrcSpan
-&gt; Maybe ModuleName
-&gt; LocatedLW [LStmt GhcPs (LocatedA (PatBuilder GhcPs))]
-&gt; EpaLocation
-&gt; EpaLocation
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsDoPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsDoPV</span></a></span></span><span> </span><span id="local-6989586621682768622"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768622"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedLW [LStmt GhcPs (LocatedA (PatBuilder GhcPs))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768622"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrDoNotationInPat"><span class="hs-identifier hs-var">PsErrDoNotationInPat</span></a></span><span>
</span><span id="line-2032"></span><span>  </span><span id="local-6989586621682768626"><span class="annot"><span class="annottext">mkHsParPV :: SrcSpan
-&gt; EpToken &quot;(&quot;
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; EpToken &quot;)&quot;
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsParPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsParPV</span></a></span></span><span> </span><span id="local-6989586621682768627"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768627"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768628"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682768628"><span class="hs-identifier hs-var">lpar</span></a></span></span><span> </span><span id="local-6989586621682768629"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768629"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682768630"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682768630"><span class="hs-identifier hs-var">rpar</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768627"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
-&gt; LocatedA (PatBuilder GhcPs) -&gt; EpToken &quot;)&quot; -&gt; PatBuilder GhcPs
forall p.
EpToken &quot;(&quot;
-&gt; LocatedA (PatBuilder p) -&gt; EpToken &quot;)&quot; -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderPar"><span class="hs-identifier hs-var">PatBuilderPar</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682768628"><span class="hs-identifier hs-var">lpar</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768629"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682768630"><span class="hs-identifier hs-var">rpar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2033"></span><span>  </span><span id="local-6989586621682768634"><span class="annot"><span class="annottext">mkHsVarPV :: LocatedN RdrName -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsVarPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsVarPV</span></a></span></span><span> </span><span id="local-6989586621682768635"><span class="annot"><span class="annottext">v :: LocatedN RdrName
</span><a href="#local-6989586621682768635"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpanAnnN
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621682768636"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682768636"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpanAnnA
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682768636"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; PatBuilder GhcPs
forall p. LocatedN RdrName -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-var">PatBuilderVar</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768635"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2034"></span><span>  </span><span id="local-6989586621682768642"><span class="annot"><span class="annottext">mkHsLitPV :: Located (HsLit GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLitPV</span></a></span></span><span> </span><span id="local-6989586621682768643"><span class="annot"><span class="annottext">lit :: Located (HsLit GhcPs)
</span><a href="#local-6989586621682768643"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768644"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768644"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768645"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768645"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2035"></span><span>    </span><span class="annot"><span class="annottext">Located (HsLit GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkUnboxedLitPat"><span class="hs-identifier hs-var">checkUnboxedLitPat</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsLit GhcPs)
</span><a href="#local-6989586621682768643"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-2036"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768647"><span class="annot"><a href="#local-6989586621682768647"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768644"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-2037"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768644"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768647"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768645"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2038"></span><span>  </span><span id="local-6989586621682768650"><span class="annot"><span class="annottext">mkHsOverLitPV :: forall a.
LocatedAn a (HsOverLit GhcPs)
-&gt; PV (LocatedAn a (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOverLitPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOverLitPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768651"><span class="annot"><span class="annottext">EpAnn a
</span><a href="#local-6989586621682768651"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768652"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682768652"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedAn a (PatBuilder GhcPs)
-&gt; PV (LocatedAn a (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedAn a (PatBuilder GhcPs)
 -&gt; PV (LocatedAn a (PatBuilder GhcPs)))
-&gt; LocatedAn a (PatBuilder GhcPs)
-&gt; PV (LocatedAn a (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnn a -&gt; PatBuilder GhcPs -&gt; LocatedAn a (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn a
</span><a href="#local-6989586621682768651"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsOverLit GhcPs -&gt; PatBuilder GhcPs
forall p. HsOverLit GhcPs -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderOverLit"><span class="hs-identifier hs-var">PatBuilderOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682768652"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2039"></span><span>  </span><span id="local-6989586621682768656"><span class="annot"><span class="annottext">mkHsWildCardPV :: forall a. NoAnn a =&gt; SrcSpan -&gt; PV (LocatedAn a (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsWildCardPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsWildCardPV</span></a></span></span><span> </span><span id="local-6989586621682768657"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768657"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedAn a (PatBuilder GhcPs)
-&gt; PV (LocatedAn a (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedAn a (PatBuilder GhcPs)
 -&gt; PV (LocatedAn a (PatBuilder GhcPs)))
-&gt; LocatedAn a (PatBuilder GhcPs)
-&gt; PV (LocatedAn a (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EpAnn a -&gt; PatBuilder GhcPs -&gt; LocatedAn a (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnn a
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768657"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PatBuilder GhcPs
forall p. Pat p -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-var">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XWildPat GhcPs -&gt; Pat GhcPs
forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2040"></span><span>  </span><span id="local-6989586621682768663"><span class="annot"><span class="annottext">mkHsTySigPV :: SrcSpanAnnA
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; LHsType GhcPs
-&gt; TokDcolon
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsTySigPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsTySigPV</span></a></span></span><span> </span><span id="local-6989586621682768664"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768664"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768665"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768665"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682768666"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768666"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682768667"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682768667"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2041"></span><span>    </span><span id="local-6989586621682768668"><span class="annot"><a href="#local-6989586621682768668"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768665"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2042"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768669"><span class="annot"><a href="#local-6989586621682768669"><span class="hs-identifier hs-var hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnCO -&gt; LHsType GhcPs -&gt; HsPatSigType GhcPs
</span><a href="GHC.Hs.Type.html#mkHsPatSigType"><span class="hs-identifier hs-var">mkHsPatSigType</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnCO
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768666"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-2043"></span><span>    </span><span id="local-6989586621682768670"><span class="annot"><a href="#local-6989586621682768670"><span class="hs-identifier hs-var">sig_pat</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#addSigPatP"><span class="hs-identifier hs-type">addSigPatP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768664"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768668"><span class="hs-identifier hs-type">p'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768669"><span class="hs-identifier hs-type">sig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768667"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-2044"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768670"><span class="hs-identifier hs-type">sig_pat</span></a></span><span>
</span><span id="line-2045"></span><span>  </span><span id="local-6989586621682768679"><span class="annot"><span class="annottext">mkHsExplicitListPV :: SrcSpan
-&gt; [LocatedA (PatBuilder GhcPs)]
-&gt; AnnList ()
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsExplicitListPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsExplicitListPV</span></a></span></span><span> </span><span id="local-6989586621682768680"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768680"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768681"><span class="annot"><span class="annottext">[LocatedA (PatBuilder GhcPs)]
</span><a href="#local-6989586621682768681"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621682768682"><span class="annot"><span class="annottext">AnnList ()
</span><a href="#local-6989586621682768682"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2046"></span><span>    </span><span id="local-6989586621682768683"><span class="annot"><a href="#local-6989586621682768683"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; [LocatedA (PatBuilder GhcPs)]
-&gt; PV [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
LocatedA (PatBuilder GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA (PatBuilder GhcPs)]
</span><a href="#local-6989586621682768681"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-2047"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768685"><span class="annot"><a href="#local-6989586621682768685"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768680"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2048"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768680"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768685"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768682"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768683"><span class="hs-identifier hs-type">ps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2049"></span><span>  </span><span id="local-6989586621682768691"><span class="annot"><span class="annottext">mkHsSplicePV :: Located (HsUntypedSplice GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSplicePV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSplicePV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768692"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768692"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768693"><span class="annot"><span class="annottext">HsUntypedSplice GhcPs
</span><a href="#local-6989586621682768693"><span class="hs-identifier hs-var">sp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2050"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768694"><span class="annot"><a href="#local-6989586621682768694"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768692"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-2051"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768692"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768694"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-type">noExtField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768693"><span class="hs-identifier hs-type">sp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2052"></span><span>  </span><span id="local-6989586621682768705"><span class="annot"><span class="annottext">mkHsRecordPV :: Bool
-&gt; SrcSpan
-&gt; SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; ([Fbind (PatBuilder GhcPs)], Maybe SrcSpan)
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsRecordPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsRecordPV</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768706"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768706"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768707"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768707"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682768708"><span class="annot"><span class="annottext">[Fbind (PatBuilder GhcPs)]
</span><a href="#local-6989586621682768708"><span class="hs-identifier hs-var">fbinds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682768709"><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682768709"><span class="hs-identifier hs-var">ddLoc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768710"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682768710"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2053"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682768711"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (LocatedA (PatBuilder GhcPs)))]
</span><a href="#local-6989586621682768711"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682768712"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (LocatedA (PatBuilder GhcPs)))]
</span><a href="#local-6989586621682768712"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (LocatedA (PatBuilder GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (LocatedA (PatBuilder GhcPs))))]
-&gt; ([GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
          (LocatedA (PatBuilder GhcPs)))],
    [GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
          (LocatedA (PatBuilder GhcPs)))])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">[Fbind (PatBuilder GhcPs)]
[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (LocatedA (PatBuilder GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (LocatedA (PatBuilder GhcPs))))]
</span><a href="#local-6989586621682768708"><span class="hs-identifier hs-var">fbinds</span></a></span><span>
</span><span id="line-2054"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (LocatedA (PatBuilder GhcPs)))]
-&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (LocatedA (PatBuilder GhcPs)))]
</span><a href="#local-6989586621682768712"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2055"></span><span>     </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768706"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordDotInvalid"><span class="hs-identifier hs-var">PsErrOverloadedRecordDotInvalid</span></a></span><span>
</span><span id="line-2056"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2057"></span><span>       </span><span class="hs-glyph">!</span><span id="local-6989586621682768713"><span class="annot"><a href="#local-6989586621682768713"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768706"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-2058"></span><span>       </span><span id="local-6989586621682768714"><span class="annot"><a href="#local-6989586621682768714"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkPatRec"><span class="hs-identifier hs-type">mkPatRec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768707"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-type">mk_rec_fields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768711"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768709"><span class="hs-identifier hs-type">ddLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768710"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-2059"></span><span>       </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkRecordSyntax"><span class="hs-identifier hs-type">checkRecordSyntax</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768706"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768713"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768714"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2060"></span><span>  </span><span id="local-6989586621682768725"><span class="annot"><span class="annottext">mkHsNegAppPV :: SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; EpToken &quot;-&quot;
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsNegAppPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsNegAppPV</span></a></span></span><span> </span><span id="local-6989586621682768726"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768726"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768727"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768727"><span class="hs-identifier hs-var">lp</span></a></span></span><span> </span><span id="local-6989586621682768728"><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682768728"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768729"><span class="annot"><span class="annottext">EpToken &quot;-&quot;
</span><a href="#local-6989586621682768729"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2061"></span><span>    </span><span id="local-6989586621682768730"><span class="annot"><a href="#local-6989586621682768730"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682768728"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2062"></span><span>      </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderOverLit"><span class="hs-identifier hs-type">PatBuilderOverLit</span></a></span><span> </span><span id="local-6989586621682768731"><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682768731"><span class="hs-identifier hs-var">pos_lit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedAn NoEpAnns (HsOverLit GhcPs)
-&gt; PV (LocatedAn NoEpAnns (HsOverLit GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnCO -&gt; HsOverLit GhcPs -&gt; LocatedAn NoEpAnns (HsOverLit GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; EpAnnCO
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768727"><span class="hs-identifier hs-var">lp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcPs
</span><a href="#local-6989586621682768731"><span class="hs-identifier hs-var">pos_lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2063"></span><span>      </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; PV (LocatedAn NoEpAnns (HsOverLit GhcPs))
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768726"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; PV (LocatedAn NoEpAnns (HsOverLit GhcPs)))
-&gt; PsMessage -&gt; PV (LocatedAn NoEpAnns (HsOverLit GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs -&gt; PsErrInPatDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInPat"><span class="hs-identifier hs-var">PsErrInPat</span></a></span><span> </span><span class="annot"><span class="annottext">PatBuilder GhcPs
</span><a href="#local-6989586621682768728"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">PsErrInPatDetails
</span><a href="GHC.Parser.Errors.Types.html#PEIP_NegApp"><span class="hs-identifier hs-var">PEIP_NegApp</span></a></span><span>
</span><span id="line-2064"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768733"><span class="annot"><a href="#local-6989586621682768733"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768726"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2065"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768726"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768733"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Utils.html#mkNPat"><span class="hs-identifier hs-type">mkNPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768730"><span class="hs-identifier hs-type">lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#noSyntaxExpr"><span class="hs-identifier hs-type">noSyntaxExpr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768729"><span class="hs-identifier hs-type">anns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2066"></span><span>  </span><span id="local-6989586621682768734"><span class="annot"><span class="annottext">mkHsSectionR_PV :: SrcSpan
-&gt; LocatedA (InfixOp (PatBuilder GhcPs))
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsSectionR_PV"><span class="hs-identifier hs-var hs-var hs-var">mkHsSectionR_PV</span></a></span></span><span> </span><span id="local-6989586621682768735"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768735"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768736"><span class="annot"><span class="annottext">LocatedA (InfixOp (PatBuilder GhcPs))
</span><a href="#local-6989586621682768736"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682768737"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768737"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768735"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; PatBuilder GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrParseRightOpSectionInPat"><span class="hs-identifier hs-var">PsErrParseRightOpSectionInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA RdrName
LocatedA (InfixOp (PatBuilder GhcPs))
</span><a href="#local-6989586621682768736"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PatBuilder GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768737"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2067"></span><span>  </span><span id="local-6989586621682768739"><span class="annot"><span class="annottext">mkHsArrowPV :: forall lhs.
SrcSpan
-&gt; ArrowParsingMode lhs (PatBuilder GhcPs)
-&gt; LocatedA lhs
-&gt; HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsArrowPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsArrowPV</span></a></span></span><span> </span><span id="local-6989586621682768740"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768740"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (PatBuilder GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-var">ArrowIsViewPat</span></a></span><span> </span><span id="local-6989586621682768749"><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682768749"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682768750"><span class="annot"><span class="annottext">HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768750"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621682768751"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768751"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2068"></span><span>      </span><span id="local-6989586621682768752"><span class="annot"><a href="#local-6989586621682768752"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768751"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-2069"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621682768753"><span class="annot"><a href="#local-6989586621682768753"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768740"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2070"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768740"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768753"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768755"><span class="hs-identifier hs-type">tok</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768749"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768752"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2071"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-2072"></span><span>      </span><span class="annot"><a href="#local-6989586621682768755"><span class="hs-identifier hs-type">tok</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokRarrow"><span class="hs-identifier hs-type">TokRarrow</span></a></span><span>
</span><span id="line-2073"></span><span>      </span><span id="local-6989586621682768755"><span class="annot"><span class="annottext">tok :: TokRarrow
</span><a href="#local-6989586621682768755"><span class="hs-identifier hs-var hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768750"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2074"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsUnrestrictedArrow"><span class="hs-identifier hs-type">HsUnrestrictedArrow</span></a></span><span> </span><span id="local-6989586621682768756"><span class="annot"><span class="annottext">XUnrestrictedArrow (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768756"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TokRarrow
XUnrestrictedArrow (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768756"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2075"></span><span>        </span><span class="annot"><span class="annottext">HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- unreachable case because in Parser.y the reduction rules for</span><span>
</span><span id="line-2076"></span><span>             </span><span class="hs-comment">-- (a %m -&gt; b) and (a -&gt;. b) use ArrowIsFunType</span><span>
</span><span id="line-2077"></span><span>             </span><span class="annot"><span class="annottext">String -&gt; TokRarrow
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkHsArrowPV ArrowIsViewPat: expected HsUnrestrictedArrow&quot;</span></span><span>
</span><span id="line-2078"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsArrowPV"><span class="hs-identifier hs-var">mkHsArrowPV</span></a></span><span> </span><span id="local-6989586621682768757"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768757"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (PatBuilder GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsFunType"><span class="hs-identifier hs-var">ArrowIsFunType</span></a></span><span> </span><span id="local-6989586621682768760"><span class="annot"><span class="annottext">LocatedA lhs
</span><a href="#local-6989586621682768760"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682768761"><span class="annot"><span class="annottext">HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768761"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span id="local-6989586621682768762"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768762"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2079"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768757"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsErrTypeSyntaxDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTypeSyntaxInPat"><span class="hs-identifier hs-var">PsErrTypeSyntaxInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
-&gt; HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PsErrTypeSyntaxDetails
</span><a href="GHC.Parser.Errors.Types.html#PETS_FunctionArrow"><span class="hs-identifier hs-var">PETS_FunctionArrow</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA lhs
LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768760"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs
</span><a href="#local-6989586621682768761"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768762"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2080"></span><span>  </span><span id="local-6989586621682768767"><span class="annot"><span class="annottext">mkHsMultPV :: EpToken &quot;%&quot;
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (TokRarrow -&gt; HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkHsMultPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsMultPV</span></a></span></span><span> </span><span id="local-6989586621682768768"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682768768"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span id="local-6989586621682768769"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768769"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2081"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768770"><span class="annot"><span class="annottext">l :: SrcSpan
</span><a href="#local-6989586621682768770"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682768768"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768769"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-2082"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; PsMessage
-&gt; PV (TokRarrow -&gt; HsArrowOf (LocatedA (PatBuilder GhcPs)) GhcPs)
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768770"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsErrTypeSyntaxDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTypeSyntaxInPat"><span class="hs-identifier hs-var">PsErrTypeSyntaxInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PsErrTypeSyntaxDetails
</span><a href="GHC.Parser.Errors.Types.html#PETS_Multiplicity"><span class="hs-identifier hs-var">PETS_Multiplicity</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682768768"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768769"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2083"></span><span>  </span><span id="local-6989586621682768772"><span class="annot"><span class="annottext">mkHsForallPV :: SrcSpan
-&gt; HsForAllTelescope GhcPs
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsForallPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsForallPV</span></a></span></span><span> </span><span id="local-6989586621682768773"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768773"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768774"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768774"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621682768775"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768775"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768773"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsErrTypeSyntaxDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTypeSyntaxInPat"><span class="hs-identifier hs-var">PsErrTypeSyntaxInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PsErrTypeSyntaxDetails
</span><a href="GHC.Parser.Errors.Types.html#PETS_ForallTelescope"><span class="hs-identifier hs-var">PETS_ForallTelescope</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768774"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768775"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2084"></span><span>  </span><span id="local-6989586621682768778"><span class="annot"><span class="annottext">checkContextPV :: LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedC [LocatedA (PatBuilder GhcPs)])
</span><a href="GHC.Parser.PostProcess.html#checkContextPV"><span class="hs-identifier hs-var hs-var hs-var">checkContextPV</span></a></span></span><span> </span><span id="local-6989586621682768779"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768779"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; PV (LocatedC [LocatedA (PatBuilder GhcPs)])
forall a. SrcSpan -&gt; PsMessage -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#patFail"><span class="hs-identifier hs-var">patFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768779"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsErrTypeSyntaxDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTypeSyntaxInPat"><span class="hs-identifier hs-var">PsErrTypeSyntaxInPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PsErrTypeSyntaxDetails
</span><a href="GHC.Parser.Errors.Types.html#PETS_ConstraintContext"><span class="hs-identifier hs-var">PETS_ConstraintContext</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768779"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2085"></span><span>  </span><span id="local-6989586621682768783"><span class="annot"><span class="annottext">mkQualPV :: SrcSpan
-&gt; LocatedC [LocatedA (PatBuilder GhcPs)]
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkQualPV"><span class="hs-identifier hs-var hs-var hs-var">mkQualPV</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedC [LocatedA (PatBuilder GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-comment">-- unreachable because mkQualPV is only called on the result</span><span>
</span><span id="line-2086"></span><span>                    </span><span class="hs-comment">-- of checkContextPV, which fails in patterns</span><span>
</span><span id="line-2087"></span><span>                  </span><span class="annot"><span class="annottext">String -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkQualPV in a pattern&quot;</span></span><span>
</span><span id="line-2088"></span><span>  </span><span id="local-6989586621682768789"><span class="annot"><span class="annottext">mkHsAsPatPV :: SrcSpan
-&gt; LocatedN RdrName
-&gt; EpToken &quot;@&quot;
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAsPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAsPatPV</span></a></span></span><span> </span><span id="local-6989586621682768790"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768790"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768791"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768791"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621682768792"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682768792"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682768793"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768793"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2089"></span><span>    </span><span id="local-6989586621682768794"><span class="annot"><a href="#local-6989586621682768794"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768793"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2090"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768795"><span class="annot"><a href="#local-6989586621682768795"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768790"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2091"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768790"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768795"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768792"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768791"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768794"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2092"></span><span>  </span><span id="local-6989586621682768802"><span class="annot"><span class="annottext">mkHsLazyPatPV :: SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; EpToken &quot;~&quot;
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsLazyPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsLazyPatPV</span></a></span></span><span> </span><span id="local-6989586621682768803"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768803"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768804"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768804"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682768805"><span class="annot"><span class="annottext">EpToken &quot;~&quot;
</span><a href="#local-6989586621682768805"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2093"></span><span>    </span><span id="local-6989586621682768806"><span class="annot"><a href="#local-6989586621682768806"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768804"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2094"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768807"><span class="annot"><a href="#local-6989586621682768807"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768803"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2095"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768803"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768807"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768805"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768806"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2096"></span><span>  </span><span id="local-6989586621682768815"><span class="annot"><span class="annottext">mkHsBangPatPV :: SrcSpan
-&gt; LocatedA (PatBuilder GhcPs)
-&gt; EpToken &quot;!&quot;
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsBangPatPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsBangPatPV</span></a></span></span><span> </span><span id="local-6989586621682768816"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768816"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768817"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768817"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682768818"><span class="annot"><span class="annottext">EpToken &quot;!&quot;
</span><a href="#local-6989586621682768818"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2097"></span><span>    </span><span id="local-6989586621682768819"><span class="annot"><a href="#local-6989586621682768819"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768817"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-2098"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768820"><span class="annot"><a href="#local-6989586621682768820"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768816"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-2099"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768821"><span class="annot"><a href="#local-6989586621682768821"><span class="hs-identifier hs-var hs-var">pb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBangPat GhcPs -&gt; LPat GhcPs -&gt; Pat GhcPs
forall p. XBangPat p -&gt; LPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-var">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcPs
EpToken &quot;!&quot;
</span><a href="#local-6989586621682768818"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682768819"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-2100"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#hintBangPat"><span class="hs-identifier hs-type">hintBangPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768816"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768821"><span class="hs-identifier hs-type">pb</span></a></span><span>
</span><span id="line-2101"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768816"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768820"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768821"><span class="hs-identifier hs-type">pb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2102"></span><span>  </span><span id="local-6989586621682768822"><span class="annot"><span class="annottext">mkSumOrTuplePV :: SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (PatBuilder GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePV"><span class="hs-identifier hs-var hs-var hs-var">mkSumOrTuplePV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (PatBuilder GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePat"><span class="hs-identifier hs-var">mkSumOrTuplePat</span></a></span><span>
</span><span id="line-2103"></span><span>  </span><span id="local-6989586621682768826"><span class="annot"><span class="annottext">mkHsEmbTyPV :: SrcSpan
-&gt; EpToken &quot;type&quot;
-&gt; LHsType GhcPs
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsEmbTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsEmbTyPV</span></a></span></span><span> </span><span id="local-6989586621682768827"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768827"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768828"><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682768828"><span class="hs-identifier hs-var">toktype</span></a></span></span><span> </span><span id="local-6989586621682768829"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768829"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2104"></span><span>    </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; LocatedA (PatBuilder GhcPs) -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768827"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs))
-&gt; PatBuilder GhcPs -&gt; LocatedA (PatBuilder GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2105"></span><span>      </span><span class="annot"><span class="annottext">Pat GhcPs -&gt; PatBuilder GhcPs
forall p. Pat p -&gt; PatBuilder p
</span><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-var">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmbTyPat GhcPs -&gt; HsTyPat (NoGhcTc GhcPs) -&gt; Pat GhcPs
forall p. XEmbTyPat p -&gt; HsTyPat (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#EmbTyPat"><span class="hs-identifier hs-var">EmbTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XEmbTyPat GhcPs
EpToken &quot;type&quot;
</span><a href="#local-6989586621682768828"><span class="hs-identifier hs-var">toktype</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; HsTyPat GhcPs
</span><a href="GHC.Hs.Type.html#mkHsTyPat"><span class="hs-identifier hs-var">mkHsTyPat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768829"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2106"></span><span>  </span><span id="local-6989586621682768832"><span class="annot"><span class="annottext">rejectPragmaPV :: LocatedA (PatBuilder GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#rejectPragmaPV"><span class="hs-identifier hs-var hs-var hs-var">rejectPragmaPV</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2107"></span><span>
</span><span id="line-2108"></span><span class="hs-comment">-- For reasons of backwards compatibility, we can't simply add the pattern</span><span>
</span><span id="line-2109"></span><span class="hs-comment">-- signature if the inner pattern is a view pattern. Consider:</span><span>
</span><span id="line-2110"></span><span class="hs-comment">--      (f -&gt; p :: t)</span><span>
</span><span id="line-2111"></span><span class="hs-comment">-- There are two ways to parse it</span><span>
</span><span id="line-2112"></span><span class="hs-comment">--      (f -&gt; (p :: t))   -- legacy parse</span><span>
</span><span id="line-2113"></span><span class="hs-comment">--      ((f -&gt; p) :: t)   -- future parse</span><span>
</span><span id="line-2114"></span><span class="hs-comment">-- The grammar in Parser.y is structured in such a way that we get the</span><span>
</span><span id="line-2115"></span><span class="hs-comment">-- future parse by default. Until we're ready to make the breaking change,</span><span>
</span><span id="line-2116"></span><span class="hs-comment">-- we need to do some extra work here to push the signature under the view</span><span>
</span><span id="line-2117"></span><span class="hs-comment">-- pattern (and emit a warning).</span><span>
</span><span id="line-2118"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#addSigPatP"><span class="hs-identifier hs-type">addSigPatP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsPatSigType"><span class="hs-identifier hs-type">HsPatSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2119"></span><span id="addSigPatP"><span class="annot"><span class="annottext">addSigPatP :: SrcSpanAnnA
-&gt; LPat GhcPs -&gt; HsPatSigType GhcPs -&gt; TokDcolon -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#addSigPatP"><span class="hs-identifier hs-var hs-var">addSigPatP</span></a></span></span><span> </span><span id="local-6989586621682768833"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768833"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768834"><span class="annot"><span class="annottext">viewpat :: LPat GhcPs
</span><a href="#local-6989586621682768834"><span class="hs-identifier hs-var">viewpat</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768835"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621682768835"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span id="local-6989586621682768836"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682768836"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2120"></span><span>  </span><span class="hs-comment">-- Test case: T24159_viewpat</span><span>
</span><span id="line-2121"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768837"><span class="annot"><span class="annottext">futureParse :: GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682768837"><span class="hs-identifier hs-var hs-var hs-var">futureParse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768833"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigPat GhcPs
-&gt; LPat GhcPs -&gt; HsPatSigType (NoGhcTc GhcPs) -&gt; Pat GhcPs
forall p. XSigPat p -&gt; LPat p -&gt; HsPatSigType (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-var">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcPs
TokDcolon
</span><a href="#local-6989586621682768836"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768834"><span class="hs-identifier hs-var">viewpat</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcPs)
HsPatSigType GhcPs
</span><a href="#local-6989586621682768835"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2122"></span><span>     </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682768839"><span class="annot"><a href="#local-6989586621682768839"><span class="hs-identifier hs-var">legacyParse</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PV (LPat GhcPs)
</span><a href="#local-6989586621682768840"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768834"><span class="hs-identifier hs-var">viewpat</span></a></span><span>
</span><span id="line-2123"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-type">addPsMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768833"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsWarnViewPatternSignatures"><span class="hs-identifier hs-type">PsWarnViewPatternSignatures</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768839"><span class="hs-identifier hs-type">legacyParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768837"><span class="hs-identifier hs-type">futureParse</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2124"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682768839"><span class="hs-identifier hs-type">legacyParse</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2125"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2126"></span><span>    </span><span class="annot"><a href="#local-6989586621682768842"><span class="hs-identifier hs-type">sig_loc_no_comments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-2127"></span><span>    </span><span id="local-6989586621682768842"><span class="annot"><span class="annottext">sig_loc_no_comments :: SrcSpan
</span><a href="#local-6989586621682768842"><span class="hs-identifier hs-var hs-var">sig_loc_no_comments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsPatSigType GhcPs -&gt; LHsType GhcPs
forall pass. HsPatSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#hsps_body"><span class="hs-identifier hs-var">hsps_body</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621682768835"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2128"></span><span>
</span><span id="line-2129"></span><span>    </span><span class="hs-comment">-- Test case for comments and locations preservation: Test24159</span><span>
</span><span id="line-2130"></span><span>    </span><span class="annot"><a href="#local-6989586621682768840"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2131"></span><span>    </span><span id="local-6989586621682768840"><span class="annot"><span class="annottext">go :: LPat GhcPs -&gt; PV (LPat GhcPs)
</span><a href="#local-6989586621682768840"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span id="local-6989586621682768844"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768844"><span class="hs-identifier hs-var">view_pat_loc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768845"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682768845"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span id="local-6989586621682768846"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768846"><span class="hs-identifier hs-var">cs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621682768847"><span class="annot"><span class="annottext">XViewPat GhcPs
</span><a href="#local-6989586621682768847"><span class="hs-identifier hs-var">anns'</span></a></span></span><span> </span><span id="local-6989586621682768848"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682768848"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span id="local-6989586621682768849"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768849"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2132"></span><span>      </span><span id="local-6989586621682768850"><span class="annot"><a href="#local-6989586621682768850"><span class="hs-identifier hs-var">sig'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PV (LPat GhcPs)
</span><a href="#local-6989586621682768840"><span class="hs-identifier hs-var">go</span></a></span><span>  </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768849"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-2133"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768851"><span class="annot"><a href="#local-6989586621682768851"><span class="hs-identifier hs-var hs-var">new_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768844"><span class="hs-identifier hs-var">view_pat_loc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768842"><span class="hs-identifier hs-var">sig_loc_no_comments</span></a></span><span>
</span><span id="line-2134"></span><span>      </span><span id="local-6989586621682768852"><span class="annot"><a href="#local-6989586621682768852"><span class="hs-identifier hs-var">cs2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768851"><span class="hs-identifier hs-type">new_loc</span></a></span><span>
</span><span id="line-2135"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682768853"><span class="annot"><a href="#local-6989586621682768853"><span class="hs-identifier hs-var hs-var">ep_ann_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-var">spanAsAnchor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768851"><span class="hs-identifier hs-var">new_loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682768845"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768846"><span class="hs-identifier hs-var">cs1</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768852"><span class="hs-identifier hs-var">cs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2136"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768853"><span class="hs-identifier hs-type">ep_ann_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768847"><span class="hs-identifier hs-type">anns'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768848"><span class="hs-identifier hs-type">e'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768850"><span class="hs-identifier hs-type">sig'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2137"></span><span>
</span><span id="line-2138"></span><span>    </span><span class="annot"><a href="#local-6989586621682768840"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682768854"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768854"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PV (LPat GhcPs)
forall a. a -&gt; PV a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(LPat GhcPs -&gt; PV (LPat GhcPs)) -&gt; LPat GhcPs -&gt; PV (LPat GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768855"><span class="hs-identifier hs-var">new_loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigPat GhcPs
-&gt; LPat GhcPs -&gt; HsPatSigType (NoGhcTc GhcPs) -&gt; Pat GhcPs
forall p. XSigPat p -&gt; LPat p -&gt; HsPatSigType (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-var">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcPs
TokDcolon
</span><a href="#local-6989586621682768836"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768854"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcPs)
HsPatSigType GhcPs
</span><a href="#local-6989586621682768835"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2139"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682768855"><span class="annot"><span class="annottext">new_loc :: SrcSpanAnnA
</span><a href="#local-6989586621682768855"><span class="hs-identifier hs-var hs-var">new_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
GenLocated SrcSpanAnnA (Pat GhcPs)
</span><a href="#local-6989586621682768854"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768842"><span class="hs-identifier hs-var">sig_loc_no_comments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2140"></span><span>
</span><span id="line-2141"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#addSigPatP"><span class="hs-identifier hs-var">addSigPatP</span></a></span><span> </span><span id="local-6989586621682768856"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768856"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768857"><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768857"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682768858"><span class="annot"><span class="annottext">HsPatSigType GhcPs
</span><a href="#local-6989586621682768858"><span class="hs-identifier hs-var">sig</span></a></span></span><span> </span><span id="local-6989586621682768859"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682768859"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2142"></span><span>  </span><span class="annot"><span class="annottext">LPat GhcPs -&gt; PV (LPat GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LPat GhcPs -&gt; PV (LPat GhcPs)) -&gt; LPat GhcPs -&gt; PV (LPat GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcPs -&gt; GenLocated SrcSpanAnnA (Pat GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768856"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigPat GhcPs
-&gt; LPat GhcPs -&gt; HsPatSigType (NoGhcTc GhcPs) -&gt; Pat GhcPs
forall p. XSigPat p -&gt; LPat p -&gt; HsPatSigType (NoGhcTc p) -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-var">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcPs
TokDcolon
</span><a href="#local-6989586621682768859"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcPs
</span><a href="#local-6989586621682768857"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcPs)
HsPatSigType GhcPs
</span><a href="#local-6989586621682768858"><span class="hs-identifier hs-var">sig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2143"></span><span>
</span><span id="line-2144"></span><span class="hs-comment">{- Note [Arrow parsing mode]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider this example:
  f (K (a -&gt; b)) = ()

A pattern of the form (a -&gt; b) could be parsed in one of two ways:
  * a view pattern `viewfn -&gt; pat` (with ViewPatterns)
  * a function type `t1 -&gt; t2`     (with RequiredTypeArguments)

This depends on the enabled extensions:
  NoViewPatterns, RequiredTypeArguments     =&gt;  function type
  NoViewPatterns, NoRequiredTypeArguments   =&gt;  error (suggest ViewPatterns)
  ViewPatterns,   RequiredTypeArguments     =&gt;  view pattern
  ViewPatterns,   NoRequiredTypeArguments   =&gt;  view pattern

The decision how to parse arrow patterns (p1 -&gt; p2) is captured by the
`ArrowParsingMode` data type, produced in `withArrowParsingMode` and
consumed in `mkHsArrowPV`.

Naively, one might expect to see the following definition:

  -- a simple (but insufficient) definition
  data ArrowParsingMode = ArrowIsViewPat | ArrowIsFunType

However, there is a slight complication that leads us to parameterize these
constructor with GADT type indices. In a pattern (p1 -&gt; p2), what is the AST
type to represent the LHS `p1`? It depends:
  * if (p1 -&gt; p2) is a view pattern,  `p1` is an HsExpr
  * if (p1 -&gt; p2) is a function type, `p1` is a  Pat (PatBuilder)

And since the decision how to parse `p1` depends on the arrow parsing mode, we
could try to encode the LHS type as a GADT index:

  -- a less simple (but still insufficient) definition
  data ArrowParsingMode lhs where
    ArrowIsViewPat :: ArrowParsingMode (PatBuilder GhcPs)
    ArrowIsFunType :: ArrowParsingMode (HsExpr GhcPs)

This definition would suffice for parsing patterns, but remember that
expressions, commands, and patterns are all parsed using a unified framework
`DisambECP`, as described in Note [Ambiguous syntactic categories].

In an expression (e1 -&gt; e2), the LHS is always represented by an HsExpr.
We can account for this with a further refinement of the definition:

  -- actual definition
  data ArrowParsingMode lhs rhs where
    ArrowIsViewPat :: ArrowParsingMode (HsExpr GhcPs) b
    ArrowIsFunType :: ArrowParsingMode b b

So when parsing a view pattern, the LHS is an HsExpr; and when parsing a
function type, the type of the LHS is assumed to match the type of the RHS,
which works out just right both for expressions and patterns.
-}</span><span>
</span><span id="line-2198"></span><span>
</span><span id="line-2199"></span><span class="hs-comment">-- The arrow parsing mode is selected depending on the enabled extensions and</span><span>
</span><span id="line-2200"></span><span class="hs-comment">-- determines how we parse patterns of the form (p1 -&gt; p2). See Note [Arrow parsing mode]</span><span>
</span><span id="line-2201"></span><span class="hs-keyword">data</span><span> </span><span id="ArrowParsingMode"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-var">ArrowParsingMode</span></a></span></span><span> </span><span id="local-6989586621682768860"><span class="annot"><a href="#local-6989586621682768860"><span class="hs-identifier hs-type">lhs</span></a></span></span><span> </span><span id="local-6989586621682768861"><span class="annot"><a href="#local-6989586621682768861"><span class="hs-identifier hs-type">rhs</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2202"></span><span>  </span><span id="local-6989586621682764873"><span id="ArrowIsViewPat"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-var">ArrowIsViewPat</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682764873"><span class="hs-identifier hs-type">b</span></a></span></span><span>   </span><span class="hs-comment">-- the LHS is always of type HsExpr</span><span>
</span><span id="line-2203"></span><span>  </span><span id="local-6989586621682764874"><span id="ArrowIsFunType"><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowIsFunType"><span class="hs-identifier hs-var">ArrowIsFunType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764874"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764874"><span class="hs-identifier hs-type">b</span></a></span></span><span>                </span><span class="hs-comment">-- the LHS is of the same type as RHS</span><span>
</span><span id="line-2204"></span><span>
</span><span id="line-2205"></span><span class="hs-comment">-- When parsing an expression (e1 -&gt; e2), the LHS `e1` is an HsExpr regardless of</span><span>
</span><span id="line-2206"></span><span class="hs-comment">-- the arrow parsing mode. `exprArrowParsingMode` proves this to the type checker.</span><span>
</span><span id="line-2207"></span><span class="hs-comment">-- See Note [Arrow parsing mode]</span><span>
</span><span id="line-2208"></span><span id="local-6989586621682764842"><span id="local-6989586621682764843"><span class="annot"><a href="GHC.Parser.PostProcess.html#exprArrowParsingMode"><span class="hs-identifier hs-type">exprArrowParsingMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764842"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682764842"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764843"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764843"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-2209"></span><span id="exprArrowParsingMode"><span class="annot"><span class="annottext">exprArrowParsingMode :: forall lhs r.
ArrowParsingMode lhs (HsExpr GhcPs)
-&gt; ((lhs ~ HsExpr GhcPs) =&gt; r) -&gt; r
</span><a href="GHC.Parser.PostProcess.html#exprArrowParsingMode"><span class="hs-identifier hs-var hs-var">exprArrowParsingMode</span></a></span></span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-var">ArrowIsViewPat</span></a></span><span> </span><span id="local-6989586621682768865"><span class="annot"><span class="annottext">(lhs ~ HsExpr GhcPs) =&gt; r
</span><a href="#local-6989586621682768865"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">r
(lhs ~ HsExpr GhcPs) =&gt; r
</span><a href="#local-6989586621682768865"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-2210"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#exprArrowParsingMode"><span class="hs-identifier hs-var">exprArrowParsingMode</span></a></span><span> </span><span class="annot"><span class="annottext">ArrowParsingMode lhs (HsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#ArrowIsFunType"><span class="hs-identifier hs-var">ArrowIsFunType</span></a></span><span> </span><span id="local-6989586621682768870"><span class="annot"><span class="annottext">(lhs ~ HsExpr GhcPs) =&gt; r
</span><a href="#local-6989586621682768870"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">r
(lhs ~ HsExpr GhcPs) =&gt; r
</span><a href="#local-6989586621682768870"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-2211"></span><span>
</span><span id="line-2212"></span><span class="hs-comment">-- Check the enabled extensions and select the appropriate ArrowParsingMode,</span><span>
</span><span id="line-2213"></span><span class="hs-comment">-- then pass it to a continuation. See Note [Arrow parsing mode]</span><span>
</span><span id="line-2214"></span><span id="local-6989586621682764868"><span id="local-6989586621682764870"><span class="annot"><a href="GHC.Parser.PostProcess.html#withArrowParsingMode"><span class="hs-identifier hs-type">withArrowParsingMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764868"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682764869"><span class="annot"><a href="#local-6989586621682764869"><span class="hs-identifier hs-type">lhs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764869"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764869"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764868"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764870"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764870"><span class="hs-identifier hs-type">r</span></a></span></span></span><span>
</span><span id="line-2215"></span><span id="withArrowParsingMode"><span class="annot"><span class="annottext">withArrowParsingMode :: forall b r.
DisambECP b =&gt;
(forall lhs. DisambECP lhs =&gt; ArrowParsingMode lhs b -&gt; PV r)
-&gt; PV r
</span><a href="GHC.Parser.PostProcess.html#withArrowParsingMode"><span class="hs-identifier hs-var hs-var">withArrowParsingMode</span></a></span></span><span> </span><span id="local-6989586621682768882"><span class="annot"><span class="annottext">forall lhs. DisambECP lhs =&gt; ArrowParsingMode lhs b -&gt; PV r
</span><a href="#local-6989586621682768882"><span class="hs-identifier hs-var">cont</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2216"></span><span>  </span><span id="local-6989586621682768883"><span class="annot"><a href="#local-6989586621682768883"><span class="hs-identifier hs-var">vpEnabled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; PV Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#ViewPatternsBit"><span class="hs-identifier hs-var">ViewPatternsBit</span></a></span><span>
</span><span id="line-2217"></span><span>  </span><span id="local-6989586621682768885"><span class="annot"><a href="#local-6989586621682768885"><span class="hs-identifier hs-var">rtaEnabled</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-type">getBit</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#RequiredTypeArgumentsBit"><span class="hs-identifier hs-type">RequiredTypeArgumentsBit</span></a></span><span>
</span><span id="line-2218"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621682768883"><span class="hs-identifier hs-type">vpEnabled</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682768882"><span class="hs-identifier hs-type">cont</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-type">ArrowIsViewPat</span></a></span><span>
</span><span id="line-2219"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="#local-6989586621682768885"><span class="hs-identifier hs-type">rtaEnabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682768882"><span class="hs-identifier hs-type">cont</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowIsFunType"><span class="hs-identifier hs-type">ArrowIsFunType</span></a></span><span>
</span><span id="line-2220"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682768882"><span class="hs-identifier hs-type">cont</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowIsViewPat"><span class="hs-identifier hs-type">ArrowIsViewPat</span></a></span><span> </span><span class="hs-comment">-- Error message should suggest ViewPatterns in patterns</span><span>
</span><span id="line-2221"></span><span>
</span><span id="line-2222"></span><span class="hs-comment">-- Type-restricted variant of `withArrowParsingMode` to aid type inference (#25103)</span><span>
</span><span id="line-2223"></span><span id="local-6989586621682764875"><span class="annot"><a href="GHC.Parser.PostProcess.html#withArrowParsingMode%27"><span class="hs-identifier hs-type">withArrowParsingMode'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764875"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621682764876"><span class="annot"><a href="#local-6989586621682764876"><span class="hs-identifier hs-type">lhs</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambECP"><span class="hs-identifier hs-type">DisambECP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764876"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ArrowParsingMode"><span class="hs-identifier hs-type">ArrowParsingMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764876"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764875"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764875"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764875"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-2224"></span><span id="withArrowParsingMode%27"><span class="annot"><span class="annottext">withArrowParsingMode' :: forall b.
DisambECP b =&gt;
(forall lhs.
 DisambECP lhs =&gt;
 ArrowParsingMode lhs b -&gt; PV (LocatedA b))
-&gt; PV (LocatedA b)
</span><a href="GHC.Parser.PostProcess.html#withArrowParsingMode%27"><span class="hs-identifier hs-var hs-var">withArrowParsingMode'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall lhs.
 DisambECP lhs =&gt;
 ArrowParsingMode lhs b -&gt; PV (GenLocated SrcSpanAnnA b))
-&gt; PV (GenLocated SrcSpanAnnA b)
(forall lhs.
 DisambECP lhs =&gt;
 ArrowParsingMode lhs (Body b GhcPs)
 -&gt; PV (GenLocated SrcSpanAnnA b))
-&gt; PV (GenLocated SrcSpanAnnA b)
forall b r.
DisambECP b =&gt;
(forall lhs. DisambECP lhs =&gt; ArrowParsingMode lhs b -&gt; PV r)
-&gt; PV r
</span><a href="GHC.Parser.PostProcess.html#withArrowParsingMode"><span class="hs-identifier hs-var">withArrowParsingMode</span></a></span><span>
</span><span id="line-2225"></span><span>
</span><span id="line-2226"></span><span class="hs-comment">-- When a forall-type occurs in term syntax, forall-bound variables should</span><span>
</span><span id="line-2227"></span><span class="hs-comment">-- inhabit the term namespace `varName` rather than the usual `tvName`.</span><span>
</span><span id="line-2228"></span><span class="hs-comment">-- See Note [Types in terms].</span><span>
</span><span id="line-2229"></span><span class="hs-comment">--</span><span>
</span><span id="line-2230"></span><span class="hs-comment">-- Since type variable binders in a `HsForAllTelescope` produced by the</span><span>
</span><span id="line-2231"></span><span class="hs-comment">-- `forall_telescope` nonterminal have their namespaces set to `tvName`,</span><span>
</span><span id="line-2232"></span><span class="hs-comment">-- we use `setTelescopeBndrsNameSpace` to fix them up.</span><span>
</span><span id="line-2233"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setTelescopeBndrsNameSpace"><span class="hs-identifier hs-type">setTelescopeBndrsNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2234"></span><span id="setTelescopeBndrsNameSpace"><span class="annot"><span class="annottext">setTelescopeBndrsNameSpace :: NameSpace -&gt; HsForAllTelescope GhcPs -&gt; HsForAllTelescope GhcPs
</span><a href="GHC.Parser.PostProcess.html#setTelescopeBndrsNameSpace"><span class="hs-identifier hs-var hs-var">setTelescopeBndrsNameSpace</span></a></span></span><span> </span><span id="local-6989586621682768892"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682768892"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621682768893"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768893"><span class="hs-identifier hs-var">forall_telescope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2235"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621682768893"><span class="hs-identifier hs-var">forall_telescope</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2236"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span> </span><span id="local-6989586621682768895"><span class="annot"><span class="annottext">XHsForAllInvis GhcPs
</span><a href="#local-6989586621682768895"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682768896"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621682768896"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XHsForAllInvis GhcPs
-&gt; [LHsTyVarBndr Specificity GhcPs] -&gt; HsForAllTelescope GhcPs
forall pass.
XHsForAllInvis pass
-&gt; [LHsTyVarBndr Specificity pass] -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-var">HsForAllInvis</span></a></span><span> </span><span class="annot"><span class="annottext">XHsForAllInvis GhcPs
</span><a href="#local-6989586621682768895"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
-&gt; [LHsTyVarBndr Specificity GhcPs]
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; [LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621682768897"><span class="hs-identifier hs-var">set_bndrs_ns</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621682768896"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2237"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-type">HsForAllVis</span></a></span><span>   </span><span id="local-6989586621682768899"><span class="annot"><span class="annottext">XHsForAllVis GhcPs
</span><a href="#local-6989586621682768899"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682768900"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621682768900"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XHsForAllVis GhcPs
-&gt; [LHsTyVarBndr () GhcPs] -&gt; HsForAllTelescope GhcPs
forall pass.
XHsForAllVis pass
-&gt; [LHsTyVarBndr () pass] -&gt; HsForAllTelescope pass
</span><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-var">HsForAllVis</span></a></span><span>   </span><span class="annot"><span class="annottext">XHsForAllVis GhcPs
</span><a href="#local-6989586621682768899"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs] -&gt; [LHsTyVarBndr () GhcPs]
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; [LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621682768897"><span class="hs-identifier hs-var">set_bndrs_ns</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621682768900"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2238"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2239"></span><span>    </span><span id="local-6989586621682764881"><span class="annot"><a href="#local-6989586621682768897"><span class="hs-identifier hs-type">set_bndrs_ns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764881"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764881"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-2240"></span><span>    </span><span id="local-6989586621682768897"><span class="annot"><span class="annottext">set_bndrs_ns :: forall flag. [LHsTyVarBndr flag GhcPs] -&gt; [LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621682768897"><span class="hs-identifier hs-var hs-var">set_bndrs_ns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
 -&gt; GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameSpace
-&gt; XRec GhcPs (HsTyVarBndr flag GhcPs)
-&gt; XRec GhcPs (HsTyVarBndr flag GhcPs)
forall flag.
NameSpace -&gt; LHsTyVarBndr flag GhcPs -&gt; LHsTyVarBndr flag GhcPs
</span><a href="GHC.Parser.PostProcess.html#setLHsTyVarBndrNameSpace"><span class="hs-identifier hs-var">setLHsTyVarBndrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682768892"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2241"></span><span>
</span><span id="line-2242"></span><span id="local-6989586621682764591"><span class="annot"><a href="GHC.Parser.PostProcess.html#setLHsTyVarBndrNameSpace"><span class="hs-identifier hs-type">setLHsTyVarBndrNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764591"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764591"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span></span><span>
</span><span id="line-2243"></span><span id="setLHsTyVarBndrNameSpace"><span class="annot"><span class="annottext">setLHsTyVarBndrNameSpace :: forall flag.
NameSpace -&gt; LHsTyVarBndr flag GhcPs -&gt; LHsTyVarBndr flag GhcPs
</span><a href="GHC.Parser.PostProcess.html#setLHsTyVarBndrNameSpace"><span class="hs-identifier hs-var hs-var">setLHsTyVarBndrNameSpace</span></a></span></span><span> </span><span id="local-6989586621682768901"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682768901"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768902"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768902"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768903"><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621682768903"><span class="hs-identifier hs-var">tvb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsTyVarBndr flag GhcPs
-&gt; GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768902"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621682768904"><span class="hs-identifier hs-var">tvb'</span></a></span><span>
</span><span id="line-2244"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682768904"><span class="annot"><span class="annottext">tvb' :: HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621682768904"><span class="hs-identifier hs-var hs-var">tvb'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsTyVarBndr flag GhcPs
</span><a href="#local-6989586621682768903"><span class="hs-identifier hs-var">tvb</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#tvb_var"><span class="hs-identifier hs-var">tvb_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#setHsBndrVarNameSpace"><span class="hs-identifier hs-type">setHsBndrVarNameSpace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768901"><span class="hs-identifier hs-type">ns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#tvb_var"><span class="hs-identifier hs-var">tvb_var</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768903"><span class="hs-identifier hs-type">tvb</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2245"></span><span>
</span><span id="line-2246"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setHsBndrVarNameSpace"><span class="hs-identifier hs-type">setHsBndrVarNameSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#NameSpace"><span class="hs-identifier hs-type">NameSpace</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2247"></span><span id="setHsBndrVarNameSpace"><span class="annot"><span class="annottext">setHsBndrVarNameSpace :: NameSpace -&gt; HsBndrVar GhcPs -&gt; HsBndrVar GhcPs
</span><a href="GHC.Parser.PostProcess.html#setHsBndrVarNameSpace"><span class="hs-identifier hs-var hs-var">setHsBndrVarNameSpace</span></a></span></span><span> </span><span id="local-6989586621682768907"><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682768907"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-type">HsBndrVar</span></a></span><span> </span><span id="local-6989586621682768908"><span class="annot"><span class="annottext">XBndrVar GhcPs
</span><a href="#local-6989586621682768908"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768909"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682768909"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768910"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682768910"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsBndrVar GhcPs
forall pass. XBndrVar pass -&gt; LIdP pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrVar"><span class="hs-identifier hs-var">HsBndrVar</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrVar GhcPs
</span><a href="#local-6989586621682768908"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682768909"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682768911"><span class="hs-identifier hs-var">rdr'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2248"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682768911"><span class="annot"><span class="annottext">rdr' :: RdrName
</span><a href="#local-6989586621682768911"><span class="hs-identifier hs-var hs-var">rdr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-identifier hs-var">setRdrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682768910"><span class="hs-identifier hs-var">rdr</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621682768907"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-2249"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#setHsBndrVarNameSpace"><span class="hs-identifier hs-var">setHsBndrVarNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-type">HsBndrWildCard</span></a></span><span> </span><span id="local-6989586621682768912"><span class="annot"><span class="annottext">XBndrWildCard GhcPs
</span><a href="#local-6989586621682768912"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcPs -&gt; HsBndrVar GhcPs
forall pass. XBndrWildCard pass -&gt; HsBndrVar pass
</span><a href="Language.Haskell.Syntax.Type.html#HsBndrWildCard"><span class="hs-identifier hs-var">HsBndrWildCard</span></a></span><span> </span><span class="annot"><span class="annottext">XBndrWildCard GhcPs
</span><a href="#local-6989586621682768912"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2250"></span><span>
</span><span id="line-2251"></span><span class="annot"><span class="hs-comment">-- | Ensure that a literal pattern isn't of type Addr#, Float#, Double#.</span></span><span>
</span><span id="line-2252"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkUnboxedLitPat"><span class="hs-identifier hs-type">checkUnboxedLitPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2253"></span><span id="checkUnboxedLitPat"><span class="annot"><span class="annottext">checkUnboxedLitPat :: Located (HsLit GhcPs) -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkUnboxedLitPat"><span class="hs-identifier hs-var hs-var">checkUnboxedLitPat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768913"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768913"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682768914"><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768914"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2254"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768914"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2255"></span><span>    </span><span class="hs-comment">-- Don't allow primitive string literal patterns.</span><span>
</span><span id="line-2256"></span><span>    </span><span class="hs-comment">-- See #13260.</span><span>
</span><span id="line-2257"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsStringPrim"><span class="hs-identifier hs-type">HsStringPrim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-2258"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768913"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2259"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalUnboxedStringInPat"><span class="hs-identifier hs-var">PsErrIllegalUnboxedStringInPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768914"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2260"></span><span>
</span><span id="line-2261"></span><span>   </span><span class="hs-comment">-- Don't allow Float#/Double# literal patterns.</span><span>
</span><span id="line-2262"></span><span>   </span><span class="hs-comment">-- See #9238 and Note [Rules for floating-point comparisons]</span><span>
</span><span id="line-2263"></span><span>   </span><span class="hs-comment">-- in GHC.Core.Opt.ConstantFold.</span><span>
</span><span id="line-2264"></span><span>    </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; Bool
</span><a href="#local-6989586621682768917"><span class="hs-identifier hs-var">is_floating_lit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768914"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-2265"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682768913"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2266"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsLit GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalUnboxedFloatingLitInPat"><span class="hs-identifier hs-var">PsErrIllegalUnboxedFloatingLitInPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><a href="#local-6989586621682768914"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2267"></span><span>
</span><span id="line-2268"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-2269"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2270"></span><span>
</span><span id="line-2271"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2272"></span><span>    </span><span class="annot"><a href="#local-6989586621682768917"><span class="hs-identifier hs-type">is_floating_lit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsLit"><span class="hs-identifier hs-type">HsLit</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2273"></span><span>    </span><span id="local-6989586621682768917"><span class="annot"><span class="annottext">is_floating_lit :: HsLit GhcPs -&gt; Bool
</span><a href="#local-6989586621682768917"><span class="hs-identifier hs-var hs-var">is_floating_lit</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsFloatPrim"><span class="hs-identifier hs-type">HsFloatPrim</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2274"></span><span>    </span><span class="annot"><a href="#local-6989586621682768917"><span class="hs-identifier hs-var">is_floating_lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsDoublePrim"><span class="hs-identifier hs-type">HsDoublePrim</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-2275"></span><span>    </span><span class="annot"><a href="#local-6989586621682768917"><span class="hs-identifier hs-var">is_floating_lit</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcPs
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-2276"></span><span>
</span><span id="line-2277"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkPatRec"><span class="hs-identifier hs-type">mkPatRec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-2278"></span><span>  </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2279"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2280"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2281"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2282"></span><span id="mkPatRec"><span class="annot"><span class="annottext">mkPatRec :: LocatedA (PatBuilder GhcPs)
-&gt; HsRecFields GhcPs (LocatedA (PatBuilder GhcPs))
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (PatBuilder GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkPatRec"><span class="hs-identifier hs-var hs-var">mkPatRec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PatBuilder GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderVar"><span class="hs-identifier hs-type">PatBuilderVar</span></a></span><span> </span><span id="local-6989586621682768921"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768921"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621682768923"><span class="annot"><span class="annottext">XHsRecFields GhcPs
</span><a href="#local-6989586621682768923"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682768924"><span class="annot"><span class="annottext">[LHsRecField GhcPs (LocatedA (PatBuilder GhcPs))]
</span><a href="#local-6989586621682768924"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621682768925"><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
</span><a href="#local-6989586621682768925"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768926"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682768926"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-2283"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768921"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2284"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682768927"><span class="annot"><a href="#local-6989586621682768927"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (LocatedA (PatBuilder GhcPs)))
 -&gt; PV
      (GenLocated
         SrcSpanAnnA
         (HsFieldBind
            (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
            (GenLocated SrcSpanAnnA (Pat GhcPs)))))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (LocatedA (PatBuilder GhcPs)))]
-&gt; PV
     [GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
           (GenLocated SrcSpanAnnA (Pat GhcPs)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">LHsRecField GhcPs (LocatedA (PatBuilder GhcPs))
-&gt; PV (LHsRecField GhcPs (LPat GhcPs))
GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
     (LocatedA (PatBuilder GhcPs)))
-&gt; PV
     (GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
           (GenLocated SrcSpanAnnA (Pat GhcPs))))
</span><a href="GHC.Parser.PostProcess.html#checkPatField"><span class="hs-identifier hs-var">checkPatField</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcPs (LocatedA (PatBuilder GhcPs))]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (LocatedA (PatBuilder GhcPs)))]
</span><a href="#local-6989586621682768924"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-2285"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span>
</span><span id="line-2286"></span><span>         </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682768926"><span class="hs-identifier hs-type">anns</span></a></span><span>
</span><span id="line-2287"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_con"><span class="hs-identifier hs-var">pat_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682768921"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-2288"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768923"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768927"><span class="hs-identifier hs-type">fs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768925"><span class="hs-identifier hs-type">dd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2289"></span><span>         </span><span class="hs-special">}</span><span>
</span><span id="line-2290"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkPatRec"><span class="hs-identifier hs-var">mkPatRec</span></a></span><span> </span><span id="local-6989586621682768928"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768928"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsRecFields GhcPs (LocatedA (PatBuilder GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2291"></span><span>  </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (PatBuilder GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (PatBuilder GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (PatBuilder GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768928"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2292"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatBuilder GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidRecordCon"><span class="hs-identifier hs-var">PsErrInvalidRecordCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PatBuilder GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682768928"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2293"></span><span>
</span><span id="line-2294"></span><span class="hs-comment">-- | Disambiguate constructs that may appear when we do not know</span><span>
</span><span id="line-2295"></span><span class="hs-comment">-- ahead of time whether we are parsing a type or a newtype/data constructor.</span><span>
</span><span id="line-2296"></span><span class="hs-comment">--</span><span>
</span><span id="line-2297"></span><span class="hs-comment">-- See Note [Ambiguous syntactic categories] for the general idea.</span><span>
</span><span id="line-2298"></span><span class="hs-comment">--</span><span>
</span><span id="line-2299"></span><span class="hs-comment">-- See Note [Parsing data constructors is hard] for the specific issue this</span><span>
</span><span id="line-2300"></span><span class="hs-comment">-- particular class is solving.</span><span>
</span><span id="line-2301"></span><span class="hs-comment">--</span><span>
</span><span id="line-2302"></span><span class="hs-keyword">class</span><span> </span><span id="DisambTD"><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambTD"><span class="hs-identifier hs-var">DisambTD</span></a></span></span><span> </span><span id="local-6989586621682764891"><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2303"></span><span>  </span><span class="hs-comment">-- | Process the head of a type-level function/constructor application,</span><span>
</span><span id="line-2304"></span><span>  </span><span class="hs-comment">-- i.e. the @H@ in @H a b c@.</span><span>
</span><span id="line-2305"></span><span>  </span><span id="mkHsAppTyHeadPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppTyHeadPV"><span class="hs-identifier hs-type">mkHsAppTyHeadPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2306"></span><span>  </span><span class="hs-comment">-- | Disambiguate @f x@ (function application or prefix data constructor).</span><span>
</span><span id="line-2307"></span><span>  </span><span id="mkHsAppTyPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppTyPV"><span class="hs-identifier hs-type">mkHsAppTyPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2308"></span><span>  </span><span class="hs-comment">-- | Disambiguate @f \@t@ (visible kind application)</span><span>
</span><span id="line-2309"></span><span>  </span><span id="mkHsAppKindTyPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppKindTyPV"><span class="hs-identifier hs-type">mkHsAppKindTyPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2310"></span><span>  </span><span class="hs-comment">-- | Disambiguate @f \# x@ (infix operator)</span><span>
</span><span id="line-2311"></span><span>  </span><span id="mkHsOpTyPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsOpTyPV"><span class="hs-identifier hs-type">mkHsOpTyPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2312"></span><span>  </span><span class="hs-comment">-- | Disambiguate @{-\# UNPACK \#-} t@ (unpack/nounpack pragma)</span><span>
</span><span id="line-2313"></span><span>  </span><span id="mkUnpackednessPV"><span class="annot"><a href="GHC.Parser.PostProcess.html#mkUnpackednessPV"><span class="hs-identifier hs-type">mkUnpackednessPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#UnpackednessPragma"><span class="hs-identifier hs-type">UnpackednessPragma</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764891"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2314"></span><span>
</span><span id="line-2315"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambTD"><span class="hs-identifier hs-type">DisambTD</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2316"></span><span>  </span><span id="local-6989586621682768943"><span class="annot"><span class="annottext">mkHsAppTyHeadPV :: LHsType GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTyHeadPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTyHeadPV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-2317"></span><span>  </span><span id="local-6989586621682768945"><span class="annot"><span class="annottext">mkHsAppTyPV :: GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; LHsType GhcPs -&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTyPV</span></a></span></span><span> </span><span id="local-6989586621682768946"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768946"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682768947"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768947"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; LHsType GhcPs -&gt; LHsType GhcPs
forall (p :: Pass).
LHsType (GhcPass p) -&gt; LHsType (GhcPass p) -&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#mkHsAppTy"><span class="hs-identifier hs-var">mkHsAppTy</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768946"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768947"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2318"></span><span>  </span><span id="local-6989586621682768950"><span class="annot"><span class="annottext">mkHsAppKindTyPV :: GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; EpToken &quot;@&quot;
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsAppKindTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppKindTyPV</span></a></span></span><span> </span><span id="local-6989586621682768951"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768951"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682768952"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682768952"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682768953"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768953"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XAppKindTy GhcPs -&gt; LHsType GhcPs -&gt; LHsType GhcPs -&gt; LHsType GhcPs
forall (p :: Pass).
XAppKindTy (GhcPass p)
-&gt; LHsType (GhcPass p)
-&gt; LHsType (GhcPass p)
-&gt; LHsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#mkHsAppKindTy"><span class="hs-identifier hs-var">mkHsAppKindTy</span></a></span><span> </span><span class="annot"><span class="annottext">XAppKindTy GhcPs
EpToken &quot;@&quot;
</span><a href="#local-6989586621682768952"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768951"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768953"><span class="hs-identifier hs-var">ki</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2319"></span><span>  </span><span id="local-6989586621682768960"><span class="annot"><span class="annottext">mkHsOpTyPV :: PromotionFlag
-&gt; LHsType GhcPs
-&gt; LocatedN RdrName
-&gt; LHsType GhcPs
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkHsOpTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOpTyPV</span></a></span></span><span> </span><span id="local-6989586621682768961"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682768961"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682768962"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768962"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682768963"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768963"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682768964"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768964"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2320"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682768965"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768965"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682768966"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682768966"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PromotionFlag
-&gt; LHsType GhcPs
-&gt; LocatedN RdrName
-&gt; LHsType GhcPs
-&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkLHsOpTy"><span class="hs-identifier hs-var">mkLHsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682768961"><span class="hs-identifier hs-var">prom</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768962"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768963"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768964"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-2321"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682768968"><span class="annot"><a href="#local-6989586621682768968"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682768965"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2322"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#addCommentsToEpAnn"><span class="hs-identifier hs-type">addCommentsToEpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768965"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682768968"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682768966"><span class="hs-identifier hs-type">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2323"></span><span>  </span><span id="local-6989586621682768970"><span class="annot"><span class="annottext">mkUnpackednessPV :: Located UnpackednessPragma
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkUnpackednessPV"><span class="hs-identifier hs-var hs-var hs-var">mkUnpackednessPV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located UnpackednessPragma -&gt; LHsType GhcPs -&gt; PV (LHsType GhcPs)
Located UnpackednessPragma
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; PV (GenLocated SrcSpanAnnA (HsType GhcPs))
forall (m :: * -&gt; *).
MonadP m =&gt;
Located UnpackednessPragma -&gt; LHsType GhcPs -&gt; m (LHsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#addUnpackednessP"><span class="hs-identifier hs-var">addUnpackednessP</span></a></span><span>
</span><span id="line-2324"></span><span>
</span><span id="line-2325"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderCon"><span class="hs-identifier hs-type">dataConBuilderCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#DataConBuilder"><span class="hs-identifier hs-type">DataConBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-2326"></span><span id="dataConBuilderCon"><span class="annot"><span class="annottext">dataConBuilderCon :: LocatedA DataConBuilder -&gt; LocatedN RdrName
</span><a href="GHC.Parser.PostProcess.html#dataConBuilderCon"><span class="hs-identifier hs-var hs-var">dataConBuilderCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-type">PrefixDataConBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768972"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768972"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768972"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2327"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderCon"><span class="hs-identifier hs-var">dataConBuilderCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768974"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768974"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682768974"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-2328"></span><span>
</span><span id="line-2329"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderDetails"><span class="hs-identifier hs-type">dataConBuilderDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#DataConBuilder"><span class="hs-identifier hs-type">DataConBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclH98Details"><span class="hs-identifier hs-type">HsConDeclH98Details</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2330"></span><span>
</span><span id="line-2331"></span><span class="hs-comment">-- Detect when the record syntax is used:</span><span>
</span><span id="line-2332"></span><span class="hs-comment">--   data T = MkT { ... }</span><span>
</span><span id="line-2333"></span><span id="dataConBuilderDetails"><span class="annot"><span class="annottext">dataConBuilderDetails :: LocatedA DataConBuilder -&gt; HsConDeclH98Details GhcPs
</span><a href="GHC.Parser.PostProcess.html#dataConBuilderDetails"><span class="hs-identifier hs-var hs-var">dataConBuilderDetails</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-type">PrefixDataConBuilder</span></a></span><span> </span><span id="local-6989586621682768975"><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
</span><a href="#local-6989586621682768975"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2334"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682768976"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768976"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768977"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768977"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsRecTy"><span class="hs-identifier hs-type">HsRecTy</span></a></span><span> </span><span id="local-6989586621682768978"><span class="annot"><span class="annottext">XRecTy GhcPs
</span><a href="#local-6989586621682768978"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682768979"><span class="annot"><span class="annottext">[LConDeclField GhcPs]
</span><a href="#local-6989586621682768979"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
forall a. OrdList a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682768975"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-2335"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated
  (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn (AnnList ())
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; GenLocated
     (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnList () -&gt; EpAnnComments -&gt; EpAnn (AnnList ())
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768976"><span class="hs-identifier hs-var">anc</span></a></span><span> </span><span class="annot"><span class="annottext">XRecTy GhcPs
AnnList ()
</span><a href="#local-6989586621682768978"><span class="hs-identifier hs-var">an</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768977"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LConDeclField GhcPs]
[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621682768979"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2336"></span><span>
</span><span id="line-2337"></span><span class="hs-comment">-- Normal prefix constructor, e.g.  data T = MkT A B C</span><span>
</span><span id="line-2338"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderDetails"><span class="hs-identifier hs-var">dataConBuilderDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-type">PrefixDataConBuilder</span></a></span><span> </span><span id="local-6989586621682768981"><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
</span><a href="#local-6989586621682768981"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2339"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Void]
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsType GhcPs)
 -&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall (p :: Pass) a. IsPass p =&gt; a -&gt; HsScaled (GhcPass p) a
</span><a href="GHC.Hs.Type.html#hsLinear"><span class="hs-identifier hs-var">hsLinear</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
forall a. OrdList a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682768981"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2340"></span><span>
</span><span id="line-2341"></span><span class="hs-comment">-- Infix constructor, e.g. data T = Int :! Bool</span><span>
</span><span id="line-2342"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#dataConBuilderDetails"><span class="hs-identifier hs-var">dataConBuilderDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768984"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768984"><span class="hs-identifier hs-var">csl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682768985"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768985"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682768986"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682768986"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621682768987"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768987"><span class="hs-identifier hs-var">csll</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682768988"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682768988"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682768989"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682768989"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2343"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall (p :: Pass) a. IsPass p =&gt; a -&gt; HsScaled (GhcPass p) a
</span><a href="GHC.Hs.Type.html#hsLinear"><span class="hs-identifier hs-var">hsLinear</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; AnnListItem -&gt; EpAnnComments -&gt; SrcSpanAnnA
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682768985"><span class="hs-identifier hs-var">anc</span></a></span><span> </span><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682768986"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768984"><span class="hs-identifier hs-var">csl</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments -&gt; EpAnnComments -&gt; EpAnnComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682768987"><span class="hs-identifier hs-var">csll</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682768988"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall (p :: Pass) a. IsPass p =&gt; a -&gt; HsScaled (GhcPass p) a
</span><a href="GHC.Hs.Type.html#hsLinear"><span class="hs-identifier hs-var">hsLinear</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682768989"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2344"></span><span>
</span><span id="line-2345"></span><span>
</span><span id="line-2346"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#DisambTD"><span class="hs-identifier hs-type">DisambTD</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#DataConBuilder"><span class="hs-identifier hs-type">DataConBuilder</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2347"></span><span>  </span><span id="local-6989586621682768996"><span class="annot"><span class="annottext">mkHsAppTyHeadPV :: LHsType GhcPs -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTyHeadPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTyHeadPV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-var">tyToDataConBuilder</span></a></span><span>
</span><span id="line-2348"></span><span>
</span><span id="line-2349"></span><span>  </span><span id="local-6989586621682769004"><span class="annot"><span class="annottext">mkHsAppTyPV :: LocatedA DataConBuilder
-&gt; LHsType GhcPs -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#mkHsAppTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppTyPV</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769005"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769005"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-type">PrefixDataConBuilder</span></a></span><span> </span><span id="local-6989586621682769006"><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
</span><a href="#local-6989586621682769006"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621682769007"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769007"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769008"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769008"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2350"></span><span>    </span><span class="annot"><span class="annottext">LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder))
-&gt; LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2351"></span><span>      </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; DataConBuilder -&gt; LocatedA DataConBuilder
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpanAnnA) -&gt; SrcSpan -&gt; SrcSpanAnnA
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769005"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769008"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2352"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs) -&gt; LocatedN RdrName -&gt; DataConBuilder
</span><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-var">PrefixDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs)
OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621682769006"><span class="hs-identifier hs-var">flds</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769008"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769007"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2353"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkHsAppTyPV"><span class="hs-identifier hs-var">mkHsAppTyPV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2354"></span><span>    </span><span class="hs-comment">-- This case is impossible because of the way</span><span>
</span><span id="line-2355"></span><span>    </span><span class="hs-comment">-- the grammar in Parser.y is written (see infixtype/ftype).</span><span>
</span><span id="line-2356"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; PV (LocatedA DataConBuilder)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkHsAppTyPV: InfixDataConBuilder&quot;</span></span><span>
</span><span id="line-2357"></span><span>
</span><span id="line-2358"></span><span>  </span><span id="local-6989586621682769012"><span class="annot"><span class="annottext">mkHsAppKindTyPV :: LocatedA DataConBuilder
-&gt; EpToken &quot;@&quot; -&gt; LHsType GhcPs -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#mkHsAppKindTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsAppKindTyPV</span></a></span></span><span> </span><span id="local-6989586621682769013"><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769013"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682769014"><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682769014"><span class="hs-identifier hs-var">at</span></a></span></span><span> </span><span id="local-6989586621682769015"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769015"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2359"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;@&quot; -&gt; SrcSpan
forall {tok :: Symbol}. EpToken tok -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getEpTokenSrcSpan"><span class="hs-identifier hs-var">getEpTokenSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;@&quot;
</span><a href="#local-6989586621682769014"><span class="hs-identifier hs-var">at</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2360"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataConBuilder -&gt; HsType GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnexpectedKindAppInDataCon"><span class="hs-identifier hs-var">PsErrUnexpectedKindAppInDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedA DataConBuilder -&gt; DataConBuilder
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769013"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769015"><span class="hs-identifier hs-var">ki</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2361"></span><span>
</span><span id="line-2362"></span><span>  </span><span id="local-6989586621682769032"><span class="annot"><span class="annottext">mkHsOpTyPV :: PromotionFlag
-&gt; LHsType GhcPs
-&gt; LocatedN RdrName
-&gt; LHsType GhcPs
-&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#mkHsOpTyPV"><span class="hs-identifier hs-var hs-var hs-var">mkHsOpTyPV</span></a></span></span><span> </span><span id="local-6989586621682769033"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682769033"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682769034"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769034"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682769035"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769035"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621682769036"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769036"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2363"></span><span>      </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; PV ()
</span><a href="#local-6989586621682769037"><span class="hs-identifier hs-var">check_no_ops</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769036"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- check the RHS because parsing type operators is right-associative</span><span>
</span><span id="line-2364"></span><span>      </span><span id="local-6989586621682769038"><span class="annot"><a href="#local-6989586621682769038"><span class="hs-identifier hs-var">data_con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either (MsgEnvelope PsMessage) (LocatedN RdrName)
-&gt; PV (LocatedN RdrName)
forall (m :: * -&gt; *) a.
MonadP m =&gt;
Either (MsgEnvelope PsMessage) a -&gt; m a
</span><a href="GHC.Parser.PostProcess.html#eitherToP"><span class="hs-identifier hs-var">eitherToP</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (MsgEnvelope PsMessage) (LocatedN RdrName)
 -&gt; PV (LocatedN RdrName))
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
-&gt; PV (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#tyConToDataCon"><span class="hs-identifier hs-var">tyConToDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769035"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-2365"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621682769039"><span class="annot"><a href="#local-6989586621682769039"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-type">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769040"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2366"></span><span>      </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNotPromotedDataCon"><span class="hs-identifier hs-type">checkNotPromotedDataCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769033"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769038"><span class="hs-identifier hs-type">data_con</span></a></span><span>
</span><span id="line-2367"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#addCommentsToEpAnn"><span class="hs-identifier hs-type">addCommentsToEpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769040"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769039"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769034"><span class="hs-identifier hs-type">lhs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769038"><span class="hs-identifier hs-type">data_con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769036"><span class="hs-identifier hs-type">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2368"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-2369"></span><span>      </span><span id="local-6989586621682769040"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682769040"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpanAnnA
forall a e1 e2.
Semigroup a =&gt;
GenLocated (EpAnn a) e1 -&gt; GenLocated (EpAnn a) e2 -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineLocsA"><span class="hs-identifier hs-var">combineLocsA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769034"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769036"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-2370"></span><span>      </span><span id="local-6989586621682769037"><span class="annot"><span class="annottext">check_no_ops :: HsType GhcPs -&gt; PV ()
</span><a href="#local-6989586621682769037"><span class="hs-identifier hs-var hs-var">check_no_ops</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsBangTy"><span class="hs-identifier hs-type">HsBangTy</span></a></span><span> </span><span class="annot"><span class="annottext">XBangTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsBang
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769042"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769042"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; PV ()
</span><a href="#local-6989586621682769037"><span class="hs-identifier hs-var">check_no_ops</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769042"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2371"></span><span>      </span><span class="annot"><a href="#local-6989586621682769037"><span class="hs-identifier hs-var">check_no_ops</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOpTy"><span class="hs-identifier hs-type">HsOpTy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2372"></span><span>        </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769040"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2373"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; RdrName -&gt; HsType GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidInfixDataCon"><span class="hs-identifier hs-var">PsErrInvalidInfixDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769034"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769035"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769036"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2374"></span><span>      </span><span class="annot"><a href="#local-6989586621682769037"><span class="hs-identifier hs-var">check_no_ops</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2375"></span><span>
</span><span id="line-2376"></span><span>  </span><span id="local-6989586621682769054"><span class="annot"><span class="annottext">mkUnpackednessPV :: Located UnpackednessPragma
-&gt; LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#mkUnpackednessPV"><span class="hs-identifier hs-var hs-var hs-var">mkUnpackednessPV</span></a></span></span><span> </span><span id="local-6989586621682769055"><span class="annot"><span class="annottext">Located UnpackednessPragma
</span><a href="#local-6989586621682769055"><span class="hs-identifier hs-var">unpk</span></a></span></span><span> </span><span id="local-6989586621682769056"><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769056"><span class="hs-identifier hs-var">constr_stuff</span></a></span></span><span>
</span><span id="line-2377"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span> </span><span id="local-6989586621682769057"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769057"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621682769058"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769058"><span class="hs-identifier hs-var">data_con</span></a></span></span><span> </span><span id="local-6989586621682769059"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769059"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769056"><span class="hs-identifier hs-var">constr_stuff</span></a></span><span>
</span><span id="line-2378"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- When the user writes  data T = {-# UNPACK #-} Int :+ Bool</span><span>
</span><span id="line-2379"></span><span>      </span><span class="hs-comment">--   we apply {-# UNPACK #-} to the LHS</span><span>
</span><span id="line-2380"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682769060"><span class="annot"><a href="#local-6989586621682769060"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Located UnpackednessPragma -&gt; LHsType GhcPs -&gt; PV (LHsType GhcPs)
forall (m :: * -&gt; *).
MonadP m =&gt;
Located UnpackednessPragma -&gt; LHsType GhcPs -&gt; m (LHsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#addUnpackednessP"><span class="hs-identifier hs-var">addUnpackednessP</span></a></span><span> </span><span class="annot"><span class="annottext">Located UnpackednessPragma
</span><a href="#local-6989586621682769055"><span class="hs-identifier hs-var">unpk</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769057"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-2381"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769061"><span class="annot"><a href="#local-6989586621682769061"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA UnpackednessPragma
-&gt; LocatedA DataConBuilder -&gt; SrcSpanAnnA
forall a e1 e2.
Semigroup a =&gt;
GenLocated (EpAnn a) e1 -&gt; GenLocated (EpAnn a) e2 -&gt; EpAnn a
</span><a href="GHC.Parser.Annotation.html#combineLocsA"><span class="hs-identifier hs-var">combineLocsA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located UnpackednessPragma
-&gt; GenLocated SrcSpanAnnA UnpackednessPragma
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located UnpackednessPragma
</span><a href="#local-6989586621682769055"><span class="hs-identifier hs-var">unpk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769056"><span class="hs-identifier hs-var">constr_stuff</span></a></span><span>
</span><span id="line-2382"></span><span>         </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769061"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#InfixDataConBuilder"><span class="hs-identifier hs-type">InfixDataConBuilder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769060"><span class="hs-identifier hs-type">lhs'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769058"><span class="hs-identifier hs-type">data_con</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769059"><span class="hs-identifier hs-type">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2383"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2384"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located UnpackednessPragma -&gt; SrcSpan
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located UnpackednessPragma
</span><a href="#local-6989586621682769055"><span class="hs-identifier hs-var">unpk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnpackDataCon"><span class="hs-identifier hs-var">PsErrUnpackDataCon</span></a></span><span>
</span><span id="line-2385"></span><span>         </span><span class="annot"><span class="annottext">LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LocatedA DataConBuilder
</span><a href="#local-6989586621682769056"><span class="hs-identifier hs-var">constr_stuff</span></a></span><span>
</span><span id="line-2386"></span><span>
</span><span id="line-2387"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-type">tyToDataConBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#DataConBuilder"><span class="hs-identifier hs-type">DataConBuilder</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2388"></span><span id="tyToDataConBuilder"><span class="annot"><span class="annottext">tyToDataConBuilder :: LHsType GhcPs -&gt; PV (LocatedA DataConBuilder)
</span><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-var hs-var">tyToDataConBuilder</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769063"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769063"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-type">HsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769064"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682769064"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682769065"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682769065"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2389"></span><span>  </span><span id="local-6989586621682769066"><span class="annot"><a href="#local-6989586621682769066"><span class="hs-identifier hs-var">data_con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either (MsgEnvelope PsMessage) (LocatedN RdrName)
-&gt; PV (LocatedN RdrName)
forall (m :: * -&gt; *) a.
MonadP m =&gt;
Either (MsgEnvelope PsMessage) a -&gt; m a
</span><a href="GHC.Parser.PostProcess.html#eitherToP"><span class="hs-identifier hs-var">eitherToP</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (MsgEnvelope PsMessage) (LocatedN RdrName)
 -&gt; PV (LocatedN RdrName))
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
-&gt; PV (LocatedN RdrName)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; Either (MsgEnvelope PsMessage) (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#tyConToDataCon"><span class="hs-identifier hs-var">tyConToDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769065"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-2390"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNotPromotedDataCon"><span class="hs-identifier hs-type">checkNotPromotedDataCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769064"><span class="hs-identifier hs-type">prom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769066"><span class="hs-identifier hs-type">data_con</span></a></span><span>
</span><span id="line-2391"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769063"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-type">PrefixDataConBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-type">nilOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769066"><span class="hs-identifier hs-type">data_con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2392"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-var">tyToDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769068"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769068"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><a href="Language.Haskell.Syntax.Type.html#HsBoxedOrConstraintTuple"><span class="hs-identifier hs-var">HsBoxedOrConstraintTuple</span></a></span><span> </span><span id="local-6989586621682769069"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682769069"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2393"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769070"><span class="annot"><span class="annottext">data_con :: LocatedN RdrName
</span><a href="#local-6989586621682769070"><span class="hs-identifier hs-var hs-var">data_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769068"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Int -&gt; DataCon
</span><a href="GHC.Builtin.Types.html#tupleDataCon"><span class="hs-identifier hs-var">tupleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769069"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2394"></span><span>  </span><span class="annot"><span class="annottext">LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder))
-&gt; LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; DataConBuilder -&gt; LocatedA DataConBuilder
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769068"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs) -&gt; LocatedN RdrName -&gt; DataConBuilder
</span><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-var">PrefixDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769069"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769070"><span class="hs-identifier hs-var">data_con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2395"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-var">tyToDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769073"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769073"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-type">HsTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XTupleTy GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><a href="Language.Haskell.Syntax.Type.html#HsUnboxedTuple"><span class="hs-identifier hs-var">HsUnboxedTuple</span></a></span><span> </span><span id="local-6989586621682769075"><span class="annot"><span class="annottext">[LHsType GhcPs]
</span><a href="#local-6989586621682769075"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2396"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769076"><span class="annot"><span class="annottext">data_con :: LocatedN RdrName
</span><a href="#local-6989586621682769076"><span class="hs-identifier hs-var hs-var">data_con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnN
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769073"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Int -&gt; DataCon
</span><a href="GHC.Builtin.Types.html#tupleDataCon"><span class="hs-identifier hs-var">tupleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769075"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2397"></span><span>  </span><span class="annot"><span class="annottext">LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder))
-&gt; LocatedA DataConBuilder -&gt; PV (LocatedA DataConBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; DataConBuilder -&gt; LocatedA DataConBuilder
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769073"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (LHsType GhcPs) -&gt; LocatedN RdrName -&gt; DataConBuilder
</span><a href="GHC.Parser.Types.html#PrefixDataConBuilder"><span class="hs-identifier hs-var">PrefixDataConBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; OrdList (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769075"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769076"><span class="hs-identifier hs-var">data_con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2398"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#tyToDataConBuilder"><span class="hs-identifier hs-var">tyToDataConBuilder</span></a></span><span> </span><span id="local-6989586621682769078"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769078"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2399"></span><span>  </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA DataConBuilder)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769078"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2400"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsType GhcPs -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidDataCon"><span class="hs-identifier hs-var">PsErrInvalidDataCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HsType GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769078"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2401"></span><span>
</span><span id="line-2402"></span><span class="annot"><span class="hs-comment">-- | Rejects declarations such as @data T = 'MkT@ (note the leading tick).</span></span><span>
</span><span id="line-2403"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNotPromotedDataCon"><span class="hs-identifier hs-type">checkNotPromotedDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2404"></span><span id="checkNotPromotedDataCon"><span class="annot"><span class="annottext">checkNotPromotedDataCon :: PromotionFlag -&gt; LocatedN RdrName -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#checkNotPromotedDataCon"><span class="hs-identifier hs-var hs-var">checkNotPromotedDataCon</span></a></span></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PV ()
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2405"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNotPromotedDataCon"><span class="hs-identifier hs-var">checkNotPromotedDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#IsPromoted"><span class="hs-identifier hs-var">IsPromoted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769082"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769082"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769083"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769083"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2406"></span><span>  </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV ()) -&gt; MsgEnvelope PsMessage -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769082"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2407"></span><span>    </span><span class="annot"><span class="annottext">RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalPromotionQuoteDataCon"><span class="hs-identifier hs-var">PsErrIllegalPromotionQuoteDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769083"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2408"></span><span>
</span><span id="line-2409"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkUnboxedSumCon"><span class="hs-identifier hs-type">mkUnboxedSumCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsConDeclH98Details"><span class="hs-identifier hs-type">HsConDeclH98Details</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2410"></span><span id="mkUnboxedSumCon"><span class="annot"><span class="annottext">mkUnboxedSumCon :: LHsType GhcPs
-&gt; Int -&gt; Int -&gt; (LocatedN RdrName, HsConDeclH98Details GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkUnboxedSumCon"><span class="hs-identifier hs-var hs-var">mkUnboxedSumCon</span></a></span></span><span> </span><span id="local-6989586621682769087"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769087"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682769088"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769088"><span class="hs-identifier hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621682769089"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769089"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2411"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; LocatedN RdrName
forall e a. HasAnnotation e =&gt; a -&gt; GenLocated e a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; DataCon
</span><a href="GHC.Builtin.Types.html#sumDataCon"><span class="hs-identifier hs-var">sumDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769088"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769089"><span class="hs-identifier hs-var">arity</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Void]
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        (EpAnn (AnnList ())) [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall (p :: Pass) a. IsPass p =&gt; a -&gt; HsScaled (GhcPass p) a
</span><a href="GHC.Hs.Type.html#hsLinear"><span class="hs-identifier hs-var">hsLinear</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769087"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2412"></span><span>
</span><span id="line-2413"></span><span class="hs-comment">{- Note [Ambiguous syntactic categories]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
There are places in the grammar where we do not know whether we are parsing an
expression or a pattern without unlimited lookahead (which we do not have in
'happy'):

View patterns:

    f (Con a b     ) = ...  -- 'Con a b' is a pattern
    f (Con a b -&gt; x) = ...  -- 'Con a b' is an expression

do-notation:

    do { Con a b &lt;- x } -- 'Con a b' is a pattern
    do { Con a b }      -- 'Con a b' is an expression

Guards:

    x | True &lt;- p &amp;&amp; q = ...  -- 'True' is a pattern
    x | True           = ...  -- 'True' is an expression

Top-level value/function declarations (FunBind/PatBind):

    f ! a         -- TH splice
    f ! a = ...   -- function declaration

    Until we encounter the = sign, we don't know if it's a top-level
    TemplateHaskell splice where ! is used, or if it's a function declaration
    where ! is bound.

There are also places in the grammar where we do not know whether we are
parsing an expression or a command:

    proc x -&gt; do { (stuff) -&lt; x }   -- 'stuff' is an expression
    proc x -&gt; do { (stuff) }        -- 'stuff' is a command

    Until we encounter arrow syntax (-&lt;) we don't know whether to parse 'stuff'
    as an expression or a command.

In fact, do-notation is subject to both ambiguities:

    proc x -&gt; do { (stuff) -&lt; x }        -- 'stuff' is an expression
    proc x -&gt; do { (stuff) &lt;- f -&lt; x }   -- 'stuff' is a pattern
    proc x -&gt; do { (stuff) }             -- 'stuff' is a command

There are many possible solutions to this problem. For an overview of the ones
we decided against, see Note [Resolving parsing ambiguities: non-taken alternatives]

The solution that keeps basic definitions (such as HsExpr) clean, keeps the
concerns local to the parser, and does not require duplication of hsSyn types,
or an extra pass over the entire AST, is to parse into an overloaded
parser-validator (a so-called tagless final encoding):

    class DisambECP b where ...
    instance DisambECP (HsCmd GhcPs) where ...
    instance DisambECP (HsExp GhcPs) where ...
    instance DisambECP (PatBuilder GhcPs) where ...

The 'DisambECP' class contains functions to build and validate 'b'. For example,
to add parentheses we have:

  mkHsParPV :: DisambECP b =&gt; SrcSpan -&gt; Located b -&gt; PV (Located b)

'mkHsParPV' will wrap the inner value in HsCmdPar for commands, HsPar for
expressions, and 'PatBuilderPar' for patterns (later transformed into ParPat,
see Note [PatBuilder]).

Consider the 'alts' production used to parse case-of alternatives:

  alts :: { Located ([AddEpAnn],[LMatch GhcPs (LHsExpr GhcPs)]) }
    : alts1     { sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts  { sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

We abstract over LHsExpr GhcPs, and it becomes:

  alts :: { forall b. DisambECP b =&gt; PV (Located ([AddEpAnn],[LMatch GhcPs (Located b)])) }
    : alts1     { $1 &gt;&gt;= \ $1 -&gt;
                  return $ sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts  { $2 &gt;&gt;= \ $2 -&gt;
                  return $ sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

Compared to the initial definition, the added bits are:

    forall b. DisambECP b =&gt; PV ( ... ) -- in the type signature
    $1 &gt;&gt;= \ $1 -&gt; return $             -- in one reduction rule
    $2 &gt;&gt;= \ $2 -&gt; return $             -- in another reduction rule

The overhead is constant relative to the size of the rest of the reduction
rule, so this approach scales well to large parser productions.

Note that we write ($1 &gt;&gt;= \ $1 -&gt; ...), so the second $1 is in a binding
position and shadows the previous $1. We can do this because internally
'happy' desugars $n to happy_var_n, and the rationale behind this idiom
is to be able to write (sLL $1 $&gt;) later on. The alternative would be to
write this as ($1 &gt;&gt;= \ fresh_name -&gt; ...), but then we couldn't refer
to the last fresh name as $&gt;.

Finally, we instantiate the polymorphic type to a concrete one, and run the
parser-validator, for example:

    stmt   :: { forall b. DisambECP b =&gt; PV (LStmt GhcPs (Located b)) }
    e_stmt :: { LStmt GhcPs (LHsExpr GhcPs) }
            : stmt {% runPV $1 }

In e_stmt, three things happen:

  1. we instantiate: b ~ HsExpr GhcPs
  2. we embed the PV computation into P by using runPV
  3. we run validation by using a monadic production, {% ... }

At this point the ambiguity is resolved.
-}</span><span>
</span><span id="line-2525"></span><span>
</span><span id="line-2526"></span><span>
</span><span id="line-2527"></span><span class="hs-comment">{- Note [Resolving parsing ambiguities: non-taken alternatives]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Alternative I, extra constructors in GHC.Hs.Expr
------------------------------------------------
We could add extra constructors to HsExpr to represent command-specific and
pattern-specific syntactic constructs. Under this scheme, we parse patterns
and commands as expressions and rejig later.  This is what GHC used to do, and
it polluted 'HsExpr' with irrelevant constructors:

  * for commands: 'HsArrForm', 'HsArrApp'
  * for patterns: 'EWildPat', 'EAsPat', 'EViewPat', 'ELazyPat'

(As of now, we still do that for patterns, but we plan to fix it).

There are several issues with this:

  * The implementation details of parsing are leaking into hsSyn definitions.

  * Code that uses HsExpr has to panic on these impossible-after-parsing cases.

  * HsExpr is arbitrarily selected as the extension basis. Why not extend
    HsCmd or HsPat with extra constructors instead?

Alternative II, extra constructors in GHC.Hs.Expr for GhcPs
-----------------------------------------------------------
We could address some of the problems with Alternative I by using Trees That
Grow and extending HsExpr only in the GhcPs pass. However, GhcPs corresponds to
the output of parsing, not to its intermediate results, so we wouldn't want
them there either.

Alternative III, extra constructors in GHC.Hs.Expr for GhcPrePs
---------------------------------------------------------------
We could introduce a new pass, GhcPrePs, to keep GhcPs pristine.
Unfortunately, creating a new pass would significantly bloat conversion code
and slow down the compiler by adding another linear-time pass over the entire
AST. For example, in order to build HsExpr GhcPrePs, we would need to build
HsLocalBinds GhcPrePs (as part of HsLet), and we never want HsLocalBinds
GhcPrePs.


Alternative IV, sum type and bottom-up data flow
------------------------------------------------
Expressions and commands are disjoint. There are no user inputs that could be
interpreted as either an expression or a command depending on outer context:

  5        -- definitely an expression
  x -&lt; y   -- definitely a command

Even though we have both 'HsLam' and 'HsCmdLam', we can look at
the body to disambiguate:

  \p -&gt; 5        -- definitely an expression
  \p -&gt; x -&lt; y   -- definitely a command

This means we could use a bottom-up flow of information to determine
whether we are parsing an expression or a command, using a sum type
for intermediate results:

  Either (LHsExpr GhcPs) (LHsCmd GhcPs)

There are two problems with this:

  * We cannot handle the ambiguity between expressions and
    patterns, which are not disjoint.

  * Bottom-up flow of information leads to poor error messages. Consider

        if ... then 5 else (x -&lt; y)

    Do we report that '5' is not a valid command or that (x -&lt; y) is not a
    valid expression?  It depends on whether we want the entire node to be
    'HsIf' or 'HsCmdIf', and this information flows top-down, from the
    surrounding parsing context (are we in 'proc'?)

Alternative V, backtracking with parser combinators
---------------------------------------------------
One might think we could sidestep the issue entirely by using a backtracking
parser and doing something along the lines of (try pExpr &lt;|&gt; pPat).

Turns out, this wouldn't work very well, as there can be patterns inside
expressions (e.g. via 'case', 'let', 'do') and expressions inside patterns
(e.g. view patterns). To handle this, we would need to backtrack while
backtracking, and unbound levels of backtracking lead to very fragile
performance.

Alternative VI, an intermediate data type
-----------------------------------------
There are common syntactic elements of expressions, commands, and patterns
(e.g. all of them must have balanced parentheses), and we can capture this
common structure in an intermediate data type, Frame:

data Frame
  = FrameVar RdrName
    -- ^ Identifier: Just, map, BS.length
  | FrameTuple [LTupArgFrame] Boxity
    -- ^ Tuple (section): (a,b) (a,b,c) (a,,) (,a,)
  | FrameTySig LFrame (LHsSigWcType GhcPs)
    -- ^ Type signature: x :: ty
  | FramePar (SrcSpan, SrcSpan) LFrame
    -- ^ Parentheses
  | FrameIf LFrame LFrame LFrame
    -- ^ If-expression: if p then x else y
  | FrameCase LFrame [LFrameMatch]
    -- ^ Case-expression: case x of { p1 -&gt; e1; p2 -&gt; e2 }
  | FrameDo HsStmtContextRn [LFrameStmt]
    -- ^ Do-expression: do { s1; a &lt;- s2; s3 }
  ...
  | FrameExpr (HsExpr GhcPs)   -- unambiguously an expression
  | FramePat (HsPat GhcPs)     -- unambiguously a pattern
  | FrameCommand (HsCmd GhcPs) -- unambiguously a command

To determine which constructors 'Frame' needs to have, we take the union of
intersections between HsExpr, HsCmd, and HsPat.

The intersection between HsPat and HsExpr:

  HsPat  =  VarPat   | TuplePat      | SigPat        | ParPat   | ...
  HsExpr =  HsVar    | ExplicitTuple | ExprWithTySig | HsPar    | ...
  -------------------------------------------------------------------
  Frame  =  FrameVar | FrameTuple    | FrameTySig    | FramePar | ...

The intersection between HsCmd and HsExpr:

  HsCmd  = HsCmdIf | HsCmdCase | HsCmdDo | HsCmdPar
  HsExpr = HsIf    | HsCase    | HsDo    | HsPar
  ------------------------------------------------
  Frame = FrameIf  | FrameCase | FrameDo | FramePar

The intersection between HsCmd and HsPat:

  HsPat  = ParPat   | ...
  HsCmd  = HsCmdPar | ...
  -----------------------
  Frame  = FramePar | ...

Take the union of each intersection and this yields the final 'Frame' data
type. The problem with this approach is that we end up duplicating a good
portion of hsSyn:

    Frame         for  HsExpr, HsPat, HsCmd
    TupArgFrame   for  HsTupArg
    FrameMatch    for  Match
    FrameStmt     for  StmtLR
    FrameGRHS     for  GRHS
    FrameGRHSs    for  GRHSs
    ...

Alternative VII, a product type
-------------------------------
We could avoid the intermediate representation of Alternative VI by parsing
into a product of interpretations directly:

    type ExpCmdPat = ( PV (LHsExpr GhcPs)
                     , PV (LHsCmd GhcPs)
                     , PV (LHsPat GhcPs) )

This means that in positions where we do not know whether to produce
expression, a pattern, or a command, we instead produce a parser-validator for
each possible option.

Then, as soon as we have parsed far enough to resolve the ambiguity, we pick
the appropriate component of the product, discarding the rest:

    checkExpOf3 (e, _, _) = e  -- interpret as an expression
    checkCmdOf3 (_, c, _) = c  -- interpret as a command
    checkPatOf3 (_, _, p) = p  -- interpret as a pattern

We can easily define ambiguities between arbitrary subsets of interpretations.
For example, when we know ahead of type that only an expression or a command is
possible, but not a pattern, we can use a smaller type:

    type ExpCmd = (PV (LHsExpr GhcPs), PV (LHsCmd GhcPs))

    checkExpOf2 (e, _) = e  -- interpret as an expression
    checkCmdOf2 (_, c) = c  -- interpret as a command

However, there is a slight problem with this approach, namely code duplication
in parser productions. Consider the 'alts' production used to parse case-of
alternatives:

  alts :: { Located ([AddEpAnn],[LMatch GhcPs (LHsExpr GhcPs)]) }
    : alts1     { sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts  { sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

Under the new scheme, we have to completely duplicate its type signature and
each reduction rule:

  alts :: { ( PV (Located ([AddEpAnn],[LMatch GhcPs (LHsExpr GhcPs)])) -- as an expression
            , PV (Located ([AddEpAnn],[LMatch GhcPs (LHsCmd GhcPs)]))  -- as a command
            ) }
    : alts1
        { ( checkExpOf2 $1 &gt;&gt;= \ $1 -&gt;
            return $ sL1 $1 (fst $ unLoc $1,snd $ unLoc $1)
          , checkCmdOf2 $1 &gt;&gt;= \ $1 -&gt;
            return $ sL1 $1 (fst $ unLoc $1,snd $ unLoc $1)
          ) }
    | ';' alts
        { ( checkExpOf2 $2 &gt;&gt;= \ $2 -&gt;
            return $ sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2)
          , checkCmdOf2 $2 &gt;&gt;= \ $2 -&gt;
            return $ sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2)
          ) }

And the same goes for other productions: 'altslist', 'alts1', 'alt', 'alt_rhs',
'ralt', 'gdpats', 'gdpat', 'exp', ... and so on. That is a lot of code!

Alternative VIII, a function from a GADT
----------------------------------------
We could avoid code duplication of the Alternative VII by representing the product
as a function from a GADT:

    data ExpCmdG b where
      ExpG :: ExpCmdG HsExpr
      CmdG :: ExpCmdG HsCmd

    type ExpCmd = forall b. ExpCmdG b -&gt; PV (Located (b GhcPs))

    checkExp :: ExpCmd -&gt; PV (LHsExpr GhcPs)
    checkCmd :: ExpCmd -&gt; PV (LHsCmd GhcPs)
    checkExp f = f ExpG  -- interpret as an expression
    checkCmd f = f CmdG  -- interpret as a command

Consider the 'alts' production used to parse case-of alternatives:

  alts :: { Located ([AddEpAnn],[LMatch GhcPs (LHsExpr GhcPs)]) }
    : alts1     { sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts  { sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

We abstract over LHsExpr, and it becomes:

  alts :: { forall b. ExpCmdG b -&gt; PV (Located ([AddEpAnn],[LMatch GhcPs (Located (b GhcPs))])) }
    : alts1
        { \tag -&gt; $1 tag &gt;&gt;= \ $1 -&gt;
                  return $ sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts
        { \tag -&gt; $2 tag &gt;&gt;= \ $2 -&gt;
                  return $ sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

Note that 'ExpCmdG' is a singleton type, the value is completely
determined by the type:

  when (b~HsExpr),  tag = ExpG
  when (b~HsCmd),   tag = CmdG

This is a clear indication that we can use a class to pass this value behind
the scenes:

  class    ExpCmdI b      where expCmdG :: ExpCmdG b
  instance ExpCmdI HsExpr where expCmdG = ExpG
  instance ExpCmdI HsCmd  where expCmdG = CmdG

And now the 'alts' production is simplified, as we no longer need to
thread 'tag' explicitly:

  alts :: { forall b. ExpCmdI b =&gt; PV (Located ([AddEpAnn],[LMatch GhcPs (Located (b GhcPs))])) }
    : alts1     { $1 &gt;&gt;= \ $1 -&gt;
                  return $ sL1 $1 (fst $ unLoc $1,snd $ unLoc $1) }
    | ';' alts  { $2 &gt;&gt;= \ $2 -&gt;
                  return $ sLL $1 $&gt; ((mj AnnSemi $1:(fst $ unLoc $2)),snd $ unLoc $2) }

This encoding works well enough, but introduces an extra GADT unlike the
tagless final encoding, and there's no need for this complexity.

-}</span><span>
</span><span id="line-2792"></span><span>
</span><span id="line-2793"></span><span class="hs-comment">{- Note [PatBuilder]
~~~~~~~~~~~~~~~~~~~~
Unlike HsExpr or HsCmd, the Pat type cannot accommodate all intermediate forms,
so we introduce the notion of a PatBuilder.

Consider a pattern like this:

  Con a b c

We parse arguments to &quot;Con&quot; one at a time in the  fexp aexp  parser production,
building the result with mkHsAppPV, so the intermediate forms are:

  1. Con
  2. Con a
  3. Con a b
  4. Con a b c

In 'HsExpr', we have 'HsApp', so the intermediate forms are represented like
this (pseudocode):

  1. &quot;Con&quot;
  2. HsApp &quot;Con&quot; &quot;a&quot;
  3. HsApp (HsApp &quot;Con&quot; &quot;a&quot;) &quot;b&quot;
  3. HsApp (HsApp (HsApp &quot;Con&quot; &quot;a&quot;) &quot;b&quot;) &quot;c&quot;

Similarly, in 'HsCmd' we have 'HsCmdApp'. In 'Pat', however, what we have
instead is 'ConPatIn', which is very awkward to modify and thus unsuitable for
the intermediate forms.

We also need an intermediate representation to postpone disambiguation between
FunBind and PatBind. Consider:

  a `Con` b = ...
  a `fun` b = ...

How do we know that (a `Con` b) is a PatBind but (a `fun` b) is a FunBind? We
learn this by inspecting an intermediate representation in 'isFunLhs' and
seeing that 'Con' is a data constructor but 'f' is not. We need an intermediate
representation capable of representing both a FunBind and a PatBind, so Pat is
insufficient.

PatBuilder is an extension of Pat that is capable of representing intermediate
parsing results for patterns and function bindings:

  data PatBuilder p
    = PatBuilderPat (Pat p)
    | PatBuilderApp (LocatedA (PatBuilder p)) (LocatedA (PatBuilder p))
    | PatBuilderOpApp (LocatedA (PatBuilder p)) (LocatedA RdrName) (LocatedA (PatBuilder p))
    ...

It can represent any pattern via 'PatBuilderPat', but it also has a variety of
other constructors which were added by following a simple principle: we never
pattern match on the pattern stored inside 'PatBuilderPat'.
-}</span><span>
</span><span id="line-2847"></span><span>
</span><span id="line-2848"></span><span class="hs-comment">---------------------------------------------------------------------------</span><span>
</span><span id="line-2849"></span><span class="hs-comment">-- Miscellaneous utilities</span><span>
</span><span id="line-2850"></span><span>
</span><span id="line-2851"></span><span class="hs-comment">-- | Check if a fixity is valid. We support bypassing the usual bound checks</span><span>
</span><span id="line-2852"></span><span class="hs-comment">-- for some special operators.</span><span>
</span><span id="line-2853"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkPrecP"><span class="hs-identifier hs-type">checkPrecP</span></a></span><span>
</span><span id="line-2854"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>              </span><span class="annot"><span class="hs-comment">-- ^ precedence</span></span><span>
</span><span id="line-2855"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ operators</span></span><span>
</span><span id="line-2856"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2857"></span><span id="checkPrecP"><span class="annot"><span class="annottext">checkPrecP :: Located (SourceText, Int)
-&gt; Located (OrdList (LocatedN RdrName)) -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#checkPrecP"><span class="hs-identifier hs-var hs-var">checkPrecP</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769090"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769090"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621682769091"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769091"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769092"><span class="annot"><span class="annottext">OrdList (LocatedN RdrName)
</span><a href="#local-6989586621682769092"><span class="hs-identifier hs-var">ol</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2858"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769091"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769091"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Types.Fixity.html#maxPrecedence"><span class="hs-identifier hs-var">maxPrecedence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; P ()
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2859"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; Bool) -&gt; OrdList (LocatedN RdrName) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; Bool
forall {l}. GenLocated l RdrName -&gt; Bool
</span><a href="#local-6989586621682769096"><span class="hs-identifier hs-var">specialOp</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (LocatedN RdrName)
</span><a href="#local-6989586621682769092"><span class="hs-identifier hs-var">ol</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; P ()
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2860"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769090"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrPrecedenceOutOfRange"><span class="hs-identifier hs-var">PsErrPrecedenceOutOfRange</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769091"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2861"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2862"></span><span>    </span><span class="hs-comment">-- If you change this, consider updating Note [Fixity of (-&gt;)] in GHC/Types.hs</span><span>
</span><span id="line-2863"></span><span>    </span><span id="local-6989586621682769096"><span class="annot"><span class="annottext">specialOp :: GenLocated l RdrName -&gt; Bool
</span><a href="#local-6989586621682769096"><span class="hs-identifier hs-var hs-var">specialOp</span></a></span></span><span> </span><span id="local-6989586621682769100"><span class="annot"><span class="annottext">GenLocated l RdrName
</span><a href="#local-6989586621682769100"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated l RdrName
</span><a href="#local-6989586621682769100"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="GHC.Builtin.Types.html#unrestrictedFunTyCon"><span class="hs-identifier hs-var">unrestrictedFunTyCon</span></a></span><span>
</span><span id="line-2864"></span><span>
</span><span id="line-2865"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRecConstrOrUpdate"><span class="hs-identifier hs-type">mkRecConstrOrUpdate</span></a></span><span>
</span><span id="line-2866"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-2867"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2868"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-2869"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier hs-type">Fbind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2870"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2871"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2872"></span><span id="mkRecConstrOrUpdate"><span class="annot"><span class="annottext">mkRecConstrOrUpdate :: Bool
-&gt; LHsExpr GhcPs
-&gt; SrcSpan
-&gt; ([Fbind (HsExpr GhcPs)], Maybe SrcSpan)
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (HsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRecConstrOrUpdate"><span class="hs-identifier hs-var hs-var">mkRecConstrOrUpdate</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-type">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769101"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769101"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769102"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769102"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769103"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769103"><span class="hs-identifier hs-var">_lrec</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769104"><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682769104"><span class="hs-identifier hs-var">fbinds</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682769105"><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682769105"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769106"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769106"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-2873"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isRdrDataCon"><span class="hs-identifier hs-var">isRdrDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769102"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-2874"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2875"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769107"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769107"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769108"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769108"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))]
-&gt; ([GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
          (GenLocated SrcSpanAnnA (HsExpr GhcPs)))],
    [GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
          (GenLocated SrcSpanAnnA (HsExpr GhcPs)))])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))]
</span><a href="#local-6989586621682769104"><span class="hs-identifier hs-var">fbinds</span></a></span><span>
</span><span id="line-2876"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769108"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2877"></span><span>          </span><span id="local-6989586621682769109"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769109"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769109"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2878"></span><span>              </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordDotInvalid"><span class="hs-identifier hs-var">PsErrOverloadedRecordDotInvalid</span></a></span><span>
</span><span id="line-2879"></span><span>          </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; PV (HsExpr GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName
-&gt; HsRecordBinds GhcPs
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkRdrRecordCon"><span class="hs-identifier hs-var">mkRdrRecordCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769101"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769102"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA
   (HsRecField GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; Maybe SrcSpan
-&gt; HsRecFields GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall arg.
[LocatedA (HsRecField GhcPs arg)]
-&gt; Maybe SrcSpan -&gt; HsRecFields GhcPs arg
</span><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-var">mk_rec_fields</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA
   (HsRecField GhcPs (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769107"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682769105"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769106"><span class="hs-identifier hs-var">anns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2880"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRecConstrOrUpdate"><span class="hs-identifier hs-var">mkRecConstrOrUpdate</span></a></span><span> </span><span id="local-6989586621682769110"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769110"><span class="hs-identifier hs-var">overloaded_update</span></a></span></span><span> </span><span id="local-6989586621682769111"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769111"><span class="hs-identifier hs-var">exp</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769112"><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682769112"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682769113"><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682769113"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769114"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769114"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-2881"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682769115"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769115"><span class="hs-identifier hs-var">dd_loc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe SrcSpan
</span><a href="#local-6989586621682769113"><span class="hs-identifier hs-var">dd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769115"><span class="hs-identifier hs-var">dd_loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2882"></span><span>                                          </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrDotsInRecordUpdate"><span class="hs-identifier hs-var">PsErrDotsInRecordUpdate</span></a></span><span>
</span><span id="line-2883"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; LHsExpr GhcPs
-&gt; [Fbind (HsExpr GhcPs)]
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (HsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRdrRecordUpd"><span class="hs-identifier hs-var">mkRdrRecordUpd</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769110"><span class="hs-identifier hs-var">overloaded_update</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769111"><span class="hs-identifier hs-var">exp</span></a></span><span> </span><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682769112"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769114"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-2884"></span><span>
</span><span id="line-2885"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrRecordUpd"><span class="hs-identifier hs-type">mkRdrRecordUpd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier hs-type">Fbind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2886"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2887"></span><span id="mkRdrRecordUpd"><span class="annot"><span class="annottext">mkRdrRecordUpd :: Bool
-&gt; LHsExpr GhcPs
-&gt; [Fbind (HsExpr GhcPs)]
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; PV (HsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRdrRecordUpd"><span class="hs-identifier hs-var hs-var">mkRdrRecordUpd</span></a></span></span><span> </span><span id="local-6989586621682769117"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769117"><span class="hs-identifier hs-var">overloaded_on</span></a></span></span><span> </span><span id="local-6989586621682769118"><span class="annot"><span class="annottext">exp :: LHsExpr GhcPs
</span><a href="#local-6989586621682769118"><span class="hs-identifier hs-var">exp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769119"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769119"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769120"><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682769120"><span class="hs-identifier hs-var">fbinds</span></a></span></span><span> </span><span id="local-6989586621682769121"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769121"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2888"></span><span>  </span><span class="hs-comment">-- We do not need to know if OverloadedRecordDot is in effect. We do</span><span>
</span><span id="line-2889"></span><span>  </span><span class="hs-comment">-- however need to know if OverloadedRecordUpdate (passed in</span><span>
</span><span id="line-2890"></span><span>  </span><span class="hs-comment">-- overloaded_on) is in effect because it affects the Left/Right nature</span><span>
</span><span id="line-2891"></span><span>  </span><span class="hs-comment">-- of the RecordUpd value we calculate.</span><span>
</span><span id="line-2892"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769122"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769122"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769123"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769123"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))]
-&gt; ([GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
          (GenLocated SrcSpanAnnA (HsExpr GhcPs)))],
    [GenLocated
       SrcSpanAnnA
       (HsFieldBind
          (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
          (GenLocated SrcSpanAnnA (HsExpr GhcPs)))])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
[Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))]
</span><a href="#local-6989586621682769120"><span class="hs-identifier hs-var">fbinds</span></a></span><span>
</span><span id="line-2893"></span><span>      </span><span class="annot"><a href="#local-6989586621682769124"><span class="hs-identifier hs-type">fs'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecUpdField"><span class="hs-identifier hs-type">LHsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2894"></span><span>      </span><span id="local-6989586621682769124"><span class="annot"><span class="annottext">fs' :: [LHsRecUpdField GhcPs GhcPs]
</span><a href="#local-6989586621682769124"><span class="hs-identifier hs-var hs-var">fs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
 -&gt; GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(HsFieldBind
   (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
   (GenLocated SrcSpanAnnA (HsExpr GhcPs))
 -&gt; HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
        (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
        (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">HsRecField GhcPs (LHsExpr GhcPs)
-&gt; HsRecField GhcPs (LHsExpr GhcPs)
HsFieldBind
  (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
  (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mk_rec_upd_field"><span class="hs-identifier hs-var">mk_rec_upd_field</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769122"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-2895"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769117"><span class="hs-identifier hs-var">overloaded_on</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2896"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
-&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769123"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2897"></span><span>      </span><span class="hs-comment">-- A '.' was found in an update and OverloadedRecordUpdate isn't on.</span><span>
</span><span id="line-2898"></span><span>      </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769119"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordUpdateNotEnabled"><span class="hs-identifier hs-var">PsErrOverloadedRecordUpdateNotEnabled</span></a></span><span>
</span><span id="line-2899"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2900"></span><span>      </span><span class="hs-comment">-- This is just a regular record update.</span><span>
</span><span id="line-2901"></span><span>      </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; PV (HsExpr GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-2902"></span><span>        </span><span class="annot"><span class="annottext">rupd_ext :: XRecordUpd GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
XRecordUpd GhcPs
</span><a href="#local-6989586621682769121"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-2903"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: LHsExpr GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769118"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2904"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: LHsRecUpdFields GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2905"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RegularRecUpdFields"><span class="hs-identifier hs-type">RegularRecUpdFields</span></a></span><span>
</span><span id="line-2906"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xRecUpdFields :: XLHsRecUpdLabels GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#xRecUpdFields"><span class="hs-identifier hs-var">xRecUpdFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLHsRecUpdLabels GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2907"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recUpdFields :: [LHsRecUpdField GhcPs GhcPs]
</span><a href="Language.Haskell.Syntax.Expr.html#recUpdFields"><span class="hs-identifier hs-var">recUpdFields</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
</span><a href="#local-6989586621682769124"><span class="hs-identifier hs-var">fs'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2908"></span><span>    </span><span class="hs-comment">-- This is a RecordDotSyntax update.</span><span>
</span><span id="line-2909"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2910"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769135"><span class="annot"><span class="annottext">qualifiedFields :: [GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
</span><a href="#local-6989586621682769135"><span class="hs-identifier hs-var hs-var">qualifiedFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2911"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; FieldOcc GhcPs -&gt; GenLocated SrcSpanAnnA (FieldOcc GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769136"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621682769137"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span class="annot"><span class="annottext">XHsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769136"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769136"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769137"><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621682769137"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsRecUpdField GhcPs GhcPs]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
      (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
</span><a href="#local-6989586621682769124"><span class="hs-identifier hs-var">fs'</span></a></span><span>
</span><span id="line-2912"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Bool
</span><a href="GHC.Types.Name.Reader.html#isQual"><span class="hs-identifier hs-var">isQual</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; Bool)
-&gt; (FieldOcc GhcPs -&gt; RdrName) -&gt; FieldOcc GhcPs -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs -&gt; RdrName
forall (p :: Pass). IsPass p =&gt; FieldOcc (GhcPass p) -&gt; RdrName
</span><a href="GHC.Hs.Type.html#fieldOccRdrName"><span class="hs-identifier hs-var">fieldOccRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldOcc GhcPs -&gt; Bool) -&gt; FieldOcc GhcPs -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldOcc GhcPs
</span><a href="#local-6989586621682769137"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-2913"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-2914"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
</span><a href="#local-6989586621682769135"><span class="hs-identifier hs-var">qualifiedFields</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2915"></span><span>          </span><span id="local-6989586621682769141"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (FieldOcc GhcPs)
</span><a href="#local-6989586621682769141"><span class="hs-identifier hs-var">qf</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (FieldOcc GhcPs) -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (FieldOcc GhcPs)
</span><a href="#local-6989586621682769141"><span class="hs-identifier hs-var">qf</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2916"></span><span>                  </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrOverloadedRecordUpdateNoQualifiedFields"><span class="hs-identifier hs-var">PsErrOverloadedRecordUpdateNoQualifiedFields</span></a></span><span>
</span><span id="line-2917"></span><span>          </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (FieldOcc GhcPs)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; PV (HsExpr GhcPs)
forall a. a -&gt; PV a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; PV (HsExpr GhcPs))
-&gt; HsExpr GhcPs -&gt; PV (HsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-2918"></span><span>               </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordUpd"><span class="hs-identifier hs-type">RecordUpd</span></a></span><span>
</span><span id="line-2919"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rupd_ext :: XRecordUpd GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_ext"><span class="hs-identifier hs-var">rupd_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
XRecordUpd GhcPs
</span><a href="#local-6989586621682769121"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-2920"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_expr :: LHsExpr GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_expr"><span class="hs-identifier hs-var">rupd_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769118"><span class="hs-identifier hs-var">exp</span></a></span><span>
</span><span id="line-2921"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rupd_flds :: LHsRecUpdFields GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rupd_flds"><span class="hs-identifier hs-var">rupd_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2922"></span><span>                   </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#OverloadedRecUpdFields"><span class="hs-identifier hs-type">OverloadedRecUpdFields</span></a></span><span>
</span><span id="line-2923"></span><span>                     </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">xOLRecUpdFields :: XLHsOLRecUpdLabels GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#xOLRecUpdFields"><span class="hs-identifier hs-var">xOLRecUpdFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLHsOLRecUpdLabels GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-2924"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">olRecUpdFields :: [LHsRecProj GhcPs (LHsExpr GhcPs)]
</span><a href="Language.Haskell.Syntax.Expr.html#olRecUpdFields"><span class="hs-identifier hs-var">olRecUpdFields</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)] -&gt; [LHsRecProj GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682769146"><span class="hs-identifier hs-var">toProjUpdates</span></a></span><span> </span><span class="annot"><span class="annottext">[Fbind (HsExpr GhcPs)]
</span><a href="#local-6989586621682769120"><span class="hs-identifier hs-var">fbinds</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2925"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2926"></span><span>    </span><span class="annot"><a href="#local-6989586621682769146"><span class="hs-identifier hs-type">toProjUpdates</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.html#Fbind"><span class="hs-identifier hs-type">Fbind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2927"></span><span>    </span><span id="local-6989586621682769146"><span class="annot"><span class="annottext">toProjUpdates :: [Fbind (HsExpr GhcPs)] -&gt; [LHsRecProj GhcPs (LHsExpr GhcPs)]
</span><a href="#local-6989586621682769146"><span class="hs-identifier hs-var hs-var">toProjUpdates</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
   (GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
 -&gt; GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
-&gt; [Either
      (GenLocated
         SrcSpanAnnA
         (HsFieldBind
            (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
            (GenLocated SrcSpanAnnA (HsExpr GhcPs))))
      (GenLocated
         SrcSpanAnnA
         (HsFieldBind
            (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
            (GenLocated SrcSpanAnnA (HsExpr GhcPs))))]
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
         (GenLocated SrcSpanAnnA (HsExpr GhcPs)))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682769148"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769148"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769148"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682769149"><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769149"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsRecUpdField GhcPs GhcPs -&gt; LHsRecProj GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682769150"><span class="hs-identifier hs-var">recFieldToProjUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecUpdField GhcPs GhcPs
GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
</span><a href="#local-6989586621682769149"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-2928"></span><span>
</span><span id="line-2929"></span><span>    </span><span class="hs-comment">-- Convert a top-level field update like {foo=2} or {bar} (punned)</span><span>
</span><span id="line-2930"></span><span>    </span><span class="hs-comment">-- to a projection update.</span><span>
</span><span id="line-2931"></span><span>    </span><span class="annot"><a href="#local-6989586621682769150"><span class="hs-identifier hs-type">recFieldToProjUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecUpdProj"><span class="hs-identifier hs-type">LHsRecUpdProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2932"></span><span>    </span><span id="local-6989586621682769150"><span class="annot"><span class="annottext">recFieldToProjUpdate :: LHsRecUpdField GhcPs GhcPs -&gt; LHsRecProj GhcPs (LHsExpr GhcPs)
</span><a href="#local-6989586621682769150"><span class="hs-identifier hs-var hs-var">recFieldToProjUpdate</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769151"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769151"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span id="local-6989586621682769152"><span class="annot"><span class="annottext">XHsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
</span><a href="#local-6989586621682769152"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769154"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769154"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682769155"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769155"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769156"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769156"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682769157"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769157"><span class="hs-identifier hs-var">pun</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2933"></span><span>        </span><span class="hs-comment">-- The idea here is to convert the label to a singleton [FastString].</span><span>
</span><span id="line-2934"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769158"><span class="annot"><span class="annottext">f :: FastString
</span><a href="#local-6989586621682769158"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; FastString)
-&gt; (RdrName -&gt; OccName) -&gt; RdrName -&gt; FastString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; FastString) -&gt; RdrName -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769155"><span class="hs-identifier hs-var">rdr</span></a></span><span>
</span><span id="line-2935"></span><span>            </span><span id="local-6989586621682769159"><span class="annot"><span class="annottext">fl :: DotFieldOcc GhcPs
</span><a href="#local-6989586621682769159"><span class="hs-identifier hs-var hs-var">fl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCDotFieldOcc GhcPs
-&gt; XRec GhcPs FieldLabelString -&gt; DotFieldOcc GhcPs
forall p.
XCDotFieldOcc p -&gt; XRec p FieldLabelString -&gt; DotFieldOcc p
</span><a href="Language.Haskell.Syntax.Expr.html#DotFieldOcc"><span class="hs-identifier hs-var">DotFieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCDotFieldOcc GhcPs
AnnFieldLabel
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN
-&gt; FieldLabelString -&gt; GenLocated SrcSpanAnnN FieldLabelString
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769154"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; FieldLabelString
</span><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier hs-var">FieldLabelString</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769158"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2936"></span><span>            </span><span id="local-6989586621682769162"><span class="annot"><span class="annottext">lf :: SrcSpan
</span><a href="#local-6989586621682769162"><span class="hs-identifier hs-var hs-var">lf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769154"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-2937"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; LHsExpr GhcPs
-&gt; Bool
-&gt; Maybe (EpToken &quot;=&quot;)
-&gt; LHsRecProj GhcPs (LHsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRdrProjUpdate"><span class="hs-identifier hs-var">mkRdrProjUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769151"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan
-&gt; [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769162"><span class="hs-identifier hs-var">lf</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">EpAnnCO
-&gt; DotFieldOcc GhcPs -&gt; LocatedAn NoEpAnns (DotFieldOcc GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; EpAnnCO
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769154"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DotFieldOcc GhcPs
</span><a href="#local-6989586621682769159"><span class="hs-identifier hs-var">fl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; LHsExpr GhcPs
</span><a href="#local-6989586621682769163"><span class="hs-identifier hs-var">punnedVar</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769158"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769157"><span class="hs-identifier hs-var">pun</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
XHsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
</span><a href="#local-6989586621682769152"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-2938"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-2939"></span><span>          </span><span class="hs-comment">-- If punning, compute HsVar &quot;f&quot; otherwise just arg. This</span><span>
</span><span id="line-2940"></span><span>          </span><span class="hs-comment">-- has the effect that sentinel HsVar &quot;pun-rhs&quot; is replaced</span><span>
</span><span id="line-2941"></span><span>          </span><span class="hs-comment">-- by HsVar &quot;f&quot; here, before the update is written to a</span><span>
</span><span id="line-2942"></span><span>          </span><span class="hs-comment">-- setField expressions.</span><span>
</span><span id="line-2943"></span><span>          </span><span class="annot"><a href="#local-6989586621682769163"><span class="hs-identifier hs-type">punnedVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2944"></span><span>          </span><span id="local-6989586621682769163"><span class="annot"><span class="annottext">punnedVar :: FastString -&gt; LHsExpr GhcPs
</span><a href="#local-6989586621682769163"><span class="hs-identifier hs-var hs-var">punnedVar</span></a></span></span><span> </span><span id="local-6989586621682769164"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769164"><span class="hs-identifier hs-var">f</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769157"><span class="hs-identifier hs-var">pun</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769156"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcPs -&gt; LHsExpr GhcPs
HsExpr GhcPs -&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
forall e a. HasAnnotation e =&gt; a -&gt; GenLocated e a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcPs -&gt; LHsExpr GhcPs)
-&gt; (FastString -&gt; HsExpr GhcPs) -&gt; FastString -&gt; LHsExpr GhcPs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsExpr GhcPs
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; HsExpr GhcPs)
-&gt; (FastString -&gt; LocatedN RdrName) -&gt; FastString -&gt; HsExpr GhcPs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; LocatedN RdrName
forall e a. HasAnnotation e =&gt; a -&gt; GenLocated e a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(RdrName -&gt; LocatedN RdrName)
-&gt; (FastString -&gt; RdrName) -&gt; FastString -&gt; LocatedN RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#mkRdrUnqual"><span class="hs-identifier hs-var">mkRdrUnqual</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; RdrName)
-&gt; (FastString -&gt; OccName) -&gt; FastString -&gt; RdrName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkVarOccFS"><span class="hs-identifier hs-var">mkVarOccFS</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; LHsExpr GhcPs) -&gt; FastString -&gt; LHsExpr GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769164"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-2945"></span><span>
</span><span id="line-2946"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrRecordCon"><span class="hs-identifier hs-type">mkRdrRecordCon</span></a></span><span>
</span><span id="line-2947"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsRecordBinds"><span class="hs-identifier hs-type">HsRecordBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2948"></span><span id="mkRdrRecordCon"><span class="annot"><span class="annottext">mkRdrRecordCon :: LocatedN RdrName
-&gt; HsRecordBinds GhcPs
-&gt; (Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
-&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkRdrRecordCon"><span class="hs-identifier hs-var hs-var">mkRdrRecordCon</span></a></span></span><span> </span><span id="local-6989586621682769165"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769165"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682769166"><span class="annot"><span class="annottext">HsRecordBinds GhcPs
</span><a href="#local-6989586621682769166"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621682769167"><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
</span><a href="#local-6989586621682769167"><span class="hs-identifier hs-var">anns</span></a></span></span><span>
</span><span id="line-2949"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-type">RecordCon</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rcon_ext :: XRecordCon GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_ext"><span class="hs-identifier hs-var">rcon_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (EpToken &quot;{&quot;), Maybe (EpToken &quot;}&quot;))
XRecordCon GhcPs
</span><a href="#local-6989586621682769167"><span class="hs-identifier hs-var">anns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_con :: XRec GhcPs (ConLikeP GhcPs)
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_con"><span class="hs-identifier hs-var">rcon_con</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (ConLikeP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769165"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rcon_flds :: HsRecordBinds GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#rcon_flds"><span class="hs-identifier hs-var">rcon_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsRecordBinds GhcPs
</span><a href="#local-6989586621682769166"><span class="hs-identifier hs-var">flds</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2950"></span><span>
</span><span id="line-2951"></span><span id="local-6989586621682764804"><span class="annot"><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-type">mk_rec_fields</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecField"><span class="hs-identifier hs-type">HsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764804"><span class="hs-identifier hs-type">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764804"><span class="hs-identifier hs-type">arg</span></a></span></span><span>
</span><span id="line-2952"></span><span id="mk_rec_fields"><span class="annot"><span class="annottext">mk_rec_fields :: forall arg.
[LocatedA (HsRecField GhcPs arg)]
-&gt; Maybe SrcSpan -&gt; HsRecFields GhcPs arg
</span><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-var hs-var">mk_rec_fields</span></a></span></span><span> </span><span id="local-6989586621682769175"><span class="annot"><span class="annottext">[LocatedA (HsRecField GhcPs arg)]
</span><a href="#local-6989586621682769175"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe SrcSpan
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_ext :: XHsRecFields GhcPs
</span><a href="Language.Haskell.Syntax.Pat.html#rec_ext"><span class="hs-identifier hs-var">rec_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
XHsRecFields GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_flds :: [LHsRecField GhcPs arg]
</span><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcPs arg]
[LocatedA (HsRecField GhcPs arg)]
</span><a href="#local-6989586621682769175"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: Maybe (XRec GhcPs RecFieldsDotDot)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcPs RecFieldsDotDot)
Maybe (LocatedE RecFieldsDotDot)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2953"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mk_rec_fields"><span class="hs-identifier hs-var">mk_rec_fields</span></a></span><span> </span><span id="local-6989586621682769179"><span class="annot"><span class="annottext">[LocatedA (HsRecField GhcPs arg)]
</span><a href="#local-6989586621682769179"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682769180"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769180"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_ext :: XHsRecFields GhcPs
</span><a href="Language.Haskell.Syntax.Pat.html#rec_ext"><span class="hs-identifier hs-var">rec_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NoExtField
XHsRecFields GhcPs
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_flds :: [LHsRecField GhcPs arg]
</span><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcPs arg]
[LocatedA (HsRecField GhcPs arg)]
</span><a href="#local-6989586621682769179"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-2954"></span><span>                                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rec_dotdot :: Maybe (XRec GhcPs RecFieldsDotDot)
</span><a href="Language.Haskell.Syntax.Pat.html#rec_dotdot"><span class="hs-identifier hs-var">rec_dotdot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedE RecFieldsDotDot -&gt; Maybe (LocatedE RecFieldsDotDot)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; RecFieldsDotDot -&gt; LocatedE RecFieldsDotDot
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769180"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; RecFieldsDotDot
</span><a href="Language.Haskell.Syntax.Pat.html#RecFieldsDotDot"><span class="hs-identifier hs-var">RecFieldsDotDot</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; RecFieldsDotDot) -&gt; Int -&gt; RecFieldsDotDot
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA
   (HsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs)) arg)]
-&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsRecField GhcPs arg)]
[LocatedA
   (HsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs)) arg)]
</span><a href="#local-6989586621682769179"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2955"></span><span>
</span><span id="line-2956"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mk_rec_upd_field"><span class="hs-identifier hs-type">mk_rec_upd_field</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecField"><span class="hs-identifier hs-type">HsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecUpdField"><span class="hs-identifier hs-type">HsRecUpdField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-2957"></span><span id="mk_rec_upd_field"><span class="annot"><span class="annottext">mk_rec_upd_field :: HsRecField GhcPs (LHsExpr GhcPs)
-&gt; HsRecField GhcPs (LHsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mk_rec_upd_field"><span class="hs-identifier hs-var hs-var">mk_rec_upd_field</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span id="local-6989586621682769183"><span class="annot"><span class="annottext">XHsFieldBind (LFieldOcc GhcPs)
</span><a href="#local-6989586621682769183"><span class="hs-identifier hs-var">noAnn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769184"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769184"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-type">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769185"><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682769185"><span class="hs-identifier hs-var">rdr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769186"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769186"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682769187"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769187"><span class="hs-identifier hs-var">pun</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2958"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XHsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
-&gt; GenLocated SrcSpanAnnA (FieldOcc GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; Bool
-&gt; HsFieldBind
     (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs))
forall lhs rhs.
XHsFieldBind lhs -&gt; lhs -&gt; rhs -&gt; Bool -&gt; HsFieldBind lhs rhs
</span><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-var">HsFieldBind</span></a></span><span> </span><span class="annot"><span class="annottext">XHsFieldBind (LFieldOcc GhcPs)
XHsFieldBind (GenLocated SrcSpanAnnA (FieldOcc GhcPs))
</span><a href="#local-6989586621682769183"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; FieldOcc GhcPs -&gt; GenLocated SrcSpanAnnA (FieldOcc GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769184"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XCFieldOcc GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; FieldOcc GhcPs
forall pass. XCFieldOcc pass -&gt; LIdP pass -&gt; FieldOcc pass
</span><a href="Language.Haskell.Syntax.Type.html#FieldOcc"><span class="hs-identifier hs-var">FieldOcc</span></a></span><span> </span><span class="annot"><span class="annottext">XCFieldOcc GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
</span><a href="#local-6989586621682769185"><span class="hs-identifier hs-var">rdr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769186"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769187"><span class="hs-identifier hs-var">pun</span></a></span><span>
</span><span id="line-2959"></span><span>
</span><span id="line-2960"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkInlinePragma"><span class="hs-identifier hs-type">mkInlinePragma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#InlineSpec"><span class="hs-identifier hs-type">InlineSpec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#RuleMatchInfo"><span class="hs-identifier hs-type">RuleMatchInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Activation"><span class="hs-identifier hs-type">Activation</span></a></span><span>
</span><span id="line-2961"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span>
</span><span id="line-2962"></span><span class="hs-comment">-- The (Maybe Activation) is because the user can omit</span><span>
</span><span id="line-2963"></span><span class="hs-comment">-- the activation spec (and usually does)</span><span>
</span><span id="line-2964"></span><span id="mkInlinePragma"><span class="annot"><span class="annottext">mkInlinePragma :: SourceText
-&gt; (InlineSpec, RuleMatchInfo) -&gt; Maybe Activation -&gt; InlinePragma
</span><a href="GHC.Parser.PostProcess.html#mkInlinePragma"><span class="hs-identifier hs-var hs-var">mkInlinePragma</span></a></span></span><span> </span><span id="local-6989586621682769188"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769188"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769189"><span class="annot"><span class="annottext">InlineSpec
</span><a href="#local-6989586621682769189"><span class="hs-identifier hs-var">inl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769190"><span class="annot"><span class="annottext">RuleMatchInfo
</span><a href="#local-6989586621682769190"><span class="hs-identifier hs-var">match_info</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769191"><span class="annot"><span class="annottext">Maybe Activation
</span><a href="#local-6989586621682769191"><span class="hs-identifier hs-var">mb_act</span></a></span></span><span>
</span><span id="line-2965"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">inl_src :: SourceText
</span><a href="GHC.Types.Basic.html#inl_src"><span class="hs-identifier hs-var">inl_src</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769188"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="hs-comment">-- See Note [Pragma source text] in &quot;GHC.Types.SourceText&quot;</span><span>
</span><span id="line-2966"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_inline :: InlineSpec
</span><a href="GHC.Types.Basic.html#inl_inline"><span class="hs-identifier hs-var">inl_inline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InlineSpec
</span><a href="#local-6989586621682769189"><span class="hs-identifier hs-var">inl</span></a></span><span>
</span><span id="line-2967"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_sat :: Maybe Int
</span><a href="GHC.Types.Basic.html#inl_sat"><span class="hs-identifier hs-var">inl_sat</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2968"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_act :: Activation
</span><a href="GHC.Types.Basic.html#inl_act"><span class="hs-identifier hs-var">inl_act</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682769197"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-2969"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_rule :: RuleMatchInfo
</span><a href="GHC.Types.Basic.html#inl_rule"><span class="hs-identifier hs-var">inl_rule</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuleMatchInfo
</span><a href="#local-6989586621682769190"><span class="hs-identifier hs-var">match_info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-2970"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2971"></span><span>    </span><span id="local-6989586621682769197"><span class="annot"><span class="annottext">act :: Activation
</span><a href="#local-6989586621682769197"><span class="hs-identifier hs-var hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Activation
</span><a href="#local-6989586621682769191"><span class="hs-identifier hs-var">mb_act</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2972"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682769199"><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682769199"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="#local-6989586621682769199"><span class="hs-identifier hs-var">act</span></a></span><span>
</span><span id="line-2973"></span><span>            </span><span class="annot"><span class="annottext">Maybe Activation
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- No phase specified</span><span>
</span><span id="line-2974"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">InlineSpec
</span><a href="#local-6989586621682769189"><span class="hs-identifier hs-var">inl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2975"></span><span>                          </span><span class="annot"><a href="GHC.Types.Basic.html#NoInline"><span class="hs-identifier hs-type">NoInline</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="GHC.Types.Basic.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a></span><span>
</span><span id="line-2976"></span><span>                          </span><span class="annot"><a href="GHC.Types.Basic.html#Opaque"><span class="hs-identifier hs-type">Opaque</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="GHC.Types.Basic.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a></span><span>
</span><span id="line-2977"></span><span>                          </span><span id="local-6989586621682769203"><span class="annot"><span class="annottext">InlineSpec
</span><a href="#local-6989586621682769203"><span class="hs-identifier hs-var">_other</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="GHC.Types.Basic.html#AlwaysActive"><span class="hs-identifier hs-var">AlwaysActive</span></a></span><span>
</span><span id="line-2978"></span><span>
</span><span id="line-2979"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkOpaquePragma"><span class="hs-identifier hs-type">mkOpaquePragma</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span>
</span><span id="line-2980"></span><span id="mkOpaquePragma"><span class="annot"><span class="annottext">mkOpaquePragma :: SourceText -&gt; InlinePragma
</span><a href="GHC.Parser.PostProcess.html#mkOpaquePragma"><span class="hs-identifier hs-var hs-var">mkOpaquePragma</span></a></span></span><span> </span><span id="local-6989586621682769205"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769205"><span class="hs-identifier hs-var">src</span></a></span></span><span>
</span><span id="line-2981"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#InlinePragma"><span class="hs-identifier hs-type">InlinePragma</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">inl_src :: SourceText
</span><a href="GHC.Types.Basic.html#inl_src"><span class="hs-identifier hs-var">inl_src</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769205"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2982"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_inline :: InlineSpec
</span><a href="GHC.Types.Basic.html#inl_inline"><span class="hs-identifier hs-var">inl_inline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SourceText -&gt; InlineSpec
</span><a href="GHC.Types.Basic.html#Opaque"><span class="hs-identifier hs-var">Opaque</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769205"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-2983"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_sat :: Maybe Int
</span><a href="GHC.Types.Basic.html#inl_sat"><span class="hs-identifier hs-var">inl_sat</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-2984"></span><span>                 </span><span class="hs-comment">-- By marking the OPAQUE pragma NeverActive we stop</span><span>
</span><span id="line-2985"></span><span>                 </span><span class="hs-comment">-- (constructor) specialisation on OPAQUE things.</span><span>
</span><span id="line-2986"></span><span>                 </span><span class="hs-comment">--</span><span>
</span><span id="line-2987"></span><span>                 </span><span class="hs-comment">-- See Note [OPAQUE pragma]</span><span>
</span><span id="line-2988"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_act :: Activation
</span><a href="GHC.Types.Basic.html#inl_act"><span class="hs-identifier hs-var">inl_act</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Activation
</span><a href="GHC.Types.Basic.html#NeverActive"><span class="hs-identifier hs-var">NeverActive</span></a></span><span>
</span><span id="line-2989"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">inl_rule :: RuleMatchInfo
</span><a href="GHC.Types.Basic.html#inl_rule"><span class="hs-identifier hs-var">inl_rule</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RuleMatchInfo
</span><a href="GHC.Types.Basic.html#FunLike"><span class="hs-identifier hs-var">FunLike</span></a></span><span>
</span><span id="line-2990"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-2991"></span><span>
</span><span id="line-2992"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkNewOrData"><span class="hs-identifier hs-type">checkNewOrData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#NewOrData"><span class="hs-identifier hs-type">NewOrData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2993"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDefnCons"><span class="hs-identifier hs-type">DataDefnCons</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-2994"></span><span id="checkNewOrData"><span class="annot"><span class="annottext">checkNewOrData :: SrcSpan
-&gt; RdrName
-&gt; Bool
-&gt; NewOrData
-&gt; [LConDecl GhcPs]
-&gt; P (DataDefnCons (LConDecl GhcPs))
</span><a href="GHC.Parser.PostProcess.html#checkNewOrData"><span class="hs-identifier hs-var hs-var">checkNewOrData</span></a></span></span><span> </span><span id="local-6989586621682769207"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769207"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span id="local-6989586621682769208"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769208"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682769209"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769209"><span class="hs-identifier hs-var">is_type_data</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((NewOrData, [LConDecl GhcPs])
 -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; NewOrData
-&gt; [LConDecl GhcPs]
-&gt; P (DataDefnCons (LConDecl GhcPs))
forall a b c. ((a, b) -&gt; c) -&gt; a -&gt; b -&gt; c
</span><span class="hs-identifier hs-var">curry</span></span><span> </span><span class="annot"><span class="annottext">(((NewOrData, [LConDecl GhcPs])
  -&gt; P (DataDefnCons (LConDecl GhcPs)))
 -&gt; NewOrData
 -&gt; [LConDecl GhcPs]
 -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; ((NewOrData, [LConDecl GhcPs])
    -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; NewOrData
-&gt; [LConDecl GhcPs]
-&gt; P (DataDefnCons (LConDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-glyph">case</span><span>
</span><span id="line-2995"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#NewType"><span class="hs-identifier hs-var">NewType</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span id="local-6989586621682769212"><span class="annot"><span class="annottext">LConDecl GhcPs
</span><a href="#local-6989586621682769212"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataDefnCons (LConDecl GhcPs) -&gt; P (DataDefnCons (LConDecl GhcPs))
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DataDefnCons (LConDecl GhcPs)
 -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; DataDefnCons (LConDecl GhcPs)
-&gt; P (DataDefnCons (LConDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LConDecl GhcPs -&gt; DataDefnCons (LConDecl GhcPs)
forall a. a -&gt; DataDefnCons a
</span><a href="Language.Haskell.Syntax.Decls.html#NewTypeCon"><span class="hs-identifier hs-var">NewTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">LConDecl GhcPs
</span><a href="#local-6989586621682769212"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-2996"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#DataType"><span class="hs-identifier hs-var">DataType</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769215"><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621682769215"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataDefnCons (LConDecl GhcPs) -&gt; P (DataDefnCons (LConDecl GhcPs))
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DataDefnCons (LConDecl GhcPs)
 -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; DataDefnCons (LConDecl GhcPs)
-&gt; P (DataDefnCons (LConDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [LConDecl GhcPs] -&gt; DataDefnCons (LConDecl GhcPs)
forall a. Bool -&gt; [a] -&gt; DataDefnCons a
</span><a href="Language.Haskell.Syntax.Decls.html#DataTypeCons"><span class="hs-identifier hs-var">DataTypeCons</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769209"><span class="hs-identifier hs-var">is_type_data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
</span><a href="#local-6989586621682769217"><span class="hs-identifier hs-var">handle_type_data</span></a></span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
[GenLocated SrcSpanAnnA (ConDecl GhcPs)]
</span><a href="#local-6989586621682769215"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2997"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NewOrData
</span><a href="Language.Haskell.Syntax.Decls.html#NewType"><span class="hs-identifier hs-var">NewType</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769218"><span class="annot"><span class="annottext">[LConDecl GhcPs]
</span><a href="#local-6989586621682769218"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (DataDefnCons (LConDecl GhcPs))
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (DataDefnCons (LConDecl GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; P (DataDefnCons (LConDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769207"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Int -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMultipleConForNewtype"><span class="hs-identifier hs-var">PsErrMultipleConForNewtype</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769208"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDecl GhcPs)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[LConDecl GhcPs]
[GenLocated SrcSpanAnnA (ConDecl GhcPs)]
</span><a href="#local-6989586621682769218"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2998"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2999"></span><span>    </span><span class="hs-comment">-- In a &quot;type data&quot; declaration, the constructors are in the type/class</span><span>
</span><span id="line-3000"></span><span>    </span><span class="hs-comment">-- namespace rather than the data constructor namespace.</span><span>
</span><span id="line-3001"></span><span>    </span><span class="hs-comment">-- See Note [Type data declarations] in GHC.Rename.Module.</span><span>
</span><span id="line-3002"></span><span>    </span><span id="local-6989586621682769217"><span class="annot"><span class="annottext">handle_type_data :: [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
</span><a href="#local-6989586621682769217"><span class="hs-identifier hs-var hs-var">handle_type_data</span></a></span></span><span>
</span><span id="line-3003"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769209"><span class="hs-identifier hs-var">is_type_data</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDecl GhcPs)
 -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ConDecl GhcPs -&gt; ConDecl GhcPs)
-&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
-&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs -&gt; ConDecl GhcPs
forall {pass} {f :: * -&gt; *}.
(XRec pass (IdP pass) ~ f RdrName, Functor f) =&gt;
ConDecl pass -&gt; ConDecl pass
</span><a href="#local-6989586621682769220"><span class="hs-identifier hs-var">promote_constructor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3004"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (ConDecl GhcPs)]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-3005"></span><span>
</span><span id="line-3006"></span><span>    </span><span id="local-6989586621682769220"><span class="annot"><span class="annottext">promote_constructor :: ConDecl pass -&gt; ConDecl pass
</span><a href="#local-6989586621682769220"><span class="hs-identifier hs-var hs-var">promote_constructor</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769228"><span class="annot"><span class="annottext">dc :: ConDecl pass
</span><a href="#local-6989586621682769228"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_names :: forall pass. ConDecl pass -&gt; NonEmpty (LIdP pass)
</span><a href="Language.Haskell.Syntax.Decls.html#con_names"><span class="hs-identifier hs-var">con_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682769229"><span class="annot"><span class="annottext">NonEmpty (XRec pass (IdP pass))
</span><a href="#local-6989586621682769229"><span class="hs-identifier hs-var">cons</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-3007"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConDecl pass
</span><a href="#local-6989586621682769228"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_names"><span class="hs-identifier hs-var">con_names</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="#local-6989586621682769230"><span class="hs-identifier hs-type">promote_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682769229"><span class="hs-identifier hs-type">cons</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3008"></span><span>    </span><span class="annot"><a href="#local-6989586621682769220"><span class="hs-identifier hs-var">promote_constructor</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769231"><span class="annot"><span class="annottext">dc :: ConDecl pass
</span><a href="#local-6989586621682769231"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">con_name :: forall pass. ConDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_name"><span class="hs-identifier hs-var">con_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682769232"><span class="annot"><span class="annottext">XRec pass (IdP pass)
</span><a href="#local-6989586621682769232"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-3009"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConDecl pass
</span><a href="#local-6989586621682769231"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_name"><span class="hs-identifier hs-var">con_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="#local-6989586621682769230"><span class="hs-identifier hs-type">promote_name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769232"><span class="hs-identifier hs-type">con</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3010"></span><span>    </span><span class="annot"><a href="#local-6989586621682769220"><span class="hs-identifier hs-var">promote_constructor</span></a></span><span> </span><span id="local-6989586621682769233"><span class="annot"><span class="annottext">ConDecl pass
</span><a href="#local-6989586621682769233"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConDecl pass
</span><a href="#local-6989586621682769233"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-3011"></span><span>
</span><span id="line-3012"></span><span>    </span><span id="local-6989586621682769230"><span class="annot"><span class="annottext">promote_name :: RdrName -&gt; RdrName
</span><a href="#local-6989586621682769230"><span class="hs-identifier hs-var hs-var">promote_name</span></a></span></span><span> </span><span id="local-6989586621682769234"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769234"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; Maybe RdrName -&gt; RdrName
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769234"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; Maybe RdrName
</span><a href="GHC.Types.Name.Reader.html#promoteRdrName"><span class="hs-identifier hs-var">promoteRdrName</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769234"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3013"></span><span>
</span><span id="line-3014"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3015"></span><span class="hs-comment">-- utilities for foreign declarations</span><span>
</span><span id="line-3016"></span><span>
</span><span id="line-3017"></span><span class="hs-comment">-- construct a foreign import declaration</span><span>
</span><span id="line-3018"></span><span class="hs-comment">--</span><span>
</span><span id="line-3019"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImport"><span class="hs-identifier hs-type">mkImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallConv"><span class="hs-identifier hs-type">CCallConv</span></a></span><span>
</span><span id="line-3020"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#Safety"><span class="hs-identifier hs-type">Safety</span></a></span><span>
</span><span id="line-3021"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3022"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;import&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3023"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;foreign&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDecl"><span class="hs-identifier hs-type">HsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3024"></span><span id="mkImport"><span class="annot"><span class="annottext">mkImport :: GenLocated SrcSpan CCallConv
-&gt; GenLocated SrcSpan Safety
-&gt; (Located StringLiteral, LocatedN RdrName, LHsSigType GhcPs)
-&gt; (EpToken &quot;import&quot;, TokDcolon)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkImport"><span class="hs-identifier hs-var hs-var">mkImport</span></a></span></span><span> </span><span id="local-6989586621682769236"><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv
</span><a href="#local-6989586621682769236"><span class="hs-identifier hs-var">cconv</span></a></span></span><span> </span><span id="local-6989586621682769237"><span class="annot"><span class="annottext">GenLocated SrcSpan Safety
</span><a href="#local-6989586621682769237"><span class="hs-identifier hs-var">safety</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769238"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769238"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a></span><span> </span><span id="local-6989586621682769240"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769240"><span class="hs-identifier hs-var">esrc</span></a></span></span><span> </span><span id="local-6989586621682769241"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769241"><span class="hs-identifier hs-var">entity</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe NoCommentsLocation
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769242"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769242"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769243"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682769243"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769244"><span class="annot"><span class="annottext">EpToken &quot;import&quot;
</span><a href="#local-6989586621682769244"><span class="hs-identifier hs-var">timport</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769245"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682769245"><span class="hs-identifier hs-var">td</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3025"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv -&gt; CCallConv
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv
</span><a href="#local-6989586621682769236"><span class="hs-identifier hs-var">cconv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3026"></span><span>      </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#CCallConv"><span class="hs-identifier hs-var">CCallConv</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769247"><span class="hs-identifier hs-var">returnSpec</span></a></span><span> </span><span class="annot"><span class="annottext">(ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs))
-&gt; P (ForeignImport GhcPs) -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">P (ForeignImport GhcPs)
</span><a href="#local-6989586621682769248"><span class="hs-identifier hs-var">mkCImport</span></a></span><span>
</span><span id="line-3027"></span><span>      </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#CApiConv"><span class="hs-identifier hs-var">CApiConv</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3028"></span><span>        </span><span id="local-6989586621682769250"><span class="annot"><a href="#local-6989586621682769250"><span class="hs-identifier hs-var">imp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">P (ForeignImport GhcPs)
</span><a href="#local-6989586621682769248"><span class="hs-identifier hs-var">mkCImport</span></a></span><span>
</span><span id="line-3029"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682769251"><span class="hs-identifier hs-type">isCWrapperImport</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769250"><span class="hs-identifier hs-type">imp</span></a></span><span>
</span><span id="line-3030"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-type">addFatalError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769238"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrInvalidCApiImport"><span class="hs-identifier hs-type">PsErrInvalidCApiImport</span></a></span><span>
</span><span id="line-3031"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682769247"><span class="hs-identifier hs-type">returnSpec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769250"><span class="hs-identifier hs-type">imp</span></a></span><span>
</span><span id="line-3032"></span><span>      </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#StdCallConv"><span class="hs-identifier hs-var">StdCallConv</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769247"><span class="hs-identifier hs-var">returnSpec</span></a></span><span> </span><span class="annot"><span class="annottext">(ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs))
-&gt; P (ForeignImport GhcPs) -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">P (ForeignImport GhcPs)
</span><a href="#local-6989586621682769248"><span class="hs-identifier hs-var">mkCImport</span></a></span><span>
</span><span id="line-3033"></span><span>      </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#PrimCallConv"><span class="hs-identifier hs-var">PrimCallConv</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769255"><span class="hs-identifier hs-var">mkOtherImport</span></a></span><span>
</span><span id="line-3034"></span><span>      </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#JavaScriptCallConv"><span class="hs-identifier hs-var">JavaScriptCallConv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769255"><span class="hs-identifier hs-var">mkOtherImport</span></a></span><span>
</span><span id="line-3035"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3036"></span><span>    </span><span class="hs-comment">-- Parse a C-like entity string of the following form:</span><span>
</span><span id="line-3037"></span><span>    </span><span class="hs-comment">--   &quot;[static] [chname] [&amp;] [cid]&quot; | &quot;dynamic&quot; | &quot;wrapper&quot;</span><span>
</span><span id="line-3038"></span><span>    </span><span class="hs-comment">-- If 'cid' is missing, the function name 'v' is used instead as symbol</span><span>
</span><span id="line-3039"></span><span>    </span><span class="hs-comment">-- name (cf section 8.5.1 in Haskell 2010 report).</span><span>
</span><span id="line-3040"></span><span>    </span><span id="local-6989586621682769248"><span class="annot"><span class="annottext">mkCImport :: P (ForeignImport GhcPs)
</span><a href="#local-6989586621682769248"><span class="hs-identifier hs-var hs-var">mkCImport</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3041"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769257"><span class="annot"><span class="annottext">e :: String
</span><a href="#local-6989586621682769257"><span class="hs-identifier hs-var hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769241"><span class="hs-identifier hs-var">entity</span></a></span><span>
</span><span id="line-3042"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocatedE CCallConv
-&gt; LocatedE Safety
-&gt; FastString
-&gt; String
-&gt; Located SourceText
-&gt; Maybe (ForeignImport GhcPs)
forall (p :: Pass).
LocatedE CCallConv
-&gt; LocatedE Safety
-&gt; FastString
-&gt; String
-&gt; Located SourceText
-&gt; Maybe (ForeignImport (GhcPass p))
</span><a href="GHC.Parser.PostProcess.html#parseCImport"><span class="hs-identifier hs-var">parseCImport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv -&gt; LocatedE CCallConv
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv
</span><a href="#local-6989586621682769236"><span class="hs-identifier hs-var">cconv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan Safety -&gt; LocatedE Safety
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Safety
</span><a href="#local-6989586621682769237"><span class="hs-identifier hs-var">safety</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier hs-var">mkExtName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769242"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769257"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SourceText -&gt; Located SourceText
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769238"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769240"><span class="hs-identifier hs-var">esrc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3043"></span><span>        </span><span class="annot"><span class="annottext">Maybe (ForeignImport GhcPs)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (ForeignImport GhcPs)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (ForeignImport GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; P (ForeignImport GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769238"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3044"></span><span>                             </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrMalformedEntityString"><span class="hs-identifier hs-var">PsErrMalformedEntityString</span></a></span><span>
</span><span id="line-3045"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682769259"><span class="annot"><span class="annottext">ForeignImport GhcPs
</span><a href="#local-6989586621682769259"><span class="hs-identifier hs-var">importSpec</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs -&gt; P (ForeignImport GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs
</span><a href="#local-6989586621682769259"><span class="hs-identifier hs-var">importSpec</span></a></span><span>
</span><span id="line-3046"></span><span>
</span><span id="line-3047"></span><span>    </span><span id="local-6989586621682769251"><span class="annot"><span class="annottext">isCWrapperImport :: ForeignImport pass -&gt; Bool
</span><a href="#local-6989586621682769251"><span class="hs-identifier hs-var hs-var">isCWrapperImport</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CImport"><span class="hs-identifier hs-type">CImport</span></a></span><span> </span><span class="annot"><span class="annottext">XCImport pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec pass CCallConv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">XRec pass Safety
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Header
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CWrapper"><span class="hs-identifier hs-var">CWrapper</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3048"></span><span>    </span><span class="annot"><a href="#local-6989586621682769251"><span class="hs-identifier hs-var">isCWrapperImport</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignImport pass
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-3049"></span><span>
</span><span id="line-3050"></span><span>    </span><span class="hs-comment">-- currently, all the other import conventions only support a symbol name in</span><span>
</span><span id="line-3051"></span><span>    </span><span class="hs-comment">-- the entity string. If it is missing, we use the function name instead.</span><span>
</span><span id="line-3052"></span><span>    </span><span id="local-6989586621682769255"><span class="annot"><span class="annottext">mkOtherImport :: P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769255"><span class="hs-identifier hs-var hs-var">mkOtherImport</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769247"><span class="hs-identifier hs-var">returnSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs
</span><a href="#local-6989586621682769262"><span class="hs-identifier hs-var">importSpec</span></a></span><span>
</span><span id="line-3053"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-3054"></span><span>        </span><span id="local-6989586621682769263"><span class="annot"><span class="annottext">entity' :: FastString
</span><a href="#local-6989586621682769263"><span class="hs-identifier hs-var hs-var">entity'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Bool
</span><a href="GHC.Data.FastString.html#nullFS"><span class="hs-identifier hs-var">nullFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769241"><span class="hs-identifier hs-var">entity</span></a></span><span>
</span><span id="line-3055"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier hs-var">mkExtName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769242"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3056"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769241"><span class="hs-identifier hs-var">entity</span></a></span><span>
</span><span id="line-3057"></span><span>        </span><span id="local-6989586621682769265"><span class="annot"><span class="annottext">funcTarget :: CImportSpec
</span><a href="#local-6989586621682769265"><span class="hs-identifier hs-var hs-var">funcTarget</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CCallTarget -&gt; CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CFunction"><span class="hs-identifier hs-var">CFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; Maybe Unit -&gt; Bool -&gt; CCallTarget
</span><a href="GHC.Types.ForeignCall.html#StaticTarget"><span class="hs-identifier hs-var">StaticTarget</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769240"><span class="hs-identifier hs-var">esrc</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769263"><span class="hs-identifier hs-var">entity'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Unit
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-3058"></span><span>        </span><span id="local-6989586621682769262"><span class="annot"><span class="annottext">importSpec :: ForeignImport GhcPs
</span><a href="#local-6989586621682769262"><span class="hs-identifier hs-var hs-var">importSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCImport GhcPs
-&gt; XRec GhcPs CCallConv
-&gt; XRec GhcPs Safety
-&gt; Maybe Header
-&gt; CImportSpec
-&gt; ForeignImport GhcPs
forall pass.
XCImport pass
-&gt; XRec pass CCallConv
-&gt; XRec pass Safety
-&gt; Maybe Header
-&gt; CImportSpec
-&gt; ForeignImport pass
</span><a href="Language.Haskell.Syntax.Decls.html#CImport"><span class="hs-identifier hs-var">CImport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; SourceText -&gt; GenLocated EpaLocation SourceText
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769238"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769240"><span class="hs-identifier hs-var">esrc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv -&gt; LocatedE CCallConv
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan CCallConv
</span><a href="#local-6989586621682769236"><span class="hs-identifier hs-var">cconv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan Safety -&gt; LocatedE Safety
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan Safety
</span><a href="#local-6989586621682769237"><span class="hs-identifier hs-var">safety</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Header
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621682769265"><span class="hs-identifier hs-var">funcTarget</span></a></span><span>
</span><span id="line-3059"></span><span>
</span><span id="line-3060"></span><span>    </span><span id="local-6989586621682769247"><span class="annot"><span class="annottext">returnSpec :: ForeignImport GhcPs -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="#local-6989586621682769247"><span class="hs-identifier hs-var hs-var">returnSpec</span></a></span></span><span> </span><span id="local-6989586621682769268"><span class="annot"><span class="annottext">ForeignImport GhcPs
</span><a href="#local-6989586621682769268"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
 -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs))
-&gt; (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769269"><span class="annot"><span class="annottext">EpToken &quot;foreign&quot;
</span><a href="#local-6989586621682769269"><span class="hs-identifier hs-var">tforeign</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XForD GhcPs -&gt; ForeignDecl GhcPs -&gt; HsDecl GhcPs
forall p. XForD p -&gt; ForeignDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#ForD"><span class="hs-identifier hs-var">ForD</span></a></span><span> </span><span class="annot"><span class="annottext">XForD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(ForeignDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; ForeignDecl GhcPs -&gt; HsDecl GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span>
</span><span id="line-3061"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_i_ext :: XForeignImport GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_i_ext"><span class="hs-identifier hs-var">fd_i_ext</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;foreign&quot;
</span><a href="#local-6989586621682769269"><span class="hs-identifier hs-var">tforeign</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;import&quot;
</span><a href="#local-6989586621682769244"><span class="hs-identifier hs-var">timport</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682769245"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3062"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_name :: XRec GhcPs (IdP GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769242"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-3063"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682769243"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3064"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fi :: ForeignImport GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fi"><span class="hs-identifier hs-var">fd_fi</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignImport GhcPs
</span><a href="#local-6989586621682769268"><span class="hs-identifier hs-var">spec</span></a></span><span>
</span><span id="line-3065"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-3066"></span><span>
</span><span id="line-3067"></span><span>
</span><span id="line-3068"></span><span>
</span><span id="line-3069"></span><span class="hs-comment">-- the string &quot;foo&quot; is ambiguous: either a header or a C identifier.  The</span><span>
</span><span id="line-3070"></span><span class="hs-comment">-- C identifier case comes first in the alternatives below, so we pick</span><span>
</span><span id="line-3071"></span><span class="hs-comment">-- that one.</span><span>
</span><span id="line-3072"></span><span id="local-6989586621682764940"><span class="annot"><a href="GHC.Parser.PostProcess.html#parseCImport"><span class="hs-identifier hs-type">parseCImport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedE"><span class="hs-identifier hs-type">LocatedE</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallConv"><span class="hs-identifier hs-type">CCallConv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedE"><span class="hs-identifier hs-type">LocatedE</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#Safety"><span class="hs-identifier hs-type">Safety</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-3073"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span>
</span><span id="line-3074"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignImport"><span class="hs-identifier hs-type">ForeignImport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPass"><span class="hs-identifier hs-type">GhcPass</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764940"><span class="hs-identifier hs-type">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-3075"></span><span id="parseCImport"><span class="annot"><span class="annottext">parseCImport :: forall (p :: Pass).
LocatedE CCallConv
-&gt; LocatedE Safety
-&gt; FastString
-&gt; String
-&gt; Located SourceText
-&gt; Maybe (ForeignImport (GhcPass p))
</span><a href="GHC.Parser.PostProcess.html#parseCImport"><span class="hs-identifier hs-var hs-var">parseCImport</span></a></span></span><span> </span><span id="local-6989586621682769314"><span class="annot"><span class="annottext">LocatedE CCallConv
</span><a href="#local-6989586621682769314"><span class="hs-identifier hs-var">cconv</span></a></span></span><span> </span><span id="local-6989586621682769315"><span class="annot"><span class="annottext">LocatedE Safety
</span><a href="#local-6989586621682769315"><span class="hs-identifier hs-var">safety</span></a></span></span><span> </span><span id="local-6989586621682769316"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769316"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621682769317"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769317"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621682769318"><span class="annot"><span class="annottext">Located SourceText
</span><a href="#local-6989586621682769318"><span class="hs-identifier hs-var">sourceText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3076"></span><span> </span><span class="annot"><span class="annottext">[ForeignImport (GhcPass p)] -&gt; Maybe (ForeignImport (GhcPass p))
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">([ForeignImport (GhcPass p)] -&gt; Maybe (ForeignImport (GhcPass p)))
-&gt; [ForeignImport (GhcPass p)] -&gt; Maybe (ForeignImport (GhcPass p))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((ForeignImport (GhcPass p), String) -&gt; ForeignImport (GhcPass p))
-&gt; [(ForeignImport (GhcPass p), String)]
-&gt; [ForeignImport (GhcPass p)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(ForeignImport (GhcPass p), String) -&gt; ForeignImport (GhcPass p)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">([(ForeignImport (GhcPass p), String)]
 -&gt; [ForeignImport (GhcPass p)])
-&gt; [(ForeignImport (GhcPass p), String)]
-&gt; [ForeignImport (GhcPass p)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((ForeignImport (GhcPass p), String) -&gt; Bool)
-&gt; [(ForeignImport (GhcPass p), String)]
-&gt; [(ForeignImport (GhcPass p), String)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span class="annot"><span class="annottext">(String -&gt; Bool)
-&gt; ((ForeignImport (GhcPass p), String) -&gt; String)
-&gt; (ForeignImport (GhcPass p), String)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(ForeignImport (GhcPass p), String) -&gt; String
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(ForeignImport (GhcPass p), String)]
 -&gt; [(ForeignImport (GhcPass p), String)])
-&gt; [(ForeignImport (GhcPass p), String)]
-&gt; [(ForeignImport (GhcPass p), String)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3077"></span><span>     </span><span class="annot"><span class="annottext">ReadP (ForeignImport (GhcPass p))
-&gt; ReadS (ForeignImport (GhcPass p))
forall a. ReadP a -&gt; ReadS a
</span><span class="hs-identifier hs-var">readP_to_S</span></span><span> </span><span class="annot"><span class="annottext">ReadP (ForeignImport (GhcPass p))
</span><a href="#local-6989586621682769322"><span class="hs-identifier hs-var">parse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769317"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-3078"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3079"></span><span>   </span><span id="local-6989586621682769322"><span class="annot"><span class="annottext">parse :: ReadP (ForeignImport (GhcPass p))
</span><a href="#local-6989586621682769322"><span class="hs-identifier hs-var hs-var">parse</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3080"></span><span>       </span><span class="annot"><span class="annottext">ReadP ()
</span><span class="hs-identifier hs-var">skipSpaces</span></span><span>
</span><span id="line-3081"></span><span>       </span><span id="local-6989586621682769324"><span class="annot"><a href="#local-6989586621682769324"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[ReadP (ForeignImport (GhcPass p))]
-&gt; ReadP (ForeignImport (GhcPass p))
forall a. [ReadP a] -&gt; ReadP a
</span><span class="hs-identifier hs-var">choice</span></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-3082"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ReadP String
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dynamic&quot;</span></span><span> </span><span class="annot"><span class="annottext">ReadP String
-&gt; ReadP (ForeignImport (GhcPass p))
-&gt; ReadP (ForeignImport (GhcPass p))
forall a b. ReadP a -&gt; ReadP b -&gt; ReadP b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ForeignImport (GhcPass p) -&gt; ReadP (ForeignImport (GhcPass p))
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Header -&gt; CImportSpec -&gt; ForeignImport (GhcPass p)
</span><a href="#local-6989586621682769327"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Header
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CCallTarget -&gt; CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CFunction"><span class="hs-identifier hs-var">CFunction</span></a></span><span> </span><span class="annot"><span class="annottext">CCallTarget
</span><a href="GHC.Types.ForeignCall.html#DynamicTarget"><span class="hs-identifier hs-var">DynamicTarget</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3083"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ReadP String
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wrapper&quot;</span></span><span> </span><span class="annot"><span class="annottext">ReadP String
-&gt; ReadP (ForeignImport (GhcPass p))
-&gt; ReadP (ForeignImport (GhcPass p))
forall a b. ReadP a -&gt; ReadP b -&gt; ReadP b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ForeignImport (GhcPass p) -&gt; ReadP (ForeignImport (GhcPass p))
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Header -&gt; CImportSpec -&gt; ForeignImport (GhcPass p)
</span><a href="#local-6989586621682769327"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Header
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CWrapper"><span class="hs-identifier hs-var">CWrapper</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-3084"></span><span>          </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">ReadP () -&gt; ReadP ()
forall a. ReadP a -&gt; ReadP ()
</span><span class="hs-identifier hs-var">optional</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ReadP ()
</span><a href="#local-6989586621682769330"><span class="hs-identifier hs-var">token</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;static&quot;</span></span><span> </span><span class="annot"><span class="annottext">ReadP () -&gt; ReadP () -&gt; ReadP ()
forall a b. ReadP a -&gt; ReadP b -&gt; ReadP b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReadP ()
</span><span class="hs-identifier hs-var">skipSpaces</span></span><span class="hs-special">)</span><span>
</span><span id="line-3085"></span><span>             </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Header -&gt; CImportSpec -&gt; ForeignImport (GhcPass p)
</span><a href="#local-6989586621682769327"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Header
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(CImportSpec -&gt; ForeignImport (GhcPass p))
-&gt; ReadP CImportSpec -&gt; ReadP (ForeignImport (GhcPass p))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ReadP CImportSpec
</span><a href="#local-6989586621682769331"><span class="hs-identifier hs-var">cimp</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769316"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ReadP (ForeignImport (GhcPass p))
-&gt; ReadP (ForeignImport (GhcPass p))
-&gt; ReadP (ForeignImport (GhcPass p))
forall a. ReadP a -&gt; ReadP a -&gt; ReadP a
</span><span class="hs-operator hs-var">+++</span></span><span>
</span><span id="line-3086"></span><span>              </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682769333"><span class="annot"><a href="#local-6989586621682769333"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ReadP String
</span><span class="hs-identifier hs-var">munch1</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621682769335"><span class="hs-identifier hs-var">hdr_char</span></a></span><span>
</span><span id="line-3087"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">skipSpaces</span></span><span>
</span><span id="line-3088"></span><span>                  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769336"><span class="annot"><a href="#local-6989586621682769336"><span class="hs-identifier hs-var hs-var">src</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#mkFastString"><span class="hs-identifier hs-var">mkFastString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769333"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-3089"></span><span>                  </span><span class="annot"><a href="#local-6989586621682769327"><span class="hs-identifier hs-type">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignCall.html#Header"><span class="hs-identifier hs-type">Header</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769336"><span class="hs-identifier hs-type">src</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682769336"><span class="hs-identifier hs-type">src</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3090"></span><span>                      </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682769331"><span class="hs-identifier hs-type">cimp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769316"><span class="hs-identifier hs-type">nm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3091"></span><span>         </span><span class="hs-special">]</span><span>
</span><span id="line-3092"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">skipSpaces</span></span><span>
</span><span id="line-3093"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><a href="#local-6989586621682769324"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-3094"></span><span>
</span><span id="line-3095"></span><span>   </span><span id="local-6989586621682769330"><span class="annot"><span class="annottext">token :: String -&gt; ReadP ()
</span><a href="#local-6989586621682769330"><span class="hs-identifier hs-var hs-var">token</span></a></span></span><span> </span><span id="local-6989586621682769343"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769343"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; ReadP String
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621682769343"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-3096"></span><span>                  </span><span id="local-6989586621682769344"><span class="annot"><a href="#local-6989586621682769344"><span class="hs-identifier hs-var">toks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">look</span></span><span>
</span><span id="line-3097"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621682769344"><span class="hs-identifier hs-type">toks</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3098"></span><span>                      </span><span id="local-6989586621682769346"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769346"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-3099"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621682769347"><span class="hs-identifier hs-var">id_char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769346"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReadP ()
forall a. ReadP a
</span><span class="hs-identifier hs-var">pfail</span></span><span>
</span><span id="line-3100"></span><span>                      </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ReadP ()
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3101"></span><span>
</span><span id="line-3102"></span><span>   </span><span id="local-6989586621682769327"><span class="annot"><span class="annottext">mk :: Maybe Header -&gt; CImportSpec -&gt; ForeignImport (GhcPass p)
</span><a href="#local-6989586621682769327"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span id="local-6989586621682769349"><span class="annot"><span class="annottext">Maybe Header
</span><a href="#local-6989586621682769349"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621682769350"><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621682769350"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCImport (GhcPass p)
-&gt; XRec (GhcPass p) CCallConv
-&gt; XRec (GhcPass p) Safety
-&gt; Maybe Header
-&gt; CImportSpec
-&gt; ForeignImport (GhcPass p)
forall pass.
XCImport pass
-&gt; XRec pass CCallConv
-&gt; XRec pass Safety
-&gt; Maybe Header
-&gt; CImportSpec
-&gt; ForeignImport pass
</span><a href="Language.Haskell.Syntax.Decls.html#CImport"><span class="hs-identifier hs-var">CImport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located SourceText -&gt; GenLocated EpaLocation SourceText
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located SourceText
</span><a href="#local-6989586621682769318"><span class="hs-identifier hs-var">sourceText</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedE CCallConv -&gt; LocatedE CCallConv
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedE CCallConv
</span><a href="#local-6989586621682769314"><span class="hs-identifier hs-var">cconv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedE Safety -&gt; LocatedE Safety
forall a e b.
(HasLoc (GenLocated a e), HasAnnotation b) =&gt;
GenLocated a e -&gt; GenLocated b e
</span><a href="GHC.Parser.Annotation.html#reLoc"><span class="hs-identifier hs-var">reLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedE Safety
</span><a href="#local-6989586621682769315"><span class="hs-identifier hs-var">safety</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Header
</span><a href="#local-6989586621682769349"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">CImportSpec
</span><a href="#local-6989586621682769350"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-3103"></span><span>
</span><span id="line-3104"></span><span>   </span><span id="local-6989586621682769335"><span class="annot"><span class="annottext">hdr_char :: Char -&gt; Bool
</span><a href="#local-6989586621682769335"><span class="hs-identifier hs-var hs-var">hdr_char</span></a></span></span><span> </span><span id="local-6989586621682769351"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769351"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769351"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3105"></span><span>   </span><span class="hs-comment">-- header files are filenames, which can contain</span><span>
</span><span id="line-3106"></span><span>   </span><span class="hs-comment">-- pretty much any char (depending on the platform),</span><span>
</span><span id="line-3107"></span><span>   </span><span class="hs-comment">-- so just accept any non-space character</span><span>
</span><span id="line-3108"></span><span>   </span><span id="local-6989586621682769355"><span class="annot"><span class="annottext">id_first_char :: Char -&gt; Bool
</span><a href="#local-6989586621682769355"><span class="hs-identifier hs-var hs-var">id_first_char</span></a></span></span><span> </span><span id="local-6989586621682769356"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769356"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAlpha</span></span><span>    </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769356"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769356"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span>
</span><span id="line-3109"></span><span>   </span><span id="local-6989586621682769347"><span class="annot"><span class="annottext">id_char :: Char -&gt; Bool
</span><a href="#local-6989586621682769347"><span class="hs-identifier hs-var hs-var">id_char</span></a></span></span><span>       </span><span id="local-6989586621682769359"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769359"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isAlphaNum</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769359"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621682769359"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span>
</span><span id="line-3110"></span><span>
</span><span id="line-3111"></span><span>   </span><span id="local-6989586621682769331"><span class="annot"><span class="annottext">cimp :: FastString -&gt; ReadP CImportSpec
</span><a href="#local-6989586621682769331"><span class="hs-identifier hs-var hs-var">cimp</span></a></span></span><span> </span><span id="local-6989586621682769361"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769361"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; ReadP Char
</span><span class="hs-identifier hs-var">ReadP.char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&amp;'</span></span><span> </span><span class="annot"><span class="annottext">ReadP Char -&gt; ReadP () -&gt; ReadP ()
forall a b. ReadP a -&gt; ReadP b -&gt; ReadP b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReadP ()
</span><span class="hs-identifier hs-var">skipSpaces</span></span><span> </span><span class="annot"><span class="annottext">ReadP () -&gt; ReadP CImportSpec -&gt; ReadP CImportSpec
forall a b. ReadP a -&gt; ReadP b -&gt; ReadP b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; CImportSpec
</span><a href="Language.Haskell.Syntax.Decls.html#CLabel"><span class="hs-identifier hs-var">CLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; CImportSpec)
-&gt; ReadP FastString -&gt; ReadP CImportSpec
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ReadP FastString
</span><a href="#local-6989586621682769364"><span class="hs-identifier hs-var">cid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3112"></span><span>             </span><span class="annot"><span class="annottext">ReadP CImportSpec -&gt; ReadP CImportSpec -&gt; ReadP CImportSpec
forall a. ReadP a -&gt; ReadP a -&gt; ReadP a
</span><span class="hs-operator hs-var">+++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682769365"><span class="annot"><a href="#local-6989586621682769365"><span class="hs-identifier hs-var">isFun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LocatedE CCallConv -&gt; CCallConv
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedE CCallConv
</span><a href="#local-6989586621682769314"><span class="hs-identifier hs-var">cconv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3113"></span><span>                               </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#CApiConv"><span class="hs-identifier hs-var">CApiConv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3114"></span><span>                                  </span><span class="annot"><span class="annottext">Bool -&gt; ReadP Bool -&gt; ReadP Bool
forall a. a -&gt; ReadP a -&gt; ReadP a
</span><span class="hs-identifier hs-var">option</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3115"></span><span>                                         </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">String -&gt; ReadP ()
</span><a href="#local-6989586621682769330"><span class="hs-identifier hs-var">token</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;value&quot;</span></span><span>
</span><span id="line-3116"></span><span>                                             </span><span class="annot"><span class="annottext">ReadP ()
</span><span class="hs-identifier hs-var">skipSpaces</span></span><span>
</span><span id="line-3117"></span><span>                                             </span><span class="annot"><span class="annottext">Bool -&gt; ReadP Bool
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-3118"></span><span>                               </span><span class="annot"><span class="annottext">CCallConv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ReadP Bool
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3119"></span><span>                     </span><span id="local-6989586621682769367"><span class="annot"><a href="#local-6989586621682769367"><span class="hs-identifier hs-var">cid'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682769364"><span class="hs-identifier hs-type">cid</span></a></span><span>
</span><span id="line-3120"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#CFunction"><span class="hs-identifier hs-type">CFunction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.ForeignCall.html#StaticTarget"><span class="hs-identifier hs-type">StaticTarget</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#NoSourceText"><span class="hs-identifier hs-type">NoSourceText</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769367"><span class="hs-identifier hs-type">cid'</span></a></span><span>
</span><span id="line-3121"></span><span>                                        </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621682769365"><span class="hs-identifier hs-type">isFun</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3122"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-3123"></span><span>            </span><span id="local-6989586621682769364"><span class="annot"><span class="annottext">cid :: ReadP FastString
</span><a href="#local-6989586621682769364"><span class="hs-identifier hs-var hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ReadP FastString
forall a. a -&gt; ReadP a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769361"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">ReadP FastString -&gt; ReadP FastString -&gt; ReadP FastString
forall a. ReadP a -&gt; ReadP a -&gt; ReadP a
</span><span class="hs-operator hs-var">+++</span></span><span>
</span><span id="line-3124"></span><span>                  </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682769368"><span class="annot"><a href="#local-6989586621682769368"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; ReadP Char
</span><span class="hs-identifier hs-var">satisfy</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621682769355"><span class="hs-identifier hs-var">id_first_char</span></a></span><span>
</span><span id="line-3125"></span><span>                      </span><span id="local-6989586621682769370"><span class="annot"><a href="#local-6989586621682769370"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">many</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">satisfy</span></span><span> </span><span class="annot"><a href="#local-6989586621682769347"><span class="hs-identifier hs-type">id_char</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3126"></span><span>                      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#mkFastString"><span class="hs-identifier hs-type">mkFastString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682769368"><span class="hs-identifier hs-type">c</span></a></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><a href="#local-6989586621682769370"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3127"></span><span>
</span><span id="line-3128"></span><span>
</span><span id="line-3129"></span><span class="hs-comment">-- construct a foreign export declaration</span><span>
</span><span id="line-3130"></span><span class="hs-comment">--</span><span>
</span><span id="line-3131"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkExport"><span class="hs-identifier hs-type">mkExport</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CCallConv"><span class="hs-identifier hs-type">CCallConv</span></a></span><span>
</span><span id="line-3132"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsSigType"><span class="hs-identifier hs-type">LHsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3133"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;export&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokDcolon"><span class="hs-identifier hs-type">TokDcolon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3134"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;foreign&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDecl"><span class="hs-identifier hs-type">HsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3135"></span><span id="mkExport"><span class="annot"><span class="annottext">mkExport :: GenLocated SrcSpan CCallConv
-&gt; (Located StringLiteral, LocatedN RdrName, LHsSigType GhcPs)
-&gt; (EpToken &quot;export&quot;, TokDcolon)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkExport"><span class="hs-identifier hs-var hs-var">mkExport</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769372"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769372"><span class="hs-identifier hs-var">lc</span></a></span></span><span> </span><span id="local-6989586621682769373"><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621682769373"><span class="hs-identifier hs-var">cconv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769374"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769374"><span class="hs-identifier hs-var">le</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#StringLiteral"><span class="hs-identifier hs-type">StringLiteral</span></a></span><span> </span><span id="local-6989586621682769375"><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769375"><span class="hs-identifier hs-var">esrc</span></a></span></span><span> </span><span id="local-6989586621682769376"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769376"><span class="hs-identifier hs-var">entity</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe NoCommentsLocation
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769377"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769377"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769378"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682769378"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769379"><span class="annot"><span class="annottext">EpToken &quot;export&quot;
</span><a href="#local-6989586621682769379"><span class="hs-identifier hs-var">texport</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769380"><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682769380"><span class="hs-identifier hs-var">td</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-3136"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
 -&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs))
-&gt; (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
-&gt; P (EpToken &quot;foreign&quot; -&gt; HsDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769381"><span class="annot"><span class="annottext">EpToken &quot;foreign&quot;
</span><a href="#local-6989586621682769381"><span class="hs-identifier hs-var">tforeign</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XForD GhcPs -&gt; ForeignDecl GhcPs -&gt; HsDecl GhcPs
forall p. XForD p -&gt; ForeignDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#ForD"><span class="hs-identifier hs-var">ForD</span></a></span><span> </span><span class="annot"><span class="annottext">XForD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(ForeignDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; ForeignDecl GhcPs -&gt; HsDecl GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3137"></span><span>   </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForeignExport"><span class="hs-identifier hs-type">ForeignExport</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fd_e_ext :: XForeignExport GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_e_ext"><span class="hs-identifier hs-var">fd_e_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;foreign&quot;
</span><a href="#local-6989586621682769381"><span class="hs-identifier hs-var">tforeign</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;export&quot;
</span><a href="#local-6989586621682769379"><span class="hs-identifier hs-var">texport</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokDcolon
</span><a href="#local-6989586621682769380"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_name :: XRec GhcPs (IdP GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769377"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_sig_ty :: LHsSigType GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621682769378"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-3138"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fd_fe :: ForeignExport GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#fd_fe"><span class="hs-identifier hs-var">fd_fe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XCExport GhcPs -&gt; XRec GhcPs CExportSpec -&gt; ForeignExport GhcPs
forall pass.
XCExport pass -&gt; XRec pass CExportSpec -&gt; ForeignExport pass
</span><a href="Language.Haskell.Syntax.Decls.html#CExport"><span class="hs-identifier hs-var">CExport</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; SourceText -&gt; GenLocated EpaLocation SourceText
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769374"><span class="hs-identifier hs-var">le</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769375"><span class="hs-identifier hs-var">esrc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; CExportSpec -&gt; GenLocated EpaLocation CExportSpec
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a b. (HasLoc a, HasAnnotation b) =&gt; a -&gt; b
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769372"><span class="hs-identifier hs-var">lc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceText -&gt; FastString -&gt; CCallConv -&gt; CExportSpec
</span><a href="GHC.Types.ForeignCall.html#CExportStatic"><span class="hs-identifier hs-var">CExportStatic</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><a href="#local-6989586621682769375"><span class="hs-identifier hs-var">esrc</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769387"><span class="hs-identifier hs-var">entity'</span></a></span><span> </span><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621682769373"><span class="hs-identifier hs-var">cconv</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3139"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3140"></span><span>    </span><span id="local-6989586621682769387"><span class="annot"><span class="annottext">entity' :: FastString
</span><a href="#local-6989586621682769387"><span class="hs-identifier hs-var hs-var">entity'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Bool
</span><a href="GHC.Data.FastString.html#nullFS"><span class="hs-identifier hs-var">nullFS</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769376"><span class="hs-identifier hs-var">entity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RdrName -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier hs-var">mkExtName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769377"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3141"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621682769376"><span class="hs-identifier hs-var">entity</span></a></span><span>
</span><span id="line-3142"></span><span>
</span><span id="line-3143"></span><span class="hs-comment">-- Supplying the ext_name in a foreign decl is optional; if it</span><span>
</span><span id="line-3144"></span><span class="hs-comment">-- isn't there, the Haskell name is assumed. Note that no transformation</span><span>
</span><span id="line-3145"></span><span class="hs-comment">-- of the Haskell name is then performed, so if you foreign export (++),</span><span>
</span><span id="line-3146"></span><span class="hs-comment">-- it's external name will be &quot;++&quot;. Too bad; it's important because we don't</span><span>
</span><span id="line-3147"></span><span class="hs-comment">-- want z-encoding (e.g. names with z's in them shouldn't be doubled)</span><span>
</span><span id="line-3148"></span><span class="hs-comment">--</span><span>
</span><span id="line-3149"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier hs-type">mkExtName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html#CLabelString"><span class="hs-identifier hs-type">CLabelString</span></a></span><span>
</span><span id="line-3150"></span><span id="mkExtName"><span class="annot"><span class="annottext">mkExtName :: RdrName -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#mkExtName"><span class="hs-identifier hs-var hs-var">mkExtName</span></a></span></span><span> </span><span id="local-6989586621682769389"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769389"><span class="hs-identifier hs-var">rdrNm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; OccName
</span><a href="GHC.Types.Name.Reader.html#rdrNameOcc"><span class="hs-identifier hs-var">rdrNameOcc</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769389"><span class="hs-identifier hs-var">rdrNm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3151"></span><span>
</span><span id="line-3152"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-3153"></span><span class="hs-comment">-- Help with module system imports/exports</span><span>
</span><span id="line-3154"></span><span>
</span><span id="line-3155"></span><span class="hs-keyword">data</span><span> </span><span id="ImpExpSubSpec"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpSubSpec"><span class="hs-identifier hs-var">ImpExpSubSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpExpAbs"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpAbs"><span class="hs-identifier hs-var">ImpExpAbs</span></a></span></span><span>
</span><span id="line-3156"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="ImpExpAll"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpAll"><span class="hs-identifier hs-var">ImpExpAll</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;..&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3157"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="ImpExpList"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpList"><span class="hs-identifier hs-var">ImpExpList</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3158"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="ImpExpAllWith"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpAllWith"><span class="hs-identifier hs-var">ImpExpAllWith</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3159"></span><span>
</span><span id="line-3160"></span><span class="hs-keyword">data</span><span> </span><span id="ImpExpQcSpec"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-var">ImpExpQcSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpExpQcName"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcName"><span class="hs-identifier hs-var">ImpExpQcName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3161"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="ImpExpQcType"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcType"><span class="hs-identifier hs-var">ImpExpQcType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;type&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3162"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="ImpExpQcWildcard"><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-var">ImpExpQcWildcard</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;..&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;,&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3163"></span><span>
</span><span id="line-3164"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkModuleImpExp"><span class="hs-identifier hs-type">mkModuleImpExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Warnings.html#LWarningTxt"><span class="hs-identifier hs-type">LWarningTxt</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span>
</span><span id="line-3165"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpSubSpec"><span class="hs-identifier hs-type">ImpExpSubSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IE"><span class="hs-identifier hs-type">IE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3166"></span><span id="mkModuleImpExp"><span class="annot"><span class="annottext">mkModuleImpExp :: Maybe (LWarningTxt GhcPs)
-&gt; (EpToken &quot;(&quot;, EpToken &quot;)&quot;)
-&gt; LocatedA ImpExpQcSpec
-&gt; ImpExpSubSpec
-&gt; P (IE GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkModuleImpExp"><span class="hs-identifier hs-var hs-var">mkModuleImpExp</span></a></span></span><span> </span><span id="local-6989586621682769397"><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769398"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769398"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769399"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769399"><span class="hs-identifier hs-var">tcp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769400"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769401"><span class="annot"><span class="annottext">ImpExpQcSpec
</span><a href="#local-6989586621682769401"><span class="hs-identifier hs-var">specname</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769402"><span class="annot"><span class="annottext">ImpExpSubSpec
</span><a href="#local-6989586621682769402"><span class="hs-identifier hs-var">subs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3167"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ImpExpSubSpec
</span><a href="#local-6989586621682769402"><span class="hs-identifier hs-var">subs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3168"></span><span>    </span><span class="annot"><span class="annottext">ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#ImpExpAbs"><span class="hs-identifier hs-var">ImpExpAbs</span></a></span><span>
</span><span id="line-3169"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isVarNameSpace"><span class="hs-identifier hs-var">isVarNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#rdrNameSpace"><span class="hs-identifier hs-var">rdrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769405"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3170"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IE GhcPs -&gt; P (IE GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(IE GhcPs -&gt; P (IE GhcPs)) -&gt; IE GhcPs -&gt; P (IE GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XIEVar GhcPs
-&gt; LIEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs
forall pass.
XIEVar pass
-&gt; LIEWrappedName pass -&gt; Maybe (ExportDoc pass) -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEVar"><span class="hs-identifier hs-var">IEVar</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
XIEVar GhcPs
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span><span>
</span><span id="line-3171"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; IEWrappedName GhcPs
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; IEWrappedName GhcPs
</span><a href="#local-6989586621682769407"><span class="hs-identifier hs-var">ieNameFromSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec
</span><a href="#local-6989586621682769401"><span class="hs-identifier hs-var">specname</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-3172"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XIEThingAbs GhcPs
-&gt; LIEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs
forall pass.
XIEThingAbs pass
-&gt; LIEWrappedName pass -&gt; Maybe (ExportDoc pass) -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEThingAbs"><span class="hs-identifier hs-var">IEThingAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
XIEThingAbs GhcPs
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
 -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; (IEWrappedName GhcPs
    -&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs))
-&gt; IEWrappedName GhcPs
-&gt; Maybe (LHsDoc GhcPs)
-&gt; IE GhcPs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; IEWrappedName GhcPs
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(IEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (IEWrappedName GhcPs) -&gt; P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">P (IEWrappedName GhcPs)
</span><a href="#local-6989586621682769409"><span class="hs-identifier hs-var">nameT</span></a></span><span> </span><span class="annot"><span class="annottext">P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (Maybe (LHsDoc GhcPs)) -&gt; P (IE GhcPs)
forall a b. P (a -&gt; b) -&gt; P a -&gt; P b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs) -&gt; P (Maybe (LHsDoc GhcPs))
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621682769410"><span class="hs-identifier hs-var">noExportDoc</span></a></span><span>
</span><span id="line-3173"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpAll"><span class="hs-identifier hs-type">ImpExpAll</span></a></span><span> </span><span id="local-6989586621682769411"><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769411"><span class="hs-identifier hs-var">tok</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XIEThingAll GhcPs
-&gt; LIEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs
forall pass.
XIEThingAll pass
-&gt; LIEWrappedName pass -&gt; Maybe (ExportDoc pass) -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEThingAll"><span class="hs-identifier hs-var">IEThingAll</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
Maybe (GenLocated SrcSpanAnnP (WarningTxt GhcPs))
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769398"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769411"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769399"><span class="hs-identifier hs-var">tcp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
 -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; (IEWrappedName GhcPs
    -&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs))
-&gt; IEWrappedName GhcPs
-&gt; Maybe (LHsDoc GhcPs)
-&gt; IE GhcPs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; IEWrappedName GhcPs
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(IEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (IEWrappedName GhcPs) -&gt; P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">P (IEWrappedName GhcPs)
</span><a href="#local-6989586621682769409"><span class="hs-identifier hs-var">nameT</span></a></span><span> </span><span class="annot"><span class="annottext">P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (Maybe (LHsDoc GhcPs)) -&gt; P (IE GhcPs)
forall a b. P (a -&gt; b) -&gt; P a -&gt; P b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs) -&gt; P (Maybe (LHsDoc GhcPs))
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621682769410"><span class="hs-identifier hs-var">noExportDoc</span></a></span><span>
</span><span id="line-3174"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpList"><span class="hs-identifier hs-type">ImpExpList</span></a></span><span> </span><span id="local-6989586621682769413"><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769413"><span class="hs-identifier hs-var">xs</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3175"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682769414"><span class="annot"><span class="annottext">IEWrappedName GhcPs
</span><a href="#local-6989586621682769414"><span class="hs-identifier hs-var">newName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XIEThingWith GhcPs
-&gt; LIEWrappedName GhcPs
-&gt; IEWildcard
-&gt; [LIEWrappedName GhcPs]
-&gt; Maybe (LHsDoc GhcPs)
-&gt; IE GhcPs
forall pass.
XIEThingWith pass
-&gt; LIEWrappedName pass
-&gt; IEWildcard
-&gt; [LIEWrappedName pass]
-&gt; Maybe (ExportDoc pass)
-&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEThingWith"><span class="hs-identifier hs-var">IEThingWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
Maybe (GenLocated SrcSpanAnnP (WarningTxt GhcPs))
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769398"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;,&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769399"><span class="hs-identifier hs-var">tcp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; IEWrappedName GhcPs
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">IEWrappedName GhcPs
</span><a href="#local-6989586621682769414"><span class="hs-identifier hs-var">newName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3176"></span><span>        </span><span class="annot"><span class="annottext">IEWildcard
</span><a href="Language.Haskell.Syntax.ImpExp.html#NoIEWildcard"><span class="hs-identifier hs-var">NoIEWildcard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
-&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
</span><a href="#local-6989586621682769417"><span class="hs-identifier hs-var">wrapped</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769413"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IEWrappedName GhcPs -&gt; Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (IEWrappedName GhcPs) -&gt; P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">P (IEWrappedName GhcPs)
</span><a href="#local-6989586621682769409"><span class="hs-identifier hs-var">nameT</span></a></span><span> </span><span class="annot"><span class="annottext">P (Maybe (LHsDoc GhcPs) -&gt; IE GhcPs)
-&gt; P (Maybe (LHsDoc GhcPs)) -&gt; P (IE GhcPs)
forall a b. P (a -&gt; b) -&gt; P a -&gt; P b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs) -&gt; P (Maybe (LHsDoc GhcPs))
forall a. a -&gt; P a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621682769410"><span class="hs-identifier hs-var">noExportDoc</span></a></span><span>
</span><span id="line-3177"></span><span>    </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpAllWith"><span class="hs-identifier hs-type">ImpExpAllWith</span></a></span><span> </span><span id="local-6989586621682769418"><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769418"><span class="hs-identifier hs-var">xs</span></a></span></span><span>                       </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3178"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621682769419"><span class="annot"><a href="#local-6989586621682769419"><span class="hs-identifier hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; P Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#PatternSynonymsBit"><span class="hs-identifier hs-var">PatternSynonymsBit</span></a></span><span>
</span><span id="line-3179"></span><span>         </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682769419"><span class="hs-identifier hs-type">allowed</span></a></span><span>
</span><span id="line-3180"></span><span>          </span><span class="hs-keyword">then</span><span>
</span><span id="line-3181"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769421"><span class="annot"><a href="#local-6989586621682769421"><span class="hs-identifier hs-var hs-var">withs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec)
-&gt; [LocatedA ImpExpQcSpec] -&gt; [ImpExpQcSpec]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769418"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-3182"></span><span>                </span><span id="local-6989586621682769422"><span class="annot"><a href="#local-6989586621682769422"><span class="hs-identifier hs-var hs-var">pos</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IEWildcard -&gt; (Int -&gt; IEWildcard) -&gt; Maybe Int -&gt; IEWildcard
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">IEWildcard
</span><a href="Language.Haskell.Syntax.ImpExp.html#NoIEWildcard"><span class="hs-identifier hs-var">NoIEWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IEWildcard
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEWildcard"><span class="hs-identifier hs-var">IEWildcard</span></a></span><span>
</span><span id="line-3183"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ImpExpQcSpec -&gt; Bool) -&gt; [ImpExpQcSpec] -&gt; Maybe Int
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Maybe Int
</span><span class="hs-identifier hs-var">findIndex</span></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-var">isImpExpQcWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">[ImpExpQcSpec]
</span><a href="#local-6989586621682769421"><span class="hs-identifier hs-var">withs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3184"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682769425"><span class="annot"><a href="#local-6989586621682769425"><span class="hs-identifier hs-var">td</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621682769426"><span class="annot"><a href="#local-6989586621682769426"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">find</span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-type">isImpExpQcWildcard</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769421"><span class="hs-identifier hs-type">withs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3185"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-type">ImpExpQcWildcard</span></a></span><span> </span><span id="local-6989586621682769428"><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769428"><span class="hs-identifier hs-var">td</span></a></span></span><span> </span><span id="local-6989586621682769429"><span class="annot"><span class="annottext">EpToken &quot;,&quot;
</span><a href="#local-6989586621682769429"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769428"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;,&quot;
</span><a href="#local-6989586621682769429"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3186"></span><span>                  </span><span class="annot"><span class="annottext">Maybe ImpExpQcSpec
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;,&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3187"></span><span>                </span><span class="annot"><a href="#local-6989586621682769430"><span class="hs-identifier hs-type">ies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IEWrappedName"><span class="hs-identifier hs-type">IEWrappedName</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3188"></span><span>                </span><span id="local-6989586621682769430"><span class="annot"><a href="#local-6989586621682769430"><span class="hs-identifier hs-var hs-var">ies</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
-&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
</span><a href="#local-6989586621682769417"><span class="hs-identifier hs-var">wrapped</span></a></span><span> </span><span class="annot"><span class="annottext">([LocatedA ImpExpQcSpec]
 -&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)])
-&gt; [LocatedA ImpExpQcSpec]
-&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(LocatedA ImpExpQcSpec -&gt; Bool)
-&gt; [LocatedA ImpExpQcSpec] -&gt; [LocatedA ImpExpQcSpec]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; (LocatedA ImpExpQcSpec -&gt; Bool) -&gt; LocatedA ImpExpQcSpec -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-var">isImpExpQcWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpExpQcSpec -&gt; Bool)
-&gt; (LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec)
-&gt; LocatedA ImpExpQcSpec
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769418"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-3189"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682769431"><span class="annot"><span class="annottext">IEWrappedName GhcPs
</span><a href="#local-6989586621682769431"><span class="hs-identifier hs-var">newName</span></a></span></span><span>
</span><span id="line-3190"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XIEThingWith GhcPs
-&gt; LIEWrappedName GhcPs
-&gt; IEWildcard
-&gt; [LIEWrappedName GhcPs]
-&gt; Maybe (LHsDoc GhcPs)
-&gt; IE GhcPs
forall pass.
XIEThingWith pass
-&gt; LIEWrappedName pass
-&gt; IEWildcard
-&gt; [LIEWrappedName pass]
-&gt; Maybe (ExportDoc pass)
-&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEThingWith"><span class="hs-identifier hs-var">IEThingWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LWarningTxt GhcPs)
Maybe (GenLocated SrcSpanAnnP (WarningTxt GhcPs))
</span><a href="#local-6989586621682769397"><span class="hs-identifier hs-var">warning</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769398"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769425"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;,&quot;
</span><a href="#local-6989586621682769426"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769399"><span class="hs-identifier hs-var">tcp</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; IEWrappedName GhcPs
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">IEWrappedName GhcPs
</span><a href="#local-6989586621682769431"><span class="hs-identifier hs-var">newName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IEWildcard
</span><a href="#local-6989586621682769422"><span class="hs-identifier hs-var">pos</span></a></span><span> </span><span class="annot"><span class="annottext">[LIEWrappedName GhcPs]
[GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
</span><a href="#local-6989586621682769430"><span class="hs-identifier hs-var">ies</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3191"></span><span>               </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682769409"><span class="hs-identifier hs-type">nameT</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><a href="#local-6989586621682769410"><span class="hs-identifier hs-type">noExportDoc</span></a></span><span>
</span><span id="line-3192"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-type">addFatalError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769400"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-3193"></span><span>                 </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalPatSynExport"><span class="hs-identifier hs-type">PsErrIllegalPatSynExport</span></a></span><span>
</span><span id="line-3194"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3195"></span><span>    </span><span class="annot"><a href="#local-6989586621682769410"><span class="hs-identifier hs-type">noExportDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Doc.html#LHsDoc"><span class="hs-identifier hs-type">LHsDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3196"></span><span>    </span><span id="local-6989586621682769410"><span class="annot"><span class="annottext">noExportDoc :: Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621682769410"><span class="hs-identifier hs-var hs-var">noExportDoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-3197"></span><span>
</span><span id="line-3198"></span><span>    </span><span id="local-6989586621682769405"><span class="annot"><span class="annottext">name :: RdrName
</span><a href="#local-6989586621682769405"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; RdrName
</span><a href="#local-6989586621682769433"><span class="hs-identifier hs-var">ieNameVal</span></a></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec
</span><a href="#local-6989586621682769401"><span class="hs-identifier hs-var">specname</span></a></span><span>
</span><span id="line-3199"></span><span>    </span><span id="local-6989586621682769409"><span class="annot"><span class="annottext">nameT :: P (IEWrappedName GhcPs)
</span><a href="#local-6989586621682769409"><span class="hs-identifier hs-var hs-var">nameT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3200"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#isVarNameSpace"><span class="hs-identifier hs-var">isVarNameSpace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NameSpace
</span><a href="GHC.Types.Name.Reader.html#rdrNameSpace"><span class="hs-identifier hs-var">rdrNameSpace</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769405"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3201"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P (IEWrappedName GhcPs)
forall a. MsgEnvelope PsMessage -&gt; P a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P (IEWrappedName GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; P (IEWrappedName GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769400"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3202"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrVarForTyCon"><span class="hs-identifier hs-var">PsErrVarForTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769405"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3203"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IEWrappedName GhcPs -&gt; P (IEWrappedName GhcPs)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(IEWrappedName GhcPs -&gt; P (IEWrappedName GhcPs))
-&gt; IEWrappedName GhcPs -&gt; P (IEWrappedName GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; IEWrappedName GhcPs
</span><a href="#local-6989586621682769407"><span class="hs-identifier hs-var">ieNameFromSpec</span></a></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec
</span><a href="#local-6989586621682769401"><span class="hs-identifier hs-var">specname</span></a></span><span>
</span><span id="line-3204"></span><span>
</span><span id="line-3205"></span><span>    </span><span id="local-6989586621682769433"><span class="annot"><span class="annottext">ieNameVal :: ImpExpQcSpec -&gt; RdrName
</span><a href="#local-6989586621682769433"><span class="hs-identifier hs-var hs-var">ieNameVal</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcName"><span class="hs-identifier hs-type">ImpExpQcName</span></a></span><span> </span><span id="local-6989586621682769437"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769437"><span class="hs-identifier hs-var">ln</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769437"><span class="hs-identifier hs-var">ln</span></a></span><span>
</span><span id="line-3206"></span><span>    </span><span class="annot"><a href="#local-6989586621682769433"><span class="hs-identifier hs-var">ieNameVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcType"><span class="hs-identifier hs-type">ImpExpQcType</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769438"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769438"><span class="hs-identifier hs-var">ln</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; RdrName
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769438"><span class="hs-identifier hs-var">ln</span></a></span><span>
</span><span id="line-3207"></span><span>    </span><span class="annot"><a href="#local-6989586621682769433"><span class="hs-identifier hs-var">ieNameVal</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-type">ImpExpQcWildcard</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; RdrName
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ieNameVal got wildcard&quot;</span></span><span>
</span><span id="line-3208"></span><span>
</span><span id="line-3209"></span><span>    </span><span class="annot"><a href="#local-6989586621682769407"><span class="hs-identifier hs-type">ieNameFromSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IEWrappedName"><span class="hs-identifier hs-type">IEWrappedName</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3210"></span><span>    </span><span id="local-6989586621682769407"><span class="annot"><span class="annottext">ieNameFromSpec :: ImpExpQcSpec -&gt; IEWrappedName GhcPs
</span><a href="#local-6989586621682769407"><span class="hs-identifier hs-var hs-var">ieNameFromSpec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcName"><span class="hs-identifier hs-type">ImpExpQcName</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769439"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769439"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769440"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769440"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XIEName GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; IEWrappedName GhcPs
forall p. XIEName p -&gt; LIdP p -&gt; IEWrappedName p
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEName"><span class="hs-identifier hs-var">IEName</span></a></span><span> </span><span class="annot"><span class="annottext">XIEName GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769439"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769440"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3211"></span><span>    </span><span class="annot"><a href="#local-6989586621682769407"><span class="hs-identifier hs-var">ieNameFromSpec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcType"><span class="hs-identifier hs-type">ImpExpQcType</span></a></span><span> </span><span id="local-6989586621682769442"><span class="annot"><span class="annottext">EpToken &quot;type&quot;
</span><a href="#local-6989586621682769442"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769443"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769443"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769444"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769444"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XIEType GhcPs -&gt; XRec GhcPs (IdP GhcPs) -&gt; IEWrappedName GhcPs
forall p. XIEType p -&gt; LIdP p -&gt; IEWrappedName p
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEType"><span class="hs-identifier hs-var">IEType</span></a></span><span> </span><span class="annot"><span class="annottext">XIEType GhcPs
EpToken &quot;type&quot;
</span><a href="#local-6989586621682769442"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769443"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769444"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3212"></span><span>    </span><span class="annot"><a href="#local-6989586621682769407"><span class="hs-identifier hs-var">ieNameFromSpec</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-type">ImpExpQcWildcard</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; IEWrappedName GhcPs
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ieName got wildcard&quot;</span></span><span>
</span><span id="line-3213"></span><span>
</span><span id="line-3214"></span><span>    </span><span id="local-6989586621682769417"><span class="annot"><span class="annottext">wrapped :: [LocatedA ImpExpQcSpec]
-&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
</span><a href="#local-6989586621682769417"><span class="hs-identifier hs-var hs-var">wrapped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedA ImpExpQcSpec
 -&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs))
-&gt; [LocatedA ImpExpQcSpec]
-&gt; [GenLocated SrcSpanAnnA (IEWrappedName GhcPs)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ImpExpQcSpec -&gt; IEWrappedName GhcPs)
-&gt; LocatedA ImpExpQcSpec
-&gt; GenLocated SrcSpanAnnA (IEWrappedName GhcPs)
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; IEWrappedName GhcPs
</span><a href="#local-6989586621682769407"><span class="hs-identifier hs-var">ieNameFromSpec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3215"></span><span>
</span><span id="line-3216"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTypeImpExp"><span class="hs-identifier hs-type">mkTypeImpExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>   </span><span class="hs-comment">-- TcCls or Var name space</span><span>
</span><span id="line-3217"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3218"></span><span id="mkTypeImpExp"><span class="annot"><span class="annottext">mkTypeImpExp :: LocatedN RdrName -&gt; P (LocatedN RdrName)
</span><a href="GHC.Parser.PostProcess.html#mkTypeImpExp"><span class="hs-identifier hs-var hs-var">mkTypeImpExp</span></a></span></span><span> </span><span id="local-6989586621682769447"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769447"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3219"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m ()
</span><a href="GHC.Parser.PostProcess.html#requireExplicitNamespaces"><span class="hs-identifier hs-var">requireExplicitNamespaces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. HasLoc a =&gt; GenLocated a e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769447"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3220"></span><span>     </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; P (LocatedN RdrName)
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RdrName -&gt; RdrName) -&gt; LocatedN RdrName -&gt; LocatedN RdrName
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnN a -&gt; GenLocated SrcSpanAnnN b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RdrName -&gt; NameSpace -&gt; RdrName
</span><a href="GHC.Parser.PostProcess.html#setRdrNameSpace"><span class="hs-operator hs-var">`setRdrNameSpace`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="GHC.Types.Name.Occurrence.html#tcClsName"><span class="hs-identifier hs-var">tcClsName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769447"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3221"></span><span>
</span><span id="line-3222"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#checkImportSpec"><span class="hs-identifier hs-type">checkImportSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLI"><span class="hs-identifier hs-type">LocatedLI</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#LIE"><span class="hs-identifier hs-type">LIE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedLI"><span class="hs-identifier hs-type">LocatedLI</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#LIE"><span class="hs-identifier hs-type">LIE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-3223"></span><span id="checkImportSpec"><span class="annot"><span class="annottext">checkImportSpec :: LocatedLI [LIE GhcPs] -&gt; P (LocatedLI [LIE GhcPs])
</span><a href="GHC.Parser.PostProcess.html#checkImportSpec"><span class="hs-identifier hs-var hs-var">checkImportSpec</span></a></span></span><span> </span><span id="local-6989586621682769449"><span class="annot"><span class="annottext">ie :: LocatedLI [LIE GhcPs]
</span><a href="#local-6989586621682769449"><span class="hs-identifier hs-var">ie</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnLI
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769450"><span class="annot"><span class="annottext">[LIE GhcPs]
</span><a href="#local-6989586621682769450"><span class="hs-identifier hs-var">specs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3224"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769451"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769451"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769451"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IEThingWith"><span class="hs-identifier hs-type">IEThingWith</span></a></span><span> </span><span class="annot"><span class="annottext">XIEThingWith GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LIEWrappedName GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IEWildcard"><span class="hs-identifier hs-type">IEWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LIEWrappedName GhcPs]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIE GhcPs]
[GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621682769450"><span class="hs-identifier hs-var">specs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3225"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedLI [GenLocated SrcSpanAnnA (IE GhcPs)]
-&gt; P (LocatedLI [GenLocated SrcSpanAnnA (IE GhcPs)])
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">LocatedLI [LIE GhcPs]
LocatedLI [GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621682769449"><span class="hs-identifier hs-var">ie</span></a></span><span>
</span><span id="line-3226"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621682769452"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769452"><span class="hs-identifier hs-var">l</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[SrcSpanAnnA]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; P (LocatedLI [GenLocated SrcSpanAnnA (IE GhcPs)])
forall {m :: * -&gt; *} {a}. MonadP m =&gt; SrcSpan -&gt; m a
</span><a href="#local-6989586621682769453"><span class="hs-identifier hs-var">importSpecError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769452"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3227"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3228"></span><span>    </span><span id="local-6989586621682769453"><span class="annot"><span class="annottext">importSpecError :: SrcSpan -&gt; m a
</span><a href="#local-6989586621682769453"><span class="hs-identifier hs-var hs-var">importSpecError</span></a></span></span><span> </span><span id="local-6989586621682769463"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769463"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3229"></span><span>      </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; m a
forall a. MsgEnvelope PsMessage -&gt; m a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; m a) -&gt; MsgEnvelope PsMessage -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769463"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrIllegalImportBundleForm"><span class="hs-identifier hs-var">PsErrIllegalImportBundleForm</span></a></span><span>
</span><span id="line-3230"></span><span>
</span><span id="line-3231"></span><span class="hs-comment">-- In the correct order</span><span>
</span><span id="line-3232"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImpExpSubSpec"><span class="hs-identifier hs-type">mkImpExpSubSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpSubSpec"><span class="hs-identifier hs-type">ImpExpSubSpec</span></a></span><span>
</span><span id="line-3233"></span><span id="mkImpExpSubSpec"><span class="annot"><span class="annottext">mkImpExpSubSpec :: [LocatedA ImpExpQcSpec] -&gt; P ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#mkImpExpSubSpec"><span class="hs-identifier hs-var hs-var">mkImpExpSubSpec</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec] -&gt; ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#ImpExpList"><span class="hs-identifier hs-var">ImpExpList</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-3234"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImpExpSubSpec"><span class="hs-identifier hs-var">mkImpExpSubSpec</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-type">ImpExpQcWildcard</span></a></span><span> </span><span id="local-6989586621682769465"><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769465"><span class="hs-identifier hs-var">td</span></a></span></span><span> </span><span id="local-6989586621682769466"><span class="annot"><span class="annottext">EpToken &quot;,&quot;
</span><a href="#local-6989586621682769466"><span class="hs-identifier hs-var">_tc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3235"></span><span>  </span><span class="annot"><span class="annottext">ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;..&quot; -&gt; ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#ImpExpAll"><span class="hs-identifier hs-var">ImpExpAll</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><a href="#local-6989586621682769465"><span class="hs-identifier hs-var">td</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3236"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkImpExpSubSpec"><span class="hs-identifier hs-var">mkImpExpSubSpec</span></a></span><span> </span><span id="local-6989586621682769467"><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769467"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3237"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedA ImpExpQcSpec -&gt; Bool) -&gt; [LocatedA ImpExpQcSpec] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImpExpQcSpec -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-var">isImpExpQcWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">(ImpExpQcSpec -&gt; Bool)
-&gt; (LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec)
-&gt; LocatedA ImpExpQcSpec
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LocatedA ImpExpQcSpec -&gt; ImpExpQcSpec
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769467"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3238"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ImpExpSubSpec -&gt; P ImpExpSubSpec)
-&gt; ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec] -&gt; ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#ImpExpAllWith"><span class="hs-identifier hs-var">ImpExpAllWith</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769467"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3239"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a. a -&gt; P a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ImpExpSubSpec -&gt; P ImpExpSubSpec)
-&gt; ImpExpSubSpec -&gt; P ImpExpSubSpec
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec] -&gt; ImpExpSubSpec
</span><a href="GHC.Parser.PostProcess.html#ImpExpList"><span class="hs-identifier hs-var">ImpExpList</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedA ImpExpQcSpec]
</span><a href="#local-6989586621682769467"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3240"></span><span>
</span><span id="line-3241"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-type">isImpExpQcWildcard</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcSpec"><span class="hs-identifier hs-type">ImpExpQcSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3242"></span><span id="isImpExpQcWildcard"><span class="annot"><span class="annottext">isImpExpQcWildcard :: ImpExpQcSpec -&gt; Bool
</span><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-var hs-var">isImpExpQcWildcard</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#ImpExpQcWildcard"><span class="hs-identifier hs-type">ImpExpQcWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;..&quot;
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;,&quot;
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-3243"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#isImpExpQcWildcard"><span class="hs-identifier hs-var">isImpExpQcWildcard</span></a></span><span> </span><span class="annot"><span class="annottext">ImpExpQcSpec
</span><span class="hs-identifier">_</span></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-3244"></span><span>
</span><span id="line-3245"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3246"></span><span class="hs-comment">-- Warnings and failures</span><span>
</span><span id="line-3247"></span><span>
</span><span id="line-3248"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#warnPrepositiveQualifiedModule"><span class="hs-identifier hs-type">warnPrepositiveQualifiedModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3249"></span><span id="warnPrepositiveQualifiedModule"><span class="annot"><span class="annottext">warnPrepositiveQualifiedModule :: SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#warnPrepositiveQualifiedModule"><span class="hs-identifier hs-var hs-var">warnPrepositiveQualifiedModule</span></a></span></span><span> </span><span id="local-6989586621682769469"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769469"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3250"></span><span>  </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-var">addPsMessage</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769469"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsWarnImportPreQualified"><span class="hs-identifier hs-var">PsWarnImportPreQualified</span></a></span><span>
</span><span id="line-3251"></span><span>
</span><span id="line-3252"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#failNotEnabledImportQualifiedPost"><span class="hs-identifier hs-type">failNotEnabledImportQualifiedPost</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3253"></span><span id="failNotEnabledImportQualifiedPost"><span class="annot"><span class="annottext">failNotEnabledImportQualifiedPost :: SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#failNotEnabledImportQualifiedPost"><span class="hs-identifier hs-var hs-var">failNotEnabledImportQualifiedPost</span></a></span></span><span> </span><span id="local-6989586621682769471"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769471"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3254"></span><span>  </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769471"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrImportPostQualified"><span class="hs-identifier hs-var">PsErrImportPostQualified</span></a></span><span>
</span><span id="line-3255"></span><span>
</span><span id="line-3256"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#failImportQualifiedTwice"><span class="hs-identifier hs-type">failImportQualifiedTwice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3257"></span><span id="failImportQualifiedTwice"><span class="annot"><span class="annottext">failImportQualifiedTwice :: SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#failImportQualifiedTwice"><span class="hs-identifier hs-var hs-var">failImportQualifiedTwice</span></a></span></span><span> </span><span id="local-6989586621682769473"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769473"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3258"></span><span>  </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; P ()) -&gt; MsgEnvelope PsMessage -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769473"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrImportQualifiedTwice"><span class="hs-identifier hs-var">PsErrImportQualifiedTwice</span></a></span><span>
</span><span id="line-3259"></span><span>
</span><span id="line-3260"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#warnStarIsType"><span class="hs-identifier hs-type">warnStarIsType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3261"></span><span id="warnStarIsType"><span class="annot"><span class="annottext">warnStarIsType :: SrcSpan -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#warnStarIsType"><span class="hs-identifier hs-var hs-var">warnStarIsType</span></a></span></span><span> </span><span id="local-6989586621682769475"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769475"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-var">addPsMessage</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769475"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsWarnStarIsType"><span class="hs-identifier hs-var">PsWarnStarIsType</span></a></span><span>
</span><span id="line-3262"></span><span>
</span><span id="line-3263"></span><span id="local-6989586621682764998"><span id="local-6989586621682764999"><span class="annot"><a href="GHC.Parser.PostProcess.html#failOpFewArgs"><span class="hs-identifier hs-type">failOpFewArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764998"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764998"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764999"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-3264"></span><span id="failOpFewArgs"><span class="annot"><span class="annottext">failOpFewArgs :: forall (m :: * -&gt; *) a. MonadP m =&gt; LocatedN RdrName -&gt; m a
</span><a href="GHC.Parser.PostProcess.html#failOpFewArgs"><span class="hs-identifier hs-var hs-var">failOpFewArgs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769484"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682769484"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682769485"><span class="annot"><span class="annottext">RdrName
</span><a href="#local-6989586621682769485"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3265"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682769486"><span class="annot"><a href="#local-6989586621682769486"><span class="hs-identifier hs-var">star_is_type</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; m Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#StarIsTypeBit"><span class="hs-identifier hs-var">StarIsTypeBit</span></a></span><span>
</span><span id="line-3266"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769488"><span class="annot"><a href="#local-6989586621682769488"><span class="hs-identifier hs-var hs-var">is_star_type</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769486"><span class="hs-identifier hs-var">star_is_type</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">StarIsType
</span><a href="GHC.Types.Hint.html#StarIsType"><span class="hs-identifier hs-var">StarIsType</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">StarIsType
</span><a href="GHC.Types.Hint.html#StarIsNotType"><span class="hs-identifier hs-var">StarIsNotType</span></a></span><span>
</span><span id="line-3267"></span><span>     </span><span class="hs-special">;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-type">addFatalError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-type">locA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769484"><span class="hs-identifier hs-type">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-3268"></span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrOpFewArgs"><span class="hs-identifier hs-type">PsErrOpFewArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769488"><span class="hs-identifier hs-type">is_star_type</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769485"><span class="hs-identifier hs-type">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3269"></span><span>
</span><span id="line-3270"></span><span id="local-6989586621682764992"><span class="annot"><a href="GHC.Parser.PostProcess.html#requireExplicitNamespaces"><span class="hs-identifier hs-type">requireExplicitNamespaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764992"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682764992"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-3271"></span><span id="requireExplicitNamespaces"><span class="annot"><span class="annottext">requireExplicitNamespaces :: forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m ()
</span><a href="GHC.Parser.PostProcess.html#requireExplicitNamespaces"><span class="hs-identifier hs-var hs-var">requireExplicitNamespaces</span></a></span></span><span> </span><span id="local-6989586621682769500"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769500"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3272"></span><span>  </span><span id="local-6989586621682769501"><span class="annot"><a href="#local-6989586621682769501"><span class="hs-identifier hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; m Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#ExplicitNamespacesBit"><span class="hs-identifier hs-var">ExplicitNamespacesBit</span></a></span><span>
</span><span id="line-3273"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682769501"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-3274"></span><span>    </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769500"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalExplicitNamespace"><span class="hs-identifier hs-type">PsErrIllegalExplicitNamespace</span></a></span><span>
</span><span id="line-3275"></span><span>
</span><span id="line-3276"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3277"></span><span class="hs-comment">-- Misc utils</span><span>
</span><span id="line-3278"></span><span>
</span><span id="line-3279"></span><span class="hs-keyword">data</span><span> </span><span id="PV_Context"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Context"><span class="hs-identifier hs-var">PV_Context</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3280"></span><span>  </span><span id="PV_Context"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Context"><span class="hs-identifier hs-var">PV_Context</span></a></span></span><span>
</span><span id="line-3281"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="pv_options"><span class="annot"><span class="annottext">PV_Context -&gt; ParserOpts
</span><a href="GHC.Parser.PostProcess.html#pv_options"><span class="hs-identifier hs-var hs-var">pv_options</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#ParserOpts"><span class="hs-identifier hs-type">ParserOpts</span></a></span><span>
</span><span id="line-3282"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pv_details"><span class="annot"><span class="annottext">PV_Context -&gt; ParseContext
</span><a href="GHC.Parser.PostProcess.html#pv_details"><span class="hs-identifier hs-var hs-var">pv_details</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier hs-type">ParseContext</span></a></span><span> </span><span class="hs-comment">-- See Note [Parser-Validator Details]</span><span>
</span><span id="line-3283"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-3284"></span><span>
</span><span id="line-3285"></span><span class="hs-keyword">data</span><span> </span><span id="PV_Accum"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-var">PV_Accum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3286"></span><span>  </span><span id="PV_Accum"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-var">PV_Accum</span></a></span></span><span>
</span><span id="line-3287"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="pv_warnings"><span class="annot"><span class="annottext">PV_Accum -&gt; Messages PsMessage
</span><a href="GHC.Parser.PostProcess.html#pv_warnings"><span class="hs-identifier hs-var hs-var">pv_warnings</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span>
</span><span id="line-3288"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pv_errors"><span class="annot"><span class="annottext">PV_Accum -&gt; Messages PsMessage
</span><a href="GHC.Parser.PostProcess.html#pv_errors"><span class="hs-identifier hs-var hs-var">pv_errors</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsMessage"><span class="hs-identifier hs-type">PsMessage</span></a></span><span>
</span><span id="line-3289"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pv_header_comments"><span class="annot"><span class="annottext">PV_Accum -&gt; Maybe [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var hs-var">pv_header_comments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LEpaComment"><span class="hs-identifier hs-type">LEpaComment</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3290"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pv_comment_q"><span class="annot"><span class="annottext">PV_Accum -&gt; [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var hs-var">pv_comment_q</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LEpaComment"><span class="hs-identifier hs-type">LEpaComment</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3291"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-3292"></span><span>
</span><span id="line-3293"></span><span class="hs-keyword">data</span><span> </span><span id="PV_Result"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Result"><span class="hs-identifier hs-var">PV_Result</span></a></span></span><span> </span><span id="local-6989586621682765049"><span class="annot"><a href="#local-6989586621682765049"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PV_Ok"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-type">PV_Accum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765049"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="PV_Failed"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Failed"><span class="hs-identifier hs-var">PV_Failed</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-type">PV_Accum</span></a></span><span>
</span><span id="line-3294"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769515"><span id="local-6989586621682769521"><span id="local-6989586621682769525"><span id="local-6989586621682769530"><span id="local-6989586621682769532"><span id="local-6989586621682769535"><span id="local-6989586621682769538"><span id="local-6989586621682769541"><span id="local-6989586621682769544"><span id="local-6989586621682769547"><span id="local-6989586621682769550"><span id="local-6989586621682769552"><span id="local-6989586621682769555"><span id="local-6989586621682769560"><span id="local-6989586621682769565"><span id="local-6989586621682769570"><span id="local-6989586621682769575"><span class="annot"><span class="annottext">(forall m. Monoid m =&gt; PV_Result m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a)
-&gt; (forall a. PV_Result a -&gt; [a])
-&gt; (forall a. PV_Result a -&gt; Bool)
-&gt; (forall a. PV_Result a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; PV_Result a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; PV_Result a -&gt; a)
-&gt; (forall a. Ord a =&gt; PV_Result a -&gt; a)
-&gt; (forall a. Num a =&gt; PV_Result a -&gt; a)
-&gt; (forall a. Num a =&gt; PV_Result a -&gt; a)
-&gt; Foldable PV_Result
forall a. Eq a =&gt; a -&gt; PV_Result a -&gt; Bool
forall a. Num a =&gt; PV_Result a -&gt; a
forall a. Ord a =&gt; PV_Result a -&gt; a
forall m. Monoid m =&gt; PV_Result m -&gt; m
forall a. PV_Result a -&gt; Bool
forall a. PV_Result a -&gt; Int
forall a. PV_Result a -&gt; [a]
forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
forall (t :: * -&gt; *).
(forall m. Monoid m =&gt; t m -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall m a. Monoid m =&gt; (a -&gt; m) -&gt; t a -&gt; m)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. (a -&gt; a -&gt; a) -&gt; t a -&gt; a)
-&gt; (forall a. t a -&gt; [a])
-&gt; (forall a. t a -&gt; Bool)
-&gt; (forall a. t a -&gt; Int)
-&gt; (forall a. Eq a =&gt; a -&gt; t a -&gt; Bool)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Ord a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; (forall a. Num a =&gt; t a -&gt; a)
-&gt; Foldable t
$cfold :: forall m. Monoid m =&gt; PV_Result m -&gt; m
fold :: forall m. Monoid m =&gt; PV_Result m -&gt; m
$cfoldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m
foldMap :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m
$cfoldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m
foldMap' :: forall m a. Monoid m =&gt; (a -&gt; m) -&gt; PV_Result a -&gt; m
$cfoldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
foldr :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
$cfoldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
foldr' :: forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
$cfoldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
foldl :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
$cfoldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
foldl' :: forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; PV_Result a -&gt; b
$cfoldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a
foldr1 :: forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a
$cfoldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a
foldl1 :: forall a. (a -&gt; a -&gt; a) -&gt; PV_Result a -&gt; a
$ctoList :: forall a. PV_Result a -&gt; [a]
toList :: forall a. PV_Result a -&gt; [a]
$cnull :: forall a. PV_Result a -&gt; Bool
null :: forall a. PV_Result a -&gt; Bool
$clength :: forall a. PV_Result a -&gt; Int
length :: forall a. PV_Result a -&gt; Int
$celem :: forall a. Eq a =&gt; a -&gt; PV_Result a -&gt; Bool
elem :: forall a. Eq a =&gt; a -&gt; PV_Result a -&gt; Bool
$cmaximum :: forall a. Ord a =&gt; PV_Result a -&gt; a
maximum :: forall a. Ord a =&gt; PV_Result a -&gt; a
$cminimum :: forall a. Ord a =&gt; PV_Result a -&gt; a
minimum :: forall a. Ord a =&gt; PV_Result a -&gt; a
$csum :: forall a. Num a =&gt; PV_Result a -&gt; a
sum :: forall a. Num a =&gt; PV_Result a -&gt; a
$cproduct :: forall a. Num a =&gt; PV_Result a -&gt; a
product :: forall a. Num a =&gt; PV_Result a -&gt; a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Foldable</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769583"><span id="local-6989586621682769585"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; PV_Result a -&gt; PV_Result b)
-&gt; (forall a b. a -&gt; PV_Result b -&gt; PV_Result a)
-&gt; Functor PV_Result
forall a b. a -&gt; PV_Result b -&gt; PV_Result a
forall a b. (a -&gt; b) -&gt; PV_Result a -&gt; PV_Result b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; PV_Result a -&gt; PV_Result b
fmap :: forall a b. (a -&gt; b) -&gt; PV_Result a -&gt; PV_Result b
$c&lt;$ :: forall a b. a -&gt; PV_Result b -&gt; PV_Result a
&lt;$ :: forall a b. a -&gt; PV_Result b -&gt; PV_Result a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769594"><span id="local-6989586621682769600"><span id="local-6989586621682769606"><span id="local-6989586621682769611"><span class="annot"><span class="annottext">Functor PV_Result
Foldable PV_Result
(Functor PV_Result, Foldable PV_Result) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; PV_Result a -&gt; f (PV_Result b))
-&gt; (forall (f :: * -&gt; *) a.
    Applicative f =&gt;
    PV_Result (f a) -&gt; f (PV_Result a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; PV_Result a -&gt; m (PV_Result b))
-&gt; (forall (m :: * -&gt; *) a.
    Monad m =&gt;
    PV_Result (m a) -&gt; m (PV_Result a))
-&gt; Traversable PV_Result
forall (t :: * -&gt; *).
(Functor t, Foldable t) =&gt;
(forall (f :: * -&gt; *) a b.
 Applicative f =&gt;
 (a -&gt; f b) -&gt; t a -&gt; f (t b))
-&gt; (forall (f :: * -&gt; *) a. Applicative f =&gt; t (f a) -&gt; f (t a))
-&gt; (forall (m :: * -&gt; *) a b.
    Monad m =&gt;
    (a -&gt; m b) -&gt; t a -&gt; m (t b))
-&gt; (forall (m :: * -&gt; *) a. Monad m =&gt; t (m a) -&gt; m (t a))
-&gt; Traversable t
forall (m :: * -&gt; *) a.
Monad m =&gt;
PV_Result (m a) -&gt; m (PV_Result a)
forall (f :: * -&gt; *) a.
Applicative f =&gt;
PV_Result (f a) -&gt; f (PV_Result a)
forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; PV_Result a -&gt; m (PV_Result b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; PV_Result a -&gt; f (PV_Result b)
$ctraverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; PV_Result a -&gt; f (PV_Result b)
traverse :: forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; PV_Result a -&gt; f (PV_Result b)
$csequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
PV_Result (f a) -&gt; f (PV_Result a)
sequenceA :: forall (f :: * -&gt; *) a.
Applicative f =&gt;
PV_Result (f a) -&gt; f (PV_Result a)
$cmapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; PV_Result a -&gt; m (PV_Result b)
mapM :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
(a -&gt; m b) -&gt; PV_Result a -&gt; m (PV_Result b)
$csequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
PV_Result (m a) -&gt; m (PV_Result a)
sequence :: forall (m :: * -&gt; *) a.
Monad m =&gt;
PV_Result (m a) -&gt; m (PV_Result a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversable</span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-3295"></span><span>
</span><span id="line-3296"></span><span class="hs-comment">-- During parsing, we make use of several monadic effects: reporting parse errors,</span><span>
</span><span id="line-3297"></span><span class="hs-comment">-- accumulating warnings, adding API annotations, and checking for extensions. These</span><span>
</span><span id="line-3298"></span><span class="hs-comment">-- effects are captured by the 'MonadP' type class.</span><span>
</span><span id="line-3299"></span><span class="hs-comment">--</span><span>
</span><span id="line-3300"></span><span class="hs-comment">-- Sometimes we need to postpone some of these effects to a later stage due to</span><span>
</span><span id="line-3301"></span><span class="hs-comment">-- ambiguities described in Note [Ambiguous syntactic categories].</span><span>
</span><span id="line-3302"></span><span class="hs-comment">-- We could use two layers of the P monad, one for each stage:</span><span>
</span><span id="line-3303"></span><span class="hs-comment">--</span><span>
</span><span id="line-3304"></span><span class="hs-comment">--   abParser :: forall x. DisambAB x =&gt; P (P x)</span><span>
</span><span id="line-3305"></span><span class="hs-comment">--</span><span>
</span><span id="line-3306"></span><span class="hs-comment">-- The outer layer of P consumes the input and builds the inner layer, which</span><span>
</span><span id="line-3307"></span><span class="hs-comment">-- validates the input. But this type is not particularly helpful, as it obscures</span><span>
</span><span id="line-3308"></span><span class="hs-comment">-- the fact that the inner layer of P never consumes any input.</span><span>
</span><span id="line-3309"></span><span class="hs-comment">--</span><span>
</span><span id="line-3310"></span><span class="hs-comment">-- For clarity, we introduce the notion of a parser-validator: a parser that does</span><span>
</span><span id="line-3311"></span><span class="hs-comment">-- not consume any input, but may fail or use other effects. Thus we have:</span><span>
</span><span id="line-3312"></span><span class="hs-comment">--</span><span>
</span><span id="line-3313"></span><span class="hs-comment">--   abParser :: forall x. DisambAB x =&gt; P (PV x)</span><span>
</span><span id="line-3314"></span><span class="hs-comment">--</span><span>
</span><span id="line-3315"></span><span class="hs-keyword">newtype</span><span> </span><span id="PV"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span></span><span> </span><span id="local-6989586621682765038"><span class="annot"><a href="#local-6989586621682765038"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PV"><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unPV"><span class="annot"><span class="annottext">forall a. PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#unPV"><span class="hs-identifier hs-var hs-var">unPV</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Context"><span class="hs-identifier hs-type">PV_Context</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-type">PV_Accum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Result"><span class="hs-identifier hs-type">PV_Result</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765038"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3316"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769619"><span id="local-6989586621682769622"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; PV a -&gt; PV b)
-&gt; (forall a b. a -&gt; PV b -&gt; PV a) -&gt; Functor PV
forall a b. a -&gt; PV b -&gt; PV a
forall a b. (a -&gt; b) -&gt; PV a -&gt; PV b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; PV a -&gt; PV b
fmap :: forall a b. (a -&gt; b) -&gt; PV a -&gt; PV b
$c&lt;$ :: forall a b. a -&gt; PV b -&gt; PV a
&lt;$ :: forall a b. a -&gt; PV b -&gt; PV a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-3317"></span><span>
</span><span id="line-3318"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682769629"><span id="local-6989586621682769632"><span id="local-6989586621682769635"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3319"></span><span>  </span><span id="local-6989586621682769638"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; PV a
</span><span class="hs-identifier hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621682769639"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769639"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769639"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; PV a -&gt; PV a
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">PV_Context
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769640"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769640"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; a -&gt; PV_Result a
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769640"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769639"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3320"></span><span>  </span><span id="local-6989586621682769642"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. PV (a -&gt; b) -&gt; PV a -&gt; PV b
</span><span class="hs-operator hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PV (a -&gt; b) -&gt; PV a -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-3321"></span><span>
</span><span id="line-3322"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682769648"><span id="local-6989586621682769651"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3323"></span><span>  </span><span id="local-6989586621682769654"><span class="annot"><span class="annottext">PV a
</span><a href="#local-6989586621682769654"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621682769655"><span class="annot"><span class="annottext">&gt;&gt;= :: forall a b. PV a -&gt; (a -&gt; PV b) -&gt; PV b
</span><span class="hs-operator hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621682769656"><span class="annot"><span class="annottext">a -&gt; PV b
</span><a href="#local-6989586621682769656"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result b) -&gt; PV b
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result b) -&gt; PV b)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result b) -&gt; PV b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769657"><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769657"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621682769658"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769658"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3324"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
forall a. PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#unPV"><span class="hs-identifier hs-var">unPV</span></a></span><span> </span><span class="annot"><span class="annottext">PV a
</span><a href="#local-6989586621682769654"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769657"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769658"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3325"></span><span>      </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-type">PV_Ok</span></a></span><span> </span><span id="local-6989586621682769659"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769659"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span id="local-6989586621682769660"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769660"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV b -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result b
forall a. PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#unPV"><span class="hs-identifier hs-var">unPV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; PV b
</span><a href="#local-6989586621682769656"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769660"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769657"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769659"><span class="hs-identifier hs-var">acc'</span></a></span><span>
</span><span id="line-3326"></span><span>      </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Failed"><span class="hs-identifier hs-type">PV_Failed</span></a></span><span> </span><span id="local-6989586621682769661"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769661"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; PV_Result b
forall a. PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Failed"><span class="hs-identifier hs-var">PV_Failed</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769661"><span class="hs-identifier hs-var">acc'</span></a></span><span>
</span><span id="line-3327"></span><span>
</span><span id="line-3328"></span><span id="local-6989586621682764656"><span class="annot"><a href="GHC.Parser.PostProcess.html#runPV"><span class="hs-identifier hs-type">runPV</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764656"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764656"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-3329"></span><span id="runPV"><span class="annot"><span class="annottext">runPV :: forall a. PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV"><span class="hs-identifier hs-var hs-var">runPV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseContext -&gt; PV a -&gt; P a
forall a. ParseContext -&gt; PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV_details"><span class="hs-identifier hs-var">runPV_details</span></a></span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="GHC.Parser.Errors.Types.html#noParseContext"><span class="hs-identifier hs-var">noParseContext</span></a></span><span>
</span><span id="line-3330"></span><span>
</span><span id="line-3331"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#askParseContext"><span class="hs-identifier hs-type">askParseContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier hs-type">ParseContext</span></a></span><span>
</span><span id="line-3332"></span><span id="askParseContext"><span class="annot"><span class="annottext">askParseContext :: PV ParseContext
</span><a href="GHC.Parser.PostProcess.html#askParseContext"><span class="hs-identifier hs-var hs-var">askParseContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result ParseContext)
-&gt; PV ParseContext
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result ParseContext)
 -&gt; PV ParseContext)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result ParseContext)
-&gt; PV ParseContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Context"><span class="hs-identifier hs-type">PV_Context</span></a></span><span> </span><span class="annot"><span class="annottext">ParserOpts
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769662"><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682769662"><span class="hs-identifier hs-var">details</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769663"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769663"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; ParseContext -&gt; PV_Result ParseContext
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769663"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682769662"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-3333"></span><span>
</span><span id="line-3334"></span><span id="local-6989586621682764658"><span class="annot"><a href="GHC.Parser.PostProcess.html#runPV_details"><span class="hs-identifier hs-type">runPV_details</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#ParseContext"><span class="hs-identifier hs-type">ParseContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764658"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682764658"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-3335"></span><span id="runPV_details"><span class="annot"><span class="annottext">runPV_details :: forall a. ParseContext -&gt; PV a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#runPV_details"><span class="hs-identifier hs-var hs-var">runPV_details</span></a></span></span><span> </span><span id="local-6989586621682769664"><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682769664"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span id="local-6989586621682769665"><span class="annot"><span class="annottext">PV a
</span><a href="#local-6989586621682769665"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3336"></span><span>  </span><span class="annot"><span class="annottext">(PState -&gt; ParseResult a) -&gt; P a
forall a. (PState -&gt; ParseResult a) -&gt; P a
</span><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-var">P</span></a></span><span> </span><span class="annot"><span class="annottext">((PState -&gt; ParseResult a) -&gt; P a)
-&gt; (PState -&gt; ParseResult a) -&gt; P a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769667"><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3337"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-3338"></span><span>      </span><span id="local-6989586621682769668"><span class="annot"><span class="annottext">pv_ctx :: PV_Context
</span><a href="#local-6989586621682769668"><span class="hs-identifier hs-var hs-var">pv_ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Context"><span class="hs-identifier hs-type">PV_Context</span></a></span><span>
</span><span id="line-3339"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pv_options :: ParserOpts
</span><a href="GHC.Parser.PostProcess.html#pv_options"><span class="hs-identifier hs-var">pv_options</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState -&gt; ParserOpts
</span><a href="GHC.Parser.Lexer.html#options"><span class="hs-identifier hs-var">options</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-3340"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pv_details :: ParseContext
</span><a href="GHC.Parser.PostProcess.html#pv_details"><span class="hs-identifier hs-var">pv_details</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseContext
</span><a href="#local-6989586621682769664"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3341"></span><span>      </span><span id="local-6989586621682769670"><span class="annot"><span class="annottext">pv_acc :: PV_Accum
</span><a href="#local-6989586621682769670"><span class="hs-identifier hs-var hs-var">pv_acc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Accum"><span class="hs-identifier hs-type">PV_Accum</span></a></span><span>
</span><span id="line-3342"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pv_warnings :: Messages PsMessage
</span><a href="GHC.Parser.PostProcess.html#pv_warnings"><span class="hs-identifier hs-var">pv_warnings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState -&gt; Messages PsMessage
</span><a href="GHC.Parser.Lexer.html#warnings"><span class="hs-identifier hs-var">warnings</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-3343"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pv_errors :: Messages PsMessage
</span><a href="GHC.Parser.PostProcess.html#pv_errors"><span class="hs-identifier hs-var">pv_errors</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState -&gt; Messages PsMessage
</span><a href="GHC.Parser.Lexer.html#errors"><span class="hs-identifier hs-var">errors</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-3344"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pv_header_comments :: Maybe [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var">pv_header_comments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState -&gt; Maybe [LEpaComment]
</span><a href="GHC.Parser.Lexer.html#header_comments"><span class="hs-identifier hs-var">header_comments</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-3345"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pv_comment_q :: [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PState -&gt; [LEpaComment]
</span><a href="GHC.Parser.Lexer.html#comment_q"><span class="hs-identifier hs-var">comment_q</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3346"></span><span>      </span><span id="local-6989586621682769675"><span class="annot"><span class="annottext">mkPState :: PV_Accum -&gt; PState
</span><a href="#local-6989586621682769675"><span class="hs-identifier hs-var hs-var">mkPState</span></a></span></span><span> </span><span id="local-6989586621682769676"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769676"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3347"></span><span>        </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621682769667"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#warnings"><span class="hs-identifier hs-var">warnings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_warnings"><span class="hs-identifier hs-var">pv_warnings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769676"><span class="hs-identifier hs-type">acc'</span></a></span><span>
</span><span id="line-3348"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#errors"><span class="hs-identifier hs-var">errors</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_errors"><span class="hs-identifier hs-var">pv_errors</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769676"><span class="hs-identifier hs-type">acc'</span></a></span><span>
</span><span id="line-3349"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#comment_q"><span class="hs-identifier hs-var">comment_q</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769676"><span class="hs-identifier hs-type">acc'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-3350"></span><span>    </span><span class="hs-keyword">in</span><span>
</span><span id="line-3351"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
forall a. PV a -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#unPV"><span class="hs-identifier hs-var">unPV</span></a></span><span> </span><span class="annot"><span class="annottext">PV a
</span><a href="#local-6989586621682769665"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769668"><span class="hs-identifier hs-var">pv_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769670"><span class="hs-identifier hs-var">pv_acc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3352"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-type">PV_Ok</span></a></span><span> </span><span id="local-6989586621682769677"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769677"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span id="local-6989586621682769678"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769678"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState -&gt; a -&gt; ParseResult a
forall a. PState -&gt; a -&gt; ParseResult a
</span><a href="GHC.Parser.Lexer.html#POk"><span class="hs-identifier hs-var">POk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; PState
</span><a href="#local-6989586621682769675"><span class="hs-identifier hs-var">mkPState</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769677"><span class="hs-identifier hs-var">acc'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769678"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-3353"></span><span>        </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV_Failed"><span class="hs-identifier hs-type">PV_Failed</span></a></span><span> </span><span id="local-6989586621682769680"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769680"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PState -&gt; ParseResult a
forall a. PState -&gt; ParseResult a
</span><a href="GHC.Parser.Lexer.html#PFailed"><span class="hs-identifier hs-var">PFailed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; PState
</span><a href="#local-6989586621682769675"><span class="hs-identifier hs-var">mkPState</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769680"><span class="hs-identifier hs-var">acc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3354"></span><span>
</span><span id="line-3355"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#MonadP"><span class="hs-identifier hs-type">MonadP</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3356"></span><span>  </span><span id="local-6989586621682769692"><span class="annot"><span class="annottext">addError :: MsgEnvelope PsMessage -&gt; PV ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var hs-var hs-var">addError</span></a></span></span><span> </span><span id="local-6989586621682769693"><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682769693"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3357"></span><span>    </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ()
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ())
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769694"><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769694"><span class="hs-identifier hs-var">_ctx</span></a></span></span><span> </span><span id="local-6989586621682769695"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769695"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; () -&gt; PV_Result ()
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769695"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">{</span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_errors"><span class="hs-identifier hs-var">pv_errors</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769693"><span class="hs-identifier hs-type">err</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#addMessage"><span class="hs-operator hs-type">`addMessage`</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_errors"><span class="hs-identifier hs-var">pv_errors</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769695"><span class="hs-identifier hs-type">acc</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3358"></span><span>  </span><span id="local-6989586621682769697"><span class="annot"><span class="annottext">addWarning :: MsgEnvelope PsMessage -&gt; PV ()
</span><a href="#local-6989586621682769697"><span class="hs-identifier hs-var hs-var hs-var">addWarning</span></a></span></span><span> </span><span id="local-6989586621682769699"><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682769699"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3359"></span><span>    </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ()
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ())
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result ()) -&gt; PV ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769700"><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769700"><span class="hs-identifier hs-var">_ctx</span></a></span></span><span> </span><span id="local-6989586621682769701"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769701"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3360"></span><span>      </span><span class="hs-comment">-- No need to check for the warning flag to be set, GHC will correctly discard suppressed</span><span>
</span><span id="line-3361"></span><span>      </span><span class="hs-comment">-- diagnostics.</span><span>
</span><span id="line-3362"></span><span>      </span><span class="annot"><span class="annottext">PV_Accum -&gt; () -&gt; PV_Result ()
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769701"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">{</span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_warnings"><span class="hs-identifier hs-var">pv_warnings</span></a></span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769699"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#addMessage"><span class="hs-operator hs-type">`addMessage`</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_warnings"><span class="hs-identifier hs-var">pv_warnings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769701"><span class="hs-identifier hs-type">acc</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3363"></span><span>  </span><span id="local-6989586621682769704"><span class="annot"><span class="annottext">addFatalError :: forall a. MsgEnvelope PsMessage -&gt; PV a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var hs-var hs-var">addFatalError</span></a></span></span><span> </span><span id="local-6989586621682769705"><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682769705"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3364"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage
</span><a href="#local-6989586621682769705"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">PV () -&gt; PV a -&gt; PV a
forall a b. PV a -&gt; PV b -&gt; PV b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PV_Accum -&gt; PV_Result a) -&gt; PV_Context -&gt; PV_Accum -&gt; PV_Result a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; PV_Result a
forall a. PV_Accum -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Failed"><span class="hs-identifier hs-var">PV_Failed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3365"></span><span>  </span><span id="local-6989586621682769707"><span class="annot"><span class="annottext">getParserOpts :: PV ParserOpts
</span><a href="#local-6989586621682769707"><span class="hs-identifier hs-var hs-var hs-var">getParserOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result ParserOpts) -&gt; PV ParserOpts
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result ParserOpts) -&gt; PV ParserOpts)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result ParserOpts)
-&gt; PV ParserOpts
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682769709"><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769709"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621682769710"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769710"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; ParserOpts -&gt; PV_Result ParserOpts
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769710"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">(ParserOpts -&gt; PV_Result ParserOpts)
-&gt; ParserOpts -&gt; PV_Result ParserOpts
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">PV_Context -&gt; ParserOpts
</span><a href="GHC.Parser.PostProcess.html#pv_options"><span class="hs-identifier hs-var">pv_options</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Context
</span><a href="#local-6989586621682769709"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-3366"></span><span>  </span><span id="local-6989586621682769713"><span class="annot"><span class="annottext">allocateCommentsP :: RealSrcSpan -&gt; PV EpAnnComments
</span><a href="#local-6989586621682769713"><span class="hs-identifier hs-var hs-var hs-var">allocateCommentsP</span></a></span></span><span> </span><span id="local-6989586621682769715"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769715"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
 -&gt; PV EpAnnComments)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">PV_Context
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769716"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769716"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3367"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[LEpaComment] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769716"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PV_Accum -&gt; EpAnnComments -&gt; PV_Result EpAnnComments
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769716"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span> </span><span class="hs-keyword">else</span><span>  </span><span class="hs-comment">-- fast path</span><span>
</span><span id="line-3368"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769717"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769717"><span class="hs-identifier hs-var">comment_q'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769718"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769718"><span class="hs-identifier hs-var">newAnns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; [LEpaComment] -&gt; ([LEpaComment], [LEpaComment])
</span><a href="GHC.Parser.Lexer.html#allocateComments"><span class="hs-identifier hs-var">allocateComments</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769715"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769716"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-3369"></span><span>      </span><span class="annot"><span class="annottext">PV_Accum -&gt; EpAnnComments -&gt; PV_Result EpAnnComments
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769716"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3370"></span><span>         </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769717"><span class="hs-identifier hs-type">comment_q'</span></a></span><span>
</span><span id="line-3371"></span><span>       </span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LEpaComment] -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#EpaComments"><span class="hs-identifier hs-var">EpaComments</span></a></span><span> </span><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769718"><span class="hs-identifier hs-var">newAnns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3372"></span><span>  </span><span id="local-6989586621682769721"><span class="annot"><span class="annottext">allocatePriorCommentsP :: RealSrcSpan -&gt; PV EpAnnComments
</span><a href="#local-6989586621682769721"><span class="hs-identifier hs-var hs-var hs-var">allocatePriorCommentsP</span></a></span></span><span> </span><span id="local-6989586621682769723"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769723"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
 -&gt; PV EpAnnComments)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">PV_Context
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769724"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769724"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3373"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769725"><span class="annot"><span class="annottext">Maybe [LEpaComment]
</span><a href="#local-6989586621682769725"><span class="hs-identifier hs-var">header_comments'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769726"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769726"><span class="hs-identifier hs-var">comment_q'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769727"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769727"><span class="hs-identifier hs-var">newAnns</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-3374"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
-&gt; [LEpaComment]
-&gt; Maybe [LEpaComment]
-&gt; (Maybe [LEpaComment], [LEpaComment], [LEpaComment])
</span><a href="GHC.Parser.Lexer.html#allocatePriorComments"><span class="hs-identifier hs-var">allocatePriorComments</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769723"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769724"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; Maybe [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var">pv_header_comments</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769724"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-3375"></span><span>      </span><span class="annot"><span class="annottext">PV_Accum -&gt; EpAnnComments -&gt; PV_Result EpAnnComments
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769724"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3376"></span><span>         </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var">pv_header_comments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769725"><span class="hs-identifier hs-type">header_comments'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3377"></span><span>         </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769726"><span class="hs-identifier hs-type">comment_q'</span></a></span><span>
</span><span id="line-3378"></span><span>       </span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LEpaComment] -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#EpaComments"><span class="hs-identifier hs-var">EpaComments</span></a></span><span> </span><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769727"><span class="hs-identifier hs-var">newAnns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3379"></span><span>  </span><span id="local-6989586621682769729"><span class="annot"><span class="annottext">allocateFinalCommentsP :: RealSrcSpan -&gt; PV EpAnnComments
</span><a href="#local-6989586621682769729"><span class="hs-identifier hs-var hs-var hs-var">allocateFinalCommentsP</span></a></span></span><span> </span><span id="local-6989586621682769731"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769731"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a. (PV_Context -&gt; PV_Accum -&gt; PV_Result a) -&gt; PV a
</span><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-var">PV</span></a></span><span> </span><span class="annot"><span class="annottext">((PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
 -&gt; PV EpAnnComments)
-&gt; (PV_Context -&gt; PV_Accum -&gt; PV_Result EpAnnComments)
-&gt; PV EpAnnComments
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">PV_Context
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682769732"><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769732"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3380"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769733"><span class="annot"><span class="annottext">Maybe [LEpaComment]
</span><a href="#local-6989586621682769733"><span class="hs-identifier hs-var">header_comments'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769734"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769734"><span class="hs-identifier hs-var">comment_q'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769735"><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769735"><span class="hs-identifier hs-var">newAnns</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-3381"></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
-&gt; [LEpaComment]
-&gt; Maybe [LEpaComment]
-&gt; (Maybe [LEpaComment], [LEpaComment], [LEpaComment])
</span><a href="GHC.Parser.Lexer.html#allocateFinalComments"><span class="hs-identifier hs-var">allocateFinalComments</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769731"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769732"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PV_Accum -&gt; Maybe [LEpaComment]
</span><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var">pv_header_comments</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769732"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-3382"></span><span>      </span><span class="annot"><span class="annottext">PV_Accum -&gt; EpAnnComments -&gt; PV_Result EpAnnComments
forall a. PV_Accum -&gt; a -&gt; PV_Result a
</span><a href="GHC.Parser.PostProcess.html#PV_Ok"><span class="hs-identifier hs-var">PV_Ok</span></a></span><span> </span><span class="annot"><span class="annottext">PV_Accum
</span><a href="#local-6989586621682769732"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3383"></span><span>         </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_header_comments"><span class="hs-identifier hs-var">pv_header_comments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769733"><span class="hs-identifier hs-type">header_comments'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3384"></span><span>         </span><span class="annot"><a href="GHC.Parser.PostProcess.html#pv_comment_q"><span class="hs-identifier hs-var">pv_comment_q</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682769734"><span class="hs-identifier hs-type">comment_q'</span></a></span><span>
</span><span id="line-3385"></span><span>       </span><span class="hs-special">}</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LEpaComment] -&gt; [LEpaComment] -&gt; EpAnnComments
</span><a href="GHC.Parser.Annotation.html#EpaCommentsBalanced"><span class="hs-identifier hs-var">EpaCommentsBalanced</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LEpaComment] -&gt; Maybe [LEpaComment] -&gt; [LEpaComment]
forall a. a -&gt; Maybe a -&gt; a
</span><a href="GHC.Data.Strict.html#fromMaybe"><span class="hs-identifier hs-var">Strict.fromMaybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe [LEpaComment]
</span><a href="#local-6989586621682769733"><span class="hs-identifier hs-var">header_comments'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LEpaComment]
</span><a href="#local-6989586621682769735"><span class="hs-identifier hs-var">newAnns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3386"></span><span>
</span><span id="line-3387"></span><span class="hs-comment">{- Note [Parser-Validator Details]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A PV computation is parameterized by some 'ParseContext' for diagnostic messages, which can be set
depending on validation context. We use this in checkPattern to fix #984.

Consider this example, where the user has forgotten a 'do':

  f _ = do
    x &lt;- computation
    case () of
      _ -&gt;
        result &lt;- computation
        case () of () -&gt; undefined

GHC parses it as follows:

  f _ = do
    x &lt;- computation
    (case () of
      _ -&gt;
        result) &lt;- computation
        case () of () -&gt; undefined

Note that this fragment is parsed as a pattern:

  case () of
    _ -&gt;
      result

We attempt to detect such cases and add a hint to the diagnostic messages:

  T984.hs:6:9:
    Parse error in pattern: case () of { _ -&gt; result }
    Possibly caused by a missing 'do'?

The &quot;Possibly caused by a missing 'do'?&quot; suggestion is the hint that is computed
out of the 'ParseContext', which are read by functions like 'patFail' when
constructing the 'PsParseErrorInPatDetails' data structure. When validating in a
context other than 'bindpat' (a pattern to the left of &lt;-), we set the
details to 'noParseContext' and it has no effect on the diagnostic messages.

-}</span><span>
</span><span id="line-3429"></span><span>
</span><span id="line-3430"></span><span class="annot"><span class="hs-comment">-- | Hint about bang patterns, assuming @BangPatterns@ is off.</span></span><span>
</span><span id="line-3431"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#hintBangPat"><span class="hs-identifier hs-type">hintBangPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-3432"></span><span id="hintBangPat"><span class="annot"><span class="annottext">hintBangPat :: SrcSpan -&gt; Pat GhcPs -&gt; PV ()
</span><a href="GHC.Parser.PostProcess.html#hintBangPat"><span class="hs-identifier hs-var hs-var">hintBangPat</span></a></span></span><span> </span><span id="local-6989586621682769739"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769739"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span id="local-6989586621682769740"><span class="annot"><span class="annottext">Pat GhcPs
</span><a href="#local-6989586621682769740"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3433"></span><span>    </span><span id="local-6989586621682769741"><span class="annot"><a href="#local-6989586621682769741"><span class="hs-identifier hs-var">bang_on</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; PV Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#BangPatBit"><span class="hs-identifier hs-var">BangPatBit</span></a></span><span>
</span><span id="line-3434"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">unless</span></span><span> </span><span class="annot"><a href="#local-6989586621682769741"><span class="hs-identifier hs-type">bang_on</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-3435"></span><span>      </span><span class="annot"><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-type">addError</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769739"><span class="hs-identifier hs-type">span</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrIllegalBangPattern"><span class="hs-identifier hs-type">PsErrIllegalBangPattern</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769740"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-3436"></span><span>
</span><span id="line-3437"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTupleExpr"><span class="hs-identifier hs-type">mkSumOrTupleExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#SumOrTuple"><span class="hs-identifier hs-type">SumOrTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3438"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3439"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3440"></span><span>
</span><span id="line-3441"></span><span class="hs-comment">-- Tuple</span><span>
</span><span id="line-3442"></span><span id="mkSumOrTupleExpr"><span class="annot"><span class="annottext">mkSumOrTupleExpr :: SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (HsExpr GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (LHsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTupleExpr"><span class="hs-identifier hs-var hs-var">mkSumOrTupleExpr</span></a></span></span><span> </span><span id="local-6989586621682769744"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682769744"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682769745"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769745"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682769746"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682769746"><span class="hs-identifier hs-var">an</span></a></span></span><span> </span><span id="local-6989586621682769747"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682769747"><span class="hs-identifier hs-var">csIn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769748"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682769748"><span class="hs-identifier hs-var">boxity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#Tuple"><span class="hs-identifier hs-type">Tuple</span></a></span><span> </span><span id="local-6989586621682769750"><span class="annot"><span class="annottext">[Either (EpAnn Bool) (GenLocated SrcSpanAnnA (HsExpr GhcPs))]
</span><a href="#local-6989586621682769750"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769751"><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><a href="#local-6989586621682769751"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3443"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682769752"><span class="annot"><a href="#local-6989586621682769752"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769744"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3444"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769745"><span class="hs-identifier hs-type">anc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769746"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682769747"><span class="hs-identifier hs-type">csIn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682769752"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-type">ExplicitTuple</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769751"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621682769753"><span class="hs-identifier hs-type">toTupArg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769750"><span class="hs-identifier hs-type">es</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682769748"><span class="hs-identifier hs-type">boxity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3445"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3446"></span><span>    </span><span class="annot"><a href="#local-6989586621682769753"><span class="hs-identifier hs-type">toTupArg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsTupArg"><span class="hs-identifier hs-type">HsTupArg</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3447"></span><span>    </span><span id="local-6989586621682769753"><span class="annot"><span class="annottext">toTupArg :: Either (EpAnn Bool) (LHsExpr GhcPs) -&gt; HsTupArg GhcPs
</span><a href="#local-6989586621682769753"><span class="hs-identifier hs-var hs-var">toTupArg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621682769754"><span class="annot"><span class="annottext">EpAnn Bool
</span><a href="#local-6989586621682769754"><span class="hs-identifier hs-var">ann</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnn Bool -&gt; HsTupArg GhcPs
</span><a href="GHC.Hs.Utils.html#missingTupArg"><span class="hs-identifier hs-var">missingTupArg</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnn Bool
</span><a href="#local-6989586621682769754"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-3448"></span><span>    </span><span class="annot"><a href="#local-6989586621682769753"><span class="hs-identifier hs-var">toTupArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682769756"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769756"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XPresent GhcPs -&gt; LHsExpr GhcPs -&gt; HsTupArg GhcPs
forall id. XPresent id -&gt; LHsExpr id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-var">Present</span></a></span><span> </span><span class="annot"><span class="annottext">XPresent GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769756"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-3449"></span><span>
</span><span id="line-3450"></span><span class="hs-comment">-- Sum</span><span>
</span><span id="line-3451"></span><span class="hs-comment">-- mkSumOrTupleExpr l Unboxed (Sum alt arity e) =</span><span>
</span><span id="line-3452"></span><span class="hs-comment">--     return $ L l (ExplicitSum noExtField alt arity e)</span><span>
</span><span id="line-3453"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTupleExpr"><span class="hs-identifier hs-var">mkSumOrTupleExpr</span></a></span><span> </span><span id="local-6989586621682769758"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621682769758"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span id="local-6989586621682769759"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769759"><span class="hs-identifier hs-var">anc</span></a></span></span><span> </span><span id="local-6989586621682769760"><span class="annot"><span class="annottext">AnnListItem
</span><a href="#local-6989586621682769760"><span class="hs-identifier hs-var">anIn</span></a></span></span><span> </span><span id="local-6989586621682769761"><span class="annot"><span class="annottext">EpAnnComments
</span><a href="#local-6989586621682769761"><span class="hs-identifier hs-var">csIn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621682769763"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769763"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621682769764"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769764"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621682769765"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769765"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682769766"><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769766"><span class="hs-identifier hs-var">barsp</span></a></span></span><span> </span><span id="local-6989586621682769767"><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769767"><span class="hs-identifier hs-var">barsa</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682769768"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769768"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682769769"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769769"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3454"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769770"><span class="annot"><span class="annottext">an :: AnnExplicitSum
</span><a href="#local-6989586621682769770"><span class="hs-identifier hs-var hs-var hs-var">an</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation
-&gt; [EpToken &quot;|&quot;] -&gt; [EpToken &quot;|&quot;] -&gt; EpaLocation -&gt; AnnExplicitSum
</span><a href="GHC.Hs.Expr.html#AnnExplicitSum"><span class="hs-identifier hs-var">AnnExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769768"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769766"><span class="hs-identifier hs-var">barsp</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769767"><span class="hs-identifier hs-var">barsa</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769769"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-3455"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621682769772"><span class="annot"><a href="#local-6989586621682769772"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PV EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769758"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3456"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769759"><span class="hs-identifier hs-type">anc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769760"><span class="hs-identifier hs-type">anIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682769761"><span class="hs-identifier hs-type">csIn</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621682769772"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-type">ExplicitSum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769770"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769763"><span class="hs-identifier hs-type">alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769764"><span class="hs-identifier hs-type">arity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769765"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3457"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTupleExpr"><span class="hs-identifier hs-var">mkSumOrTupleExpr</span></a></span><span> </span><span id="local-6989586621682769774"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769774"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span> </span><span id="local-6989586621682769775"><span class="annot"><span class="annottext">a :: SumOrTuple (HsExpr GhcPs)
</span><a href="#local-6989586621682769775"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Parser.Types.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3458"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LHsExpr GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LHsExpr GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (LHsExpr GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769774"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SumOrTuple (HsExpr GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnsupportedBoxedSumExpr"><span class="hs-identifier hs-var">PsErrUnsupportedBoxedSumExpr</span></a></span><span> </span><span class="annot"><span class="annottext">SumOrTuple (HsExpr GhcPs)
</span><a href="#local-6989586621682769775"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-3459"></span><span>
</span><span id="line-3460"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePat"><span class="hs-identifier hs-type">mkSumOrTuplePat</span></a></span><span>
</span><span id="line-3461"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Types.html#SumOrTuple"><span class="hs-identifier hs-type">SumOrTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpaLocation"><span class="hs-identifier hs-type">EpaLocation</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3462"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3463"></span><span>
</span><span id="line-3464"></span><span class="hs-comment">-- Tuple</span><span>
</span><span id="line-3465"></span><span id="mkSumOrTuplePat"><span class="annot"><span class="annottext">mkSumOrTuplePat :: SrcSpanAnnA
-&gt; Boxity
-&gt; SumOrTuple (PatBuilder GhcPs)
-&gt; (EpaLocation, EpaLocation)
-&gt; PV (LocatedA (PatBuilder GhcPs))
</span><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePat"><span class="hs-identifier hs-var hs-var">mkSumOrTuplePat</span></a></span></span><span> </span><span id="local-6989586621682769777"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769777"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769778"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682769778"><span class="hs-identifier hs-var">boxity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#Tuple"><span class="hs-identifier hs-type">Tuple</span></a></span><span> </span><span id="local-6989586621682769779"><span class="annot"><span class="annottext">[Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))]
</span><a href="#local-6989586621682769779"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769780"><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><a href="#local-6989586621682769780"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3466"></span><span>  </span><span id="local-6989586621682769781"><span class="annot"><a href="#local-6989586621682769781"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
 -&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs)))
-&gt; [Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))]
-&gt; PV [GenLocated SrcSpanAnnA (Pat GhcPs)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
-&gt; PV (LPat GhcPs)
Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
-&gt; PV (GenLocated SrcSpanAnnA (Pat GhcPs))
</span><a href="#local-6989586621682769782"><span class="hs-identifier hs-var">toTupPat</span></a></span><span> </span><span class="annot"><span class="annottext">[Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))]
</span><a href="#local-6989586621682769779"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-3467"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769777"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769780"><span class="hs-identifier hs-type">anns</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769781"><span class="hs-identifier hs-type">ps'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769778"><span class="hs-identifier hs-type">boxity</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3468"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3469"></span><span>    </span><span class="annot"><a href="#local-6989586621682769782"><span class="hs-identifier hs-type">toTupPat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilder"><span class="hs-identifier hs-type">PatBuilder</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.html#PV"><span class="hs-identifier hs-type">PV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3470"></span><span>    </span><span class="hs-comment">-- Ignore the element location so that the error message refers to the</span><span>
</span><span id="line-3471"></span><span>    </span><span class="hs-comment">-- entire tuple. See #19504 (and the discussion) for details.</span><span>
</span><span id="line-3472"></span><span>    </span><span id="local-6989586621682769782"><span class="annot"><span class="annottext">toTupPat :: Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
-&gt; PV (LPat GhcPs)
</span><a href="#local-6989586621682769782"><span class="hs-identifier hs-var hs-var">toTupPat</span></a></span></span><span> </span><span id="local-6989586621682769784"><span class="annot"><span class="annottext">Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682769784"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either (EpAnn Bool) (LocatedA (PatBuilder GhcPs))
</span><a href="#local-6989586621682769784"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-3473"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">EpAnn Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LPat GhcPs)
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LPat GhcPs))
-&gt; MsgEnvelope PsMessage -&gt; PV (LPat GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3474"></span><span>                  </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769777"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrTupleSectionInPat"><span class="hs-identifier hs-var">PsErrTupleSectionInPat</span></a></span><span>
</span><span id="line-3475"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621682769786"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682769786"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682769786"><span class="hs-identifier hs-var">p'</span></a></span><span>
</span><span id="line-3476"></span><span>
</span><span id="line-3477"></span><span class="hs-comment">-- Sum</span><span>
</span><span id="line-3478"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePat"><span class="hs-identifier hs-var">mkSumOrTuplePat</span></a></span><span> </span><span id="local-6989586621682769787"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769787"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Unboxed"><span class="hs-identifier hs-var">Unboxed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span> </span><span id="local-6989586621682769788"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769788"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621682769789"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769789"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span id="local-6989586621682769790"><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682769790"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621682769791"><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769791"><span class="hs-identifier hs-var">barsb</span></a></span></span><span> </span><span id="local-6989586621682769792"><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769792"><span class="hs-identifier hs-var">barsa</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769793"><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><a href="#local-6989586621682769793"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3479"></span><span>   </span><span id="local-6989586621682769794"><span class="annot"><a href="#local-6989586621682769794"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs) -&gt; PV (LPat GhcPs)
</span><a href="GHC.Parser.PostProcess.html#checkLPat"><span class="hs-identifier hs-var">checkLPat</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedA (PatBuilder GhcPs)
</span><a href="#local-6989586621682769790"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-3480"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769795"><span class="annot"><a href="#local-6989586621682769795"><span class="hs-identifier hs-var hs-var">an</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
-&gt; [EpToken &quot;|&quot;] -&gt; [EpToken &quot;|&quot;] -&gt; EpAnnSumPat
</span><a href="GHC.Hs.Pat.html#EpAnnSumPat"><span class="hs-identifier hs-var">EpAnnSumPat</span></a></span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><a href="#local-6989586621682769793"><span class="hs-identifier hs-var">anns</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769791"><span class="hs-identifier hs-var">barsb</span></a></span><span> </span><span class="annot"><span class="annottext">[EpToken &quot;|&quot;]
</span><a href="#local-6989586621682769792"><span class="hs-identifier hs-var">barsa</span></a></span><span>
</span><span id="line-3481"></span><span>   </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769787"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Types.html#PatBuilderPat"><span class="hs-identifier hs-type">PatBuilderPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769795"><span class="hs-identifier hs-type">an</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769794"><span class="hs-identifier hs-type">p'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769788"><span class="hs-identifier hs-type">alt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769789"><span class="hs-identifier hs-type">arity</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3482"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkSumOrTuplePat"><span class="hs-identifier hs-var">mkSumOrTuplePat</span></a></span><span> </span><span id="local-6989586621682769798"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769798"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="Language.Haskell.Syntax.Basic.html#Boxed"><span class="hs-identifier hs-var">Boxed</span></a></span><span> </span><span id="local-6989586621682769799"><span class="annot"><span class="annottext">a :: SumOrTuple (PatBuilder GhcPs)
</span><a href="#local-6989586621682769799"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Parser.Types.html#Sum"><span class="hs-identifier hs-type">Sum</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">(EpaLocation, EpaLocation)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3483"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a. MsgEnvelope PsMessage -&gt; PV a
forall (m :: * -&gt; *) a. MonadP m =&gt; MsgEnvelope PsMessage -&gt; m a
</span><a href="GHC.Parser.Lexer.html#addFatalError"><span class="hs-identifier hs-var">addFatalError</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs)))
-&gt; MsgEnvelope PsMessage -&gt; PV (LocatedA (PatBuilder GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-3484"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769798"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PsMessage -&gt; MsgEnvelope PsMessage)
-&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SumOrTuple (PatBuilder GhcPs) -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrUnsupportedBoxedSumPat"><span class="hs-identifier hs-var">PsErrUnsupportedBoxedSumPat</span></a></span><span> </span><span class="annot"><span class="annottext">SumOrTuple (PatBuilder GhcPs)
</span><a href="#local-6989586621682769799"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-3485"></span><span>
</span><span id="line-3486"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkLHsOpTy"><span class="hs-identifier hs-type">mkLHsOpTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PromotionFlag"><span class="hs-identifier hs-type">PromotionFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3487"></span><span id="mkLHsOpTy"><span class="annot"><span class="annottext">mkLHsOpTy :: PromotionFlag
-&gt; LHsType GhcPs
-&gt; LocatedN RdrName
-&gt; LHsType GhcPs
-&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkLHsOpTy"><span class="hs-identifier hs-var hs-var">mkLHsOpTy</span></a></span></span><span> </span><span id="local-6989586621682769801"><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682769801"><span class="hs-identifier hs-var">prom</span></a></span></span><span> </span><span id="local-6989586621682769802"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769802"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621682769803"><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769803"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621682769804"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769804"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3488"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682769805"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621682769805"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769802"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName
</span><a href="#local-6989586621682769803"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-operator hs-var">`combineSrcSpans`</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769804"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-3489"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769805"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PromotionFlag
-&gt; LHsType GhcPs
-&gt; LocatedN (IdP GhcPs)
-&gt; LHsType GhcPs
-&gt; HsType GhcPs
forall (p :: Pass).
(Anno (IdGhcP p) ~ SrcSpanAnnN) =&gt;
PromotionFlag
-&gt; LHsType (GhcPass p)
-&gt; LocatedN (IdP (GhcPass p))
-&gt; LHsType (GhcPass p)
-&gt; HsType (GhcPass p)
</span><a href="GHC.Hs.Type.html#mkHsOpTy"><span class="hs-identifier hs-var">mkHsOpTy</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="#local-6989586621682769801"><span class="hs-identifier hs-var">prom</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769802"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769803"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769804"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3490"></span><span>
</span><span id="line-3491"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultTy"><span class="hs-identifier hs-type">mkMultTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokRarrow"><span class="hs-identifier hs-type">TokRarrow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrow"><span class="hs-identifier hs-type">HsArrow</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3492"></span><span id="mkMultTy"><span class="annot"><span class="annottext">mkMultTy :: EpToken &quot;%&quot; -&gt; LHsType GhcPs -&gt; TokRarrow -&gt; HsArrow GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkMultTy"><span class="hs-identifier hs-var hs-var">mkMultTy</span></a></span></span><span> </span><span id="local-6989586621682769807"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769807"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769808"><span class="annot"><span class="annottext">t :: LHsType GhcPs
</span><a href="#local-6989586621682769808"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">XTyLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsNumTy"><span class="hs-identifier hs-type">HsNumTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;1&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769811"><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769811"><span class="hs-identifier hs-var">arr</span></a></span></span><span>
</span><span id="line-3493"></span><span>  </span><span class="hs-comment">-- See #18888 for the use of (SourceText &quot;1&quot;) above</span><span>
</span><span id="line-3494"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLinearArrow (GenLocated SrcSpanAnnA (HsType GhcPs)) GhcPs
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsType GhcPs)) GhcPs
forall mult pass. XLinearArrow mult pass -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-var">HsLinearArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;%1&quot; -&gt; TokRarrow -&gt; EpLinearArrow
</span><a href="GHC.Hs.Type.html#EpPct1"><span class="hs-identifier hs-var">EpPct1</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%1&quot;
</span><a href="#local-6989586621682769814"><span class="hs-identifier hs-var">pct1</span></a></span><span> </span><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769811"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3495"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3496"></span><span>    </span><span class="hs-comment">-- The location of &quot;%&quot; combined with the location of &quot;1&quot;.</span><span>
</span><span id="line-3497"></span><span>    </span><span class="annot"><a href="#local-6989586621682769814"><span class="hs-identifier hs-type">pct1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%1&quot;</span></span><span>
</span><span id="line-3498"></span><span>    </span><span id="local-6989586621682769814"><span class="annot"><span class="annottext">pct1 :: EpToken &quot;%1&quot;
</span><a href="#local-6989586621682769814"><span class="hs-identifier hs-var hs-var">pct1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SrcSpan -&gt; EpToken &quot;%1&quot;
forall (tok :: Symbol) (tok' :: Symbol).
EpToken tok -&gt; SrcSpan -&gt; EpToken tok'
</span><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769807"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769808"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3499"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultTy"><span class="hs-identifier hs-var">mkMultTy</span></a></span><span> </span><span id="local-6989586621682769816"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769816"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769817"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769817"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682769818"><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769818"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XExplicitMult (GenLocated SrcSpanAnnA (HsType GhcPs)) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsType GhcPs)) GhcPs
forall mult pass.
XExplicitMult mult pass -&gt; mult -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-var">HsExplicitMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769816"><span class="hs-identifier hs-var">pct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769818"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769817"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-3500"></span><span>
</span><span id="line-3501"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultExpr"><span class="hs-identifier hs-type">mkMultExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokRarrow"><span class="hs-identifier hs-type">TokRarrow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsArrowOf"><span class="hs-identifier hs-type">HsArrowOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3502"></span><span id="mkMultExpr"><span class="annot"><span class="annottext">mkMultExpr :: EpToken &quot;%&quot;
-&gt; LHsExpr GhcPs -&gt; TokRarrow -&gt; HsArrowOf (LHsExpr GhcPs) GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkMultExpr"><span class="hs-identifier hs-var hs-var">mkMultExpr</span></a></span></span><span> </span><span id="local-6989586621682769820"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769820"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769821"><span class="annot"><span class="annottext">t :: LHsExpr GhcPs
</span><a href="#local-6989586621682769821"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-type">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#OverLit"><span class="hs-identifier hs-type">OverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Lit.html#HsIntegral"><span class="hs-identifier hs-type">HsIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#IL"><span class="hs-identifier hs-type">IL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;1&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769823"><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769823"><span class="hs-identifier hs-var">arr</span></a></span></span><span>
</span><span id="line-3503"></span><span>  </span><span class="hs-comment">-- See #18888 for the use of (SourceText &quot;1&quot;) above</span><span>
</span><span id="line-3504"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XLinearArrow (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
forall mult pass. XLinearArrow mult pass -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsLinearArrow"><span class="hs-identifier hs-var">HsLinearArrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;%1&quot; -&gt; TokRarrow -&gt; EpLinearArrow
</span><a href="GHC.Hs.Type.html#EpPct1"><span class="hs-identifier hs-var">EpPct1</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%1&quot;
</span><a href="#local-6989586621682769824"><span class="hs-identifier hs-var">pct1</span></a></span><span> </span><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769823"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3505"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3506"></span><span>    </span><span class="hs-comment">-- The location of &quot;%&quot; combined with the location of &quot;1&quot;.</span><span>
</span><span id="line-3507"></span><span>    </span><span class="annot"><a href="#local-6989586621682769824"><span class="hs-identifier hs-type">pct1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%1&quot;</span></span><span>
</span><span id="line-3508"></span><span>    </span><span id="local-6989586621682769824"><span class="annot"><span class="annottext">pct1 :: EpToken &quot;%1&quot;
</span><a href="#local-6989586621682769824"><span class="hs-identifier hs-var hs-var">pct1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SrcSpan -&gt; EpToken &quot;%1&quot;
forall (tok :: Symbol) (tok' :: Symbol).
EpToken tok -&gt; SrcSpan -&gt; EpToken tok'
</span><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769820"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcPs) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769821"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3509"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultExpr"><span class="hs-identifier hs-var">mkMultExpr</span></a></span><span> </span><span id="local-6989586621682769825"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769825"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769826"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769826"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682769827"><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769827"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XExplicitMult (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcPs)
-&gt; HsArrowOf (GenLocated SrcSpanAnnA (HsExpr GhcPs)) GhcPs
forall mult pass.
XExplicitMult mult pass -&gt; mult -&gt; HsArrowOf mult pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitMult"><span class="hs-identifier hs-var">HsExplicitMult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769825"><span class="hs-identifier hs-var">pct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokRarrow
</span><a href="#local-6989586621682769827"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769826"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-3510"></span><span>
</span><span id="line-3511"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultAnn"><span class="hs-identifier hs-type">mkMultAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-type">HsMultAnn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3512"></span><span id="mkMultAnn"><span class="annot"><span class="annottext">mkMultAnn :: EpToken &quot;%&quot; -&gt; LHsType GhcPs -&gt; HsMultAnn GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkMultAnn"><span class="hs-identifier hs-var hs-var">mkMultAnn</span></a></span></span><span> </span><span id="local-6989586621682769828"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769828"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769829"><span class="annot"><span class="annottext">t :: LHsType GhcPs
</span><a href="#local-6989586621682769829"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsTyLit"><span class="hs-identifier hs-type">HsTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">XTyLit GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsNumTy"><span class="hs-identifier hs-type">HsNumTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; String
</span><a href="GHC.Data.FastString.html#unpackFS"><span class="hs-identifier hs-var">unpackFS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;1&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3513"></span><span>  </span><span class="hs-comment">-- See #18888 for the use of (SourceText &quot;1&quot;) above</span><span>
</span><span id="line-3514"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XPct1Ann GhcPs -&gt; HsMultAnn GhcPs
forall pass. XPct1Ann pass -&gt; HsMultAnn pass
</span><a href="Language.Haskell.Syntax.Binds.html#HsPct1Ann"><span class="hs-identifier hs-var">HsPct1Ann</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%1&quot;
XPct1Ann GhcPs
</span><a href="#local-6989586621682769831"><span class="hs-identifier hs-var">pct1</span></a></span><span>
</span><span id="line-3515"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3516"></span><span>    </span><span class="hs-comment">-- The location of &quot;%&quot; combined with the location of &quot;1&quot;.</span><span>
</span><span id="line-3517"></span><span>    </span><span class="annot"><a href="#local-6989586621682769831"><span class="hs-identifier hs-type">pct1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;%1&quot;</span></span><span>
</span><span id="line-3518"></span><span>    </span><span id="local-6989586621682769831"><span class="annot"><span class="annottext">pct1 :: EpToken &quot;%1&quot;
</span><a href="#local-6989586621682769831"><span class="hs-identifier hs-var hs-var">pct1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot; -&gt; SrcSpan -&gt; EpToken &quot;%1&quot;
forall (tok :: Symbol) (tok' :: Symbol).
EpToken tok -&gt; SrcSpan -&gt; EpToken tok'
</span><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769828"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769829"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3519"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkMultAnn"><span class="hs-identifier hs-var">mkMultAnn</span></a></span><span> </span><span id="local-6989586621682769832"><span class="annot"><span class="annottext">EpToken &quot;%&quot;
</span><a href="#local-6989586621682769832"><span class="hs-identifier hs-var">pct</span></a></span></span><span> </span><span id="local-6989586621682769833"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621682769833"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XMultAnn GhcPs -&gt; LHsType (NoGhcTc GhcPs) -&gt; HsMultAnn GhcPs
forall pass.
XMultAnn pass -&gt; LHsType (NoGhcTc pass) -&gt; HsMultAnn pass
</span><a href="Language.Haskell.Syntax.Binds.html#HsMultAnn"><span class="hs-identifier hs-var">HsMultAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;%&quot;
XMultAnn GhcPs
</span><a href="#local-6989586621682769832"><span class="hs-identifier hs-var">pct</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType (NoGhcTc GhcPs)
LHsType GhcPs
</span><a href="#local-6989586621682769833"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-3520"></span><span>
</span><span id="line-3521"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTokenLocation"><span class="hs-identifier hs-type">mkTokenLocation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#TokenLocation"><span class="hs-identifier hs-type">TokenLocation</span></a></span><span>
</span><span id="line-3522"></span><span id="mkTokenLocation"><span class="annot"><span class="annottext">mkTokenLocation :: SrcSpan -&gt; TokenLocation
</span><a href="GHC.Parser.PostProcess.html#mkTokenLocation"><span class="hs-identifier hs-var hs-var">mkTokenLocation</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#UnhelpfulSpan"><span class="hs-identifier hs-type">UnhelpfulSpan</span></a></span><span> </span><span class="annot"><span class="annottext">UnhelpfulSpanReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TokenLocation
</span><a href="GHC.Parser.Annotation.html#NoTokenLoc"><span class="hs-identifier hs-var">NoTokenLoc</span></a></span><span>
</span><span id="line-3523"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTokenLocation"><span class="hs-identifier hs-var">mkTokenLocation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span id="local-6989586621682769837"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769837"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682769838"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682769838"><span class="hs-identifier hs-var">mb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; TokenLocation
</span><a href="GHC.Parser.Annotation.html#TokenLoc"><span class="hs-identifier hs-var">TokenLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Maybe BufSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-var">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621682769837"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621682769838"><span class="hs-identifier hs-var">mb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3524"></span><span>
</span><span id="line-3525"></span><span class="hs-comment">-- Precondition: the EpToken has EpaSpan, never EpaDelta.</span><span>
</span><span id="line-3526"></span><span id="local-6989586621682765087"><span id="local-6989586621682765088"><span class="annot"><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-type">epTokenWidenR</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765087"><span class="hs-identifier hs-type">tok</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765088"><span class="hs-identifier hs-type">tok'</span></a></span></span></span><span>
</span><span id="line-3527"></span><span id="epTokenWidenR"><span class="annot"><span class="annottext">epTokenWidenR :: forall (tok :: Symbol) (tok' :: Symbol).
EpToken tok -&gt; SrcSpan -&gt; EpToken tok'
</span><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var hs-var">epTokenWidenR</span></a></span></span><span> </span><span class="annot"><span class="annottext">EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken tok'
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span>
</span><span id="line-3528"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span id="local-6989586621682769842"><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769842"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#UnhelpfulSpan"><span class="hs-identifier hs-type">UnhelpfulSpan</span></a></span><span> </span><span class="annot"><span class="annottext">UnhelpfulSpanReason
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken tok'
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769842"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-3529"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-type">EpaSpan</span></a></span><span> </span><span id="local-6989586621682769843"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769843"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769844"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769844"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpaLocation -&gt; EpToken tok'
forall (tok :: Symbol). EpaLocation -&gt; EpToken tok
</span><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-var">EpTok</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769843"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769844"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3530"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#epTokenWidenR"><span class="hs-identifier hs-var">epTokenWidenR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpTok"><span class="hs-identifier hs-type">EpTok</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#EpaDelta"><span class="hs-identifier hs-type">EpaDelta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3531"></span><span>  </span><span class="hs-comment">-- Never happens because the parser does not produce EpaDelta.</span><span>
</span><span id="line-3532"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; EpToken tok'
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;epTokenWidenR: EpaDelta&quot;</span></span><span>
</span><span id="line-3533"></span><span>
</span><span id="line-3534"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3535"></span><span class="hs-comment">-- Token symbols</span><span>
</span><span id="line-3536"></span><span>
</span><span id="line-3537"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#starSym"><span class="hs-identifier hs-type">starSym</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-3538"></span><span id="starSym"><span class="annot"><span class="annottext">starSym :: Bool -&gt; FastString
</span><a href="GHC.Parser.PostProcess.html#starSym"><span class="hs-identifier hs-var hs-var">starSym</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9733;&quot;</span></span><span>
</span><span id="line-3539"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#starSym"><span class="hs-identifier hs-var">starSym</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;*&quot;</span></span><span>
</span><span id="line-3540"></span><span>
</span><span id="line-3541"></span><span class="hs-comment">-----------------------------------------</span><span>
</span><span id="line-3542"></span><span class="hs-comment">-- Bits and pieces for RecordDotSyntax.</span><span>
</span><span id="line-3543"></span><span>
</span><span id="line-3544"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrGetField"><span class="hs-identifier hs-type">mkRdrGetField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DotFieldOcc"><span class="hs-identifier hs-type">DotFieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3545"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3546"></span><span id="mkRdrGetField"><span class="annot"><span class="annottext">mkRdrGetField :: LHsExpr GhcPs
-&gt; LocatedAn NoEpAnns (DotFieldOcc GhcPs) -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkRdrGetField"><span class="hs-identifier hs-var hs-var">mkRdrGetField</span></a></span></span><span> </span><span id="local-6989586621682769845"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769845"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682769846"><span class="annot"><span class="annottext">LocatedAn NoEpAnns (DotFieldOcc GhcPs)
</span><a href="#local-6989586621682769846"><span class="hs-identifier hs-var">field</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3547"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsGetField"><span class="hs-identifier hs-type">HsGetField</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3548"></span><span>      </span><span class="annot"><span class="annottext">gf_ext :: XGetField GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#gf_ext"><span class="hs-identifier hs-var">gf_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XGetField GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span>
</span><span id="line-3549"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gf_expr :: LHsExpr GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#gf_expr"><span class="hs-identifier hs-var">gf_expr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769845"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-3550"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gf_field :: XRec GhcPs (DotFieldOcc GhcPs)
</span><a href="Language.Haskell.Syntax.Expr.html#gf_field"><span class="hs-identifier hs-var">gf_field</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (DotFieldOcc GhcPs)
LocatedAn NoEpAnns (DotFieldOcc GhcPs)
</span><a href="#local-6989586621682769846"><span class="hs-identifier hs-var">field</span></a></span><span>
</span><span id="line-3551"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-3552"></span><span>
</span><span id="line-3553"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrProjection"><span class="hs-identifier hs-type">mkRdrProjection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DotFieldOcc"><span class="hs-identifier hs-type">DotFieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Expr.html#AnnProjection"><span class="hs-identifier hs-type">AnnProjection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-3554"></span><span id="mkRdrProjection"><span class="annot"><span class="annottext">mkRdrProjection :: NonEmpty (LocatedAn NoEpAnns (DotFieldOcc GhcPs))
-&gt; AnnProjection -&gt; HsExpr GhcPs
</span><a href="GHC.Parser.PostProcess.html#mkRdrProjection"><span class="hs-identifier hs-var hs-var">mkRdrProjection</span></a></span></span><span> </span><span id="local-6989586621682769851"><span class="annot"><span class="annottext">NonEmpty (LocatedAn NoEpAnns (DotFieldOcc GhcPs))
</span><a href="#local-6989586621682769851"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span id="local-6989586621682769852"><span class="annot"><span class="annottext">AnnProjection
</span><a href="#local-6989586621682769852"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3555"></span><span>  </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsProjection"><span class="hs-identifier hs-type">HsProjection</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3556"></span><span>      </span><span class="annot"><span class="annottext">proj_ext :: XProjection GhcPs
</span><a href="Language.Haskell.Syntax.Expr.html#proj_ext"><span class="hs-identifier hs-var">proj_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XProjection GhcPs
AnnProjection
</span><a href="#local-6989586621682769852"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-3557"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">proj_flds :: NonEmpty (DotFieldOcc GhcPs)
</span><a href="Language.Haskell.Syntax.Expr.html#proj_flds"><span class="hs-identifier hs-var">proj_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedAn NoEpAnns (DotFieldOcc GhcPs) -&gt; DotFieldOcc GhcPs)
-&gt; NonEmpty (LocatedAn NoEpAnns (DotFieldOcc GhcPs))
-&gt; NonEmpty (DotFieldOcc GhcPs)
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">LocatedAn NoEpAnns (DotFieldOcc GhcPs) -&gt; DotFieldOcc GhcPs
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LocatedAn NoEpAnns (DotFieldOcc GhcPs))
</span><a href="#local-6989586621682769851"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-3558"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-3559"></span><span>
</span><span id="line-3560"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrProjUpdate"><span class="hs-identifier hs-type">mkRdrProjUpdate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnnA"><span class="hs-identifier hs-type">SrcSpanAnnA</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#DotFieldOcc"><span class="hs-identifier hs-type">DotFieldOcc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3561"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;=&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-3562"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsRecProj"><span class="hs-identifier hs-type">LHsRecProj</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3563"></span><span id="mkRdrProjUpdate"><span class="annot"><span class="annottext">mkRdrProjUpdate :: SrcSpanAnnA
-&gt; Located [LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
-&gt; LHsExpr GhcPs
-&gt; Bool
-&gt; Maybe (EpToken &quot;=&quot;)
-&gt; LHsRecProj GhcPs (LHsExpr GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkRdrProjUpdate"><span class="hs-identifier hs-var hs-var">mkRdrProjUpdate</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
        (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkRdrProjUpdate: The impossible has happened!&quot;</span></span><span>
</span><span id="line-3564"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkRdrProjUpdate"><span class="hs-identifier hs-var">mkRdrProjUpdate</span></a></span><span> </span><span id="local-6989586621682769856"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769856"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682769857"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769857"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682769858"><span class="annot"><span class="annottext">[LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
</span><a href="#local-6989586621682769858"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682769859"><span class="annot"><span class="annottext">LHsExpr GhcPs
</span><a href="#local-6989586621682769859"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621682769860"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769860"><span class="hs-identifier hs-var">isPun</span></a></span></span><span> </span><span id="local-6989586621682769861"><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
</span><a href="#local-6989586621682769861"><span class="hs-identifier hs-var">anns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3565"></span><span>  </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsFieldBind
     (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
     (GenLocated SrcSpanAnnA (HsExpr GhcPs))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
        (GenLocated SrcSpanAnnA (HsExpr GhcPs)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682769856"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-3566"></span><span>      </span><span class="annot"><span class="annottext">hfbAnn :: XHsFieldBind (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
</span><a href="Language.Haskell.Syntax.Pat.html#hfbAnn"><span class="hs-identifier hs-var">hfbAnn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (EpToken &quot;=&quot;)
XHsFieldBind (GenLocated EpAnnCO (FieldLabelStrings GhcPs))
</span><a href="#local-6989586621682769861"><span class="hs-identifier hs-var">anns</span></a></span><span>
</span><span id="line-3567"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbLHS :: GenLocated EpAnnCO (FieldLabelStrings GhcPs)
</span><a href="Language.Haskell.Syntax.Pat.html#hfbLHS"><span class="hs-identifier hs-var">hfbLHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpAnnCO
-&gt; FieldLabelStrings GhcPs
-&gt; GenLocated EpAnnCO (FieldLabelStrings GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; EpAnnCO
forall e. HasAnnotation e =&gt; SrcSpan -&gt; e
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769857"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[XRec GhcPs (DotFieldOcc GhcPs)] -&gt; FieldLabelStrings GhcPs
forall p. [XRec p (DotFieldOcc p)] -&gt; FieldLabelStrings p
</span><a href="Language.Haskell.Syntax.Expr.html#FieldLabelStrings"><span class="hs-identifier hs-var">FieldLabelStrings</span></a></span><span> </span><span class="annot"><span class="annottext">[XRec GhcPs (DotFieldOcc GhcPs)]
[LocatedAn NoEpAnns (DotFieldOcc GhcPs)]
</span><a href="#local-6989586621682769858"><span class="hs-identifier hs-var">flds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3568"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbRHS :: GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcPs
GenLocated SrcSpanAnnA (HsExpr GhcPs)
</span><a href="#local-6989586621682769859"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-3569"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hfbPun :: Bool
</span><a href="Language.Haskell.Syntax.Pat.html#hfbPun"><span class="hs-identifier hs-var">hfbPun</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682769860"><span class="hs-identifier hs-var">isPun</span></a></span><span>
</span><span id="line-3570"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-3571"></span><span>
</span><span id="line-3572"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-3573"></span><span class="hs-comment">-- Tuple and list punning</span><span>
</span><span id="line-3574"></span><span>
</span><span id="line-3575"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#punsAllowed"><span class="hs-identifier hs-type">punsAllowed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-3576"></span><span id="punsAllowed"><span class="annot"><span class="annottext">punsAllowed :: P Bool
</span><a href="GHC.Parser.PostProcess.html#punsAllowed"><span class="hs-identifier hs-var hs-var">punsAllowed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtBits -&gt; P Bool
forall (m :: * -&gt; *). MonadP m =&gt; ExtBits -&gt; m Bool
</span><a href="GHC.Parser.Lexer.html#getBit"><span class="hs-identifier hs-var">getBit</span></a></span><span> </span><span class="annot"><span class="annottext">ExtBits
</span><a href="GHC.Parser.Lexer.html#ListTuplePunsBit"><span class="hs-identifier hs-var">ListTuplePunsBit</span></a></span><span>
</span><span id="line-3577"></span><span>
</span><span id="line-3578"></span><span class="hs-comment">-- | Check whether @ListTuplePuns@ is enabled and return the first arg if it is,</span><span>
</span><span id="line-3579"></span><span class="hs-comment">-- the second arg otherwise.</span><span>
</span><span id="line-3580"></span><span id="local-6989586621682765103"><span class="annot"><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-type">punsIfElse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621682765103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682765103"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765103"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-3581"></span><span id="punsIfElse"><span class="annot"><span class="annottext">punsIfElse :: forall a. a -&gt; a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-var hs-var">punsIfElse</span></a></span></span><span> </span><span id="local-6989586621682769870"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769870"><span class="hs-identifier hs-var">enabled</span></a></span></span><span> </span><span id="local-6989586621682769871"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621682769871"><span class="hs-identifier hs-var">disabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3582"></span><span>  </span><span id="local-6989586621682769872"><span class="annot"><a href="#local-6989586621682769872"><span class="hs-identifier hs-var">allowed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">P Bool
</span><a href="GHC.Parser.PostProcess.html#punsAllowed"><span class="hs-identifier hs-var">punsAllowed</span></a></span><span>
</span><span id="line-3583"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621682769872"><span class="hs-identifier hs-type">allowed</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><a href="#local-6989586621682769870"><span class="hs-identifier hs-type">enabled</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><a href="#local-6989586621682769871"><span class="hs-identifier hs-type">disabled</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3584"></span><span>
</span><span id="line-3585"></span><span class="hs-comment">-- | Emit an error of type 'PsErrInvalidPun' with a location from @start@ to</span><span>
</span><span id="line-3586"></span><span class="hs-comment">-- @end@ if the extension @ListTuplePuns@ is disabled.</span><span>
</span><span id="line-3587"></span><span class="hs-comment">--</span><span>
</span><span id="line-3588"></span><span class="hs-comment">-- This is used in Parser.y to guard rules that require punning.</span><span>
</span><span id="line-3589"></span><span id="local-6989586621682765106"><span id="local-6989586621682765107"><span class="annot"><a href="GHC.Parser.PostProcess.html#requireLTPuns"><span class="hs-identifier hs-type">requireLTPuns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html#PsErrPunDetails"><span class="hs-identifier hs-type">PsErrPunDetails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765106"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765107"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-3590"></span><span id="requireLTPuns"><span class="annot"><span class="annottext">requireLTPuns :: forall a b. PsErrPunDetails -&gt; Located a -&gt; Located b -&gt; P ()
</span><a href="GHC.Parser.PostProcess.html#requireLTPuns"><span class="hs-identifier hs-var hs-var">requireLTPuns</span></a></span></span><span> </span><span id="local-6989586621682769877"><span class="annot"><span class="annottext">PsErrPunDetails
</span><a href="#local-6989586621682769877"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621682769878"><span class="annot"><span class="annottext">Located a
</span><a href="#local-6989586621682769878"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621682769879"><span class="annot"><span class="annottext">Located b
</span><a href="#local-6989586621682769879"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3591"></span><span>  </span><span class="annot"><span class="annottext">P Bool -&gt; P () -&gt; P ()
forall (m :: * -&gt; *). Monad m =&gt; m Bool -&gt; m () -&gt; m ()
</span><a href="GHC.Utils.Monad.html#unlessM"><span class="hs-identifier hs-var">unlessM</span></a></span><span> </span><span class="annot"><span class="annottext">P Bool
</span><a href="GHC.Parser.PostProcess.html#punsAllowed"><span class="hs-identifier hs-var">punsAllowed</span></a></span><span> </span><span class="annot"><span class="annottext">(P () -&gt; P ()) -&gt; P () -&gt; P ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3592"></span><span>    </span><span class="annot"><span class="annottext">MsgEnvelope PsMessage -&gt; P ()
forall (m :: * -&gt; *). MonadP m =&gt; MsgEnvelope PsMessage -&gt; m ()
</span><a href="GHC.Parser.Lexer.html#addError"><span class="hs-identifier hs-var">addError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; MsgEnvelope PsMessage
forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769880"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsErrPunDetails -&gt; PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsErrInvalidPun"><span class="hs-identifier hs-var">PsErrInvalidPun</span></a></span><span> </span><span class="annot"><span class="annottext">PsErrPunDetails
</span><a href="#local-6989586621682769877"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3593"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3594"></span><span>    </span><span id="local-6989586621682769880"><span class="annot"><span class="annottext">loc :: SrcSpan
</span><a href="#local-6989586621682769880"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located a -&gt; SrcSpan
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located a
</span><a href="#local-6989586621682769878"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located b -&gt; SrcSpan
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located b
</span><a href="#local-6989586621682769879"><span class="hs-identifier hs-var">end</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3595"></span><span>
</span><span id="line-3596"></span><span class="annot"><span class="hs-comment">-- | Call a parser with a span and its comments given by a start and end token.</span></span><span>
</span><span id="line-3597"></span><span id="local-6989586621682765111"><span id="local-6989586621682765112"><span id="local-6989586621682765113"><span class="annot"><a href="GHC.Parser.PostProcess.html#withCombinedComments"><span class="hs-identifier hs-type">withCombinedComments</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-3598"></span><span>  </span><span class="annot"><a href="GHC.Parser.Annotation.html#HasLoc"><span class="hs-identifier hs-type">HasLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765111"><span class="hs-identifier hs-type">l1</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-3599"></span><span>  </span><span class="annot"><a href="GHC.Parser.Annotation.html#HasLoc"><span class="hs-identifier hs-type">HasLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765112"><span class="hs-identifier hs-type">l2</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-3600"></span><span>  </span><span class="annot"><a href="#local-6989586621682765111"><span class="hs-identifier hs-type">l1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3601"></span><span>  </span><span class="annot"><a href="#local-6989586621682765112"><span class="hs-identifier hs-type">l2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3602"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765113"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-3603"></span><span>  </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682765113"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-3604"></span><span id="withCombinedComments"><span class="annot"><span class="annottext">withCombinedComments :: forall l1 l2 a.
(HasLoc l1, HasLoc l2) =&gt;
l1 -&gt; l2 -&gt; (SrcSpan -&gt; P a) -&gt; P (LocatedA a)
</span><a href="GHC.Parser.PostProcess.html#withCombinedComments"><span class="hs-identifier hs-var hs-var">withCombinedComments</span></a></span></span><span> </span><span id="local-6989586621682769890"><span class="annot"><span class="annottext">l1
</span><a href="#local-6989586621682769890"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span id="local-6989586621682769891"><span class="annot"><span class="annottext">l2
</span><a href="#local-6989586621682769891"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span id="local-6989586621682769892"><span class="annot"><span class="annottext">SrcSpan -&gt; P a
</span><a href="#local-6989586621682769892"><span class="hs-identifier hs-var">use</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-3605"></span><span>  </span><span id="local-6989586621682769893"><span class="annot"><a href="#local-6989586621682769893"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; P EpAnnComments
forall (m :: * -&gt; *). MonadP m =&gt; SrcSpan -&gt; m EpAnnComments
</span><a href="GHC.Parser.Lexer.html#getCommentsFor"><span class="hs-identifier hs-var">getCommentsFor</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769894"><span class="hs-identifier hs-var">fullSpan</span></a></span><span>
</span><span id="line-3606"></span><span>  </span><span id="local-6989586621682769895"><span class="annot"><a href="#local-6989586621682769895"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621682769892"><span class="hs-identifier hs-type">use</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769894"><span class="hs-identifier hs-type">fullSpan</span></a></span><span>
</span><span id="line-3607"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-type">EpAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#spanAsAnchor"><span class="hs-identifier hs-type">spanAsAnchor</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769894"><span class="hs-identifier hs-type">fullSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-type">noAnn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682769893"><span class="hs-identifier hs-type">cs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621682769895"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3608"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3609"></span><span>    </span><span id="local-6989586621682769894"><span class="annot"><span class="annottext">fullSpan :: SrcSpan
</span><a href="#local-6989586621682769894"><span class="hs-identifier hs-var hs-var">fullSpan</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">l1 -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">l1
</span><a href="#local-6989586621682769890"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">l2 -&gt; SrcSpan
forall a. HasLoc a =&gt; a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getHasLoc"><span class="hs-identifier hs-var">getHasLoc</span></a></span><span> </span><span class="annot"><span class="annottext">l2
</span><a href="#local-6989586621682769891"><span class="hs-identifier hs-var">end</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3610"></span><span>
</span><span id="line-3611"></span><span class="hs-comment">-- | Decide whether to parse tuple syntax @(Int, Double)@ in a type as a</span><span>
</span><span id="line-3612"></span><span class="hs-comment">-- type or data constructor, based on the extension @ListTuplePuns@.</span><span>
</span><span id="line-3613"></span><span class="hs-comment">-- The case with an explicit promotion quote, @'(Int, Double)@, is handled</span><span>
</span><span id="line-3614"></span><span class="hs-comment">-- by 'mkExplicitTupleTy'.</span><span>
</span><span id="line-3615"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTy"><span class="hs-identifier hs-type">mkTupleSyntaxTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;(&quot;</span></span><span>
</span><span id="line-3616"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-3617"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-3618"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3619"></span><span id="mkTupleSyntaxTy"><span class="annot"><span class="annottext">mkTupleSyntaxTy :: EpToken &quot;(&quot;
-&gt; [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; EpToken &quot;)&quot;
-&gt; P (HsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTy"><span class="hs-identifier hs-var hs-var">mkTupleSyntaxTy</span></a></span></span><span> </span><span id="local-6989586621682769896"><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769896"><span class="hs-identifier hs-var">parOpen</span></a></span></span><span> </span><span id="local-6989586621682769897"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769897"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682769898"><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769898"><span class="hs-identifier hs-var">parClose</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3620"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; HsType GhcPs -&gt; P (HsType GhcPs)
forall a. a -&gt; a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-var">punsIfElse</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769899"><span class="hs-identifier hs-var">enabled</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769900"><span class="hs-identifier hs-var">disabled</span></a></span><span>
</span><span id="line-3621"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3622"></span><span>    </span><span id="local-6989586621682769899"><span class="annot"><span class="annottext">enabled :: HsType GhcPs
</span><a href="#local-6989586621682769899"><span class="hs-identifier hs-var hs-var">enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3623"></span><span>      </span><span class="annot"><span class="annottext">XTupleTy GhcPs -&gt; HsTupleSort -&gt; [LHsType GhcPs] -&gt; HsType GhcPs
forall pass.
XTupleTy pass -&gt; HsTupleSort -&gt; [LHsType pass] -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTupleTy"><span class="hs-identifier hs-var">HsTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">XTupleTy GhcPs
AnnParen
</span><a href="#local-6989586621682769901"><span class="hs-identifier hs-var">annParen</span></a></span><span> </span><span class="annot"><span class="annottext">HsTupleSort
</span><a href="Language.Haskell.Syntax.Type.html#HsBoxedOrConstraintTuple"><span class="hs-identifier hs-var">HsBoxedOrConstraintTuple</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769897"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-3624"></span><span>    </span><span id="local-6989586621682769900"><span class="annot"><span class="annottext">disabled :: HsType GhcPs
</span><a href="#local-6989586621682769900"><span class="hs-identifier hs-var hs-var">disabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3625"></span><span>      </span><span class="annot"><span class="annottext">XExplicitTupleTy GhcPs
-&gt; PromotionFlag -&gt; [LHsType GhcPs] -&gt; HsType GhcPs
forall pass.
XExplicitTupleTy pass
-&gt; PromotionFlag -&gt; [LHsType pass] -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitTupleTy"><span class="hs-identifier hs-var">HsExplicitTupleTy</span></a></span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;'&quot;, EpToken &quot;(&quot;, EpToken &quot;)&quot;)
XExplicitTupleTy GhcPs
</span><a href="#local-6989586621682769902"><span class="hs-identifier hs-var">annsKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsType GhcPs]
[GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621682769897"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-3626"></span><span>
</span><span id="line-3627"></span><span>    </span><span id="local-6989586621682769901"><span class="annot"><span class="annottext">annParen :: AnnParen
</span><a href="#local-6989586621682769901"><span class="hs-identifier hs-var hs-var">annParen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot; -&gt; EpToken &quot;)&quot; -&gt; AnnParen
</span><a href="GHC.Parser.Annotation.html#AnnParens"><span class="hs-identifier hs-var">AnnParens</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769896"><span class="hs-identifier hs-var">parOpen</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769898"><span class="hs-identifier hs-var">parClose</span></a></span><span>
</span><span id="line-3628"></span><span>    </span><span id="local-6989586621682769902"><span class="annot"><span class="annottext">annsKeyword :: (EpToken &quot;'&quot;, EpToken &quot;(&quot;, EpToken &quot;)&quot;)
</span><a href="#local-6989586621682769902"><span class="hs-identifier hs-var hs-var">annsKeyword</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;(&quot;
</span><a href="#local-6989586621682769896"><span class="hs-identifier hs-var">parOpen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;)&quot;
</span><a href="#local-6989586621682769898"><span class="hs-identifier hs-var">parClose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3629"></span><span>
</span><span id="line-3630"></span><span class="hs-comment">-- | Decide whether to parse tuple con syntax @(,)@ in a type as a</span><span>
</span><span id="line-3631"></span><span class="hs-comment">-- type or data constructor, based on the extension @ListTuplePuns@.</span><span>
</span><span id="line-3632"></span><span class="hs-comment">-- The case with an explicit promotion quote, @'(,)@, is handled</span><span>
</span><span id="line-3633"></span><span class="hs-comment">-- by the rule @SIMPLEQUOTE sysdcon_nolist@ in @atype@.</span><span>
</span><span id="line-3634"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTycon"><span class="hs-identifier hs-type">mkTupleSyntaxTycon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Boxity"><span class="hs-identifier hs-type">Boxity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.Reader.html#RdrName"><span class="hs-identifier hs-type">RdrName</span></a></span><span>
</span><span id="line-3635"></span><span id="mkTupleSyntaxTycon"><span class="annot"><span class="annottext">mkTupleSyntaxTycon :: Boxity -&gt; Int -&gt; P RdrName
</span><a href="GHC.Parser.PostProcess.html#mkTupleSyntaxTycon"><span class="hs-identifier hs-var hs-var">mkTupleSyntaxTycon</span></a></span></span><span> </span><span id="local-6989586621682769903"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682769903"><span class="hs-identifier hs-var">boxity</span></a></span></span><span> </span><span id="local-6989586621682769904"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769904"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3636"></span><span>  </span><span class="annot"><span class="annottext">RdrName -&gt; RdrName -&gt; P RdrName
forall a. a -&gt; a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-var">punsIfElse</span></a></span><span>
</span><span id="line-3637"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Int -&gt; TyCon
</span><a href="GHC.Builtin.Types.html#tupleTyCon"><span class="hs-identifier hs-var">tupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682769903"><span class="hs-identifier hs-var">boxity</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769904"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3638"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; RdrName
forall thing. NamedThing thing =&gt; thing -&gt; RdrName
</span><a href="GHC.Types.Name.Reader.html#getRdrName"><span class="hs-identifier hs-var">getRdrName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Boxity -&gt; Int -&gt; DataCon
</span><a href="GHC.Builtin.Types.html#tupleDataCon"><span class="hs-identifier hs-var">tupleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682769903"><span class="hs-identifier hs-var">boxity</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682769904"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-3639"></span><span>
</span><span id="line-3640"></span><span class="hs-comment">-- | Decide whether to parse list tycon syntax @[]@ in a type as a type or data</span><span>
</span><span id="line-3641"></span><span class="hs-comment">-- constructor, based on the extension @ListTuplePuns@.</span><span>
</span><span id="line-3642"></span><span class="hs-comment">-- The case with an explicit promotion quote, @'[]@, is handled by</span><span>
</span><span id="line-3643"></span><span class="hs-comment">-- 'mkExplicitListTy'.</span><span>
</span><span id="line-3644"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy0"><span class="hs-identifier hs-type">mkListSyntaxTy0</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;[&quot;</span></span><span>
</span><span id="line-3645"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-3646"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-3647"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3648"></span><span id="mkListSyntaxTy0"><span class="annot"><span class="annottext">mkListSyntaxTy0 :: EpToken &quot;[&quot; -&gt; EpToken &quot;]&quot; -&gt; SrcSpan -&gt; P (HsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy0"><span class="hs-identifier hs-var hs-var">mkListSyntaxTy0</span></a></span></span><span> </span><span id="local-6989586621682769905"><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769905"><span class="hs-identifier hs-var">brkOpen</span></a></span></span><span> </span><span id="local-6989586621682769906"><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769906"><span class="hs-identifier hs-var">brkClose</span></a></span></span><span> </span><span id="local-6989586621682769907"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769907"><span class="hs-identifier hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3649"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; HsType GhcPs -&gt; P (HsType GhcPs)
forall a. a -&gt; a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-var">punsIfElse</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769908"><span class="hs-identifier hs-var">enabled</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769909"><span class="hs-identifier hs-var">disabled</span></a></span><span>
</span><span id="line-3650"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3651"></span><span>    </span><span id="local-6989586621682769908"><span class="annot"><span class="annottext">enabled :: HsType GhcPs
</span><a href="#local-6989586621682769908"><span class="hs-identifier hs-var hs-var">enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
-&gt; PromotionFlag -&gt; XRec GhcPs (IdP GhcPs) -&gt; HsType GhcPs
forall pass.
XTyVar pass -&gt; PromotionFlag -&gt; LIdP pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsTyVar"><span class="hs-identifier hs-var">HsTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">XTyVar GhcPs
EpToken &quot;'&quot;
forall a. NoAnn a =&gt; a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (IdP GhcPs)
LocatedN RdrName
</span><a href="#local-6989586621682769910"><span class="hs-identifier hs-var">rn</span></a></span><span>
</span><span id="line-3652"></span><span>
</span><span id="line-3653"></span><span>    </span><span class="hs-comment">-- attach the comments only to the RdrName since it's the innermost AST node</span><span>
</span><span id="line-3654"></span><span>    </span><span id="local-6989586621682769910"><span class="annot"><span class="annottext">rn :: LocatedN RdrName
</span><a href="#local-6989586621682769910"><span class="hs-identifier hs-var hs-var">rn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; RdrName -&gt; LocatedN RdrName
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpaLocation -&gt; NameAnn -&gt; EpAnnComments -&gt; SrcSpanAnnN
forall ann. EpaLocation -&gt; ann -&gt; EpAnnComments -&gt; EpAnn ann
</span><a href="GHC.Parser.Annotation.html#EpAnn"><span class="hs-identifier hs-var">EpAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpaLocation
</span><a href="#local-6989586621682769911"><span class="hs-identifier hs-var">fullLoc</span></a></span><span> </span><span class="annot"><span class="annottext">NameAnn
</span><a href="#local-6989586621682769912"><span class="hs-identifier hs-var">rdrNameAnn</span></a></span><span> </span><span class="annot"><span class="annottext">EpAnnComments
</span><a href="GHC.Parser.Annotation.html#emptyComments"><span class="hs-identifier hs-var">emptyComments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RdrName
</span><a href="GHC.Builtin.Types.html#listTyCon_RDR"><span class="hs-identifier hs-var">listTyCon_RDR</span></a></span><span>
</span><span id="line-3655"></span><span>
</span><span id="line-3656"></span><span>    </span><span id="local-6989586621682769909"><span class="annot"><span class="annottext">disabled :: HsType GhcPs
</span><a href="#local-6989586621682769909"><span class="hs-identifier hs-var hs-var">disabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3657"></span><span>      </span><span class="annot"><span class="annottext">XExplicitListTy GhcPs
-&gt; PromotionFlag -&gt; [LHsType GhcPs] -&gt; HsType GhcPs
forall pass.
XExplicitListTy pass
-&gt; PromotionFlag -&gt; [LHsType pass] -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-var">HsExplicitListTy</span></a></span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;'&quot;, EpToken &quot;[&quot;, EpToken &quot;]&quot;)
XExplicitListTy GhcPs
</span><a href="#local-6989586621682769914"><span class="hs-identifier hs-var">annsKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-3658"></span><span>
</span><span id="line-3659"></span><span>    </span><span id="local-6989586621682769912"><span class="annot"><span class="annottext">rdrNameAnn :: NameAnn
</span><a href="#local-6989586621682769912"><span class="hs-identifier hs-var hs-var">rdrNameAnn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameAdornment -&gt; [TrailingAnn] -&gt; NameAnn
</span><a href="GHC.Parser.Annotation.html#NameAnnOnly"><span class="hs-identifier hs-var">NameAnnOnly</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;[&quot; -&gt; EpToken &quot;]&quot; -&gt; NameAdornment
</span><a href="GHC.Parser.Annotation.html#NameSquare"><span class="hs-identifier hs-var">NameSquare</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769905"><span class="hs-identifier hs-var">brkOpen</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769906"><span class="hs-identifier hs-var">brkClose</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-3660"></span><span>    </span><span id="local-6989586621682769914"><span class="annot"><span class="annottext">annsKeyword :: (EpToken &quot;'&quot;, EpToken &quot;[&quot;, EpToken &quot;]&quot;)
</span><a href="#local-6989586621682769914"><span class="hs-identifier hs-var hs-var">annsKeyword</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769905"><span class="hs-identifier hs-var">brkOpen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769906"><span class="hs-identifier hs-var">brkClose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3661"></span><span>    </span><span id="local-6989586621682769911"><span class="annot"><span class="annottext">fullLoc :: EpaLocation
</span><a href="#local-6989586621682769911"><span class="hs-identifier hs-var hs-var">fullLoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; EpaLocation
forall a. SrcSpan -&gt; EpaLocation' a
</span><a href="GHC.Types.SrcLoc.html#EpaSpan"><span class="hs-identifier hs-var">EpaSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682769907"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-3662"></span><span>
</span><span id="line-3663"></span><span class="hs-comment">-- | Decide whether to parse list type syntax @[Int]@ in a type as a</span><span>
</span><span id="line-3664"></span><span class="hs-comment">-- type or data constructor, based on the extension @ListTuplePuns@.</span><span>
</span><span id="line-3665"></span><span class="hs-comment">-- The case with an explicit promotion quote, @'[Int]@, is handled</span><span>
</span><span id="line-3666"></span><span class="hs-comment">-- by 'mkExplicitListTy'.</span><span>
</span><span id="line-3667"></span><span class="annot"><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy1"><span class="hs-identifier hs-type">mkListSyntaxTy1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;[&quot;</span></span><span>
</span><span id="line-3668"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3669"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#EpToken"><span class="hs-identifier hs-type">EpToken</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;]&quot;</span></span><span>
</span><span id="line-3670"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3671"></span><span id="mkListSyntaxTy1"><span class="annot"><span class="annottext">mkListSyntaxTy1 :: EpToken &quot;[&quot;
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; EpToken &quot;]&quot;
-&gt; P (HsType GhcPs)
</span><a href="GHC.Parser.PostProcess.html#mkListSyntaxTy1"><span class="hs-identifier hs-var hs-var">mkListSyntaxTy1</span></a></span></span><span> </span><span id="local-6989586621682769916"><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769916"><span class="hs-identifier hs-var">brkOpen</span></a></span></span><span> </span><span id="local-6989586621682769917"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769917"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621682769918"><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769918"><span class="hs-identifier hs-var">brkClose</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3672"></span><span>  </span><span class="annot"><span class="annottext">HsType GhcPs -&gt; HsType GhcPs -&gt; P (HsType GhcPs)
forall a. a -&gt; a -&gt; P a
</span><a href="GHC.Parser.PostProcess.html#punsIfElse"><span class="hs-identifier hs-var">punsIfElse</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769919"><span class="hs-identifier hs-var">enabled</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621682769920"><span class="hs-identifier hs-var">disabled</span></a></span><span>
</span><span id="line-3673"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-3674"></span><span>    </span><span id="local-6989586621682769919"><span class="annot"><span class="annottext">enabled :: HsType GhcPs
</span><a href="#local-6989586621682769919"><span class="hs-identifier hs-var hs-var">enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XListTy GhcPs -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass. XListTy pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsListTy"><span class="hs-identifier hs-var">HsListTy</span></a></span><span> </span><span class="annot"><span class="annottext">XListTy GhcPs
AnnParen
</span><a href="#local-6989586621682769922"><span class="hs-identifier hs-var">annParen</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769917"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-3675"></span><span>
</span><span id="line-3676"></span><span>    </span><span id="local-6989586621682769920"><span class="annot"><span class="annottext">disabled :: HsType GhcPs
</span><a href="#local-6989586621682769920"><span class="hs-identifier hs-var hs-var">disabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-3677"></span><span>      </span><span class="annot"><span class="annottext">XExplicitListTy GhcPs
-&gt; PromotionFlag -&gt; [LHsType GhcPs] -&gt; HsType GhcPs
forall pass.
XExplicitListTy pass
-&gt; PromotionFlag -&gt; [LHsType pass] -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsExplicitListTy"><span class="hs-identifier hs-var">HsExplicitListTy</span></a></span><span> </span><span class="annot"><span class="annottext">(EpToken &quot;'&quot;, EpToken &quot;[&quot;, EpToken &quot;]&quot;)
XExplicitListTy GhcPs
</span><a href="#local-6989586621682769923"><span class="hs-identifier hs-var">annsKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">PromotionFlag
</span><a href="Language.Haskell.Syntax.Type.html#NotPromoted"><span class="hs-identifier hs-var">NotPromoted</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621682769917"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-3678"></span><span>
</span><span id="line-3679"></span><span>    </span><span id="local-6989586621682769923"><span class="annot"><span class="annottext">annsKeyword :: (EpToken &quot;'&quot;, EpToken &quot;[&quot;, EpToken &quot;]&quot;)
</span><a href="#local-6989586621682769923"><span class="hs-identifier hs-var hs-var">annsKeyword</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpToken &quot;'&quot;
forall (tok :: Symbol). EpToken tok
</span><a href="GHC.Parser.Annotation.html#NoEpTok"><span class="hs-identifier hs-var">NoEpTok</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769916"><span class="hs-identifier hs-var">brkOpen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769918"><span class="hs-identifier hs-var">brkClose</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-3680"></span><span>    </span><span id="local-6989586621682769922"><span class="annot"><span class="annottext">annParen :: AnnParen
</span><a href="#local-6989586621682769922"><span class="hs-identifier hs-var hs-var">annParen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpToken &quot;[&quot; -&gt; EpToken &quot;]&quot; -&gt; AnnParen
</span><a href="GHC.Parser.Annotation.html#AnnParensSquare"><span class="hs-identifier hs-var">AnnParensSquare</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;[&quot;
</span><a href="#local-6989586621682769916"><span class="hs-identifier hs-var">brkOpen</span></a></span><span> </span><span class="annot"><span class="annottext">EpToken &quot;]&quot;
</span><a href="#local-6989586621682769918"><span class="hs-identifier hs-var">brkClose</span></a></span><span>
</span><span id="line-3681"></span></pre></body></html>