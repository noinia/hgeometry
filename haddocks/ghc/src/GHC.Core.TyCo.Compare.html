<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621682570003"><span id="local-6989586621682570004"></span></span><span class="hs-comment">-- (c) The University of Glasgow 2006</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- (c) The GRASP/AQUA Project, Glasgow University, 1998</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MagicHash #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="annot"><span class="hs-comment">-- | Type equality and comparison</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html"><span class="hs-identifier">GHC.Core.TyCo.Compare</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Type equality</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier">eqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeIgnoringMultiplicity"><span class="hs-identifier">eqTypeIgnoringMultiplicity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier">eqTypeX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier">eqTypes</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier">eqVarBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier">pickyEqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier">tcEqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier">tcEqKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier">tcEqTypeNoKindCheck</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier">tcEqTyConApps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#mayLookIdentical"><span class="hs-identifier">mayLookIdentical</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Type comparison</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier">nonDetCmpType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Visiblity comparision</span></span><span>
</span><span id="line-22"></span><span>   </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier">eqForAllVis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier">cmpForAllVis</span></a></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier">typeKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier">coreView</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier">tcSplitAppTyNoView_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier">splitAppTyNoView_maybe</span></a></span><span>
</span><span id="line-29"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#isLevityTy"><span class="hs-identifier">isLevityTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#isRuntimeRepTy"><span class="hs-identifier">isRuntimeRepTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier">isMultiplicityTy</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.FVs.html"><span class="hs-identifier">GHC.Core.TyCo.FVs</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#MultiplicityFlag"><span class="hs-identifier">MultiplicityFlag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/GHC.Base.html"><span class="hs-identifier">GHC.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">reallyUnsafePtrEquality#</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.21.0.0-ae91/src/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">{- GHC.Core.TyCo.Compare overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This module implements type equality and comparison

It uses a few functions from GHC.Core.Type, notably `typeKind`,
so it currently sits &quot;on top of&quot; GHC.Core.Type.
-}</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                       Type equality

     We don't use (==) from class Eq, partly so that we know where
     type equality is called, and partly because there are multiple
     variants.
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-comment">{- Note [Computing equality on types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This module implements type equality, notably `eqType`. This is
&quot;definitional equality&quot; or just &quot;equality&quot; for short.

There are several places within GHC that depend on the precise choice of
definitional equality used. If we change that definition, all these places
must be updated. This Note merely serves as a place for all these places
to refer to, so searching for references to this Note will find every place
that needs to be updated.

* See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep.

* See Historical Note [Typechecker equality vs definitional equality]
  below

Note [Casts and coercions in type comparision]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
As (EQTYPE) in Note [Non-trivial definitional equality] says, our
general plan, implemented by `fullEq`, is:
 (1) ignore both casts and coercions when comparing types,
 (2) instead, compare the /kinds/ of the two types,
     as well as the types themselves

If possible we want to avoid step (2), comparing the kinds; doing so involves
calling `typeKind` and doing another comparision.

When can we avoid doing so?  Answer: we can certainly avoid doing so if the
types we are comparing have no casts or coercions.  But we can do better.
Consider
    eqType (TyConApp T [s1, ..., sn]) (TyConApp T [t1, .., tn])
We are going to call (eqType s1 t1), (eqType s2 t2) etc.

The kinds of `s1` and `t1` must be equal, because these TyConApps are well-kinded,
and both TyConApps are headed by the same T. So the first recursive call to `eqType`
certainly doesn't need to check kinds. If that call returns False, we stop. Otherwise,
we know that `s1` and `t1` are themselves equal (not just their kinds). This
makes the kinds of `s2` and `t2` to be equal, because those kinds come from the
kind of T instantiated with `s1` and `t1` -- which are the same. Thus we do not
need to check the kinds of `s2` and `t2`. By induction, we don't need to check
the kinds of *any* of the types in a TyConApp, and we also do not need to check
the kinds of the TyConApps themselves.

Conclusion:

* casts and coercions under a TyConApp don't matter -- even including type synonyms

* In step (2), use `hasCasts` to tell if there are any casts to worry about. It
  does not look very deep, because TyConApps and FunTys are so common, and it
  doesn't allocate.  The only recursive cases are AppTy and ForAllTy.

Alternative implementation.  Instead of `hasCasts`, we could make the
generic_eq_type function return
  data EqResult = NotEq | EqWithNoCasts | EqWithCasts
Practically free; but stylistically I prefer useing `hasCasts`:
  * `generic_eq_type` can just uses familiar booleans
  * There is a lot more branching with the three-value variant.
  * It separates concerns.  No need to think about cast-tracking when doing the
    equality comparison.
  * Indeed sometimes we omit the kind check unconditionally, so tracking it is just wasted
    work.
I did try both; there was no perceptible perf difference so I chose `hasCasts` version.

Note [Equality on AppTys]
~~~~~~~~~~~~~~~~~~~~~~~~~
In our cast-ignoring equality, we want to say that the following two
are equal:

  (Maybe |&gt; co) (Int |&gt; co')   ~?       Maybe Int

But the left is an AppTy while the right is a TyConApp. The solution is
to use splitAppTyNoView_maybe to break up the TyConApp into its pieces and
then continue. Easy to do, but also easy to forget to do.

Note [Comparing type synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider the task of testing equality between two 'Type's of the form

  TyConApp tc tys1  =  TyConApp tc tys2

where `tc` is a type synonym. A naive way to perform this comparison these
would first expand the synonym and then compare the resulting expansions.

However, this is obviously wasteful and the RHS of `tc` may be large. We'd
prefer to compare `tys1 = tys2`.  When is that sound?  Precisely when the
synonym is not /forgetful/; that is, all its type variables appear in its
RHS -- see `GHC.Core.TyCon.isForgetfulSynTyCon`.

Of course, if we find that the TyCons are *not* equal then we still need to
perform the expansion as their RHSs may still be equal.

This works fine for /equality/, but not for /comparison/.  Consider
   type S a b = (b, a)
Now consider
   S Int Bool `compare` S Char Char
The ordering may depend on whether we expand the synonym or not, and we
don't want the result to depend on that. So for comparison we stick to
/nullary/ synonyms only, which is still useful.

We perform this optimisation in a number of places:

 * GHC.Core.TyCo.Compare.eqType      (works for non-nullary synonyms)
 * GHC.Core.Map.TYpe.eqDeBruijnType  (works for non-nullary synonyms)
 * GHC.Core.Types.nonDetCmpType      (nullary only)

This optimisation is especially helpful for the ubiquitous GHC.Types.Type,
since GHC prefers to use the type synonym over @TYPE 'LiftedRep@ applications
whenever possible. See Note [Using synonyms to compress types] in
GHC.Core.Type for details.

Currently-missed opportunity (#25009):
* In the case of forgetful synonyms, we could still compare the args, pairwise,
  and then compare the RHS's with a suitably extended RnEnv2.  That would avoid
  comparing the same arg repeatedly.  e.g.
      type S a b = (a,a)
  Compare   S &lt;big&gt; y ~ S &lt;big&gt; y
  If we expand, we end up compare &lt;big&gt; with itself twice.

  But since forgetful synonyms are rare, we have not tried this.

Note [Type comparisons using object pointer comparisons]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Quite often we substitute the type from a definition site into
occurrences without a change. This means for code like:
    \x -&gt; (x,x,x)
The type of every `x` will often be represented by a single object
in the heap. We can take advantage of this by shortcutting the equality
check if two types are represented by the same pointer under the hood.
In some cases this reduces compiler allocations by ~2%.

See Note [Pointer comparison operations] in GHC.Builtin.primops.txt.pp

Note [Respecting multiplicity when comparing types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Generally speaking, we respect multiplicities (i.e. the linear part of the type
system) when comparing types.  Doing so is of course crucial during typechecking.

But for reasons described in Note [Linting linearity] in GHC.Core.Lint, it is hard
to ensure that Core is always type-correct when it comes to linearity.  So
* `eqTypeIgnoringMultiplicity` provides a way to compare types that /ignores/ multiplicities
* We use this multiplicity-blind comparison very occasionally, notably
    - in Core Lint: see Note [Linting linearity] in GHC.Core.Lint
    - in rule matching: see Note [Rewrite rules ignore multiplicities in FunTy]
      in GHC.Core.Unify
-}</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier hs-type">tcEqKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-215"></span><span id="tcEqKind"><span class="annot"><span class="annottext">tcEqKind :: HasDebugCallStack =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier hs-var hs-var">tcEqKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type -&gt; Bool
Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-var">tcEqType</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-type">tcEqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-218"></span><span id="tcEqType"><span class="annot"><span class="annottext">tcEqType :: HasDebugCallStack =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-var hs-var">tcEqType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Type -&gt; Bool
Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-var">eqType</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Just like 'tcEqType', but will return True for types of different kinds</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- as long as their non-coercion structure is identical.</span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-type">tcEqTypeNoKindCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-223"></span><span id="tcEqTypeNoKindCheck"><span class="annot"><span class="annottext">tcEqTypeNoKindCheck :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-var hs-var">tcEqTypeNoKindCheck</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeNoKindCheck"><span class="hs-identifier hs-var">eqTypeNoKindCheck</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- | Check whether two TyConApps are the same; if the number of arguments</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- are different, just checks the common prefix of arguments.</span><span>
</span><span id="line-227"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier hs-type">tcEqTyConApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-228"></span><span id="tcEqTyConApps"><span class="annot"><span class="annottext">tcEqTyConApps :: TyCon -&gt; [Type] -&gt; TyCon -&gt; [Type] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier hs-var hs-var">tcEqTyConApps</span></a></span></span><span> </span><span id="local-6989586621682570068"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570068"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570069"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570069"><span class="hs-identifier hs-var">args1</span></a></span></span><span> </span><span id="local-6989586621682570070"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570070"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570071"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570071"><span class="hs-identifier hs-var">args2</span></a></span></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570068"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570070"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><span class="hs-identifier hs-var">and</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; [Type] -&gt; [Type] -&gt; [Bool]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-var">tcEqTypeNoKindCheck</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570069"><span class="hs-identifier hs-var">args1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570071"><span class="hs-identifier hs-var">args2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-comment">-- No kind check necessary: if both arguments are well typed, then</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">-- any difference in the kinds of later arguments would show up</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">-- as differences in earlier (dependent) arguments</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="annot"><span class="hs-comment">-- | Type equality on lists of types, looking through type synonyms</span></span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-type">eqTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-238"></span><span id="eqTypes"><span class="annot"><span class="annottext">eqTypes :: [Type] -&gt; [Type] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-var hs-var">eqTypes</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-var">eqTypes</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570075"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570075"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570076"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570076"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570077"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570077"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570078"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570078"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; Type -&gt; Bool
Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-var">eqType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570075"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570077"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-var">eqTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570076"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570078"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-var">eqTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-type">eqVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- Check that the var lists are the same length</span><span>
</span><span id="line-244"></span><span class="hs-comment">-- and have matching kinds; if so, extend the RnEnv2</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- Returns Nothing if they don't match</span><span>
</span><span id="line-246"></span><span id="eqVarBndrs"><span class="annot"><span class="annottext">eqVarBndrs :: HasCallStack =&gt; RnEnv2 -&gt; [Var] -&gt; [Var] -&gt; Maybe RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var hs-var">eqVarBndrs</span></a></span></span><span> </span><span id="local-6989586621682570084"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570084"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-247"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570084"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span id="local-6989586621682570085"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570085"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570086"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570086"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570087"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621682570087"><span class="hs-identifier hs-var">tvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570088"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570088"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570089"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621682570089"><span class="hs-identifier hs-var">tvs2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-var">eqTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570085"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570086"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570088"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; RnEnv2 -&gt; [Var] -&gt; [Var] -&gt; Maybe RnEnv2
RnEnv2 -&gt; [Var] -&gt; [Var] -&gt; Maybe RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570085"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570086"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570088"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621682570087"><span class="hs-identifier hs-var">tvs1</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621682570089"><span class="hs-identifier hs-var">tvs2</span></a></span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#initRnEnv"><span class="hs-identifier hs-type">initRnEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span>
</span><span id="line-254"></span><span id="initRnEnv"><span class="annot"><span class="annottext">initRnEnv :: Type -&gt; Type -&gt; RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#initRnEnv"><span class="hs-identifier hs-var hs-var">initRnEnv</span></a></span></span><span> </span><span id="local-6989586621682570093"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570093"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621682570094"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570094"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="annot"><span class="annottext">(InScopeSet -&gt; RnEnv2) -&gt; InScopeSet -&gt; RnEnv2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="annot"><span class="annottext">(VarSet -&gt; InScopeSet) -&gt; VarSet -&gt; InScopeSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-255"></span><span>                  </span><span class="annot"><span class="annottext">Type -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570093"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; VarSet -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#unionVarSet"><span class="hs-operator hs-var">`unionVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570094"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-256"></span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeNoKindCheck"><span class="hs-identifier hs-type">eqTypeNoKindCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-258"></span><span id="eqTypeNoKindCheck"><span class="annot"><span class="annottext">eqTypeNoKindCheck :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeNoKindCheck"><span class="hs-identifier hs-var hs-var">eqTypeNoKindCheck</span></a></span></span><span> </span><span id="local-6989586621682570099"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570099"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621682570100"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570100"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect"><span class="hs-identifier hs-var">eq_type_expand_respect</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570099"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570100"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-259"></span><span>
</span><span id="line-260"></span><span class="hs-comment">-- | Type equality comparing both visible and invisible arguments,</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- expanding synonyms and respecting multiplicities.</span><span>
</span><span id="line-262"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-type">eqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-263"></span><span id="eqType"><span class="annot"><span class="annottext">eqType :: HasCallStack =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-var hs-var">eqType</span></a></span></span><span> </span><span id="local-6989586621682570103"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570103"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621682570104"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570104"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var">fullEq</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect"><span class="hs-identifier hs-var">eq_type_expand_respect</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570103"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570104"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="annot"><span class="hs-comment">-- | Compare types with respect to a (presumably) non-empty 'RnEnv2'.</span></span><span>
</span><span id="line-266"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-type">eqTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-267"></span><span id="eqTypeX"><span class="annot"><span class="annottext">eqTypeX :: HasCallStack =&gt; RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-var hs-var">eqTypeX</span></a></span></span><span> </span><span id="local-6989586621682570107"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570107"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570108"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570108"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621682570109"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570109"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var">fullEq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect_x"><span class="hs-identifier hs-var">eq_type_expand_respect_x</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570107"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570108"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570109"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeIgnoringMultiplicity"><span class="hs-identifier hs-type">eqTypeIgnoringMultiplicity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- See Note [Respecting multiplicity when comparing types]</span><span>
</span><span id="line-271"></span><span id="eqTypeIgnoringMultiplicity"><span class="annot"><span class="annottext">eqTypeIgnoringMultiplicity :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeIgnoringMultiplicity"><span class="hs-identifier hs-var hs-var">eqTypeIgnoringMultiplicity</span></a></span></span><span> </span><span id="local-6989586621682570111"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570111"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621682570112"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570112"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var">fullEq</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore"><span class="hs-identifier hs-var">eq_type_expand_ignore</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570111"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570112"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="annot"><span class="hs-comment">-- | Like 'pickyEqTypeVis', but returns a Bool for convenience</span></span><span>
</span><span id="line-274"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier hs-type">pickyEqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-275"></span><span class="hs-comment">-- Check when two types _look_ the same, _including_ synonyms.</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- So (pickyEqType String [Char]) returns False</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- This ignores kinds and coercions, because this is used only for printing.</span><span>
</span><span id="line-278"></span><span id="pickyEqType"><span class="annot"><span class="annottext">pickyEqType :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier hs-var hs-var">pickyEqType</span></a></span></span><span> </span><span id="local-6989586621682570114"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570114"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621682570115"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570115"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect"><span class="hs-identifier hs-var">eq_type_keep_respect</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570114"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570115"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">{- Note [Specialising type equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The type equality predicates in Type are hit pretty hard by GHC.  Consequently
we take pains to ensure that these paths are compiled to efficient,
minimally-allocating code.  Plan:

* The main workhorse is `inline_generic_eq_type_x`.  It is /non-recursive/
  and is marked INLINE.

* `inline_generic_eq_type_x` has various parameters that control what it does:
  * syn_flag::SynFlag            whether type synonyms are expanded or kept.
  * mult_flag::MultiplicityFlag  whether multiplicities are ignored or respected
  * mb_env::Maybe RnEnv2         an optional RnEnv2.

* `inline_generic_eq_type_x` has a handful of call sites, namely the ones
  in `eq_type_expand_respect`, `eq_type_expand_repect_x` etc.  It inlines
  at all these sites, specialising to the data values passed for the
  control parameters.

* All /other/ calls to `inline_generic_eq_type_x` go via
     generic_eq_type_x = inline_generic_eq_type_x
     {-# NOINLNE generic_eq_type_x #-}
  The idea is that all calls to `generic_eq_type_x` are specialised by the
  RULES, so this NOINLINE version is seldom, if ever, actually called.

* For each of specialised copy of `inline_generic_eq_type_x, there is a
  corresponding rewrite RULE that rewrites a call to (generic_eq_type_x args)
  into the appropriate specialied version.

See #19226.
-}</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><span class="hs-comment">-- | This flag controls whether we expand synonyms during comparison</span></span><span>
</span><span id="line-313"></span><span class="hs-keyword">data</span><span> </span><span id="SynFlag"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#SynFlag"><span class="hs-identifier hs-var">SynFlag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExpandSynonyms"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="KeepSynonyms"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#KeepSynonyms"><span class="hs-identifier hs-var">KeepSynonyms</span></a></span></span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect"><span class="hs-identifier hs-type">eq_type_expand_respect</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore"><span class="hs-identifier hs-type">eq_type_expand_ignore</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect"><span class="hs-identifier hs-type">eq_type_keep_respect</span></a></span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-317"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect_x"><span class="hs-identifier hs-type">eq_type_expand_respect_x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore_x"><span class="hs-identifier hs-type">eq_type_expand_ignore_x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect_x"><span class="hs-identifier hs-type">eq_type_keep_respect_x</span></a></span><span>
</span><span id="line-318"></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span id="eq_type_expand_respect"><span class="annot"><span class="annottext">eq_type_expand_respect :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect"><span class="hs-identifier hs-var hs-var">eq_type_expand_respect</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-identifier hs-var">RespectMultiplicities</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-321"></span><span id="eq_type_expand_respect_x"><span class="annot"><span class="annottext">eq_type_expand_respect_x :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect_x"><span class="hs-identifier hs-var hs-var">eq_type_expand_respect_x</span></a></span></span><span> </span><span id="local-6989586621682570123"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570123"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-identifier hs-var">RespectMultiplicities</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570123"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span id="eq_type_expand_ignore"><span class="annot"><span class="annottext">eq_type_expand_ignore :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore"><span class="hs-identifier hs-var hs-var">eq_type_expand_ignore</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#IgnoreMultiplicities"><span class="hs-identifier hs-var">IgnoreMultiplicities</span></a></span><span>  </span><span class="annot"><span class="annottext">Maybe RnEnv2
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-323"></span><span id="eq_type_expand_ignore_x"><span class="annot"><span class="annottext">eq_type_expand_ignore_x :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore_x"><span class="hs-identifier hs-var hs-var">eq_type_expand_ignore_x</span></a></span></span><span> </span><span id="local-6989586621682570125"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570125"><span class="hs-identifier hs-var">env</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#IgnoreMultiplicities"><span class="hs-identifier hs-var">IgnoreMultiplicities</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570125"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span id="eq_type_keep_respect"><span class="annot"><span class="annottext">eq_type_keep_respect :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect"><span class="hs-identifier hs-var hs-var">eq_type_keep_respect</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#KeepSynonyms"><span class="hs-identifier hs-var">KeepSynonyms</span></a></span><span>   </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-identifier hs-var">RespectMultiplicities</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-325"></span><span id="eq_type_keep_respect_x"><span class="annot"><span class="annottext">eq_type_keep_respect_x :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect_x"><span class="hs-identifier hs-var hs-var">eq_type_keep_respect_x</span></a></span></span><span> </span><span id="local-6989586621682570126"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570126"><span class="hs-identifier hs-var">env</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#KeepSynonyms"><span class="hs-identifier hs-var">KeepSynonyms</span></a></span><span>   </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-identifier hs-var">RespectMultiplicities</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570126"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-pragma">{-# RULES</span><span>
</span><span id="line-328"></span><span class="annot"><span class="hs-pragma">&quot;eqType1&quot;</span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-pragma hs-type">ExpandSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-pragma hs-type">RespectMultiplicities</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Nothing</span></span><span>
</span><span id="line-329"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect"><span class="hs-pragma hs-type">eq_type_expand_respect</span></a></span><span>
</span><span id="line-330"></span><span class="annot"><span class="hs-pragma">&quot;eqType2&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621682570128"><span class="annot"><a href="#local-6989586621682570128"><span class="hs-pragma hs-var">env</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-pragma hs-type">ExpandSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-pragma hs-type">RespectMultiplicities</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682570128"><span class="hs-pragma hs-type">env</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-331"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_respect_x"><span class="hs-pragma hs-type">eq_type_expand_respect_x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682570128"><span class="hs-pragma hs-type">env</span></a></span><span>
</span><span id="line-332"></span><span class="annot"><span class="hs-pragma">&quot;eqType3&quot;</span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-pragma hs-type">ExpandSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#IgnoreMultiplicities"><span class="hs-pragma hs-type">IgnoreMultiplicities</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Nothing</span></span><span>
</span><span id="line-333"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore"><span class="hs-pragma hs-type">eq_type_expand_ignore</span></a></span><span>
</span><span id="line-334"></span><span class="annot"><span class="hs-pragma">&quot;eqType4&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621682570129"><span class="annot"><a href="#local-6989586621682570129"><span class="hs-pragma hs-var">env</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-pragma hs-type">ExpandSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#IgnoreMultiplicities"><span class="hs-pragma hs-type">IgnoreMultiplicities</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682570129"><span class="hs-pragma hs-type">env</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-335"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_expand_ignore_x"><span class="hs-pragma hs-type">eq_type_expand_ignore_x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682570129"><span class="hs-pragma hs-type">env</span></a></span><span>
</span><span id="line-336"></span><span class="annot"><span class="hs-pragma">&quot;eqType5&quot;</span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#KeepSynonyms"><span class="hs-pragma hs-type">KeepSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-pragma hs-type">RespectMultiplicities</span></a></span><span> </span><span class="annot"><span class="hs-pragma hs-type">Nothing</span></span><span>
</span><span id="line-337"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect"><span class="hs-pragma hs-type">eq_type_keep_respect</span></a></span><span>
</span><span id="line-338"></span><span class="annot"><span class="hs-pragma">&quot;eqType6&quot;</span></span><span> </span><span class="hs-pragma">forall</span><span> </span><span id="local-6989586621682570130"><span class="annot"><a href="#local-6989586621682570130"><span class="hs-pragma hs-var">env</span></a></span></span><span class="hs-pragma">.</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#KeepSynonyms"><span class="hs-pragma hs-type">KeepSynonyms</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-pragma hs-type">RespectMultiplicities</span></a></span><span> </span><span class="hs-pragma">(</span><span class="annot"><span class="hs-pragma hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621682570130"><span class="hs-pragma hs-type">env</span></a></span><span class="hs-pragma">)</span><span>
</span><span id="line-339"></span><span>             </span><span class="hs-pragma">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eq_type_keep_respect_x"><span class="hs-pragma hs-type">eq_type_keep_respect_x</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682570130"><span class="hs-pragma hs-type">env</span></a></span><span>
</span><span id="line-340"></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- ---------------------------------------------------------------</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- | Real worker for 'eqType'. No kind check!</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- Inline it at the (handful of local) call sites</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- The &quot;generic&quot; bit refers to the flag paramerisation</span><span>
</span><span id="line-346"></span><span class="hs-comment">-- See Note [Specialising type equality].</span><span>
</span><span id="line-347"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-identifier hs-type">generic_eq_type_x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-type">inline_generic_eq_type_x</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#SynFlag"><span class="hs-identifier hs-type">SynFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html#MultiplicityFlag"><span class="hs-identifier hs-type">MultiplicityFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-pragma hs-type">generic_eq_type_x</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-351"></span><span id="generic_eq_type_x"><span class="annot"><span class="annottext">generic_eq_type_x :: SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-identifier hs-var hs-var">generic_eq_type_x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var">inline_generic_eq_type_x</span></a></span><span>
</span><span id="line-352"></span><span class="hs-comment">-- See Note [Computing equality on types] in Type</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-pragma hs-type">inline_generic_eq_type_x</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-355"></span><span class="hs-comment">-- This non-recursive function can inline at its (few) call sites.  The</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- recursion goes via generic_eq_type_x, which is the loop-breaker.</span><span>
</span><span id="line-357"></span><span id="inline_generic_eq_type_x"><span class="annot"><span class="annottext">inline_generic_eq_type_x :: SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#inline_generic_eq_type_x"><span class="hs-identifier hs-var hs-var">inline_generic_eq_type_x</span></a></span></span><span> </span><span id="local-6989586621682570131"><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span></span><span> </span><span id="local-6989586621682570132"><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="#local-6989586621682570132"><span class="hs-identifier hs-var">mult_flag</span></a></span></span><span> </span><span id="local-6989586621682570133"><span class="annot"><span class="annottext">Maybe RnEnv2
</span><a href="#local-6989586621682570133"><span class="hs-identifier hs-var">mb_env</span></a></span></span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682570134"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570135"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682570136"><span class="annot"><span class="annottext">go :: Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-identifier hs-var">generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="#local-6989586621682570132"><span class="hs-identifier hs-var">mult_flag</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
</span><a href="#local-6989586621682570133"><span class="hs-identifier hs-var">mb_env</span></a></span><span>
</span><span id="line-360"></span><span>             </span><span class="hs-comment">-- Abbreviation for recursive calls</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span>        </span><span id="local-6989586621682570137"><span class="annot"><span class="annottext">gos :: [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570137"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-363"></span><span>        </span><span class="annot"><a href="#local-6989586621682570137"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570138"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570138"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570139"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570139"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570140"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570140"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570141"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570141"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570138"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570140"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570137"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570139"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570141"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-364"></span><span>        </span><span class="annot"><a href="#local-6989586621682570137"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-367"></span><span>      </span><span class="annot"><span class="annottext">(Type, Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int#
</span><span class="hs-number">1#</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Int#
forall a b. a -&gt; b -&gt; Int#
</span><span class="hs-identifier hs-var">reallyUnsafePtrEquality#</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-368"></span><span>      </span><span class="hs-comment">-- See Note [Type comparisons using object pointer comparisons]</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570143"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570143"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570144"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570144"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570145"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570145"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570146"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570146"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570143"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570145"><span class="hs-identifier hs-var">tc2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isForgetfulSynTyCon"><span class="hs-identifier hs-var">isForgetfulSynTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570143"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- See Note [Comparing type synonyms]</span><span>
</span><span id="line-372"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570137"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570144"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570146"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span>      </span><span class="annot"><span class="annottext">(Type, Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570149"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570149"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570149"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-375"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="GHC.Core.TyCo.Compare.html#ExpandSynonyms"><span class="hs-identifier hs-var">ExpandSynonyms</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570150"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570150"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570150"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570151"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570151"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570152"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570152"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570153"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570153"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570154"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570154"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570151"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570153"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570137"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570152"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570154"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-379"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570156"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570156"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570157"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570157"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
</span><a href="#local-6989586621682570133"><span class="hs-identifier hs-var">mb_env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-383"></span><span>              </span><span class="annot"><span class="annottext">Maybe RnEnv2
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570156"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570157"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-384"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570158"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570158"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccL"><span class="hs-identifier hs-var">rnOccL</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570158"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570156"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccR"><span class="hs-identifier hs-var">rnOccR</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570158"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570157"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570162"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570162"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">,</span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570163"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570163"><span class="hs-identifier hs-var">lit2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570162"><span class="hs-identifier hs-var">lit1</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570163"><span class="hs-identifier hs-var">lit2</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570165"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570165"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570165"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-comment">-- Ignore casts</span><span>
</span><span id="line-388"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>             </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570166"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570166"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570166"><span class="hs-identifier hs-var">t2'</span></a></span><span> </span><span class="hs-comment">-- Ignore casts</span><span>
</span><span id="line-389"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>      </span><span class="hs-comment">-- Ignore coercions</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span>    </span><span class="hs-comment">-- Make sure we handle all FunTy cases since falling through to the</span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-comment">-- AppTy case means that tcSplitAppTyNoView_maybe may see an unzonked</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-comment">-- kind variable, which causes things to blow up.</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-comment">-- See Note [Equality on FunTys] in GHC.Core.TyCo.Rep: we must check</span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-comment">-- kinds here</span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570169"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570169"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621682570170"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570170"><span class="hs-identifier hs-var">arg1</span></a></span></span><span> </span><span id="local-6989586621682570171"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570171"><span class="hs-identifier hs-var">res1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570172"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570172"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621682570173"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570173"><span class="hs-identifier hs-var">arg2</span></a></span></span><span> </span><span id="local-6989586621682570174"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570174"><span class="hs-identifier hs-var">res2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-glyph">-&gt;</span><span>   </span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var">fullEq</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570170"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570173"><span class="hs-identifier hs-var">arg2</span></a></span><span>
</span><span id="line-398"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var">fullEq</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570171"><span class="hs-identifier hs-var">res1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570174"><span class="hs-identifier hs-var">res2</span></a></span><span>
</span><span id="line-399"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="#local-6989586621682570132"><span class="hs-identifier hs-var">mult_flag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-400"></span><span>                  </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#RespectMultiplicities"><span class="hs-identifier hs-var">RespectMultiplicities</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570169"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570172"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-401"></span><span>                  </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="GHC.Core.Multiplicity.html#IgnoreMultiplicities"><span class="hs-identifier hs-var">IgnoreMultiplicities</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span>      </span><span class="hs-comment">-- See Note [Equality on AppTys] in GHC.Core.Type</span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570176"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570176"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682570177"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570177"><span class="hs-identifier hs-var">t1'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570178"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570178"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570179"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570179"><span class="hs-identifier hs-var">t2'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570176"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570178"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570177"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570179"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-407"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span>  </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570180"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570180"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621682570181"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570181"><span class="hs-identifier hs-var">t2'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570182"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570182"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570183"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570183"><span class="hs-identifier hs-var">t1'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570182"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570180"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570183"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570181"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570186"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570186"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621682570187"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570187"><span class="hs-identifier hs-var">vis1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570188"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570188"><span class="hs-identifier hs-var">body1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570189"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570189"><span class="hs-identifier hs-var">tv2</span></a></span></span><span> </span><span id="local-6989586621682570190"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570190"><span class="hs-identifier hs-var">vis2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570191"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570191"><span class="hs-identifier hs-var">body2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
</span><a href="#local-6989586621682570133"><span class="hs-identifier hs-var">mb_env</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-413"></span><span>              </span><span class="annot"><span class="annottext">Maybe RnEnv2
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-identifier hs-var">generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="#local-6989586621682570132"><span class="hs-identifier hs-var">mult_flag</span></a></span><span>
</span><span id="line-414"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#initRnEnv"><span class="hs-identifier hs-var">initRnEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570134"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570135"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-415"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570192"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570192"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-416"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570187"><span class="hs-identifier hs-var">vis1</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-operator hs-var">`eqForAllVis`</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570190"><span class="hs-identifier hs-var">vis2</span></a></span><span>         </span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-417"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570136"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570186"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570189"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Always do kind-check</span><span>
</span><span id="line-418"></span><span>                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">SynFlag -&gt; MultiplicityFlag -&gt; Maybe RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#generic_eq_type_x"><span class="hs-identifier hs-var">generic_eq_type_x</span></a></span><span> </span><span class="annot"><span class="annottext">SynFlag
</span><a href="#local-6989586621682570131"><span class="hs-identifier hs-var">syn_flag</span></a></span><span> </span><span class="annot"><span class="annottext">MultiplicityFlag
</span><a href="#local-6989586621682570132"><span class="hs-identifier hs-var">mult_flag</span></a></span><span>
</span><span id="line-419"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570192"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570186"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570189"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570188"><span class="hs-identifier hs-var">body1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570191"><span class="hs-identifier hs-var">body2</span></a></span><span>
</span><span id="line-420"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-421"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span>      </span><span class="annot"><span class="annottext">(Type, Type)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-type">fullEq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-426"></span><span class="hs-comment">-- Do &quot;full equality&quot; including the kind check</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- See Note [Casts and coercions in type comparision]</span><span>
</span><span id="line-428"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-pragma hs-type">fullEq</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-429"></span><span id="fullEq"><span class="annot"><span class="annottext">fullEq :: (Type -&gt; Type -&gt; Bool) -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#fullEq"><span class="hs-identifier hs-var hs-var">fullEq</span></a></span></span><span> </span><span id="local-6989586621682570193"><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570193"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span id="local-6989586621682570194"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570194"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621682570195"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570195"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570193"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570194"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570195"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-431"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-432"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570194"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570195"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-433"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570193"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570194"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570195"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>
</span><span id="line-435"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-type">hasCasts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- Fast, does not look deep, does not allocate</span><span>
</span><span id="line-439"></span><span id="hasCasts"><span class="annot"><span class="annottext">hasCasts :: Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var hs-var">hasCasts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-440"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-441"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570198"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570198"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570199"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570199"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570198"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570199"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-442"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570200"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570200"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570200"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-443"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#hasCasts"><span class="hs-identifier hs-var">hasCasts</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>   </span><span class="hs-comment">-- TyVarTy, TyConApp, FunTy, LitTy</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                Comparing ForAllTyFlags
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="hs-comment">-- | Do these denote the same level of visibility? 'Required'</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- arguments are visible, others are not. So this function</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- equates 'Specified' and 'Inferred'. Used for printing.</span><span>
</span><span id="line-455"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-type">eqForAllVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-456"></span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-457"></span><span id="eqForAllVis"><span class="annot"><span class="annottext">eqForAllVis :: ForAllTyFlag -&gt; ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var hs-var">eqForAllVis</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-458"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var">eqForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-459"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var">eqForAllVis</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="hs-comment">-- | Do these denote the same level of visibility? 'Required'</span><span>
</span><span id="line-462"></span><span class="hs-comment">-- arguments are visible, others are not. So this function</span><span>
</span><span id="line-463"></span><span class="hs-comment">-- equates 'Specified' and 'Inferred'. Used for printing.</span><span>
</span><span id="line-464"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-type">cmpForAllVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-465"></span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-466"></span><span id="cmpForAllVis"><span class="annot"><span class="annottext">cmpForAllVis :: ForAllTyFlag -&gt; ForAllTyFlag -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var hs-var">cmpForAllVis</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-467"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-468"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="Language.Haskell.Syntax.Specificity.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-469"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Specificity.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span class="hs-comment">{- Note [ForAllTy and type equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When we compare (ForAllTy (Bndr tv1 vis1) ty1)
         and    (ForAllTy (Bndr tv2 vis2) ty2)
what should we do about `vis1` vs `vis2`?

We had a long debate about this: see #22762 and GHC Proposal 558.
Here is the conclusion.

* In Haskell, we really do want (forall a. ty) and (forall a -&gt; ty) to be
  distinct types, not interchangeable.  The latter requires a type argument,
  but the former does not.  See GHC Proposal 558.

* We /really/ do not want the typechecker and Core to have different notions of
  equality.  That is, we don't want `tcEqType` and `eqType` to differ.  Why not?
  Not so much because of code duplication but because it is virtually impossible
  to cleave the two apart. Here is one particularly awkward code path:
     The type checker calls `substTy`, which calls `mkAppTy`,
     which calls `mkCastTy`, which calls `isReflexiveCo`, which calls `eqType`.

* Moreover the resolution of the TYPE vs CONSTRAINT story was to make the
  typechecker and Core have a single notion of equality.

* So in GHC:
  - `tcEqType` and `eqType` implement the same equality
  - (forall a. ty) and (forall a -&gt; ty) are distinct types in both Core and typechecker
  - That is, both `eqType` and `tcEqType` distinguish them.

* But /at representational role/ we can relate the types. That is,
    (forall a. ty) ~R (forall a -&gt; ty)
  After all, since types are erased, they are represented the same way.
  See Note [ForAllCo] and the typing rule for ForAllCo given there

* What about (forall a. ty) and (forall {a}. ty)?  See Note [Comparing visibility].

Note [Comparing visibility]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
We are sure that we want to distinguish (forall a. ty) and (forall a -&gt; ty); see
Note [ForAllTy and type equality].  But we have /three/ settings for the ForAllTyFlag:
  * Specified: forall a. ty
  * Inferred:  forall {a}. ty
  * Required:  forall a -&gt; ty

We could (and perhaps should) distinguish all three. But for now we distinguish
Required from Specified/Inferred, and ignore the distinction between Specified
and Inferred.

The answer doesn't matter too much, provided we are consistent. And we are consistent
because we always compare ForAllTyFlags with
  * `eqForAllVis`
  * `cmpForAllVis`.
(You can only really check this by inspecting all pattern matches on ForAllTyFlags.)
So if we change the decision, we just need to change those functions.

Why don't we distinguish all three? Should GHC type-check the following program
(adapted from #15740)?

  {-# LANGUAGE PolyKinds, ... #-}
  data D a
  type family F :: forall k. k -&gt; Type
  type instance F = D

Due to the way F is declared, any instance of F must have a right-hand side
whose kind is equal to `forall k. k -&gt; Type`. The kind of D is
`forall {k}. k -&gt; Type`, which is very close, but technically uses distinct
Core:

  -----------------------------------------------------------
  | Source Haskell    | Core                                |
  -----------------------------------------------------------
  | forall  k.  &lt;...&gt; | ForAllTy (Bndr k Specified) (&lt;...&gt;) |
  | forall {k}. &lt;...&gt; | ForAllTy (Bndr k Inferred)  (&lt;...&gt;) |
  -----------------------------------------------------------

We could deem these kinds to be unequal, but that would imply rejecting
programs like the one above. Whether a kind variable binder ends up being
specified or inferred can be somewhat subtle, however, especially for kinds
that aren't explicitly written out in the source code (like in D above).

For now, we decide

    the specified/inferred status of an invisible type variable binder
    does not affect GHC's notion of equality.

That is, we have the following:

  --------------------------------------------------
  | Type 1            | Type 2            | Equal? |
  --------------------|-----------------------------
  | forall k. &lt;...&gt;   | forall k. &lt;...&gt;   | Yes    |
  |                   | forall {k}. &lt;...&gt; | Yes    |
  |                   | forall k -&gt; &lt;...&gt; | No     |
  --------------------------------------------------
  | forall {k}. &lt;...&gt; | forall k. &lt;...&gt;   | Yes    |
  |                   | forall {k}. &lt;...&gt; | Yes    |
  |                   | forall k -&gt; &lt;...&gt; | No     |
  --------------------------------------------------
  | forall k -&gt; &lt;...&gt; | forall k. &lt;...&gt;   | No     |
  |                   | forall {k}. &lt;...&gt; | No     |
  |                   | forall k -&gt; &lt;...&gt; | Yes    |
  --------------------------------------------------

Examples: T16946, T15079.

Historical Note [Typechecker equality vs definitional equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This Note describes some history, in case there are vestiges of this
history lying around in the code.

Summary: prior to summer 2022, GHC had have two notions of equality
over Core types.  But now there is only one: definitional equality,
or just equality for short.

The old setup was:

* Definitional equality, as implemented by GHC.Core.Type.eqType.
  See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep.

* Typechecker equality, as implemented by tcEqType.
  GHC.Tc.Solver.Equality.canonicaliseEquality also respects typechecker equality.

Typechecker equality implied definitional equality: if two types are equal
according to typechecker equality, then they are also equal according to
definitional equality. The converse is not always true, as typechecker equality
is more finer-grained than definitional equality in two places:

* Constraint vs Type.  Definitional equality equated Type and
  Constraint, but typechecker treats them as distinct types.

* Unlike definitional equality, which does not care about the ForAllTyFlag of a
  ForAllTy, typechecker equality treats Required type variable binders as
  distinct from Invisible type variable binders.
  See Note [ForAllTy and type equality]


************************************************************************
*                                                                      *
                Comparison for types

      Not so heavily used, less carefully optimised
*                                                                      *
************************************************************************

-- Now here comes the real worker

Note [nonDetCmpType nondeterminism]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
nonDetCmpType is implemented in terms of nonDetCmpTypeX. nonDetCmpTypeX
uses nonDetCmpTc which compares TyCons by their Unique value. Using Uniques for
ordering leads to nondeterminism. We hit the same problem in the TyVarTy case,
comparing type variables is nondeterministic, note the call to nonDetCmpVar in
nonDetCmpTypeX.
See Note [Unique Determinism] for more details.
-}</span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-type">nonDetCmpType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-628"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-pragma hs-type">nonDetCmpType</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-629"></span><span id="nonDetCmpType"><span class="annot"><span class="annottext">nonDetCmpType :: Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var hs-var">nonDetCmpType</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682570205"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570205"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621682570206"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570206"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-comment">-- See Note [Type comparisons using object pointer comparisons]</span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int#
</span><span class="hs-number">1#</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Int#
forall a b. a -&gt; b -&gt; Int#
</span><span class="hs-identifier hs-var">reallyUnsafePtrEquality#</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570205"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570206"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-633"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var">nonDetCmpType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570207"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570207"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570208"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570208"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570207"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570208"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-634"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-635"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var">nonDetCmpType</span></a></span><span> </span><span id="local-6989586621682570209"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570209"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570210"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570210"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-636"></span><span>  </span><span class="hs-comment">-- we know k1 and k2 have the same kind, because they both have kind *.</span><span>
</span><span id="line-637"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570212"><span class="hs-identifier hs-var">rn_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570209"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570210"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-638"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-639"></span><span>    </span><span id="local-6989586621682570212"><span class="annot"><span class="annottext">rn_env :: RnEnv2
</span><a href="#local-6989586621682570212"><span class="hs-identifier hs-var hs-var">rn_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570209"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570210"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span class="hs-comment">-- | An ordering relation between two 'Type's (known below as @t1 :: k1@</span><span>
</span><span id="line-642"></span><span class="hs-comment">-- and @t2 :: k2@)</span><span>
</span><span id="line-643"></span><span class="hs-keyword">data</span><span> </span><span id="TypeOrdering"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-var">TypeOrdering</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TLT"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ @t1 &lt; t2@</span></span><span>
</span><span id="line-644"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TEQ"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span></span><span>  </span><span class="hs-comment">-- ^ @t1 ~ t2@ and there are no casts in either,</span><span>
</span><span id="line-645"></span><span>                         </span><span class="hs-comment">-- therefore we can conclude @k1 ~ k2@</span><span>
</span><span id="line-646"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TEQX"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span></span><span> </span><span class="hs-comment">-- ^ @t1 ~ t2@ yet one of the types contains a cast so</span><span>
</span><span id="line-647"></span><span>                         </span><span class="hs-comment">-- they may differ in kind.</span><span>
</span><span id="line-648"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TGT"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ @t1 &gt; t2@</span></span><span>
</span><span id="line-649"></span><span>                  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570219"><span id="local-6989586621682570224"><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; Bool
(TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool) -&gt; Eq TypeOrdering
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
== :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c/= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
/= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570231"><span id="local-6989586621682570235"><span id="local-6989586621682570239"><span id="local-6989586621682570243"><span id="local-6989586621682570246"><span id="local-6989586621682570249"><span id="local-6989586621682570252"><span class="annot"><span class="annottext">Eq TypeOrdering
Eq TypeOrdering =&gt;
(TypeOrdering -&gt; TypeOrdering -&gt; Ordering)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering)
-&gt; Ord TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; Bool
TypeOrdering -&gt; TypeOrdering -&gt; Ordering
TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: TypeOrdering -&gt; TypeOrdering -&gt; Ordering
compare :: TypeOrdering -&gt; TypeOrdering -&gt; Ordering
$c&lt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&lt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&lt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&lt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&gt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&gt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&gt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&gt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$cmax :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
max :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
$cmin :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
min :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570260"><span id="local-6989586621682570267"><span id="local-6989586621682570272"><span id="local-6989586621682570278"><span id="local-6989586621682570281"><span id="local-6989586621682570286"><span id="local-6989586621682570292"><span id="local-6989586621682570296"><span class="annot"><span class="annottext">Int -&gt; TypeOrdering
TypeOrdering -&gt; Int
TypeOrdering -&gt; [TypeOrdering]
TypeOrdering -&gt; TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
(TypeOrdering -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; TypeOrdering)
-&gt; (Int -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; Int)
-&gt; (TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; Enum TypeOrdering
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
$csucc :: TypeOrdering -&gt; TypeOrdering
succ :: TypeOrdering -&gt; TypeOrdering
$cpred :: TypeOrdering -&gt; TypeOrdering
pred :: TypeOrdering -&gt; TypeOrdering
$ctoEnum :: Int -&gt; TypeOrdering
toEnum :: Int -&gt; TypeOrdering
$cfromEnum :: TypeOrdering -&gt; Int
fromEnum :: TypeOrdering -&gt; Int
$cenumFrom :: TypeOrdering -&gt; [TypeOrdering]
enumFrom :: TypeOrdering -&gt; [TypeOrdering]
$cenumFromThen :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromThen :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
$cenumFromTo :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromTo :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
$cenumFromThenTo :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromThenTo :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570304"><span id="local-6989586621682570306"><span class="annot"><span class="annottext">TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; Bounded TypeOrdering
forall a. a -&gt; a -&gt; Bounded a
$cminBound :: TypeOrdering
minBound :: TypeOrdering
$cmaxBound :: TypeOrdering
maxBound :: TypeOrdering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-650"></span><span>
</span><span id="line-651"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-type">nonDetCmpTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>  </span><span class="hs-comment">-- Main workhorse</span><span>
</span><span id="line-652"></span><span>    </span><span class="hs-comment">-- See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-comment">-- See Note [Computing equality on types]</span><span>
</span><span id="line-654"></span><span>    </span><span class="hs-comment">-- Always respects multiplicities, unlike eqType</span><span>
</span><span id="line-655"></span><span id="nonDetCmpTypeX"><span class="annot"><span class="annottext">nonDetCmpTypeX :: RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var hs-var">nonDetCmpTypeX</span></a></span></span><span> </span><span id="local-6989586621682570311"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570311"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570312"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570312"><span class="hs-identifier hs-var">orig_t1</span></a></span></span><span> </span><span id="local-6989586621682570313"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570313"><span class="hs-identifier hs-var">orig_t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-656"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570311"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570312"><span class="hs-identifier hs-var">orig_t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570313"><span class="hs-identifier hs-var">orig_t2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-657"></span><span>      </span><span class="hs-comment">-- If there are casts then we also need to do a comparison of</span><span>
</span><span id="line-658"></span><span>      </span><span class="hs-comment">-- the kinds of the types being compared</span><span>
</span><span id="line-659"></span><span>      </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621682570315"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; Ordering) -&gt; TypeOrdering -&gt; Ordering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570311"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570316"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570317"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-660"></span><span>      </span><span id="local-6989586621682570318"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570318"><span class="hs-identifier hs-var">ty_ordering</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621682570315"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570318"><span class="hs-identifier hs-var">ty_ordering</span></a></span><span>
</span><span id="line-661"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-662"></span><span>    </span><span id="local-6989586621682570316"><span class="annot"><span class="annottext">k1 :: Type
</span><a href="#local-6989586621682570316"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570312"><span class="hs-identifier hs-var">orig_t1</span></a></span><span>
</span><span id="line-663"></span><span>    </span><span id="local-6989586621682570317"><span class="annot"><span class="annottext">k2 :: Type
</span><a href="#local-6989586621682570317"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570313"><span class="hs-identifier hs-var">orig_t2</span></a></span><span>
</span><span id="line-664"></span><span>
</span><span id="line-665"></span><span>    </span><span class="annot"><a href="#local-6989586621682570315"><span class="hs-identifier hs-type">toOrdering</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-666"></span><span>    </span><span id="local-6989586621682570315"><span class="annot"><span class="annottext">toOrdering :: TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621682570315"><span class="hs-identifier hs-var hs-var">toOrdering</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-667"></span><span>    </span><span class="annot"><a href="#local-6989586621682570315"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-668"></span><span>    </span><span class="annot"><a href="#local-6989586621682570315"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="#local-6989586621682570315"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-670"></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><a href="#local-6989586621682570319"><span class="hs-identifier hs-type">liftOrdering</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-672"></span><span>    </span><span id="local-6989586621682570319"><span class="annot"><span class="annottext">liftOrdering :: Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var hs-var">liftOrdering</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-674"></span><span>    </span><span class="annot"><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span>    </span><span class="annot"><a href="#local-6989586621682570320"><span class="hs-identifier hs-type">thenCmpTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-677"></span><span>    </span><span id="local-6989586621682570320"><span class="annot"><span class="annottext">thenCmpTy :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-identifier hs-var hs-var">thenCmpTy</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>  </span><span id="local-6989586621682570321"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570321"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570321"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-678"></span><span>    </span><span class="annot"><a href="#local-6989586621682570320"><span class="hs-identifier hs-var">thenCmpTy</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span> </span><span id="local-6989586621682570322"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570322"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570323"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570322"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-679"></span><span>    </span><span class="annot"><a href="#local-6989586621682570320"><span class="hs-identifier hs-var">thenCmpTy</span></a></span><span> </span><span id="local-6989586621682570324"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570324"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="annot"><span class="annottext">TypeOrdering
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570324"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-680"></span><span>
</span><span id="line-681"></span><span>    </span><span class="annot"><a href="#local-6989586621682570323"><span class="hs-identifier hs-type">hasCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-682"></span><span>    </span><span id="local-6989586621682570323"><span class="annot"><span class="annottext">hasCast :: TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570323"><span class="hs-identifier hs-var hs-var">hasCast</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><a href="#local-6989586621682570323"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span id="local-6989586621682570325"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570325"><span class="hs-identifier hs-var">rel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621682570325"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>    </span><span class="hs-comment">-- Returns both the resulting ordering relation between</span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-comment">-- the two types and whether either contains a cast.</span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span>    </span><span id="local-6989586621682570314"><span class="annot"><span class="annottext">go :: RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570326"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570326"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570327"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570327"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570326"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570327"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-691"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>    </span><span class="hs-comment">-- See Note [Comparing type synonyms]</span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570328"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570328"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570329"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570329"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570330"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570330"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-694"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570331"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570331"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570329"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570328"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570331"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570330"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-695"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570332"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570332"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570330"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570328"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570329"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570332"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-696"></span><span>
</span><span id="line-697"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570333"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570333"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570334"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570334"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570335"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570335"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; TypeOrdering) -&gt; Ordering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccL"><span class="hs-identifier hs-var">rnOccL</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570333"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570334"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Ordering
</span><a href="GHC.Types.Var.html#nonDetCmpVar"><span class="hs-operator hs-var">`nonDetCmpVar`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccR"><span class="hs-identifier hs-var">rnOccR</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570333"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570335"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570337"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570337"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570338"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570338"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621682570339"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570339"><span class="hs-identifier hs-var">vis1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570340"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570340"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570341"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570341"><span class="hs-identifier hs-var">tv2</span></a></span></span><span> </span><span id="local-6989586621682570342"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570342"><span class="hs-identifier hs-var">vis2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570343"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570343"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570339"><span class="hs-identifier hs-var">vis1</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; ForAllTyFlag -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-operator hs-var">`cmpForAllVis`</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570342"><span class="hs-identifier hs-var">vis2</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-701"></span><span>        </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570337"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570338"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570341"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>        </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570337"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570338"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570341"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570340"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570343"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span>        </span><span class="hs-comment">-- See Note [Equality on AppTys]</span><span>
</span><span id="line-705"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570344"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570344"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570345"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570345"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682570346"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570346"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570347"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570347"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-706"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570348"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570348"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570349"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570349"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Maybe (Type, Type)
Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier hs-var">splitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570347"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-707"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570344"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570345"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570348"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570344"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570346"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570349"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-708"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570350"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570350"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570351"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570351"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570352"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570352"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621682570353"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570353"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570354"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570354"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570355"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570355"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasDebugCallStack =&gt; Type -&gt; Maybe (Type, Type)
Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier hs-var">splitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570351"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-710"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570354"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570352"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570355"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570353"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570356"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570356"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570357"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570357"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621682570358"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570358"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682570359"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570359"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570360"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570360"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621682570361"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570361"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621682570362"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570362"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>        </span><span class="hs-comment">-- NB: nonDepCmpTypeX does the kind check requested by</span><span>
</span><span id="line-714"></span><span>        </span><span class="hs-comment">-- Note [Equality on FunTys] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-715"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570358"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570361"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">S.&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570359"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570362"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-716"></span><span>          </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570357"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570360"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-717"></span><span>        </span><span class="hs-comment">-- Comparing multiplicities last because the test is usually true</span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570363"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570363"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570364"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570364"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570365"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570365"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570366"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570366"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570367"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570367"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570364"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-operator hs-var">`nonDetCmpTc`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570366"><span class="hs-identifier hs-var">tc2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621682570369"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570363"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570365"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570367"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570370"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570370"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570371"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570371"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#nonDetCmpTyLit"><span class="hs-identifier hs-var">nonDetCmpTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570370"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570371"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570373"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570373"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570374"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570374"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span id="local-6989586621682570375"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570375"><span class="hs-identifier hs-var">t2</span></a></span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570323"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; TypeOrdering) -&gt; TypeOrdering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570373"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570374"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570375"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570376"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570376"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570377"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570377"><span class="hs-identifier hs-var">t1</span></a></span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570378"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570378"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570323"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; TypeOrdering) -&gt; TypeOrdering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570376"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570377"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570378"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span>        </span><span class="hs-comment">-- Deal with the rest: TyVarTy &lt; CoercionTy &lt; AppTy &lt; LitTy &lt; TyConApp &lt; ForAllTy</span><span>
</span><span id="line-729"></span><span>    </span><span class="annot"><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570379"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570379"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621682570380"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570380"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-730"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621682570319"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; TypeOrdering) -&gt; Ordering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570379"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570380"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-type">get_rank</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-732"></span><span>            </span><span id="local-6989586621682570381"><span class="annot"><span class="annottext">get_rank :: Type -&gt; Int
</span><a href="#local-6989586621682570381"><span class="hs-identifier hs-var hs-var">get_rank</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Int
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nonDetCmpTypeX.get_rank&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570379"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570380"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-735"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-736"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-737"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-738"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-739"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span>
</span><span id="line-740"></span><span>            </span><span class="annot"><a href="#local-6989586621682570381"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><a href="#local-6989586621682570369"><span class="hs-identifier hs-type">gos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621682570369"><span class="annot"><span class="annottext">gos :: RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621682570369"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-744"></span><span>    </span><span class="annot"><a href="#local-6989586621682570369"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>
</span><span id="line-745"></span><span>    </span><span class="annot"><a href="#local-6989586621682570369"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>
</span><span id="line-746"></span><span>    </span><span class="annot"><a href="#local-6989586621682570369"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span id="local-6989586621682570384"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570384"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570385"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570385"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570386"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570386"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570387"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570387"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570388"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570388"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621682570314"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570384"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570385"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570387"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621682570320"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621682570369"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570384"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570386"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570388"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- | Compare two 'TyCon's.</span><span>
</span><span id="line-751"></span><span class="hs-comment">-- See Note [nonDetCmpType nondeterminism]</span><span>
</span><span id="line-752"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-identifier hs-type">nonDetCmpTc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-753"></span><span id="nonDetCmpTc"><span class="annot"><span class="annottext">nonDetCmpTc :: TyCon -&gt; TyCon -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-identifier hs-var hs-var">nonDetCmpTc</span></a></span></span><span> </span><span id="local-6989586621682570389"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570389"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570390"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570390"><span class="hs-identifier hs-var">tc2</span></a></span></span><span>
</span><span id="line-754"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682570391"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Ordering
</span><a href="GHC.Types.Unique.html#nonDetCmpUnique"><span class="hs-operator hs-var">`nonDetCmpUnique`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621682570393"><span class="hs-identifier hs-var">u2</span></a></span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-756"></span><span>    </span><span id="local-6989586621682570391"><span class="annot"><span class="annottext">u1 :: Unique
</span><a href="#local-6989586621682570391"><span class="hs-identifier hs-var hs-var">u1</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique
</span><a href="GHC.Core.TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570389"><span class="hs-identifier hs-var">tc1</span></a></span><span>
</span><span id="line-757"></span><span>    </span><span id="local-6989586621682570393"><span class="annot"><span class="annottext">u2 :: Unique
</span><a href="#local-6989586621682570393"><span class="hs-identifier hs-var hs-var">u2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique
</span><a href="GHC.Core.TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570390"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span>
</span><span id="line-760"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                  mayLookIdentical
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#mayLookIdentical"><span class="hs-identifier hs-type">mayLookIdentical</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-767"></span><span class="hs-comment">-- | Returns True if the /visible/ part of the types</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- might look equal, even if they are really unequal (in the invisible bits)</span><span>
</span><span id="line-769"></span><span class="hs-comment">--</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- This function is very similar to tc_eq_type but it is much more</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- heuristic.  Notably, it is always safe to return True, even with types</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- that might (in truth) be unequal  -- this affects error messages only</span><span>
</span><span id="line-773"></span><span class="hs-comment">-- (Originally this test was done by eqType with an extra flag, but the result</span><span>
</span><span id="line-774"></span><span class="hs-comment">--  was hard to understand.)</span><span>
</span><span id="line-775"></span><span id="mayLookIdentical"><span class="annot"><span class="annottext">mayLookIdentical :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#mayLookIdentical"><span class="hs-identifier hs-var hs-var">mayLookIdentical</span></a></span></span><span> </span><span id="local-6989586621682570395"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570395"><span class="hs-identifier hs-var">orig_ty1</span></a></span></span><span> </span><span id="local-6989586621682570396"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570396"><span class="hs-identifier hs-var">orig_ty2</span></a></span></span><span>
</span><span id="line-776"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570398"><span class="hs-identifier hs-var">orig_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570395"><span class="hs-identifier hs-var">orig_ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570396"><span class="hs-identifier hs-var">orig_ty2</span></a></span><span>
</span><span id="line-777"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-778"></span><span>    </span><span id="local-6989586621682570398"><span class="annot"><span class="annottext">orig_env :: RnEnv2
</span><a href="#local-6989586621682570398"><span class="hs-identifier hs-var hs-var">orig_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="annot"><span class="annottext">(InScopeSet -&gt; RnEnv2) -&gt; InScopeSet -&gt; RnEnv2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="annot"><span class="annottext">(VarSet -&gt; InScopeSet) -&gt; VarSet -&gt; InScopeSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570395"><span class="hs-identifier hs-var">orig_ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570396"><span class="hs-identifier hs-var">orig_ty2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>    </span><span id="local-6989586621682570397"><span class="annot"><span class="annottext">go :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621682570399"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570399"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570400"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570400"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570401"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570401"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570402"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570402"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570403"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570403"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570400"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570402"><span class="hs-identifier hs-var">tc2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isForgetfulSynTyCon"><span class="hs-identifier hs-var">isForgetfulSynTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570400"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- See Note [Comparing type synonyms]</span><span>
</span><span id="line-784"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [TyConBinder] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570404"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570399"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [TyConBinder]
</span><a href="GHC.Core.TyCon.html#tyConBinders"><span class="hs-identifier hs-var">tyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570400"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570401"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570403"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-785"></span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570406"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570406"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570407"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570407"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570408"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570408"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570409"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570409"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570407"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570406"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570409"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570408"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-787"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570410"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570410"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570411"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570411"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621682570412"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570412"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621682570413"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570413"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570412"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570410"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570411"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570413"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570414"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570414"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570415"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570415"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621682570416"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570416"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccL"><span class="hs-identifier hs-var">rnOccL</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570414"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570415"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccR"><span class="hs-identifier hs-var">rnOccR</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570414"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570416"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-790"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570417"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570417"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621682570418"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570418"><span class="hs-identifier hs-var">lit2</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570417"><span class="hs-identifier hs-var">lit1</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621682570418"><span class="hs-identifier hs-var">lit2</span></a></span><span>
</span><span id="line-791"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570419"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570419"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570420"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570420"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span id="local-6989586621682570421"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570421"><span class="hs-identifier hs-var">t2</span></a></span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570419"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570420"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570421"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-792"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570422"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570422"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570423"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570423"><span class="hs-identifier hs-var">t1</span></a></span></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621682570424"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570424"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570422"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570423"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570424"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-793"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-794"></span><span>
</span><span id="line-795"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570425"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570425"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570426"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570426"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621682570427"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570427"><span class="hs-identifier hs-var">vis1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570428"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570428"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570429"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570429"><span class="hs-identifier hs-var">tv2</span></a></span></span><span> </span><span id="local-6989586621682570430"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570430"><span class="hs-identifier hs-var">vis2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570431"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570431"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>      </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570427"><span class="hs-identifier hs-var">vis1</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-operator hs-var">`eqForAllVis`</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570430"><span class="hs-identifier hs-var">vis2</span></a></span><span>  </span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-798"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570425"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570426"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570429"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570428"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570431"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-799"></span><span>         </span><span class="hs-comment">-- Visible stuff only: ignore kinds of binders</span><span>
</span><span id="line-800"></span><span>
</span><span id="line-801"></span><span>    </span><span class="hs-comment">-- If we have (forall (r::RunTimeRep). ty1  ~   blah) then respond</span><span>
</span><span id="line-802"></span><span>    </span><span class="hs-comment">-- with True.  Reason: the type pretty-printer defaults RuntimeRep</span><span>
</span><span id="line-803"></span><span>    </span><span class="hs-comment">-- foralls (see Ghc.Iface.Type.hideNonStandardTypes).  That can make,</span><span>
</span><span id="line-804"></span><span>    </span><span class="hs-comment">-- say (forall r. TYPE r -&gt; Type) into (Type -&gt; Type), so it looks the</span><span>
</span><span id="line-805"></span><span>    </span><span class="hs-comment">-- same as a very different type (#24553).  By responding True, we</span><span>
</span><span id="line-806"></span><span>    </span><span class="hs-comment">-- tell GHC (see calls of mayLookIdentical) to display without defaulting.</span><span>
</span><span id="line-807"></span><span>    </span><span class="hs-comment">-- See Note [Showing invisible bits of types in error messages]</span><span>
</span><span id="line-808"></span><span>    </span><span class="hs-comment">-- in GHC.Tc.Errors.Ppr</span><span>
</span><span id="line-809"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span id="local-6989586621682570432"><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag
</span><a href="#local-6989586621682570432"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#isDefaultableBndr"><span class="hs-identifier hs-var">isDefaultableBndr</span></a></span><span> </span><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag
</span><a href="#local-6989586621682570432"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-810"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span id="local-6989586621682570434"><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag
</span><a href="#local-6989586621682570434"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#isDefaultableBndr"><span class="hs-identifier hs-var">isDefaultableBndr</span></a></span><span> </span><span class="annot"><span class="annottext">VarBndr Var ForAllTyFlag
</span><a href="#local-6989586621682570434"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570435"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570435"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570436"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570436"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621682570437"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570437"><span class="hs-identifier hs-var">arg1</span></a></span></span><span> </span><span id="local-6989586621682570438"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570438"><span class="hs-identifier hs-var">res1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682570439"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570439"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621682570440"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570440"><span class="hs-identifier hs-var">arg2</span></a></span></span><span> </span><span id="local-6989586621682570441"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570441"><span class="hs-identifier hs-var">res2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-813"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570435"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570437"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570440"><span class="hs-identifier hs-var">arg2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570435"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570438"><span class="hs-identifier hs-var">res1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570441"><span class="hs-identifier hs-var">res2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570435"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570436"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570439"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-814"></span><span>        </span><span class="hs-comment">-- Visible stuff only: ignore agg kinds</span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span>      </span><span class="hs-comment">-- See Note [Equality on AppTys] in GHC.Core.Type</span><span>
</span><span id="line-817"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570442"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570442"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570443"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570443"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621682570444"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570444"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682570445"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570445"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-818"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570446"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570446"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570447"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570447"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570445"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-819"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570442"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570443"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570446"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570442"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570444"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570447"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-820"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570448"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570448"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570449"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570449"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621682570450"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570450"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621682570451"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570451"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570452"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570452"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570453"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570453"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570449"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-822"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570448"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570452"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570450"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570448"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570453"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570451"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682570454"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570454"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570455"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570455"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621682570456"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570456"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621682570457"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570457"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621682570458"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570458"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570455"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570457"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [TyConBinder] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570404"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570454"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [TyConBinder]
</span><a href="GHC.Core.TyCon.html#tyConBinders"><span class="hs-identifier hs-var">tyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621682570455"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570456"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570458"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-826"></span><span>
</span><span id="line-827"></span><span>    </span><span class="annot"><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span>    </span><span class="annot"><a href="#local-6989586621682570404"><span class="hs-identifier hs-type">gos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCon.html#TyConBinder"><span class="hs-identifier hs-type">TyConBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-830"></span><span>    </span><span id="local-6989586621682570404"><span class="annot"><span class="annottext">gos :: RnEnv2 -&gt; [TyConBinder] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570404"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[TyConBinder]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-831"></span><span>    </span><span class="annot"><a href="#local-6989586621682570404"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span id="local-6989586621682570459"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570459"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621682570460"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570460"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570461"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570461"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570462"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570462"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570463"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570463"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570464"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570464"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682570465"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682570465"><span class="hs-identifier hs-var">invisible</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682570466"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570466"><span class="hs-identifier hs-var">bs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570460"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-833"></span><span>                               </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>                               </span><span class="hs-special">(</span><span id="local-6989586621682570467"><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621682570467"><span class="hs-identifier hs-var">b</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682570468"><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570468"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyConBinder -&gt; Bool
forall tv. VarBndr tv TyConBndrVis -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isInvisibleTyConBinder"><span class="hs-identifier hs-var">isInvisibleTyConBinder</span></a></span><span> </span><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621682570467"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570468"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-835"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682570465"><span class="hs-identifier hs-var">invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621682570397"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570459"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570461"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570463"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [TyConBinder] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621682570404"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621682570459"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621682570466"><span class="hs-identifier hs-var">bs'</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570462"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621682570464"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span>    </span><span class="annot"><a href="#local-6989586621682570404"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span>
</span><span id="line-840"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#isDefaultableBndr"><span class="hs-identifier hs-type">isDefaultableBndr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-841"></span><span class="hs-comment">-- This function should line up with the defaulting done</span><span>
</span><span id="line-842"></span><span class="hs-comment">--   by GHC.Iface.Type.defaultIfaceTyVarsOfKind</span><span>
</span><span id="line-843"></span><span class="hs-comment">-- See Note [Showing invisible bits of types in error messages]</span><span>
</span><span id="line-844"></span><span class="hs-comment">--   in GHC.Tc.Errors.Ppr</span><span>
</span><span id="line-845"></span><span id="isDefaultableBndr"><span class="annot"><span class="annottext">isDefaultableBndr :: VarBndr Var ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#isDefaultableBndr"><span class="hs-identifier hs-var hs-var">isDefaultableBndr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682570471"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570471"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621682570472"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570472"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; Bool
</span><a href="Language.Haskell.Syntax.Specificity.html#isInvisibleForAllTyFlag"><span class="hs-identifier hs-var">isInvisibleForAllTyFlag</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621682570472"><span class="hs-identifier hs-var">vis</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="#local-6989586621682570474"><span class="hs-identifier hs-var">is_defaultable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621682570471"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-848"></span><span>    </span><span id="local-6989586621682570474"><span class="annot"><span class="annottext">is_defaultable :: Type -&gt; Bool
</span><a href="#local-6989586621682570474"><span class="hs-identifier hs-var hs-var">is_defaultable</span></a></span></span><span> </span><span id="local-6989586621682570476"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570476"><span class="hs-identifier hs-var">ki</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isLevityTy"><span class="hs-identifier hs-var">isLevityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570476"><span class="hs-identifier hs-var">ki</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isRuntimeRepTy"><span class="hs-identifier hs-var">isRuntimeRepTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570476"><span class="hs-identifier hs-var">ki</span></a></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isMultiplicityTy"><span class="hs-identifier hs-var">isMultiplicityTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621682570476"><span class="hs-identifier hs-var">ki</span></a></span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span></pre></body></html>